{"id":"../src/surface/buffer-management/instance-diff-manager.ts","dependencies":[{"name":"/Users/diniden/Desktop/VoidRay/fiesta/tsconfig.json","includedInParent":true,"mtime":1570670525118},{"name":"/Users/diniden/Desktop/VoidRay/fiesta/package.json","includedInParent":true,"mtime":1570672381660},{"name":"../../types","loc":{"line":3,"column":22},"parent":"/Users/diniden/Desktop/VoidRay/fiesta/src/surface/buffer-management/instance-diff-manager.ts","resolved":"/Users/diniden/Desktop/VoidRay/fiesta/src/types.ts"},{"name":"./instance-attribute-buffering/instance-attribute-color-diff-processor","loc":{"line":4,"column":56},"parent":"/Users/diniden/Desktop/VoidRay/fiesta/src/surface/buffer-management/instance-diff-manager.ts","resolved":"/Users/diniden/Desktop/VoidRay/fiesta/src/surface/buffer-management/instance-attribute-buffering/instance-attribute-color-diff-processor.ts"},{"name":"./instance-attribute-buffering/instance-attribute-diff-processor","loc":{"line":5,"column":50},"parent":"/Users/diniden/Desktop/VoidRay/fiesta/src/surface/buffer-management/instance-diff-manager.ts","resolved":"/Users/diniden/Desktop/VoidRay/fiesta/src/surface/buffer-management/instance-attribute-buffering/instance-attribute-diff-processor.ts"},{"name":"./uniform-buffering/uniform-color-diff-processor","loc":{"line":6,"column":45},"parent":"/Users/diniden/Desktop/VoidRay/fiesta/src/surface/buffer-management/instance-diff-manager.ts","resolved":"/Users/diniden/Desktop/VoidRay/fiesta/src/surface/buffer-management/uniform-buffering/uniform-color-diff-processor.ts"},{"name":"./uniform-buffering/uniform-diff-processor","loc":{"line":7,"column":39},"parent":"/Users/diniden/Desktop/VoidRay/fiesta/src/surface/buffer-management/instance-diff-manager.ts","resolved":"/Users/diniden/Desktop/VoidRay/fiesta/src/surface/buffer-management/uniform-buffering/uniform-diff-processor.ts"}],"generated":{"js":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar types_1 = require(\"../../types\");\n\nvar instance_attribute_color_diff_processor_1 = require(\"./instance-attribute-buffering/instance-attribute-color-diff-processor\");\n\nvar instance_attribute_diff_processor_1 = require(\"./instance-attribute-buffering/instance-attribute-diff-processor\");\n\nvar uniform_color_diff_processor_1 = require(\"./uniform-buffering/uniform-color-diff-processor\");\n\nvar uniform_diff_processor_1 = require(\"./uniform-buffering/uniform-diff-processor\");\n\nvar InstanceDiffManager = function () {\n  function InstanceDiffManager(layer, bufferManager) {\n    this.layer = layer;\n    this.bufferManager = bufferManager;\n  }\n\n  InstanceDiffManager.prototype.makeProcessor = function () {\n    if (this.processing) return this.processing;\n\n    if (this.layer.bufferType === types_1.LayerBufferType.INSTANCE_ATTRIBUTE || this.layer.bufferType === types_1.LayerBufferType.INSTANCE_ATTRIBUTE_PACKING) {\n      if (this.layer.picking) {\n        if (this.layer.picking.type === types_1.PickType.SINGLE) {\n          this.processor = new instance_attribute_color_diff_processor_1.InstanceAttributeColorDiffProcessor(this.layer, this.bufferManager);\n        }\n      }\n\n      if (!this.processor) {\n        this.processor = new instance_attribute_diff_processor_1.InstanceAttributeDiffProcessor(this.layer, this.bufferManager);\n      }\n    } else {\n      if (this.layer.picking) {\n        if (this.layer.picking.type === types_1.PickType.SINGLE) {\n          this.processor = new uniform_color_diff_processor_1.UniformColorDiffProcessor(this.layer, this.bufferManager);\n        }\n      }\n\n      if (!this.processor) {\n        this.processor = new uniform_diff_processor_1.UniformDiffProcessor(this.layer, this.bufferManager);\n      }\n    }\n\n    this.processing = [this.processor.changeInstance, this.processor.addInstance, this.processor.removeInstance];\n    return this.processing;\n  };\n\n  return InstanceDiffManager;\n}();\n\nexports.InstanceDiffManager = InstanceDiffManager;"},"sourceMaps":{"js":{"mappings":[{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":3,"column":0},"generated":{"line":7,"column":0}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":3,"column":0},"generated":{"line":7,"column":4}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":3,"column":0},"generated":{"line":7,"column":11}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":3,"column":0},"generated":{"line":7,"column":14}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":3,"column":0},"generated":{"line":7,"column":21}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":3,"column":0},"generated":{"line":7,"column":22}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":3,"column":0},"generated":{"line":7,"column":35}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":3,"column":0},"generated":{"line":7,"column":36}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":13,"column":0},"generated":{"line":9,"column":0}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":13,"column":0},"generated":{"line":9,"column":4}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":13,"column":0},"generated":{"line":9,"column":45}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":13,"column":0},"generated":{"line":9,"column":48}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":13,"column":0},"generated":{"line":9,"column":55}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":13,"column":0},"generated":{"line":9,"column":56}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":13,"column":0},"generated":{"line":9,"column":128}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":13,"column":0},"generated":{"line":9,"column":129}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":14,"column":0},"generated":{"line":11,"column":0}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":14,"column":0},"generated":{"line":11,"column":4}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":14,"column":0},"generated":{"line":11,"column":39}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":14,"column":0},"generated":{"line":11,"column":42}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":14,"column":0},"generated":{"line":11,"column":49}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":14,"column":0},"generated":{"line":11,"column":50}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":14,"column":0},"generated":{"line":11,"column":116}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":14,"column":0},"generated":{"line":11,"column":117}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":15,"column":0},"generated":{"line":13,"column":0}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":15,"column":0},"generated":{"line":13,"column":4}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":15,"column":0},"generated":{"line":13,"column":34}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":15,"column":0},"generated":{"line":13,"column":37}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":15,"column":0},"generated":{"line":13,"column":44}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":15,"column":0},"generated":{"line":13,"column":45}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":15,"column":0},"generated":{"line":13,"column":95}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":15,"column":0},"generated":{"line":13,"column":96}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":16,"column":0},"generated":{"line":15,"column":0}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":16,"column":0},"generated":{"line":15,"column":4}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":16,"column":0},"generated":{"line":15,"column":28}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":16,"column":0},"generated":{"line":15,"column":31}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":16,"column":0},"generated":{"line":15,"column":38}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":16,"column":0},"generated":{"line":15,"column":39}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":16,"column":0},"generated":{"line":15,"column":83}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":16,"column":0},"generated":{"line":15,"column":84}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":53,"column":0},"generated":{"line":17,"column":0}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":53,"column":0},"generated":{"line":17,"column":4}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":53,"column":0},"generated":{"line":17,"column":23}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":53,"column":0},"generated":{"line":17,"column":26}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":53,"column":0},"generated":{"line":17,"column":38}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":59,"column":2},"generated":{"line":18,"column":0}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":59,"column":2},"generated":{"line":18,"column":11}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":59,"column":2},"generated":{"line":18,"column":30}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":60,"column":4},"generated":{"line":18,"column":31}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":59,"column":2},"generated":{"line":18,"column":36}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":61,"column":4},"generated":{"line":18,"column":38}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":59,"column":2},"generated":{"line":18,"column":51}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":61,"column":56},"generated":{"line":18,"column":53}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":63,"column":4},"generated":{"line":19,"column":0}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":63,"column":9},"generated":{"line":19,"column":9}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":63,"column":4},"generated":{"line":19,"column":14}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":63,"column":17},"generated":{"line":19,"column":17}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":63,"column":4},"generated":{"line":19,"column":22}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":64,"column":4},"generated":{"line":20,"column":0}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":64,"column":9},"generated":{"line":20,"column":9}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":64,"column":4},"generated":{"line":20,"column":22}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":64,"column":25},"generated":{"line":20,"column":25}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":64,"column":4},"generated":{"line":20,"column":38}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":65,"column":3},"generated":{"line":21,"column":0}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":70,"column":2},"generated":{"line":23,"column":0}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":70,"column":2},"generated":{"line":23,"column":2}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":70,"column":2},"generated":{"line":23,"column":21}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":70,"column":2},"generated":{"line":23,"column":22}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":70,"column":2},"generated":{"line":23,"column":31}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":70,"column":2},"generated":{"line":23,"column":32}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":70,"column":2},"generated":{"line":23,"column":45}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":70,"column":2},"generated":{"line":23,"column":48}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":70,"column":2},"generated":{"line":23,"column":60}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":72,"column":4},"generated":{"line":24,"column":0}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":72,"column":8},"generated":{"line":24,"column":8}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":72,"column":13},"generated":{"line":24,"column":13}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":72,"column":4},"generated":{"line":24,"column":23}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":72,"column":25},"generated":{"line":24,"column":25}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":72,"column":32},"generated":{"line":24,"column":32}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":72,"column":37},"generated":{"line":24,"column":37}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":72,"column":25},"generated":{"line":24,"column":47}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":74,"column":4},"generated":{"line":26,"column":0}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":75,"column":6},"generated":{"line":26,"column":8}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":75,"column":11},"generated":{"line":26,"column":13}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":75,"column":6},"generated":{"line":26,"column":18}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":75,"column":17},"generated":{"line":26,"column":19}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":75,"column":6},"generated":{"line":26,"column":29}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":75,"column":32},"generated":{"line":26,"column":34}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":75,"column":32},"generated":{"line":26,"column":41}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":75,"column":32},"generated":{"line":26,"column":42}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":75,"column":32},"generated":{"line":26,"column":57}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":75,"column":48},"generated":{"line":26,"column":58}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":75,"column":6},"generated":{"line":26,"column":76}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":76,"column":6},"generated":{"line":26,"column":80}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":76,"column":11},"generated":{"line":26,"column":85}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":76,"column":6},"generated":{"line":26,"column":90}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":76,"column":17},"generated":{"line":26,"column":91}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":76,"column":6},"generated":{"line":26,"column":101}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":76,"column":32},"generated":{"line":26,"column":106}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":76,"column":32},"generated":{"line":26,"column":113}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":76,"column":32},"generated":{"line":26,"column":114}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":76,"column":32},"generated":{"line":26,"column":129}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":76,"column":48},"generated":{"line":26,"column":130}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":74,"column":4},"generated":{"line":26,"column":156}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":77,"column":6},"generated":{"line":26,"column":158}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":79,"column":6},"generated":{"line":27,"column":0}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":79,"column":10},"generated":{"line":27,"column":10}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":79,"column":15},"generated":{"line":27,"column":15}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":79,"column":10},"generated":{"line":27,"column":20}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":79,"column":21},"generated":{"line":27,"column":21}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":79,"column":6},"generated":{"line":27,"column":28}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":79,"column":30},"generated":{"line":27,"column":30}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":80,"column":8},"generated":{"line":28,"column":0}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":80,"column":12},"generated":{"line":28,"column":12}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":80,"column":17},"generated":{"line":28,"column":17}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":80,"column":12},"generated":{"line":28,"column":22}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":80,"column":23},"generated":{"line":28,"column":23}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":80,"column":12},"generated":{"line":28,"column":30}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":80,"column":31},"generated":{"line":28,"column":31}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":80,"column":12},"generated":{"line":28,"column":35}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":80,"column":40},"generated":{"line":28,"column":40}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":80,"column":40},"generated":{"line":28,"column":47}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":80,"column":40},"generated":{"line":28,"column":48}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":80,"column":40},"generated":{"line":28,"column":56}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":80,"column":49},"generated":{"line":28,"column":57}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":80,"column":8},"generated":{"line":28,"column":63}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":80,"column":57},"generated":{"line":28,"column":65}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":81,"column":10},"generated":{"line":29,"column":0}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":81,"column":15},"generated":{"line":29,"column":15}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":81,"column":10},"generated":{"line":29,"column":24}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":81,"column":27},"generated":{"line":29,"column":27}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":81,"column":31},"generated":{"line":29,"column":31}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":81,"column":31},"generated":{"line":29,"column":72}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":81,"column":31},"generated":{"line":29,"column":73}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":81,"column":27},"generated":{"line":29,"column":108}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":82,"column":12},"generated":{"line":29,"column":109}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":82,"column":17},"generated":{"line":29,"column":114}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":81,"column":27},"generated":{"line":29,"column":119}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":83,"column":12},"generated":{"line":29,"column":121}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":83,"column":17},"generated":{"line":29,"column":126}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":81,"column":27},"generated":{"line":29,"column":139}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":81,"column":10},"generated":{"line":29,"column":140}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":85,"column":9},"generated":{"line":30,"column":0}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":86,"column":7},"generated":{"line":31,"column":0}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":88,"column":6},"generated":{"line":33,"column":0}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":88,"column":10},"generated":{"line":33,"column":10}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":88,"column":11},"generated":{"line":33,"column":11}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":88,"column":16},"generated":{"line":33,"column":16}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":88,"column":6},"generated":{"line":33,"column":25}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":88,"column":27},"generated":{"line":33,"column":27}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":89,"column":8},"generated":{"line":34,"column":0}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":89,"column":13},"generated":{"line":34,"column":13}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":89,"column":8},"generated":{"line":34,"column":22}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":89,"column":25},"generated":{"line":34,"column":25}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":89,"column":29},"generated":{"line":34,"column":29}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":89,"column":29},"generated":{"line":34,"column":64}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":89,"column":29},"generated":{"line":34,"column":65}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":89,"column":25},"generated":{"line":34,"column":95}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":90,"column":10},"generated":{"line":34,"column":96}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":90,"column":15},"generated":{"line":34,"column":101}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":89,"column":25},"generated":{"line":34,"column":106}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":91,"column":10},"generated":{"line":34,"column":108}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":91,"column":15},"generated":{"line":34,"column":113}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":89,"column":25},"generated":{"line":34,"column":126}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":89,"column":8},"generated":{"line":34,"column":127}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":93,"column":7},"generated":{"line":35,"column":0}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":94,"column":5},"generated":{"line":36,"column":0}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":74,"column":4},"generated":{"line":36,"column":5}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":94,"column":11},"generated":{"line":36,"column":11}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":96,"column":6},"generated":{"line":37,"column":0}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":96,"column":10},"generated":{"line":37,"column":10}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":96,"column":15},"generated":{"line":37,"column":15}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":96,"column":10},"generated":{"line":37,"column":20}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":96,"column":21},"generated":{"line":37,"column":21}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":96,"column":6},"generated":{"line":37,"column":28}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":96,"column":30},"generated":{"line":37,"column":30}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":97,"column":8},"generated":{"line":38,"column":0}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":97,"column":12},"generated":{"line":38,"column":12}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":97,"column":17},"generated":{"line":38,"column":17}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":97,"column":12},"generated":{"line":38,"column":22}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":97,"column":23},"generated":{"line":38,"column":23}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":97,"column":12},"generated":{"line":38,"column":30}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":97,"column":31},"generated":{"line":38,"column":31}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":97,"column":12},"generated":{"line":38,"column":35}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":97,"column":40},"generated":{"line":38,"column":40}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":97,"column":40},"generated":{"line":38,"column":47}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":97,"column":40},"generated":{"line":38,"column":48}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":97,"column":40},"generated":{"line":38,"column":56}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":97,"column":49},"generated":{"line":38,"column":57}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":97,"column":8},"generated":{"line":38,"column":63}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":97,"column":57},"generated":{"line":38,"column":65}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":98,"column":10},"generated":{"line":39,"column":0}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":98,"column":15},"generated":{"line":39,"column":15}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":98,"column":10},"generated":{"line":39,"column":24}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":98,"column":27},"generated":{"line":39,"column":27}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":98,"column":31},"generated":{"line":39,"column":31}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":98,"column":31},"generated":{"line":39,"column":61}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":98,"column":31},"generated":{"line":39,"column":62}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":98,"column":27},"generated":{"line":39,"column":87}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":99,"column":12},"generated":{"line":39,"column":88}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":99,"column":17},"generated":{"line":39,"column":93}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":98,"column":27},"generated":{"line":39,"column":98}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":100,"column":12},"generated":{"line":39,"column":100}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":100,"column":17},"generated":{"line":39,"column":105}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":98,"column":27},"generated":{"line":39,"column":118}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":98,"column":10},"generated":{"line":39,"column":119}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":102,"column":9},"generated":{"line":40,"column":0}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":103,"column":7},"generated":{"line":41,"column":0}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":105,"column":6},"generated":{"line":43,"column":0}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":105,"column":10},"generated":{"line":43,"column":10}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":105,"column":11},"generated":{"line":43,"column":11}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":105,"column":16},"generated":{"line":43,"column":16}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":105,"column":6},"generated":{"line":43,"column":25}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":105,"column":27},"generated":{"line":43,"column":27}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":106,"column":8},"generated":{"line":44,"column":0}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":106,"column":13},"generated":{"line":44,"column":13}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":106,"column":8},"generated":{"line":44,"column":22}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":106,"column":25},"generated":{"line":44,"column":25}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":106,"column":29},"generated":{"line":44,"column":29}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":106,"column":29},"generated":{"line":44,"column":53}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":106,"column":29},"generated":{"line":44,"column":54}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":106,"column":25},"generated":{"line":44,"column":74}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":107,"column":10},"generated":{"line":44,"column":75}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":107,"column":15},"generated":{"line":44,"column":80}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":106,"column":25},"generated":{"line":44,"column":85}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":108,"column":10},"generated":{"line":44,"column":87}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":108,"column":15},"generated":{"line":44,"column":92}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":106,"column":25},"generated":{"line":44,"column":105}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":106,"column":8},"generated":{"line":44,"column":106}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":110,"column":7},"generated":{"line":45,"column":0}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":111,"column":5},"generated":{"line":46,"column":0}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":113,"column":4},"generated":{"line":48,"column":0}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":113,"column":9},"generated":{"line":48,"column":9}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":113,"column":4},"generated":{"line":48,"column":19}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":113,"column":22},"generated":{"line":48,"column":22}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":114,"column":6},"generated":{"line":48,"column":23}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":114,"column":11},"generated":{"line":48,"column":28}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":114,"column":6},"generated":{"line":48,"column":37}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":114,"column":21},"generated":{"line":48,"column":38}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":113,"column":22},"generated":{"line":48,"column":52}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":115,"column":6},"generated":{"line":48,"column":54}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":115,"column":11},"generated":{"line":48,"column":59}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":115,"column":6},"generated":{"line":48,"column":68}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":115,"column":21},"generated":{"line":48,"column":69}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":113,"column":22},"generated":{"line":48,"column":80}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":116,"column":6},"generated":{"line":48,"column":82}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":116,"column":11},"generated":{"line":48,"column":87}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":116,"column":6},"generated":{"line":48,"column":96}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":116,"column":21},"generated":{"line":48,"column":97}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":113,"column":22},"generated":{"line":48,"column":111}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":113,"column":4},"generated":{"line":48,"column":112}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":119,"column":4},"generated":{"line":49,"column":0}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":119,"column":11},"generated":{"line":49,"column":11}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":119,"column":16},"generated":{"line":49,"column":16}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":119,"column":4},"generated":{"line":49,"column":26}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":120,"column":3},"generated":{"line":50,"column":0}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":70,"column":2},"generated":{"line":50,"column":3}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":121,"column":0},"generated":{"line":52,"column":0}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":121,"column":0},"generated":{"line":52,"column":9}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":121,"column":0},"generated":{"line":52,"column":28}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":53,"column":0},"generated":{"line":53,"column":0}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":53,"column":0},"generated":{"line":53,"column":1}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":53,"column":0},"generated":{"line":53,"column":3}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":53,"column":13},"generated":{"line":55,"column":0}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":53,"column":13},"generated":{"line":55,"column":7}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":53,"column":13},"generated":{"line":55,"column":8}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":53,"column":13},"generated":{"line":55,"column":27}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":53,"column":13},"generated":{"line":55,"column":30}},{"source":"../src/surface/buffer-management/instance-diff-manager.ts","name":null,"original":{"line":53,"column":13},"generated":{"line":55,"column":49}}],"sources":{"../src/surface/buffer-management/instance-diff-manager.ts":"import { Instance } from '../../instance-provider/instance';\nimport { ResourceRouter } from '../../resources';\nimport {\n  IInstanceAttribute,\n  INonePickingMetrics,\n  ISinglePickingMetrics,\n  LayerBufferType,\n  PickType,\n} from '../../types';\nimport { BaseDiffProcessor } from './base-diff-processor';\nimport { IBufferLocationGroup } from './buffer-manager-base';\nimport { BufferManagerBase, IBufferLocation } from './buffer-manager-base';\nimport { InstanceAttributeColorDiffProcessor } from './instance-attribute-buffering/instance-attribute-color-diff-processor';\nimport { InstanceAttributeDiffProcessor } from './instance-attribute-buffering/instance-attribute-diff-processor';\nimport { UniformColorDiffProcessor } from './uniform-buffering/uniform-color-diff-processor';\nimport { UniformDiffProcessor } from './uniform-buffering/uniform-diff-processor';\n\n/** Signature of a method that handles a diff */\nexport type DiffHandler<T extends Instance> = (\n  manager: BaseDiffProcessor<T>,\n  instance: T,\n  propIds: number[],\n  bufferLocations?: IBufferLocation | IBufferLocationGroup<IBufferLocation>\n) => void;\n/** A set of diff handling methods in this order [change, add, remove] */\nexport type DiffLookup<T extends Instance> = DiffHandler<T>[];\n\n/**\n * This interface is the bare minimum properties needed for this diff manager to map instance updates to\n * uniform changes. We don't use a Layer as a target explicitly to avoid circular/hard dependencies\n */\nexport interface IInstanceDiffManagerTarget<T extends Instance> {\n  /** This is the attribute for the target that represents the _active injected value */\n  activeAttribute: IInstanceAttribute<T>;\n  /** This is used by the automated easing system and is the easing Ids used by the layer for given attributes */\n  easingId: { [key: string]: number };\n  /** This is all of the instance attributes applied to the target */\n  instanceAttributes: IInstanceAttribute<T>[];\n  /** This is the picking metrics for how Instances are picked with the mouse */\n  picking: ISinglePickingMetrics<T> | INonePickingMetrics;\n  /** This is the resource manager for the target which let's us fetch information from an atlas for an instance */\n  resource: ResourceRouter;\n  /** This is the manager that links an instance to it's uniform cluster for populating the uniform buffer */\n  bufferManager: BufferManagerBase<T, IBufferLocation>;\n  /** This is the buffering strategy being used */\n  bufferType: LayerBufferType;\n}\n\n/**\n * This class manages the process of taking the diffs of a layer and executing methods on those diffs to perform\n * updates to the uniforms that control those instances.\n */\nexport class InstanceDiffManager<T extends Instance> {\n  bufferManager: BufferManagerBase<T, IBufferLocation>;\n  processor: BaseDiffProcessor<T>;\n  processing: DiffLookup<T>;\n  layer: IInstanceDiffManagerTarget<T>;\n\n  constructor(\n    layer: IInstanceDiffManagerTarget<T>,\n    bufferManager: BufferManagerBase<T, IBufferLocation>\n  ) {\n    this.layer = layer;\n    this.bufferManager = bufferManager;\n  }\n\n  /**\n   * This returns the proper diff processor for handling diffs\n   */\n  makeProcessor(): DiffLookup<T> {\n    // If this manager has already figured out which processor to use. Just return that processor.\n    if (this.processing) return this.processing;\n\n    if (\n      this.layer.bufferType === LayerBufferType.INSTANCE_ATTRIBUTE ||\n      this.layer.bufferType === LayerBufferType.INSTANCE_ATTRIBUTE_PACKING\n    ) {\n      // Now we look at the state of the layer to determine the best diff processor strategy\n      if (this.layer.picking) {\n        if (this.layer.picking.type === PickType.SINGLE) {\n          this.processor = new InstanceAttributeColorDiffProcessor(\n            this.layer,\n            this.bufferManager\n          );\n        }\n      }\n\n      if (!this.processor) {\n        this.processor = new InstanceAttributeDiffProcessor(\n          this.layer,\n          this.bufferManager\n        );\n      }\n    } else {\n      // Now we look at the state of the layer to determine the best diff processor strategy\n      if (this.layer.picking) {\n        if (this.layer.picking.type === PickType.SINGLE) {\n          this.processor = new UniformColorDiffProcessor(\n            this.layer,\n            this.bufferManager\n          );\n        }\n      }\n\n      if (!this.processor) {\n        this.processor = new UniformDiffProcessor(\n          this.layer,\n          this.bufferManager\n        );\n      }\n    }\n\n    this.processing = [\n      this.processor.changeInstance,\n      this.processor.addInstance,\n      this.processor.removeInstance,\n    ];\n\n    return this.processing;\n  }\n}\n"},"lineCount":null}},"error":null,"hash":"383956181f3961575b5a3927c359e03e","cacheData":{"env":{}}}