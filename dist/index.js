!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports["network-bubble-chart"]=t():e["network-bubble-chart"]=t()}(window,function(){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(n,i,function(t){return e[t]}.bind(null,i));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=122)}([function(e,t,r){"use strict";var n,i;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.ONE=1]="ONE",e[e.TWO=2]="TWO",e[e.THREE=3]="THREE",e[e.FOUR=4]="FOUR"}(t.InstanceBlockIndex||(t.InstanceBlockIndex={})),function(e){e[e.ONE=1]="ONE",e[e.TWO=2]="TWO",e[e.THREE=3]="THREE",e[e.FOUR=4]="FOUR",e[e.MAT4X4=16]="MAT4X4",e[e.ATLAS=99]="ATLAS"}(i=t.InstanceAttributeSize||(t.InstanceAttributeSize={})),t.instanceAttributeSizeFloatCount=((n={})[i.ONE]=1,n[i.TWO]=2,n[i.THREE]=3,n[i.FOUR]=4,n[i.MAT4X4]=16,n[i.ATLAS]=4,n),function(e){e[e.ONE=1]="ONE",e[e.TWO=2]="TWO",e[e.THREE=3]="THREE",e[e.FOUR=4]="FOUR",e[e.MATRIX3=9]="MATRIX3",e[e.MATRIX4=16]="MATRIX4",e[e.VEC4_ARRAY=98]="VEC4_ARRAY",e[e.ATLAS=99]="ATLAS"}(t.UniformSize||(t.UniformSize={})),function(e){e[e.ONE=1]="ONE",e[e.TWO=2]="TWO",e[e.THREE=3]="THREE",e[e.FOUR=4]="FOUR"}(t.VertexAttributeSize||(t.VertexAttributeSize={})),function(e){e[e._2=2]="_2",e[e._4=4]="_4",e[e._8=8]="_8",e[e._16=16]="_16",e[e._32=32]="_32",e[e._64=64]="_64",e[e._128=128]="_128",e[e._256=256]="_256",e[e._512=512]="_512",e[e._1024=1024]="_1024",e[e._2048=2048]="_2048",e[e._4096=4096]="_4096"}(t.TextureSize||(t.TextureSize={})),function(e){e[e.ATLAS=0]="ATLAS",e[e.FONT=1]="FONT"}(t.ResourceType||(t.ResourceType={})),function(e){e[e.zyx=0]="zyx",e[e.zyz=1]="zyz",e[e.zxy=2]="zxy",e[e.zxz=3]="zxz",e[e.yxz=4]="yxz",e[e.yxy=5]="yxy",e[e.yzx=6]="yzx",e[e.yzy=7]="yzy",e[e.xyz=8]="xyz",e[e.xyx=9]="xyx",e[e.xzy=10]="xzy",e[e.xzx=11]="xzx"}(t.EulerOrder||(t.EulerOrder={})),t.isInstanceAttributeVector=function(e){return void 0!==e.size&&e.size<=4},t.isResourceAttribute=function(e){return Boolean(e&&e.resource)},function(e){e[e.VERTEX=1]="VERTEX",e[e.FRAGMENT=2]="FRAGMENT",e[e.ALL=3]="ALL"}(t.ShaderInjectionTarget||(t.ShaderInjectionTarget={})),t.NOOP=function(){},t.whiteSpaceRegEx=/\s/g,t.whiteSpaceCharRegEx=/\s/,t.isWhiteSpace=t.whiteSpaceCharRegEx.test.bind(t.whiteSpaceCharRegEx),t.newLineRegEx=/\r\n|\n|\r/g,t.newLineCharRegEx=/\r\n|\n|\r/,t.isNewline=t.newLineCharRegEx.test.bind(t.newLineCharRegEx),t.createMaterialOptions=function(e){return e},function(e){e[e.NONE=0]="NONE",e[e.SINGLE=1]="SINGLE"}(t.PickType||(t.PickType={})),function(e){e[e.CHANGE=0]="CHANGE",e[e.INSERT=1]="INSERT",e[e.REMOVE=2]="REMOVE"}(t.InstanceDiffType||(t.InstanceDiffType={})),function(e){e[e.NO_WEBGL_CONTEXT=0]="NO_WEBGL_CONTEXT"}(t.SurfaceErrorType||(t.SurfaceErrorType={}))},function(e,t,r){"use strict";function n(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}Object.defineProperty(t,"__esModule",{value:!0}),n(r(15)),n(r(71)),n(r(77)),n(r(78)),n(r(137)),n(r(138)),n(r(79)),n(r(72)),n(r(56)),n(r(73)),n(r(55)),n(r(34)),n(r(139)),n(r(10))},function(e,t,r){(function(n){function i(){var e;try{e=t.storage.debug}catch(e){}return!e&&void 0!==n&&"env"in n&&(e=n.env.DEBUG),e}(t=e.exports=r(128)).log=function(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},t.formatArgs=function(e){var r=this.useColors;if(e[0]=(r?"%c":"")+this.namespace+(r?" %c":" ")+e[0]+(r?"%c ":" ")+"+"+t.humanize(this.diff),!r)return;var n="color: "+this.color;e.splice(1,0,n,"color: inherit");var i=0,o=0;e[0].replace(/%[a-zA-Z%]/g,function(e){"%%"!==e&&(i++,"%c"===e&&(o=i))}),e.splice(o,0,n)},t.save=function(e){try{null==e?t.storage.removeItem("debug"):t.storage.debug=e}catch(e){}},t.load=i,t.useColors=function(){if("undefined"!=typeof window&&window.process&&"renderer"===window.process.type)return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(e){}}(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}},t.enable(i())}).call(this,r(127))},function(e,t,r){"use strict";function n(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}Object.defineProperty(t,"__esModule",{value:!0}),n(r(29)),n(r(104)),n(r(9)),n(r(189))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=Math.sqrt,i=Math.max,o=Math.min,A=Math.floor,a=Math.ceil,s=Math.abs;function c(e,t){return(e=e||[])[0]=t,e}function u(e,t,r){return c(r,e[0]+t[0])}function l(e,t){return c(t,a(e[0]))}function h(e,t){return e[0]===t[0]}function d(e,t){return c(t,e[0])}function f(e,t,r){return c(r,0)}function p(e,t,r){return c(r,e[0]/t[0])}function g(e){return c(e,0)}function B(e,t){t=t||[];for(var r=0,n=e.length;r<n;++r)t.push(e[r][0]);return t}function w(e,t){return c(t,A(e[0]))}function y(e,t){return c(t,1/e[0])}function v(e,t,r){return c(r,e[0]*t)}function m(e,t,r){return c(r,e[0]-t[0])}function b(e,t,r){return c(r,i(e[0],t[0]))}function E(e,t,r){return c(r,o(e[0],t[0]))}function C(e,t,r){return c(r,e[0]*t[0])}function T(e,t){return c(t,1)}function U(e,t){return e[0]*t[0]}function _(e,t,r,n){return u(v(m(t,e),r),e,n)}function Q(e){return n(U(e,e))}function F(e,t,r){return(e=e||[])[0]=t,e[1]=r,e}function x(e,t,r){return F(r,e[0]+t[0],e[1]+t[1])}function S(e,t){return F(t,a(e[0]),a(e[1]))}function I(e,t){return F(t,e[0],e[1])}function M(e,t,r){return F(r,0,0)}function O(e,t){return e[0]===t[0]&&e[1]===t[1]}function R(e,t,r){return F(r,e[0]/t[0],e[1]/t[1])}function P(e){return F(e,0,0)}function N(e,t){t=t||[];for(var r=0,n=e.length;r<n;++r){var i=e[r];t.push(i[0]),t.push(i[1])}return t}function L(e,t){return F(t,A(e[0]),A(e[1]))}function H(e,t){return F(t,1/e[0],1/e[1])}function D(e,t,r){return F(r,i(e[0],t[0]),i(e[1],t[1]))}function k(e,t,r){return F(r,o(e[0],t[0]),o(e[1],t[1]))}function z(e,t,r){return F(r,e[0]*t,e[1]*t)}function K(e,t,r){return F(r,e[0]-t[0],e[1]-t[1])}function j(e,t,r){return F(r,e[0]*t[0],e[1]*t[1])}function G(e,t){var r=W(e);return F(t,e[0]/r,e[1]/r)}function V(e,t){return e[0]*t[0]+e[1]*t[1]}function X(e,t,r,n){return x(z(K(t,e),r),e,n)}function W(e){return n(V(e,e))}function Y(e,t,r,n){return(e=e||[])[0]=t,e[1]=r,e[2]=n,e}function J(e,t,r){return Y(r,e[0]+t[0],e[1]+t[1],e[2]+t[2])}function q(e,t){return Y(t,a(e[0]),a(e[1]),a(e[2]))}function Z(e,t){return Y(t,e[0],e[1],e[2])}function $(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]}function ee(e,t,r){return Y(r,e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0])}function te(e,t,r){return Y(r,e[0]/t[0],e[1]/t[1],e[2]/t[2])}function re(e){return Y(e,0,0,0)}function ne(e,t){t=t||[];for(var r=0,n=e.length;r<n;++r){var i=e[r];t.push(i[0]),t.push(i[1]),t.push(i[2])}return t}function ie(e,t){return Y(t,A(e[0]),A(e[1]),A(e[2]))}function oe(e,t){return Y(t,1/e[0],1/e[1],1/e[2])}function Ae(e,t,r){return Y(r,e[0]*t,e[1]*t,e[2]*t)}function ae(e,t,r){return Y(r,e[0]-t[0],e[1]-t[1],e[2]-t[2])}function se(e,t,r){return Y(r,e[0]*t[0],e[1]*t[1],e[2]*t[2])}function ce(e,t,r,n){return J(Ae(ae(t,e),r),e,n)}function ue(e){return n(fe(e,e))}function le(e,t,r){return Y(r,i(e[0],t[0]),i(e[1],t[1]),i(e[2],t[2]))}function he(e,t,r){return Y(r,o(e[0],t[0]),o(e[1],t[1]),o(e[2],t[2]))}function de(e,t){var r=ue(e);return Y(t,e[0]/r,e[1]/r,e[2]/r)}function fe(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function pe(e,t,r,n,i){return(e=e||[])[0]=t,e[1]=r,e[2]=n,e[3]=i,e}function ge(e,t,r){return pe(r,e[0]+t[0],e[1]+t[1],e[2]+t[2],e[3]+t[3])}function Be(e,t){return pe(t,a(e[0]),a(e[1]),a(e[2]),a(e[3]))}function we(e,t){return pe(t,e[0],e[1],e[2],e[3])}function ye(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]}function ve(e,t,r){return pe(r,0,0,0,1)}function me(e,t,r){return pe(r,e[0]/t[0],e[1]/t[1],e[2]/t[2],e[3]/t[3])}function be(e){return pe(e,0,0,0,0)}function Ee(e,t){t=t||[];for(var r=0,n=e.length;r<n;++r){var i=e[r];t.push(i[0]),t.push(i[1]),t.push(i[2]),t.push(i[3])}return t}function Ce(e,t){return pe(t,A(e[0]),A(e[1]),A(e[2]),A(e[3]))}function Te(e,t){return pe(t,1/e[0],1/e[1],1/e[2],1/e[3])}function Ue(e,t,r){return pe(r,e[0]*t,e[1]*t,e[2]*t,e[3]*t)}function _e(e,t,r){return pe(r,e[0]-t[0],e[1]-t[1],e[2]-t[2],e[3]-t[3])}function Qe(e,t,r){return pe(r,e[0]*t[0],e[1]*t[1],e[2]*t[2],e[3]*t[3])}function Fe(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]}function xe(e,t,r,n){return ge(Ue(_e(t,e),r),e,n)}function Se(e){return n(Fe(e,e))}function Ie(e,t,r){return pe(r,i(e[0],t[0]),i(e[1],t[1]),i(e[2],t[2]),i(e[3],t[3]))}function Me(e,t,r){return pe(r,o(e[0],t[0]),o(e[1],t[1]),o(e[2],t[2]),o(e[3],t[3]))}function Oe(e,t){var r=Se(e);return pe(t,e[0]/r,e[1]/r,e[2]/r,e[3]/r)}t.isVec1=function(e){return e&&Array.isArray(e)&&1===e.length},t.isVec2=function(e){return e&&Array.isArray(e)&&2===e.length},t.isVec3=function(e){return e&&Array.isArray(e)&&3===e.length},t.isVec4=function(e){return e&&Array.isArray(e)&&4===e.length},t.apply1=c,t.add1=u,t.ceil1=l,t.compare1=h,t.fuzzyCompare1=function(e,t,r){return s(e[0]-t[0])<=r},t.copy1=d,t.cross1=f,t.divide1=p,t.empty1=g,t.flatten1=B,t.floor1=w,t.inverse1=y,t.scale1=v,t.subtract1=m,t.max1=b,t.min1=E,t.multiply1=C,t.normalize1=T,t.dot1=U,t.linear1=_,t.length1=Q,t.vec1=function(e){for(var t,r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];if(r=r||[],(t=Array.isArray(e)?e.slice(0,1):[e]).length<1)for(var i=0,o=r.length;i<o&&t.length<1;++i){var A=r[i];Array.isArray(A)?t.push.apply(t,A.slice(0,1-t.length)):t.push(A)}for(;t.length<1;)t.push(0);return t},t.apply2=F,t.add2=x,t.ceil2=S,t.copy2=I,t.cross2=M,t.compare2=O,t.fuzzyCompare2=function(e,t,r){return s(e[0]-t[0])<=r&&s(e[1]-t[1])<=r},t.divide2=R,t.empty2=P,t.flatten2=N,t.floor2=L,t.inverse2=H,t.max2=D,t.min2=k,t.scale2=z,t.subtract2=K,t.multiply2=j,t.normalize2=G,t.dot2=V,t.linear2=X,t.length2=W,t.vec2=function(e){for(var t,r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];if(r=r||[],(t=Array.isArray(e)?e.slice(0,2):[e]).length<2)for(var i=0,o=r.length;i<o&&t.length<2;++i){var A=r[i];Array.isArray(A)?t.push.apply(t,A.slice(0,2-t.length)):t.push(A)}for(;t.length<2;)t.push(0);return t},t.apply3=Y,t.add3=J,t.ceil3=q,t.copy3=Z,t.compare3=$,t.fuzzyCompare3=function(e,t,r){return s(e[0]-t[0])<=r&&s(e[1]-t[1])<=r&&s(e[2]-t[2])<=r},t.cross3=ee,t.divide3=te,t.empty3=re,t.flatten3=ne,t.floor3=ie,t.inverse3=oe,t.scale3=Ae,t.subtract3=ae,t.multiply3=se,t.linear3=ce,t.length3=ue,t.max3=le,t.min3=he,t.normalize3=de,t.dot3=fe,t.vec3=function(e){for(var t,r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];if(r=r||[],(t=Array.isArray(e)?e.slice(0,3):[e]).length<3)for(var i=0,o=r.length;i<o&&t.length<3;++i){var A=r[i];Array.isArray(A)?t.push.apply(t,A.slice(0,3-t.length)):t.push(A)}for(;t.length<3;)t.push(0);return t},t.up3=function(e,t,r){return de(ee(ee(e,t,r=r||[0,0,0]),e,r),r)},t.right3=function(e,t,r){return de(ee(e,t,r=r||[0,0,0]),r)},t.left3=function(e,t,r){return de(ee(t,e,r=r||[0,0,0]),r)},t.down3=function(e,t,r){return de(ee(e,ee(e,t,r=r||[0,0,0]),r),r)},t.apply4=pe,t.add4=ge,t.add4by3=function(e,t,r){return pe(r,e[0]+t[0],e[1]+t[1],e[2]+t[2],e[3])},t.ceil4=Be,t.copy4=we,t.compare4=ye,t.fuzzyCompare4=function(e,t,r){return s(e[0]-t[0])<=r&&s(e[1]-t[1])<=r&&s(e[2]-t[2])<=r&&s(e[3]-t[3])<=r},t.cross4=ve,t.divide4=me,t.empty4=be,t.flatten4=Ee,t.floor4=Ce,t.inverse4=Te,t.scale4=Ue,t.subtract4=_e,t.multiply4=Qe,t.dot4=Fe,t.linear4=xe,t.length4=Se,t.max4=Ie,t.min4=Me,t.normalize4=Oe,t.vec4=function(e){for(var t,r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];if(r=r||[],(t=Array.isArray(e)?e.slice(0,4):[e]).length<4)for(var i=0,o=r.length;i<o&&t.length<4;++i){var A=r[i];Array.isArray(A)?t.push.apply(t,A.slice(0,4-t.length)):t.push(A)}for(;t.length<4;)t.push(0);return t},t.color4FromHex3=function(e,t){return pe(t=t||[0,0,0,0],((16711680&e)>>16)/255,((65280&e)>>8)/255,(255&e)/255,1)},t.color4FromHex4=function(e,t){return pe(t=t||[0,0,0,0],((4278190080&e)>>24)/255,((16711680&e)>>16)/255,((65280&e)>>8)/255,(255&e)/255)},t.vec1Methods={add:u,ceil:l,copy:d,compare:h,cross:f,divide:p,dot:U,empty:g,flatten:B,floor:w,inverse:y,length:Q,linear:_,max:b,min:E,multiply:C,normalize:T,scale:v,subtract:m},t.vec2Methods={add:x,ceil:S,copy:I,compare:O,cross:M,divide:R,dot:V,empty:P,flatten:N,floor:L,inverse:H,length:W,linear:X,max:D,min:k,multiply:j,normalize:G,scale:z,subtract:K},t.vec3Methods={add:J,ceil:q,copy:Z,compare:$,cross:ee,divide:te,dot:fe,empty:re,flatten:ne,floor:ie,inverse:oe,length:ue,linear:ce,max:le,min:he,multiply:se,normalize:de,scale:Ae,subtract:ae},t.vec4Methods={add:ge,ceil:Be,copy:we,compare:ye,cross:ve,divide:me,dot:Fe,empty:be,flatten:Ee,floor:Ce,inverse:Te,length:Se,linear:xe,max:Ie,min:Me,multiply:Qe,normalize:Oe,scale:Ue,subtract:_e},t.VecMath=function(e){return 1===e.length?t.vec1Methods:2===e.length?t.vec2Methods:3===e.length?t.vec3Methods:t.vec4Methods},t.toString1=function(e){return"["+e[0]+"]"},t.toString2=function(e){return"["+e[0]+", "+e[1]+"]"},t.toString3=function(e){return"["+e[0]+", "+e[1]+", "+e[2]+"]"},t.toString4=function(e){return"["+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+"]"}},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.baseShaderModules=function(t){var r=e.prototype.baseShaderModules.call(this,t);return r.vs.push("world2D"),r},t}(r(18).Layer);t.Layer2D=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=Math.min,i=Math.max,o=function(){function e(e){this.x=0,this.y=0,this.width=0,this.height=0,this.x=e.x||e.left||0,this.y=e.y||e.top||0,this.height=e.height||(e.bottom||0)-this.y||0,this.width=e.width||(e.right||0)-this.x||0}return Object.defineProperty(e.prototype,"area",{get:function(){return this.width*this.height},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"left",{get:function(){return this.x},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"mid",{get:function(){return[this.x+this.width/2,this.y+this.height/2]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"right",{get:function(){return this.x+this.width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"top",{get:function(){return this.y},enumerable:!0,configurable:!0}),e.emptyBounds=function(){return new e({height:0,width:0,x:0,y:0})},e.prototype.containsPoint=function(e){return!(e[0]<this.x||e[1]<this.y||e[0]>this.right||e[1]>this.bottom)},e.prototype.encapsulate=function(t){return t instanceof e?(t.x<this.x&&(this.width+=Math.abs(t.x-this.x),this.x=t.x),t.y<this.y&&(this.height+=Math.abs(t.y-this.y),this.y=t.y),this.right<t.right&&(this.width+=t.right-this.right),this.bottom<t.bottom&&(this.height+=t.bottom-this.bottom),!0):(t[0]<this.x&&(this.width+=this.x-t[0],this.x=t[0]),t[0]>this.right&&(this.width+=t[0]-this.x),t[1]<this.y&&(this.height+=this.y-t[1],this.y=t[1]),t[1]>this.bottom&&(this.height+=t[1]-this.y),!0)},e.prototype.encapsulateAll=function(t){if(!(t.length<=0)){var r=Number.MAX_SAFE_INTEGER,o=Number.MIN_SAFE_INTEGER,A=Number.MAX_SAFE_INTEGER,a=Number.MIN_SAFE_INTEGER;if(t[0]instanceof e)for(var s=t,c=0,u=s.length;c<u;++c){var l=s[c];r=n(r,l.left),o=i(o,l.right),A=n(A,l.top),a=i(a,l.bottom)}else{var h=t;for(c=0,u=h.length;c<u;++c){var d=h[c],f=d[0],p=d[1];r=n(r,f),o=i(o,f),A=n(A,p),a=i(a,p)}}this.x=Math.min(this.x,r),this.y=Math.min(this.y,A),this.width=Math.max(this.width,o-r),this.height=Math.max(this.height,a-A)}},e.prototype.fits=function(e){return this.width===e.width&&this.height===e.height?1:this.width>=e.width&&this.height>=e.height?2:0},e.prototype.hitBounds=function(e){return!(this.right<e.x||this.x>e.right||this.bottom<e.y||this.y>e.bottom)},e.prototype.isInside=function(e){return this.x>=e.x&&this.right<=e.right&&this.y>=e.y&&this.bottom<=e.bottom},Object.defineProperty(e.prototype,"location",{get:function(){return[this.x,this.y]},enumerable:!0,configurable:!0}),e.prototype.toString=function(){return"{x: "+this.x+" y:"+this.y+" w:"+this.width+" h:"+this.height+"}"},e}();t.Bounds=o},function(e,t,r){"use strict";function n(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}Object.defineProperty(t,"__esModule",{value:!0}),n(r(141)),n(r(142)),n(r(57)),n(r(80)),n(r(12)),n(r(81)),n(r(143)),n(r(144)),n(r(82)),n(r(69)),n(r(24)),n(r(37)),n(r(83)),n(r(25))},function(e,t,r){"use strict";function n(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}Object.defineProperty(t,"__esModule",{value:!0}),n(r(74)),n(r(75)),n(r(76))},function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,A=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)A=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(A=(o<3?i(A):o>3?i(t,r,A):i(t,r))||A);return o>3&&A&&Object.defineProperty(t,r,A),A};Object.defineProperty(t,"__esModule",{value:!0});var i=r(105),o=r(29),A=0,a=function(){function e(t){this.changes={},this._easing=new Map,this.observableStorage=[],this._uid=e.newUID,this.reactivate=!1,this._id=t.id||"",this.active=t.active||this.active}return Object.defineProperty(e,"newUID",{get:function(){return A=++A%16777215},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"active",{get:function(){return this._active},set:function(e){this._active=e,this.reactivate=!0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"observableDisposer",{get:function(){var e=this;return function(){return delete e._observer}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"observer",{get:function(){return this._observer||null},set:function(e){var t=this._observer;t&&t!==e&&(this._easing.clear(),t.remove(this)),this._observer=e},enumerable:!0,configurable:!0}),e.prototype.clearEasing=function(){this._easing.clear(),delete this.easingId},Object.defineProperty(e.prototype,"easing",{get:function(){return this._easing},enumerable:!0,configurable:!0}),e.prototype.getEasing=function(e){if(this.easingId){var t=this.easingId["_"+e+"_end"];if(t){var r=this._easing.get(t);if(r instanceof i.EasingProps)return r}}},Object.defineProperty(e.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"uid",{get:function(){return this._uid},enumerable:!0,configurable:!0}),e.prototype.resourceTrigger=function(){console.warn("resourceTrigger called on an instance that did not override resourceTrigger. resourceTrigger MUST be overridden for instances","that utilize a resource. The observable that is tied to committing the resource should be 'triggered' in this method.")},n([o.observable],e.prototype,"_active",void 0),n([o.observable],e.prototype,"_uid",void 0),e}();t.Instance=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=1;t.uid=function(){return++n};var i=0;t.colorUID=function(){return++i%16777215}},function(e,t,r){"use strict";function n(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}var i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0}),n(r(53)),n(r(51)),n(r(32)),n(r(68)),n(r(4)),n(r(49)),n(r(126));var o=i(r(32)),A=i(r(68)),a=i(r(4));t.MatrixMath=o,t.VectorMath=a,t.QuaternionMath=A},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){!function(e){!function(e){e[e.RGBA4=0]="RGBA4",e[e.RGB565=1]="RGB565",e[e.RGB5_A1=2]="RGB5_A1"}(e.ColorBufferFormat||(e.ColorBufferFormat={})),function(e){e[e.DEPTH_COMPONENT16=0]="DEPTH_COMPONENT16",e[e.DEPTH_STENCIL=1]="DEPTH_STENCIL"}(e.DepthBufferFormat||(e.DepthBufferFormat={})),function(e){e[e.STENCIL_INDEX8=0]="STENCIL_INDEX8"}(e.StencilBufferFormat||(e.StencilBufferFormat={}))}(e.RenderTarget||(e.RenderTarget={})),function(e){!function(e){e[e.NoBlending=0]="NoBlending",e[e.NormalBlending=1]="NormalBlending",e[e.AdditiveBlending=2]="AdditiveBlending",e[e.SubtractiveBlending=3]="SubtractiveBlending",e[e.MultiplyBlending=4]="MultiplyBlending"}(e.Blending||(e.Blending={})),function(e){e[e.Zero=0]="Zero",e[e.One=1]="One",e[e.SrcColor=2]="SrcColor",e[e.OneMinusSrcColor=3]="OneMinusSrcColor",e[e.SrcAlpha=4]="SrcAlpha",e[e.OneMinusSrcAlpha=5]="OneMinusSrcAlpha",e[e.DstAlpha=6]="DstAlpha",e[e.OneMinusDstAlpha=7]="OneMinusDstAlpha",e[e.DstColor=8]="DstColor",e[e.OneMinusDstColor=9]="OneMinusDstColor"}(e.BlendingDstFactor||(e.BlendingDstFactor={})),function(e){e[e.Zero=0]="Zero",e[e.One=1]="One",e[e.SrcColor=2]="SrcColor",e[e.OneMinusSrcColor=3]="OneMinusSrcColor",e[e.SrcAlpha=4]="SrcAlpha",e[e.OneMinusSrcAlpha=5]="OneMinusSrcAlpha",e[e.DstAlpha=6]="DstAlpha",e[e.OneMinusDstAlpha=7]="OneMinusDstAlpha",e[e.DstColor=8]="DstColor",e[e.OneMinusDstColor=9]="OneMinusDstColor",e[e.SrcAlphaSaturate=10]="SrcAlphaSaturate"}(e.BlendingSrcFactor||(e.BlendingSrcFactor={})),function(e){e[e.Add=0]="Add",e[e.Subtract=1]="Subtract",e[e.ReverseSubtract=2]="ReverseSubtract"}(e.BlendingEquations||(e.BlendingEquations={})),function(e){e[e.NEVER=0]="NEVER",e[e.LESS=1]="LESS",e[e.EQUAL=2]="EQUAL",e[e.LESS_OR_EQUAL=3]="LESS_OR_EQUAL",e[e.GREATER=4]="GREATER",e[e.NOTEQUAL=5]="NOTEQUAL",e[e.GREATER_OR_EQUAL=6]="GREATER_OR_EQUAL",e[e.ALWAYS=7]="ALWAYS"}(e.DepthFunctions||(e.DepthFunctions={})),function(e){e[e.NONE=0]="NONE",e[e.CW=1]="CW",e[e.CCW=2]="CCW",e[e.BOTH=3]="BOTH"}(e.CullSide||(e.CullSide={}))}(e.Material||(e.Material={})),function(e){!function(e){e[e.LINE_LOOP=0]="LINE_LOOP",e[e.LINE_STRIP=1]="LINE_STRIP",e[e.LINES=2]="LINES",e[e.POINTS=3]="POINTS",e[e.TRIANGLE_FAN=4]="TRIANGLE_FAN",e[e.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",e[e.TRIANGLES=6]="TRIANGLES"}(e.DrawMode||(e.DrawMode={}))}(e.Model||(e.Model={})),function(e){!function(e){e[e.TEXTURE_2D=0]="TEXTURE_2D",e[e.CUBE_MAP=1]="CUBE_MAP"}(e.TextureBindingTarget||(e.TextureBindingTarget={})),function(e){e[e.REPEAT=0]="REPEAT",e[e.CLAMP_TO_EDGE=1]="CLAMP_TO_EDGE",e[e.MIRRORED_REPEAT=2]="MIRRORED_REPEAT"}(e.Wrapping||(e.Wrapping={})),function(e){e[e.Nearest=0]="Nearest",e[e.NearestMipMapNearest=1]="NearestMipMapNearest",e[e.NearestMipMapLinear=2]="NearestMipMapLinear",e[e.Linear=3]="Linear",e[e.LinearMipMapNearest=4]="LinearMipMapNearest",e[e.LinearMipMapLinear=5]="LinearMipMapLinear"}(e.TextureMinFilter||(e.TextureMinFilter={})),function(e){e[e.Nearest=0]="Nearest",e[e.Linear=1]="Linear"}(e.TextureMagFilter||(e.TextureMagFilter={})),function(e){e[e.UnsignedByte=0]="UnsignedByte",e[e.UnsignedShort_5_6_5=1]="UnsignedShort_5_6_5",e[e.UnsignedShort_4_4_4_4=2]="UnsignedShort_4_4_4_4",e[e.UnsignedShort_5_5_5_1=3]="UnsignedShort_5_5_5_1",e[e.UnsignedShort=4]="UnsignedShort",e[e.UnsignedInt=5]="UnsignedInt",e[e.UnsignedInt_24_8=6]="UnsignedInt_24_8",e[e.Byte=7]="Byte",e[e.Short=8]="Short",e[e.Int=9]="Int",e[e.Float=10]="Float",e[e.HalfFloat=11]="HalfFloat",e[e.UnsignedInt_2_10_10_10_REV=12]="UnsignedInt_2_10_10_10_REV",e[e.UnsignedInt_10F_11F_11F_REV=13]="UnsignedInt_10F_11F_11F_REV",e[e.UnsignedInt_5_9_9_9_REV=14]="UnsignedInt_5_9_9_9_REV",e[e.Float32UnsignedInt_24_8_REV=15]="Float32UnsignedInt_24_8_REV"}(e.SourcePixelFormat||(e.SourcePixelFormat={})),function(e){e[e.Alpha=0]="Alpha",e[e.DepthComponent=1]="DepthComponent",e[e.DepthStencil=2]="DepthStencil",e[e.Luminance=3]="Luminance",e[e.LuminanceAlpha=4]="LuminanceAlpha",e[e.RGB=5]="RGB",e[e.RGBA=6]="RGBA",e[e.RGBE=7]="RGBE"}(e.TexelDataType||(e.TexelDataType={})),function(e){e[e.ONE=1]="ONE",e[e.TWO=2]="TWO",e[e.FOUR=4]="FOUR",e[e.EIGHT=8]="EIGHT"}(e.PackAlignment||(e.PackAlignment={})),function(e){e[e.ONE=1]="ONE",e[e.TWO=2]="TWO",e[e.FOUR=4]="FOUR",e[e.EIGHT=8]="EIGHT"}(e.UnpackAlignment||(e.UnpackAlignment={}))}(e.Texture||(e.Texture={})),function(e){!function(e){e[e.ALPHA=0]="ALPHA",e[e.RGB=1]="RGB",e[e.RGBA=2]="RGBA"}(e.ReadFilter||(e.ReadFilter={})),function(e){e[e.UNSIGNED_BYTE=0]="UNSIGNED_BYTE",e[e.UNSIGNED_SHORT_5_6_5=1]="UNSIGNED_SHORT_5_6_5",e[e.UNSIGNED_SHORT_4_4_4_4=2]="UNSIGNED_SHORT_4_4_4_4",e[e.UNSIGNED_SHORT_5_5_5_1=3]="UNSIGNED_SHORT_5_5_5_1",e[e.FLOAT=4]="FLOAT"}(e.ReadTargetArrayFormat||(e.ReadTargetArrayFormat={}))}(e.Renderer||(e.Renderer={}))}(t.GLSettings||(t.GLSettings={}))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,i=!1,o=void 0;try{for(var A,a=e[Symbol.iterator]();!(n=(A=a.next()).done)&&(r.push(A.value),!t||r.length!==t);n=!0);}catch(e){i=!0,o=e}finally{try{!n&&a.return&&a.return()}finally{if(i)throw o}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();var o=/^#([a-f0-9]{3})$/i,A=function(e){var t=e.match(o);return!!t&&[parseInt(t[1][0]+t[1][0],16),parseInt(t[1][1]+t[1][1],16),parseInt(t[1][2]+t[1][2],16),null]},a=/^#([a-f0-9]{6})$/i,s=function(e){var t=e.match(a);return!!t&&[parseInt(t[1].substring(0,2),16),parseInt(t[1].substring(2,4),16),parseInt(t[1].substring(4,6),16),null]},c=/^rgb\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*\)$/,u=function(e){var t=e.match(c);return!!t&&[Number(t[1]),Number(t[2]),Number(t[3]),null]},l=/^rgba\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d?\.?\d+)\s*\)$/,h=function(e){var t=e.match(l);return!!(t&&t.length>4)&&[Number(t[1]),Number(t[2]),Number(t[3]),Number(t[4])]},d=function(e){return[Math.min(e[0],255),Math.min(e[1],255),Math.min(e[2],255),e.length>3?e[3]:null]},f=function(e){var t=g[e.toLowerCase()];return t||!1},p=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var r=Array.isArray(t)?d(t):A(t)||u(t)||h(t)||f(t)||s(t)||[0,0,0,null],i=n(r,4),o=i[0],a=i[1],c=i[2],l=i[3];this.r=o,this.g=a,this.b=c,this.a=l}return i(e,[{key:"isTransparent",value:function(){return 0===this.a}},{key:"toString",value:function(){return null!==this.a&&1!==this.a?"rgba("+this.r+","+this.g+","+this.b+","+this.a+")":"rgb("+this.r+","+this.g+","+this.b+")"}}]),e}();t.default=p;var g={transparent:[0,0,0,0],aliceblue:[240,248,255,null],antiquewhite:[250,235,215,null],aqua:[0,255,255,null],aquamarine:[127,255,212,null],azure:[240,255,255,null],beige:[245,245,220,null],bisque:[255,228,196,null],black:[0,0,0,null],blanchedalmond:[255,235,205,null],blue:[0,0,255,null],blueviolet:[138,43,226,null],brown:[165,42,42,null],burlywood:[222,184,135,null],cadetblue:[95,158,160,null],chartreuse:[127,255,0,null],chocolate:[210,105,30,null],coral:[255,127,80,null],cornflowerblue:[100,149,237,null],cornsilk:[255,248,220,null],crimson:[220,20,60,null],cyan:[0,255,255,null],darkblue:[0,0,139,null],darkcyan:[0,139,139,null],darkgoldenrod:[184,134,11,null],darkgray:[169,169,169,null],darkgreen:[0,100,0,null],darkgrey:[169,169,169,null],darkkhaki:[189,183,107,null],darkmagenta:[139,0,139,null],darkolivegreen:[85,107,47,null],darkorange:[255,140,0,null],darkorchid:[153,50,204,null],darkred:[139,0,0,null],darksalmon:[233,150,122,null],darkseagreen:[143,188,143,null],darkslateblue:[72,61,139,null],darkslategray:[47,79,79,null],darkslategrey:[47,79,79,null],darkturquoise:[0,206,209,null],darkviolet:[148,0,211,null],deeppink:[255,20,147,null],deepskyblue:[0,191,255,null],dimgray:[105,105,105,null],dimgrey:[105,105,105,null],dodgerblue:[30,144,255,null],firebrick:[178,34,34,null],floralwhite:[255,250,240,null],forestgreen:[34,139,34,null],fuchsia:[255,0,255,null],gainsboro:[220,220,220,null],ghostwhite:[248,248,255,null],gold:[255,215,0,null],goldenrod:[218,165,32,null],gray:[128,128,128,null],green:[0,128,0,null],greenyellow:[173,255,47,null],grey:[128,128,128,null],honeydew:[240,255,240,null],hotpink:[255,105,180,null],indianred:[205,92,92,null],indigo:[75,0,130,null],ivory:[255,255,240,null],khaki:[240,230,140,null],lavender:[230,230,250,null],lavenderblush:[255,240,245,null],lawngreen:[124,252,0,null],lemonchiffon:[255,250,205,null],lightblue:[173,216,230,null],lightcoral:[240,128,128,null],lightcyan:[224,255,255,null],lightgoldenrodyellow:[250,250,210,null],lightgray:[211,211,211,null],lightgreen:[144,238,144,null],lightgrey:[211,211,211,null],lightpink:[255,182,193,null],lightsalmon:[255,160,122,null],lightseagreen:[32,178,170,null],lightskyblue:[135,206,250,null],lightslategray:[119,136,153,null],lightslategrey:[119,136,153,null],lightsteelblue:[176,196,222,null],lightyellow:[255,255,224,null],lime:[0,255,0,null],limegreen:[50,205,50,null],linen:[250,240,230,null],magenta:[255,0,255,null],maroon:[128,0,0,null],mediumaquamarine:[102,205,170,null],mediumblue:[0,0,205,null],mediumorchid:[186,85,211,null],mediumpurple:[147,112,219,null],mediumseagreen:[60,179,113,null],mediumslateblue:[123,104,238,null],mediumspringgreen:[0,250,154,null],mediumturquoise:[72,209,204,null],mediumvioletred:[199,21,133,null],midnightblue:[25,25,112,null],mintcream:[245,255,250,null],mistyrose:[255,228,225,null],moccasin:[255,228,181,null],navajowhite:[255,222,173,null],navy:[0,0,128,null],oldlace:[253,245,230,null],olive:[128,128,0,null],olivedrab:[107,142,35,null],orange:[255,165,0,null],orangered:[255,69,0,null],orchid:[218,112,214,null],palegoldenrod:[238,232,170,null],palegreen:[152,251,152,null],paleturquoise:[175,238,238,null],palevioletred:[219,112,147,null],papayawhip:[255,239,213,null],peachpuff:[255,218,185,null],peru:[205,133,63,null],pink:[255,192,203,null],plum:[221,160,221,null],powderblue:[176,224,230,null],purple:[128,0,128,null],rebeccapurple:[102,51,153,null],red:[255,0,0,null],rosybrown:[188,143,143,null],royalblue:[65,105,225,null],saddlebrown:[139,69,19,null],salmon:[250,128,114,null],sandybrown:[244,164,96,null],seagreen:[46,139,87,null],seashell:[255,245,238,null],sienna:[160,82,45,null],silver:[192,192,192,null],skyblue:[135,206,235,null],slateblue:[106,90,205,null],slategray:[112,128,144,null],slategrey:[112,128,144,null],snow:[255,250,250,null],springgreen:[0,255,127,null],steelblue:[70,130,180,null],tan:[210,180,140,null],teal:[0,128,128,null],thistle:[216,191,216,null],tomato:[255,99,71,null],turquoise:[64,224,208,null],violet:[238,130,238,null],wheat:[245,222,179,null],white:[255,255,255,null],whitesmoke:[245,245,245,null],yellow:[255,255,0,null],yellowgreen:[154,205,50,null]};t.TRANSPARENT=new p([0,0,0,0])},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseBoundCurves=t.calculatePaddingBoxPath=t.calculateBorderBoxPath=t.parsePathForBorder=t.parseDocumentSize=t.calculateContentBox=t.calculatePaddingBox=t.parseBounds=t.Bounds=void 0;var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=A(r(40)),o=A(r(153));function A(e){return e&&e.__esModule?e:{default:e}}var a=t.Bounds=function(){function e(t,r,n,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.left=t,this.top=r,this.width=n,this.height=i}return n(e,null,[{key:"fromClientRect",value:function(t,r,n){return new e(t.left+r,t.top+n,t.width,t.height)}}]),e}(),s=(t.parseBounds=function(e,t,r){return a.fromClientRect(e.getBoundingClientRect(),t,r)},t.calculatePaddingBox=function(e,t){return new a(e.left+t[3].borderWidth,e.top+t[0].borderWidth,e.width-(t[1].borderWidth+t[3].borderWidth),e.height-(t[0].borderWidth+t[2].borderWidth))},t.calculateContentBox=function(e,t,r){var n=t[0].value,i=t[1].value,o=t[2].value,A=t[3].value;return new a(e.left+A+r[3].borderWidth,e.top+n+r[0].borderWidth,e.width-(r[1].borderWidth+r[3].borderWidth+A+i),e.height-(r[0].borderWidth+r[2].borderWidth+n+o))},t.parseDocumentSize=function(e){var t=e.body,r=e.documentElement;if(!t||!r)throw new Error("");var n=Math.max(Math.max(t.scrollWidth,r.scrollWidth),Math.max(t.offsetWidth,r.offsetWidth),Math.max(t.clientWidth,r.clientWidth)),i=Math.max(Math.max(t.scrollHeight,r.scrollHeight),Math.max(t.offsetHeight,r.offsetHeight),Math.max(t.clientHeight,r.clientHeight));return new a(0,0,n,i)},t.parsePathForBorder=function(e,t){switch(t){case 0:return s(e.topLeftOuter,e.topLeftInner,e.topRightOuter,e.topRightInner);case 1:return s(e.topRightOuter,e.topRightInner,e.bottomRightOuter,e.bottomRightInner);case 2:return s(e.bottomRightOuter,e.bottomRightInner,e.bottomLeftOuter,e.bottomLeftInner);case 3:default:return s(e.bottomLeftOuter,e.bottomLeftInner,e.topLeftOuter,e.topLeftInner)}},function(e,t,r,n){var i=[];return e instanceof o.default?i.push(e.subdivide(.5,!1)):i.push(e),r instanceof o.default?i.push(r.subdivide(.5,!0)):i.push(r),n instanceof o.default?i.push(n.subdivide(.5,!0).reverse()):i.push(n),t instanceof o.default?i.push(t.subdivide(.5,!1).reverse()):i.push(t),i}),c=(t.calculateBorderBoxPath=function(e){return[e.topLeftOuter,e.topRightOuter,e.bottomRightOuter,e.bottomLeftOuter]},t.calculatePaddingBoxPath=function(e){return[e.topLeftInner,e.topRightInner,e.bottomRightInner,e.bottomLeftInner]},t.parseBoundCurves=function(e,t,r){var n=e.width/2,o=e.height/2,A=r[c.TOP_LEFT][0].getAbsoluteValue(e.width)<n?r[c.TOP_LEFT][0].getAbsoluteValue(e.width):n,a=r[c.TOP_LEFT][1].getAbsoluteValue(e.height)<o?r[c.TOP_LEFT][1].getAbsoluteValue(e.height):o,s=r[c.TOP_RIGHT][0].getAbsoluteValue(e.width)<n?r[c.TOP_RIGHT][0].getAbsoluteValue(e.width):n,l=r[c.TOP_RIGHT][1].getAbsoluteValue(e.height)<o?r[c.TOP_RIGHT][1].getAbsoluteValue(e.height):o,h=r[c.BOTTOM_RIGHT][0].getAbsoluteValue(e.width)<n?r[c.BOTTOM_RIGHT][0].getAbsoluteValue(e.width):n,d=r[c.BOTTOM_RIGHT][1].getAbsoluteValue(e.height)<o?r[c.BOTTOM_RIGHT][1].getAbsoluteValue(e.height):o,f=r[c.BOTTOM_LEFT][0].getAbsoluteValue(e.width)<n?r[c.BOTTOM_LEFT][0].getAbsoluteValue(e.width):n,p=r[c.BOTTOM_LEFT][1].getAbsoluteValue(e.height)<o?r[c.BOTTOM_LEFT][1].getAbsoluteValue(e.height):o,g=e.width-s,B=e.height-d,w=e.width-h,y=e.height-p;return{topLeftOuter:A>0||a>0?u(e.left,e.top,A,a,c.TOP_LEFT):new i.default(e.left,e.top),topLeftInner:A>0||a>0?u(e.left+t[3].borderWidth,e.top+t[0].borderWidth,Math.max(0,A-t[3].borderWidth),Math.max(0,a-t[0].borderWidth),c.TOP_LEFT):new i.default(e.left+t[3].borderWidth,e.top+t[0].borderWidth),topRightOuter:s>0||l>0?u(e.left+g,e.top,s,l,c.TOP_RIGHT):new i.default(e.left+e.width,e.top),topRightInner:s>0||l>0?u(e.left+Math.min(g,e.width+t[3].borderWidth),e.top+t[0].borderWidth,g>e.width+t[3].borderWidth?0:s-t[3].borderWidth,l-t[0].borderWidth,c.TOP_RIGHT):new i.default(e.left+e.width-t[1].borderWidth,e.top+t[0].borderWidth),bottomRightOuter:h>0||d>0?u(e.left+w,e.top+B,h,d,c.BOTTOM_RIGHT):new i.default(e.left+e.width,e.top+e.height),bottomRightInner:h>0||d>0?u(e.left+Math.min(w,e.width-t[3].borderWidth),e.top+Math.min(B,e.height+t[0].borderWidth),Math.max(0,h-t[1].borderWidth),d-t[2].borderWidth,c.BOTTOM_RIGHT):new i.default(e.left+e.width-t[1].borderWidth,e.top+e.height-t[2].borderWidth),bottomLeftOuter:f>0||p>0?u(e.left,e.top+y,f,p,c.BOTTOM_LEFT):new i.default(e.left,e.top+e.height),bottomLeftInner:f>0||p>0?u(e.left+t[3].borderWidth,e.top+y,Math.max(0,f-t[3].borderWidth),p-t[2].borderWidth,c.BOTTOM_LEFT):new i.default(e.left+t[3].borderWidth,e.top+e.height-t[2].borderWidth)}},{TOP_LEFT:0,TOP_RIGHT:1,BOTTOM_RIGHT:2,BOTTOM_LEFT:3}),u=function(e,t,r,n,A){var a=(Math.sqrt(2)-1)/3*4,s=r*a,u=n*a,l=e+r,h=t+n;switch(A){case c.TOP_LEFT:return new o.default(new i.default(e,h),new i.default(e,h-u),new i.default(l-s,t),new i.default(l,t));case c.TOP_RIGHT:return new o.default(new i.default(e,t),new i.default(e+s,t),new i.default(l,h-u),new i.default(l,h));case c.BOTTOM_RIGHT:return new o.default(new i.default(l,t),new i.default(l,t+u),new i.default(e+s,h),new i.default(e,h));case c.BOTTOM_LEFT:default:return new o.default(new i.default(l,h),new i.default(l-s,h),new i.default(e,t+u),new i.default(e,t))}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,i=r(52),o=r(32),A=r(10);function a(e){return e.projectionOptions.type===n.ORTHOGRAPHIC&&"left"in e.projectionOptions}function s(e){return e.projectionOptions.type===n.PERSPECTIVE&&"fov"in e.projectionOptions}!function(e){e[e.PERSPECTIVE=0]="PERSPECTIVE",e[e.ORTHOGRAPHIC=1]="ORTHOGRAPHIC"}(n=t.CameraProjectionType||(t.CameraProjectionType={})),t.isOrthographic=a,t.isPerspective=s;var c=function(){function e(e){this._id=A.uid(),this.animationEndTime=0,this.needsViewDrawn=!0,this.needsBroadcast=!1,this.viewChangeViewId="",this.transform=new i.Transform,this._projection=o.identity4(),this._needsUpdate=!0,this._viewProjection=o.identity4(),this._projectionOptions=e,this._needsUpdate=!0,this.onChange=e.onViewChange,this.update()}return Object.defineProperty(e.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0}),e.prototype.broadcast=function(e){this.onChange&&this.onChange(this,e)},e.makeOrthographic=function(){return new e({left:-100,right:100,top:-100,bottom:100,near:-100,far:1e5,type:n.ORTHOGRAPHIC})},e.makePerspective=function(t){return new e(Object.assign({type:n.PERSPECTIVE,far:1e4,near:1,fov:90*Math.PI/180,height:1e3,width:1e3},t))},Object.defineProperty(e.prototype,"projectionType",{get:function(){return this._projectionOptions.type},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"projection",{get:function(){return this.update(),this._projection},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"view",{get:function(){return this.transform.viewMatrix},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"needsUpdate",{get:function(){return this._needsUpdate},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"position",{get:function(){return this.transform.position},set:function(e){this._needsUpdate=!0,this.transform.position=e},enumerable:!0,configurable:!0}),e.prototype.lookAt=function(e,t){this._needsUpdate=!0,this.transform.lookAt(e,t)},Object.defineProperty(e.prototype,"scale",{get:function(){return this.transform.scale},set:function(e){this._needsUpdate=!0,this.transform.scale=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"projectionOptions",{get:function(){return this._projectionOptions},set:function(e){this._projectionOptions=e,this._needsUpdate=!0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"viewProjection",{get:function(){return(this.transform.changed||this._needsUpdate)&&this.update(!0),this._viewProjection},enumerable:!0,configurable:!0}),e.prototype.resolve=function(){this._needsUpdate=!1,this.needsViewDrawn=!1,this.needsBroadcast=!1},e.prototype.update=function(e){(this._needsUpdate||e)&&(this.updateProjection(),this._needsUpdate=!1)},e.prototype.updateProjection=function(){a(this)?o.orthographic4x4(this.projectionOptions.left,this.projectionOptions.right,this.projectionOptions.bottom,this.projectionOptions.top,this.projectionOptions.near,this.projectionOptions.far,this._projection):s(this)&&o.perspective4x4(this.projectionOptions.fov,this.projectionOptions.width,this.projectionOptions.height,this.projectionOptions.near,this.projectionOptions.far,this._projection),o.multiply4x4(this._projection,this.transform.viewMatrix,this._viewProjection)},e}();t.Camera=c},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.calculateLengthFromValueWithUnit=t.LENGTH_TYPE=void 0;var n,i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(20);(n=o)&&n.__esModule;var A=t.LENGTH_TYPE={PX:0,PERCENTAGE:1},a=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.type="%"===t.substr(t.length-1)?A.PERCENTAGE:A.PX;var r=parseFloat(t);this.value=isNaN(r)?0:r}return i(e,[{key:"isPercentage",value:function(){return this.type===A.PERCENTAGE}},{key:"getAbsoluteValue",value:function(e){return this.isPercentage()?e*(this.value/100):this.value}}],[{key:"create",value:function(t){return new e(t)}}]),e}();t.default=a;t.calculateLengthFromValueWithUnit=function(e,t,r){switch(r){case"px":case"%":return new a(t+r);case"em":case"rem":var n=new a(t);return n.value*="em"===r?parseFloat(e.style.font.fontSize):function e(t){var r=t.parent;return r?e(r):parseFloat(t.style.font.fontSize)}(e),n;default:return new a("0")}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,i=r(25),o=r(0),A=r(188),a=r(190),s=r(65),c=r(2)("performance");function u(e,t,r,A){var a=n.UNIFORM,s=0;if(void 0!==t.bufferType)return t.bufferType;if(i.WebGLStat.HARDWARE_INSTANCING){for(var u=0,l=r.length;u<l;++u){var h=r[u];s+=Math.ceil(h.size/4)}for(u=0,l=A.length;u<l;++u){h=A[u];s+=Math.ceil(o.instanceAttributeSizeFloatCount[h.size||1]/4)}if(s>i.WebGLStat.MAX_VERTEX_ATTRIBUTES){s=0;for(u=0,l=A.length;u<l;++u){h=A[u];s=Math.max(s,h.block||0)}for(u=0,l=r.length;u<l;++u){h=r[u];s+=Math.ceil(h.size/4)}s<i.WebGLStat.MAX_VERTEX_ATTRIBUTES&&(a=n.INSTANCE_ATTRIBUTE_PACKING,c("Performance Issue (Moderate):\n          Layer %o is utilizing too many vertex attributes and is now using vertex packing.\n          Max Vertex units %o\n          Used Vertex units %o\n          Instance Attributes %o\n          Vertex Attributes %o",t.id,i.WebGLStat.MAX_VERTEX_ATTRIBUTES,s,A,r))}else a=n.INSTANCE_ATTRIBUTE}return a===n.UNIFORM&&(c("Performance Issue (High):\n      Layer %o is utilizing too many vertex attributes and is now using a uniform buffer.\n      Max Vertex units %o\n      Used Vertex units %o\n      Instance Attributes %o\n      Vertex Attributes %o",t.id,i.WebGLStat.MAX_VERTEX_ATTRIBUTES,s,A,r),a=n.UNIFORM),t.setBufferType(a),a}!function(e){e[e.UNIFORM=0]="UNIFORM",e[e.INSTANCE_ATTRIBUTE=1]="INSTANCE_ATTRIBUTE",e[e.INSTANCE_ATTRIBUTE_PACKING=2]="INSTANCE_ATTRIBUTE_PACKING"}(n=t.LayerBufferType||(t.LayerBufferType={})),t.getLayerBufferType=u,t.makeLayerBufferManager=function(e,t,r){switch(u(0,t,t.vertexAttributes,t.instanceAttributes)){case n.INSTANCE_ATTRIBUTE:t.setBufferManager(new A.InstanceAttributeBufferManager(t,r));break;case n.INSTANCE_ATTRIBUTE_PACKING:t.setBufferManager(new a.InstanceAttributePackingBufferManager(t,r));break;default:t.setBufferManager(new s.UniformBufferManager(t,r))}}},function(e,t,r){"use strict";function n(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}Object.defineProperty(t,"__esModule",{value:!0}),n(r(140)),n(r(70)),n(r(107)),n(r(108)),n(r(30)),n(r(109)),n(r(45)),n(r(54)),n(r(50))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(6),i=r(1);t.subTextureIOValue=function(e){return e?[e.atlasTL[0],e.atlasTL[1],e.atlasBR[0],e.atlasBR[1]]:[0,0,0,0]};var o=function(){function e(e){this._uid=i.uid(),this.aspectRatio=1,this.atlasTL=[0,0],this.atlasTR=[0,0],this.atlasBL=[0,0],this.atlasBR=[0,0],this.heightOnAtlas=0,this.isValid=!1,this.pixelWidth=0,this.pixelHeight=0,this.texture=null,this.widthOnAtlas=0,Object.assign(this,e)}return Object.defineProperty(e.prototype,"uid",{get:function(){return this._uid},enumerable:!0,configurable:!0}),e.fromRegion=function(t,r){if(!t.data)return null;var i=r.x/t.data.width,o=r.y/t.data.height,A=r.width/t.data.width,a=r.height/t.data.height,s=new n.Bounds({bottom:o+a,left:i,right:i+A,top:o}),c=s.bottom,u=s.y,l=s.x,h=s.x+s.width,d=new e;return d.atlasTL=[l,u],d.atlasBR=[h,c],d.atlasBL=[l,c],d.atlasTR=[h,u],d},e.prototype.update=function(){this.texture&&this.source&&this.atlasRegion&&this.texture.update(this.source,this.atlasRegion)},e.prototype.toString=function(){return JSON.stringify({atlas:{TL:this.atlasTL,TR:this.atlasTR,BL:this.atlasBL,BR:this.atlasBR},width:this.pixelWidth,height:this.pixelHeight},null,2)},e}();t.SubTexture=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(13),A=(n=o)&&n.__esModule?n:{default:n},a=r(21),s=r(28),c=r(59),u=r(154),l=r(155),h=r(156),d=r(157),f=r(158),p=r(159),g=r(41),B=r(160),w=r(161),y=r(90),v=r(89),m=r(91),b=r(58),E=r(162),C=r(92),T=r(163),U=r(164),_=r(165),Q=r(166),F=r(14),x=r(93),S=r(61);var I=["INPUT","TEXTAREA","SELECT"],M=function(){function e(t,r,n,i){var o=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.parent=r,this.tagName=t.tagName,this.index=i,this.childNodes=[],this.listItems=[],"number"==typeof t.start&&(this.listStart=t.start);var a=t.ownerDocument.defaultView,M=a.pageXOffset,R=a.pageYOffset,P=a.getComputedStyle(t,null),N=(0,l.parseDisplay)(P.display),L="radio"===t.type||"checkbox"===t.type,H=(0,m.parsePosition)(P.position);if(this.style={background:L?x.INPUT_BACKGROUND:(0,s.parseBackground)(P,n),border:L?x.INPUT_BORDERS:(0,c.parseBorder)(P),borderRadius:(t instanceof a.HTMLInputElement||t instanceof HTMLInputElement)&&L?(0,x.getInputBorderRadius)(t):(0,u.parseBorderRadius)(P),color:L?x.INPUT_COLOR:new A.default(P.color),display:N,float:(0,h.parseCSSFloat)(P.float),font:(0,d.parseFont)(P),letterSpacing:(0,f.parseLetterSpacing)(P.letterSpacing),listStyle:N===l.DISPLAY.LIST_ITEM?(0,g.parseListStyle)(P):null,lineBreak:(0,p.parseLineBreak)(P.lineBreak),margin:(0,B.parseMargin)(P),opacity:parseFloat(P.opacity),overflow:-1===I.indexOf(t.tagName)?(0,w.parseOverflow)(P.overflow):w.OVERFLOW.HIDDEN,overflowWrap:(0,y.parseOverflowWrap)(P.overflowWrap?P.overflowWrap:P.wordWrap),padding:(0,v.parsePadding)(P),position:H,textDecoration:(0,b.parseTextDecoration)(P),textShadow:(0,E.parseTextShadow)(P.textShadow),textTransform:(0,C.parseTextTransform)(P.textTransform),transform:(0,T.parseTransform)(P),visibility:(0,U.parseVisibility)(P.visibility),wordBreak:(0,_.parseWordBreak)(P.wordBreak),zIndex:(0,Q.parseZIndex)(H!==m.POSITION.STATIC?P.zIndex:"auto")},this.isTransformed()&&(t.style.transform="matrix(1,0,0,1,0,0)"),N===l.DISPLAY.LIST_ITEM){var D=(0,S.getListOwner)(this);if(D){var k=D.listItems.length;D.listItems.push(this),this.listIndex=t.hasAttribute("value")&&"number"==typeof t.value?t.value:0===k?"number"==typeof D.listStart?D.listStart:1:D.listItems[k-1].listIndex+1}}"IMG"===t.tagName&&t.addEventListener("load",function(){o.bounds=(0,F.parseBounds)(t,M,R),o.curvedBounds=(0,F.parseBoundCurves)(o.bounds,o.style.border,o.style.borderRadius)}),this.image=O(t,n),this.bounds=L?(0,x.reformatInputBounds)((0,F.parseBounds)(t,M,R)):(0,F.parseBounds)(t,M,R),this.curvedBounds=(0,F.parseBoundCurves)(this.bounds,this.style.border,this.style.borderRadius)}return i(e,[{key:"getClipPaths",value:function(){var e=this.parent?this.parent.getClipPaths():[];return this.style.overflow!==w.OVERFLOW.VISIBLE?e.concat([(0,F.calculatePaddingBoxPath)(this.curvedBounds)]):e}},{key:"isInFlow",value:function(){return this.isRootElement()&&!this.isFloating()&&!this.isAbsolutelyPositioned()}},{key:"isVisible",value:function(){return!(0,a.contains)(this.style.display,l.DISPLAY.NONE)&&this.style.opacity>0&&this.style.visibility===U.VISIBILITY.VISIBLE}},{key:"isAbsolutelyPositioned",value:function(){return this.style.position!==m.POSITION.STATIC&&this.style.position!==m.POSITION.RELATIVE}},{key:"isPositioned",value:function(){return this.style.position!==m.POSITION.STATIC}},{key:"isFloating",value:function(){return this.style.float!==h.FLOAT.NONE}},{key:"isRootElement",value:function(){return null===this.parent}},{key:"isTransformed",value:function(){return null!==this.style.transform}},{key:"isPositionedWithZIndex",value:function(){return this.isPositioned()&&!this.style.zIndex.auto}},{key:"isInlineLevel",value:function(){return(0,a.contains)(this.style.display,l.DISPLAY.INLINE)||(0,a.contains)(this.style.display,l.DISPLAY.INLINE_BLOCK)||(0,a.contains)(this.style.display,l.DISPLAY.INLINE_FLEX)||(0,a.contains)(this.style.display,l.DISPLAY.INLINE_GRID)||(0,a.contains)(this.style.display,l.DISPLAY.INLINE_LIST_ITEM)||(0,a.contains)(this.style.display,l.DISPLAY.INLINE_TABLE)}},{key:"isInlineBlockOrInlineTable",value:function(){return(0,a.contains)(this.style.display,l.DISPLAY.INLINE_BLOCK)||(0,a.contains)(this.style.display,l.DISPLAY.INLINE_TABLE)}}]),e}();t.default=M;var O=function(e,t){if(e instanceof e.ownerDocument.defaultView.SVGSVGElement||e instanceof SVGSVGElement){var r=new XMLSerializer;return t.loadImage("data:image/svg+xml,"+encodeURIComponent(r.serializeToString(e)))}switch(e.tagName){case"IMG":var n=e;return t.loadImage(n.currentSrc||n.src);case"CANVAS":var i=e;return t.loadCanvas(i);case"IFRAME":var o=e.getAttribute("data-html2canvas-internal-iframe-key");if(o)return o}return null}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.contains=function(e,t){return 0!=(e&t)},t.distance=function(e,t){return Math.sqrt(e*e+t*t)},t.copyCSSStyles=function(e,t){for(var r=e.length-1;r>=0;r--){var n=e.item(r);"content"!==n&&t.style.setProperty(n,e.getPropertyValue(n))}return t},t.SMALL_IMAGE="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.BottomLeft=0]="BottomLeft",e[e.BottomMiddle=1]="BottomMiddle",e[e.BottomRight=2]="BottomRight",e[e.Custom=3]="Custom",e[e.Middle=4]="Middle",e[e.MiddleLeft=5]="MiddleLeft",e[e.MiddleRight=6]="MiddleRight",e[e.TopLeft=7]="TopLeft",e[e.TopMiddle=8]="TopMiddle",e[e.TopRight=9]="TopRight"}(t.AnchorType||(t.AnchorType={})),function(e){e[e.ALWAYS=1]="ALWAYS",e[e.BOUND_MAX=2]="BOUND_MAX",e[e.NEVER=3]="NEVER"}(t.ScaleMode||(t.ScaleMode={}))},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e){this._key=e.key}return Object.defineProperty(e.prototype,"id",{get:function(){return this._key},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"key",{get:function(){return this._key},enumerable:!0,configurable:!0}),e}();t.IdentifyByKey=o;var A=function(e){function t(t){var r=e.call(this,t)||this;return r.data=t.data,r}return i(t,e),t}(o);t.IdentifiableData=A},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(1),i=r(12),o=function(){function e(e){this._uid=n.uid(),this._flipY=!1,this._format=i.GLSettings.Texture.TexelDataType.RGBA,this._generateMipmaps=!1,this._magFilter=i.GLSettings.Texture.TextureMagFilter.Linear,this._minFilter=i.GLSettings.Texture.TextureMinFilter.LinearMipMapLinear,this.needsDataUpload=!1,this.needsPartialDataUpload=!1,this.needsSettingsUpdate=!1,this._packAlignment=i.GLSettings.Texture.PackAlignment.FOUR,this._premultiplyAlpha=!1,this._type=i.GLSettings.Texture.SourcePixelFormat.UnsignedByte,this._unpackAlignment=i.GLSettings.Texture.UnpackAlignment.FOUR,this._updateRegions=[],this._wrapHorizontal=i.GLSettings.Texture.Wrapping.CLAMP_TO_EDGE,this._wrapVertical=i.GLSettings.Texture.Wrapping.CLAMP_TO_EDGE,this.anisotropy=e.anisotropy||this.anisotropy,this.data=e.data||this.data,this.flipY=e.flipY||this.flipY,this.format=e.format||this.format,this.generateMipMaps=e.generateMipMaps||this.generateMipMaps,this.magFilter=e.magFilter||this.magFilter,this.minFilter=e.minFilter||this.minFilter,this.packAlignment=e.packAlignment||this.packAlignment,this.premultiplyAlpha=e.premultiplyAlpha||this.premultiplyAlpha,this.type=e.type||this.type,this.unpackAlignment=e.unpackAlignment||this.unpackAlignment,this.wrapHorizontal=e.wrapHorizontal||this.wrapHorizontal,this.wrapVertical=e.wrapVertical||this.wrapVertical}return Object.defineProperty(e.prototype,"uid",{get:function(){return this._uid},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"anisotropy",{get:function(){return this._anisotropy},set:function(e){this.needsSettingsUpdate=!0,this._anisotropy=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"data",{get:function(){return this._data},set:function(e){this.needsDataUpload=!0,this._data=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"flipY",{get:function(){return this._flipY},set:function(e){this.needsDataUpload=!0,this._flipY=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"format",{get:function(){return this._format},set:function(e){this.needsDataUpload=!0,this._format=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"generateMipMaps",{get:function(){return this._generateMipmaps},set:function(e){this.needsSettingsUpdate=!0,this._generateMipmaps=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"magFilter",{get:function(){return this._magFilter},set:function(e){this.needsSettingsUpdate=!0,this._magFilter=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"minFilter",{get:function(){return this._minFilter},set:function(e){this.needsSettingsUpdate=!0,this._minFilter=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"packAlignment",{get:function(){return this._packAlignment},set:function(e){this.needsSettingsUpdate=!0,this._packAlignment=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"premultiplyAlpha",{get:function(){return this._premultiplyAlpha},set:function(e){this.needsSettingsUpdate=!0,this._premultiplyAlpha=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"type",{get:function(){return this._type},set:function(e){this.needsDataUpload=!0,this._type=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"unpackAlignment",{get:function(){return this._unpackAlignment},set:function(e){this.needsSettingsUpdate=!0,this._unpackAlignment=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"updateRegions",{get:function(){return this._updateRegions},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"wrapHorizontal",{get:function(){return this._wrapHorizontal},set:function(e){this.needsSettingsUpdate=!0,this._wrapHorizontal=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"wrapVertical",{get:function(){return this._wrapVertical},set:function(e){this.needsSettingsUpdate=!0,this._wrapVertical=e},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){this.gl&&this.gl.proxy.disposeTexture(this),delete this._data},e.prototype.resolve=function(){this.needsDataUpload=!1,this.needsPartialDataUpload=!1,this.needsSettingsUpdate=!1,this._updateRegions=[]},e.prototype.update=function(e,t){this.needsPartialDataUpload=!0,this._updateRegions.push([e,t])},e}();t.Texture=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getProgramInfo=function(e,t){for(var r={attributeCount:0,attributes:new Array,uniformCount:0,uniforms:new Array},n=e.getProgramParameter(t,e.ACTIVE_UNIFORMS),i=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES),o={35664:"FLOAT_VEC2",35665:"FLOAT_VEC3",35666:"FLOAT_VEC4",35667:"INT_VEC2",35668:"INT_VEC3",35669:"INT_VEC4",35670:"BOOL",35671:"BOOL_VEC2",35672:"BOOL_VEC3",35673:"BOOL_VEC4",35674:"FLOAT_MAT2",35675:"FLOAT_MAT3",35676:"FLOAT_MAT4",35678:"SAMPLER_2D",35680:"SAMPLER_CUBE",5120:"BYTE",5121:"UNSIGNED_BYTE",5122:"SHORT",5123:"UNSIGNED_SHORT",5124:"INT",5125:"UNSIGNED_INT",5126:"FLOAT"},A={35664:1,35665:1,35666:1,35667:1,35668:1,35669:1,35670:1,35671:1,35672:1,35673:1,35674:1,35675:3,35676:4,35678:1,35680:1,5120:1,5121:1,5122:1,5123:1,5124:1,5125:1,5126:1},a=0;a<n;++a){var s=e.getActiveUniform(t,a);s.typeName=o[s.type],r.uniforms.push(s),r.uniformCount+=s.size,s.size=s.size*A[s.type]}for(a=0;a<i;a++){var c=e.getActiveAttrib(t,a);c.typeName=o[c.type],r.attributes.push(c),r.attributeCount+=c.size}return r};var n,i=function(){function e(){}return e.MAX_VERTEX_UNIFORMS=0,e.MAX_FRAGMENT_UNIFORMS=0,e.MAX_VERTEX_ATTRIBUTES=0,e.WEBGL_SUPPORTED=!1,e.MAX_TEXTURE_SIZE=0,e.HARDWARE_INSTANCING=!1,e.HARDWARE_INSTANCING_ANGLE=!1,e}();t.WebGLStat=i,(n=function(){try{var e=document.createElement("canvas");return window.WebGLRenderingContext&&(e.getContext("webgl")||e.getContext("experimental-webgl"))}catch(e){return!1}}())&&(i.WEBGL_SUPPORTED=!0,i.MAX_VERTEX_UNIFORMS=n.getParameter(n.MAX_VERTEX_UNIFORM_VECTORS),i.MAX_FRAGMENT_UNIFORMS=n.getParameter(n.MAX_FRAGMENT_UNIFORM_VECTORS),i.MAX_VERTEX_ATTRIBUTES=n.getParameter(n.MAX_VERTEX_ATTRIBS),i.MAX_TEXTURE_SIZE=n.getParameter(n.MAX_TEXTURE_SIZE),i.HARDWARE_INSTANCING_ANGLE=Boolean(n.getExtension("ANGLE_instanced_arrays")),i.HARDWARE_INSTANCING=i.HARDWARE_INSTANCING_ANGLE)},function(e,t,r){"use strict";function n(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}Object.defineProperty(t,"__esModule",{value:!0}),n(r(38)),n(r(145)),n(r(146)),n(r(179))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(6),i=function(){function e(e,t,r,i){this.child=[null,null],this.isLeaf=!0,this.data=null,this.bounds=new n.Bounds({height:i,width:r,x:e,y:t})}return e.prototype.destroy=function(){var e=this.child[0],t=this.child[1];this.data=null,e&&e.destroy(),t&&t.destroy(),this.child[0]=null,this.child[1]=null},e.prototype.hasChild=function(){var e=this.child[0],t=this.child[1];return e&&!e.data?!e.isLeaf:!(!t||t.data)&&!t.isLeaf},e.prototype.insert=function(t){var r=this.child[0],n=this.child[1];if(!this.isLeaf&&r&&n){var i=r.insert(t);return null!==i?i:n.insert(t)}if(this.data)return null;var o=this.bounds.fits(t.bounds);if(0===o)return null;if(1===o)return this.data=t.data,this;this.isLeaf=!1;var A=t.bounds.width,a=t.bounds.height,s=this.bounds.width-A,c=this.bounds.height-t.bounds.height;return s>c?(r=this.child[0]=new e(this.bounds.x,this.bounds.y,A,this.bounds.height),n=this.child[1]=new e(this.bounds.x+A,this.bounds.y,s,this.bounds.height)):(r=this.child[0]=new e(this.bounds.x,this.bounds.y,this.bounds.width,a),n=this.child[1]=new e(this.bounds.x,this.bounds.y+a,this.bounds.width,c)),r.insert(t)},e.prototype.remove=function(e){var t=this.child[0],r=this.child[1];if(r&&t&&!this.isLeaf){var n=t.remove(e);return!!n||(n=r.remove(e),t.hasChild()||r.hasChild()||(this.child[0]=null,this.child[1]=null),n)}return this.data===e&&(this.data=null,!0)},e.applyToSubTexture=function(t,r,i,o,A){if(i){o=o||{top:0,left:0,bottom:0,right:0};var a,s=r instanceof e?r.bounds:r,c=(s.x+o.left)/t.bounds.width,u=(s.y+o.top)/t.bounds.height,l=(s.width-o.left-o.right)/t.bounds.width,h=(s.height-o.top-o.bottom)/t.bounds.height,d=(a=A?new n.Bounds({bottom:1-u,left:c,right:c+l,top:1-(u+h)}):new n.Bounds({top:1-u,left:c,right:c+l,bottom:1-(u+h)})).bottom,f=a.y,p=a.x,g=a.x+a.width;i.atlasTL=[p,f],i.atlasBR=[g,d],i.atlasBL=[p,d],i.atlasTR=[g,f],i.widthOnAtlas=Math.abs(i.atlasTR[0]-i.atlasTL[0]),i.heightOnAtlas=Math.abs(i.atlasTR[1]-i.atlasBR[1]),i.pixelWidth=l*t.bounds.width,i.pixelHeight=h*t.bounds.height}},e}();t.PackNode=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseBackgroundImage=t.parseBackground=t.calculateBackgroundRepeatPath=t.calculateBackgroundPosition=t.calculateBackgroungPositioningArea=t.calculateBackgroungPaintingArea=t.calculateGradientBackgroundSize=t.calculateBackgroundSize=t.BACKGROUND_ORIGIN=t.BACKGROUND_CLIP=t.BACKGROUND_SIZE=t.BACKGROUND_REPEAT=void 0;var n=c(r(13)),i=c(r(16)),o=c(r(152)),A=c(r(40)),a=r(14),s=r(89);function c(e){return e&&e.__esModule?e:{default:e}}var u=t.BACKGROUND_REPEAT={REPEAT:0,NO_REPEAT:1,REPEAT_X:2,REPEAT_Y:3},l=t.BACKGROUND_SIZE={AUTO:0,CONTAIN:1,COVER:2,LENGTH:3},h=t.BACKGROUND_CLIP={BORDER_BOX:0,PADDING_BOX:1,CONTENT_BOX:2},d=t.BACKGROUND_ORIGIN=h,f=function e(t){switch(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t){case"contain":this.size=l.CONTAIN;break;case"cover":this.size=l.COVER;break;case"auto":this.size=l.AUTO;break;default:this.value=new i.default(t)}},p=(t.calculateBackgroundSize=function(e,t,r){var n=0,i=0,A=e.size;if(A[0].size===l.CONTAIN||A[0].size===l.COVER){var a=r.width/r.height,s=t.width/t.height;return a<s!=(A[0].size===l.COVER)?new o.default(r.width,r.width/s):new o.default(r.height*s,r.height)}return A[0].value&&(n=A[0].value.getAbsoluteValue(r.width)),A[0].size===l.AUTO&&A[1].size===l.AUTO?i=t.height:A[1].size===l.AUTO?i=n/t.width*t.height:A[1].value&&(i=A[1].value.getAbsoluteValue(r.height)),A[0].size===l.AUTO&&(n=i/t.height*t.width),new o.default(n,i)},t.calculateGradientBackgroundSize=function(e,t){var r=e.size,n=r[0].value?r[0].value.getAbsoluteValue(t.width):t.width,i=r[1].value?r[1].value.getAbsoluteValue(t.height):r[0].value?n:t.height;return new o.default(n,i)},new f("auto")),g=(t.calculateBackgroungPaintingArea=function(e,t){switch(t){case h.BORDER_BOX:return(0,a.calculateBorderBoxPath)(e);case h.PADDING_BOX:default:return(0,a.calculatePaddingBoxPath)(e)}},t.calculateBackgroungPositioningArea=function(e,t,r,n){var i=(0,a.calculatePaddingBox)(t,n);switch(e){case d.BORDER_BOX:return t;case d.CONTENT_BOX:var o=r[s.PADDING_SIDES.LEFT].getAbsoluteValue(t.width),A=r[s.PADDING_SIDES.RIGHT].getAbsoluteValue(t.width),c=r[s.PADDING_SIDES.TOP].getAbsoluteValue(t.width),u=r[s.PADDING_SIDES.BOTTOM].getAbsoluteValue(t.width);return new a.Bounds(i.left+o,i.top+c,i.width-o-A,i.height-c-u);case d.PADDING_BOX:default:return i}},t.calculateBackgroundPosition=function(e,t,r){return new A.default(e[0].getAbsoluteValue(r.width-t.width),e[1].getAbsoluteValue(r.height-t.height))},t.calculateBackgroundRepeatPath=function(e,t,r,n,i){switch(e.repeat){case u.REPEAT_X:return[new A.default(Math.round(i.left),Math.round(n.top+t.y)),new A.default(Math.round(i.left+i.width),Math.round(n.top+t.y)),new A.default(Math.round(i.left+i.width),Math.round(r.height+n.top+t.y)),new A.default(Math.round(i.left),Math.round(r.height+n.top+t.y))];case u.REPEAT_Y:return[new A.default(Math.round(n.left+t.x),Math.round(i.top)),new A.default(Math.round(n.left+t.x+r.width),Math.round(i.top)),new A.default(Math.round(n.left+t.x+r.width),Math.round(i.height+i.top)),new A.default(Math.round(n.left+t.x),Math.round(i.height+i.top))];case u.NO_REPEAT:return[new A.default(Math.round(n.left+t.x),Math.round(n.top+t.y)),new A.default(Math.round(n.left+t.x+r.width),Math.round(n.top+t.y)),new A.default(Math.round(n.left+t.x+r.width),Math.round(n.top+t.y+r.height)),new A.default(Math.round(n.left+t.x),Math.round(n.top+t.y+r.height))];default:return[new A.default(Math.round(i.left),Math.round(i.top)),new A.default(Math.round(i.left+i.width),Math.round(i.top)),new A.default(Math.round(i.left+i.width),Math.round(i.height+i.top)),new A.default(Math.round(i.left),Math.round(i.height+i.top))]}},t.parseBackground=function(e,t){return{backgroundColor:new n.default(e.backgroundColor),backgroundImage:y(e,t),backgroundClip:g(e.backgroundClip),backgroundOrigin:B(e.backgroundOrigin)}},function(e){switch(e){case"padding-box":return h.PADDING_BOX;case"content-box":return h.CONTENT_BOX}return h.BORDER_BOX}),B=function(e){switch(e){case"padding-box":return d.PADDING_BOX;case"content-box":return d.CONTENT_BOX}return d.BORDER_BOX},w=function(e){switch(e.trim()){case"no-repeat":return u.NO_REPEAT;case"repeat-x":case"repeat no-repeat":return u.REPEAT_X;case"repeat-y":case"no-repeat repeat":return u.REPEAT_Y;case"repeat":return u.REPEAT}return u.REPEAT},y=function(e,t){var r=b(e.backgroundImage).map(function(e){if("url"===e.method){var r=t.loadImage(e.args[0]);e.args=r?[r]:[]}return e}),n=e.backgroundPosition.split(","),i=e.backgroundRepeat.split(","),o=e.backgroundSize.split(",");return r.map(function(e,t){var r=(o[t]||"auto").trim().split(" ").map(v),A=(n[t]||"auto").trim().split(" ").map(m);return{source:e,repeat:w("string"==typeof i[t]?i[t]:i[0]),size:r.length<2?[r[0],p]:[r[0],r[1]],position:A.length<2?[A[0],A[0]]:[A[0],A[1]]}})},v=function(e){return"auto"===e?p:new f(e)},m=function(e){switch(e){case"bottom":case"right":return new i.default("100%");case"left":case"top":return new i.default("0%");case"auto":return new i.default("0")}return new i.default(e)},b=t.parseBackgroundImage=function(e){var t=/^\s$/,r=[],n=[],i="",o=null,A="",a=0,s=0,c=function(){var e="";if(i){'"'===A.substr(0,1)&&(A=A.substr(1,A.length-2)),A&&n.push(A.trim());var t=i.indexOf("-",1)+1;"-"===i.substr(0,1)&&t>0&&(e=i.substr(0,t).toLowerCase(),i=i.substr(t)),"none"!==(i=i.toLowerCase())&&r.push({prefix:e,method:i,args:n})}n=[],i=A=""};return e.split("").forEach(function(e){if(0!==a||!t.test(e)){switch(e){case'"':o?o===e&&(o=null):o=e;break;case"(":if(o)break;if(0===a)return void(a=1);s++;break;case")":if(o)break;if(1===a){if(0===s)return a=0,void c();s--}break;case",":if(o)break;if(0===a)return void c();if(1===a&&0===s&&!i.match(/^url$/i))return n.push(A.trim()),void(A="")}0===a?i+=e:A+=e}}),c(),r}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(10),i=function(){function e(){}return e.setObservableMonitor=function(t){e.gatherIds=t,e.observableIds=[]},e.getObservableMonitorIds=function(t){var r=e.observableIds.slice(0);return t&&(e.observableIds=[]),r},e.gatherIds=!1,e.observableIds=[],e.observableNamesToUID=new Map,e}();t.ObservableMonitoring=i,t.observable=function(e,t){var r=i.observableNamesToUID.get(t)||0;r||(r=n.uid(),i.observableNamesToUID.set(t,r)),Object.defineProperty(e,t,{configurable:!0,enumerable:!0,get:function(){return i.gatherIds&&i.observableIds.push(r),this.observableStorage[r]},set:function(e){this.observableStorage[r]=e,this.changes[r]=r,this.observer&&this.observer.instanceUpdated(this)}})}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(7);t.generateLayerModel=function(e,t,r){var i=new n.Model(e,t);return i.drawMode=r||n.GLSettings.Model.DrawMode.TRIANGLE_STRIP,i}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isBufferLocation=function(e){return e&&e.buffer&&e.buffer.value},t.isBufferLocationGroup=function(e){return e&&e.propertyToBufferLocation};var n=function(){function e(e,t){this.layer=e,this.scene=t}return e.prototype.changesProcessed=function(){delete this.changeListContext},e.prototype.incomingChangeList=function(e){this.changeListContext=e},e}();t.BufferManagerBase=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(4),i=Math.cos,o=Math.sin,A=Math.tan;function a(e,t,r,n,i){return(e=e||[])[0]=t,e[1]=r,e[2]=n,e[3]=i,e}function s(e,t,r,n,i,o,A,a,s,c){return(e=e||[])[0]=t,e[1]=r,e[2]=n,e[3]=i,e[4]=o,e[5]=A,e[6]=a,e[7]=s,e[8]=c,e}function c(e,t,r,n,i,o,A,a,s,c,u,l,h,d,f,p,g){return(e=e||[])[0]=t,e[1]=r,e[2]=n,e[3]=i,e[4]=o,e[5]=A,e[6]=a,e[7]=s,e[8]=c,e[9]=u,e[10]=l,e[11]=h,e[12]=d,e[13]=f,e[14]=p,e[15]=g,e}t.M200=0,t.M201=1,t.M210=2,t.M211=3,t.M300=0,t.M301=1,t.M302=2,t.M310=3,t.M311=4,t.M312=5,t.M320=6,t.M321=7,t.M322=8,t.M400=0,t.M401=1,t.M402=2,t.M403=3,t.M410=4,t.M411=5,t.M412=6,t.M413=7,t.M420=8,t.M421=9,t.M422=10,t.M423=11,t.M430=12,t.M431=13,t.M432=14,t.M433=15,t.apply2x2=a,t.apply3x3=s,t.apply4x4=c;var u=w(),l=w(),h=w(),d=w();function f(e){return e[3]*e[0]-e[1]*e[2]}function p(e){return e[0]*e[4]*e[8]-e[0]*e[5]*e[7]+e[1]*e[5]*e[6]-e[1]*e[3]*e[8]+e[2]*e[3]*e[7]-e[2]*e[4]*e[6]}function g(e){return s(u,e[5],e[6],e[7],e[9],e[10],e[11],e[13],e[14],e[15]),s(l,e[4],e[6],e[7],e[8],e[10],e[11],e[12],e[14],e[15]),s(h,e[4],e[5],e[7],e[8],e[9],e[11],e[12],e[13],e[15]),s(h,e[4],e[5],e[6],e[8],e[9],e[10],e[12],e[13],e[14]),e[0]*p(u)-e[1]*p(l)+e[2]*p(h)-e[3]*p(d)}function B(e){return a(e,1,0,0,1)}function w(e){return s(e,1,0,0,0,1,0,0,0,1)}function y(e){return c(e,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)}function v(e,t,r){return c(r,t[0]*e[0]+t[1]*e[4]+t[2]*e[8]+t[3]*e[12],t[0]*e[1]+t[1]*e[5]+t[2]*e[9]+t[3]*e[13],t[0]*e[2]+t[1]*e[6]+t[2]*e[10]+t[3]*e[14],t[0]*e[3]+t[1]*e[7]+t[2]*e[11]+t[3]*e[15],t[4]*e[0]+t[5]*e[4]+t[6]*e[8]+t[7]*e[12],t[4]*e[1]+t[5]*e[5]+t[6]*e[9]+t[7]*e[13],t[4]*e[2]+t[5]*e[6]+t[6]*e[10]+t[7]*e[14],t[4]*e[3]+t[5]*e[7]+t[6]*e[11]+t[7]*e[15],t[8]*e[0]+t[9]*e[4]+t[10]*e[8]+t[11]*e[12],t[8]*e[1]+t[9]*e[5]+t[10]*e[9]+t[11]*e[13],t[8]*e[2]+t[9]*e[6]+t[10]*e[10]+t[11]*e[14],t[8]*e[3]+t[9]*e[7]+t[10]*e[11]+t[11]*e[15],t[12]*e[0]+t[13]*e[4]+t[14]*e[8]+t[15]*e[12],t[12]*e[1]+t[13]*e[5]+t[14]*e[9]+t[15]*e[13],t[12]*e[2]+t[13]*e[6]+t[14]*e[10]+t[15]*e[14],t[12]*e[3]+t[13]*e[7]+t[14]*e[11]+t[15]*e[15])}function m(e,r,i){return n.apply4(i,e[t.M400]*r[0]+e[t.M410]*r[1]+e[t.M420]*r[2]+e[t.M430]*r[3],e[t.M401]*r[0]+e[t.M411]*r[1]+e[t.M421]*r[2]+e[t.M431]*r[3],e[t.M402]*r[0]+e[t.M412]*r[1]+e[t.M422]*r[2]+e[t.M432]*r[3],e[t.M403]*r[0]+e[t.M413]*r[1]+e[t.M423]*r[2]+e[t.M433]*r[3])}function b(e,t,r,n){if(e){if(t){if(r){var A=i(e),a=i(t),s=i(r),u=o(e),l=o(t);return c(n,a*s,a*(h=o(r)),-l,0,u*l*s-A*h,u*l*h+A*s,u*a,0,A*l*s+u*h,A*l*h-u*s,A*a,0,0,0,0,1)}A=i(e),a=i(t),u=o(e);return c(n,a,0,-(l=o(t)),0,u*l,A,u*a,0,A*l,-u,A*a,0,0,0,0,1)}if(r){A=i(e),s=i(r),u=o(e);return c(n,s,h=o(r),0,0,-A*h,A*s,u,0,u*h,-u*s,A,0,0,0,0,1)}return c(n,1,0,0,0,0,A=i(e),u=o(e),0,0,-u,A,0,0,0,0,1)}if(t){if(r){a=i(t),s=i(r),l=o(t);return c(n,a*s,a*(h=o(r)),-l,0,-h,s,0,0,l*s,l*h,a,0,0,0,0,1)}return c(n,a=i(t),0,-(l=o(t)),0,0,1,0,0,l,0,a,0,0,0,0,1)}var h;return r?c(n,s=i(r),h=o(r),0,0,-h,s,0,0,0,0,1,0,0,0,0,1):y(n)}function E(e,t,r,n){return c(n,e,0,0,0,0,t,0,0,0,0,r,0,0,0,0,1)}function C(e,t,r,n){return c(n,1,0,0,0,0,1,0,0,0,0,1,0,e,t,r,1)}function T(e,t,r,n,i,o,A){return c(A=A||y(),2*e/(n-r),0,0,0,0,2*e/(i-o),0,0,(n+r)/(n-r),(i+o)/(i-o),-(t+e)/(t-e),-1,0,0,-2*t*e/(t-e),0)}function U(e,t,r,i,o){return m(e,t,o=o||[0,0,0,0]),n.apply4(o,.5*(o[0]/o[3]+1)*r,.5*(o[1]/o[3]+1)*i,o[2]/o[3],1)}t.determinant2x2=f,t.determinant3x3=p,t.determinant4x4=g,t.affineInverse2x2=function(e,t){var r=f(e);return 0===r?null:a(t,e[3]/r,-e[1]/r,-e[2]/r,e[0]/r)},t.affineInverse3x3=function(e,t){var r=p(e);if(0===r)return null;var n=f([e[4],e[5],e[7],e[8]]),i=f([e[3],e[5],e[6],e[8]]),o=f([e[3],e[4],e[6],e[7]]),A=f([e[1],e[2],e[7],e[8]]),a=f([e[0],e[2],e[6],e[8]]),c=f([e[0],e[1],e[6],e[7]]);return s(t,n/r,-A/r,f([e[1],e[2],e[4],e[5]])/r,-i/r,a/r,f([e[0],e[2],e[3],e[5]])/r,o/r,-c/r,f([e[0],e[1],e[3],e[4]])/r)},t.affineInverse4x4=function(e,t){var r=g(e);if(0===r)return null;var n=f([e[0],e[1],e[4],e[5]]),i=f([e[0],e[2],e[4],e[6]]),o=f([e[0],e[3],e[4],e[7]]),A=f([e[1],e[2],e[5],e[6]]),a=f([e[1],e[3],e[5],e[7]]),s=f([e[2],e[3],e[6],e[7]]),u=f([e[10],e[11],e[14],e[15]]),l=f([e[9],e[11],e[13],e[15]]),h=f([e[9],e[10],e[13],e[14]]),d=f([e[8],e[11],e[12],e[15]]),p=f([e[8],e[10],e[12],e[14]]),B=f([e[8],e[9],e[12],e[13]]);return c(t,(e[5]*u-e[6]*l+e[7]*h)/r,(-e[1]*u+e[2]*l-e[3]*h)/r,(e[12]*s-e[13]*a+e[14]*A)/r,(-e[9]*s+e[10]*a-e[11]*A)/r,(-e[4]*u+e[6]*d-e[7]*p)/r,(e[0]*u-e[2]*d+e[3]*p)/r,(-e[12]*s+e[14]*o-e[15]*i)/r,(e[8]*s-e[10]*o+e[11]*i)/r,(e[4]*l-e[5]*d+e[7]*B)/r,(-e[0]*l+e[1]*d-e[3]*B)/r,(e[12]*a-e[13]*o+e[15]*n)/r,(-e[8]*a+e[9]*o-e[11]*n)/r,(-e[4]*h+e[5]*p-e[6]*B)/r,(e[0]*h-e[1]*p+e[2]*B)/r,(-e[12]*A+e[13]*i-e[14]*n)/r,(e[8]*A-e[9]*i+e[10]*n)/r)},t.multiplyScalar2x2=function(e,t,r){return a(r,e[0]*t,e[1]*t,e[2]*t,e[3]*t)},t.multiplyScalar3x3=function(e,t,r){return s(r,e[0]*t,e[1]*t,e[2]*t,e[3]*t,e[4]*t,e[5]*t,e[6]*t,e[7]*t,e[8]*t)},t.multiplyScalar4x4=function(e,t,r){return c(r,e[0]*t,e[1]*t,e[2]*t,e[3]*t,e[4]*t,e[5]*t,e[6]*t,e[7]*t,e[8]*t,e[9]*t,e[10]*t,e[11]*t,e[12]*t,e[13]*t,e[14]*t,e[15]*t)},t.identity2=B,t.identity3=w,t.identity4=y,t.multiply2x2=function(e,r,n){return a(n,r[t.M200]*e[t.M200]+r[t.M201]*e[t.M210],r[t.M200]*e[t.M201]+r[t.M201]*e[t.M211],r[t.M210]*e[t.M200]+r[t.M211]*e[t.M210],r[t.M210]*e[t.M201]+r[t.M211]*e[t.M211])},t.multiply3x3=function(e,t,r){return s(r,t[0]*e[0]+t[1]*e[3]+t[2]*e[6],t[0]*e[1]+t[1]*e[4]+t[2]*e[7],t[0]*e[2]+t[1]*e[5]+t[2]*e[8],t[3]*e[0]+t[4]*e[3]+t[5]*e[6],t[3]*e[1]+t[4]*e[4]+t[5]*e[7],t[3]*e[2]+t[4]*e[5]+t[5]*e[8],t[6]*e[0]+t[7]*e[3]+t[8]*e[6],t[6]*e[1]+t[7]*e[4]+t[8]*e[7],t[6]*e[2]+t[7]*e[5]+t[8]*e[8])},t.multiply4x4=v,t.concat4x4=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];if(t.length<=0)return y();e=e||y(),c.call.apply(c,[null,e].concat(t[t.length-1]));for(var n=t.length-2;n>=0;--n)v(t[n],e,e);return e},t.add2x2=function(e,t,r){return a(r,e[0]+t[0],e[1]+t[1],e[2]+t[2],e[3]+t[3])},t.add3x3=function(e,t,r){return s(r,e[0]+t[0],e[1]+t[1],e[2]+t[2],e[3]+t[3],e[4]+t[4],e[5]+t[5],e[6]+t[6],e[7]+t[7],e[8]+t[8])},t.add4x4=function(e,t,r){return c(r,e[0]+t[0],e[1]+t[1],e[2]+t[2],e[3]+t[3],e[4]+t[4],e[5]+t[5],e[6]+t[6],e[7]+t[7],e[8]+t[8],e[9]+t[9],e[10]+t[10],e[11]+t[11],e[12]+t[12],e[13]+t[13],e[14]+t[14],e[15]+t[15])},t.subtract2x2=function(e,t,r){return a(r,e[0]-t[0],e[1]-t[1],e[2]-t[2],e[3]-t[3])},t.subtract3x3=function(e,t,r){return s(r,e[0]-t[0],e[1]-t[1],e[2]-t[2],e[3]-t[3],e[4]-t[4],e[5]-t[5],e[6]-t[6],e[7]-t[7],e[8]-t[8])},t.subtract4x4=function(e,t,r){return c(r,e[0]-t[0],e[1]-t[1],e[2]-t[2],e[3]-t[3],e[4]-t[4],e[5]-t[5],e[6]-t[6],e[7]-t[7],e[8]-t[8],e[9]-t[9],e[10]-t[10],e[11]-t[11],e[12]-t[12],e[13]-t[13],e[14]-t[14],e[15]-t[15])},t.Hadamard2x2=function(e,t,r){return a(r,e[0]*t[0],e[1]*t[1],e[2]*t[2],e[3]*t[3])},t.Hadamard3x3=function(e,t,r){return s(r,e[0]*t[0],e[1]*t[1],e[2]*t[2],e[3]*t[3],e[4]*t[4],e[5]*t[5],e[6]*t[6],e[7]*t[7],e[8]*t[8])},t.Hadamard4x4=function(e,t,r){return c(r,e[0]*t[0],e[1]*t[1],e[2]*t[2],e[3]*t[3],e[4]*t[4],e[5]*t[5],e[6]*t[6],e[7]*t[7],e[8]*t[8],e[9]*t[9],e[10]*t[10],e[11]*t[11],e[12]*t[12],e[13]*t[13],e[14]*t[14],e[15]*t[15])},t.transpose2x2=function(e,t){return a(t,e[0],e[2],e[1],e[3])},t.transpose3x3=function(e,t){return s(t,e[0],e[3],e[6],e[1],e[4],e[7],e[2],e[5],e[8])},t.transpose4x4=function(e,t){return c(t,e[0],e[4],e[8],e[12],e[1],e[5],e[9],e[13],e[2],e[6],e[10],e[14],e[3],e[7],e[11],e[15])},t.shearX2x2=function(e,t){return(e>=Math.PI/2||e<=-Math.PI/2)&&console.warn("A shear matrix can not have radians >= PI / 2 or <= -PI / 2"),a(t=t||B(),1,0,A(e),1)},t.shearY2x2=function(e,t){return(e>=Math.PI/2||e<=-Math.PI/2)&&console.warn("A shear matrix can not have radians >= PI / 2 or <= -PI / 2"),a(t=t||B(),1,A(e),0,1)},t.shearX4x4=function(e,t){(e>=Math.PI/2||e<=-Math.PI/2)&&console.warn("A shear matrix can not have radians >= PI / 2 or <= -PI / 2"),t=t||y();var r=A(e);return c(t,1,r,r,0,r,1,0,0,r,0,1,0,0,0,0,1)},t.shearY4x4=function(e,t){(e>=Math.PI/2||e<=-Math.PI/2)&&console.warn("A shear matrix can not have radians >= PI / 2 or <= -PI / 2"),t=t||y();var r=A(e);return c(t,1,r,0,0,r,1,r,0,0,r,1,0,0,0,0,1)},t.shearZ4x4=function(e,t){(e>=Math.PI/2||e<=-Math.PI/2)&&console.warn("A shear matrix can not have radians >= PI / 2 or <= -PI / 2"),t=t||y();var r=A(e);return c(t,1,0,r,0,0,1,r,0,r,r,1,0,0,0,0,1)},t.transform2=function(e,r,i){return n.apply2(i,e[t.M200]*r[0]+e[t.M210]*r[1],e[t.M201]*r[0]+e[t.M211]*r[1])},t.transform3=function(e,r,i){return n.apply3(i,e[t.M300]*r[0]+e[t.M310]*r[1]+e[t.M320]*r[2],e[t.M301]*r[0]+e[t.M311]*r[1]+e[t.M321]*r[2],e[t.M302]*r[0]+e[t.M312]*r[1]+e[t.M322]*r[2])},t.transform3as4=function(e,r,i){return n.apply4(i,e[t.M400]*r[0]+e[t.M410]*r[1]+e[t.M420]*r[2]+1*e[t.M430],e[t.M401]*r[0]+e[t.M411]*r[1]+e[t.M421]*r[2]+1*e[t.M431],e[t.M402]*r[0]+e[t.M412]*r[1]+e[t.M422]*r[2]+1*e[t.M432],e[t.M403]*r[0]+e[t.M413]*r[1]+e[t.M423]*r[2]+1*e[t.M433])},t.transform4=m,t.toString2x2=function(e){return"Matrix: [\n  "+e[0]+", "+e[1]+",\n  "+e[2]+", "+e[3]+",\n]"},t.toString3x3=function(e){return"Matrix: [\n  "+e[0]+", "+e[1]+", "+e[2]+",\n  "+e[3]+", "+e[4]+", "+e[5]+",\n  "+e[6]+", "+e[7]+", "+e[8]+",\n]"},t.toString4x4=function(e){return"Matrix: [\n  "+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+",\n  "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+",\n  "+e[8]+", "+e[9]+", "+e[10]+", "+e[11]+",\n  "+e[12]+", "+e[13]+", "+e[14]+", "+e[15]+",\n]"},t.rotation4x4=b,t.rotation4x4by3=function(e,t){return b(e[0],e[1],e[2],t)},t.scale4x4by3=function(e,t){return E(e[0],e[1],e[2],t)},t.scale4x4=E,t.translation4x4by3=function(e,t){return C(e[0],e[1],e[2],t)},t.translation4x4=C,t.perspectiveFrustum4x4=T,t.perspective4x4=function(e,t,r,n,i,o){var a=r/t,s=A(e/2)*n,c=a*s;return T(n,i,-s,s,c,-c,o)},t.perspectiveFOVY4x4=function(e,t,r,n,i,o){var a=t/r,s=A(e/2)*n,c=a*s;return T(n,i,-c,c,s,-s,o)},t.orthographic4x4=function(e,t,r,n,i,o,A){return c(A,2/(t-e),0,0,0,0,2/(n-r),0,0,0,0,-1/(o-i),0,(t+e)/(e-t),(n+r)/(r-n),-i/(i-o),1)},t.projectToScreen=U,t.project3As4ToScreen=function(e,t,r,n,i){return U(e,[t[0],t[1],t[2],1],r,n,i)},t.compare2x2=function(e,t){return Math.abs(e[0]-t[0])<=1e-7&&Math.abs(e[1]-t[1])<=1e-7&&Math.abs(e[2]-t[2])<=1e-7&&Math.abs(e[3]-t[3])<=1e-7},t.compare3x3=function(e,t){return Math.abs(e[0]-t[0])<=1e-7&&Math.abs(e[1]-t[1])<=1e-7&&Math.abs(e[2]-t[2])<=1e-7&&Math.abs(e[3]-t[3])<=1e-7&&Math.abs(e[4]-t[4])<=1e-7&&Math.abs(e[5]-t[5])<=1e-7&&Math.abs(e[6]-t[6])<=1e-7&&Math.abs(e[7]-t[7])<=1e-7&&Math.abs(e[8]-t[8])<=1e-7},t.compare4x4=function(e,t){return Math.abs(e[0]-t[0])<=1e-7&&Math.abs(e[1]-t[1])<=1e-7&&Math.abs(e[2]-t[2])<=1e-7&&Math.abs(e[3]-t[3])<=1e-7&&Math.abs(e[4]-t[4])<=1e-7&&Math.abs(e[5]-t[5])<=1e-7&&Math.abs(e[6]-t[6])<=1e-7&&Math.abs(e[7]-t[7])<=1e-7&&Math.abs(e[8]-t[8])<=1e-7&&Math.abs(e[9]-t[9])<=1e-7&&Math.abs(e[10]-t[10])<=1e-7&&Math.abs(e[11]-t[11])<=1e-7&&Math.abs(e[12]-t[12])<=1e-7&&Math.abs(e[13]-t[13])<=1e-7&&Math.abs(e[14]-t[14])<=1e-7&&Math.abs(e[15]-t[15])<=1e-7}},function(e,t,r){"use strict";function n(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}Object.defineProperty(t,"__esModule",{value:!0}),r(135),n(r(22)),n(r(200)),n(r(205))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.shaderTemplate=function(e){var t=e.shader,r=e.options,n=e.required,i=e.onError,o=e.onToken,A=e.onMain,a=new Map,s=new Map,c=new Map,u=new Map,l=t.replace(/\$\{([^\}]*)\}/g,function(e,t){var n="";return u.set(t,(u.get(t)||0)+1),t in r?(a.set(t,(a.get(t)||0)+1),n=r[t]):s.set(t,(s.get(t)||0)+1),o&&(n=o(t,n)),n});Object.keys(r).forEach(function(e){a.get(e)||c.set(e,(c.get(e)||0)+1)});var h={resolvedShaderOptions:a,shader:l,shaderProvidedOptions:u,unresolvedProvidedOptions:c,unresolvedShaderOptions:s};if(n&&n.values.forEach(function(e){if(h.unresolvedProvidedOptions.get(e)){var t=n.name+": Could not resolve all the required inputs. Input: "+e;i?i(t):console.error(t)}else h.unresolvedShaderOptions.get(e)?(t=n.name+": A required option was not provided in the options parameter. Option: "+e,i?i(t):console.error(t)):h.resolvedShaderOptions.get(e)||(t=n.name+": A required option was not provided in the options parameter. Option: "+e,i?i(t):console.error(t))}),A){var d=h.shader,f=d.match(/void((.+)|\s)(main(\s+)\(\)|main\(\))(((.+)(\s*)\{)|(\s*)\{)/gm);if(f&&f.length>0){var p=d.indexOf(f[0]);if(p<0)A(null);else{for(var g=d.substr(p+f[0].length),B=!1,w=!1,y=1,v=0,m=-1,b=0,E=g.length;b<E;++b){var C=g[b],T=g[b+1];switch(C){case"/":switch(T){case"*":B||w||(B=!0,b++);break;case"/":B||w||(w=!0,b++)}break;case"*":"/"===T&&(w||(B=!1,b++));break;case"\n":case"\r":B||(w=!1);break;case"{":B||w||y++;break;case"}":B||w||v++,y===v&&(m=b)}if(-1!==m)break}if(-1!==m){var U=A(g.substr(0,m));h.shader="string"==typeof U?d.substr(0,p+f[0].length)+U+d.substr(p+f[0].length+m):d.substr(0,p)+U.header+d.substr(p,f[0].length)+U.main+d.substr(p+f[0].length+m)}else A(null)}}}return h}},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o=r(15),A=r(36),a=function(e){function t(t){var r=e.call(this,{left:-100,right:100,top:-100,bottom:100,near:-100,far:1e5,type:o.CameraProjectionType.ORTHOGRAPHIC})||this;return r.control2D=new A.Control2D(r,t),r}return i(t,e),Object.defineProperty(t.prototype,"scale2D",{get:function(){return this.control2D.scale},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"offset",{get:function(){return this.control2D.offset},enumerable:!0,configurable:!0}),t}(o.Camera);t.Camera2D=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(53),i=r(4),o=r(10),A=n.AutoEasingMethod.immediate(0),a=function(){function e(e,t){this._id=o.uid(),this.animation=n.AutoEasingMethod.immediate(0),this.animationEndTime=0,this.offsetBroadcastTime=0,this.scaleBroadcastTime=0,this._offset=[0,0,0],this.startOffset=[0,0,0],this.startOffsetTime=0,this.offsetEndTime=0,this._scale=[1,1,1],this.startScale=[1,1,1],this.startScaleTime=0,this.scaleEndTime=0,this._needsViewDrawn=!0,this.needsBroadcast=!1,this.camera=e,t&&(this._offset=i.copy3(t.offset||this._offset),this._scale=i.copy3(t.scale||this._scale))}return Object.defineProperty(e.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0}),e.prototype.broadcast=function(e){this.offset,this.scale,this.needsBroadcast&&(this.needsBroadcast=!1,this.onViewChange&&this.onViewChange(this.camera,e))},e.prototype.centerOn=function(e,t){var r=this.surface.getViewSize(e);if(r){var n=[r.width/2,r.height/2,0],o=i.subtract3(t,i.divide3(n,this._scale)),a=this.animation;this.setOffset(i.copy3(this.offset)),this.animation=A,this.setOffset(i.scale3(o,-1)),this.animation=a}},e.prototype.getCurrentTime=function(){return this.surface?this.surface.frameMetrics.currentTime:0},e.prototype.getOffset=function(){return this._offset},e.prototype.getScale=function(){return this._scale},Object.defineProperty(e.prototype,"needsViewDrawn",{get:function(){return this._needsViewDrawn},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"offset",{get:function(){var e=this.getCurrentTime();return this.onViewChange&&this.offsetBroadcastTime<this.offsetEndTime&&(this.offsetBroadcastTime=e,this.needsBroadcast=!0),this.animation.cpu(this.startOffset,this._offset,(e-this.startOffsetTime)/this.animation.duration)},enumerable:!0,configurable:!0}),e.prototype.setId=function(e){this._id=e,this._needsViewDrawn=!0},e.prototype.setOffset=function(e){this.startOffset=i.copy3(this.offset),this._offset=i.copy3(e),this.startOffsetTime=this.getCurrentTime(),this.offsetEndTime=this.startOffsetTime+this.animation.duration,this.updateEndTime(),this._needsViewDrawn=!0,this.onViewChange&&(this.offsetBroadcastTime=this.startOffsetTime,this.needsBroadcast=!0)},Object.defineProperty(e.prototype,"scale",{get:function(){var e=this.getCurrentTime();return this.onViewChange&&this.scaleBroadcastTime<this.scaleEndTime&&(this.scaleBroadcastTime=e,this.needsBroadcast=!0),this.animation.cpu(this.startScale,this._scale,(e-this.startScaleTime)/this.animation.duration)},enumerable:!0,configurable:!0}),e.prototype.setViewChangeHandler=function(e){this.onViewChange=e},e.prototype.setScale=function(e){this.startScale=i.copy3(this.scale),this._scale=i.copy3(e),this.startScaleTime=this.getCurrentTime(),this.scaleEndTime=this.startScaleTime+this.animation.duration,this.updateEndTime(),this._needsViewDrawn=!0,this.onViewChange&&(this.scaleBroadcastTime=this.startScaleTime,this.needsBroadcast=!0)},e.prototype.resolve=function(){this._needsViewDrawn=!1,this.needsBroadcast=!1},e.prototype.update=function(){this._needsViewDrawn=!0},e.prototype.updateEndTime=function(){this.animationEndTime=Math.max(this.scaleEndTime,this.offsetEndTime)},e}();t.Control2D=a},function(e,t,r){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.FLOAT=0]="FLOAT",e[e.VEC2=1]="VEC2",e[e.VEC3=2]="VEC3",e[e.VEC4=3]="VEC4",e[e.VEC4_ARRAY=4]="VEC4_ARRAY",e[e.FLOAT_ARRAY=5]="FLOAT_ARRAY",e[e.MATRIX3x3=6]="MATRIX3x3",e[e.MATRIX4x4=7]="MATRIX4x4",e[e.TEXTURE=8]="TEXTURE"}(n=t.MaterialUniformType||(t.MaterialUniformType={})),t.isUniformVec2=function(e){return e.type===n.VEC2},t.isUniformVec3=function(e){return e.type===n.VEC3},t.isUniformVec4=function(e){return e.type===n.VEC4},t.isUniformVec4Array=function(e){return e.type===n.VEC4_ARRAY},t.isUniformMat3=function(e){return e.type===n.MATRIX3x3},t.isUniformMat4=function(e){return e.type===n.MATRIX4x4},t.isUniformTexture=function(e){return e.type===n.TEXTURE},t.isUniformFloat=function(e){return e.type===n.FLOAT}},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(i,o){function A(e){try{s(n.next(e))}catch(e){o(e)}}function a(e){try{s(n.throw(e))}catch(e){o(e)}}function s(e){e.done?i(e.value):new r(function(t){t(e.value)}).then(A,a)}s((n=n.apply(e,t||[])).next())})},A=this&&this.__generator||function(e,t){var r,n,i,o,A={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;A;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return A.label++,{value:o[1],done:!1};case 5:A.label++,n=o[1],o=[0];continue;case 7:o=A.ops.pop(),A.trys.pop();continue;default:if(!(i=(i=A.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){A=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){A.label=o[1];break}if(6===o[0]&&A.label<i[1]){A.label=i[1],i=o;break}if(i&&A.label<i[2]){A.label=i[2],A.ops.push(o);break}i[2]&&A.ops.pop(),A.trys.pop();continue}o=t.call(e,A)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(){}return e.prototype.getIOExpansion=function(){return[]},e.prototype.setAttributeContext=function(e){},e}();t.BaseResourceManager=a;var s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.resources=new Map,t}return i(t,e),t.prototype.dequeueRequests=function(){return o(this,void 0,void 0,function(){return A(this,function(e){return[2,!1]})})},t.prototype.destroy=function(){},t.prototype.destroyResource=function(e){this.resources.delete(e.key)},t.prototype.getResource=function(e){return this.resources.get(e)||{key:"",type:-1}},t.prototype.initResource=function(e){return o(this,void 0,void 0,function(){return A(this,function(t){return this.resources.set(e.key,e),[2]})})},t.prototype.request=function(e,t,r){return[0,0,0,0]},t.prototype.updateResource=function(e){},t}(a);t.InvalidResourceManager=s,t.INVALID_RESOURCE_MANAGER=new s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.PATH={VECTOR:0,BEZIER_CURVE:1,CIRCLE:2}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(39);t.default=function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.type=n.PATH.VECTOR,this.x=t,this.y=r}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseListStyle=t.parseListStyleType=t.LIST_STYLE_TYPE=t.LIST_STYLE_POSITION=void 0;var n=r(28),i=t.LIST_STYLE_POSITION={INSIDE:0,OUTSIDE:1},o=t.LIST_STYLE_TYPE={NONE:-1,DISC:0,CIRCLE:1,SQUARE:2,DECIMAL:3,CJK_DECIMAL:4,DECIMAL_LEADING_ZERO:5,LOWER_ROMAN:6,UPPER_ROMAN:7,LOWER_GREEK:8,LOWER_ALPHA:9,UPPER_ALPHA:10,ARABIC_INDIC:11,ARMENIAN:12,BENGALI:13,CAMBODIAN:14,CJK_EARTHLY_BRANCH:15,CJK_HEAVENLY_STEM:16,CJK_IDEOGRAPHIC:17,DEVANAGARI:18,ETHIOPIC_NUMERIC:19,GEORGIAN:20,GUJARATI:21,GURMUKHI:22,HEBREW:22,HIRAGANA:23,HIRAGANA_IROHA:24,JAPANESE_FORMAL:25,JAPANESE_INFORMAL:26,KANNADA:27,KATAKANA:28,KATAKANA_IROHA:29,KHMER:30,KOREAN_HANGUL_FORMAL:31,KOREAN_HANJA_FORMAL:32,KOREAN_HANJA_INFORMAL:33,LAO:34,LOWER_ARMENIAN:35,MALAYALAM:36,MONGOLIAN:37,MYANMAR:38,ORIYA:39,PERSIAN:40,SIMP_CHINESE_FORMAL:41,SIMP_CHINESE_INFORMAL:42,TAMIL:43,TELUGU:44,THAI:45,TIBETAN:46,TRAD_CHINESE_FORMAL:47,TRAD_CHINESE_INFORMAL:48,UPPER_ARMENIAN:49,DISCLOSURE_OPEN:50,DISCLOSURE_CLOSED:51},A=t.parseListStyleType=function(e){switch(e){case"disc":return o.DISC;case"circle":return o.CIRCLE;case"square":return o.SQUARE;case"decimal":return o.DECIMAL;case"cjk-decimal":return o.CJK_DECIMAL;case"decimal-leading-zero":return o.DECIMAL_LEADING_ZERO;case"lower-roman":return o.LOWER_ROMAN;case"upper-roman":return o.UPPER_ROMAN;case"lower-greek":return o.LOWER_GREEK;case"lower-alpha":return o.LOWER_ALPHA;case"upper-alpha":return o.UPPER_ALPHA;case"arabic-indic":return o.ARABIC_INDIC;case"armenian":return o.ARMENIAN;case"bengali":return o.BENGALI;case"cambodian":return o.CAMBODIAN;case"cjk-earthly-branch":return o.CJK_EARTHLY_BRANCH;case"cjk-heavenly-stem":return o.CJK_HEAVENLY_STEM;case"cjk-ideographic":return o.CJK_IDEOGRAPHIC;case"devanagari":return o.DEVANAGARI;case"ethiopic-numeric":return o.ETHIOPIC_NUMERIC;case"georgian":return o.GEORGIAN;case"gujarati":return o.GUJARATI;case"gurmukhi":return o.GURMUKHI;case"hebrew":return o.HEBREW;case"hiragana":return o.HIRAGANA;case"hiragana-iroha":return o.HIRAGANA_IROHA;case"japanese-formal":return o.JAPANESE_FORMAL;case"japanese-informal":return o.JAPANESE_INFORMAL;case"kannada":return o.KANNADA;case"katakana":return o.KATAKANA;case"katakana-iroha":return o.KATAKANA_IROHA;case"khmer":return o.KHMER;case"korean-hangul-formal":return o.KOREAN_HANGUL_FORMAL;case"korean-hanja-formal":return o.KOREAN_HANJA_FORMAL;case"korean-hanja-informal":return o.KOREAN_HANJA_INFORMAL;case"lao":return o.LAO;case"lower-armenian":return o.LOWER_ARMENIAN;case"malayalam":return o.MALAYALAM;case"mongolian":return o.MONGOLIAN;case"myanmar":return o.MYANMAR;case"oriya":return o.ORIYA;case"persian":return o.PERSIAN;case"simp-chinese-formal":return o.SIMP_CHINESE_FORMAL;case"simp-chinese-informal":return o.SIMP_CHINESE_INFORMAL;case"tamil":return o.TAMIL;case"telugu":return o.TELUGU;case"thai":return o.THAI;case"tibetan":return o.TIBETAN;case"trad-chinese-formal":return o.TRAD_CHINESE_FORMAL;case"trad-chinese-informal":return o.TRAD_CHINESE_INFORMAL;case"upper-armenian":return o.UPPER_ARMENIAN;case"disclosure-open":return o.DISCLOSURE_OPEN;case"disclosure-closed":return o.DISCLOSURE_CLOSED;case"none":default:return o.NONE}},a=(t.parseListStyle=function(e){var t=(0,n.parseBackgroundImage)(e.getPropertyValue("list-style-image"));return{listStyleType:A(e.getPropertyValue("list-style-type")),listStyleImage:t.length?t[0]:null,listStylePosition:a(e.getPropertyValue("list-style-position"))}},function(e){switch(e){case"inside":return i.INSIDE;case"outside":default:return i.OUTSIDE}})},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=r(92),o=r(94);var A=function(){function e(t,r,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.text=t,this.parent=r,this.bounds=n}return n(e,null,[{key:"fromTextNode",value:function(t,r){var n=s(t.data,r.style.textTransform);return new e(n,r,(0,o.parseTextBounds)(n,r,t))}}]),e}();t.default=A;var a=/(^|\s|:|-|\(|\))([a-z])/g,s=function(e,t){switch(t){case i.TEXT_TRANSFORM.LOWERCASE:return e.toLowerCase();case i.TEXT_TRANSFORM.CAPITALIZE:return e.replace(a,c);case i.TEXT_TRANSFORM.UPPERCASE:return e.toUpperCase();default:return e}};function c(e,t,r){return e.length>0?t+r.toUpperCase():e}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(95),i=function(e){return 0===e[0]&&255===e[1]&&0===e[2]&&255===e[3]},o={get SUPPORT_RANGE_BOUNDS(){var e=function(e){if(e.createRange){var t=e.createRange();if(t.getBoundingClientRect){var r=e.createElement("boundtest");r.style.height="123px",r.style.display="block",e.body.appendChild(r),t.selectNode(r);var n=t.getBoundingClientRect(),i=Math.round(n.height);if(e.body.removeChild(r),123===i)return!0}}return!1}(document);return Object.defineProperty(o,"SUPPORT_RANGE_BOUNDS",{value:e}),e},get SUPPORT_SVG_DRAWING(){var e=function(e){var t=new Image,r=e.createElement("canvas"),n=r.getContext("2d");t.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{n.drawImage(t,0,0),r.toDataURL()}catch(e){return!1}return!0}(document);return Object.defineProperty(o,"SUPPORT_SVG_DRAWING",{value:e}),e},get SUPPORT_BASE64_DRAWING(){return function(e){var t=function(e,t){var r=new Image,n=e.createElement("canvas"),i=n.getContext("2d");return new Promise(function(e){r.src=t;var o=function(){try{i.drawImage(r,0,0),n.toDataURL()}catch(t){return e(!1)}return e(!0)};r.onload=o,r.onerror=function(){return e(!1)},!0===r.complete&&setTimeout(function(){o()},500)})}(document,e);return Object.defineProperty(o,"SUPPORT_BASE64_DRAWING",{value:function(){return t}}),t}},get SUPPORT_FOREIGNOBJECT_DRAWING(){var e="function"==typeof Array.from&&"function"==typeof window.fetch?function(e){var t=e.createElement("canvas");t.width=100,t.height=100;var r=t.getContext("2d");r.fillStyle="rgb(0, 255, 0)",r.fillRect(0,0,100,100);var o=new Image,A=t.toDataURL();o.src=A;var a=(0,n.createForeignObjectSVG)(100,100,0,0,o);return r.fillStyle="red",r.fillRect(0,0,100,100),(0,n.loadSerializedSVG)(a).then(function(t){r.drawImage(t,0,0);var o=r.getImageData(0,0,100,100).data;r.fillStyle="red",r.fillRect(0,0,100,100);var a=e.createElement("div");return a.style.backgroundImage="url("+A+")",a.style.height="100px",i(o)?(0,n.loadSerializedSVG)((0,n.createForeignObjectSVG)(100,100,0,0,a)):Promise.reject(!1)}).then(function(e){return r.drawImage(e,0,0),i(r.getImageData(0,0,100,100).data)}).catch(function(e){return!1})}(document):Promise.resolve(!1);return Object.defineProperty(o,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:e}),e},get SUPPORT_CORS_IMAGES(){var e=void 0!==(new Image).crossOrigin;return Object.defineProperty(o,"SUPPORT_CORS_IMAGES",{value:e}),e},get SUPPORT_RESPONSE_TYPE(){var e="string"==typeof(new XMLHttpRequest).responseType;return Object.defineProperty(o,"SUPPORT_RESPONSE_TYPE",{value:e}),e},get SUPPORT_CORS_XHR(){var e="withCredentials"in new XMLHttpRequest;return Object.defineProperty(o,"SUPPORT_CORS_XHR",{value:e}),e}};t.default=o},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.expand=function(e,t,r,n){return{instanceAttributes:[],uniforms:[],vertexAttributes:[]}},t.prototype.validate=function(e,t,r,n){return!0},t.prototype.processHeaderInjection=function(e,t,r,n,i,o,A){return{injection:""}},t.prototype.processAttributeDestructuring=function(e,t,r,n,i,o){return""},t}(r(74).BaseShaderIOInjection);t.BaseIOExpansion=o},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o=r(29),A=r(193),a=r(0),s=r(1),c=r(23),u=r(196),l=r(199),h=r(107),d=r(108),f=r(30),p=r(17),g=r(2)("performance");t.createAttribute=function(e){return e},t.createUniform=function(e){return e},t.createVertex=function(e){return e},t.createLayer=function(e,t){return{get key(){return t.key||""},init:[e,Object.assign(t,{key:t.key||""})]}};var B=function(e){function t(r,n,i){var o=e.call(this,i)||this;return o.animationEndTime=0,o.depth=0,o.instanceAttributes=[],o.instanceVertexCount=0,o.lastFrameTime=0,o.needsViewDrawn=!1,o.uniforms=[],o._uid=s.uid(),o.vertexAttributes=[],o.willRebuildLayer=!1,o.surface=r,o.scene=n,o.props=Object.assign({},t.defaultProps||{},i),o}return i(t,e),Object.defineProperty(t.prototype,"bufferManager",{get:function(){return this._bufferManager},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bufferType",{get:function(){return this._bufferType},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"uid",{get:function(){return this._uid},enumerable:!0,configurable:!0}),t.prototype.init=function(){var e=this.props.picking;(void 0===e?a.PickType.NONE:e)===a.PickType.SINGLE?this.picking={currentPickMode:a.PickType.NONE,type:a.PickType.SINGLE,uidToInstance:new Map}:this.picking={currentPickMode:a.PickType.NONE,type:a.PickType.NONE},this.resource=this.surface.resourceManager;var t=this.initShader();if(this.interactions=new l.LayerInteractionHandler(this),!t)return this.picking.type=a.PickType.NONE,g("Shell layer initialized. Nothing will be rendered for this layer",this.id),!0;if(!t.fs||!t.vs)return console.warn("Layer needs to specify the fragment and vertex shaders:",this.id),!1;t.instanceAttributes=(t.instanceAttributes||[]).filter(Boolean),t.vertexAttributes=(t.vertexAttributes||[]).filter(Boolean),t.uniforms=(t.uniforms||[]).filter(Boolean);var r=(new A.ShaderProcessor).process(this,t,this.surface.getIOExpanders(),this.surface.getIOSorting());if(!r)return console.warn("The shader processor did not produce metrics for the layer."),!1;var n=r.vertexAttributes,i=r.instanceAttributes,o=r.uniforms,s=h.generateLayerGeometry(this,r.maxInstancesPerBuffer,n,t.vertexCount),c=d.generateLayerMaterial(this,r.vs,r.fs,o,r.materialUniforms),u=f.generateLayerModel(s,c,t.drawMode);return this.geometry=s,this.instanceAttributes=i,this.instanceVertexCount=t.vertexCount,this.material=c,this.maxInstancesPerBuffer=r.maxInstancesPerBuffer,this.model=u,this.uniforms=o,this.vertexAttributes=n,p.makeLayerBufferManager(this.surface.gl,this,this.scene),this.props.printShader&&(console.warn("A Layer requested its shader be debugged. Do not leave this active for production:","Layer:",this.props.key,"Shader Metrics",r),console.warn("\n\nVERTEX SHADER\n--------------\n\n",r.vs),console.warn("\n\nFRAGMENT SHADER\n--------------\n\n",r.fs)),!0},t.prototype.baseShaderModules=function(e){var t=[],r=[];return t.push("instancing"),this.picking.type===a.PickType.SINGLE?(t.push("picking"),r.push("picking")):(t.push("no-picking"),r.push("no-picking")),(e.instanceAttributes||[]).find(function(e){return Boolean(e&&e.easing)})&&t.push("frame"),{fs:r,vs:t}},t.prototype.childLayers=function(){return[]},t.prototype.destroy=function(){this.bufferManager&&(this.bufferManager.scene&&this.bufferManager.scene.removeLayer(this),this.bufferManager.removeFromScene(),this.bufferManager.destroy())},t.prototype.didUpdateProps=function(){},t.prototype.draw=function(){var e,t,r,n=this.props.data.changeList;n.length>0&&(this.needsViewDrawn=!0);var i=this.diffManager,o=i.processing,A=i.processor;A.incomingChangeList(n),this.bufferManager.incomingChangeList(n);for(var a=0,s=n.length;a<s;++a)t=(e=n[a])[0],r=this.bufferManager.getBufferLocations(t),o[e[1]](A,t,Object.values(e[2]),r),t.changes={};A.commit(),this.bufferManager.changesProcessed(),this.props.data.resolve(this.id),this.updateUniforms()},t.prototype.getInstanceObservableIds=function(e,t){for(var r={},n=0,i=t.length;n<i;++n){o.ObservableMonitoring.setObservableMonitor(!0),e[t[n]];var A=o.ObservableMonitoring.getObservableMonitorIds(!0);void 0!==A[0]&&(r[t[n]]=A[0])}return o.ObservableMonitoring.setObservableMonitor(!1),r},t.prototype.getMaterialOptions=function(){return{}},t.prototype.initShader=function(){return{fs:"${import: no-op}",instanceAttributes:[],uniforms:[],vertexAttributes:[],vertexCount:0,vs:"${import: no-op}"}},t.prototype.managesInstance=function(e){return this.bufferManager&&this.bufferManager.managesInstance(e)},t.prototype.rebuildLayer=function(){if(this.willRebuildLayer=!0,this.children)for(var e=0,t=this.children.length;e<t;++e){this.children[e].rebuildLayer()}},t.prototype.resolveChanges=function(e){var t=this.props.data.changeList;t.length>0&&(this.needsViewDrawn=!0),e||this.props.data.resolve(this.id);for(var r=0,n=t.length;r<n;++r)t[r][0].changes={};return t},t.prototype.setBufferManager=function(e){this._bufferManager?console.warn("You can not change a layer's buffer strategy once it has been instantiated."):(this._bufferManager=e,this.diffManager=new u.InstanceDiffManager(this,e),this.diffManager.makeProcessor())},t.prototype.setBufferType=function(e){void 0===this._bufferType?this._bufferType=e:console.warn("You can not change a layers buffer strategy once it has been instantiated.")},t.prototype.shouldDrawView=function(e,t){for(var r in t)if(t[r]!==e[r])return!0;return!1},t.prototype.updateUniforms=function(){for(var e,t,r=0,n=this.uniforms.length;r<n;++r)e=this.uniforms[r],t=e.update(e),e.materialUniforms.forEach(function(e){return e.value=t})},t.prototype.willUpdateInstances=function(e){},t.prototype.willUpdateProps=function(e){e.picking!==this.props.picking&&this.rebuildLayer()},t.defaultProps={},t}(c.IdentifyByKey);t.Layer=B},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),r(261),function(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}(r(8))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){}return Object.defineProperty(e.prototype,"surface",{get:function(){return this.userInputManager.surface},enumerable:!0,configurable:!0}),e.prototype.getProjection=function(e){var t=this.userInputManager.getView(e);return t?t.projection:null},e.prototype.getView=function(e){return this.userInputManager&&this.userInputManager.getView(e)||null},e.prototype.getViewScreenBounds=function(e){var t=this.userInputManager.getView(e);return t?t.screenBounds:null},e.prototype.setUserInputManager=function(e){this.userInputManager=e},e}();t.EventManager=n},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){function t(t){var r=e.call(this)||this;return Object.assign(r,t),r}return i(t,e),t.prototype.handleMouseDown=function(e){},t.prototype.handleMouseUp=function(e){},t.prototype.handleMouseOver=function(e){},t.prototype.handleMouseOut=function(e){},t.prototype.handleMouseMove=function(e){},t.prototype.handleClick=function(e){},t.prototype.handleDrag=function(e){},t.prototype.handleWheel=function(e){},t.prototype.handleTouchCancelled=function(e){},t.prototype.handleTouchDown=function(e){},t.prototype.handleTouchUp=function(e){},t.prototype.handleTouchOut=function(e){},t.prototype.handleTouchDrag=function(e){},t.prototype.handleTap=function(e){},t.prototype.handleDoubleTap=function(e){},t.prototype.handleLongTouch=function(e){},t.prototype.handleLongTap=function(e){},t.prototype.handlePinch=function(e){},t.prototype.handleSpread=function(e){},t.prototype.handleTouchRotate=function(e){},t.prototype.handleSwipe=function(e){},t}(r(47).EventManager);t.SimpleEventHandler=o},function(e,t,r){"use strict";function n(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}Object.defineProperty(t,"__esModule",{value:!0}),n(r(67)),n(r(6))},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o=r(51),A=r(6),a=r(15),s=r(23),c=r(54);!function(e){e[e.COLOR=1]="COLOR",e[e.DEPTH=2]="DEPTH",e[e.STENCIL=4]="STENCIL"}(t.ClearFlags||(t.ClearFlags={})),t.createView=function(e,t){return{get key(){return t.key||""},init:[e,Object.assign(t,{key:t.key||"",viewport:t.viewport||{left:0,right:0,top:0,bottom:0}})]}};var u=function(e){function t(r,n){var i=e.call(this,n)||this;return i.animationEndTime=0,i.depth=0,i.lastFrameTime=0,i.needsDraw=!1,i.optimizeRendering=!1,i.pixelRatio=1,i.scene=r,i.props=Object.assign({},t.defaultProps||{},n),i}return i(t,e),Object.defineProperty(t.prototype,"screenBounds",{get:function(){return this.projection.screenBounds},set:function(e){this.projection.screenBounds=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"viewBounds",{get:function(){return this.projection.viewBounds},set:function(e){this.projection.viewBounds=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"clearFlags",{get:function(){return this.props.clearFlags||[]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"order",{get:function(){return this.props.order||0},enumerable:!0,configurable:!0}),t.prototype.shouldDrawView=function(e,t){for(var r in t)if(t[r]!==e[r])return!0;return!1},t.prototype.willUpdateProps=function(e){},t.prototype.didUpdateProps=function(){},t.defaultProps={key:"",camera:a.Camera.makeOrthographic(),viewport:{left:0,right:0,top:0,bottom:0}},t}(s.IdentifyByKey);t.View=u;var l=function(e){function t(){var t=e.call(this,new c.LayerScene(void 0,{key:"error",layers:[],views:[]}),{key:"error",viewport:{},camera:a.Camera.makeOrthographic()})||this;return t.projection=new o.SimpleProjection,t.screenBounds=new A.Bounds({x:0,y:0,width:100,height:100}),t}return i(t,e),t.prototype.screenToWorld=function(e,t){return[0,0]},t.prototype.worldToScreen=function(e,t){return[0,0]},t.prototype.viewToWorld=function(e,t){return[0,0]},t.prototype.worldToView=function(e,t){return[0,0]},t.prototype.fitViewtoViewport=function(e,t){this.screenBounds=e},t}(u);t.NoView=l},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o=r(10),A=r(4),a=function(){function e(){this._uid=o.uid(),this.id="",this.pixelRatio=1}return Object.defineProperty(e.prototype,"uid",{get:function(){return this._uid},enumerable:!0,configurable:!0}),e.prototype.screenToRenderSpace=function(e,t){return t=this.screenToView(e,t),A.apply2(t,e[0]*this.pixelRatio,e[1]*this.pixelRatio)},e.prototype.renderSpaceToScreen=function(e,t){return t=t||[0,0],A.apply2(t,e[0]/this.pixelRatio-this.screenBounds.x,e[1]/this.pixelRatio-this.screenBounds.y)},e.prototype.screenToView=function(e,t){return t=t||[0,0],A.apply2(t,e[0]-this.screenBounds.x,e[1]-this.screenBounds.y)},e.prototype.viewToScreen=function(e,t){return t=t||[0,0],A.apply2(t,e[0]+this.screenBounds.x,e[1]+this.screenBounds.y)},e}();t.BaseProjection=a;var s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.screenToWorld=function(e,t){return e},t.prototype.worldToScreen=function(e,t){return e},t.prototype.viewToWorld=function(e,t){return e},t.prototype.worldToView=function(e,t){return e},t}(a);t.SimpleProjection=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(11),i=function(){function e(){this._changed=!1,this.needsUpdate=!1,this.hasViewMatrix=!1,this._matrix=n.identity4(),this._rotation=n.oneQuat(),this.rotationMatrix=n.identity4(),this.needsRotationUpdate=!1,this._scale=[1,1,1],this.scaleMatrix=n.identity4(),this.needsScaleUpdate=!1,this._translation=[0,0,0],this.translationMatrix=n.identity4(),this.needsTranslationUpdate=!1}return Object.defineProperty(e.prototype,"changed",{get:function(){return this._changed},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"matrix",{get:function(){return this.update(),this._matrix},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"viewMatrix",{get:function(){return this.hasViewMatrix=!0,this._viewMatrix||(this.needsUpdate=!0),this.update(),this._viewMatrix?this._viewMatrix:n.identity4()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rotation",{get:function(){return this._rotation},set:function(e){this._rotation=e,this.needsUpdate=!0,this.needsRotationUpdate=!0,this._changed=!0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scale",{get:function(){return this._scale},set:function(e){this._scale=e,this.needsUpdate=!0,this.needsScaleUpdate=!0,this._changed=!0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"position",{get:function(){return this._translation},set:function(e){this._translation=e,this.needsUpdate=!0,this.needsTranslationUpdate=!0,this._changed=!0},enumerable:!0,configurable:!0}),e.prototype.lookAt=function(e,t){this.rotation=n.lookAtQuat(n.subtract3(e,this._translation),t)},e.prototype.resolve=function(){this._changed=!1},e.prototype.update=function(){if(this.needsUpdate){var e=this.scaleMatrix;this.needsScaleUpdate&&(this.needsScaleUpdate=!1,n.scale4x4by3(this._scale,e));var t=this.rotationMatrix;this.needsRotationUpdate&&(this.needsRotationUpdate=!1,n.matrix4x4FromUnitQuatModel(this._rotation,t));var r=this.translationMatrix;this.needsTranslationUpdate&&(this.needsTranslationUpdate=!1,n.translation4x4by3(this._translation,r)),n.multiply4x4(r,n.multiply4x4(t,e,this._matrix),this._matrix),this.hasViewMatrix&&(this._viewMatrix||(this._viewMatrix=n.identity4()),n.concat4x4(this._viewMatrix,n.matrix4x4FromUnitQuatView(this._rotation),n.translation4x4by3(n.scale3(this._translation,-1)),n.scale4x4by3(n.inverse3(this._scale)))),this.needsUpdate=!1}},e}();t.Transform=i,t.IdentityTransform=new i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,i=r(10),o=r(4),A=Math.min,a=Math.max,s=Math.pow,c=Math.round,u=Math.sin,l=Math.PI,h=c(1e3*l)/1e3;function d(e,t,r){return A(a(e,t),r)}!function(e){e[e.NONE=1]="NONE",e[e.CONTINUOUS=4]="CONTINUOUS",e[e.REPEAT=2]="REPEAT",e[e.REFLECT=3]="REFLECT"}(n=t.AutoEasingLoopStyle||(t.AutoEasingLoopStyle={}));var f="\n${easingMethod} {\n  float p = 0.3;\n  float time = pow(2.0, -10.0 * t) * sin((t - p / 4.0) * (2.0 * "+h+") / p) + 1.0;\n  return (end - start) * time + start;\n}\n",p="\n${easingMethod} {\n  float time = t * t * t - t * 1.05 * sin(t * "+h+");\n  return (end - start) * time + start;\n}\n",g="\n${easingMethod} {\n  ${T} direction = end - start;\n  float amplitude = length(direction) * 2.0;\n  return start + direction * sin(t * "+h+" * 2.0) * amplitude;\n}\n",B=function(){function e(e,t,r,o){this.uid=i.uid(),this.delay=0,this.duration=500,this.loop=n.NONE,this.cpu=e,this.gpu=t,this.duration=r||500,this.methodName=o||"easingMethod"}return e.immediate=function(e,t,r){return void 0===t&&(t=0),void 0===r&&(r=n.NONE),{uid:i.uid(),cpu:function(e,t,r,n){return(0,o.VecMath(e).copy)(t,n)},delay:t,duration:e,gpu:"\n${easingMethod} {\n  return end;\n}\n",loop:r,methodName:"immediate"}},e.linear=function(e,t,r){return void 0===t&&(t=0),void 0===r&&(r=n.NONE),{uid:i.uid(),cpu:function(e,t,r,n){var i=o.VecMath(e),A=i.add,a=i.scale,s=i.subtract;return r=d(r,0,1),A(a(s(t,e),r),e,n)},delay:t,duration:e,gpu:"\n${easingMethod} {\n  return (end - start) * t + start;\n}\n",loop:r,methodName:"linear"}},e.easeInQuad=function(e,t,r){return void 0===t&&(t=0),void 0===r&&(r=n.NONE),{uid:i.uid(),cpu:function(e,t,r,n){var i=(r=d(r,0,1))*r,A=o.VecMath(e);return(0,A.add)((0,A.scale)((0,A.subtract)(t,e),i),e,n)},delay:t,duration:e,gpu:"\n${easingMethod} {\n  float time = t * t;\n  return (end - start) * time + start;\n}\n",loop:r,methodName:"easeInQuad"}},e.easeOutQuad=function(e,t,r){return void 0===t&&(t=0),void 0===r&&(r=n.NONE),{uid:i.uid(),cpu:function(e,t,r,n){var i=(r=d(r,0,1))*(2-r),A=o.VecMath(e);return(0,A.add)((0,A.scale)((0,A.subtract)(t,e),i),e,n)},delay:t,duration:e,gpu:"\n${easingMethod} {\n  float time = t * (2.0 - t);\n  return (end - start) * time + start;\n}\n",loop:r,methodName:"easeOutQuad"}},e.easeInOutQuad=function(e,t,r){return void 0===t&&(t=0),void 0===r&&(r=n.NONE),{uid:i.uid(),cpu:function(e,t,r,n){var i=(r=d(r,0,1))<.5?2*r*r:(4-2*r)*r-1,A=o.VecMath(e);return(0,A.add)((0,A.scale)((0,A.subtract)(t,e),i),e,n)},delay:t,duration:e,gpu:"\n${easingMethod} {\n  float time = t < 0.5 ? 2.0 * t * t : -1.0 + (4.0 - 2.0 * t) * t;\n  return (end - start) * time + start;\n}\n",loop:r,methodName:"easeInOutQuad"}},e.easeInCubic=function(e,t,r){return void 0===t&&(t=0),void 0===r&&(r=n.NONE),{uid:i.uid(),cpu:function(e,t,r,n){var i=(r=d(r,0,1))*r*r,A=o.VecMath(e);return(0,A.add)((0,A.scale)((0,A.subtract)(t,e),i),e,n)},delay:t,duration:e,gpu:"\n${easingMethod} {\n  float time = t * t * t;\n  return (end - start) * time + start;\n}\n",loop:r,methodName:"easeInCubic"}},e.easeOutCubic=function(e,t,r){return void 0===t&&(t=0),void 0===r&&(r=n.NONE),{uid:i.uid(),cpu:function(e,t,r,n){r=d(r,0,1);var i=--r*r*r+1,A=o.VecMath(e);return(0,A.add)((0,A.scale)((0,A.subtract)(t,e),i),e,n)},delay:t,duration:e,gpu:"\n${easingMethod} {\n  float t1 = t - 1.0;\n  float time = t1 * t1 * t1 + 1.0;\n  return (end - start) * time + start;\n}\n",loop:r,methodName:"easeOutCubic"}},e.easeInOutCubic=function(e,t,r){return void 0===t&&(t=0),void 0===r&&(r=n.NONE),{uid:i.uid(),cpu:function(e,t,r,n){var i=(r=d(r,0,1))<.5?4*r*r*r:(r-1)*(2*r-2)*(2*r-2)+1,A=o.VecMath(e);return(0,A.add)((0,A.scale)((0,A.subtract)(t,e),i),e,n)},delay:t,duration:e,gpu:"\n${easingMethod} {\n  float time = t < 0.5 ? 4.0 * t * t * t : (t - 1.0) * (2.0 * t - 2.0) * (2.0 * t - 2.0) + 1.0;\n  return (end - start) * time + start;\n}\n",loop:r,methodName:"easeInOutCubic"}},e.easeInQuart=function(e,t,r){return void 0===t&&(t=0),void 0===r&&(r=n.NONE),{uid:i.uid(),cpu:function(e,t,r,n){var i=(r=d(r,0,1))*r*r*r,A=o.VecMath(e);return(0,A.add)((0,A.scale)((0,A.subtract)(t,e),i),e,n)},delay:t,duration:e,gpu:"\n${easingMethod} {\n  float time = t * t * t * t;\n  return (end - start) * time + start;\n}\n",loop:r,methodName:"easeInQuart"}},e.easeOutQuart=function(e,t,r){return void 0===t&&(t=0),void 0===r&&(r=n.NONE),{uid:i.uid(),cpu:function(e,t,r,n){r=d(r,0,1);var i=1- --r*r*r*r,A=o.VecMath(e);return(0,A.add)((0,A.scale)((0,A.subtract)(t,e),i),e,n)},delay:t,duration:e,gpu:"\n${easingMethod} {\n  float t1 = t - 1.0;\n  float time = 1.0 - t1 * t1 * t1 * t1;\n  return (end - start) * time + start;\n}\n",loop:r,methodName:"easeOutQuart"}},e.easeInOutQuart=function(e,t,r){return void 0===t&&(t=0),void 0===r&&(r=n.NONE),{uid:i.uid(),cpu:function(e,t,r,n){var i=(r=d(r,0,1))<.5?8*r*r*r*r:1-8*--r*r*r*r,A=o.VecMath(e);return(0,A.add)((0,A.scale)((0,A.subtract)(t,e),i),e,n)},delay:t,duration:e,gpu:"\n${easingMethod} {\n  float t1 = t - 1.0;\n  float time = t < 0.5 ? 8.0 * t * t * t * t : 1.0 - 8.0 * t1 * t1 * t1 * t1;\n  return (end - start) * time + start;\n}\n",loop:r,methodName:"easeInOutQuart"}},e.easeInQuint=function(e,t,r){return void 0===t&&(t=0),void 0===r&&(r=n.NONE),{uid:i.uid(),cpu:function(e,t,r,n){var i=(r=d(r,0,1))*r*r*r*r,A=o.VecMath(e);return(0,A.add)((0,A.scale)((0,A.subtract)(t,e),i),e,n)},delay:t,duration:e,gpu:"\n${easingMethod} {\n  float time = t * t * t * t * t;\n  return (end - start) * time + start;\n}\n",loop:r,methodName:"easeInQuint"}},e.easeOutQuint=function(e,t,r){return void 0===t&&(t=0),void 0===r&&(r=n.NONE),{uid:i.uid(),cpu:function(e,t,r,n){r=d(r,0,1);var i=1+--r*r*r*r*r,A=o.VecMath(e);return(0,A.add)((0,A.scale)((0,A.subtract)(t,e),i),e,n)},delay:t,duration:e,gpu:"\n${easingMethod} {\n  float t1 = t - 1.0;\n  float time = 1.0 + t1 * t1 * t1 * t1 * t1;\n  return (end - start) * time + start;\n}\n",loop:r,methodName:"easeOutQuint"}},e.easeInOutQuint=function(e,t,r){return void 0===t&&(t=0),void 0===r&&(r=n.NONE),{uid:i.uid(),cpu:function(e,t,r,n){var i=(r=d(r,0,1))<.5?16*r*r*r*r*r:1+16*--r*r*r*r*r,A=o.VecMath(e);return(0,A.add)((0,A.scale)((0,A.subtract)(t,e),i),e,n)},delay:t,duration:e,gpu:"\n${easingMethod} {\n  float t1 = t - 1.0;\n  float time = t < 0.5 ? 16.0 * t * t * t * t * t : 1.0 + 16.0 * t1 * t1 * t1 * t1 * t1;\n  return (end - start) * time + start;\n}\n",loop:r,methodName:"easeInOutQuint"}},e.easeOutElastic=function(e,t,r){return void 0===t&&(t=0),void 0===r&&(r=n.NONE),{uid:i.uid(),cpu:function(e,t,r,n){r=d(r,0,1);var i=s(2,-10*r)*u(2*l*(r-.075)/.3)+1,A=o.VecMath(e);return(0,A.add)((0,A.scale)((0,A.subtract)(t,e),i),e,n)},delay:t,duration:e,gpu:f,loop:r,methodName:"easeOutElastic"}},e.easeBackIn=function(e,t,r){return void 0===t&&(t=0),void 0===r&&(r=n.NONE),{uid:i.uid(),cpu:function(e,t,r,n){var i=(r=d(r,0,1))*r*r-1.05*r*u(r*l),A=o.VecMath(e);return(0,A.add)((0,A.scale)((0,A.subtract)(t,e),i),e,n)},delay:t,duration:e,gpu:p,loop:r,methodName:"easeBackIn"}},e.easeBackOut=function(e,t,r){return void 0===t&&(t=0),void 0===r&&(r=n.NONE),{uid:i.uid(),cpu:function(e,t,r,n){var i=(r=d(r,0,1))-1,A=i*i*(2.7*i+1.7)+1,a=o.VecMath(e);return(0,a.add)((0,a.scale)((0,a.subtract)(t,e),A),e,n)},delay:t,duration:e,gpu:"\n${easingMethod} {\n  float t1 = t - 1.0;\n  float a = 1.7;\n  float time = (t1 * t1 * ((a + 1.0) * t1 + a) + 1.0);\n  return (end - start) * time + start;\n}\n",loop:r,methodName:"easeBackOut"}},e.easeBackInOut=function(e,t,r){return void 0===t&&(t=0),void 0===r&&(r=n.NONE),{uid:i.uid(),cpu:function(e,t,r,n){var i=2.5925,A=(r=d(r,0,1))/.5,a=A-2,s=A<1?.5*(A*A*(i+1)*A-i):.5*(a*a*((i+1)*a+i)+2),c=o.VecMath(e);return(0,c.add)((0,c.scale)((0,c.subtract)(t,e),s),e,n)},delay:t,duration:e,gpu:"\n${easingMethod} {\n  float a = 1.4;\n  float a1 = a * 1.525;\n  float t1 = t / 0.5;\n  float t2 = t1 - 2.0;\n  float time =\n    (t1 < 1.0) ? 0.5 * (t1 * t1 * (a1 + 1.0) * t1 - a1) :\n    0.5 * (t2 * t2 * ((a1 + 1.0) * t2 + a1) + 2.0)\n  ;\n\n  return (end - start) * time + start;\n}\n",loop:r,methodName:"easeBackInOut"}},e.continuousSinusoidal=function(e,t,r){return void 0===t&&(t=0),void 0===r&&(r=n.CONTINUOUS),{uid:i.uid(),cpu:function(e,t,r,n){var i=o.VecMath(e),A=i.add,a=i.length,s=i.scale,c=i.subtract;r=d(r,0,1);var h=c(t,e),f=2*a(h);return A(e,s(h,u(r*l*2)*f),n)},delay:t,duration:e,gpu:g,loop:r,methodName:"repeatingSinusoidal",validation:{ignoreEndValueCheck:!0,ignoreOverTimeCheck:!0}}},e}();t.AutoEasingMethod=B},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(i,o){function A(e){try{s(n.next(e))}catch(e){o(e)}}function a(e){try{s(n.throw(e))}catch(e){o(e)}}function s(e){e.done?i(e.value):new r(function(t){t(e.value)}).then(A,a)}s((n=n.apply(e,t||[])).next())})},A=this&&this.__generator||function(e,t){var r,n,i,o,A={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;A;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return A.label++,{value:o[1],done:!1};case 5:A.label++,n=o[1],o=[0];continue;case 7:o=A.ops.pop(),A.trys.pop();continue;default:if(!(i=(i=A.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){A=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){A.label=o[1];break}if(6===o[0]&&A.label<i[1]){A.label=i[1],i=o;break}if(i&&A.label<i[2]){A.label=i[2],A.ops.push(o);break}i[2]&&A.ops.pop(),A.trys.pop();continue}o=t.call(e,A)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};Object.defineProperty(t,"__esModule",{value:!0});var a=r(69),s=r(23),c=r(55),u=r(70),l=r(2)("performance"),h=function(e){function t(t,r){var n=e.call(this,r)||this;return n.container=new a.Scene,n.surface=t,n.init(r),n}return i(t,e),Object.defineProperty(t.prototype,"layers",{get:function(){return this.layerDiffs.items},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"views",{get:function(){return this.viewDiffs.items},enumerable:!0,configurable:!0}),t.prototype.init=function(e){var t=this;if(this.surface&&this.surface.gl){this.container=new a.Scene;var r=u.generateDefaultElements(this.surface.gl);this.layerDiffs=new c.ReactiveDiff({buildItem:function(e){return o(t,void 0,void 0,function(){var t,r,n,i,o,a;return A(this,function(A){if(l("Building layer",e.key),!this.surface)return[2,null];if(t=e.init[0],r=e.init[1],(n=new t(this.surface,this,Object.assign({},t.defaultProps,r))).order=e.init[1].order||Number.MAX_SAFE_INTEGER,n.initializer=e,n.props.data.sync(),n.parent=r.parent,r.parent&&(r.parent.children?r.parent.children.push(n):r.parent.children=[n]),!n.init())return console.warn("Error initializing layer:",r.key,"A layer was unable to be added to the surface. See previous warnings (if any) to determine why they could not be instantiated"),[2,null];for(i=n.childLayers(),o=0,a=i.length;o<a;++o)i[o].init[1].order=n.order+.01*o;return this.layerDiffs.inline(i),[2,n]})})},destroyItem:function(e,r){return o(t,void 0,void 0,function(){return A(this,function(t){return l("Destroying layer",e.key),r.destroy(),[2,!0]})})},updateItem:function(e,r){return o(t,void 0,void 0,function(){var t,n,i;return A(this,function(o){return t=e.init[1],r.willUpdateProps(t),r.order=t.order,t.data!==r.props.data&&t.data.sync(),r.shouldDrawView(r.props,t)&&(r.needsViewDrawn=!0),Object.assign(r.props,t),r.initializer.init[1]=r.props,r.didUpdateProps(),t.parent&&r.parent&&r.parent!==t.parent&&(n=r.parent.children||[],(i=n.indexOf(r)||-1)>-1&&n.splice(i,1)),r.parent=t.parent,r.willRebuildLayer?(this.layerDiffs.rebuild(),r.willRebuildLayer=!1):this.layerDiffs.inline(r.childLayers()),[2]})})}}),this.viewDiffs=new c.ReactiveDiff({buildItem:function(e){return o(t,void 0,void 0,function(){var t;return A(this,function(n){return this.surface?((t=new e.init[0](this,e.init[1])).props.camera=t.props.camera||r.camera,t.pixelRatio=this.surface.pixelRatio,this.surface.mouseManager.waitingForRender=!0,[2,t]):[2,null]})})},destroyItem:function(e,r){return o(t,void 0,void 0,function(){return A(this,function(e){return[2,!0]})})},updateItem:function(e,r){return o(t,void 0,void 0,function(){var t;return A(this,function(n){return t=e.init[1],r.willUpdateProps(t),r.shouldDrawView(r.props,t)&&(r.needsDraw=!0),Object.assign(r.props,t),r.didUpdateProps(),this.surface&&(this.surface.mouseManager.waitingForRender=!0),[2]})})}}),this.update(e)}},t.prototype.destroy=function(){delete this.container,this.layerDiffs.destroy(),this.viewDiffs.destroy()},t.prototype.removeLayer=function(e){if(this.layers){var t=this.layers.indexOf(e);if(t>=0)return void this.layers.splice(t,1)}},t.prototype.update=function(e){return o(this,void 0,void 0,function(){return A(this,function(t){switch(t.label){case 0:return this.order=e.order,[4,this.viewDiffs.diff(e.views)];case 1:return t.sent(),[4,this.layerDiffs.diff(e.layers)];case 2:return t.sent(),[2]}})})},t.DEFAULT_SCENE_ID="__default__",t}(s.IdentifyByKey);t.LayerScene=h},function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(i,o){function A(e){try{s(n.next(e))}catch(e){o(e)}}function a(e){try{s(n.throw(e))}catch(e){o(e)}}function s(e){e.done?i(e.value):new r(function(t){t(e.value)}).then(A,a)}s((n=n.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){var r,n,i,o,A={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;A;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return A.label++,{value:o[1],done:!1};case 5:A.label++,n=o[1],o=[0];continue;case 7:o=A.ops.pop(),A.trys.pop();continue;default:if(!(i=(i=A.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){A=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){A.label=o[1];break}if(6===o[0]&&A.label<i[1]){A.label=i[1],i=o;break}if(i&&A.label<i[2]){A.label=i[2],A.ops.push(o);break}i[2]&&A.ops.pop(),A.trys.pop();continue}o=t.call(e,A)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e){var t=this;this.willDispose=new Set,this.keyToItem=new Map,this.keyToInitializer=new Map,this.currentInitalizerIndex=0,this.currentInitializers=[],this._items=[],this.inlineDeferred=function(e){t.deferredInlining=e},this.inlineImmediate=function(e){var r;if(e.length>0&&t.currentInitializers&&t.currentItem){(r=t.currentInitializers).splice.apply(r,[t.currentInitalizerIndex+1,0].concat(e));for(var n=0,i=e.length;n<i;++n){e[n].parent=t.currentItem}}},this.inline=this.inlineImmediate,this.options=e}return Object.defineProperty(e.prototype,"items",{get:function(){return this._items.slice(0)},enumerable:!0,configurable:!0}),e.prototype.destroy=function(){return n(this,void 0,void 0,function(){var e,t,r,n,o;return i(this,function(i){switch(i.label){case 0:for(e=[],t=0,r=this.currentInitializers.length;t<r;++t)n=this.currentInitializers[t],(o=this.keyToItem.get(n.key))&&e.push(this.options.destroyItem(n,o));return[4,Promise.all(e)];case 1:return i.sent(),[2]}})})},e.prototype.diff=function(e){return n(this,void 0,void 0,function(){var t,r,o,A,a=this;return i(this,function(s){switch(s.label){case 0:t=e.slice(0),this.currentInitializers=t,this._items=[],r=0,s.label=1;case 1:return r<t.length?(o=t[r],this.currentInitalizerIndex=r,this.currentInitializer=o,this.willDispose.has(o.key)?(A=this.keyToItem.get(o.key)||null)?(this.currentItem=A,[4,this.options.updateItem(o,A)]):[3,3]:[3,6]):[3,9];case 2:return s.sent(),[3,5];case 3:return[4,this.options.buildItem(o)];case 4:A=s.sent(),s.label=5;case 5:return A&&(this.keyToInitializer.set(o.key,o),this.willDispose.delete(o.key),this._items.push(A)),[3,8];case 6:return this.inline=this.inlineDeferred,[4,this.options.buildItem(o)];case 7:A=s.sent(),this.inline=this.inlineImmediate,A&&(this.currentItem=A,this.deferredInlining&&(this.inline(this.deferredInlining),delete this.deferredInlining),this.keyToItem.set(o.key,A),this.keyToInitializer.set(o.key,o),this._items.push(A)),s.label=8;case 8:return delete this.currentItem,r++,[3,1];case 9:return this.willDispose.forEach(function(e){return n(a,void 0,void 0,function(){var t,r;return i(this,function(n){switch(n.label){case 0:return t=this.keyToItem.get(e),r=this.keyToInitializer.get(e),t&&r?[4,this.options.destroyItem(r,t)]:[2];case 1:return n.sent()&&(this.keyToItem.delete(e),this.keyToInitializer.delete(e)),[2]}})})}),this.willDispose.clear(),this.keyToInitializer.forEach(function(e){a.willDispose.add(e.key)}),this.currentInitializers=[],delete this.currentItem,delete this.currentInitializer,[2]}})})},e.prototype.getByKey=function(e){return this.keyToItem.get(e)},e.prototype.rebuild=function(){return n(this,void 0,void 0,function(){var e;return i(this,function(t){switch(t.label){case 0:return this.currentItem&&this.currentInitializer?(this.keyToItem.delete(this.currentItem.id),this.keyToInitializer.delete(this.currentItem.id),this.options.destroyItem(this.currentInitializer,this.currentItem),[4,this.options.buildItem(this.currentInitializer)]):[2];case 1:return(e=t.sent())&&(this.keyToItem.set(this.currentItem.id,e),this.keyToInitializer.set(this.currentItem.id,this.currentInitializer)),[2]}})})},e}();t.ReactiveDiff=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){var e=this;this.promise=new Promise(function(t,r){return e.resolver=t,e.rejector=r})}return e.prototype.resolve=function(e){this.resolver(e)},e.prototype.reject=function(e){this.rejector(e)},e}();t.PromiseResolver=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(12);t.drawMode=function(e,t){switch(t){case n.GLSettings.Model.DrawMode.LINES:return e.LINES;case n.GLSettings.Model.DrawMode.LINE_LOOP:return e.LINE_LOOP;case n.GLSettings.Model.DrawMode.LINE_STRIP:return e.LINE_STRIP;case n.GLSettings.Model.DrawMode.POINTS:return e.POINTS;case n.GLSettings.Model.DrawMode.TRIANGLES:return e.TRIANGLES;case n.GLSettings.Model.DrawMode.TRIANGLE_FAN:return e.TRIANGLE_FAN;case n.GLSettings.Model.DrawMode.TRIANGLE_STRIP:return e.TRIANGLE_STRIP;default:return e.TRIANGLES}},t.texelFormat=function(e,t){switch(t){case n.GLSettings.Texture.TexelDataType.Alpha:return e.ALPHA;case n.GLSettings.Texture.TexelDataType.DepthComponent:return e.DEPTH_COMPONENT;case n.GLSettings.Texture.TexelDataType.DepthStencil:return e.DEPTH_STENCIL;case n.GLSettings.Texture.TexelDataType.Luminance:return e.LUMINANCE;case n.GLSettings.Texture.TexelDataType.LuminanceAlpha:return e.LUMINANCE_ALPHA;case n.GLSettings.Texture.TexelDataType.RGB:return e.RGB;case n.GLSettings.Texture.TexelDataType.RGBA:return e.RGBA;default:return console.warn("An Unsupported texel format was provided",t),e.RGBA}},t.inputImageFormat=function(e,t){switch(t){case n.GLSettings.Texture.SourcePixelFormat.Byte:return e.BYTE;case n.GLSettings.Texture.SourcePixelFormat.Float:return e.FLOAT;case n.GLSettings.Texture.SourcePixelFormat.HalfFloat:return console.warn("Unsupported HALF_FLOAT"),e.BYTE;case n.GLSettings.Texture.SourcePixelFormat.Int:return e.INT;case n.GLSettings.Texture.SourcePixelFormat.Short:return e.SHORT;case n.GLSettings.Texture.SourcePixelFormat.UnsignedByte:return e.UNSIGNED_BYTE;case n.GLSettings.Texture.SourcePixelFormat.UnsignedInt:return e.UNSIGNED_INT;case n.GLSettings.Texture.SourcePixelFormat.UnsignedShort:return e.UNSIGNED_SHORT;case n.GLSettings.Texture.SourcePixelFormat.UnsignedShort_4_4_4_4:return e.UNSIGNED_SHORT_4_4_4_4;case n.GLSettings.Texture.SourcePixelFormat.UnsignedShort_5_5_5_1:return e.UNSIGNED_SHORT_5_5_5_1;case n.GLSettings.Texture.SourcePixelFormat.UnsignedShort_5_6_5:return e.UNSIGNED_SHORT_5_6_5;default:return console.warn("An Unsupported input image format was provided",t),e.BYTE}},t.magFilter=function(e,t,r){if(!r)return e.LINEAR;switch(t){case n.GLSettings.Texture.TextureMagFilter.Linear:return e.LINEAR;case n.GLSettings.Texture.TextureMagFilter.Nearest:return e.NEAREST}},t.minFilter=function(e,t,r,i){if(!r)return e.LINEAR;switch(t){case n.GLSettings.Texture.TextureMinFilter.Linear:return e.LINEAR;case n.GLSettings.Texture.TextureMinFilter.Nearest:return e.NEAREST;case n.GLSettings.Texture.TextureMinFilter.LinearMipMapLinear:return i?e.LINEAR_MIPMAP_LINEAR:e.LINEAR;case n.GLSettings.Texture.TextureMinFilter.LinearMipMapNearest:return i?e.LINEAR_MIPMAP_NEAREST:e.LINEAR;case n.GLSettings.Texture.TextureMinFilter.NearestMipMapLinear:return i?e.NEAREST_MIPMAP_LINEAR:e.NEAREST;case n.GLSettings.Texture.TextureMinFilter.NearestMipMapNearest:return i?e.NEAREST_MIPMAP_NEAREST:e.NEAREST;default:return e.LINEAR}},t.colorBufferFormat=function(e,t){switch(t){case n.GLSettings.RenderTarget.ColorBufferFormat.RGB565:return e.RGB565;case n.GLSettings.RenderTarget.ColorBufferFormat.RGB5_A1:return e.RGB5_A1;case n.GLSettings.RenderTarget.ColorBufferFormat.RGBA4:default:return e.RGBA4}},t.depthBufferFormat=function(e,t){switch(t){case n.GLSettings.RenderTarget.DepthBufferFormat.DEPTH_COMPONENT16:return e.DEPTH_COMPONENT16;case n.GLSettings.RenderTarget.DepthBufferFormat.DEPTH_STENCIL:return e.DEPTH_STENCIL;default:return e.DEPTH_COMPONENT16}},t.stencilBufferFormat=function(e,t){switch(t){case n.GLSettings.RenderTarget.StencilBufferFormat.STENCIL_INDEX8:default:return e.STENCIL_INDEX8}},t.wrapMode=function(e,t){switch(t){case n.GLSettings.Texture.Wrapping.CLAMP_TO_EDGE:return e.CLAMP_TO_EDGE;case n.GLSettings.Texture.Wrapping.MIRRORED_REPEAT:return e.MIRRORED_REPEAT;case n.GLSettings.Texture.Wrapping.REPEAT:return e.REPEAT}},t.indexToColorAttachment=function(e,t,r,n){if(n)return e.COLOR_ATTACHMENT0;var i=t.drawBuffers;if(i instanceof WebGL2RenderingContext)switch(r){case 0:return i.COLOR_ATTACHMENT0;case 1:return i.COLOR_ATTACHMENT1;case 2:return i.COLOR_ATTACHMENT2;case 3:return i.COLOR_ATTACHMENT3;case 4:return i.COLOR_ATTACHMENT4;case 5:return i.COLOR_ATTACHMENT5;case 6:return i.COLOR_ATTACHMENT6;case 7:return i.COLOR_ATTACHMENT7;case 8:return i.COLOR_ATTACHMENT8;case 9:return i.COLOR_ATTACHMENT9;case 10:return i.COLOR_ATTACHMENT10;case 11:return i.COLOR_ATTACHMENT11;case 12:return i.COLOR_ATTACHMENT12;case 13:return i.COLOR_ATTACHMENT13;case 14:return i.COLOR_ATTACHMENT14;case 15:return i.COLOR_ATTACHMENT15}else if(i)switch(r){case 0:return i.COLOR_ATTACHMENT0_WEBGL;case 1:return i.COLOR_ATTACHMENT1_WEBGL;case 2:return i.COLOR_ATTACHMENT2_WEBGL;case 3:return i.COLOR_ATTACHMENT3_WEBGL;case 4:return i.COLOR_ATTACHMENT4_WEBGL;case 5:return i.COLOR_ATTACHMENT5_WEBGL;case 6:return i.COLOR_ATTACHMENT6_WEBGL;case 7:return i.COLOR_ATTACHMENT7_WEBGL;case 8:return i.COLOR_ATTACHMENT8_WEBGL;case 9:return i.COLOR_ATTACHMENT9_WEBGL;case 10:return i.COLOR_ATTACHMENT10_WEBGL;case 11:return i.COLOR_ATTACHMENT11_WEBGL;case 12:return i.COLOR_ATTACHMENT12_WEBGL;case 13:return i.COLOR_ATTACHMENT13_WEBGL;case 14:return i.COLOR_ATTACHMENT14_WEBGL;case 15:return i.COLOR_ATTACHMENT15_WEBGL}return e.COLOR_ATTACHMENT0},t.indexToTextureUnit=function(e,t){return e.TEXTURE0+t},t.textureUnitToIndex=function(e,t){return t-e.TEXTURE0}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseTextDecoration=t.TEXT_DECORATION_LINE=t.TEXT_DECORATION=t.TEXT_DECORATION_STYLE=void 0;var n,i=r(13),o=(n=i)&&n.__esModule?n:{default:n};var A=t.TEXT_DECORATION_STYLE={SOLID:0,DOUBLE:1,DOTTED:2,DASHED:3,WAVY:4},a=t.TEXT_DECORATION={NONE:null},s=t.TEXT_DECORATION_LINE={UNDERLINE:1,OVERLINE:2,LINE_THROUGH:3,BLINK:4},c=function(e){switch(e){case"underline":return s.UNDERLINE;case"overline":return s.OVERLINE;case"line-through":return s.LINE_THROUGH}return s.BLINK};t.parseTextDecoration=function(e){var t,r="none"===(t=e.textDecorationLine?e.textDecorationLine:e.textDecoration)?null:t.split(" ").map(c);return null===r?a.NONE:{textDecorationLine:r,textDecorationColor:e.textDecorationColor?new o.default(e.textDecorationColor):null,textDecorationStyle:function(e){switch(e){case"double":return A.DOUBLE;case"dotted":return A.DOTTED;case"dashed":return A.DASHED;case"wavy":return A.WAVY}return A.SOLID}(e.textDecorationStyle)}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseBorder=t.BORDER_SIDES=t.BORDER_STYLE=void 0;var n,i=r(13),o=(n=i)&&n.__esModule?n:{default:n};var A=t.BORDER_STYLE={NONE:0,SOLID:1},a=t.BORDER_SIDES={TOP:0,RIGHT:1,BOTTOM:2,LEFT:3},s=Object.keys(a).map(function(e){return e.toLowerCase()});t.parseBorder=function(e){return s.map(function(t){var r=new o.default(e.getPropertyValue("border-"+t+"-color")),n=function(e){switch(e){case"none":return A.NONE}return A.SOLID}(e.getPropertyValue("border-"+t+"-style")),i=parseFloat(e.getPropertyValue("border-"+t+"-width"));return{borderColor:r,borderStyle:n,borderWidth:isNaN(i)?0:i}})}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.toCodePoints=function(e){for(var t=[],r=0,n=e.length;r<n;){var i=e.charCodeAt(r++);if(i>=55296&&i<=56319&&r<n){var o=e.charCodeAt(r++);56320==(64512&o)?t.push(((1023&i)<<10)+(1023&o)+65536):(t.push(i),r--)}else t.push(i)}return t},t.fromCodePoint=function(){if(String.fromCodePoint)return String.fromCodePoint.apply(String,arguments);var e=arguments.length;if(!e)return"";for(var t=[],r=-1,n="";++r<e;){var i=arguments.length<=r?void 0:arguments[r];i<=65535?t.push(i):(i-=65536,t.push(55296+(i>>10),i%1024+56320)),(r+1===e||t.length>16384)&&(n+=String.fromCharCode.apply(String,t),t.length=0)}return n};for(var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i="undefined"==typeof Uint8Array?[]:new Uint8Array(256),o=0;o<n.length;o++)i[n.charCodeAt(o)]=o;t.decode=function(e){var t=.75*e.length,r=e.length,n=void 0,o=0,A=void 0,a=void 0,s=void 0,c=void 0;"="===e[e.length-1]&&(t--,"="===e[e.length-2]&&t--);var u="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array&&void 0!==Uint8Array.prototype.slice?new ArrayBuffer(t):new Array(t),l=Array.isArray(u)?u:new Uint8Array(u);for(n=0;n<r;n+=4)A=i[e.charCodeAt(n)],a=i[e.charCodeAt(n+1)],s=i[e.charCodeAt(n+2)],c=i[e.charCodeAt(n+3)],l[o++]=A<<2|a>>4,l[o++]=(15&a)<<4|s>>2,l[o++]=(3&s)<<6|63&c;return u},t.polyUint16Array=function(e){for(var t=e.length,r=[],n=0;n<t;n+=2)r.push(e[n+1]<<8|e[n]);return r},t.polyUint32Array=function(e){for(var t=e.length,r=[],n=0;n<t;n+=4)r.push(e[n+3]<<24|e[n+2]<<16|e[n+1]<<8|e[n]);return r}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createCounterText=t.inlineListItemElement=t.getListOwner=void 0;var n=r(21),i=s(r(20)),o=s(r(42)),A=r(41),a=r(96);function s(e){return e&&e.__esModule?e:{default:e}}var c=["OL","UL","MENU"],u=(t.getListOwner=function(e){var t=e.parent;if(!t)return null;do{if(-1!==c.indexOf(t.tagName))return t;t=t.parent}while(t);return e.parent},t.inlineListItemElement=function(e,t,r){var a=t.style.listStyle;if(a){var s=e.ownerDocument.defaultView.getComputedStyle(e,null),c=e.ownerDocument.createElement("html2canvaswrapper");switch((0,n.copyCSSStyles)(s,c),c.style.position="absolute",c.style.bottom="auto",c.style.display="block",c.style.letterSpacing="normal",a.listStylePosition){case A.LIST_STYLE_POSITION.OUTSIDE:c.style.left="auto",c.style.right=e.ownerDocument.defaultView.innerWidth-t.bounds.left-t.style.margin[1].getAbsoluteValue(t.bounds.width)+7+"px",c.style.textAlign="right";break;case A.LIST_STYLE_POSITION.INSIDE:c.style.left=t.bounds.left-t.style.margin[3].getAbsoluteValue(t.bounds.width)+"px",c.style.right="auto",c.style.textAlign="left"}var u=void 0,l=t.style.margin[0].getAbsoluteValue(t.bounds.width),h=a.listStyleImage;if(h)if("url"===h.method){var d=e.ownerDocument.createElement("img");d.src=h.args[0],c.style.top=t.bounds.top-l+"px",c.style.width="auto",c.style.height="auto",c.appendChild(d)}else{var f=.5*parseFloat(t.style.font.fontSize);c.style.top=t.bounds.top-l+t.bounds.height-1.5*f+"px",c.style.width=f+"px",c.style.height=f+"px",c.style.backgroundImage=s.listStyleImage}else"number"==typeof t.listIndex&&(u=e.ownerDocument.createTextNode(y(t.listIndex,a.listStyleType,!0)),c.appendChild(u),c.style.top=t.bounds.top-l+"px");var p=e.ownerDocument.body;p.appendChild(c),u?(t.childNodes.push(o.default.fromTextNode(u,t)),p.removeChild(c)):t.childNodes.push(new i.default(c,t,r,0))}},{integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]}),l={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},h={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},d={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},f=function(e,t,r,n,i,o){return e<t||e>r?y(e,i,o.length>0):n.integers.reduce(function(t,r,i){for(;e>=r;)e-=r,t+=n.values[i];return t},"")+o},p=function(e,t,r,n){var i="";do{r||e--,i=n(e)+i,e/=t}while(e*t>=t);return i},g=function(e,t,r,n,i){var o=r-t+1;return(e<0?"-":"")+(p(Math.abs(e),o,n,function(e){return(0,a.fromCodePoint)(Math.floor(e%o)+t)})+i)},B=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:". ",n=t.length;return p(Math.abs(e),n,!1,function(e){return t[Math.floor(e%n)]})+r},w=function(e,t,r,i,o,a){if(e<-9999||e>9999)return y(e,A.LIST_STYLE_TYPE.CJK_DECIMAL,o.length>0);var s=Math.abs(e),c=o;if(0===s)return t[0]+c;for(var u=0;s>0&&u<=4;u++){var l=s%10;0===l&&(0,n.contains)(a,1)&&""!==c?c=t[l]+c:l>1||1===l&&0===u||1===l&&1===u&&(0,n.contains)(a,2)||1===l&&1===u&&(0,n.contains)(a,4)&&e>100||1===l&&u>1&&(0,n.contains)(a,8)?c=t[l]+(u>0?r[u-1]:"")+c:1===l&&u>0&&(c=r[u-1]+c),s=Math.floor(s/10)}return(e<0?i:"")+c},y=t.createCounterText=function(e,t,r){var n=r?". ":"",i=r?"":"",o=r?", ":"";switch(t){case A.LIST_STYLE_TYPE.DISC:return"";case A.LIST_STYLE_TYPE.CIRCLE:return"";case A.LIST_STYLE_TYPE.SQUARE:return"";case A.LIST_STYLE_TYPE.DECIMAL_LEADING_ZERO:var a=g(e,48,57,!0,n);return a.length<4?"0"+a:a;case A.LIST_STYLE_TYPE.CJK_DECIMAL:return B(e,"",i);case A.LIST_STYLE_TYPE.LOWER_ROMAN:return f(e,1,3999,u,A.LIST_STYLE_TYPE.DECIMAL,n).toLowerCase();case A.LIST_STYLE_TYPE.UPPER_ROMAN:return f(e,1,3999,u,A.LIST_STYLE_TYPE.DECIMAL,n);case A.LIST_STYLE_TYPE.LOWER_GREEK:return g(e,945,969,!1,n);case A.LIST_STYLE_TYPE.LOWER_ALPHA:return g(e,97,122,!1,n);case A.LIST_STYLE_TYPE.UPPER_ALPHA:return g(e,65,90,!1,n);case A.LIST_STYLE_TYPE.ARABIC_INDIC:return g(e,1632,1641,!0,n);case A.LIST_STYLE_TYPE.ARMENIAN:case A.LIST_STYLE_TYPE.UPPER_ARMENIAN:return f(e,1,9999,l,A.LIST_STYLE_TYPE.DECIMAL,n);case A.LIST_STYLE_TYPE.LOWER_ARMENIAN:return f(e,1,9999,l,A.LIST_STYLE_TYPE.DECIMAL,n).toLowerCase();case A.LIST_STYLE_TYPE.BENGALI:return g(e,2534,2543,!0,n);case A.LIST_STYLE_TYPE.CAMBODIAN:case A.LIST_STYLE_TYPE.KHMER:return g(e,6112,6121,!0,n);case A.LIST_STYLE_TYPE.CJK_EARTHLY_BRANCH:return B(e,"",i);case A.LIST_STYLE_TYPE.CJK_HEAVENLY_STEM:return B(e,"",i);case A.LIST_STYLE_TYPE.CJK_IDEOGRAPHIC:case A.LIST_STYLE_TYPE.TRAD_CHINESE_INFORMAL:return w(e,"","","",i,14);case A.LIST_STYLE_TYPE.TRAD_CHINESE_FORMAL:return w(e,"","","",i,15);case A.LIST_STYLE_TYPE.SIMP_CHINESE_INFORMAL:return w(e,"","","",i,14);case A.LIST_STYLE_TYPE.SIMP_CHINESE_FORMAL:return w(e,"","","",i,15);case A.LIST_STYLE_TYPE.JAPANESE_INFORMAL:return w(e,"","","",i,0);case A.LIST_STYLE_TYPE.JAPANESE_FORMAL:return w(e,"","","",i,7);case A.LIST_STYLE_TYPE.KOREAN_HANGUL_FORMAL:return w(e,"",""," ",o,7);case A.LIST_STYLE_TYPE.KOREAN_HANJA_INFORMAL:return w(e,"",""," ",o,0);case A.LIST_STYLE_TYPE.KOREAN_HANJA_FORMAL:return w(e,"",""," ",o,7);case A.LIST_STYLE_TYPE.DEVANAGARI:return g(e,2406,2415,!0,n);case A.LIST_STYLE_TYPE.GEORGIAN:return f(e,1,19999,d,A.LIST_STYLE_TYPE.DECIMAL,n);case A.LIST_STYLE_TYPE.GUJARATI:return g(e,2790,2799,!0,n);case A.LIST_STYLE_TYPE.GURMUKHI:return g(e,2662,2671,!0,n);case A.LIST_STYLE_TYPE.HEBREW:return f(e,1,10999,h,A.LIST_STYLE_TYPE.DECIMAL,n);case A.LIST_STYLE_TYPE.HIRAGANA:return B(e,"");case A.LIST_STYLE_TYPE.HIRAGANA_IROHA:return B(e,"");case A.LIST_STYLE_TYPE.KANNADA:return g(e,3302,3311,!0,n);case A.LIST_STYLE_TYPE.KATAKANA:return B(e,"",i);case A.LIST_STYLE_TYPE.KATAKANA_IROHA:return B(e,"",i);case A.LIST_STYLE_TYPE.LAO:return g(e,3792,3801,!0,n);case A.LIST_STYLE_TYPE.MONGOLIAN:return g(e,6160,6169,!0,n);case A.LIST_STYLE_TYPE.MYANMAR:return g(e,4160,4169,!0,n);case A.LIST_STYLE_TYPE.ORIYA:return g(e,2918,2927,!0,n);case A.LIST_STYLE_TYPE.PERSIAN:return g(e,1776,1785,!0,n);case A.LIST_STYLE_TYPE.TAMIL:return g(e,3046,3055,!0,n);case A.LIST_STYLE_TYPE.TELUGU:return g(e,3174,3183,!0,n);case A.LIST_STYLE_TYPE.THAI:return g(e,3664,3673,!0,n);case A.LIST_STYLE_TYPE.TIBETAN:return g(e,3872,3881,!0,n);case A.LIST_STYLE_TYPE.DECIMAL:default:return g(e,48,57,!0,n)}}},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o=r(24),A=r(44),a=r(0),s=new o.Texture({data:{width:2,height:2,buffer:new Uint8Array(16)}});var c=function(e){function t(t,r){var n=e.call(this)||this;return n.manager=r,n.resourceType=t,n}return i(t,e),t.prototype.expand=function(e,t,r,n){var i=this,o=this.manager,A=[],c=new Map;t.forEach(function(e){if(n=e,o=i.manager.router,s=i.resourceType,n&&n.resource&&o.getResourceType(n.resource.key())===s&&void 0!==n.resource.name&&void 0!==n.resource.key){void 0===e.size&&(e.size=a.InstanceAttributeSize.FOUR);var t=e.resource.shaderInjection||a.ShaderInjectionTarget.FRAGMENT,r=c.get(e.resource.name);r?c.set(e.resource.name,[r[0]||t===a.ShaderInjectionTarget.VERTEX||t===a.ShaderInjectionTarget.ALL,r[1]||t===a.ShaderInjectionTarget.FRAGMENT||t===a.ShaderInjectionTarget.ALL]):(A.push(e),c.set(e.resource.name,[t===a.ShaderInjectionTarget.VERTEX||t===a.ShaderInjectionTarget.ALL,t===a.ShaderInjectionTarget.FRAGMENT||t===a.ShaderInjectionTarget.ALL]))}var n,o,s});var u=A.map(function(e){var t=a.ShaderInjectionTarget.FRAGMENT;if(e.resource){var r=c.get(e.resource.name);r&&(t=r[0]&&r[1]&&a.ShaderInjectionTarget.ALL||r[0]&&!r[1]&&a.ShaderInjectionTarget.VERTEX||!r[0]&&r[1]&&a.ShaderInjectionTarget.FRAGMENT||t)}return[{name:e.resource.name,shaderInjection:t,size:a.UniformSize.ATLAS,update:function(){var t=o.getResource(e.resource.key());return t&&t.texture||s}},{name:e.resource.name+"_size",shaderInjection:t,size:a.UniformSize.TWO,update:function(){var t=o.getResource(e.resource.key());if(t){var r=t.texture;if(r&&r.data){var n=r.data;return[n.width||1,n.height||1]}}return[1,1]}}]}),l=[];return u.forEach(function(e){return e.forEach(function(e){return l.push(e)})}),{instanceAttributes:[],vertexAttributes:[],uniforms:l}},t.prototype.validate=function(e,t,r,n){var i=!1;return t.forEach(function(e){e.easing&&e.resource&&(console.warn("An instance attribute can not have both easing and resource properties. Undefined behavior will occur."),console.warn(e),i=!0)}),!i},t.prototype.processHeaderInjection=function(e,t,r,n,i,o,A){for(var s=0,c=A.length;s<c;++s){var u=A[s],l=u.shaderInjection||a.ShaderInjectionTarget.VERTEX;u.size===a.UniformSize.ATLAS&&l===e&&this.setDeclaration(t,u.name,"uniform sampler2D "+u.name+";\n","TextureIOExpansion")}return{injection:""}},t}(A.BaseIOExpansion);t.TextureIOExpansion=c},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var A=r(24),a=r(0),s=r(23),c=r(27),u=r(19),l=r(2)("performance");t.createAtlas=function(e){return o({key:"",type:a.ResourceType.ATLAS},e)},t.isAtlasResource=function(e){return e&&e.type===a.ResourceType.ATLAS};var h=function(e){function t(t){var r=e.call(this,t)||this;r.resourceReferences=new Map,r.type=a.ResourceType.ATLAS;var n=document.createElement("canvas");return r.width=n.width=t.width,r.height=n.height=t.height,r.textureSettings=t.textureSettings,r.packing=new c.PackNode(0,0,t.width,t.height),r.createTexture(n),r}return i(t,e),t.prototype.createTexture=function(e){var t;this.texture||(t=this.textureSettings?o({generateMipMaps:!0,premultiplyAlpha:!0},this.textureSettings):{generateMipMaps:!0,premultiplyAlpha:!0},this.texture=new A.Texture(o({data:e},t)))},t.prototype.destroy=function(){var e=this;this.texture.dispose(),this.resourceReferences.forEach(function(t){e.invalidateTexture(t.subtexture)})},t.prototype.invalidateTexture=function(e){var t=[0,0];e.aspectRatio=1,e.atlasBL=t,e.atlasBR=t,e.atlasTL=t,e.atlasTR=t,e.isValid=!1,e.texture=null,e.pixelHeight=0,e.pixelWidth=0,delete e.source,e.video&&(e.video.monitor.destroy(),delete e.video)},t.prototype.resolveResources=function(){var e=this,t=[];this.resourceReferences.forEach(function(r,n){r.count<=0&&r.subtexture&&(l("A subtexture on an atlas has been invalidated as it is deemed no longer used: %o",r.subtexture),e.invalidateTexture(r.subtexture),t.push(n))});for(var r=0,n=t.length;r<n;++r)this.resourceReferences.delete(t[r])},t.prototype.stopUsingResource=function(e){(this.resourceReferences.get(e.source)||{subtexture:e.texture||new u.SubTexture,count:0}).count--},t.prototype.useResource=function(e){(this.resourceReferences.get(e.source)||{subtexture:e.texture,count:0}).count++},t}(s.IdentifyByKey);t.Atlas=h},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.uniformBufferInstanceBufferName="instanceData",t.activeAttributeName="_active",t.TO_RADIANS=Math.PI/180,t.TO_DEGREES=180/Math.PI},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o=r(64),A=r(7),a=r(37),s=r(1),c=r(30),u=r(31);t.isUniformBufferLocation=function(e){return e&&e.buffer&&e.buffer.value&&e.type===a.MaterialUniformType.VEC4_ARRAY};var l=function(e){function t(t,r){var n=e.call(this,t,r)||this;n.buffers=[],n.availableClusters=[],n.instanceToCluster={},n.clusterToBuffer=new Map,n.add=function(e){n.availableClusters.length<=0&&n.makeNewBuffer();var t=n.availableClusters.pop();return t?n.instanceToCluster[e.uid]=t:console.warn("No valid cluster available for instance added to uniform manager."),t},n.remove=function(e){var t=this.instanceToCluster[e.uid];return t&&(delete this.instanceToCluster[e.uid],this.availableClusters.push(t)),e};var i=0;return t.instanceAttributes.forEach(function(e){i=Math.max(e.block||0,i)}),n.uniformBlocksPerInstance=i+1,n}return i(t,e),t.prototype.destroy=function(){this.buffers.forEach(function(e){e.geometry.dispose(),e.material.dispose()})},t.prototype.getBufferLocations=function(e){return this.instanceToCluster[e.uid]},t.prototype.getActiveAttributePropertyId=function(){return-1},t.prototype.getInstanceCount=function(){return-1},t.prototype.getUpdateAllPropertyIdList=function(){return[]},t.prototype.managesInstance=function(e){return void 0===this.instanceToCluster[e.uid]},t.prototype.removeFromScene=function(){var e=this.scene;if(e.container){for(var t=0,r=this.buffers.length;t<r;++t){var n=this.buffers[t];e.container.remove(n.model)}delete this.scene}},t.prototype.setScene=function(e){if(e.container){for(var t=0,r=this.buffers.length;t<r;++t){var n=this.buffers[t];e.container.add(n.model)}this.scene=e}else console.warn("Can not set a scene that has an undefined container.")},t.prototype.makeNewBuffer=function(){var e=new A.Geometry;this.layer.vertexAttributes.forEach(function(t){t.materialAttribute&&e.addAttribute(t.name,t.materialAttribute)});var t=this.layer.material.clone(),r=c.generateLayerModel(e,t,this.layer.model.drawMode);r.vertexDrawRange=[0,this.layer.maxInstancesPerBuffer*this.layer.instanceVertexCount];var n={activeInstances:[],clusters:[],firstInstance:0,geometry:e,lastInstance:0,material:t,model:r};this.buffers.push(n);var i=0,u=o.uniformBufferInstanceBufferName,l=t.uniforms[u];if(a.isUniformVec4Array(l)){l.value=l.value.map(function(){return[0,0,0,0]});for(var h=Object.assign({},this.layer.instanceAttributes[0],{bufferAttribute:new A.Attribute(new Float32Array(1),1),uid:s.uid()}),d=0,f=this.layer.maxInstancesPerBuffer;d<f;++d){var p={attribute:h,buffer:l,instanceIndex:d,range:[i,0]};i+=this.uniformBlocksPerInstance,p.range[1]=i,n.clusters.push(p),this.availableClusters.push(p),this.clusterToBuffer.set(p,n)}for(d=0,f=this.layer.uniforms.length;d<f;++d){var g=this.layer.uniforms[d];g.materialUniforms.push(t.uniforms[g.name])}this.scene&&this.scene.container&&this.scene.container.add(n.model)}else console.warn("Material is utilizing an invalid uniform type for Uniform Buffer Management. Buffering will not be possible.")},t}(u.BufferManagerBase);t.UniformBufferManager=l},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(49),i=r(4),o=r(50),A=r(71),a=r(72),s=r(73),c=new o.NoView;function u(e,t){return t.d&&e.d?t.d.depth-e.d.depth:0}function l(e,t){return e.touch.identifier-t.touch.identifier}c.fitViewtoViewport(new n.Bounds({x:0,y:0,width:100,height:100}),new n.Bounds({x:0,y:0,width:100,height:100}));var h=function(){function e(e,t,r,n){var i=this;this.eventCleanup=[],this._waitingForRender=!0,this.getViewsUnderPosition=function(e){var t=i.quadTree.query(e);return t.sort(u),t},this.resize=function(){i._waitingForRender=!0},this.context=e,this.surface=t,this.setControllers(r),this.addContextListeners(n)}return Object.defineProperty(e.prototype,"waitingForRender",{get:function(){return this._waitingForRender},set:function(e){if(this._waitingForRender=e,!e){this.quadTree=new s.QuadTree(0,0,0,0);for(var t=this.scenes,r=[],n=0,i=t.length;n<i;++n)for(var o=t[n],A=0,a=o.views.length;A<a;++A){var c=o.views[A];r.push(c.screenBounds)}this.quadTree.addAll(r)}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scenes",{get:function(){return this.surface&&this.surface.sceneDiffs?this.surface.sceneDiffs.items:[]},enumerable:!0,configurable:!0}),e.prototype.addContextListeners=function(e){this.addMouseContextListeners(e),this.addTouchContextListeners()},e.prototype.addMouseContextListeners=function(e){var t,r=this,n=this.context,o=!1;if(e){var A=function(e){var i=a.eventElementPosition(e,n),o=r.getViewsUnderPosition(i);if(!(o.length<=0)){t={canClick:!1,currentPosition:i,deltaPosition:[0,0],previousPosition:i,start:i,startTime:Date.now(),startView:o[0].d,event:e,wheel:r.makeWheel(e),button:-1};var A=r.makeMouseInteraction(t);r.controllers.forEach(function(e){e.handleWheel(A)}),e.stopPropagation(),e.preventDefault()}};"onwheel"in n&&(n.onwheel=A),"addEventListener"in n&&(n.addEventListener("DOMMouseScroll",A),this.eventCleanup.push(["DOMMouseScroll",A]))}n.onmouseleave=function(e){if(!r.waitingForRender&&t){var o=a.eventElementPosition(e,n);t.deltaPosition=i.subtract2(o,t.currentPosition),t.previousPosition=t.currentPosition,t.currentPosition=o;var A=r.makeMouseInteraction(t);r.controllers.forEach(function(e){e.handleMouseOut(A)})}},n.onmousemove=function(e){if(!r.waitingForRender){var A=a.eventElementPosition(e,n);if(!t){var s=r.getViewsUnderPosition(A);t={canClick:!1,currentPosition:A,deltaPosition:[0,0],previousPosition:A,start:A,startTime:Date.now(),startView:s[0].d,event:e,wheel:r.makeWheel(),button:-1}}t.deltaPosition=i.subtract2(A,t.currentPosition),t.previousPosition=t.currentPosition,t.currentPosition=A,t.canClick=!1;var c=r.makeMouseInteraction(t);r.controllers.forEach(function(e){e.handleMouseMove(c)}),o=!0}},n.onmousedown=function(e){if(!r.waitingForRender){var A=a.eventElementPosition(e,n),s=r.getViewsUnderPosition(A);if(!(s.length<=0)){t={canClick:!0,currentPosition:A,deltaPosition:[0,0],previousPosition:A,start:A,startTime:Date.now(),startView:s[0].d,event:e,wheel:r.makeWheel(),button:e.button};var c=r.makeMouseInteraction(t);r.controllers.forEach(function(e){e.handleMouseDown(c)}),e.stopPropagation(),document.onmousemove=function(e){if(t){if(!o){var A=a.eventElementPosition(e,n);t.deltaPosition=i.subtract2(A,t.currentPosition),t.previousPosition=t.currentPosition,t.currentPosition=A,t.canClick=!1}var s=r.makeMouseInteraction(t);r.controllers.forEach(function(e){e.handleDrag(s)}),e.preventDefault(),e.stopPropagation(),o=!1}},document.onmouseup=function(e){document.onmousemove=null,document.onmouseup=null,document.onmouseover=null,t=void 0},document.onmouseover=function(e){if(t){var o=a.eventElementPosition(e,n);t.deltaPosition=i.subtract2(o,t.currentPosition),t.previousPosition=t.currentPosition,t.currentPosition=o;var A=r.makeMouseInteraction(t);r.controllers.forEach(function(e){e.handleMouseOver(A)}),e.stopPropagation()}},n.onmouseup=function(e){if(t){var o=a.eventElementPosition(e,n);t.deltaPosition=i.subtract2(o,t.currentPosition),t.previousPosition=t.currentPosition,t.currentPosition=o,t.button=e.button;var A=r.makeMouseInteraction(t);r.controllers.forEach(function(e){e.handleMouseUp(A)}),t.canClick&&Date.now()-t.startTime<1e3&&r.controllers.forEach(function(e){e.handleClick(A)}),t=void 0}};var u=n;void 0!==u.onselectstart?u.onselectstart=function(){return!1}:n.addEventListener("selectstart",function(){e.preventDefault()})}}}},e.prototype.addTouchContextListeners=function(){var e=this,t=this.context,r=new Map,n=new Map;function o(e){return e.map(function(e){return e.touch})}function s(e){return e.reduce(function(e,t){return t.touch.startTime>e.touch.startTime?t:e},e[0])}var c={center:function(t){return t.length<=0?[0,0]:e.getTouchCenter(o(t))},centerDelta:function(t){if(t.length<=0)return[0,0];var r=o(t),n=e.getTouchCenter(r,function(e){return e.previousPosition}),A=e.getTouchCenter(r);return i.subtract2(A,n)},centerStart:function(t){if(t.length<=0)return[0,0];var r=s(t).touch;return e.getTouchCenter(o(t),function(e){return e===r?e.start:e.startRelative.get(r)||[0,0]})},id:function(e){return o(e).sort(l).map(function(e){return e.touch.identifier}).join("_")},rotation:function(t){if(t.length<=0)return 0;var r=o(t),n=e.getTouchCenter(r);return e.getAverageAngle(r,n)},rotationDelta:function(t){if(t.length<=0)return 0;var r=o(t),n=e.getTouchCenter(r,function(e){return e.previousPosition}),i=e.getAverageAngle(r,n,function(e){return e.previousPosition}),A=e.getTouchCenter(r);return e.getAverageAngle(r,A)-i},rotationStart:function(t){if(t.length<=0)return 0;var r=s(t).touch,n=o(t),i=e.getTouchCenter(n,function(e){return e===r?e.start:e.startRelative.get(r)||[0,0]});return e.getAverageAngle(n,i,function(e){return e===r?e.start:e.startRelative.get(r)||[0,0]})},spread:function(t){if(t.length<=0)return 0;var r=o(t),n=e.getTouchCenter(r);return e.getAverageDistance(r,n)},spreadDelta:function(t){if(t.length<=0)return 0;var r=o(t),n=e.getTouchCenter(r,function(e){return e.previousPosition}),i=e.getAverageDistance(r,n,function(e){return e.previousPosition}),A=e.getTouchCenter(r);return e.getAverageDistance(r,A)-i},spreadStart:function(t){if(t.length<=0)return 0;var r=s(t).touch,n=o(t),i=e.getTouchCenter(n,function(e){return e===r?e.start:e.startRelative.get(r)||[0,0]});return e.getAverageDistance(n,i,function(e){return e===r?e.start:e.startRelative.get(r)||[0,0]})}};t.ontouchstart=function(t){t.preventDefault(),t.stopPropagation();for(var i=e.getTouches(t),o=[],s=[],l=0,f=i.length;l<f;++l){var p=i[l],g=r.get(p.identifier);if(g)o.push(g);else{var B=a.eventElementPosition(p),w=e.getViewsUnderPosition(B);if(w.length<=0)continue;var y=w[0].d,v={canTap:!0,currentPosition:B,deltaPosition:[0,0],startTime:Date.now(),start:B,startView:y,previousPosition:B,startRelative:new Map,touch:p};r.set(p.identifier,v),s.push(v)}}if(s.length>0){var m=s.concat(o),b=[];for(l=0,f=s.length;l<f;++l){for(var E=s[l],C=0,T=m.length;C<T;++C){E!==(p=m[C])&&p.startRelative.set(E,p.currentPosition)}var U=e.makeSingleTouchInteraction(E);b.push(U),n.set(E.touch.identifier,U)}var _={touches:b,allTouches:m.map(function(e){return n.get(e.touch.identifier)}).filter(A.isDefined),multitouch:c};e.controllers.forEach(function(e){e.handleTouchDown(_)})}document.ontouchend=function(e){u.call(document,e),document.ontouchend=null,document.ontouchcancel=null,document.ontouchmove=null},document.ontouchcancel=function(e){d.call(document,e),document.ontouchend=null,document.ontouchcancel=null,document.ontouchmove=null},document.ontouchmove=h};var u=t.ontouchend=function(t){t.stopPropagation(),t.preventDefault();for(var i=e.getTouches(t,"changed"),o=Array.from(n.values()),A=[],a=function(t,a){var s=i[t],u=r.get(s.identifier);if(!u)return"continue";if(u.canTap&&Date.now()-u.startTime<200){var l={touches:[e.makeSingleTouchInteraction(u)],allTouches:o,multitouch:c};e.controllers.forEach(function(e){e.handleTap(l)})}A.push(u),r.delete(s.identifier),n.delete(s.identifier)},s=0,u=i.length;s<u;++s)a(s);if(A.length>0){var l={touches:A.map(function(t){return e.makeSingleTouchInteraction(t)}),allTouches:o,multitouch:c};e.controllers.forEach(function(e){e.handleTouchUp(l)})}},h=t.ontouchmove=function(t){t.stopPropagation(),t.preventDefault();for(var o=e.getTouches(t),s=[],u=[],l=0,h=o.length;l<h;++l){var d=o[l],f=r.get(d.identifier);if(f){var p=a.eventElementPosition(d),g=i.subtract2(p,f.currentPosition);if(i.length2(g)<=0){u.push(f),Object.assign(f,{currentPosition:p,deltaPosition:g,previousPosition:f.currentPosition,touch:d});continue}s.push(f),Object.assign(f,{canTap:!1,currentPosition:p,deltaPosition:g,previousPosition:f.currentPosition,touch:d})}}if(s.length>0){var B=s.concat(u),w={touches:s.map(function(t){return e.makeSingleTouchInteraction(t)}),allTouches:B.map(function(e){return n.get(e.touch.identifier)}).filter(A.isDefined),multitouch:c};e.controllers.forEach(function(e){e.handleTouchDrag(w)})}},d=t.ontouchcancel=function(t){t.stopPropagation(),t.preventDefault();for(var i=e.getTouches(t,"changed"),o=Array.from(n.values()),A=[],a=0,s=i.length;a<s;++a){var u=i[a],l=r.get(u.identifier);l&&(A.push(l),r.delete(u.identifier),n.delete(u.identifier))}if(A.length>0){var h={touches:A.map(function(t){return e.makeSingleTouchInteraction(t)}),allTouches:o,multitouch:c};e.controllers.forEach(function(e){e.handleTouchCancelled(h)})}}},e.prototype.getAverageDistance=function(e,t,r){var n=0;if(e.length<=0)return n;r||(r=function(e){return e.currentPosition});for(var o=0,A=e.length;o<A;++o){var a=e[o];n+=i.length2(i.subtract2(r(a),t))}return n/e.length},e.prototype.getAverageAngle=function(e,t,r){var n=0;if(e.length<=0)return n;r||(r=function(e){return e.currentPosition});for(var o=0,A=e.length;o<A;++o){var a=e[o],s=i.subtract2(r(a),t),c=Math.atan2(s[1],s[0]);c<0&&(c+=2*Math.PI),n+=c}return n/e.length},e.prototype.getTouchCenter=function(e,t){var r=[0,0];if(e.length<=0)return r;t||(t=function(e){return e.currentPosition});for(var n=0,o=e.length;n<o;++n){var A=t(e[n]);r=i.add2(r,A)}return i.scale2(r,1/e.length)},e.prototype.getTouches=function(e,t){var r=new Map;if(e.touches&&e.touches.length>0&&(!t||"touches"===t))for(var n=0,i=e.touches.length;n<i;++n){(o=e.touches.item(n))&&r.set(o.identifier,o)}if(e.changedTouches&&e.changedTouches.length>0&&(!t||"changed"===t))for(n=0,i=e.changedTouches.length;n<i;++n){(o=e.changedTouches.item(n))&&r.set(o.identifier,o)}if(e.targetTouches&&e.targetTouches.length>0&&(!t||"target"===t))for(n=0,i=e.targetTouches.length;n<i;++n){var o;(o=e.targetTouches.item(n))&&r.set(o.identifier,o)}return Array.from(r.values())},e.prototype.getView=function(e){for(var t=this.scenes,r=0,n=t.length;r<n;++r){var i=t[r].viewDiffs.getByKey(e);if(i)return i}return null},e.prototype.makeMouseInteraction=function(e){var t=this.getViewsUnderPosition(e.currentPosition),r=t[0]&&t[0].d;r||(r=c);var n=this.getViewsUnderPosition(e.start),i=e.startView;return i||(i=c),{mouse:e,screen:{position:e.currentPosition},start:{position:i.projection.screenToView(e.start),view:i,views:n.map(function(t){return t.d||(t.d=c),{position:t.d.projection.screenToView(e.start),view:t.d}})},target:{position:r.projection.screenToView(e.currentPosition),view:r,views:t.map(function(t){return t.d||(t.d=c),{position:t.d.projection.screenToView(e.currentPosition),view:t.d}})}}},e.prototype.makeSingleTouchInteraction=function(e){var t=e.currentPosition,r=this.getViewsUnderPosition(t),n=r[0]&&r[0].d;n||(n=c);var i=e.startView;return i||(i=c),{touch:e,screen:{position:t},start:{position:i.projection.screenToView(e.start),view:i,views:this.getViewsUnderPosition(e.start).map(function(t){return t.d||(t.d=c),{position:t.d.projection.screenToView(e.start),view:t.d}})},target:{position:n.projection.screenToView(t),view:n,views:r.map(function(e){return e.d||(e.d=c),{position:e.d.projection.screenToView(t),view:e.d}})}}},e.prototype.makeMultiTouchInteractions=function(e,t){e.sort(l);for(var r=this.allTouchCombinations(e),n=0,i=r.length;n<i;++n){var o=r[n],A=o.map(function(e){return e.touch.identifier}).join("_"),a=t.get(A);if(!a){var s=this.getTouchCenter(o);a={touches:o,averageSpreadDelta:0,startCenter:s,currentCenter:s,currentRotation:this.getAverageAngle(o,s),centerDelta:[0,0],rotationDelta:0},t.set(A,a)}}},e.prototype.updateMultiTouchInteractions=function(e,t){e.sort(l);for(var r=this.allTouchCombinations(e),n=0,o=r.length;n<o;++n){var A=r[n],a=A.map(function(e){return e.touch.identifier}).join("_"),s=t.get(a);if(s){var c=this.getTouchCenter(A),u=this.getAverageAngle(A,c);s.centerDelta=i.subtract2(c,s.currentCenter),s.currentCenter=c,s.rotationDelta=u-s.currentRotation,s.currentRotation=u}}},e.prototype.allTouchCombinations=function(e){for(var t=[],r=e.length,n=1<<r,i=1;i<n;i++){for(var o=[],A=0;A<r;A++)i&1<<A&&o.push(e[A]);t.push(o)}return t},e.prototype.makeWheel=function(e){if(!e)return{delta:[0,0]};var t=a.normalizeWheel(e);return{delta:[t.pixelX,t.pixelY]}},e.prototype.setControllers=function(e){this.controllers=e;for(var t=0,r=this.controllers;t<r.length;t++){r[t].setUserInputManager(this)}},e.prototype.destroy=function(){var e=this;delete this.quadTree,this.context.onmousedown=null,this.context.onmousemove=null,this.context.onmouseleave=null;var t=this.context;t.onmousewheel&&(t.onmousewheel=null),this.eventCleanup.forEach(function(t){e.context.removeEventListener(t[0],t[1])})},e}();t.UserInputEventManager=h},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(6);function i(e,t,r){var n=""+e,i=parseFloat(n);return isNaN(i)?0:n.indexOf("%")>-1?i/100*t:i*r}t.getAbsolutePositionBounds=function(e,t,r){0!==t.width&&0!==t.height||console.warn("An AbsolutePosition evaluated to invalid dimensions.","Please ensure that the object provided and the reference has valid dimensions","to produce dimensions with width and height that are non-zero.","item:",e,"reference:",t.toString());var o,A,a=n.Bounds.emptyBounds();if(e.width)a.width=i(e.width,t.width,r),void 0!==e.left?a.x=i(e.left,t.width,r):void 0!==e.right&&(a.x=t.width-i(e.right,t.width,r)-a.width);else{var s=i(e.left||0,t.width,r);(o=t.width-i(e.right||0,t.width,r)-s)<0&&console.warn("An AbsolutePosition evaluated to invalid dimensions.","Please ensure that the object provided and the reference has valid dimensions","to produce dimensions with width and height that are greater than zero.","item:",e,"reference:",t.toString()),a.x=s,a.width=o}if(e.height)a.height=i(e.height,t.height,r),void 0!==e.top?a.y=i(e.top,t.height,r):void 0!==e.bottom&&(a.y=t.height-i(e.bottom,t.height,r)-a.height);else{var c=i(e.top||0,t.height,r);(void 0===(A=t.height-i(e.bottom||0,t.height,r)-c)||A<0)&&console.warn("An AbsolutePosition evaluated to invalid dimensions.","Please ensure that the object provided and the reference has valid dimensions","to produce dimensions with width and height that are greater than zero.","item:",e,"reference:",t.toString()),a.y=c,a.height=A}return(0===a.width||0===a.height||isNaN(a.x+a.y+a.width+a.height))&&(a.x=0,a.y=0,a.width=t.width,a.height=t.height),a}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(0),i=r(32),o=r(4),A=Math.cos,a=Math.sin,s=Math.sqrt,c=Math.exp,u=Math.acos,l=Math.atan2,h=Math.PI;function d(e,t,r){return e>r?r:e<t?t:e}function f(e){return e?(e[0]=0,e[1]=0,e[2]=0,e[3]=0,e):[0,0,0,0]}function p(e,t,r){return(r=r||f())[0]=e[0]*t,r[1]=e[1]*t,r[2]=e[2]*t,r[3]=e[3]*t,r}function g(e){var t=e[0],r=e[1],n=e[2],i=e[3];return s(t*t+r*r+n*n+i*i)}function B(e,t,r){r=r||f();var i=e[0],o=e[1],A=e[2],a=Math.cos,s=Math.sin,c=a(i/2),u=a(o/2),l=a(A/2),h=s(i/2),d=s(o/2),p=s(A/2);switch(t){case n.EulerOrder.xyz:r[1]=h*u*l+c*d*p,r[2]=c*d*l-h*u*p,r[3]=c*u*p+h*d*l,r[0]=c*u*l-h*d*p;break;case n.EulerOrder.yxz:r[0]=c*u*l+h*d*p,r[1]=h*u*l+c*d*p,r[2]=c*d*l-h*u*p,r[3]=c*u*p-h*d*l;break;case n.EulerOrder.zxy:r[0]=c*u*l-h*d*p,r[1]=h*u*l-c*d*p,r[2]=c*d*l+h*u*p,r[3]=c*u*p+h*d*l;break;case n.EulerOrder.zyx:r[0]=c*u*l+h*d*p,r[1]=h*u*l-c*d*p,r[2]=c*d*l+h*u*p,r[3]=c*u*p-h*d*l;break;case n.EulerOrder.yzx:r[0]=c*u*l-h*d*p,r[1]=h*u*l+c*d*p,r[2]=c*d*l+h*u*p,r[3]=c*u*p-h*d*l;break;case n.EulerOrder.xzy:r[0]=c*u*l+h*d*p,r[1]=h*u*l-c*d*p,r[2]=c*d*l-h*u*p,r[3]=c*u*p+h*d*l}return r}function w(e,t,r,n,i,o){o[0]=l(e,t),o[1]=u(r),o[2]=l(n,i)}function y(e,t,r){r=r||[0,0,0];var i=e[0],o=e[1],A=e[2],a=e[3],s=v(e),c=s[0],u=s[4],l=s[8],h=s[1],f=s[5],p=s[9],g=s[2],B=s[6],y=s[10];switch(t){case n.EulerOrder.zyx:r[1]=Math.asin(-d(g,-1,1)),Math.abs(g)<.99999?(r[0]=Math.atan2(B,y),r[2]=Math.atan2(h,c)):(r[0]=0,r[2]=Math.atan2(-u,f));break;case n.EulerOrder.zyz:w(2*A*a+2*i*o,2*i*A-2*o*a,a*a-A*A-o*o+i*i,2*A*a-2*i*o,2*o*a+2*i*A,r);break;case n.EulerOrder.zxy:r[0]=Math.asin(d(B,-1,1)),Math.abs(B)<.99999?(r[1]=Math.atan2(-g,y),r[2]=Math.atan2(-u,f)):(r[1]=0,r[2]=Math.atan2(h,c));break;case n.EulerOrder.zxz:w(2*o*a-2*i*A,2*A*a+2*i*o,a*a-A*A-o*o+i*i,2*o*a+2*i*A,2*i*o-2*A*a,r);break;case n.EulerOrder.yxz:r[0]=Math.asin(-d(p,-1,1)),Math.abs(p)<.9999?(r[1]=Math.atan2(l,y),r[2]=Math.atan2(h,f)):(r[1]=Math.atan2(-g,c),r[2]=0);break;case n.EulerOrder.yxy:w(2*o*A+2*i*a,2*i*o-2*A*a,A*A-a*a+i*i-o*o,2*o*A-2*i*a,2*A*a+2*i*o,r);break;case n.EulerOrder.yzx:r[2]=Math.asin(d(h,-1,1)),Math.abs(h)<.99999?(r[0]=Math.atan2(-p,f),r[1]=Math.atan2(-g,c)):(r[0]=0,r[1]=Math.atan2(l,y));break;case n.EulerOrder.yzy:w(2*A*a-2*i*o,2*o*A+2*i*a,A*A-a*a+i*i-o*o,2*A*a+2*i*o,2*i*a-2*o*A,r);break;case n.EulerOrder.xyz:r[1]=Math.asin(d(l,-1,1)),Math.abs(l)<.99999?(r[0]=Math.atan2(-p,y),r[2]=Math.atan2(-u,c)):(r[0]=Math.atan2(B,f),r[2]=0);break;case n.EulerOrder.xyx:w(2*o*A-2*i*a,2*o*a+2*i*A,o*o+i*i-a*a-A*A,2*o*A+2*i*a,2*i*A-2*o*a,r);break;case n.EulerOrder.xzy:r[2]=Math.asin(-d(u,-1,1)),Math.abs(u)<.99999?(r[0]=Math.atan2(B,f),r[1]=Math.atan2(l,c)):(r[0]=Math.atan2(-p,y),r[1]=0);break;case n.EulerOrder.xzx:w(2*o*a+2*i*A,2*i*a-2*o*A,o*o+i*i-a*a-A*A,2*o*a-2*i*A,2*o*A+2*i*a,r);break;default:console.warn("Invalid Euler rotation order.")}return r}function v(e,t){var r,n,o,A,a,s,c,u,l,h,d,f;return t=t||i.identity4(),h=e[1]+e[1],d=e[2]+e[2],f=e[3]+e[3],A=e[1]*h,c=e[1]*d,u=e[1]*f,a=e[2]*d,s=e[2]*f,l=e[3]*f,r=e[0]*h,n=e[0]*d,o=e[0]*f,t[i.M400]=1-(a+l),t[i.M410]=c-o,t[i.M420]=u+n,t[i.M430]=0,t[i.M401]=c+o,t[i.M411]=1-(A+l),t[i.M421]=s-r,t[i.M431]=0,t[i.M402]=u-n,t[i.M412]=s+r,t[i.M422]=1-(A+a),t[i.M432]=0,t[i.M403]=0,t[i.M413]=0,t[i.M423]=0,t[i.M433]=1,t}t.clamp=d,t.zeroQuat=f,t.addQuat=function(e,t,r){return(r=r||f())[0]=e[0]+t[0],r[1]=e[1]+t[1],r[2]=e[2]+t[2],r[3]=e[3]+t[3],r},t.multiplyQuat=function(e,t,r){r=r||f();var n=e[0],i=t[0],o=e[1],A=t[1],a=e[2],s=t[2],c=e[3],u=t[3];return r[0]=n*i-o*A-a*s-c*u,r[1]=n*A+o*i+a*u-c*s,r[2]=n*s-o*u+a*i+c*A,r[3]=n*u+o*s-a*A+c*i,r},t.divideQuat=function(e,t,r){r=r||f();var n=e[0],i=e[1],o=e[2],A=e[3],a=t[0],s=t[1],c=t[2],u=t[3],l=a*a+s*s+c*c+u*u;if(0===l)r[0]=0,r[1]=0,r[2]=0,r[3]=0;else{var h=1/l;r[0]=(n*a+i*s+o*c+A*u)*h,r[1]=(i*a-n*s-o*u+A*c)*h,r[2]=(o*a-n*c-A*s+i*u)*h,r[3]=(A*a-n*u-i*c+o*s)*h}return r},t.exponentQuat=function(e,t){t=t||f();var r=e[0],n=e[1],i=e[2],o=e[3],u=s(n*n+i*i+o*o),l=c(r),h=l/u*a(u);return 0===u?(t[0]=c(r),t[1]=0,t[2]=0,t[3]=0):(t[0]=l*A(u),t[1]=n*h,t[2]=i*h,t[3]=o*h),t},t.scaleQuat=p,t.conjugateQuat=function(e,t){return(t=t||f())[0]=e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t},t.inverseQuat=function(e,t){t=t||f();var r=e[0],n=e[1],i=e[2],o=e[3],A=r*r+n*n+i*i+o*o;if(0===A)t[0]=0,t[1]=0,t[2]=0,t[3]=0;else{var a=1/A;t[0]=r*a,t[1]=-n*a,t[2]=-i*a,t[3]=-o*a}return t},t.lengthQuat=g,t.normalizeQuat=function(e,t){return t=t||f(),0===g(e)?[0,0,0,0]:p(e,1/g(e),t)},t.realQuat=function(e){return e[0]},t.imaginaryQuat=function(e){return[e[1],e[2],e[3]]},t.dotQuat=function(e,t){return o.dot4(e,t)},t.fromEulerAxisAngleToQuat=function(e,t,r){r=r||f();var n=e[0],i=e[1],o=e[2],c=1/s(n*n+i*i+o*o),u=a(t/2);return r[0]=A(t/2),r[1]=u*n*c,r[2]=u*i*c,r[3]=u*o*c,r},t.fromOrderedEulerToQuat=B,t.toEulerXYZfromOrderedEuler=function(e,t,r){return r=r||[0,0,0],y(B(e,t),n.EulerOrder.xyz,r),r},t.toEulerFromQuat=function(e,t){return y(e,n.EulerOrder.zyx,t)},t.toOrderedEulerFromQuat=y,t.toOrderedEulerFromQuat2=function(e,t,r){r=r||[0,0,0];var i=v(e),o=i[0],A=i[4],a=i[8],s=i[1],c=i[5],u=i[9],l=i[2],h=i[6],f=i[10];switch(t){case n.EulerOrder.xyz:r[1]=Math.asin(d(a,-1,1)),Math.abs(a)<.99999?(r[0]=Math.atan2(-u,f),r[2]=Math.atan2(-A,o)):(r[0]=Math.atan2(h,c),r[2]=0);break;case n.EulerOrder.yxz:r[0]=Math.asin(-d(u,-1,1)),Math.abs(u)<.9999?(r[1]=Math.atan2(a,f),r[2]=Math.atan2(s,c)):(r[1]=Math.atan2(-l,o),r[2]=0);break;case n.EulerOrder.zxy:r[0]=Math.asin(d(h,-1,1)),Math.abs(h)<.99999?(r[1]=Math.atan2(-l,f),r[2]=Math.atan2(-A,c)):(r[1]=0,r[2]=Math.atan2(s,o));break;case n.EulerOrder.zyx:r[1]=Math.asin(-d(l,-1,1)),Math.abs(l)<.99999?(r[0]=Math.atan2(h,f),r[2]=Math.atan2(s,o)):(r[0]=0,r[2]=Math.atan2(-A,c));break;case n.EulerOrder.yzx:r[2]=Math.asin(d(s,-1,1)),Math.abs(s)<.99999?(r[0]=Math.atan2(-u,c),r[1]=Math.atan2(-l,o)):(r[0]=0,r[1]=Math.atan2(a,f));break;case n.EulerOrder.xzy:r[2]=Math.asin(-d(A,-1,1)),Math.abs(A)<.99999?(r[0]=Math.atan2(h,c),r[1]=Math.atan2(a,o)):(r[0]=Math.atan2(-u,f),r[1]=0)}},t.angleQuat=function(e){var t=e[0];if(t<-1||t>1)return 0;var r=2*u(t);return r>h?r-2*h:r},t.axisQuat=function(e){var t=e[1],r=e[2],n=e[3];if(0===s(t*t+r*r+n*n))return[0,0,0];var i=1/s(t*t+r*r+n*n);return[t*i,r*i,n*i]},t.matrix4x4FromUnitQuatModel=function(e,t){var r,n,o,A,a,s,c,u,l,h,d,f;return t=t||i.identity4(),h=e[1]+e[1],d=e[2]+e[2],f=e[3]+e[3],A=e[1]*h,c=e[1]*d,u=e[1]*f,a=e[2]*d,s=e[2]*f,l=e[3]*f,r=e[0]*h,n=e[0]*d,o=e[0]*f,t[i.M400]=1-(a+l),t[i.M401]=c-o,t[i.M402]=u+n,t[i.M403]=0,t[i.M410]=c+o,t[i.M411]=1-(A+l),t[i.M412]=s-r,t[i.M413]=0,t[i.M420]=u-n,t[i.M421]=s+r,t[i.M422]=1-(A+a),t[i.M423]=0,t[i.M430]=0,t[i.M431]=0,t[i.M432]=0,t[i.M433]=1,t},t.matrix4x4FromUnitQuatView=v,t.eulerToQuat=function(e,t){var r,n,i,o,s,c,u,l;t=t||f();var h=e[0],d=e[1],p=e[2];return r=A(h/2),n=A(d/2),i=A(p/2),o=a(h/2),u=n*i,l=(s=a(d/2))*(c=a(p/2)),t[0]=r*u+o*l,t[1]=o*u-r*l,t[2]=r*s*i+o*n*c,t[3]=r*n*c-o*s*i,t},t.lookAtQuat=function(e,t,r){r=r||f();var n=[-(e=o.normalize3(e))[0],-e[1],-e[2]],i=o.normalize3(o.cross3(t,n)),A=o.normalize3(o.cross3(n,i)),a=i[0],c=i[1],u=i[2],l=A[0],h=A[1],d=A[2],p=n[0],g=n[1],B=n[2],w=a+h+B;if(w>0){var y=2*s(w+1);return r[0]=.25*y,r[1]=(g-d)/y,r[2]=(u-p)/y,r[3]=(l-c)/y,r}if(a>h&&a>B){var v=2*s(1+a-h-B);return r[0]=(g-d)/v,r[1]=.25*v,r[2]=(c+l)/v,r[3]=(u+p)/v,r}if(h>B){var m=2*s(1+h-a-B);return r[0]=(u-p)/m,r[1]=(l+c)/m,r[2]=.25*m,r[3]=(g+d)/m,r}var b=2*s(1+B-a-h);return r[0]=(l-c)/b,r[1]=(p+u)/b,r[2]=(g+d)/b,r[3]=.25*b,r},t.matrix3x3ToQuaternion=function(e,t){t=t||f();var r=e[0],n=e[3],i=e[6],o=e[1],A=e[4],a=e[7],c=e[2],u=e[5],l=e[8],h=r+A+l;if(h>0){var d=2*s(h+1);return t[0]=.25*d,t[1]=(u-a)/d,t[2]=(i-c)/d,t[3]=(o-n)/d,t}if(r>A&&r>l){var p=2*s(1+r-A-l);return t[0]=(u-a)/p,t[1]=.25*p,t[2]=(n+o)/p,t[3]=(i+c)/p,t}if(A>l){var g=2*s(1+A-r-l);return t[0]=(i-c)/g,t[1]=(o+n)/g,t[2]=.25*g,t[3]=(u+a)/g,t}var B=2*s(1+l-r-A);return t[0]=(o-n)/B,t[1]=(c+i)/B,t[2]=(u+a)/B,t[3]=.25*B,t},t.matrix4x4ToQuaternion=function(e,t){t=t||f();var r=e[0],n=e[4],i=e[8],o=e[1],A=e[5],a=e[9],c=e[2],u=e[6],l=e[10],h=r+A+l;if(h>0){var d=2*s(h+1);return t[0]=.25*d,t[1]=(u-a)/d,t[2]=(i-c)/d,t[3]=(o-n)/d,t}if(r>A&&r>l){var p=2*s(1+r-A-l);return t[0]=(u-a)/p,t[1]=.25*p,t[2]=(n+o)/p,t[3]=(i+c)/p,t}if(A>l){var g=2*s(1+A-r-l);return t[0]=(i-c)/g,t[1]=(o+n)/g,t[2]=.25*g,t[3]=(u+a)/g,t}var B=2*s(1+l-r-A);return t[0]=(o-n)/B,t[1]=(c+i)/B,t[2]=(u+a)/B,t[3]=.25*B,t},t.lookAtMatrix=function(e,t,r){r=r||i.identity4();var n=[-(e=o.normalize3(e))[0],-e[1],-e[2]],A=o.normalize3(o.cross3(t,n)),a=o.normalize3(o.cross3(n,A));return r[0]=A[0],r[1]=a[0],r[2]=n[0],r[3]=0,r[4]=A[1],r[5]=a[1],r[6]=n[1],r[7]=0,r[8]=A[2],r[9]=a[2],r[10]=n[2],r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r},t.slerpUnitQuat=function(e,t,r,n){n=n||f();var i,o,A,s,c,l=[0,0,0,0];return(o=e[1]*t[1]+e[2]*t[2]+e[3]*t[3]+e[0]*t[0])<0?(o=-o,l[0]=-t[1],l[1]=-t[2],l[2]=-t[3],l[3]=-t[0]):(l[0]=t[1],l[1]=t[2],l[2]=t[3],l[3]=t[0]),1-o>1e-7?(i=u(o),A=a(i),s=a((1-r)*i)/A,c=a(r*i)/A):(s=1-r,c=r),n[1]=s*e[1]+c*l[0],n[2]=s*e[2]+c*l[1],n[3]=s*e[3]+c*l[2],n[0]=s*e[0]+c*l[3],n},t.oneQuat=function(){return[1,0,0,0]},t.iQuat=function(){return[0,1,0,0]},t.jQuat=function(){return[0,0,1,0]},t.kQuat=function(){return[0,0,0,1]}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){this.models=new Set}return e.prototype.add=function(e){this.models.add(e)},e.prototype.remove=function(e){this.models.delete(e)},e}();t.Scene=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(15);t.generateDefaultElements=function(e){var t=e.canvas.height,r=e.canvas.width,i={aspectRatio:r/t,bottom:-t/2,far:1e7,left:-r/2,near:-100,right:r/2,top:t/2,viewSize:t},o=new n.Camera({type:n.CameraProjectionType.ORTHOGRAPHIC,left:i.left,right:i.right,top:i.top,bottom:i.bottom,near:i.near,far:i.far});return o.scale=[1,-1,1],o.position=[0,0,-300],o.update(),{camera:o,viewport:{bottom:0,left:0,right:0,top:0}}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isDefined=function(e){return Boolean(e)},t.touchesHasStartView=function(e){return Array.isArray(e)?function(t){return e.indexOf(t.start.view.id)>=0}:function(t){return t.start.view.id===e}},t.touchesContainsStartView=function(e){return Array.isArray(e)?function(t){return t.start.views.find(function(t){return e.indexOf(t.view.id)>=0})}:function(t){return t.start.views.find(function(t){return t.view.id===e})}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(130);t.normalizeWheel=n.normalizeWheel,t.eventElementPosition=function(e,t){var r=0,n=0,i=0,o=0,A=t||e.nativeEvent&&e.nativeEvent.target||e.target;if(e||(e=window.event),e.pageX||e.pageY)r=e.pageX,n=e.pageY;else if(e.clientX||e.clientY){var a=0,s=0;document.documentElement&&(a=document.documentElement.scrollLeft,s=document.documentElement.scrollTop),r=e.clientX+document.body.scrollLeft+a,n=e.clientY+document.body.scrollTop+s}if(A.offsetParent)do{i+=A.offsetLeft,o+=A.offsetTop,A=A.offsetParent}while(A);return[r-i,n-o]}},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o=r(6),A=r(4);t.filterQuery=function(e,t){var r=[];return t.forEach(function(t){e.find(function(e){return t instanceof e})&&r.push(t)}),r};var a=function(){function e(e,t){var r=e.mid;this.TL=new s(e.x,r[0],e.y,r[1],t),this.TR=new s(r[0],e.right,e.y,r[1],t),this.BL=new s(e.x,r[0],r[1],e.bottom,t),this.BR=new s(r[0],e.right,r[1],e.bottom,t)}return e.prototype.destroy=function(){this.TL.destroy(),this.TR.destroy(),this.BL.destroy(),this.BR.destroy(),delete this.TL,delete this.TR,delete this.BL,delete this.BR},e}();t.QuadTreeQuadrants=a;var s=function(){function e(e,t,r,n,i){this.children=[],this.depth=0,arguments.length>=4?this.bounds=new o.Bounds({left:e,right:t,top:r,bottom:n}):this.bounds=new o.Bounds({left:0,right:1,top:0,bottom:1}),this.depth=i||0}return e.prototype.destroy=function(){delete this.children,delete this.bounds,this.nodes&&(this.nodes.destroy(),delete this.nodes)},e.prototype.add=function(e,t){return e.isInside(this.bounds)?this.doAdd(e):(this.cover(e),this.add(e,t))},e.prototype.addAll=function(e){for(var t=this,r=Number.MAX_SAFE_INTEGER,n=Number.MAX_SAFE_INTEGER,i=Number.MIN_SAFE_INTEGER,A=Number.MIN_SAFE_INTEGER,a=Math.min,s=Math.max,c=0,u=e.length;c<u;++c){var l=e[c];r=a(r,l.x),i=s(l.right,i),n=a(n,l.y),A=s(A,l.bottom)}this.cover(new o.Bounds({left:r,right:i,top:n,bottom:A})),e.forEach(function(e){return t.doAdd(e)})},e.prototype.cover=function(e){var t=this;if(!e.isInside(this.bounds)){this.bounds.encapsulate(e),this.bounds.x-=1,this.bounds.y-=1,this.bounds.width+=2,this.bounds.height+=2;var r=this.gatherChildren([]);this.nodes&&(this.nodes.destroy(),delete this.nodes),r.forEach(function(e){return t.doAdd(e)})}},e.prototype.doAdd=function(e){return this.nodes?e.isInside(this.nodes.TL.bounds)?this.nodes.TL.doAdd(e):e.isInside(this.nodes.TR.bounds)?this.nodes.TR.doAdd(e):e.isInside(this.nodes.BL.bounds)?this.nodes.BL.doAdd(e):e.isInside(this.nodes.BR.bounds)?this.nodes.BR.doAdd(e):(this.children.push(e),!0):e.isInside(this.bounds)?(this.children.push(e),this.children.length>5&&this.depth<10&&this.split(),!0):(isNaN(e.width+e.height+e.x+e.y)?console.error("Child did not fit into bounds because a dimension is NaN",e):0===e.area&&console.error("Child did not fit into bounds because the area is zero",e),!0)},e.prototype.gatherChildren=function(e,t){t&&t(this);for(var r=0,n=this.children.length;r<n;++r)e.push(this.children[r]);return this.nodes&&(this.nodes.TL.gatherChildren(e,t),this.nodes.TR.gatherChildren(e,t),this.nodes.BL.gatherChildren(e,t),this.nodes.BR.gatherChildren(e,t)),e},e.prototype.query=function(e,t){return e instanceof o.Bounds?e.hitBounds(this.bounds)?this.queryBounds(e,[],t):[]:A.isVec2(e)&&this.bounds.containsPoint(e)?this.queryPoint(e,[],t):[]},e.prototype.queryBounds=function(e,t,r){return this.bounds.isInside(e)?(this.gatherChildren(t,r),t):(this.children.forEach(function(r){r.hitBounds(e)&&t.push(r)}),r&&r(this),this.nodes&&(e.hitBounds(this.nodes.TL.bounds)&&this.nodes.TL.queryBounds(e,t,r),e.hitBounds(this.nodes.TR.bounds)&&this.nodes.TR.queryBounds(e,t,r),e.hitBounds(this.nodes.BL.bounds)&&this.nodes.BL.queryBounds(e,t,r),e.hitBounds(this.nodes.BR.bounds)&&this.nodes.BR.queryBounds(e,t,r)),t)},e.prototype.queryPoint=function(e,t,r){return this.children.forEach(function(r){r.containsPoint(e)&&t.push(r)}),r&&r(this),this.nodes&&(this.nodes.TL.bounds.containsPoint(e)&&this.nodes.TL.queryPoint(e,t,r),this.nodes.TR.bounds.containsPoint(e)&&this.nodes.TR.queryPoint(e,t,r),this.nodes.BL.bounds.containsPoint(e)&&this.nodes.BL.queryPoint(e,t,r),this.nodes.BR.bounds.containsPoint(e)&&this.nodes.BR.queryPoint(e,t,r)),t},e.prototype.split=function(){var e=[];this.gatherChildren(e),this.nodes=new a(this.bounds,this.depth+1),this.children=[];for(var t=0,r=e.length;t<r;++t){var n=e[t];n&&this.doAdd(n)}},e.prototype.visit=function(e){var t=Boolean(e(this));this.nodes&&!t&&(this.nodes.TL.visit(e),this.nodes.TR.visit(e),this.nodes.BL.visit(e),this.nodes.BR.visit(e))},e}();t.QuadTreeNode=s;var c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t}(s);t.QuadTree=c},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(2)("performance"),i=function(){function e(){}return e.prototype.setDeclaration=function(e,t,r,i){e.get(t)&&n("%s: Overriding declaration %s\nSetting new value: %s",i||"Expand IO Declarations",t,r),e.set(t,r)},e}();t.BaseShaderIOInjection=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n="Once a ShaderModuleUnit has been registered, you CAN NOT modify it! Module ID:",i=function(){function e(e){this._dependents=null,Object.assign(this,e)}return Object.defineProperty(e.prototype,"content",{get:function(){return this._content},set:function(e){this._isLocked?console.warn(n,this._moduleId):this._content=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"compatibility",{get:function(){return this._compatibility},set:function(e){this._isLocked?console.warn(n,this._moduleId):this._compatibility=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dependents",{get:function(){return this._dependents},set:function(e){this._isLocked&&null!==this._dependents?console.warn(n,this._moduleId):this._dependents=e},enumerable:!0,configurable:!0}),e.prototype.isLocked=function(){return this._isLocked},Object.defineProperty(e.prototype,"moduleId",{get:function(){return this._moduleId},set:function(e){this._isLocked?console.warn(n,this._moduleId):this._moduleId=e},enumerable:!0,configurable:!0}),e.prototype.applyAnalyzedContent=function(e){this._isLocked&&null!==this.dependents?console.warn(n,this._moduleId):this._content=e},e.prototype.lock=function(){this._isLocked=!0},e}();t.ShaderModuleUnit=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(0),i=r(1),o=r(75),A=r(2)("performance"),a=r(2)("shader-module-vs"),s=r(2)("shader-module-fs");function c(e,t){return Boolean(e)&&(e.compatibility===t||e.compatibility===n.ShaderInjectionTarget.ALL)}var u=function(){function e(){}return e.register=function(t){if(!(t instanceof o.ShaderModuleUnit)){if(Array.isArray(t)){var r="";return t.forEach(function(t){var n=e.register(t);n&&(r+=n+"\n")}),r||null}return e.register(new o.ShaderModuleUnit(t))}var i=e.modules.get(t.moduleId);i||(i={},e.modules.set(t.moduleId,i));var a=i.fs,s=i.vs,u=c(t,n.ShaderInjectionTarget.FRAGMENT),l=c(t,n.ShaderInjectionTarget.VERTEX);if(a&&u){if(a.isFinal)return"Module ID: "+t.moduleId+" Can not override the module's existing Fragment registration as the exisitng module is marked as final";A("A Shader Module Unit has overridden an existing module for the Fragment Shader Module ID: %o",t.moduleId)}if(s&&l){if(s.isFinal)return"Module ID: "+t.moduleId+" Can not override the module's existing Vertex registration as the exisitng module is marked as final";A("A Shader Module Unit has overridden an existing module for the Vertex Shader Module ID: %o",t.moduleId)}return u&&(i.fs=t),l&&(i.vs=t),t.lock(),null},e.analyzeDependents=function(t){if(t.dependents&&t.isLocked)return[];var r=[],o=[],A=new Set,a=t.compatibility,s=t.moduleId,c=i.shaderTemplate({options:{},shader:t.content,onToken:function(t){var i=t.trim();if(0===i.indexOf("import")){var c=i.substr("import".length).trim();if(":"===c[0]){var u=!1,l=c.substr(":".length).trim().split(",");return 0===l[l.length-1].trim().length&&l.pop(),l.forEach(function(t){t=t.trim();var i=e.modules.get(t);i?(a!==n.ShaderInjectionTarget.FRAGMENT&&a!==n.ShaderInjectionTarget.ALL||(i.fs?(u=!0,A.has(t)||o.push(t)):r.push("Could not find requested target fragment module for Module ID: "+t+" requested by module: "+s)),a!==n.ShaderInjectionTarget.VERTEX&&a!==n.ShaderInjectionTarget.ALL||(i.vs?(u=!0,A.has(t)||o.push(t)):r.push("Could not find requested target vertex module for Module ID: "+t+" requested by module: "+s)),i.vs||i.fs||r.push("Could not find a vertex or fragment shader within exisitng module"),u||r.push("Error Processing module Module ID: "+t+" requested by module: "+s)):r.push("Could not find requested module: "+t+" requested by module: "+s)}),""}}return"${"+t+"}"}});return t.applyAnalyzedContent(c.shader),t.dependents=o,r},e.process=function(t,r,i,A){var c=new Set,u=new Set,l=[],h=[],d=i===n.ShaderInjectionTarget.VERTEX?a:s;d("Processing Shader for id %o:",t);var f=r;if(A){var p="";A.forEach(function(e){return p+="${import: "+e+"}\n"}),f=p+r}var g=new o.ShaderModuleUnit({content:f,compatibility:i,moduleId:'Layer "'+t+'" '+(i===n.ShaderInjectionTarget.ALL?"fs vs":i===n.ShaderInjectionTarget.VERTEX?"vs":"fs")});return{errors:h,shader:function t(r){var o=r.moduleId;if(!function(e){var t=e.moduleId;d("%o: %o",t,l.slice(0).reverse().join(" -> "));var r=l.indexOf(t);if(l.unshift(t),r>-1){var n=l.slice(0,r+2).reverse();return h.push("A Shader has detected a Circular dependency in import requests: "+n.join(" -> ")),l.shift(),!1}return!0}(r))return null;if(o&&u.has(o))return l.shift(),"";var A="";e.analyzeDependents(r).forEach(function(e){return h.push(e)});var a=r.dependents;if(a&&a.length>0)for(var s=0,f=a.length;s<f;++s){var p=a[s],g=e.modules.get(p);if(g){var B=void 0;i!==n.ShaderInjectionTarget.FRAGMENT&&i!==n.ShaderInjectionTarget.ALL||(g.fs?(c.add(g.fs),B=t(g.fs)):h.push("Could not find requested target fragment module for Module ID: "+p+" requested by module: "+o)),i!==n.ShaderInjectionTarget.VERTEX&&i!==n.ShaderInjectionTarget.ALL||(g.vs?(c.add(g.vs),B=t(g.vs)):h.push("Could not find requested target vertex module for Module ID: "+p+" requested by module: "+o)),g.vs||g.fs||h.push("Could not find a vertex or fragment shader within exisitng module"),null===B&&h.push("Error Processing module Module ID: "+p+" requested by module: "+o),A+=B||""}else h.push("Could not find requested module: "+p+" requested by module: "+o)}return l.shift(),u.add(o||""),A.trim()+"\n\n"+r.content.trim()}(g),shaderModuleUnits:c}},e.modules=new Map,e}();t.ShaderModule=u},function(e,t,r){"use strict";function n(e){return e&&e.constructor===Function}Object.defineProperty(t,"__esModule",{value:!0}),t.mapInjectDefault=function(e,t,r){var i=e.get(t);return void 0===i&&(i=n(r)?r():r,e.set(t,i)),i},t.mapGetWithDefault=function(e,t,r){var i=e.get(t);return void 0===i&&(i=n(r)?r():r),i}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(12),i=function(){function e(){}return e.transparentShapeBlending={blending:{blendDst:n.GLSettings.Material.BlendingDstFactor.OneMinusSrcAlpha,blendEquation:n.GLSettings.Material.BlendingEquations.Add,blendSrc:n.GLSettings.Material.BlendingSrcFactor.SrcAlpha},culling:n.GLSettings.Material.CullSide.NONE},e.transparentImageBlending={blending:{blendSrc:n.GLSettings.Material.BlendingSrcFactor.One,blendDst:n.GLSettings.Material.BlendingDstFactor.OneMinusSrcAlpha,blendEquation:n.GLSettings.Material.BlendingEquations.Add},culling:n.GLSettings.Material.CullSide.NONE},e}();t.CommonMaterialOptions=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(56),i=[],o=[],A=[];requestAnimationFrame(function e(t){requestAnimationFrame(e);var r=o.slice();o=[];for(var n=0,a=r.length;n<a;++n)(s=r[n])&&s(t);for(n=0,a=A.length;n<a;++n){var s;(s=A[n])&&s(t)}A=i.slice(0),i=[]}),t.nextFrame=function(e){var t=new n.PromiseResolver;return i.push(function(r){e&&e(r),t.resolve(r)}),t.promise},t.onFrame=function(e){var t=new n.PromiseResolver;return o.push(function(r){e&&e(r),t.resolve(r)}),t.promise}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(57),i=r(12),o=r(24),A=r(2)("performance");function a(e){return e&&e.buffer&&void 0!==e.buffer.byteOffset&&e.buffer.byteLength||null===e.buffer}function s(e){return 0==(e&e-1)}function c(e){return Boolean(e.gl&&e.gl.textureId&&e.gl.textureUnit>-1)}var u=function(){function e(e,t,r){this.debugContext="",this.fragmentShaders=new Map,this.vertexShaders=new Map,this.programs=new Map,this.gl=e,this.state=t,this.extensions=r}return e.addExtensions=function(e){var t=e.getExtension("ANGLE_instanced_arrays"),r=e.getExtension("WEBGL_draw_buffers"),n=e.getExtension("EXT_texture_filter_anisotropic"),i={maxAnistropicFilter:0};return t||e instanceof WebGL2RenderingContext||A("This device does not have hardware instancing. All buffering strategies will be utilizing compatibility modes."),r||e instanceof WebGL2RenderingContext||A("This device does not have hardware multi-render target capabilities. The system will have to fallback to multiple render passes to multiple FBOs to achieve the same result."),n?i.maxAnistropicFilter=e.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT):A("This device does not have hardware anisotropic filtering for textures. This property will be ignored when setting texture settings."),{instancing:(e instanceof WebGL2RenderingContext?e:t)||void 0,drawBuffers:(e instanceof WebGL2RenderingContext?e:r)||void 0,anisotropicFiltering:n?{ext:n,stat:i}:void 0}},e.prototype.clear=function(e,t,r){var n=0;e&&(n|=this.gl.COLOR_BUFFER_BIT),t&&(n|=this.gl.DEPTH_BUFFER_BIT),r&&(n|=this.gl.STENCIL_BUFFER_BIT),this.gl.clear(n)},e.prototype.compileAttribute=function(e){if(!e.gl){var t=this.gl,r=t.createBuffer();return r?(this.state.bindVBO(r),t.bufferData(t.ARRAY_BUFFER,e.data,e.isDynamic?t.DYNAMIC_DRAW:t.STATIC_DRAW),e.gl={bufferId:r,type:t.ARRAY_BUFFER},e.resolve(),!0):(console.warn(this.debugContext,"Could bot create WebGLBuffer. Printing any existing gl errors:"),void this.printError())}},e.prototype.compileGeometry=function(e){var t=this,r=!0;return e.attributes.forEach(function(e){r=Boolean(t.compileAttribute(e)&&r)}),r},e.prototype.compileMaterial=function(e){if(!e.gl){var t=this.fragmentShaders.get(e.fragmentShader)||null;if(!t){if(!(t=this.gl.createShader(this.gl.FRAGMENT_SHADER)))return console.warn(this.debugContext,"Could not create a Fragment WebGLShader. Printing GL Errors:"),void this.printError();if(this.gl.shaderSource(t,e.fragmentShader),this.gl.compileShader(t),!this.gl.getShaderParameter(t,this.gl.COMPILE_STATUS))return console.error(this.debugContext,"FRAGMENT SHADER COMPILER ERROR:",e.name),console.warn("Could not compile provided shader. Printing logs and errors:"),console.warn(this.lineFormatShader(e.fragmentShader)),console.warn("LOGS:"),console.warn(this.gl.getShaderInfoLog(t)),this.printError(),void this.gl.deleteShader(t)}var r=this.vertexShaders.get(e.vertexShader)||null;if(!r){if(!(r=this.gl.createShader(this.gl.VERTEX_SHADER)))return console.warn(this.debugContext,"Could not create a Vertex WebGLShader. Printing GL Errors:"),void this.printError();if(this.gl.shaderSource(r,e.vertexShader),this.gl.compileShader(r),!this.gl.getShaderParameter(r,this.gl.COMPILE_STATUS))return console.error(this.debugContext,"VERTEX SHADER COMPILER ERROR",e.name),console.warn("Could not compile provided shader. Printing logs and errors:"),console.warn(this.lineFormatShader(e.vertexShader)),console.warn("LOGS:"),console.warn(this.gl.getShaderInfoLog(r)),this.printError(),void this.gl.deleteShader(r)}var n=this.programs.get(r);n||(n=new Map,this.programs.set(r,n));var i=n.get(t)||null;if(i)i.useCount++;else{var o=this.gl.createProgram();if(!o)return console.warn(this.debugContext,"Could not create a WebGLProgram. Printing GL Errors:"),void this.printError();if(i={useCount:1,program:o},this.gl.attachShader(o,r),this.gl.attachShader(o,t),this.gl.linkProgram(o),this.gl.validateProgram(o),!this.gl.getProgramParameter(o,this.gl.LINK_STATUS)||!this.gl.getProgramParameter(o,this.gl.VALIDATE_STATUS)){var A=this.gl.getProgramInfoLog(o);return console.warn(this.debugContext,"Could not compile WebGL program. \n\n",A),void this.gl.deleteProgram(o)}n.set(t,i)}e.gl={fsId:t,vsId:r,programId:i.program,proxy:this},this.state.useProgram(i.program);var a=this.state.currentProgram;if(!a)return!1;for(var s=this.gl.getProgramParameter(a,this.gl.ACTIVE_UNIFORMS),c=new Set,u=0;u<s;u++){var l=this.gl.getActiveUniform(a,u);l&&c.add(l.name)}var h=new Set;return Object.keys(e.uniforms).forEach(function(e){c.has(e)||h.add(e)}),h.forEach(function(t){delete e.uniforms[t]}),Object.keys(e.uniforms).length===c.size||(console.warn(this.debugContext,"A program is requesting a set of uniforms:",Array.from(c.values()),"but our material only provides",Object.keys(e.uniforms),"thus the expected rendering will be considered invalid."),!1)}},e.prototype.compileRenderTarget=function(e){var t=this;if(!e.gl){var r=this.gl,i=r.createFramebuffer();if(!i)return console.warn(this.debugContext,"Could not generate a frame buffer object. Printing GL errors:"),this.printError(),!1;this.state.bindFBO(i);var A={fboId:i,proxy:this};if(Array.isArray(e.buffers.color)){var a=[],s=!0;if(A.colorBufferId=a,e.buffers.color.forEach(function(i,A){if(s)if(i instanceof o.Texture)a.push(i),c(i)?r.framebufferTexture2D(r.FRAMEBUFFER,n.indexToColorAttachment(r,t.extensions,A,!0),r.TEXTURE_2D,i.gl.textureId,0):(console.warn(t.debugContext,"Attempted to compile render target whose target texture was not ready for use."),s=!1);else{var u=t.compileColorBuffer(i,e.width,e.height);u&&(a.push(u),r.framebufferRenderbuffer(r.FRAMEBUFFER,n.indexToColorAttachment(r,t.extensions,A,!0),r.RENDERBUFFER,u))}}),!s)return!1}else if(void 0!==e.buffers.color){var u;if((u=e.buffers.color)instanceof o.Texture){if(A.colorBufferId=u,!c(u))return console.warn(this.debugContext,"Attempted to compile render target whose target texture was not ready for use."),!1;r.framebufferTexture2D(r.FRAMEBUFFER,n.indexToColorAttachment(r,this.extensions,0,!0),r.TEXTURE_2D,u.gl.textureId,0)}else{var l;(l=this.compileColorBuffer(u,e.width,e.height))&&(A.colorBufferId=l,r.framebufferRenderbuffer(r.FRAMEBUFFER,n.indexToColorAttachment(r,this.extensions,0,!0),r.RENDERBUFFER,l))}}if(void 0!==e.buffers.depth)if((u=e.buffers.depth)instanceof o.Texture)A.depthBufferId=u,c(u)&&r.framebufferTexture2D(r.FRAMEBUFFER,r.DEPTH_ATTACHMENT,r.TEXTURE_2D,u.gl.textureId,0);else(l=this.compileDepthBuffer(u,e.width,e.height))&&(A.depthBufferId=l,r.framebufferRenderbuffer(r.FRAMEBUFFER,r.DEPTH_ATTACHMENT,r.RENDERBUFFER,l));if(void 0!==e.buffers.stencil)if((u=e.buffers.stencil)instanceof o.Texture)A.stencilBufferId=u,c(u)&&r.framebufferTexture2D(r.FRAMEBUFFER,r.STENCIL_ATTACHMENT,r.TEXTURE_2D,u.gl.textureId,0);else(l=this.compileStencilBuffer(u,e.width,e.height))&&(A.stencilBufferId=l,r.framebufferRenderbuffer(r.FRAMEBUFFER,r.STENCIL_ATTACHMENT,r.RENDERBUFFER,l));e.gl=A;var h=r.checkFramebufferStatus(r.FRAMEBUFFER),d=!1,f=!1,p="";switch(h){case r.FRAMEBUFFER_COMPLETE:e.setAsValid();break;case r.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:p="FRAMEBUFFER_INCOMPLETE_ATTACHMENT";break;case r.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:p="FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";break;case r.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:p="FRAMEBUFFER_INCOMPLETE_DIMENSIONS";break;case r.FRAMEBUFFER_UNSUPPORTED:p="FRAMEBUFFER_UNSUPPORTED";break;default:d=!0}if(r instanceof WebGL2RenderingContext)switch(h){case r.FRAMEBUFFER_INCOMPLETE_MULTISAMPLE:p="FRAMEBUFFER_INCOMPLETE_MULTISAMPLE";break;case r.RENDERBUFFER_SAMPLES:p="RENDERBUFFER_SAMPLES";break;default:f=!0}return d&&f&&(console.warn(this.debugContext,"A framebuffer check failed to return a known result. This FBO for render target will be assumed failed"),console.warn("Result:",h,"Render Target:",e),p="UNKNOWN"),!p||(console.warn(this.debugContext,"When creating a new FrameBuffer Object, the check on the framebuffer failed. Printing Errors:"),console.warn(p),console.warn("FAILED RENDER TARGET:",e),delete e.gl,!1)}},e.prototype.compileDepthBuffer=function(e,t,r){var i=this.gl,o=i.createRenderbuffer();return o?(this.state.bindRBO(o),i.renderbufferStorage(i.RENDERBUFFER,n.depthBufferFormat(i,e),t,r),o):(console.warn(this.debugContext,"Could not generate a WebGLRenderBuffer. Printing GL Errors:"),void this.printError())},e.prototype.compileStencilBuffer=function(e,t,r){var i=this.gl,o=i.createRenderbuffer();return o?(this.state.bindRBO(o),i.renderbufferStorage(i.RENDERBUFFER,n.stencilBufferFormat(i,e),t,r),o):(console.warn(this.debugContext,"Could not generate a WebGLRenderBuffer. Printing GL Errors:"),void this.printError())},e.prototype.compileColorBuffer=function(e,t,r){var i=this.gl,o=i.createRenderbuffer();return o?(this.state.bindRBO(o),i.renderbufferStorage(i.RENDERBUFFER,n.colorBufferFormat(i,e),t,r),o):(console.warn(this.debugContext,"Could not generate a WebGLRenderBuffer. Printing GL Errors:"),void this.printError())},e.prototype.compileTexture=function(e){if(e.gl&&!e.gl.textureId){if(!(e.gl.textureUnit<0)){this.state.setActiveTextureUnit(e.gl.textureUnit);var t=this.gl.createTexture();return t?(e.gl.textureId=t,e.needsDataUpload=!0,e.needsSettingsUpdate=!0,this.updateTextureData(e),this.updateTextureSettings(e),!0):(console.warn(this.debugContext,"Could not generate a texture object on the GPU. Printing any gl errors:"),void this.printError())}console.warn(this.debugContext,"A Texture object attempted to be compiled without an established Texture Unit.",e)}},e.prototype.draw=function(e){var t,r=[0,0];r=e.vertexDrawRange&&e.vertexDrawRange[0]>=0&&e.vertexDrawRange[1]>=0?[e.vertexDrawRange[0],e.vertexDrawRange[1]-e.vertexDrawRange[0]]:[0,e.vertexCount],e.drawInstances>=0&&e.geometry.isInstanced&&(t=this.extensions.instancing),t&&t instanceof WebGL2RenderingContext?t.drawArraysInstanced(n.drawMode(this.gl,e.drawMode),r[0],r[1],e.drawInstances):t?t.drawArraysInstancedANGLE(n.drawMode(this.gl,e.drawMode),r[0],r[1],e.drawInstances):this.gl.drawArrays(n.drawMode(this.gl,e.drawMode),r[0],r[1])},e.prototype.disposeMaterial=function(e){if(e.gl){var t=e.gl,r=t.vsId,n=t.fsId,i=t.programId,o=this.programs.get(r);o||(o=new Map,this.gl.deleteShader(r));var A=o.get(n);A||(A={useCount:0,program:i}),A.useCount--,A.useCount<1&&(this.gl.deleteProgram(A.program),o.delete(n),o.size<=0&&this.gl.deleteShader(r));var a=!1;this.programs.forEach(function(e){e.has(n)&&(a=!0)}),a||this.gl.deleteShader(n)}delete e.gl},e.prototype.disposeRenderBuffer=function(e){this.gl.deleteRenderbuffer(e)},e.prototype.disposeRenderTarget=function(e){var t=this;e.gl&&(Array.isArray(e.gl.colorBufferId)?e.gl.colorBufferId.forEach(function(r){r instanceof o.Texture&&!e.retainTextureTargets?t.disposeTexture(r):t.disposeRenderBuffer(r)}):e.gl.colorBufferId instanceof o.Texture&&!e.retainTextureTargets?this.disposeTexture(e.gl.colorBufferId):e.gl.colorBufferId instanceof WebGLRenderbuffer&&this.disposeRenderBuffer(e.gl.colorBufferId),e.gl.depthBufferId instanceof o.Texture&&!e.retainTextureTargets?this.disposeTexture(e.gl.depthBufferId):e.gl.depthBufferId instanceof WebGLRenderbuffer&&this.disposeRenderBuffer(e.gl.depthBufferId),e.gl.stencilBufferId instanceof o.Texture&&!e.retainTextureTargets?this.disposeTexture(e.gl.stencilBufferId):e.gl.stencilBufferId instanceof WebGLRenderbuffer&&this.disposeRenderBuffer(e.gl.stencilBufferId),delete e.gl)},e.prototype.disposeTexture=function(e){e.gl&&(this.gl.deleteTexture(e.gl.textureId),this.state.freeTextureUnit(e)),delete e.gl},e.getContext=function(t,r){for(var n=["webgl","experimental-webgl"],i=null,o={},a=0;a<n.length;++a){var s=n[a],c=t.getContext(s,r);if(c&&(c instanceof WebGLRenderingContext||c instanceof WebGL2RenderingContext)){A("Generated GL Context of version with attributes:",s,r),i=c,o=e.addExtensions(i);break}}return{context:i,extensions:o}},e.prototype.printError=function(){var e=this.gl.getError();switch(e){case this.gl.NO_ERROR:console.warn("GL Error: No Error");break;case this.gl.INVALID_ENUM:console.warn("GL Error: INVALID ENUM");break;case this.gl.INVALID_VALUE:console.warn("GL Error: INVALID_VALUE");break;case this.gl.INVALID_OPERATION:console.warn("GL Error: INVALID OPERATION");break;case this.gl.INVALID_FRAMEBUFFER_OPERATION:console.warn("GL Error: INVALID FRAMEBUFFER OPERATION");break;case this.gl.OUT_OF_MEMORY:console.warn("GL Error: OUT OF MEMORY");break;case this.gl.CONTEXT_LOST_WEBGL:console.warn("GL Error: CONTEXT LOST WEBGL");break;default:console.warn("GL Error: GL Context output an unrecognized error value:",e)}},e.prototype.lineFormatShader=function(e){var t=e.split("\n"),r=String(t.length).length+1;return"\n"+t.map(function(e,t){return""+Array(r-String(t+1).length).join(" ")+(t+1)+": "+e}).join("\n")},e.prototype.updateTexture=function(e){!e.gl||e.gl.textureUnit<0?console.warn(this.debugContext,"Can not update or compile a texture that does not have an established texture unit.",e):(this.compileTexture(e),this.updateTextureData(e),this.updateTexturePartialData(e),this.updateTextureSettings(e),e.resolve())},e.prototype.updateTextureData=function(e){if(e.needsDataUpload&&e.gl&&e.gl.textureId)if(e.gl.textureUnit<0)console.warn(this.debugContext,"A Texture object attempted to update it's data without an established Texture Unit.",e);else{var t=this.gl;this.state.setActiveTextureUnit(e.gl.textureUnit),this.state.bindTexture(e,i.GLSettings.Texture.TextureBindingTarget.TEXTURE_2D),e.needsSettingsUpdate=!0,this.updateTextureSettings(e),t instanceof WebGLRenderingContext&&(a(e.data)?(s(e.data.width)&&s(e.data.height)||A("Created a texture that is not using power of 2 dimensions."),t.texImage2D(t.TEXTURE_2D,0,n.texelFormat(t,e.format),e.data.width,e.data.height,0,n.texelFormat(t,e.format),n.inputImageFormat(t,e.type),e.data.buffer)):e.data&&(s(e.data.width)&&s(e.data.height)||A("Created a texture that is not using power of 2 dimensions. %o",e),t.texImage2D(t.TEXTURE_2D,0,n.texelFormat(t,e.format),n.texelFormat(t,e.format),n.inputImageFormat(t,e.type),e.data)),e.generateMipMaps&&t.generateMipmap(t.TEXTURE_2D)),e.data&&(e.data={width:e.data.width,height:e.data.height,buffer:null}),e.needsDataUpload=!1}},e.prototype.updateTexturePartialData=function(e){if(e.needsPartialDataUpload&&e.gl&&e.gl.textureId)if(e.gl.textureUnit<0)console.warn(this.debugContext,"A Texture object attempted to update it's data without an established Texture Unit.",e);else{var t=this.gl;this.state.setActiveTextureUnit(e.gl.textureUnit),this.state.bindTexture(e,i.GLSettings.Texture.TextureBindingTarget.TEXTURE_2D),e.updateRegions.forEach(function(r){var i=r[0],o=r[1];t instanceof WebGLRenderingContext&&(a(i)?t.texSubImage2D(t.TEXTURE_2D,0,o.x,o.y,i.width,i.height,n.texelFormat(t,e.format),n.inputImageFormat(t,e.type),i.buffer):i&&t.texSubImage2D(t.TEXTURE_2D,0,o.x,o.y,n.texelFormat(t,e.format),n.inputImageFormat(t,e.type),i),e.generateMipMaps&&t.generateMipmap(t.TEXTURE_2D))}),e.needsPartialDataUpload=!1}},e.prototype.updateTextureSettings=function(e){if(e.needsSettingsUpdate&&e.gl&&e.data&&e.gl.textureId)if(e.gl.textureUnit<0)console.warn(this.debugContext,"A Texture object attempted to update it's settings without an established Texture Unit.",e);else{var t=s(e.data.width)&&s(e.data.height),r=this.gl;if(this.state.setActiveTextureUnit(e.gl.textureUnit),this.state.bindTexture(e,i.GLSettings.Texture.TextureBindingTarget.TEXTURE_2D),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,n.magFilter(r,e.magFilter,t)),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,n.minFilter(r,e.minFilter,t,e.generateMipMaps)),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,n.wrapMode(r,e.wrapHorizontal)),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,n.wrapMode(r,e.wrapVertical)),r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.premultiplyAlpha),r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,e.flipY),this.extensions.anisotropicFiltering){var o=this.extensions.anisotropicFiltering,A=o.ext,a=o.stat;r.texParameterf(r.TEXTURE_2D,A.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(a.maxAnistropicFilter,Math.floor(e.anisotropy)))}e.needsSettingsUpdate=!1}},e.prototype.updateAttribute=function(e){if(!e.gl)return this.compileAttribute(e);if(!e.fullUpdate&&!e.needsUpdate)return!0;var t=this.gl;if(e.fullUpdate||e.updateRange.count<0||e.updateRange.offset<0)this.state.bindVBO(e.gl.bufferId),t.bufferData(t.ARRAY_BUFFER,e.data,e.isDynamic?t.DYNAMIC_DRAW:t.STATIC_DRAW);else if(e.updateRange.count>0){this.state.bindVBO(e.gl.bufferId);var r=e.updateRange.offset;t.bufferSubData(t.ARRAY_BUFFER,4*r,e.data.subarray(r,r+e.updateRange.count))}return e.resolve(),!0},e.prototype.useAttribute=function(e,t,r){if(!this.state.currentProgram)return!1;if(!t.gl)return!1;t.gl.locations=t.gl.locations||new Map;var n=t.gl.locations.get(this.state.currentProgram);if(void 0===n&&(-1===(n=this.gl.getAttribLocation(this.state.currentProgram,e))&&A("WARN: An attribute is not being used with the current material: %o",e,t),t.gl.locations.set(this.state.currentProgram,n)),-1!==n){switch(this.state.bindVBO(t.gl.bufferId),t.size){case 1:case 2:case 3:case 4:this.state.willUseVertexAttributeArray(n),this.gl.vertexAttribPointer(n,t.size,this.gl.FLOAT,t.normalize,0,0),r.isInstanced&&t.isInstanced&&this.extensions.instancing?this.state.setVertexAttributeArrayDivisor(n,1):this.state.setVertexAttributeArrayDivisor(n,0);break;default:for(var i=Math.ceil(t.size/4),o=0;o<i;++o)this.state.willUseVertexAttributeArray(n+o);for(o=0;o<i;++o)this.gl.vertexAttribPointer(n+o,4,this.gl.FLOAT,t.normalize,4*i*4,16*o);for(o=0;o<i;++o)r.isInstanced&&t.isInstanced&&this.extensions.instancing?this.state.setVertexAttributeArrayDivisor(n+o,1):this.state.setVertexAttributeArrayDivisor(n+o,0)}return!0}},e}();t.GLProxy=u},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(4),i=r(57),o=r(12),A=r(82),a=r(37),s=r(2)("performance"),c=function(){function e(e,t){this.debugContext="",this._textureUnitToTexture=new Map,this._freeUnits=[],this._blendingEnabled=!0,this._blendDstFactor=o.GLSettings.Material.BlendingDstFactor.One,this._blendSrcFactor=o.GLSettings.Material.BlendingDstFactor.One,this._blendEquation=o.GLSettings.Material.BlendingEquations.Add,this._cullFace=o.GLSettings.Material.CullSide.NONE,this._colorMask=[!0,!0,!0,!0],this._clearColor=[0,0,0,1],this._depthFunc=o.GLSettings.Material.DepthFunctions.ALWAYS,this._depthTestEnabled=!0,this._depthMask=!0,this._ditheringEnabled=!0,this._boundFBO=null,this._boundRBO=null,this._boundVBO=null,this._boundTexture={id:null,unit:-1},this._currentProgram=null,this._scissorTestEnabled=!1,this._scissorBounds={x:0,y:0,width:1,height:1},this._activeTextureUnit=-1,this._textureWillBeUsed=new Map,this._viewport={x:0,y:0,width:100,height:100},this._enabledVertexAttributeArray=[],this._willUseVertexAttributeArray=[],this._vertexAttributeArrayDivisor=new Map,this.gl=e,this.extensions=t;for(var r=this.gl.getParameter(e.MAX_COMBINED_TEXTURE_IMAGE_UNITS),n=0;n<r;++n)this._freeUnits.push(i.indexToTextureUnit(e,n));this._activeTextureUnit=e.TEXTURE0}return Object.defineProperty(e.prototype,"blendingEnabled",{get:function(){return this._blendingEnabled},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"blendDstFactor",{get:function(){return this._blendDstFactor},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"blendSrcFactor",{get:function(){return this._blendSrcFactor},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"blendEquation",{get:function(){return this._blendEquation},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cullFace",{get:function(){return this._cullFace},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"colorMask",{get:function(){return this._colorMask},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"clearColor",{get:function(){return this._clearColor},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"depthFunc",{get:function(){return this._depthFunc},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"depthTestEnabled",{get:function(){return this._depthTestEnabled},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"depthMask",{get:function(){return this._depthMask},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ditheringEnabled",{get:function(){return this._ditheringEnabled},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"boundFBO",{get:function(){return this._boundFBO},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"boundRBO",{get:function(){return this._boundRBO},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"boundVBO",{get:function(){return this._boundVBO},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"boundTexture",{get:function(){return this._boundTexture},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"currentProgram",{get:function(){return this._currentProgram},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scissorTestEnabled",{get:function(){return this._scissorTestEnabled},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scissorBounds",{get:function(){return this._scissorBounds},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"currentUniforms",{get:function(){return this._currentUniforms},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"activeTextureUnit",{get:function(){return this._activeTextureUnit},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"textureWillBeUsed",{get:function(){return this._textureWillBeUsed},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"viewport",{get:function(){return this._viewport},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"enabledVertexAttributeArray",{get:function(){return this._enabledVertexAttributeArray.slice(0).filter(function(e){return void 0!==e})},enumerable:!0,configurable:!0}),e.prototype.bindVBO=function(e){this._boundVBO!==e&&(this._boundVBO=e,this.gl.bindBuffer(this.gl.ARRAY_BUFFER,e))},e.prototype.bindRBO=function(e){this._boundRBO!==e&&(this._boundRBO=e,this.gl.bindRenderbuffer(this.gl.RENDERBUFFER,e))},e.prototype.bindFBO=function(e){this._boundFBO!==e&&(this._boundFBO=e,this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,e))},e.prototype.bindTexture=function(e,t){if(e.gl&&e.gl.textureId&&(!e||this._boundTexture.id!==e.gl.textureId||this._boundTexture.unit!==this._activeTextureUnit)){switch(this._boundTexture={id:e.gl.textureId,unit:this._activeTextureUnit},t){case o.GLSettings.Texture.TextureBindingTarget.TEXTURE_2D:this.gl.bindTexture(this.gl.TEXTURE_2D,e.gl.textureId);break;case o.GLSettings.Texture.TextureBindingTarget.TEXTURE_2D:this.gl.bindTexture(this.gl.TEXTURE_CUBE_MAP,e.gl.textureId)}var r=this._textureUnitToTexture.get(this._activeTextureUnit);r&&r.gl&&(r.gl.textureUnit=-1),this._textureUnitToTexture.set(this._activeTextureUnit,e),e.gl.textureUnit=this._activeTextureUnit}},e.prototype.willUseVertexAttributeArray=function(e){this._willUseVertexAttributeArray[e]=e,void 0===this._enabledVertexAttributeArray[e]&&(this._enabledVertexAttributeArray[e]=e,this.gl.enableVertexAttribArray(e))},e.prototype.applyVertexAttributeArrays=function(){for(var e=0,t=this._enabledVertexAttributeArray.length;e<t;++e){var r=this._enabledVertexAttributeArray[e];if(void 0!==r){if(void 0!==this._willUseVertexAttributeArray[r])return;this.gl.disableVertexAttribArray(r),delete this._enabledVertexAttributeArray[r]}}this._willUseVertexAttributeArray=[]},e.prototype.setVertexAttributeArrayDivisor=function(e,t){this.extensions.instancing&&void 0!==this._enabledVertexAttributeArray[e]&&this._vertexAttributeArrayDivisor.get(e)!==t&&(this.extensions.instancing instanceof WebGL2RenderingContext?this.extensions.instancing.vertexAttribDivisor(e,t):this.extensions.instancing.vertexAttribDivisorANGLE(e,t),this._vertexAttributeArrayDivisor.set(e,t))},e.prototype.freeTextureUnit=function(e){e.gl&&e.gl.textureUnit>-1&&(this._freeUnits.unshift(e.gl.textureUnit),e.gl.textureUnit=-1)},e.prototype.setActiveTextureUnit=function(e){this._activeTextureUnit!==e&&(this._activeTextureUnit=e,this.gl.activeTexture(e))},e.prototype.setClearColor=function(e){n.compare4(e,this._clearColor)||(this._clearColor=n.copy4(e),this.applyClearColor())},e.prototype.setProxy=function(e){this.glProxy=e},e.prototype.setScissor=function(e){e?(this._scissorTestEnabled||(this._scissorTestEnabled=!0,this.gl.enable(this.gl.SCISSOR_TEST)),e.x===this._scissorBounds.x&&e.y===this._scissorBounds.y&&e.width===this._scissorBounds.width&&e.height===this._scissorBounds.height||(this._scissorBounds=e,this.applyScissorBounds())):this._scissorTestEnabled&&(this._scissorTestEnabled=!1,this.gl.disable(this.gl.SCISSOR_TEST))},e.prototype.setViewport=function(e,t,r,n){e===this._viewport.x&&t===this._viewport.y&&r===this._viewport.width&&n===this._viewport.height||(this._viewport={x:e,y:t,width:r,height:n},this.applyViewport())},e.prototype.useProgram=function(e){this._currentProgram!==e&&(this._currentProgram=e,this.gl.useProgram(this._currentProgram))},e.prototype.useMaterial=function(e){if(!e.gl){if(!this.glProxy.compileMaterial(e))return!1;if(!e.gl)return!1}return!!e.gl.programId&&(this.useProgram(e.gl.programId),this.syncMaterial(e),!0)},e.prototype.useRenderTarget=function(e){return e?!!e.gl&&(this.bindFBO(e.gl.fboId),!0):(this.bindFBO(null),!0)},e.prototype.syncMaterial=function(e){var t=this,r=this.gl,n=Boolean(e.depthWrite);this._depthMask!==n&&(this._depthMask=n,r.depthMask(this._depthMask)),this._depthTestEnabled!==e.depthTest&&(this._depthTestEnabled=e.depthTest,this._depthTestEnabled?r.enable(r.DEPTH_TEST):r.disable(r.DEPTH_TEST)),this._depthFunc!==e.depthFunc&&(this._depthFunc=e.depthFunc,this.applyDepthFunc()),e.blending?(this._blendingEnabled||r.enable(r.BLEND),this._blendDstFactor===e.blending.blendDst&&this._blendSrcFactor===e.blending.blendSrc&&this._blendEquation===e.blending.blendEquation||(this._blendDstFactor=e.blending.blendDst||this._blendDstFactor,this._blendSrcFactor=e.blending.blendSrc||this._blendSrcFactor,this._blendEquation=e.blending.blendEquation||this._blendEquation,this.applyBlendFactors())):this._blendingEnabled&&r.disable(r.BLEND),this._cullFace!==e.culling&&(this._cullFace=e.culling,this.applyCullFace()),this._colorMask[0]===e.colorWrite[0]&&this._colorMask[1]===e.colorWrite[1]&&this._colorMask[2]===e.colorWrite[2]&&this._colorMask[3]===e.colorWrite[3]||(this._colorMask=e.colorWrite,this.applyColorMask()),this._ditheringEnabled!==e.dithering&&(this._ditheringEnabled=e.dithering,this._ditheringEnabled?r.enable(r.DITHER):r.disable(r.DITHER)),this._currentUniforms=e.uniforms;var i=!0;return!!this._currentProgram&&(Object.entries(e.uniforms).forEach(function(e){var r=e[0],n=e[1];if(t._currentProgram){n.gl||(n.gl=new Map);var o=n.gl.get(t._currentProgram);if(!o){var A=t.gl.getUniformLocation(t._currentProgram,r);if(!A)return console.warn(t.debugContext,"A Material specified a uniform "+r+", but none was found in the current program."),void(i=!1);o={location:A},n.gl.set(t._currentProgram,o)}t.uploadUniform(o.location,n)}}),i?!(this._textureWillBeUsed.size>0&&!this.applyUsedTextures()):(console.warn(e.vertexShader),console.warn(e.fragmentShader),!1))},e.prototype.uploadUniform=function(e,t){var r;switch(t.type){case a.MaterialUniformType.FLOAT:r=t.value,this.gl.uniform1f(e,r);break;case a.MaterialUniformType.VEC2:r=t.value,this.gl.uniform2f(e,r[0],r[1]);break;case a.MaterialUniformType.VEC3:r=t.value,this.gl.uniform3f(e,r[0],r[1],r[2]);break;case a.MaterialUniformType.VEC4:r=t.value,this.gl.uniform4f(e,r[0],r[1],r[2],r[3]);break;case a.MaterialUniformType.VEC4_ARRAY:r=t.value,this.gl.uniform4fv(e,n.flatten4(r));break;case a.MaterialUniformType.MATRIX3x3:r=t.value,this.gl.uniformMatrix3fv(e,!1,r);break;case a.MaterialUniformType.MATRIX4x4:r=t.value,this.gl.uniformMatrix4fv(e,!1,r);break;case a.MaterialUniformType.TEXTURE:r=t.value,this.willUseTextureUnit(r,e);break;default:console.warn(this.debugContext,"A uniform specified an unrecognized type. It will not sync with the GPU:",t)}},e.prototype.applyUsedTextures=function(){var e=this,t=this.assignTextureUnits(Array.from(this._textureWillBeUsed.keys()));t.forEach(function(t){t.gl?t.gl.textureUnit=e.gl.TEXTURE0:t.gl={textureId:null,textureUnit:e.gl.TEXTURE0,proxy:e.glProxy}});var r=new Map,n=new Set;return this._textureWillBeUsed.forEach(function(e,t){e instanceof A.RenderTarget?n.add(e):r.set(t,e)}),n.forEach(function(r){r.getTextures().some(function(r){return!(t.indexOf(r)<0)||(e.glProxy.updateTexture(r),!1)})?console.warn(e.debugContext,"A RenderTarget can not be used because all of it's textures could not be compiled."):e.glProxy.compileRenderTarget(r)}),r.forEach(function(r,n){t.indexOf(n)<0?(e.glProxy.updateTexture(n),r.forEach(function(t){e.uploadTextureToUniform(t,n)})):r.forEach(function(t){e.gl.uniform1i(t,i.textureUnitToIndex(e.gl,0))})}),this._textureWillBeUsed.clear(),!0},e.prototype.assignTextureUnits=function(e){var t=[],r=[];for(e.forEach(function(e){!e.gl||e.gl.textureUnit<0?t.push(e):r.push(e)});this._freeUnits.length>0&&t.length>0;){if(o=t.shift())void 0!==(A=this._freeUnits.shift())?(o.gl?o.gl.textureUnit=A:o.gl={textureId:null,textureUnit:A,proxy:this.glProxy},r.push(o)):t.unshift(o)}if(t.length<=0)return t;s("WARNING: Too many textures in use are causing texture units to be swapped. Doing this occasionally is fine, but handling this on a frame loop can have serious performance concerns.");var n=new Map;this._textureUnitToTexture.forEach(function(e){e&&n.set(e,!1)}),r.forEach(function(e){n.set(e,!0)});var i=[];if(n.forEach(function(e,t){e||i.push(t)}),0===i.length)return console.warn(this.debugContext,"There are too many textures being used for a single draw call. These textures will not be utilized on the GPU",t),t;for(;i.length>0&&t.length>0;){var o,A;if(o=t.shift())void 0===(A=i.shift())||!A.gl||A.gl.textureUnit<0?t.unshift(o):(o.gl?o.gl.textureUnit=A.gl.textureUnit:o.gl={textureId:null,textureUnit:A.gl.textureUnit,proxy:this.glProxy},r.push(o))}return t.length>0&&console.warn(this.debugContext,"There are too many textures being used for a single draw call. These textures will not be utilized on the GPU",t),t},e.prototype.uploadTextureToUniform=function(e,t){t.gl&&t.gl.textureUnit>=0?this.gl.uniform1i(e,i.textureUnitToIndex(this.gl,t.gl.textureUnit)):console.warn(this.debugContext,"Attempted to set a Texture Object to a uniform, but the Texture object did not have a valid texture unit.",t)},e.prototype.willUseTextureUnit=function(e,t){var r=this._textureWillBeUsed.get(e);t instanceof A.RenderTarget?r?r instanceof A.RenderTarget&&r!==t&&console.warn(this.debugContext,"A Texture is attempting to be used by two different render targets in a single draw."):this._textureWillBeUsed.set(e,t):r?r instanceof A.RenderTarget?console.warn(this.debugContext,"A texture in a single draw is attempting to attach to a uniform AND a render target which is invalid."):r.add(t):this._textureWillBeUsed.set(e,new Set([t]))},e.prototype.syncState=function(){var e=this.gl;this._blendingEnabled?e.enable(e.BLEND):e.disable(e.BLEND),this._ditheringEnabled?e.enable(e.DITHER):e.disable(e.DITHER),this._depthTestEnabled?e.enable(e.DEPTH_TEST):e.disable(e.DEPTH_TEST),this._scissorTestEnabled?e.enable(e.SCISSOR_TEST):e.disable(e.SCISSOR_TEST),this.setActiveTextureUnit(this._activeTextureUnit),this.applyClearColor(),this.applyCullFace(),this.applyBlendFactors(),this.applyBlendEquation(),this.applyColorMask(),this.applyDepthFunc(),this.applyScissorBounds(),this.applyViewport(),e.depthMask(this._depthMask)},e.prototype.applyClearColor=function(){this.gl.clearColor(this._clearColor[0],this._clearColor[1],this._clearColor[2],this._clearColor[3])},e.prototype.applyDepthFunc=function(){var e=this.gl;switch(this._depthFunc){case o.GLSettings.Material.DepthFunctions.ALWAYS:e.depthFunc(e.ALWAYS);break;case o.GLSettings.Material.DepthFunctions.EQUAL:e.depthFunc(e.EQUAL);break;case o.GLSettings.Material.DepthFunctions.GREATER:e.depthFunc(e.GREATER);break;case o.GLSettings.Material.DepthFunctions.GREATER_OR_EQUAL:e.depthFunc(e.GEQUAL);break;case o.GLSettings.Material.DepthFunctions.LESS:e.depthFunc(e.LESS);break;case o.GLSettings.Material.DepthFunctions.LESS_OR_EQUAL:e.depthFunc(e.LEQUAL);break;case o.GLSettings.Material.DepthFunctions.NEVER:e.depthFunc(e.NEVER);break;case o.GLSettings.Material.DepthFunctions.NOTEQUAL:e.depthFunc(e.NOTEQUAL);break;default:e.depthFunc(e.ALWAYS)}},e.prototype.applyScissorBounds=function(){this.gl.scissor(this._scissorBounds.x,this._scissorBounds.y,this._scissorBounds.width,this._scissorBounds.height)},e.prototype.applyColorMask=function(){this.gl.colorMask(this.colorMask[0]||!1,this.colorMask[1]||!1,this.colorMask[2]||!1,this.colorMask[3]||!1)},e.prototype.applyBlendEquation=function(){var e=this.gl;switch(this._blendEquation){case o.GLSettings.Material.BlendingEquations.Add:e.blendEquation(e.FUNC_ADD);break;case o.GLSettings.Material.BlendingEquations.Subtract:e.blendEquation(e.FUNC_SUBTRACT);break;case o.GLSettings.Material.BlendingEquations.ReverseSubtract:e.blendEquation(e.FUNC_REVERSE_SUBTRACT)}},e.prototype.applyBlendFactors=function(){var e,t,r=this.gl;switch(this._blendDstFactor){case o.GLSettings.Material.BlendingDstFactor.DstAlpha:e=r.BLEND_DST_ALPHA;break;case o.GLSettings.Material.BlendingDstFactor.DstColor:e=r.BLEND_DST_RGB;break;case o.GLSettings.Material.BlendingDstFactor.One:e=r.ONE;break;case o.GLSettings.Material.BlendingDstFactor.OneMinusDstAlpha:e=r.ONE_MINUS_DST_ALPHA;break;case o.GLSettings.Material.BlendingDstFactor.OneMinusDstColor:e=r.ONE_MINUS_DST_COLOR;break;case o.GLSettings.Material.BlendingDstFactor.OneMinusSrcAlpha:e=r.ONE_MINUS_SRC_ALPHA;break;case o.GLSettings.Material.BlendingDstFactor.OneMinusSrcColor:e=r.ONE_MINUS_SRC_COLOR;break;case o.GLSettings.Material.BlendingDstFactor.SrcAlpha:e=r.SRC_ALPHA;break;case o.GLSettings.Material.BlendingDstFactor.SrcColor:e=r.SRC_COLOR;break;case o.GLSettings.Material.BlendingDstFactor.Zero:e=r.ZERO;break;default:e=r.ONE}switch(this._blendSrcFactor){case o.GLSettings.Material.BlendingDstFactor.DstAlpha:t=r.BLEND_DST_ALPHA;break;case o.GLSettings.Material.BlendingDstFactor.DstColor:t=r.BLEND_DST_RGB;break;case o.GLSettings.Material.BlendingDstFactor.One:t=r.ONE;break;case o.GLSettings.Material.BlendingDstFactor.OneMinusDstAlpha:t=r.ONE_MINUS_DST_ALPHA;break;case o.GLSettings.Material.BlendingDstFactor.OneMinusDstColor:t=r.ONE_MINUS_DST_COLOR;break;case o.GLSettings.Material.BlendingDstFactor.OneMinusSrcAlpha:t=r.ONE_MINUS_SRC_ALPHA;break;case o.GLSettings.Material.BlendingDstFactor.OneMinusSrcColor:t=r.ONE_MINUS_SRC_COLOR;break;case o.GLSettings.Material.BlendingDstFactor.SrcAlpha:t=r.SRC_ALPHA;break;case o.GLSettings.Material.BlendingDstFactor.SrcColor:t=r.SRC_COLOR;break;case o.GLSettings.Material.BlendingDstFactor.Zero:t=r.ZERO;break;case o.GLSettings.Material.BlendingSrcFactor.SrcAlphaSaturate:t=r.SRC_ALPHA_SATURATE;break;default:t=r.ONE}r.blendFunc(t,e)},e.prototype.applyCullFace=function(){var e=this.gl;switch(this._cullFace!==o.GLSettings.Material.CullSide.NONE&&e.enable(e.CULL_FACE),this._cullFace){case o.GLSettings.Material.CullSide.CW:e.frontFace(e.CW),e.cullFace(e.FRONT);break;case o.GLSettings.Material.CullSide.CCW:e.frontFace(e.CCW),e.cullFace(e.FRONT);break;case o.GLSettings.Material.CullSide.BOTH:e.frontFace(e.CW),e.cullFace(e.FRONT_AND_BACK);break;default:e.disable(e.CULL_FACE)}},e.prototype.applyViewport=function(){this.gl.viewport(this._viewport.x,this._viewport.y,this._viewport.width,this._viewport.height)},e}();t.GLState=c},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(10),i=r(24),o=function(){function e(e){this._uid=n.uid(),this._validFramebuffer=!1,this.retainTextureTargets=!1,this._splitRenderBuffers=null,this._buffers={color:Array.isArray(e.buffers.color)?e.buffers.color.slice(0):e.buffers.color,depth:e.buffers.depth,stencil:e.buffers.stencil},this._width=e.width||0,this._height=e.height||0,this.retainTextureTargets=e.retainTextureTargets||!1,this.getDimensions()}return Object.defineProperty(e.prototype,"uid",{get:function(){return this._uid},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"buffers",{get:function(){return{color:Array.isArray(this._buffers.color)?this._buffers.color.slice(0):this._buffers.color,depth:this._buffers.depth,stencil:this._buffers.stencil}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return this._width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"validFramebuffer",{get:function(){return this._validFramebuffer},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"splitRenderBuffers",{get:function(){return this._splitRenderBuffers},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){this.gl&&this.gl.proxy.disposeRenderTarget(this)},e.prototype.getDimensions=function(){var e=this,t=[];if(this._buffers.color instanceof i.Texture&&t.push(this._buffers.color),Array.isArray(this._buffers.color)&&this._buffers.color.forEach(function(e){e instanceof i.Texture&&t.push(e)}),this._buffers.depth instanceof i.Texture&&t.push(this._buffers.depth),this._buffers.stencil instanceof i.Texture&&t.push(this._buffers.stencil),t.length>0&&t[0].data){var r=t[0].data,n=r.width,o=r.height;t.forEach(function(r){if(r.data){var i=r.data,A=i.width,a=i.height;A===n&&a===o||(console.warn("Texture applied to the render target is invalid as it does not match dimensions of all textures applied:",r,t,"The texture will be removed as a target for the render target"),e.removeTextureFromBuffer(r))}}),this._width=n,this._height=o}else this._width&&this._height||console.warn("A RenderTarget was not able to establish valid dimensions. This target had no texture buffers and did not specify valid width and height values.",this)},e.prototype.getTextures=function(){var e=[];return Array.isArray(this.buffers.color)?this.buffers.color.forEach(function(t){t instanceof i.Texture&&e.push(t)}):this.buffers.color instanceof i.Texture&&e.push(this.buffers.color),this.buffers.depth instanceof i.Texture&&e.push(this.buffers.depth),this.buffers.stencil instanceof i.Texture&&e.push(this.buffers.stencil),e},e.prototype.removeTextureFromBuffer=function(e){if(Array.isArray(this._buffers.color)){var t=this._buffers.color.indexOf(e);t>-1&&this._buffers.color.splice(t,1)}else this._buffers.color===e&&delete this._buffers.color;this._buffers.depth===e&&delete this._buffers.depth,this._buffers.stencil===e&&delete this._buffers.stencil},e.prototype.setSize=function(e,t){this.dispose(),this._width=e,this._height=t,this.getTextures().forEach(function(r){r.data={buffer:null,height:t,width:e}})},e.prototype.setAsValid=function(){this._validFramebuffer=!0},e}();t.RenderTarget=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(80),i=r(81),o=r(25),A=function(){function e(e){this.state={clearMask:[!1,!1,!1],currentRenderTarget:null,displaySize:[1,1],pixelRatio:1,renderSize:[1,1]},this.options=Object.assign({alpha:!1,antialias:!1,preserveDrawingBuffer:!1},e),this.options.canvas||console.warn("WebGLRenderer ERROR: A canvas is REQUIRED as a parameter."),this.getContext()}return Object.defineProperty(e.prototype,"debugContext",{set:function(e){this.glProxy&&(this.glProxy.debugContext=e),this.glState&&(this.glState.debugContext=e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"gl",{get:function(){return this._gl},enumerable:!0,configurable:!0}),e.prototype.clear=function(e,t,r){var n=this.state.clearMask;this.state.clearMask=[n[0]||e||!1,n[1]||t||!1,n[2]||r||!1]},e.prototype.clearColor=function(e){e&&this.glState.setClearColor(e)},e.prototype.dispose=function(){},e.prototype.getContext=function(){if(this._gl)return this._gl;var e=n.GLProxy.getContext(this.options.canvas,{alpha:this.options.alpha||!1,antialias:this.options.antialias||!1,premultipliedAlpha:this.options.premultipliedAlpha||!1,preserveDrawingBuffer:this.options.preserveDrawingBuffer||!1});return e.context?(this._gl=e.context,this.glState=new i.GLState(e.context,e.extensions),this.glProxy=new n.GLProxy(e.context,this.glState,e.extensions),this.glState.setProxy(this.glProxy),this.glState.syncState()):this.options.onNoContext?this.options.onNoContext():console.warn("No context was able to be produced, and the handler onNoContext was not implemented for such cases."),this._gl},e.prototype.getDisplaySize=function(){return this.state.displaySize},e.prototype.getPixelRatio=function(){return this.state.pixelRatio},e.prototype.getRenderSize=function(){return this.state.renderSize},e.prototype.getFullViewport=function(){var e=this.state.currentRenderTarget;if(e)return{x:0,y:0,width:e.width,height:e.height};var t=this.getRenderSize();return{x:0,y:0,width:t[0],height:t[1]}},e.prototype.prepareAttribute=function(e,t,r){return this.glProxy.updateAttribute(t)?(this.glProxy.useAttribute(r,t,e),!0):(console.warn("Could not update attribute",t),!1)},e.prototype.render=function(e,t){var r=this;if(void 0===t&&(t=null),this.gl){this.setRenderTarget(t);var n=this.state.clearMask;if((n[0]||n[1]||n[2])&&(this.glProxy.clear(n[0],n[1],n[2]),this.state.clearMask=[!1,!1,!1]),!t||t.gl){var i=[];e.models.forEach(function(e){r.renderModel(e,i)}),i.forEach(function(t){e.remove(t)})}else console.warn("FBO is not ready for drawing. Skipping the rendering of the scene and target:",{scene:e,target:t})}},e.prototype.renderModel=function(e,t){var r=e.geometry,n=e.material;if(this.glState.useMaterial(n)){var i=!0;r.attributes.forEach(function(e,t){i=this.prepareAttribute(r,e,t)&&i},this),this.glState.applyVertexAttributeArrays(),i?this.glProxy.draw(e):(console.warn("Geometry was unable to update correctly, thus we are skipping the drawing of",e),t.push(e))}else console.warn("Could not utilize material. Skipping draw call for:",n,r),t.push(e)},e.prototype.readPixels=function(e,t,r,n,i){if(this.gl){var o=this.state.currentRenderTarget,A=!0;if(o&&(A=o.validFramebuffer),A)if(e=Math.max(0,e),t=Math.max(0,t),o){e+r>o.width&&(r=o.width-e),t+n>o.height&&(n=o.height-t);var a=o.height;this.gl.readPixels(e,a-t-n,r,n,this.gl.RGBA,this.gl.UNSIGNED_BYTE,i)}else{var s=this.getRenderSize();a=s[1];e+r>s[0]&&(r=s[0]-e),t+n>s[1]&&(n=s[1]-t),this.gl.readPixels(e,a-t-n,r,n,this.gl.RGBA,this.gl.UNSIGNED_BYTE,i)}else console.warn("Framebuffer is incomplete. Can not read pixels at this time.")}},e.prototype.setClearColor=function(e){this.glState.setClearColor(e)},e.prototype.setPixelRatio=function(e){var t=this.options.canvas,r=this.getDisplaySize();t.width=r[0]*e,t.height=r[1]*e,this.state.pixelRatio=e},e.prototype.setScissor=function(e,t){if(t=t||this.state.currentRenderTarget||void 0){var r=t.height;if(e){var n=e.x,i=e.y,o=e.width,A=e.height;this.glState.setScissor({x:n,y:r-i-A,width:o,height:A})}else this.glState.setScissor(null)}else{r=this.state.renderSize[1];if(e){n=e.x,i=e.y,o=e.width,A=e.height;this.glState.setScissor({x:n,y:r-i-A,width:o,height:A})}else this.glState.setScissor(null)}},e.prototype.setSize=function(e,t){var r=this.options.canvas,n=this.state.pixelRatio;r.width=Math.min(e*n,o.WebGLStat.MAX_TEXTURE_SIZE),r.height=Math.min(t*n,o.WebGLStat.MAX_TEXTURE_SIZE),r.style.width=e+"px",r.style.height=t+"px",this.state.renderSize=[r.width,r.height],this.state.displaySize=[e,t]},e.prototype.setRenderTarget=function(e){var t=this;this.state.currentRenderTarget!==e&&(!this.glState.useRenderTarget(e)&&e&&(e.getTextures().forEach(function(r){t.glState.willUseTextureUnit(r,e)}),this.glState.applyUsedTextures(),this.glProxy.compileRenderTarget(e)&&this.glState.useRenderTarget(e)),this.state.currentRenderTarget=e)},e.prototype.setViewport=function(e){var t=this.state.currentRenderTarget,r=e.x,n=e.y,i=e.width,o=e.height;if(t){var A=t.height;this.glState.setViewport(r,A-n-o,i,o)}else{A=this.state.renderSize[1];this.glState.setViewport(r,A-n-o,i,o)}},e}();t.WebGLRenderer=A},function(e,t,r){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},i=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(i,o){function A(e){try{s(n.next(e))}catch(e){o(e)}}function a(e){try{s(n.throw(e))}catch(e){o(e)}}function s(e){e.done?i(e.value):new r(function(t){t(e.value)}).then(A,a)}s((n=n.apply(e,t||[])).next())})},o=this&&this.__generator||function(e,t){var r,n,i,o,A={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;A;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return A.label++,{value:o[1],done:!1};case 5:A.label++,n=o[1],o=[0];continue;case 7:o=A.ops.pop(),A.trys.pop();continue;default:if(!(i=(i=A.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){A=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){A.label=o[1];break}if(6===o[0]&&A.label<i[1]){A.label=i[1],i=o;break}if(i&&A.label<i[2]){A.label=i[2],A.ops.push(o);break}i[2]&&A.ops.pop(),A.trys.pop();continue}o=t.call(e,A)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};Object.defineProperty(t,"__esModule",{value:!0});var A=r(49),a=r(27),s=r(0),c=r(19),u=r(85),l=r(86),h=r(2)("performance");!function(e){e[e._16=16]="_16",e[e._32=32]="_32",e[e._64=64]="_64",e[e._128=128]="_128"}(t.FontGlyphRenderSize||(t.FontGlyphRenderSize={})),t.isFontResource=function(e){return e&&e.type===s.ResourceType.FONT},t.createFont=function(e){return n({key:"",type:s.ResourceType.FONT},e)};var d=function(){function e(){this.fontMaps=new Map,this.fontRenderer=new l.FontRenderer}return e.prototype.calculateMetrics=function(e,t){return i(this,void 0,void 0,function(){var r,n,i,A,a,s;return o(this,function(o){switch(o.label){case 0:if(h("Calculating metrics for requests"),!(r=this.fontMaps.get(e)))return[2];n=0,i=t.length,o.label=1;case 1:return n<i?(A=t[n],(a=A.metrics)?(a.layout=r.getStringLayout(a.text,a.fontSize,a.letterSpacing),a.maxWidth?(h("Calculating truncation for",a.text,a.maxWidth),s=a,[4,r.getTruncatedLayout(a.layout,a.truncation||"",a.maxWidth,a.fontSize,a.letterSpacing,this.fontRenderer)]):[3,3]):[3,3]):[3,4];case 2:s.layout=o.sent(),a.truncatedText=a.layout.text,o.label=3;case 3:return++n,[3,1];case 4:return[2]}})})},e.prototype.characterFilterToCharacters=function(e){for(var t=new Set,r="",n=0,i=e.length;n<i;++n){var o=e[n];t.has(o)||(t.add(o),r+=o)}return r},e.prototype.createFontMap=function(e){return i(this,void 0,void 0,function(){var t,r,i,A;return o(this,function(o){switch(o.label){case 0:return t=this.characterFilterToCharacters(e.characterFilter||""),i=e.fontSource,A=u.FontMapGlyphType.SDF,i&&(A=(a=i)&&void 0===a.type?u.FontMapGlyphType.BITMAP:i.type||A),r=new u.FontMap(n({},e,{glyphType:A})),[4,this.updateFontMapCharacters(t,r)];case 1:return o.sent(),this.fontMaps.set(e.key,r),[2,r]}var a})})},e.prototype.destroy=function(){this.fontMaps.forEach(function(e){return e.destroy()})},e.prototype.destroyFontMap=function(e){var t=this.fontMaps.get(e);t&&t.destroy()},e.prototype.updateFontMap=function(e,t){return i(this,void 0,void 0,function(){var r,n,i,A,a,s,c,u,l,h;return o(this,function(o){switch(o.label){case 0:if(!(r=this.fontMaps.get(e)))return[2];for(n=[],i=new Set,l=0,h=t.length;l<h;++l)if((A=t[l]).character&&i.add(A.character),A.kerningPairs&&(n=n.concat(A.kerningPairs)),A.metrics&&A.metrics.truncation)for(a=A.metrics.truncation.replace(/\s/g,""),n.push(a),s=0,c=A.metrics.truncation.length;s<c;++s)i.add(a);for(l=0,h=n.length;l<h;++l)i.add(n[l]);return u="",i.forEach(function(e){return u+=e}),[4,this.updateFontMapCharacters(u,r)];case 1:return o.sent(),[4,this.updateKerningPairs(n,r)];case 2:for(o.sent(),l=0,h=t.length;l<h;++l)t[l].fontMap=r;return[2]}})})},e.prototype.updateKerningPairs=function(e,t){return i(this,void 0,void 0,function(){var r;return o(this,function(n){switch(n.label){case 0:return t?[4,this.fontRenderer.estimateKerning(e,t.fontString,t.fontSource.size,t.kerning,!t.spaceWidth)]:[2];case 1:return r=n.sent(),t.addKerning(r.pairs),t.spaceWidth=t.spaceWidth||r.spaceWidth,[2]}})})},e.prototype.updateFontMapCharacters=function(e,t){return i(this,void 0,void 0,function(){var r,i,s,u,l,h,d,f;return o(this,function(o){if(!t)return[2];if(r=t.texture,(i=t.findMissingCharacters(e)).length<=0)return[2];for(u in s=this.fontRenderer.makeBitmapGlyphs(i,t.fontString,t.fontSource.size))if(l=s[u],r.data){if(h=new A.Bounds({x:0,y:0,width:l.glyph.width,height:l.glyph.height}),d=new c.SubTexture,!(f=t.packing.insert({data:d,bounds:h})))return console.warn("Font map is full and could not pack in any more glyphs"),[2];a.PackNode.applyToSubTexture(t.packing,f,d,void 0,!0),r.update(l.glyph,n({},f.bounds,{y:t.packing.bounds.height-f.bounds.y-f.bounds.height})),d?t.registerGlyph(u,d):console.warn("Could not generate a subtexture for the font map registration.")}else console.warn("Can not update font map as the maps texture data is not defined.");return[2]})})},e.prototype.getPrerenderedImageData=function(e,t,r){return i(this,void 0,void 0,function(){var n;return o(this,function(i){switch(i.label){case 0:return n=[],r.forEach(function(r){var i=e.glyphs[r];if(i||(i=e.errorGlyph),!e.errorGlyph)return console.warn("The prerendered source provided did NOT provide a proper glyph for rendering when a glyph could not be located."),[];var o,A=new Image,a=new Promise(function(e){return o=e});return A.onload=function(){var e=document.createElement("canvas"),r=e.getContext("2d");if(r){e.width=t,e.height=t,r.drawImage(A,0,0,t,t);var n=r.getImageData(0,0,t,t);o(n)}},A.onerror=function(){console.warn("There was an issue with loading the glyph data for character:",r),o(null)},A.src=e.glyphs[r],n.push(a),[]}),[4,Promise.all(n)];case 1:return[2,i.sent()]}})})},e}();t.FontManager=d},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},A=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(i,o){function A(e){try{s(n.next(e))}catch(e){o(e)}}function a(e){try{s(n.throw(e))}catch(e){o(e)}}function s(e){e.done?i(e.value):new r(function(t){t(e.value)}).then(A,a)}s((n=n.apply(e,t||[])).next())})},a=this&&this.__generator||function(e,t){var r,n,i,o,A={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;A;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return A.label++,{value:o[1],done:!1};case 5:A.label++,n=o[1],o=[0];continue;case 7:o=A.ops.pop(),A.trys.pop();continue;default:if(!(i=(i=A.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){A=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){A.label=o[1];break}if(6===o[0]&&A.label<i[1]){A.label=i[1],i=o;break}if(i&&A.label<i[2]){A.label=i[2],A.ops.push(o);break}i[2]&&A.ops.pop(),A.trys.pop();continue}o=t.call(e,A)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};Object.defineProperty(t,"__esModule",{value:!0});var s,c=r(7),u=r(4),l=r(0),h=r(23),d=r(27),f=r(2)("performance");!function(e){e[e.BITMAP=0]="BITMAP",e[e.SDF=1]="SDF",e[e.MSDF=2]="MSDF"}(s=t.FontMapGlyphType||(t.FontMapGlyphType={}));var p=function(e){function t(t){var r=e.call(this,t)||this;r.dynamic=!1,r.glyphMap={},r.kerning={},r.spaceWidth=0,r.type=l.ResourceType.FONT,r.dynamic=t.dynamic||!1,r.fontSource=t.fontSource,t.characters&&t.characters.forEach(function(e){r.doRegisterGlyph(e[0],e[1])});var n=t.fontMapSize?t.fontMapSize:[l.TextureSize._1024,l.TextureSize._1024];return r.makeGlyphTypeTextureSettings(t.glyphType),r.createTexture(n),r.packing=new d.PackNode(0,0,n[0],n[1]),r.addCachedKerning(),r}return i(t,e),Object.defineProperty(t.prototype,"fontString",{get:function(){return this.fontSource.size+"px "+this.fontSource.family},enumerable:!0,configurable:!0}),t.prototype.getKerningCacheName=function(){return"__deltav_kerning_cache_"+this.fontSource.family+"__"},t.prototype.addCachedKerning=function(){if(this.fontSource.localKerningCache){var e=localStorage.getItem(this.getKerningCacheName());if(e){f("Loading cached kerning items:",this.getKerningCacheName());try{var t=JSON.parse(e),r=0;for(var n in t){var i="string"==typeof n&&1===n.length;if(i){var o=t[n],A=this.kerning[n]||{};for(var a in this.kerning[n]=A,o)(i="string"==typeof n&&1===n.length)&&(A[a]=o[a],r++)}}f("Found kerning items in the cache!","Count:",r)}catch(e){}}}},t.prototype.addKerning=function(e){var t=!1;for(var r in e){var n=e[r],i=this.kerning[r]||{};for(var o in this.kerning[r]||(t=!0),this.kerning[r]=i,n)i[o]||(t=!0),i[o]=n[o]}if(t&&this.fontSource.localKerningCache)try{f("Storing kerning info in cache...");var A=JSON.stringify(this.kerning);localStorage.setItem(this.getKerningCacheName(),A)}catch(e){f("Could not cache kerning info")}},t.prototype.createTexture=function(e){var t;this.texture||(t=this.textureSettings?o({generateMipMaps:!0,premultiplyAlpha:!0},this.textureSettings):{generateMipMaps:!0,premultiplyAlpha:!0},this.texture=new c.Texture(o({data:{width:e[0],height:e[1],buffer:null}},t)))},t.prototype.destroy=function(){this.texture.dispose()},t.prototype.doRegisterGlyph=function(e,t){var r=e[0];this.glyphMap[r]?console.warn("A Glyph is already registered with a rendering"):this.glyphMap[r]=t},t.prototype.findMissingCharacters=function(e){for(var t=new Set,r="",n=0,i=e.length;n<i;++n){var o=e[n];this.glyphMap[o]||t.has(o)||(t.add(o),r+=o)}return r},t.prototype.getGlyphTexture=function(e){return this.glyphMap[e[0]]||null},t.prototype.getGlyphKerning=function(e,t){var r=this.kerning[e];return r&&r[t]||[0,0]},t.prototype.getGlyphWidth=function(e,t,r){var n=e.positions[t],i=e.positions[r];if(!t||!r)return 0;var o=this.glyphMap[e.glyphs[r]];return o?i[0]+o.pixelWidth-n[0]:0},t.prototype.getTruncatedLayout=function(e,t,r,n,i,o){return A(this,void 0,void 0,function(){var A,s,c,u,h,d,f,p,g,B,w,y,v,m,b;return a(this,function(a){switch(a.label){case 0:if(!(e.size[0]>r))return[3,5];for(A="",s=0,v=0,m=t.length;v<m;++v)s+=this.glyphMap[t[v]].pixelWidth;if(s>r)return[2,{fontScale:1,glyphs:"",positions:[],size:[0,0],text:""}];for(c=0,u=e.positions.length,h=0,d=0,f="";c!==u;){if(h=Math.floor((u-c)/2)+c,f=e.glyphs[h],(d=e.positions[h][0]+this.glyphMap[f].pixelWidth+s)>r)u=h;else{if(!(d<r))break;c=h}if(Math.abs(c-u)<=1){if(d<r)break;for(;d>r&&h>=0;)h--,d=e.positions[h][0]+this.glyphMap[f].pixelWidth+s;break}}if(!((d=e.positions[h][0]+this.glyphMap[f].pixelWidth+s)<r))return[3,3];for(p=0,g=0,v=0,m=e.text.length;v<m&&p<=h;++v)B=e.text[v],g++,l.isWhiteSpace(B)||p++;for(w=e.text[g-1],y=void 0,v=0,m=t.length;v<m;++v)if(!l.isWhiteSpace(t[v])){y=t[v];break}return w&&y&&!this.kerning[w][y]?[4,o.estimateKerning([w+y],this.fontString,this.fontSource.size,this.kerning,!1)]:[3,2];case 1:b=a.sent(),this.addKerning(b.pairs),a.label=2;case 2:return A=""+e.text.substr(0,g)+t,[3,4];case 3:A=t,a.label=4;case 4:return[2,this.getStringLayout(A,n,i)];case 5:return[2,e]}})})},t.prototype.getStringWidth=function(e,t,r){var n=e.text,i=0,o=n.length;if("string"==typeof t){var A=n.indexOf(t);if(A<0)return 0;o=(i=A)+t.length}else i=t;void 0!==r&&(o=r);for(var a=0,s=Math.min(n.length,i),c=Math.min(n.length,o);a<s;++a)l.isWhiteSpace(n[a])&&(i--,o--);for(;a<c;++a)l.isWhiteSpace(n[a])&&o--;var u=this.glyphMap[e.text[o]||""];return u?(e.positions[o]||[0,0])[0]-(e.positions[i]||[0,0])[0]+u.pixelWidth:0},t.prototype.getStringLayout=function(e,t,r){for(var n,i,o=[],A="",a=t/this.fontSource.size,s=Number.MAX_SAFE_INTEGER,c=0,h=0,d=[0,0],f=this.spaceWidth,p=0,g="",B=0,w=e.length;B<w;++B){var y=e[B];l.isWhiteSpace(y)?p++:(n=[0,0],g&&(n=this.kerning[g][y]||[0,0]),d=u.add2(u.add2(d,u.scale2(n,a)),[p*f*a+(0===B?0:r),0]),o.push([d[0],d[1]]),A+=y,i=this.glyphMap[y],s=Math.min(d[1],s),c=Math.max(d[1]+i.pixelHeight*a,c),g=y,h=d[0]+i.pixelWidth*a,p=0)}var v=[h,c-s];for(B=0,w=o.length;B<w;++B)(d=o[B])[1]-=s;return{fontScale:a,glyphs:A,positions:o,size:v,text:e}},t.prototype.makeGlyphTypeTextureSettings=function(e){switch(e){case s.BITMAP:this.textureSettings={magFilter:c.GLSettings.Texture.TextureMagFilter.Linear,minFilter:c.GLSettings.Texture.TextureMinFilter.LinearMipMapLinear,format:c.GLSettings.Texture.TexelDataType.LuminanceAlpha};break;case s.SDF:this.textureSettings={magFilter:c.GLSettings.Texture.TextureMagFilter.Linear,minFilter:c.GLSettings.Texture.TextureMinFilter.Linear,format:c.GLSettings.Texture.TexelDataType.Luminance};break;case s.MSDF:this.textureSettings={magFilter:c.GLSettings.Texture.TextureMagFilter.Linear,minFilter:c.GLSettings.Texture.TextureMinFilter.Linear,format:c.GLSettings.Texture.TexelDataType.RGB}}},t.prototype.registerGlyph=function(e,t){this.dynamic?this.doRegisterGlyph(e,t):console.warn("Attempted to register a new glyph with a non-dynamic FontMap")},t.prototype.supportsKerning=function(e){for(var t=1,r=e.length;t<r;++t){var n=e[t],i=e[t-1];if(!this.kerning[i])return!1;if(!this.kerning[i][n])return!1}return!0},t}(h.IdentifyByKey);t.FontMap=p},function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(i,o){function A(e){try{s(n.next(e))}catch(e){o(e)}}function a(e){try{s(n.throw(e))}catch(e){o(e)}}function s(e){e.done?i(e.value):new r(function(t){t(e.value)}).then(A,a)}s((n=n.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){var r,n,i,o,A={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;A;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return A.label++,{value:o[1],done:!1};case 5:A.label++,n=o[1],o=[0];continue;case 7:o=A.ops.pop(),A.trys.pop();continue;default:if(!(i=(i=A.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){A=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){A.label=o[1];break}if(6===o[0]&&A.label<i[1]){A.label=i[1],i=o;break}if(i&&A.label<i[2]){A.label=i[2],A.ops.push(o);break}i[2]&&A.ops.pop(),A.trys.pop();continue}o=t.call(e,A)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var A=o(r(148)),a=r(25),s=r(11),c=r(99),u=r(2)("performance"),l=Math.floor;function h(e,t,r,o){return n(this,void 0,void 0,function(){var n,h,d,f,p,g,B,w,y,v,m,b,E,C,T,U,_,Q,F,x,S,I,M,O,R,P,N,L,H,D,k,z,K,j,G,V,X,W,Y,J,q,Z,$,ee,te,re,ne,ie;return i(this,function(i){switch(i.label){case 0:for(n=a.WebGLStat.MAX_TEXTURE_SIZE/window.devicePixelRatio,h=document.createElement("div"),d=l(n/(2*t)),f=2.5*t,p=2*t,h.style.display="table",h.style.width=n+"px",h.style.textAlign="center",h.style.tableLayout="fixed",h.style.position="relative",h.style.left="0px",h.style.top=window.innerHeight+"px",g=0,B=0,v=0;g<r.all.length;){for(I=document.createElement("div"),w=I,I.style.display="table-row",I.style.height=p+"px",I.style.width="width:"+n+"px",m=n,B=0;B<d&&g<r.all.length;B++)(x=document.createElement("div")).style.display="table-cell",x.style.width=f+"px",x.style.height=p+"px",x.style.overflow="hidden",x.style.font=e,Z=r.all[g],g++,b=Z[0],E=Z[1],C=document.createElement("span"),T=document.createElement("span"),C.style.color="#ff0000",T.style.color="#0000ff",C.innerText=b,T.innerText=E,x.appendChild(C),x.appendChild(T),I.appendChild(x),m-=f;m>=0?((x=document.createElement("div")).style.display="table-cell",x.style.width=m+"px",I.appendChild(x),y=x):y=null,v=m,h.appendChild(I)}for(U=[],J=0;J<r.all.length;J++)U.push([Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER]);return _=0,Q=!1,o?(F="M",(x=document.createElement("div")).style.display="table-cell",x.style.width=f+"px",x.style.height=p+"px",x.style.overflow="hidden",x.style.font=e,[4,c.renderGlyph(F,128,128,e)]):[3,2];case 1:(S=i.sent())&&(_=S.size[0],x.innerHTML='<span style="color:#ff0000">'+F+'</span> <span style="color:#0000ff">'+F+"</span>",B<d&&w?(w.appendChild(x),v-=f,y&&(y.remove(),v>0&&(w.style.width=v+"px",w.appendChild(y)))):(I=document.createElement("div"),w=I,I.style.display="table-row",I.style.height=p+"px",I.style.width="width:"+n+"px",w.appendChild(x),h.appendChild(I),(y=document.createElement("div")).style.display="table-cell",y.style.width=(d-1)*f+"px",I.appendChild(y)),U.push([Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER]),Q=!0),i.label=2;case 2:return document.getElementsByTagName("body")[0].appendChild(h),M={backgroundColor:null,logging:u.enabled},u("Rendering table for font kerning analysis",r,h),[4,A.default(h,M)];case 3:if(!(O=i.sent()))return console.warn("Could not convert DOM structure to canvas"),[2];if(R=f*window.devicePixelRatio,P=p*window.devicePixelRatio,N=O.getContext("2d"),u("Analyzing rendered canvas",O),N){for(L=N.getImageData(0,0,O.width,O.height).data,H=void 0,D=void 0,k=void 0,z=void 0,K=void 0,j=void 0,G=0,V=O.height;G<V;G++)for(X=0,W=O.width;X<W;X++)D=L[(H=4*(W*G+X))+0],k=L[H+1],z=L[H+2],(j=l(G/P)*d+l(X/R))<U.length&&(K=U[j],D>0&&0===k&&0===z&&(X<K[0]&&(K[0]=X),G<K[1]&&(K[1]=G)),0===D&&0===k&&z>0&&(X<K[2]&&(K[2]=X),G<K[3]&&(K[3]=G)));for(Q&&(Y=U.pop())&&(re=[Y[2]-Y[0],0],ie=s.scale2(re,1/window.devicePixelRatio),r.spaceWidth=Math.ceil(ie[0])-_),J=0,q=U.length;J<q;J++)Z=r.all[J],$=Z[0],ee=Z[1],te=U[J],re=[te[2]-te[0],te[3]-te[1]],(ne=r.pairs[$])&&(ie=s.scale2(re,1/window.devicePixelRatio),ne[ee]=[Math.ceil(ie[0]),ie[1]])}else console.warn("html2canvas did not produce a valid canvas context to analyze");return h.remove(),u("Kerning rendering analysis complete",r.pairs),[2]}})})}function d(e,t,r){e=e.replace(/\s/g,"");for(var n=r&&r.all||[],i=r&&r.pairs||{},o=0;o<e.length-1;o++){var A=e[o],a=e[o+1],s=i[A];s||(s=i[A]={}),t[A]&&t[A][a]||s[a]||(s[a]=[0,0],n.push(""+A+a))}return{all:n,pairs:i,spaceWidth:0}}var f=function(){function e(){}return e.prototype.makeBitmapGlyphs=function(e,t,r){for(var n={},i=new Set,o=0,A=e.length;o<A;++o)i.add(e[o]);var a=Array.from(i.values());for(o=0,A=a.length;o<A;++o){var s=a[o],u=c.renderGlyph(s,2*r,2*r,t);u?n[s]={glyph:u.data,glyphIndex:o}:console.warn("Unable to render character",s,"to font map for rendering.")}return n},e.prototype.estimateKerning=function(e,t,r,o,A){return n(this,void 0,void 0,function(){var n,a,s;return i(this,function(i){switch(i.label){case 0:for(n={all:[],pairs:{},spaceWidth:0},u("Estimating Kerning for",e),a=0,s=e.length;a<s;++a)d(e[a],o,n);return n.all.length>0||A?[4,h(t,r,n,A)]:[3,2];case 1:i.sent(),i.label=2;case 2:return[2,n]}})})},e}();t.FontRenderer=f},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=r(39),o=r(58);var A=function(e,t){var r=Math.max.apply(null,e.colorStops.map(function(e){return e.stop})),n=1/Math.max(1,r);e.colorStops.forEach(function(e){t.addColorStop(n*e.stop,e.color.toString())})},a=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.canvas=t||document.createElement("canvas")}return n(e,[{key:"render",value:function(e){this.ctx=this.canvas.getContext("2d"),this.options=e,this.canvas.width=Math.floor(e.width*e.scale),this.canvas.height=Math.floor(e.height*e.scale),this.canvas.style.width=e.width+"px",this.canvas.style.height=e.height+"px",this.ctx.scale(this.options.scale,this.options.scale),this.ctx.translate(-e.x,-e.y),this.ctx.textBaseline="bottom",e.logger.log("Canvas renderer initialized ("+e.width+"x"+e.height+" at "+e.x+","+e.y+") with scale "+this.options.scale)}},{key:"clip",value:function(e,t){var r=this;e.length&&(this.ctx.save(),e.forEach(function(e){r.path(e),r.ctx.clip()})),t(),e.length&&this.ctx.restore()}},{key:"drawImage",value:function(e,t,r){this.ctx.drawImage(e,t.left,t.top,t.width,t.height,r.left,r.top,r.width,r.height)}},{key:"drawShape",value:function(e,t){this.path(e),this.ctx.fillStyle=t.toString(),this.ctx.fill()}},{key:"fill",value:function(e){this.ctx.fillStyle=e.toString(),this.ctx.fill()}},{key:"getTarget",value:function(){return Promise.resolve(this.canvas)}},{key:"path",value:function(e){var t=this;this.ctx.beginPath(),Array.isArray(e)?e.forEach(function(e,r){var n=e.type===i.PATH.VECTOR?e:e.start;0===r?t.ctx.moveTo(n.x,n.y):t.ctx.lineTo(n.x,n.y),e.type===i.PATH.BEZIER_CURVE&&t.ctx.bezierCurveTo(e.startControl.x,e.startControl.y,e.endControl.x,e.endControl.y,e.end.x,e.end.y)}):this.ctx.arc(e.x+e.radius,e.y+e.radius,e.radius,0,2*Math.PI,!0),this.ctx.closePath()}},{key:"rectangle",value:function(e,t,r,n,i){this.ctx.fillStyle=i.toString(),this.ctx.fillRect(e,t,r,n)}},{key:"renderLinearGradient",value:function(e,t){var r=this.ctx.createLinearGradient(e.left+t.direction.x1,e.top+t.direction.y1,e.left+t.direction.x0,e.top+t.direction.y0);A(t,r),this.ctx.fillStyle=r,this.ctx.fillRect(e.left,e.top,e.width,e.height)}},{key:"renderRadialGradient",value:function(e,t){var r=this,n=e.left+t.center.x,i=e.top+t.center.y,o=this.ctx.createRadialGradient(n,i,0,n,i,t.radius.x);if(o)if(A(t,o),this.ctx.fillStyle=o,t.radius.x!==t.radius.y){var a=e.left+.5*e.width,s=e.top+.5*e.height,c=t.radius.y/t.radius.x,u=1/c;this.transform(a,s,[1,0,0,c,0,0],function(){return r.ctx.fillRect(e.left,u*(e.top-s)+s,e.width,e.height*u)})}else this.ctx.fillRect(e.left,e.top,e.width,e.height)}},{key:"renderRepeat",value:function(e,t,r,n,i){this.path(e),this.ctx.fillStyle=this.ctx.createPattern(this.resizeImage(t,r),"repeat"),this.ctx.translate(n,i),this.ctx.fill(),this.ctx.translate(-n,-i)}},{key:"renderTextNode",value:function(e,t,r,n,i){var A=this;this.ctx.font=[r.fontStyle,r.fontVariant,r.fontWeight,r.fontSize,r.fontFamily].join(" "),e.forEach(function(e){if(A.ctx.fillStyle=t.toString(),i&&e.text.trim().length?i.slice(0).reverse().forEach(function(t){A.ctx.shadowColor=t.color.toString(),A.ctx.shadowOffsetX=t.offsetX*A.options.scale,A.ctx.shadowOffsetY=t.offsetY*A.options.scale,A.ctx.shadowBlur=t.blur,A.ctx.fillText(e.text,e.bounds.left,e.bounds.top+e.bounds.height)}):A.ctx.fillText(e.text,e.bounds.left,e.bounds.top+e.bounds.height),null!==n){var a=n.textDecorationColor||t;n.textDecorationLine.forEach(function(t){switch(t){case o.TEXT_DECORATION_LINE.UNDERLINE:var n=A.options.fontMetrics.getMetrics(r).baseline;A.rectangle(e.bounds.left,Math.round(e.bounds.top+e.bounds.height-n),e.bounds.width,1,a);break;case o.TEXT_DECORATION_LINE.OVERLINE:A.rectangle(e.bounds.left,Math.round(e.bounds.top),e.bounds.width,1,a);break;case o.TEXT_DECORATION_LINE.LINE_THROUGH:var i=A.options.fontMetrics.getMetrics(r).middle;A.rectangle(e.bounds.left,Math.ceil(e.bounds.top+i),e.bounds.width,1,a)}})}})}},{key:"resizeImage",value:function(e,t){if(e.width===t.width&&e.height===t.height)return e;var r=this.canvas.ownerDocument.createElement("canvas");return r.width=t.width,r.height=t.height,r.getContext("2d").drawImage(e,0,0,e.width,e.height,0,0,t.width,t.height),r}},{key:"setOpacity",value:function(e){this.ctx.globalAlpha=e}},{key:"transform",value:function(e,t,r,n){this.ctx.save(),this.ctx.translate(e,t),this.ctx.transform(r[0],r[1],r[2],r[3],r[4],r[5]),this.ctx.translate(-e,-t),n(),this.ctx.restore()}}]),e}();t.default=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();var i=function(){function e(t,r,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.enabled=t,this.start=n||Date.now(),this.id=r}return n(e,[{key:"child",value:function(t){return new e(this.enabled,t,this.start)}},{key:"log",value:function(){if(this.enabled&&window.console&&window.console.log){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];Function.prototype.bind.call(window.console.log,window.console).apply(window.console,[Date.now()-this.start+"ms",this.id?"html2canvas ("+this.id+"):":"html2canvas:"].concat([].slice.call(t,0)))}}},{key:"error",value:function(){if(this.enabled&&window.console&&window.console.error){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];Function.prototype.bind.call(window.console.error,window.console).apply(window.console,[Date.now()-this.start+"ms",this.id?"html2canvas ("+this.id+"):":"html2canvas:"].concat([].slice.call(t,0)))}}}]),e}();t.default=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parsePadding=t.PADDING_SIDES=void 0;var n,i=r(16),o=(n=i)&&n.__esModule?n:{default:n};t.PADDING_SIDES={TOP:0,RIGHT:1,BOTTOM:2,LEFT:3};var A=["top","right","bottom","left"];t.parsePadding=function(e){return A.map(function(t){return new o.default(e.getPropertyValue("padding-"+t))})}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=t.OVERFLOW_WRAP={NORMAL:0,BREAK_WORD:1};t.parseOverflowWrap=function(e){switch(e){case"break-word":return n.BREAK_WORD;case"normal":default:return n.NORMAL}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=t.POSITION={STATIC:0,RELATIVE:1,ABSOLUTE:2,FIXED:3,STICKY:4};t.parsePosition=function(e){switch(e){case"relative":return n.RELATIVE;case"absolute":return n.ABSOLUTE;case"fixed":return n.FIXED;case"sticky":return n.STICKY}return n.STATIC}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=t.TEXT_TRANSFORM={NONE:0,LOWERCASE:1,UPPERCASE:2,CAPITALIZE:3};t.parseTextTransform=function(e){switch(e){case"uppercase":return n.UPPERCASE;case"lowercase":return n.LOWERCASE;case"capitalize":return n.CAPITALIZE}return n.NONE}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.reformatInputBounds=t.inlineSelectElement=t.inlineTextAreaElement=t.inlineInputElement=t.getInputBorderRadius=t.INPUT_BACKGROUND=t.INPUT_BORDERS=t.INPUT_COLOR=void 0;var n=l(r(42)),i=r(28),o=r(59),A=l(r(171)),a=l(r(40)),s=l(r(13)),c=l(r(16)),u=(r(14),r(94),r(21));function l(e){return e&&e.__esModule?e:{default:e}}t.INPUT_COLOR=new s.default([42,42,42]);var h=new s.default([165,165,165]),d=new s.default([222,222,222]),f={borderWidth:1,borderColor:h,borderStyle:o.BORDER_STYLE.SOLID},p=(t.INPUT_BORDERS=[f,f,f,f],t.INPUT_BACKGROUND={backgroundColor:d,backgroundImage:[],backgroundClip:i.BACKGROUND_CLIP.PADDING_BOX,backgroundOrigin:i.BACKGROUND_ORIGIN.PADDING_BOX},new c.default("50%")),g=[p,p],B=[g,g,g,g],w=new c.default("3px"),y=[w,w],v=[y,y,y,y],m=(t.getInputBorderRadius=function(e){return"radio"===e.type?B:v},t.inlineInputElement=function(e,t){if("radio"===e.type||"checkbox"===e.type){if(e.checked){var r=Math.min(t.bounds.width,t.bounds.height);t.childNodes.push("checkbox"===e.type?[new a.default(t.bounds.left+.39363*r,t.bounds.top+.79*r),new a.default(t.bounds.left+.16*r,t.bounds.top+.5549*r),new a.default(t.bounds.left+.27347*r,t.bounds.top+.44071*r),new a.default(t.bounds.left+.39694*r,t.bounds.top+.5649*r),new a.default(t.bounds.left+.72983*r,t.bounds.top+.23*r),new a.default(t.bounds.left+.84*r,t.bounds.top+.34085*r),new a.default(t.bounds.left+.39363*r,t.bounds.top+.79*r)]:new A.default(t.bounds.left+r/4,t.bounds.top+r/4,r/4))}}else m(b(e),e,t,!1)},t.inlineTextAreaElement=function(e,t){m(e.value,e,t,!0)},t.inlineSelectElement=function(e,t){var r=e.options[e.selectedIndex||0];m(r&&r.text||"",e,t,!1)},t.reformatInputBounds=function(e){return e.width>e.height?(e.left+=(e.width-e.height)/2,e.width=e.height):e.width<e.height&&(e.top+=(e.height-e.width)/2,e.height=e.width),e},function(e,t,r,i){var o=t.ownerDocument.body;if(e.length>0&&o){var A=t.ownerDocument.createElement("html2canvaswrapper");(0,u.copyCSSStyles)(t.ownerDocument.defaultView.getComputedStyle(t,null),A),A.style.position="absolute",A.style.left=r.bounds.left+"px",A.style.top=r.bounds.top+"px",i||(A.style.whiteSpace="nowrap");var a=t.ownerDocument.createTextNode(e);A.appendChild(a),o.appendChild(A),r.childNodes.push(n.default.fromTextNode(a,r)),o.removeChild(A)}}),b=function(e){var t="password"===e.type?new Array(e.value.length+1).join(""):e.value;return 0===t.length?e.placeholder||"":t}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseTextBounds=t.TextBounds=void 0;var n,i=r(14),o=r(58),A=r(43),a=(n=A)&&n.__esModule?n:{default:n},s=r(96);var c=t.TextBounds=function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.text=t,this.bounds=r},u=(t.parseTextBounds=function(e,t,r){for(var n=0!==t.style.letterSpacing?(0,s.toCodePoints)(e).map(function(e){return(0,s.fromCodePoint)(e)}):(0,s.breakWords)(e,t),i=n.length,A=r.parentNode?r.parentNode.ownerDocument.defaultView:null,h=A?A.pageXOffset:0,d=A?A.pageYOffset:0,f=[],p=0,g=0;g<i;g++){var B=n[g];if(t.style.textDecoration!==o.TEXT_DECORATION.NONE||B.trim().length>0)if(a.default.SUPPORT_RANGE_BOUNDS)f.push(new c(B,l(r,p,B.length,h,d)));else{var w=r.splitText(B.length);f.push(new c(B,u(r,h,d))),r=w}else a.default.SUPPORT_RANGE_BOUNDS||(r=r.splitText(B.length));p+=B.length}return f},function(e,t,r){var n=e.ownerDocument.createElement("html2canvaswrapper");n.appendChild(e.cloneNode(!0));var o=e.parentNode;if(o){o.replaceChild(n,e);var A=(0,i.parseBounds)(n,t,r);return n.firstChild&&o.replaceChild(n.firstChild,n),A}return new i.Bounds(0,0,0,0)}),l=function(e,t,r,n,o){var A=e.ownerDocument.createRange();return A.setStart(e,t),A.setEnd(e,t+r),i.Bounds.fromClientRect(A.getBoundingClientRect(),n,o)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();var i=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.element=t}return n(e,[{key:"render",value:function(e){var t=this;this.options=e,this.canvas=document.createElement("canvas"),this.ctx=this.canvas.getContext("2d"),this.canvas.width=Math.floor(e.width)*e.scale,this.canvas.height=Math.floor(e.height)*e.scale,this.canvas.style.width=e.width+"px",this.canvas.style.height=e.height+"px",e.logger.log("ForeignObject renderer initialized ("+e.width+"x"+e.height+" at "+e.x+","+e.y+") with scale "+e.scale);var r=o(Math.max(e.windowWidth,e.width)*e.scale,Math.max(e.windowHeight,e.height)*e.scale,e.scrollX*e.scale,e.scrollY*e.scale,this.element);return A(r).then(function(r){return e.backgroundColor&&(t.ctx.fillStyle=e.backgroundColor.toString(),t.ctx.fillRect(0,0,e.width*e.scale,e.height*e.scale)),t.ctx.drawImage(r,-e.x*e.scale,-e.y*e.scale),t.canvas})}}]),e}();t.default=i;var o=t.createForeignObjectSVG=function(e,t,r,n,i){var o="http://www.w3.org/2000/svg",A=document.createElementNS(o,"svg"),a=document.createElementNS(o,"foreignObject");return A.setAttributeNS(null,"width",e),A.setAttributeNS(null,"height",t),a.setAttributeNS(null,"width","100%"),a.setAttributeNS(null,"height","100%"),a.setAttributeNS(null,"x",r),a.setAttributeNS(null,"y",n),a.setAttributeNS(null,"externalResourcesRequired","true"),A.appendChild(a),a.appendChild(i),A},A=t.loadSerializedSVG=function(e){return new Promise(function(t,r){var n=new Image;n.onload=function(){return t(n)},n.onerror=r,n.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent((new XMLSerializer).serializeToString(e))})}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.breakWords=t.fromCodePoint=t.toCodePoints=void 0;var n=r(167);Object.defineProperty(t,"toCodePoints",{enumerable:!0,get:function(){return n.toCodePoints}}),Object.defineProperty(t,"fromCodePoint",{enumerable:!0,get:function(){return n.fromCodePoint}});var i,o=r(20),A=((i=o)&&i.__esModule,r(90));t.breakWords=function(e,t){for(var r=(0,n.LineBreaker)(e,{lineBreak:t.style.lineBreak,wordBreak:t.style.overflowWrap===A.OVERFLOW_WRAP.BREAK_WORD?"break-word":t.style.wordBreak}),i=[],o=void 0;!(o=r.next()).done;)i.push(o.value.slice());return i}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FontMetrics=void 0;var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=r(21);t.FontMetrics=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._data={},this._document=t}return n(e,[{key:"_parseMetrics",value:function(e){var t=this._document.createElement("div"),r=this._document.createElement("img"),n=this._document.createElement("span"),o=this._document.body;if(!o)throw new Error("");t.style.visibility="hidden",t.style.fontFamily=e.fontFamily,t.style.fontSize=e.fontSize,t.style.margin="0",t.style.padding="0",o.appendChild(t),r.src=i.SMALL_IMAGE,r.width=1,r.height=1,r.style.margin="0",r.style.padding="0",r.style.verticalAlign="baseline",n.style.fontFamily=e.fontFamily,n.style.fontSize=e.fontSize,n.style.margin="0",n.style.padding="0",n.appendChild(this._document.createTextNode("Hidden Text")),t.appendChild(n),t.appendChild(r);var A=r.offsetTop-n.offsetTop+2;t.removeChild(n),t.appendChild(this._document.createTextNode("Hidden Text")),t.style.lineHeight="normal",r.style.verticalAlign="super";var a=r.offsetTop-t.offsetTop+2;return o.removeChild(t),{baseline:A,middle:a}}},{key:"getMetrics",value:function(e){var t=e.fontFamily+" "+e.fontSize;return void 0===this._data[t]&&(this._data[t]=this._parseMetrics(e)),this._data[t]}}]),e}()},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Proxy=void 0;var n,i=r(43),o=(n=i)&&n.__esModule?n:{default:n};t.Proxy=function(e,t){if(!t.proxy)return Promise.reject(null);var r=t.proxy;return new Promise(function(n,i){var A=o.default.SUPPORT_CORS_XHR&&o.default.SUPPORT_RESPONSE_TYPE?"blob":"text",a=o.default.SUPPORT_CORS_XHR?new XMLHttpRequest:new XDomainRequest;if(a.onload=function(){if(a instanceof XMLHttpRequest)if(200===a.status)if("text"===A)n(a.response);else{var e=new FileReader;e.addEventListener("load",function(){return n(e.result)},!1),e.addEventListener("error",function(e){return i(e)},!1),e.readAsDataURL(a.response)}else i("");else n(a.responseText)},a.onerror=i,a.open("GET",r+"?url="+encodeURIComponent(e)+"&responseType="+A),"text"!==A&&a instanceof XMLHttpRequest&&(a.responseType=A),t.imageTimeout){var s=t.imageTimeout;a.timeout=s,a.ontimeout=function(){return i("")}}a.send()})}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,i=Math.min,o=Math.max,A=document.createElement("canvas");t.renderGlyph=function(e,t,r,a){if(e=e[0],(A.width<t||A.height<r)&&(A.width=t,A.height=r),!n){var s=A.getContext("2d");if(!s)return null;n=s}n.clearRect(0,0,A.width,A.height),n.font=a,n.fillStyle="white",n.fillText(e,t/2,r/2);var c=function(e){for(var t=e.canvas,r=t.width,n=t.height,A=e.getImageData(0,0,r,n).data,a=!1,s=Number.MAX_SAFE_INTEGER,c=Number.MAX_SAFE_INTEGER,u=Number.MIN_SAFE_INTEGER,l=Number.MIN_SAFE_INTEGER,h=0;h<r;++h)for(var d=0;d<n;++d)A[d*(4*r)+4*h]>0&&(a=!0,s=i(s,d),c=i(c,h),u=o(u,h),l=o(l,d));return a?(l+=2,u+=2,c-=1,s=o(s-=1,0),{minX:c=o(c,0),minY:s,maxX:u,maxY:l}):null}(n);if(!c)return{data:n.getImageData(0,0,1,1),size:[0,0]};var u=c.maxX-c.minX,l=c.maxY-c.minY;return{data:n.getImageData(c.minX,c.minY,u,l),size:[u,l]}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.TEXCOORDS=0]="TEXCOORDS",e[e.IMAGE_SIZE=1]="IMAGE_SIZE"}(t.FontResourceRequestFetch||(t.FontResourceRequestFetch={}))},function(e,t,r){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},i=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(i,o){function A(e){try{s(n.next(e))}catch(e){o(e)}}function a(e){try{s(n.throw(e))}catch(e){o(e)}}function s(e){e.done?i(e.value):new r(function(t){t(e.value)}).then(A,a)}s((n=n.apply(e,t||[])).next())})},o=this&&this.__generator||function(e,t){var r,n,i,o,A={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;A;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return A.label++,{value:o[1],done:!1};case 5:A.label++,n=o[1],o=[0];continue;case 7:o=A.ops.pop(),A.trys.pop();continue;default:if(!(i=(i=A.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){A=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){A.label=o[1];break}if(6===o[0]&&A.label<i[1]){A.label=i[1],i=o;break}if(i&&A.label<i[2]){A.label=i[2],A.ops.push(o);break}i[2]&&A.ops.pop(),A.trys.pop();continue}o=t.call(e,A)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};Object.defineProperty(t,"__esModule",{value:!0});var A=r(7),a=r(6),s=r(102),c=r(180),u=r(63),l=r(27),h=r(19),d=r(2)("performance"),f=new h.SubTexture({aspectRatio:0,atlasBL:[0,0],atlasBR:[0,0],texture:null,atlasTL:[0,0],atlasTR:[0,0],heightOnAtlas:0,isValid:!1,pixelHeight:0,pixelWidth:0,widthOnAtlas:0});var p=function(){function e(){this.allAtlas=new Map}return e.prototype.createAtlas=function(e){return i(this,void 0,void 0,function(){var t;return o(this,function(r){return t=new u.Atlas(e),this.allAtlas.set(t.id,t),d("Atlas Created-> %o",t),[2,t]})})},e.prototype.destroy=function(){this.allAtlas.forEach(function(e){return e.destroy()})},e.prototype.destroyAtlas=function(e){var t=this.allAtlas.get(e);t&&t.destroy()},e.prototype.setDefaultImage=function(e,t){return e=Object.assign(e,f,{atlasReferenceID:t})},e.prototype.draw=function(e,t){return i(this,void 0,Promise,function(){var r,i,A,s,u,f,p;return o(this,function(o){switch(o.label){case 0:return r=e.id,t.disposeResource?[2,!0]:e.resourceReferences.get(t.source)?[2,!0]:(t.texture=t.texture||new h.SubTexture,t.texture.isValid=!0,e.resourceReferences.set(t.source,{subtexture:t.texture,count:0}),[4,this.loadImage(t)]);case 1:if(i=o.sent(),A=t.texture,i&&((g=A)&&g.isValid&&g.pixelWidth&&g.pixelHeight)){if(s=new a.Bounds({bottom:A.pixelHeight,left:0,right:A.pixelWidth,top:0}),(u={data:A,bounds:s}).bounds.width+=1,u.bounds.height+=1,f=e.packing,!(p=f.insert(u))){if(!this.repackResources(e))return console.error("Repacking the atlas failed. Some resources may be in an undefined state. Consider making another atlas."),[2,!1];f=e.packing,p=f.insert(u)}return p?(p.data=A,l.PackNode.applyToSubTexture(f,p,A,{top:0,left:0,right:1,bottom:1}),A.texture=e.texture,A.source=i,A.atlasRegion=n({},p.bounds,{y:e.height-p.bounds.y-p.bounds.height}),e.texture.update(i,A.atlasRegion),i instanceof HTMLVideoElement&&(A.video={monitor:new c.VideoTextureMonitor(i,A)}),[2,!0]):(console.error("Could not fit resource into atlas",t),t.texture=this.setDefaultImage(A,r),[2,!1])}return A&&!A.isValid?d("Resource was invalidated during load:",t):console.error("Could not load resource:",t),t.texture&&(t.texture=this.setDefaultImage(t.texture,r)),[2,!1]}var g})})},e.prototype.getAtlasTexture=function(e){return this.allAtlas.get(e)},e.prototype.loadImage=function(e){return i(this,void 0,Promise,function(){var t,r,n,i;return o(this,function(o){switch(o.label){case 0:return t=e.texture||new h.SubTexture,r=e.source,e.texture=t,!1===e.texture.isValid?[2,null]:r instanceof HTMLImageElement?[4,new Promise(function(e){if(r instanceof HTMLImageElement){var n=r;if(n.width&&n.height)return s.ImageRasterizer.calculateImageSize(n),t.pixelWidth=n.width,t.pixelHeight=n.height,t.aspectRatio=n.width/n.height,void e(n);n?(n.onload=function(){t.pixelWidth=n.width,t.pixelHeight=n.height,t.aspectRatio=n.width/n.height,n.onload=null,e(n)},n.onerror=function(){n.onload=null,e(null)}):e(null)}})]:[3,4];case 1:return(i=o.sent())&&void 0!==e.rasterizationScale&&1!==e.rasterizationScale?[4,s.ImageRasterizer.resizeImage(i,e.rasterizationScale||1)]:[3,3];case 2:i=o.sent(),o.label=3;case 3:return[2,i];case 4:return r instanceof HTMLVideoElement?0===r.videoHeight||0===r.videoWidth?(console.warn("Video requests to the atlas manager MUST have the video completely loaded and ready for loading","There are too many caveats to automate video loading at this low of a level to have it prepped properly for","use in the texture for all browsers. Consider handling video resources at the layer level to have them","prepped for use."),[2,null]):(t.pixelWidth=r.videoWidth,t.pixelHeight=r.videoHeight,t.aspectRatio=r.videoWidth/r.videoHeight,[2,r]):[3,5];case 5:return"string"!=typeof r?[3,9]:(n=r,[4,new Promise(function(e){var r=new Image;r.onload=function(){t.pixelWidth=r.width,t.pixelHeight=r.height,t.aspectRatio=r.width/r.height,r.onload=null,e(r)},r.onerror=function(){e(null)},r.src=n})]);case 6:return(i=o.sent())&&void 0!==e.rasterizationScale&&1!==e.rasterizationScale?[4,s.ImageRasterizer.resizeImage(i,e.rasterizationScale||1)]:[3,8];case 7:i=o.sent(),o.label=8;case 8:return[3,12];case 9:return(i=r)&&void 0!==e.rasterizationScale&&1!==e.rasterizationScale?[4,s.ImageRasterizer.resizeImage(i,e.rasterizationScale||1)]:[3,11];case 10:i=o.sent(),o.label=11;case 11:return[2,i];case 12:return[2,null]}})})},e.prototype.repackResources=function(e){if(!this.renderer)return console.warn("Attempted to repack resources for an atlas, but no renderer has been specified for this manager yet."),!1;for(var t=[e.packing],r=[],n=0,i=new Map;n<t.length;){var o=t[n];n++,o.data&&o.data.texture&&(r.push(o),i.set(o.bounds,new a.Bounds(o.bounds))),o.child[0]&&t.push(o.child[0]),o.child[1]&&t.push(o.child[1])}if(r.sort(function(e,t){return Math.max(t.bounds.width,t.bounds.height)-Math.max(e.bounds.width,e.bounds.height)}),r.length<=0)return e.packing=new l.PackNode(0,0,e.width,e.height),!0;var s=new A.Texture(e.texture);s.data={buffer:new Uint8Array(e.width*e.height*4),width:e.width,height:e.height};for(var c=new l.PackNode(0,0,e.width,e.height),u=!1,d=0,f=r.length;d<f;++d){if((y=r[d]).data){y.bounds.x=0,y.bounds.y=0;var p=c.insert({bounds:y.bounds,data:y.data});p?l.PackNode.applyToSubTexture(c,p,y.data):(console.warn("When repacking the atlas, an existing node was unable to be repacked",y),u=!0)}else console.warn("Attempted to repack a node with no valid data.")}if(u)return!1;var g=new Float32Array(2*r.length*6),B=new Float32Array(2*r.length*6),w=new h.SubTexture;for(d=0,f=r.length;d<f;++d){var y=r[d],v=i.get(y.bounds),m=y.data;if(v&&m){l.PackNode.applyToSubTexture(c,v,w);var b=2*d*6;g[b]=2*m.atlasTL[0]-1,g[b+1]=2*m.atlasTL[1]-1,g[b+2]=2*m.atlasTR[0]-1,g[b+3]=2*m.atlasTR[1]-1,g[b+4]=2*m.atlasBL[0]-1,g[b+5]=2*m.atlasBL[1]-1,g[b+6]=2*m.atlasTR[0]-1,g[b+7]=2*m.atlasTR[1]-1,g[b+8]=2*m.atlasBR[0]-1,g[b+9]=2*m.atlasBR[1]-1,g[b+10]=2*m.atlasBL[0]-1,g[b+11]=2*m.atlasBL[1]-1,B[b]=w.atlasTL[0],B[b+1]=w.atlasTL[1],B[b+2]=w.atlasTR[0],B[b+3]=w.atlasTR[1],B[b+4]=w.atlasBL[0],B[b+5]=w.atlasBL[1],B[b+6]=w.atlasTR[0],B[b+7]=w.atlasTR[1],B[b+8]=w.atlasBR[0],B[b+9]=w.atlasBR[1],B[b+10]=w.atlasBL[0],B[b+11]=w.atlasBL[1],m.texture=s}else console.warn("While repacking there was an issue finding the previous bounds and the next texture to use",v,m)}var E=new A.Geometry,C=new A.Attribute(g,2),T=new A.Attribute(B,2);E.addAttribute("position",C),E.addAttribute("texCoord",T);var U=new A.Material({culling:A.GLSettings.Material.CullSide.NONE,uniforms:{texture:{type:A.MaterialUniformType.TEXTURE,value:e.texture}},fragmentShader:"\n        precision highp float;\n\n        uniform sampler2D texture;\n        varying vec2 _texCoord;\n\n        void main() {\n          gl_FragColor = texture2D(texture, _texCoord);\n        }\n      ",vertexShader:"\n        precision highp float;\n\n        attribute vec2 position;\n        attribute vec2 texCoord;\n        varying vec2 _texCoord;\n\n        void main() {\n          _texCoord = texCoord;\n          gl_Position = vec4(position, 0.0, 1.0);\n        }\n      "}),_=new A.Model(E,U);_.vertexCount=6*r.length,_.drawMode=A.GLSettings.Model.DrawMode.TRIANGLES;var Q=new A.RenderTarget({buffers:{color:s},retainTextureTargets:!0}),F=new A.Scene;return F.add(_),this.renderer.setRenderTarget(Q),this.renderer.setViewport(this.renderer.getFullViewport()),this.renderer.setScissor(this.renderer.getFullViewport()),this.renderer.render(F,Q),U.dispose(),E.dispose(),Q.dispose(),e.texture.dispose(),e.texture=s,e.packing=c,!0},e.prototype.updateAtlas=function(e,t){return i(this,void 0,void 0,function(){var r,n,i,A,a;return o(this,function(o){switch(o.label){case 0:if(!(r=this.allAtlas.get(e)))return[3,2];for(n=[],i=0,A=t.length;i<A;++i)(a=t[i]).disposeResource||n.push(this.draw(r,a));return[4,Promise.all(n)];case 1:for(o.sent(),i=0,A=t.length;i<A;++i)(a=t[i]).disposeResource?r.stopUsingResource(a):r.useResource(a);return r.resolveResources(),[3,3];case 2:console.warn("Can not update non-existing atlas:",e,"These resources will not be loaded:",t),o.label=3;case 3:return[2,r]}})})},e}();t.AtlasManager=p},function(e,t,r){"use strict";var n,i=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(i,o){function A(e){try{s(n.next(e))}catch(e){o(e)}}function a(e){try{s(n.throw(e))}catch(e){o(e)}}function s(e){e.done?i(e.value):new r(function(t){t(e.value)}).then(A,a)}s((n=n.apply(e,t||[])).next())})},o=this&&this.__generator||function(e,t){var r,n,i,o,A={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;A;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return A.label++,{value:o[1],done:!1};case 5:A.label++,n=o[1],o=[0];continue;case 7:o=A.ops.pop(),A.trys.pop();continue;default:if(!(i=(i=A.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){A=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){A.label=o[1];break}if(6===o[0]&&A.label<i[1]){A.label=i[1],i=o;break}if(i&&A.label<i[2]){A.label=i[2],A.ops.push(o);break}i[2]&&A.ops.pop(),A.trys.pop();continue}o=t.call(e,A)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};Object.defineProperty(t,"__esModule",{value:!0});var A=function(){function e(){}return e.awaitContext=function(){return i(this,void 0,void 0,function(){return o(this,function(e){switch(e.label){case 0:return n?[3,2]:(this.getContext(),[4,new Promise(function(e){return setTimeout(e,10)})]);case 1:return e.sent(),[3,0];case 2:return[2]}})})},e.getContext=function(){n||(n=document.createElement("canvas").getContext("2d"))},e.calculateImageSize=function(e){return i(this,void 0,void 0,function(){return o(this,function(t){switch(t.label){case 0:return[4,this.awaitContext()];case 1:return t.sent(),n?0===e.width||0===e.height?(console.warn("Images provided shoud have valid dimensions! Please ensure the image is loaded first."),[2]):(n.canvas.width=100,n.canvas.height=100,n.drawImage(e,0,0,1,1),[2,[e.width,e.height]]):(console.warn("The Image rasterizer was unable to establish a valid canvas context. Please ensure the system supports contexts and ensure the document is ready first."),[2])}})})},e.resizeImage=function(t,r){return i(this,void 0,void 0,function(){var i;return o(this,function(o){switch(o.label){case 0:return[4,this.awaitContext()];case 1:return o.sent(),n?0===t.width||0===t.height?(console.warn("Images provided shoud have valid dimensions! Please ensure the image is loaded first."),[2,t]):(n.canvas.width=Math.floor(t.width*r),n.canvas.height=Math.floor(t.height*r),t instanceof ImageData?n.putImageData(t,0,0,0,0,n.canvas.width,n.canvas.height):n.drawImage(t,0,0,n.canvas.width,n.canvas.height),(i=new Image).src=n.canvas.toDataURL("image/png"),[4,e.calculateImageSize(i)]):(console.warn("The Image rasterizer was unable to establish a valid canvas context. Please ensure the system supports contexts and ensure the document is ready first."),[2,t]);case 2:return o.sent(),[2,i]}})})},e}();t.ImageRasterizer=A},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(i,o){function A(e){try{s(n.next(e))}catch(e){o(e)}}function a(e){try{s(n.throw(e))}catch(e){o(e)}}function s(e){e.done?i(e.value):new r(function(t){t(e.value)}).then(A,a)}s((n=n.apply(e,t||[])).next())})},A=this&&this.__generator||function(e,t){var r,n,i,o,A={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;A;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return A.label++,{value:o[1],done:!1};case 5:A.label++,n=o[1],o=[0];continue;case 7:o=A.ops.pop(),A.trys.pop();continue;default:if(!(i=(i=A.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){A=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){A.label=o[1];break}if(6===o[0]&&A.label<i[1]){A.label=i[1],i=o;break}if(i&&A.label<i[2]){A.label=i[2],A.ops.push(o);break}i[2]&&A.ops.pop(),A.trys.pop();continue}o=t.call(e,A)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};Object.defineProperty(t,"__esModule",{value:!0});var a=r(0),s=r(1),c=r(38),u=r(63),l=r(101),h=r(19),d=r(62),f=function(e){function t(t){var r=e.call(this)||this;return r.resources=new Map,r.requestQueue=new Map,r.requestLookup=new Map,r.atlasManager=t&&t.atlasManager||new l.AtlasManager,r}return i(t,e),Object.defineProperty(t.prototype,"webGLRenderer",{get:function(){return this._webGLRenderer},set:function(e){this._webGLRenderer=e,this.atlasManager.renderer=e},enumerable:!0,configurable:!0}),t.prototype.dequeueRequests=function(){return o(this,void 0,void 0,function(){var e,t,r,n,i,o,a,c,u;return A(this,function(l){switch(l.label){case 0:e=!1,t=[],this.requestQueue.forEach(function(e,r){t.push([r,e])}),this.requestQueue.clear(),r=function(t,r){var i,o;return A(this,function(A){switch(A.label){case 0:return r.length>0?(e=!0,i=r.slice(0),r.length=0,[4,n.atlasManager.updateAtlas(t,i)]):[3,2];case 1:A.sent(),(o=n.requestLookup.get(t))&&i.forEach(function(e){var t=o.get(e);if(o.delete(e),t&&!e.disposeResource){for(var r=0,n=t.length;r<n;++r){var i=t[r],A=i[0],a=i[1];A.managesInstance(a)&&(a.active=!0)}s.nextFrame(function(){for(var e=new Set,r=0,n=t.length;r<n;++r){var i=t[r][1];e.has(i)||(e.add(i),i.active=!0,i.resourceTrigger())}})}}),A.label=2;case 2:return[2]}})},n=this,i=0,o=t,l.label=1;case 1:return i<o.length?(a=o[i],c=a[0],u=a[1],[5,r(c,u)]):[3,4];case 2:l.sent(),l.label=3;case 3:return i++,[3,1];case 4:return[2,e]}})})},t.prototype.destroy=function(){this.atlasManager.destroy()},t.prototype.destroyResource=function(e){this.resources.get(e.key)&&(this.atlasManager.destroyAtlas(e.key),this.resources.delete(e.key))},t.prototype.getAtlasTexture=function(e){var t=this.atlasManager.getAtlasTexture(e);return t?t.texture:null},t.prototype.getResource=function(e){return this.resources.get(e)||null},t.prototype.getIOExpansion=function(){return[new d.TextureIOExpansion(a.ResourceType.ATLAS,this)]},t.prototype.initResource=function(e){return o(this,void 0,void 0,function(){var t;return A(this,function(r){switch(r.label){case 0:return u.isAtlasResource(e)?[4,this.atlasManager.createAtlas(e)]:[3,2];case 1:t=r.sent(),this.resources.set(e.key,t),r.label=2;case 2:return[2]}})})},t.prototype.request=function(e,t,r,n){var i=r.key||"",o=r.texture;if(o)return h.subTextureIOValue(o);var A=this.requestLookup.get(i);if(A){var a=A.get(r);if(a)return a.push([e,t]),t.active=!1,h.subTextureIOValue(o)}else A=new Map,this.requestLookup.set(i,A);r.disposeResource||(t.active=!1);var s=this.requestQueue.get(i);return s||(s=[],this.requestQueue.set(i,s)),s.push(r),A.set(r,[[e,t]]),h.subTextureIOValue(o)},t.prototype.updateResource=function(e){u.isAtlasResource(e)},t}(c.BaseResourceManager);t.AtlasResourceManager=f},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(0),i=r(10),o=function(){function e(e){if(this._uid=i.uid(),this.cleanObservation=new Map,this.instanceChanges=new Map,this.allowChanges=!0,this.resolveContext="",e)for(var t=0,r=e.length;t<r;++t){var n=e[t];this.add(n)}}return Object.defineProperty(e.prototype,"uid",{get:function(){return this._uid},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"changeList",{get:function(){this.allowChanges=!1;var e=[];return this.instanceChanges.forEach(function(t){return e.push(t)}),e},enumerable:!0,configurable:!0}),e.prototype.add=function(e){if(this.cleanObservation.get(e.uid))return e;if(this.allowChanges){e.observer=this;var t=e.observableDisposer;this.cleanObservation.set(e.uid,[e,t]),this.instanceChanges.set(e.uid,[e,n.InstanceDiffType.INSERT,e.changes])}return e},e.prototype.clear=function(){var e=this;this.cleanObservation.forEach(function(t){e.remove(t[0])})},e.prototype.destroy=function(){this.cleanObservation.forEach(function(e){e[1]()}),this.cleanObservation.clear(),this.instanceChanges.clear()},e.prototype.instanceUpdated=function(e){this.allowChanges&&this.instanceChanges.set(e.uid,[e,n.InstanceDiffType.CHANGE,e.changes])},e.prototype.remove=function(e){if(this.allowChanges){var t=this.cleanObservation.get(e.uid);t&&(t[1](),this.cleanObservation.delete(e.uid),this.instanceChanges.set(e.uid,[e,n.InstanceDiffType.REMOVE,{}]))}return!1},e.prototype.resolve=function(e){if(this.allowChanges=!0,this.instanceChanges.clear(),this.resolveContext&&this.resolveContext!==e)throw new Error("An instance provider has been issued to two layers. This is not a suppported feature yet and can cause issues.");this.resolveContext=e},e.prototype.sync=function(){var e=this,t=[];this.cleanObservation.forEach(function(r){var i=r[0];e.instanceChanges.set(i.uid,[i,n.InstanceDiffType.INSERT,t])})},e}();t.InstanceProvider=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e){this.delay=0,this.isManualStart=!1,this.isTimeSet=!1,Object.assign(this,e)}return e.prototype.setAutomatic=function(){this.isManualStart=!1,this.isTimeSet=!1},e.prototype.setStart=function(e){e&&(this.start.length!==e.length?console.warn("A manual easing adjustment provided an incompatible value for the easing type."):(this.start=e,this.isManualStart=!0))},e.prototype.setTiming=function(e,t){this.delay=void 0===e?this.delay:e,this.duration=void 0===t?this.duration:t,this.isTimeSet=!0},e}();t.EasingProps=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={};t.emitOnce=function(e,t){var r=n[e]||[t,-1,0];n[e]=r,r[2]++,clearTimeout(r[1]),r[1]=window.setTimeout(function(){t(r[2],e),delete n[e]},1)},t.flushEmitOnce=function(){for(var e in n){var t=n[e];clearTimeout(t[1]),t[0](t[2],e)}n={}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(7),i=r(17);t.generateLayerGeometry=function(e,t,r,o){var A=[];e.bufferType!==i.LayerBufferType.INSTANCE_ATTRIBUTE&&e.bufferType!==i.LayerBufferType.INSTANCE_ATTRIBUTE_PACKING||(t=1);for(var a=0,s=r.length;a<s;++a){var c=r[a];A.push(new Float32Array(c.size*o*t))}var u,l,h,d,f=r.length,p=!1;for(a=0,s=o;a<s;++a)for(var g=0;g<f;++g)if(l=r[g],u=A[g],h=l.update(a),d=h,Array.isArray(d[0]))p=!0;else for(var B=a*l.size,w=B+l.size,y=0;B<w;++B,++y)u[B]=h[y];for(p&&console.warn("A vertex buffer updating method should not use arrays of arrays of numbers."),a=0,s=r.length;a<s;++a)for(var v=r[a].size*o,m=(g=1,t);g<m;++g)A[a].copyWithin(v*g,0,v);if(e.bufferType===i.LayerBufferType.UNIFORM){var b=A[0];for(a=0,s=t;a<s;++a){var E=a*o;for(g=0;g<o;++g)b[g+E]=a}}var C=new n.Geometry;for(a=0,s=r.length;a<s;++a){var T=r[a],U=new n.Attribute(A[a],T.size);T.materialAttribute=U,C.addAttribute(T.name,U)}return C}},function(e,t,r){"use strict";var n,i;Object.defineProperty(t,"__esModule",{value:!0});var o=r(7),A=r(0),a=((n={})[A.UniformSize.ONE]=o.MaterialUniformType.FLOAT,n[A.UniformSize.TWO]=o.MaterialUniformType.VEC2,n[A.UniformSize.THREE]=o.MaterialUniformType.VEC3,n[A.UniformSize.FOUR]=o.MaterialUniformType.VEC4,n[A.UniformSize.MATRIX3]=o.MaterialUniformType.MATRIX3x3,n[A.UniformSize.MATRIX4]=o.MaterialUniformType.MATRIX4x4,n[A.UniformSize.ATLAS]=o.MaterialUniformType.TEXTURE,n),s=((i={})[A.UniformSize.ONE]=[0],i[A.UniformSize.TWO]=[0,0],i[A.UniformSize.THREE]=[0,0,0],i[A.UniformSize.FOUR]=[0,0,0,0],i[A.UniformSize.MATRIX3]=[0,0,0,0,0,0,0,0,0],i[A.UniformSize.MATRIX4]=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],i);function c(e){return{type:a[e.size],value:s[e.size]}}t.generateLayerMaterial=function(e,t,r,n,i){var A=e.getMaterialOptions();Object.assign(A,e.props.materialOptions||{}),A.vertexShader=t,A.fragmentShader=r,A.name=e.id,A.uniforms={};for(var a=0,s=n.length;a<s;++a){var u=n[a],l=c(u);A.uniforms[u.name]=l}for(a=0,s=i.length;a<s;++a){var h=i[a];A.uniforms[h.name]={type:h.type,value:h.value}}return new o.Material(A)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(17),i=r(192);function o(e){return Boolean(e)}function A(e){return Boolean(e)}function a(e){return Boolean(e)}function s(e){return Object.assign({},e,{materialAttribute:null})}function c(e){return Object.assign({},e,{materialUniforms:[]})}t.injectShaderIO=function(e,t,r,u,l,h){!function(e,t,r){if(r){var n=t.instanceAttributes||[],i=t.uniforms||[],o=t.vertexAttributes||[];r.shaderModuleUnits.forEach(function(t){t.instanceAttributes&&(n=n.concat(t.instanceAttributes(e))),t.uniforms&&(i=i.concat(t.uniforms(e))),t.vertexAttributes&&(o=o.concat(t.vertexAttributes(e)))});var A=new Set,a=new Set,s=new Set;i.filter(function(e){return!!e&&(A.has(e.name)?(console.warn("Included shader modules has introduced duplicate uniform names:",e.name,"One will be overridden thus causing a potential crash of the shader."),!1):(A.add(e.name),!0))}),n.filter(function(e){return!!e&&(a.has(e.name)?(console.warn("Included shader modules has introduced duplicate Instance Attribute names:",e.name,"One will be overridden thus causing a potential crash of the shader."),!1):(a.add(e.name),!0))}),o.filter(function(e){return!!e&&(s.has(e.name)?(console.warn("Included shader modules has introduced duplicate Vertex Attribute names:",e.name,"One will be overridden thus causing a potential crash of the shader."),!1):(s.add(e.name),!0))}),t.instanceAttributes=n,t.uniforms=i,t.vertexAttributes=o}}(t,r,h);for(var d=(r.instanceAttributes||[]).filter(o),f=(r.vertexAttributes||[]).filter(A),p=(r.uniforms||[]).filter(a),g=0,B=u.length;g<B;++g){var w=u[g];if(w.validate(t,d,f,p)){var y=w.expand(t,d,f,p);y.instanceAttributes.filter(o).forEach(function(e){return d.push(e)}),y.vertexAttributes.filter(A).forEach(function(e){return f.push(e)}),y.uniforms.filter(a).forEach(function(e){return p.push(e)})}}!function(e,t,r,n){t.forEach(function(n){void 0===n.name&&console.warn("All instance attributes MUST have a name on Layer:",e.id),t.find(function(e){return e!==n&&e.name===n.name})&&console.warn("An instance attribute can not have the same name used more than once:",n.name),r.find(function(e){return e.name===n.name})&&console.warn("An instance attribute and a vertex attribute in a layer can not share the same name:",n.name),n.resource||void 0===n.size&&(console.warn("An instance attribute requires the size to be defined."),console.warn(n))})}(t,d,f);var v=d.slice(0),m=(f||[]).map(s),b=p.map(c);return v.sort(l.sortInstanceAttributes),b.sort(l.sortUniforms),m.sort(l.sortVertexAttributes),i.packAttributes(v),n.getLayerBufferType(e,t,f,v),{instanceAttributes:v,uniforms:b,vertexAttributes:m}}},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o,A=r(111),a=r(31),s=[],c=Math.min,u=Math.max;!function(e){e[e.PARTIAL=0]="PARTIAL",e[e.FULL=1]="FULL"}(o||(o={}));var l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.diffMode=o.PARTIAL,t.bufferAttributeUpdateRange={},t.bufferAttributeWillUpdate={},t.updateInstance=t.updateInstancePartial,t}return i(t,e),t.prototype.addInstance=function(e,t,r,n){if(n)e.changeInstance(e,t,s,n);else{var i=e.layer.bufferManager.add(t);a.isBufferLocationGroup(i)&&(t.active=!0,t.easingId=e.layer.easingId,e.updateInstance(e.layer,t,s,i))}},t.prototype.changeInstance=function(e,t,r,n){n?e.updateInstance(e.layer,t,r,n):e.addInstance(e,t,s,n)},t.prototype.removeInstance=function(e,t,r,n){n&&(t.active=!1,t.clearEasing(),e.updateInstance(e.layer,t,s,n),e.layer.bufferManager.remove(t))},t.prototype.updateInstancePartial=function(e,t,r,n){var i,o,A,a,s,l,h=n.propertyToBufferLocation,d=this.bufferAttributeUpdateRange;if(t.active){(0===r.length||t.reactivate)&&(r=this.bufferManager.getUpdateAllPropertyIdList());for(var f=0,p=r.length;f<p;++f)if(l=(s=(i=h[r[f]]).attribute).packUID||s.uid,o=s.update(t),i.buffer.value.set(o,i.range[0]),(A=d[l]||[null,Number.MAX_SAFE_INTEGER,Number.MIN_SAFE_INTEGER])[0]=s,A[1]=c(i.range[0],A[1]),A[2]=u(i.range[1],A[2]),d[l]=A,i.childLocations)for(var g=0,B=(a=i.childLocations).length;g<B;++g)l=(i=a[g]).attribute.packUID||i.attribute.uid,o=i.attribute.update(t),i.buffer.value.set(o,i.range[0]),(A=d[l]||[null,Number.MAX_SAFE_INTEGER,Number.MIN_SAFE_INTEGER])[0]=i.attribute,A[1]=c(i.range[0],A[1]),A[2]=u(i.range[1],A[2]),d[l]=A}else l=(s=(i=h[this.bufferManager.getActiveAttributePropertyId()]).attribute).packUID||s.uid,o=s.update(t),i.buffer.value.set(o,i.range[0]),(A=d[l]||[null,Number.MAX_SAFE_INTEGER,Number.MIN_SAFE_INTEGER])[0]=s,A[1]=c(i.range[0],A[1]),A[2]=u(i.range[1],A[2]),d[l]=A;t.reactivate=!1},t.prototype.updateInstanceFull=function(e,t,r,n){var i,o,A,a,s=n.propertyToBufferLocation,c=this.bufferAttributeWillUpdate;if(t.active){(0===r.length||t.reactivate)&&(r=this.bufferManager.getUpdateAllPropertyIdList());for(var u=0,l=r.length;u<l;++u)if(o=(a=(i=s[r[u]]).attribute).update(t),i.buffer.value.set(o,i.range[0]),c[a.packUID||a.uid]=a,i.childLocations)for(var h=0,d=(A=i.childLocations).length;h<d;++h)o=(a=(i=A[h]).attribute).update(t),i.buffer.value.set(o,i.range[0]),c[a.packUID||a.uid]=a}else o=(a=(i=s[this.bufferManager.getActiveAttributePropertyId()]).attribute).update(t),i.buffer.value.set(o,i.range[0]),c[a.packUID||a.uid]=a;t.reactivate=!1},t.prototype.commit=function(){if(this.diffMode===o.PARTIAL)for(var e=0,t=(n=Object.values(this.bufferAttributeUpdateRange)).length;e<t;++e){var r=n[e];r[0].bufferAttribute.updateRange={count:r[2]-r[1],offset:r[1]}}else{var n;for(e=0,t=(n=Object.values(this.bufferAttributeWillUpdate)).length;e<t;++e){n[e].bufferAttribute.updateRange={count:-1,offset:0}}}this.bufferAttributeUpdateRange={}},t.prototype.incomingChangeList=function(e){0===e.length?this.diffMode=o.PARTIAL:e.length>.7*this.bufferManager.getInstanceCount()?this.diffMode=o.FULL:this.diffMode=o.PARTIAL,this.diffMode===o.PARTIAL?this.updateInstance=this.updateInstancePartial:this.updateInstance=this.updateInstanceFull},t}(A.BaseDiffProcessor);t.InstanceAttributeDiffProcessor=l},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e,t){this.layer=e,this.bufferManager=t};t.BaseDiffProcessor=n},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o=r(111),A=r(65),a=[],s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.addInstance=function(e,t,r,n){if(n)e.changeInstance(e,t,a,n);else{var i=e.layer.bufferManager.add(t);A.isUniformBufferLocation(i)&&(t.active=!0,t.easingId=e.layer.easingId,e.updateInstance(e.layer,t,i))}},t.prototype.changeInstance=function(e,t,r,n){n?e.updateInstance(e.layer,t,n):e.addInstance(e,t,a,n)},t.prototype.removeInstance=function(e,t,r,n){n&&(t.active=!1,t.clearEasing(),e.updateInstance(e.layer,t,n),e.layer.bufferManager.remove(t))},t.prototype.updateInstance=function(e,t,r){if(t.active){for(var n=r.buffer,i=r.range[0],o=n.value,A=void 0,a=void 0,s=void 0,c=void 0,u=void 0,l=void 0,h=0,d=e.instanceAttributes.length;h<d;++h)if(a=(A=e.instanceAttributes[h]).update(t),s=o[i+(A.block||0)],void 0!==(c=A.blockIndex))for(u=c,l=a.length+c;u<l;++u)s[u]=a[u-c];n.value=o}else{n=r.buffer,i=r.range[0],o=n.value,A=void 0,a=void 0,s=void 0,c=void 0;if(a=(A=e.activeAttribute).update(t),s=o[i+(A.block||0)],void 0!==(c=A.blockIndex))for(u=c,l=a.length+c;u<l;++u)s[u]=a[u-c];n.value=o}},t.prototype.commit=function(){},t.prototype.incomingChangeList=function(e){},t}(o.BaseDiffProcessor);t.UniformDiffProcessor=s},function(e,t){e.exports="vec3 cameraSpace(vec3 world) {\nreturn (world + cameraOffset) * cameraScale2D;\n}\nvec3 cameraSpaceSize(vec3 worldSize) {\nreturn worldSize * cameraScale2D;\n}\nvec4 clipSpace(vec3 world) {\nreturn (projection * view) * vec4(cameraSpace(world), 1.0);\n}\nvec4 clipSpaceSize(vec3 worldSize) {\nreturn (projection * view) * vec4(cameraSpaceSize(worldSize), 0.0);\n}"},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.NONE=0]="NONE",e[e.SCREEN_CURVE=1]="SCREEN_CURVE"}(t.EdgeScaleType||(t.EdgeScaleType={})),function(e){e[e.LINE=0]="LINE",e[e.BEZIER=1]="BEZIER",e[e.BEZIER2=2]="BEZIER2"}(t.EdgeType||(t.EdgeType={})),function(e){e[e.ALL=0]="ALL",e[e.PASS_Y=1]="PASS_Y",e[e.PASS_X=2]="PASS_X"}(t.EdgeBroadphase||(t.EdgeBroadphase={}))},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,A=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)A=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(A=(o<3?i(A):o>3?i(t,r,A):i(t,r))||A);return o>3&&A&&Object.defineProperty(t,r,A),A};Object.defineProperty(t,"__esModule",{value:!0});var A=r(3),a=function(e){function t(t){var r=e.call(this,t)||this;return r.anchor=[0,0],r.character="a",r.color=[1,1,1,1],r.depth=0,r.fontScale=1,r.maxScale=1,r.offset=[0,0],r.origin=[0,0],r.padding=[0,0],r.origin=t.origin||r.origin,r.offset=t.offset||r.offset,r.character=t.character||r.character,r.color=t.color||r.color,r.maxScale=t.maxScale||r.maxScale,r.padding=t.padding||r.padding,r.anchor=t.anchor||r.anchor,r.onReady=t.onReady,r}return i(t,e),t.prototype.clone=function(){var e=new t(this);e.onReady=this.onReady,e.request=this.request},t.prototype.resourceTrigger=function(){this.offset=this.offset,this.origin=this.origin,this.character=this.character,this.color=this.color,this.onReady&&this.onReady(this)},o([A.observable],t.prototype,"anchor",void 0),o([A.observable],t.prototype,"character",void 0),o([A.observable],t.prototype,"color",void 0),o([A.observable],t.prototype,"depth",void 0),o([A.observable],t.prototype,"fontScale",void 0),o([A.observable],t.prototype,"maxScale",void 0),o([A.observable],t.prototype,"offset",void 0),o([A.observable],t.prototype,"origin",void 0),o([A.observable],t.prototype,"padding",void 0),t}(A.Instance);t.GlyphInstance=a},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o=r(3),A=r(26),a=r(0),s=r(1),c=r(22),u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.glyphRequests={},t}return i(t,e),t.prototype.initShader=function(){var e,n,i=this,o=this.props.animate||{},s=o.anchor,u=o.color,l=o.offset,h=o.origin,d={0:[0,0],1:[0,0],2:[1,0],3:[0,1],4:[1,1],5:[1,1]},f={name:"texture",resource:{key:function(){return i.props.resourceKey||""},name:"fontMap"},update:function(e){var t=e.character;return e.request&&e.character===e.request.character||(i.glyphRequests[e.character]?e.request=i.glyphRequests[e.character]:(e.request=A.fontRequest({key:i.props.resourceKey||"",character:t}),i.glyphRequests[e.character]=e.request),e.request.fontMap&&e.onReady&&e.onReady(e)),e.request.fetch=A.FontResourceRequestFetch.TEXCOORDS,i.resource.request(i,e,e.request)}},p={name:"glyphSize",parentAttribute:f,resource:{key:function(){return i.props.resourceKey||""},name:"fontMap"},size:a.InstanceAttributeSize.TWO,update:function(e){var t=e.character;return e.request&&e.character===e.request.character||(i.glyphRequests[e.character]?e.request=i.glyphRequests[e.character]:(e.request=A.fontRequest({key:i.props.resourceKey||"",character:t}),i.glyphRequests[e.character]=e.request),e.request.fontMap&&e.onReady&&e.onReady(e)),e.request.fetch=A.FontResourceRequestFetch.IMAGE_SIZE,i.resource.request(i,e,e.request)}};switch(f.childAttributes=[p],this.props.scaleMode||c.ScaleMode.ALWAYS){case c.ScaleMode.BOUND_MAX:e=this.props.inTextArea?r(237):r(238),n=this.props.inTextArea?r(239):r(240);break;case c.ScaleMode.NEVER:e=this.props.inTextArea?r(241):r(242),n=this.props.inTextArea?r(243):r(244);break;case c.ScaleMode.ALWAYS:e=this.props.inTextArea?r(245):r(117),n=this.props.inTextArea?r(246):r(118);break;default:e=r(117),n=r(118)}return{fs:e,instanceAttributes:[{easing:u,name:t.attributeNames.color,size:a.InstanceAttributeSize.FOUR,update:function(e){return e.color}},{name:t.attributeNames.depth,size:a.InstanceAttributeSize.ONE,update:function(e){return[e.depth]}},{name:"fontScale",size:a.InstanceAttributeSize.ONE,update:function(e){return[e.fontScale]}},{easing:s,name:t.attributeNames.anchor,size:a.InstanceAttributeSize.TWO,update:function(e){return e.anchor}},{easing:h,name:t.attributeNames.origin,size:a.InstanceAttributeSize.TWO,update:function(e){return e.origin}},{easing:l,name:t.attributeNames.offset,size:a.InstanceAttributeSize.TWO,update:function(e){return e.offset}},{name:"padding",size:a.InstanceAttributeSize.TWO,update:function(e){return e.padding}},{name:"maxScale",size:a.InstanceAttributeSize.ONE,update:function(e){return[e.maxScale]}},p,f],uniforms:[],vertexAttributes:[{name:"normals",size:a.VertexAttributeSize.TWO,update:function(e){return d[e]}}],vertexCount:6,vs:n}},t.prototype.draw=function(){e.prototype.draw.call(this)},t.prototype.getMaterialOptions=function(){return Object.assign({},s.CommonMaterialOptions.transparentImageBlending,a.createMaterialOptions({depthTest:!1}))},t.prototype.willUpdateProps=function(e){e.resourceKey!==this.props.resourceKey&&(Object.values(this.glyphRequests).forEach(function(t){delete t.fontMap,t.key=e.resourceKey||""}),this.rebuildLayer())},t.defaultProps={key:"",data:new o.InstanceProvider,resourceKey:"No resource specified"},t.attributeNames={color:"color",depth:"depth",anchor:"anchor",origin:"origin",offset:"offset"},t}(r(5).Layer2D);t.GlyphLayer=u},function(e,t){e.exports="varying vec4 vertexColor;\nvarying vec2 texCoord;\nvoid main() {\nvec4 texColor = texture2D(fontMap, texCoord);\nif (texColor.r <= 0.0) discard;\ntexColor.a = texColor.r;\ngl_FragColor = texColor * vertexColor;\n}"},function(e,t){e.exports="varying vec4 vertexColor;\nvarying vec2 texCoord;\nvoid main() {\nvec2 pushOut = normals * glyphSize * fontScale;\nvec3 position = vec3(origin + padding - anchor + offset + pushOut, depth);\ngl_Position = clipSpace(position);\ntexCoord = texture.xy + (texture.zw - texture.xy) * normals;\nvertexColor = color * color.a;\n}"},function(e,t){e.exports="vec3 rgb2hsv(vec3 c) {\nvec4 K = vec4(0.0, -1.0 / 3.0, 2.0 / 3.0, -1.0);\nvec4 p = mix(vec4(c.bg, K.wz), vec4(c.gb, K.xy), step(c.b, c.g));\nvec4 q = mix(vec4(p.xyw, c.r), vec4(c.r, p.yzx), step(p.x, c.r));\nfloat d = q.x - min(q.w, q.y);\nfloat e = 1.0e-10;\nreturn vec3(abs(q.z + (q.w - q.y) / (6.0 * d + e)), d / (q.x + e), q.x);\n}\nvec3 hsv2rgb(vec3 c) {\nvec4 K = vec4(1.0, 2.0 / 3.0, 1.0 / 3.0, 3.0);\nvec3 p = abs(fract(c.xxx + K.xyz) * 6.0 - K.www);\nreturn c.z * mix(K.xxx, clamp(p - K.xxx, 0.0, 1.0), c.y);\n}"},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o=r(6),A=r(18),a=r(15),s=r(121);var c=function(e){function t(t,r){var n=e.call(this,t,r)||this;return n.projection=new s.Projection3D,n.projection.camera=r.camera,n.projection.pixelRatio=n.pixelRatio,n}return i(t,e),t.prototype.fitViewtoViewport=function(e,t){if(a.isPerspective(this.props.camera)){var r={near:1,far:1e5,width:t.width,height:t.height},n=this.props.camera;n.projectionOptions=Object.assign(n.projectionOptions,r),n.update(),this.projection.pixelRatio=this.pixelRatio,this.projection.viewBounds=t,this.projection.viewBounds.d=this,this.projection.screenBounds=new o.Bounds({height:this.projection.viewBounds.height/this.pixelRatio,width:this.projection.viewBounds.width/this.pixelRatio,x:this.projection.viewBounds.x/this.pixelRatio,y:this.projection.viewBounds.y/this.pixelRatio}),this.projection.screenBounds.d=this}else this.props.camera.projectionType!==a.CameraProjectionType.ORTHOGRAPHIC&&console.warn("View3D does not support orthographic cameras yet.")},t.prototype.willUpdateProps=function(e){this.projection.camera=e.camera},t.defaultProps={key:"",camera:new a.Camera({type:a.CameraProjectionType.PERSPECTIVE,width:100,height:100,fov:Math.PI/2,far:1e5,near:1}),viewport:{left:0,right:0,bottom:0,top:0}},t}(A.View);t.View3D=c},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o=r(11),A=r(51),a=r(4),s=r(15),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.screenToWorld=function(e,t){return t=t||[0,0,0],this.viewToWorld(this.screenToView(e),t),t},t.prototype.worldToScreen=function(e,t){t=t||[0,0];var r=o.multiply4x4(this.camera.projection,this.camera.view),n=o.project3As4ToScreen(r,e,this.viewBounds.width,this.viewBounds.height);return a.apply2(t,n[0]/this.pixelRatio,n[1]/this.pixelRatio)},t.prototype.viewToWorld=function(e,t){t=t||[0,0,0];var r=this.viewBounds,n=r.width,i=r.height,A=this.camera.projectionOptions,c=a.scale2(e,this.pixelRatio),u=Math.tan;if(A.type===s.CameraProjectionType.PERSPECTIVE){var l=A.fov,h=A.near,d=i/n,f=u(l/2)*h,p=[((c[0]+.5)/n*2-1)*f,(1-(c[1]+.5)/i*2)*f*d,-1],g=o.transform4(this.camera.transform.matrix,a.vec4(p,1));a.apply3(t,g[0],g[1],g[2])}else console.warn("Projections with orthographic cameras and 3D contexts are not working yet");return t},t.prototype.worldToView=function(e,t){t=t||[0,0];var r=o.multiply4x4(this.camera.projection,this.camera.view),n=o.project3As4ToScreen(r,e,this.viewBounds.width,this.viewBounds.height);return a.apply2(t,n[0]/this.pixelRatio,n[1]/this.pixelRatio)},t}(A.BaseProjection);t.Projection3D=c},function(e,t,r){"use strict";function n(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}Object.defineProperty(t,"__esModule",{value:!0}),r(123),n(r(124)),n(r(33)),n(r(258)),n(r(3)),n(r(18)),n(r(0)),n(r(1)),n(r(46)),n(r(26)),n(r(7)),n(r(302)),n(r(304)),n(r(11))},function(e,t){window.WebGL2RenderingContext=window.WebGL2RenderingContext||function(){}},function(e,t,r){"use strict";function n(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}Object.defineProperty(t,"__esModule",{value:!0}),n(r(47)),n(r(48)),n(r(125)),n(r(66))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.NONE=-1]="NONE",e[e.LEFT=0]="LEFT",e[e.AUX=1]="AUX",e[e.RIGHT=2]="RIGHT",e[e.FOURTH=3]="FOURTH",e[e.FIFTH=4]="FIFTH"}(t.MouseButton||(t.MouseButton={}))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(4);t.rayToLocation=function(e,t,r){return r=r||[0,0,0],n.add3(e[0],n.scale3(e[1],t),r)},t.rayFromPoints=function(e,t,r){return r=r||[[0,0,0],[0,0,0]],n.copy3(e,r[0]),n.normalize3(n.subtract3(t,e),r[1]),r}},function(e,t){var r,n,i=e.exports={};function o(){throw new Error("setTimeout has not been defined")}function A(){throw new Error("clearTimeout has not been defined")}function a(e){if(r===setTimeout)return setTimeout(e,0);if((r===o||!r)&&setTimeout)return r=setTimeout,setTimeout(e,0);try{return r(e,0)}catch(t){try{return r.call(null,e,0)}catch(t){return r.call(this,e,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:o}catch(e){r=o}try{n="function"==typeof clearTimeout?clearTimeout:A}catch(e){n=A}}();var s,c=[],u=!1,l=-1;function h(){u&&s&&(u=!1,s.length?c=s.concat(c):l=-1,c.length&&d())}function d(){if(!u){var e=a(h);u=!0;for(var t=c.length;t;){for(s=c,c=[];++l<t;)s&&s[l].run();l=-1,t=c.length}s=null,u=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===A||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function f(e,t){this.fun=e,this.array=t}function p(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];c.push(new f(e,t)),1!==c.length||u||a(d)},f.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=p,i.addListener=p,i.once=p,i.off=p,i.removeListener=p,i.removeAllListeners=p,i.emit=p,i.prependListener=p,i.prependOnceListener=p,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(e,t,r){function n(e){var r;function n(){if(n.enabled){var e=n,i=+new Date,o=i-(r||i);e.diff=o,e.prev=r,e.curr=i,r=i;for(var A=new Array(arguments.length),a=0;a<A.length;a++)A[a]=arguments[a];A[0]=t.coerce(A[0]),"string"!=typeof A[0]&&A.unshift("%O");var s=0;A[0]=A[0].replace(/%([a-zA-Z%])/g,function(r,n){if("%%"===r)return r;s++;var i=t.formatters[n];if("function"==typeof i){var o=A[s];r=i.call(e,o),A.splice(s,1),s--}return r}),t.formatArgs.call(e,A),(n.log||t.log||console.log.bind(console)).apply(e,A)}}return n.namespace=e,n.enabled=t.enabled(e),n.useColors=t.useColors(),n.color=function(e){var r,n=0;for(r in e)n=(n<<5)-n+e.charCodeAt(r),n|=0;return t.colors[Math.abs(n)%t.colors.length]}(e),n.destroy=i,"function"==typeof t.init&&t.init(n),t.instances.push(n),n}function i(){var e=t.instances.indexOf(this);return-1!==e&&(t.instances.splice(e,1),!0)}(t=e.exports=n.debug=n.default=n).coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){t.enable("")},t.enable=function(e){var r;t.save(e),t.names=[],t.skips=[];var n=("string"==typeof e?e:"").split(/[\s,]+/),i=n.length;for(r=0;r<i;r++)n[r]&&("-"===(e=n[r].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.substr(1)+"$")):t.names.push(new RegExp("^"+e+"$")));for(r=0;r<t.instances.length;r++){var o=t.instances[r];o.enabled=t.enabled(o.namespace)}},t.enabled=function(e){if("*"===e[e.length-1])return!0;var r,n;for(r=0,n=t.skips.length;r<n;r++)if(t.skips[r].test(e))return!1;for(r=0,n=t.names.length;r<n;r++)if(t.names[r].test(e))return!0;return!1},t.humanize=r(129),t.instances=[],t.names=[],t.skips=[],t.formatters={}},function(e,t){var r=1e3,n=60*r,i=60*n,o=24*i,A=365.25*o;function a(e,t,r){if(!(e<t))return e<1.5*t?Math.floor(e/t)+" "+r:Math.ceil(e/t)+" "+r+"s"}e.exports=function(e,t){t=t||{};var s,c=typeof e;if("string"===c&&e.length>0)return function(e){if((e=String(e)).length>100)return;var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(!t)return;var a=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return a*A;case"days":case"day":case"d":return a*o;case"hours":case"hour":case"hrs":case"hr":case"h":return a*i;case"minutes":case"minute":case"mins":case"min":case"m":return a*n;case"seconds":case"second":case"secs":case"sec":case"s":return a*r;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return a;default:return}}(e);if("number"===c&&!1===isNaN(e))return t.long?a(s=e,o,"day")||a(s,i,"hour")||a(s,n,"minute")||a(s,r,"second")||s+" ms":function(e){if(e>=o)return Math.round(e/o)+"d";if(e>=i)return Math.round(e/i)+"h";if(e>=n)return Math.round(e/n)+"m";if(e>=r)return Math.round(e/r)+"s";return e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(131);t.normalizeWheel=n.normalizeWheel},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(132),i=r(133),o=10,A=40,a=800;function s(e){var t=0,r=0,n=0,i=0;return"detail"in e&&(r=e.detail),"wheelDelta"in e&&(r=-e.wheelDelta/120),"wheelDeltaY"in e&&(r=-e.wheelDeltaY/120),"wheelDeltaX"in e&&(t=-e.wheelDeltaX/120),"axis"in e&&e.axis===e.HORIZONTAL_AXIS&&(t=r,r=0),n=t*o,i=r*o,"deltaY"in e&&(i=e.deltaY),"deltaX"in e&&(n=e.deltaX),(n||i)&&e.deltaMode&&(1===e.deltaMode?(n*=A,i*=A):(n*=a,i*=a)),n&&!t&&(t=n<1?-1:1),i&&!r&&(r=i<1?-1:1),{spinX:t,spinY:-r,pixelX:n,pixelY:-i}}t.normalizeWheel=s,s.getEventType=function(){return n.firefox()?"DOMMouseScroll":i("wheel")?"wheel":"mousewheel"}},function(e,t){var r,n,i,o,A,a,s,c,u,l,h,d,f,p,g,B=!1;function w(){if(!B){B=!0;var e=navigator.userAgent,t=/(?:MSIE.(\d+\.\d+))|(?:(?:Firefox|GranParadiso|Iceweasel).(\d+\.\d+))|(?:Opera(?:.+Version.|.)(\d+\.\d+))|(?:AppleWebKit.(\d+(?:\.\d+)?))|(?:Trident\/\d+\.\d+.*rv:(\d+\.\d+))/.exec(e),w=/(Mac OS X)|(Windows)|(Linux)/.exec(e);if(d=/\b(iPhone|iP[ao]d)/.exec(e),f=/\b(iP[ao]d)/.exec(e),l=/Android/i.exec(e),p=/FBAN\/\w+;/i.exec(e),g=/Mobile/i.exec(e),h=!!/Win64/.exec(e),t){(r=t[1]?parseFloat(t[1]):t[5]?parseFloat(t[5]):NaN)&&document&&document.documentMode&&(r=document.documentMode);var y=/(?:Trident\/(\d+.\d+))/.exec(e);a=y?parseFloat(y[1])+4:r,n=t[2]?parseFloat(t[2]):NaN,i=t[3]?parseFloat(t[3]):NaN,(o=t[4]?parseFloat(t[4]):NaN)?(t=/(?:Chrome\/(\d+\.\d+))/.exec(e),A=t&&t[1]?parseFloat(t[1]):NaN):A=NaN}else r=n=i=A=o=NaN;if(w){if(w[1]){var v=/(?:Mac OS X (\d+(?:[._]\d+)?))/.exec(e);s=!v||parseFloat(v[1].replace("_","."))}else s=!1;c=!!w[2],u=!!w[3]}else s=c=u=!1}}var y={ie:function(){return w()||r},ieCompatibilityMode:function(){return w()||a>r},ie64:function(){return y.ie()&&h},firefox:function(){return w()||n},opera:function(){return w()||i},webkit:function(){return w()||o},safari:function(){return y.webkit()},chrome:function(){return w()||A},windows:function(){return w()||c},osx:function(){return w()||s},linux:function(){return w()||u},iphone:function(){return w()||d},mobile:function(){return w()||d||f||l||g},nativeApp:function(){return w()||p},android:function(){return w()||l},ipad:function(){return w()||f}};e.exports=y},function(e,t,r){"use strict";var n,i=r(134);i.canUseDOM&&(n=document.implementation&&document.implementation.hasFeature&&!0!==document.implementation.hasFeature("",""))
/**
 * Checks if an event is supported in the current execution environment.
 *
 * NOTE: This will not work correctly for non-generic events such as `change`,
 * `reset`, `load`, `error`, and `select`.
 *
 * Borrows from Modernizr.
 *
 * @param {string} eventNameSuffix Event name, e.g. "click".
 * @param {?boolean} capture Check if the capture phase is supported.
 * @return {boolean} True if the event is supported.
 * @internal
 * @license Modernizr 3.0.0pre (Custom Build) | MIT
 */,e.exports=function(e,t){if(!i.canUseDOM||t&&!("addEventListener"in document))return!1;var r="on"+e,o=r in document;if(!o){var A=document.createElement("div");A.setAttribute(r,"return;"),o="function"==typeof A[r]}return!o&&n&&"wheel"===e&&(o=document.implementation.hasFeature("Events.wheel","3.0")),o}},function(e,t,r){"use strict";var n=!("undefined"==typeof window||!window.document||!window.document.createElement),i={canUseDOM:n,canUseWorkers:"undefined"!=typeof Worker,canUseEventListeners:n&&!(!window.addEventListener&&!window.attachEvent),canUseViewport:n&&!!window.screen,isInWorker:!n};e.exports=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),r(136)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(8),i=r(0),o=r(35),A=r(5);n.ShaderModule.register([{moduleId:"world2D",content:r(113),compatibility:i.ShaderInjectionTarget.ALL,uniforms:function(e){return e instanceof A.Layer2D?[{name:"projection",size:i.UniformSize.MATRIX4,update:function(){return e.view.props.camera.projection}},{name:"view",size:i.UniformSize.MATRIX4,update:function(){return e.view.props.camera.view}},{name:"cameraOffset",size:i.UniformSize.THREE,update:function(){return e.view.props.camera instanceof o.Camera2D?e.view.props.camera.control2D.offset:[0,0,0]}},{name:"cameraPosition",size:i.UniformSize.THREE,update:function(){return e.view.props.camera.position}},{name:"cameraScale",size:i.UniformSize.THREE,update:function(){return e.view.props.camera.scale}},{name:"cameraScale2D",size:i.UniformSize.THREE,update:function(){return e.view.props.camera instanceof o.Camera2D?e.view.props.camera.scale2D:[1,1,1]}},{name:"cameraRotation",size:i.UniformSize.THREE,update:function(){return e.view.props.camera.scale}},{name:"viewSize",size:i.UniformSize.TWO,update:function(){return[e.view.viewBounds.width,e.view.viewBounds.height]}},{name:"pixelRatio",size:i.UniformSize.ONE,update:function(){return[e.view.pixelRatio]}}]:(console.warn("A shader requesed the module world2D; however, the layer the shader comes from is NOT a Layer2D which is","required for the module to work."),[])}}])},function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(i,o){function A(e){try{s(n.next(e))}catch(e){o(e)}}function a(e){try{s(n.throw(e))}catch(e){o(e)}}function s(e){e.done?i(e.value):new r(function(t){t(e.value)}).then(A,a)}s((n=n.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){var r,n,i,o,A={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;A;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return A.label++,{value:o[1],done:!1};case 5:A.label++,n=o[1],o=[0];continue;case 7:o=A.ops.pop(),A.trys.pop();continue;default:if(!(i=(i=A.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){A=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){A.label=o[1];break}if(6===o[0]&&A.label<i[1]){A.label=i[1],i=o;break}if(i&&A.label<i[2]){A.label=i[2],A.ops.push(o);break}i[2]&&A.ops.pop(),A.trys.pop();continue}o=t.call(e,A)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};Object.defineProperty(t,"__esModule",{value:!0});var o=r(0),A=r(79),a=function(){function e(){}return e.all=function(e,t,r,a){return n(this,void 0,void 0,function(){var n,s,c,u,l,h,d,f,p,g,B,w;return i(this,function(i){for(n=o.NOOP,s=new Promise(function(e){return n=e}),c=0,u=0,l=0,h=r.length;l<h;++l)for(d=r[l],f=0,p=t.length;f<p;++f)g=t[f],(B=g.getEasing(d))&&(a&&a(B,g,f,l),c=Math.max((B.delay||0)+B.duration));return w=function(e){e-u<c?A.nextFrame(w):n()},e?requestAnimationFrame(function(e){u=e,w(e)}):n(),[2,s]})})},e}();t.EasingUtil=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(34);t.extendShader=function(e,t){var r={vs:e.vs,fs:e.fs};return t.vs&&(r.vs=n.shaderTemplate({options:{},required:{name:"Shader Extension",values:[]},shader:e.vs,onToken:function(e){return"${"+e+"}"},onMain:function(e){return null===e?(console.warn("Could not extend the shader as the void main method could not be determined"),""):t.vs?{header:t.vs.header||"",main:t.vs.main?(t.vs.main.pre||"")+"\n"+e+"\n"+(t.vs.main.post||""):e}:e}}).shader),t.fs&&(r.fs=n.shaderTemplate({options:{},required:{name:"Shader Extension",values:[]},shader:e.fs,onToken:function(e){return"${"+e+"}"},onMain:function(e){return null===e?(console.warn("Could not extend the shader as the void main method could not be determined"),""):t.fs?{header:t.fs.header||"",main:t.fs.main?(t.fs.main.pre||"")+"\n"+e+"\n"+(t.fs.main.post||""):e}:e}}).shader),{fs:r.fs,instanceAttributes:(e.instanceAttributes||[]).concat(t.instanceAttributes||[]),uniforms:(e.uniforms||[]).concat(t.uniforms||[]),vertexAttributes:(e.vertexAttributes||[]).concat(t.vertexAttributes||[]),vertexCount:e.vertexCount,vs:r.vs}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.shallowEqual=function(e,t){return e&&t?!Boolean(Object.keys(Object.assign({},e,t)).find(function(r){return e[r]!==t[r]})):e===t}},function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(i,o){function A(e){try{s(n.next(e))}catch(e){o(e)}}function a(e){try{s(n.throw(e))}catch(e){o(e)}}function s(e){e.done?i(e.value):new r(function(t){t(e.value)}).then(A,a)}s((n=n.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){var r,n,i,o,A={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;A;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return A.label++,{value:o[1],done:!1};case 5:A.label++,n=o[1],o=[0];continue;case 7:o=A.ops.pop(),A.trys.pop();continue;default:if(!(i=(i=A.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){A=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){A.label=o[1];break}if(6===o[0]&&A.label<i[1]){A.label=i[1],i=o;break}if(i&&A.label<i[2]){A.label=i[2],A.ops.push(o);break}i[2]&&A.ops.pop(),A.trys.pop();continue}o=t.call(e,A)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};Object.defineProperty(t,"__esModule",{value:!0});var o=r(66),A=r(7),a=r(83),s=r(67),c=r(6),u=r(4),l=r(26),h=r(103),d=r(182),f=r(0),p=r(0),g=r(1),B=r(184),w=r(55),y=r(185),v=r(186),m=r(187),b=r(191),E=r(54),C=r(50);t.DEFAULT_IO_EXPANSION=[new m.BasicIOExpansion,new d.ActiveIOExpansion,new b.EasingIOExpansion],t.DEFAULT_RESOURCE_MANAGEMENT=[{type:f.ResourceType.ATLAS,manager:new h.AtlasResourceManager({})},{type:f.ResourceType.FONT,manager:new l.FontResourceManager}];var T=[0,0,0,0];function U(e,t){return(e.order||Number.MAX_SAFE_INTEGER)-(t.order||Number.MAX_SAFE_INTEGER)}var _=function(){function e(e){var t=this;this.frameMetrics={currentFrame:0,currentTime:0|Date.now(),frameDuration:1e3/60,previousTime:0|Date.now()},this.isBufferingResources=!1,this.ioExpanders=[],this.ioSorting=new y.BaseIOSorting,this.layers=new Map,this.pixelRatio=window.devicePixelRatio,this.viewDrawDependencies=new Map,this.resourceDiffs=new w.ReactiveDiff({buildItem:function(e){return n(t,void 0,void 0,function(){return i(this,function(t){switch(t.label){case 0:return[4,this.resourceManager.initResource(e)];case 1:return t.sent(),[2,{id:e.key}]}})})},destroyItem:function(e,r){return n(t,void 0,void 0,function(){return i(this,function(t){switch(t.label){case 0:return[4,this.resourceManager.destroyResource(e)];case 1:return t.sent(),[2,!0]}})})},updateItem:function(e,r){return n(t,void 0,void 0,function(){return i(this,function(t){switch(t.label){case 0:return[4,this.resourceManager.updateResource(e)];case 1:return t.sent(),[2]}})})}}),this.sceneDiffs=new w.ReactiveDiff({buildItem:function(e){return n(t,void 0,void 0,function(){return i(this,function(t){return[2,new E.LayerScene(this,{key:e.key,views:e.views,layers:e.layers})]})})},destroyItem:function(e,r){return n(t,void 0,void 0,function(){return i(this,function(e){return r.destroy(),[2,!0]})})},updateItem:function(e,r){return n(t,void 0,void 0,function(){return i(this,function(t){switch(t.label){case 0:return[4,r.update(e)];case 1:return t.sent(),[2]}})})}}),this.readyResolver=new g.PromiseResolver,this.ready=this.readyResolver.promise,e&&this.init(e)}return Object.defineProperty(e.prototype,"gl",{get:function(){return this.context},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scenes",{get:function(){return this.sceneDiffs.items},enumerable:!0,configurable:!0}),e.prototype.getIOExpanders=function(){return this.ioExpanders},e.prototype.getIOSorting=function(){return this.ioSorting},e.prototype.analyzePickRendering=function(){if(this.queuedPicking){for(var e=0,t=this.queuedPicking.length;e<t;++e){var r=this.queuedPicking[e],n=r[1],i=r[2],o=r[3];if(!n.optimizeRendering){var A=new Uint8Array(100);this.renderer.readPixels(Math.floor(o[0]-2.5),Math.floor(o[1]-2.5),5,5,A);for(var a=B.analyzeColorPickingRendering([o[0]-n.screenBounds.x,o[1]-n.screenBounds.y],A,5,5),s=0,c=i.length;s<c;++s){var u=i[s];u.picking.type===p.PickType.SINGLE&&(u.interactions.colorPicking=a)}}}delete this.queuedPicking}},e.prototype.commit=function(e,t,r){return n(this,void 0,void 0,function(){var n,o,A,a,u,l,h,d,f,g,B,w,y,v,m,b,E,C,T,_,Q,F;return i(this,function(i){if(!this.gl)return[2];for(n=!1,t&&this.frameMetrics.currentFrame++,this.frameMetrics.frameDuration=this.frameMetrics.currentTime-this.frameMetrics.previousTime,this.frameMetrics.previousTime=this.frameMetrics.currentTime,void 0===e?this.frameMetrics.currentTime=0|Date.now():(this.frameMetrics.previousTime===this.frameMetrics.currentTime&&(this.frameMetrics.previousTime=e),this.frameMetrics.currentTime=e),e=this.frameMetrics.currentTime,(o=this.sceneDiffs.items).sort(U),A={},a=new Map,m=0,b=o.length;m<b;++m){for(E=o[m],C=E.views,u=E.layers,l={},C.sort(U),u.sort(U),T=0,_=C.length;T<_;++T){for(Q=C[T],h=[],d=new c.Bounds({height:this.context.canvas.height,width:this.context.canvas.width,x:0,y:0}),f=s.getAbsolutePositionBounds(Q.props.viewport,d,this.pixelRatio),Q.fitViewtoViewport(d,f),g=0,B=u.length;g<B;++g){(w=u[g]).view=Q;try{w.draw(),w.needsViewDrawn&&(Q.needsDraw=!0),l[w.id]=w,Q.animationEndTime=Math.max(Q.animationEndTime,w.animationEndTime,Q.props.camera.animationEndTime),w.lastFrameTime=e}catch(e){A[w.id]||(A[w.id]=[w,e])}w.picking.type===p.PickType.SINGLE&&h.push(w)}Q.needsDraw||e&&e<Q.lastFrameTime||Q.props.camera.needsViewDrawn,Q.needsDraw=!0,n=!0,(y=this.viewDrawDependencies.get(Q))&&y.forEach(function(e){e.needsDraw=!0}),a.set(Q,h)}v=Object.values(l),u.length!==v.length&&E.layerDiffs.diff(v.map(function(e){return e.initializer}))}for(m=0,b=o.length;m<b;++m)if((E=o[m]).container)for(C=E.views,T=0,_=C.length;T<_;++T)Q=C[T],r&&r(n,E,Q,a.get(Q)||[]);return(F=Object.values(A)).length>0&&(console.warn("Some layers errored during their draw update. These layers will be removed. They can be re-added if render() is called again:",F.map(function(e){return e[0].id})),F.forEach(function(e){if(console.warn("Layer "+e[0].id+" removed for the following error:"),e[1]){var t=e[1].stack||e[1].message;if(console.error(t),t.indexOf("RangeError")>-1||t.indexOf("Source is too large")>-1){for(var r,n=e[0],i=n.bufferManager.changeListContext,o=0,A=function(e,t){var A=i[e][0];n.instanceAttributes.forEach(function(e){e.update(A).length!==e.size&&(r||(r=["Example instance returned the wrong sized value for an attribute:",A,e]),o++)})},a=0,s=i.length;a<s;++a)A(a);r&&(console.error("The following output shows discovered issues related to the specified error"),console.error("Instances are returning too large IO for an attribute\n",r[0],r[1],r[2],"Total errors for too large IO values",o))}}})),[2]})})},e.prototype.destroy=function(){this.layers.forEach(function(e){return e.destroy()}),this.resourceManager.destroy(),this.mouseManager.destroy(),this.sceneDiffs.destroy(),this.renderer.dispose(),this.pickingTarget.dispose(),delete this.context},e.prototype.draw=function(e){return n(this,void 0,void 0,function(){var t,r,n,o,A,a,s,c,u,l,h,d,f=this;return i(this,function(i){switch(i.label){case 0:if(!this.gl)return[2];for(this.analyzePickRendering(),t=[],l=0,h=this.sceneDiffs.items.length;l<h;++l)for(a=this.sceneDiffs.items[l],r=0,n=a.views.length;r<n;++r)(u=a.views[r]).props.camera.broadcast(u.id);return[4,this.commit(e,!0,function(e,r,n,i){r.container&&(e&&f.drawSceneView(r.container,n),i.length>0&&f.updateColorPick&&t.push([r,n,i]))})];case 1:return i.sent(),this.mouseManager.waitingForRender&&(this.mouseManager.waitingForRender=!1),this.isBufferingResources?[3,4]:(this.isBufferingResources=!0,[4,this.resourceManager.dequeueRequests()]);case 2:return o=i.sent(),this.isBufferingResources=!1,o?(A=this.draw,[4,g.onFrame()]):[3,4];case 3:A.apply(this,[i.sent()]),i.label=4;case 4:for(l=0,h=this.sceneDiffs.items.length;l<h;++l)for(a=this.sceneDiffs.items[l],s=0,c=a.views.length;s<c;++s)(u=a.views[s]).needsDraw=!1,u.props.camera.resolve();for(this.layers.forEach(function(e){e.needsViewDrawn=!1,e.props.data.resolveContext=""}),l=0,h=t.length;l<h;++l)d=t[l],this.drawPicking(d[0],d[1],d[2])&&d.length>0&&!d[1].optimizeRendering&&this.updateColorPick&&(this.queuedPicking||(this.queuedPicking=[]),this.queuedPicking.push([d[0],d[1],d[2],this.updateColorPick.position]));return delete this.updateColorPick,[2]}})})},e.prototype.drawPicking=function(e,t,r){if(!this.updateColorPick)return!1;if(!e.container)return!1;if(t.optimizeRendering)return!1;if(this.updateColorPick.views.indexOf(t)>-1){t.pixelRatio=1;var n=t.clearFlags.slice(0),i=t.props.background&&u.copy4(t.props.background);t.props.clearFlags=[C.ClearFlags.COLOR,C.ClearFlags.DEPTH],t.props.background=[0,0,0,0];var o=new c.Bounds({height:this.pickingTarget.height,width:this.pickingTarget.width,x:0,y:0}),A=s.getAbsolutePositionBounds(t.props.viewport,o,this.pixelRatio);t.fitViewtoViewport(o,A);for(var a=0,l=r.length;a<l;++a){var h=r[a];h.picking.currentPickMode=p.PickType.SINGLE;try{h.updateUniforms()}catch(e){console.warn(e)}h.picking.currentPickMode=p.PickType.NONE}return this.drawSceneView(e.container,t,this.renderer,this.pickingTarget),t.pixelRatio=this.pixelRatio,t.props.clearFlags=n,t.props.background=i,o=new c.Bounds({height:this.context.canvas.height,width:this.context.canvas.width,x:0,y:0}),A=s.getAbsolutePositionBounds(t.props.viewport,o,this.pixelRatio),t.fitViewtoViewport(o,A),!0}return!1},e.prototype.drawSceneView=function(e,t,r,n){r=r||this.renderer;var i={x:t.viewBounds.left,y:t.viewBounds.top},o=t.viewBounds,A=t.props.background||T,a=t.clearFlags.indexOf(C.ClearFlags.COLOR)>-1;r.setRenderTarget(n||null),r.setScissor({x:i.x,y:i.y,width:o.width,height:o.height},n),a&&r.clearColor([A[0],A[1],A[2],A[3]]),r.setViewport({x:i.x,y:i.y,width:o.width,height:o.height}),t.clearFlags&&t.clearFlags.length>0?r.clear(a,t.clearFlags.indexOf(C.ClearFlags.DEPTH)>-1,t.clearFlags.indexOf(C.ClearFlags.STENCIL)>-1):r.clear(!1),r.render(e,n),t.lastFrameTime=this.frameMetrics.currentTime},e.prototype.gatherViewDrawDependencies=function(){if(this.sceneDiffs){this.viewDrawDependencies.clear();for(var e=this.sceneDiffs.items,t=0,r=e.length;t<r;t++)for(var n=0,i=(u=e[t]).views.length;n<i;++n){var o=u.views[n],A=new c.Bounds({height:this.context.canvas.height,width:this.context.canvas.width,x:0,y:0}),a=s.getAbsolutePositionBounds(o.props.viewport,A,this.pixelRatio);o.fitViewtoViewport(A,a)}for(t=0,r=e.length;t<r;t++){var u;for(n=0,i=(u=e[t]).views.length;n<i;++n){for(var l=u.views[n],h=[],d=0,f=e.length;d<f;d++)if(d!==t)for(var p=e[d],g=0,B=p.views.length;g<B;++g){var w=p.views[g];l.viewBounds.hitBounds(w.viewBounds)&&h.push(w)}this.viewDrawDependencies.set(l,h)}}}},e.prototype.getViewSize=function(e){for(var t=0,r=this.sceneDiffs.items.length;t<r;++t){var n=this.sceneDiffs.items[t].viewDiffs.getByKey(e);if(n)return n.screenBounds}return null},e.prototype.getViewWorldBounds=function(e){for(var t=0,r=this.sceneDiffs.items.length;t<r;++t){var n=this.sceneDiffs.items[t].viewDiffs.getByKey(e);if(n){if(n.screenBounds){var i=n.projection.viewToWorld([0,0]),o=n.projection.screenToWorld([n.screenBounds.right,n.screenBounds.bottom]);return new c.Bounds({bottom:o[1],left:i[0],right:o[0],top:i[1]})}return null}}return null},e.prototype.getProjections=function(e){for(var t=0,r=this.sceneDiffs.items.length;t<r;++t){var n=this.sceneDiffs.items[t].viewDiffs.getByKey(e);if(n)return n.projection}return null},e.prototype.init=function(e){return n(this,void 0,void 0,function(){var t;return i(this,function(r){switch(r.label){case 0:return this.context?[2,this]:(this.pixelRatio=e.pixelRatio||this.pixelRatio,this.pixelRatio<1&&(this.pixelRatio=1),(t=this.initGL(e))?(this.context=t,this.gl?(this.initMouseManager(e),[4,this.initResources(e)]):[3,3]):(this.readyResolver.reject({error:f.SurfaceErrorType.NO_WEBGL_CONTEXT,message:"Could not establish a webgl context. Surface is being destroyed to free resources."}),this.destroy(),[2,this]));case 1:return r.sent(),[4,this.initIOExpanders(e)];case 2:return r.sent(),[3,4];case 3:console.warn("Could not establish a GL context. Layer Surface will be unable to render"),r.label=4;case 4:return this.readyResolver.resolve(this),[2,this]}})})},e.prototype.initGL=function(e){var t=e.context;if(!t)return null;var r=t.width,n=t.height,i=!0,o=Object.assign({alpha:!1,antialias:!1,preserveDrawingBuffer:!1,premultiplyAlpha:!1},e.rendererOptions);return this.renderer=new a.WebGLRenderer({alpha:o.alpha,antialias:o.antialias,canvas:t,preserveDrawingBuffer:o.preserveDrawingBuffer,premultipliedAlpha:o.premultipliedAlpha,onNoContext:function(){i=!1}}),i&&this.renderer.gl?(this.context=this.renderer.gl,this.resourceManager&&this.resourceManager.setWebGLRenderer(this.renderer),this.pickingTarget=new A.RenderTarget({buffers:{color:new A.Texture({generateMipMaps:!1,data:{width:r,height:n,buffer:null}}),depth:A.GLSettings.RenderTarget.DepthBufferFormat.DEPTH_COMPONENT16},width:r,height:n}),this.setRendererSize(r,n),this.renderer.setPixelRatio(this.pixelRatio),this.renderer.gl):null},e.prototype.initIOExpanders=function(e){Array.isArray(e.ioExpansion)||void 0===e.ioExpansion?this.ioExpanders=e.ioExpansion&&e.ioExpansion.slice(0)||t.DEFAULT_IO_EXPANSION&&t.DEFAULT_IO_EXPANSION.slice(0)||[]:e.ioExpansion instanceof Function&&(this.ioExpanders=e.ioExpansion(t.DEFAULT_IO_EXPANSION));var r=this.resourceManager.getIOExpansion();this.ioExpanders=this.ioExpanders.concat(r)},e.prototype.initMouseManager=function(e){var t=[new v.LayerMouseEvents].concat(e.eventManagers||[]);this.mouseManager=new o.UserInputEventManager(this.context.canvas,this,t,e.handlesWheelEvents)},e.prototype.initResources=function(e){return n(this,void 0,void 0,function(){var r=this;return i(this,function(n){return this.resourceManager=new l.ResourceRouter,this.resourceManager.setWebGLRenderer(this.renderer),(e.resourceManagers&&e.resourceManagers.slice(0)||t.DEFAULT_RESOURCE_MANAGEMENT&&t.DEFAULT_RESOURCE_MANAGEMENT.slice(0)||[]).forEach(function(e){r.resourceManager.setManager(e.type,e.manager)}),[2]})})},e.prototype.pipeline=function(e){return n(this,void 0,void 0,function(){return i(this,function(t){switch(t.label){case 0:return e.resources?[4,this.resourceDiffs.diff(e.resources)]:[3,2];case 1:t.sent(),t.label=2;case 2:return e.scenes?[4,this.sceneDiffs.diff(e.scenes)]:[3,4];case 3:t.sent(),t.label=4;case 4:return this.gatherViewDrawDependencies(),[2]}})})},e.prototype.fitContainer=function(e){var t=this.context.canvas.parentElement;if(t){var r=this.context.canvas;r.className="",r.setAttribute("style",""),t.style.position="relative",r.style.position="absolute",r.style.left="0xp",r.style.top="0xp",r.style.width="100%",r.style.height="100%",r.setAttribute("width",""),r.setAttribute("height","");var n=t.getBoundingClientRect(),i=r.getBoundingClientRect();this.resize(i.width||100,n.height||100)}},e.prototype.resize=function(e,t,r){if(this.pixelRatio=r||this.pixelRatio,this.pixelRatio<1&&(this.pixelRatio=1),this.sceneDiffs)for(var n=this.sceneDiffs.items,i=0,o=n.length;i<o;++i)for(var A=n[i],a=0,s=A.views.length;a<s;++a){A.views[a].pixelRatio=this.pixelRatio}this.setRendererSize(e,t),this.renderer.setPixelRatio(this.pixelRatio),this.mouseManager.resize(),this.gatherViewDrawDependencies()},e.prototype.setRendererSize=function(e,t){e=e||100,t=t||100,this.renderer.setSize(e,t),this.pickingTarget.setSize(e,t)},e.prototype.updateColorPickPosition=function(e,t){this.updateColorPick={position:e,views:t}},e}();t.Surface=_},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t,r,n){void 0===r&&(r=!1),void 0===n&&(n=!1),this._isInstanced=!1,this._fullUpdate=!1,this.normalize=!1,this._updateRange={count:-1,offset:-1},this.data=e,this.size=t,this._isDynamic=r,this._isInstanced=n}return Object.defineProperty(e.prototype,"isDynamic",{get:function(){return this._isDynamic},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isInstanced",{get:function(){return this._isInstanced},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fullUpdate",{get:function(){return this._fullUpdate},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"needsUpdate",{get:function(){return this._needsUpdate},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"updateRange",{get:function(){return this._updateRange},set:function(e){this._updateRange=e,this._needsUpdate=!0},enumerable:!0,configurable:!0}),e.prototype.resolve=function(){this._needsUpdate=!1,this._fullUpdate=!1},e.prototype.setDynamic=function(e){this._isDynamic=e,this._needsUpdate=!0,this._fullUpdate=!0},e}();t.Attribute=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){this._attributes={},this.gl={},this.maxInstancedCount=0,this.isInstanced=!1}return Object.defineProperty(e.prototype,"attributes",{get:function(){return new Map(Object.entries(this._attributes))},enumerable:!0,configurable:!0}),e.prototype.addAttribute=function(e,t){var r,n=this;this._attributes[e]=t,this.isInstanced=!1,Object.values(this._attributes).forEach(function(e){var t=e.isInstanced?1:0;void 0===r&&(r=t),1==(r^t)&&(n.isInstanced=!0)})},e.prototype.removeAttribute=function(e){delete this._attributes[e]},e.prototype.dispose=function(){},e}();t.Geometry=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(12),i=function(){function e(e){this.blending={blendDst:n.GLSettings.Material.BlendingDstFactor.OneMinusSrcAlpha,blendEquation:n.GLSettings.Material.BlendingEquations.Add,blendSrc:n.GLSettings.Material.BlendingSrcFactor.SrcAlpha},this.colorWrite=[!0,!0,!0,!0],this.culling=n.GLSettings.Material.CullSide.CCW,this.depthFunc=n.GLSettings.Material.DepthFunctions.LESS_OR_EQUAL,this.depthTest=!0,this.depthWrite=!0,this.dithering=!0,this.fragmentShader="",this.name="",this.uniforms={},this.vertexShader="",Object.assign(this,e),delete this.gl}return e.prototype.clone=function(){var t=new e(this);t.blending=Object.assign({},this.blending),t.polygonOffset=Object.assign({},this.polygonOffset),t.uniforms=Object.assign({},this.uniforms);var r=function(e){var r=t.uniforms[e];if(r.gl){var n=new Map;r.gl.forEach(function(e,t){n.set(t,Object.assign({},e))})}};for(var n in t.uniforms)r(n);return t},e.prototype.dispose=function(){this.gl&&this.gl.proxy.disposeMaterial(this)},e}();t.Material=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(12),i=function(e,t){this.drawMode=n.GLSettings.Model.DrawMode.TRIANGLES,this.vertexDrawRange=[-1,-1],this.drawInstances=-1,this.vertexCount=0,this.geometry=e,this.material=t};t.Model=i},function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(i,o){function A(e){try{s(n.next(e))}catch(e){o(e)}}function a(e){try{s(n.throw(e))}catch(e){o(e)}}function s(e){e.done?i(e.value):new r(function(t){t(e.value)}).then(A,a)}s((n=n.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){var r,n,i,o,A={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;A;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return A.label++,{value:o[1],done:!1};case 5:A.label++,n=o[1],o=[0];continue;case 7:o=A.ops.pop(),A.trys.pop();continue;default:if(!(i=(i=A.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){A=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){A.label=o[1];break}if(6===o[0]&&A.label<i[1]){A.label=i[1],i=o;break}if(i&&A.label<i[2]){A.label=i[2],A.ops.push(o);break}i[2]&&A.ops.pop(),A.trys.pop();continue}o=t.call(e,A)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};Object.defineProperty(t,"__esModule",{value:!0});var o=r(38),A=r(2)("performance"),a=function(){function e(){this.managers=new Map,this.resourceKeyToType=new Map}return e.prototype.dequeueRequests=function(){return n(this,void 0,void 0,function(){var e,t,r,n,o;return i(this,function(i){switch(i.label){case 0:e=!1,t=Array.from(this.managers.values()),r=0,n=t.length,i.label=1;case 1:return r<n?[4,t[r].dequeueRequests()]:[3,4];case 2:o=i.sent(),e=e||o,i.label=3;case 3:return++r,[3,1];case 4:return[2,e]}})})},e.prototype.destroy=function(){this.managers.forEach(function(e){return e.destroy()}),this.resourceKeyToType.clear(),this.managers.clear(),delete this.webGLRenderer},e.prototype.destroyResource=function(e){return n(this,void 0,void 0,function(){var t;return i(this,function(r){switch(r.label){case 0:return(t=this.managers.get(e.type))?(this.resourceKeyToType.delete(e.key),[4,t.destroyResource(e)]):(console.warn("A Resource is trying to be destroyed but has no manager to facilitate the operation: "+e.type),[2]);case 1:return[2,r.sent()]}})})},e.prototype.getIOExpansion=function(){var e=[];return this.managers.forEach(function(t){e=e.concat(t.getIOExpansion())}),e},e.prototype.getManager=function(e){var t=this.managers.get(e);return t||(console.warn("A manager was requested that does not exist for type "+e),o.INVALID_RESOURCE_MANAGER)},e.prototype.getResourceType=function(e){return this.resourceKeyToType.get(e)},e.prototype.initResource=function(e){return n(this,void 0,void 0,function(){var t;return i(this,function(r){switch(r.label){case 0:return(t=this.managers.get(e.type))?this.resourceKeyToType.has(e.key)?(console.warn("Detected two resources with identical keys. The duplicate resource will not be generated:",e.key),[2]):(this.resourceKeyToType.set(e.key,e.type),[4,t.initResource(e)]):(console.warn("A Resource is trying to be created but has no manager to facilitate the operation: "+e.type),[2]);case 1:return[2,r.sent()]}})})},e.prototype.request=function(e,t,r,n){var i=this.managers.get(r.type);return i?i.request(e,t,r,n):(console.warn("A Layer is requesting a resource for which there is no manager set. Please make sure a Resource Manager is set for resource of type: "+r.type),[-1,-1,-1,-1])},e.prototype.setManager=function(e,t){this.managers.get(e)&&A("A manager was assigned to a resource type: "+e+" that overrides another manager already set to that type."),t.router=this,this.managers.set(e,t),t.webGLRenderer=this.webGLRenderer},e.prototype.setWebGLRenderer=function(e){this.webGLRenderer=e,this.managers.forEach(function(t){return t.webGLRenderer=e})},e.prototype.updateResource=function(e){return n(this,void 0,void 0,function(){var t;return i(this,function(r){switch(r.label){case 0:return(t=this.managers.get(e.type))?[4,t.updateResource(e)]:(console.warn("A Resource is trying to be updated but has no manager to facilitate the operation: "+e.type),[2]);case 1:return[2,r.sent()]}})})},e}();t.ResourceRouter=a},function(e,t,r){"use strict";function n(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}Object.defineProperty(t,"__esModule",{value:!0}),n(r(147)),n(r(84)),n(r(85)),n(r(86)),n(r(178)),n(r(100)),n(r(99))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(4),i=Math.ceil,o=Math.max,A=Math.log2,a=Math.pow,s=Math.sqrt,c=[-1,-1];function u(e,t,r){void 0===r&&(r=!1);for(var i,A,a,c,u=r?-1:1,l=[],h=-1,d=0,f=e.length;d<f;++d){var p=e[d];l[d]=[];for(var g=0,B=p.length;g<B;++g)(i=p[g])===t?c=256:(A=[d,g],a=n.subtract2(i,A),c=s(n.dot2(a,a))),l[d][g]=c,h=o(c,h)}for(d=0,f=e.length;d<f;++d)for(g=0,B=(p=e[d]).length;g<B;++g)c=l[d][g],l[d][g]=c/h*255*u;return l}function l(e,t,r,n){for(var i,o=u(e,r,!0),A=u(t,r,!1),a=o.length,s=o,c=0,l=o.length;c<l;++c)for(var h=o[c],d=A[c],f=0,p=h.length;f<p;++f){var g=h[f],B=d[f];h[f]=g+B}for(c=0,l=s.length;c<l;++c)for(f=0,p=(h=s[c]).length;f<p;++f){i=i=h[f];var w=f*(4*a)+4*c;n[w]=i,n[w+1]=i,n[w+2]=i,n[w+3]=255}}function h(e,t){for(var r,i,o,A,s,u,l,h,d,f=e.length,p=e[0].length,g=function(e){for(var t=[],r=0,n=e.length;r<n;++r)t[r]=[];return t}(e),B=e,w=0;w<t;++w){var y=g;g=B,B=y;var v=a(2,t-w-1);for(l=0;l<f;++l)for(h=0;h<p;++h){for(r=[l,h],o=[(g[l-v]||[])[h-v]||c,(g[l]||[])[h-v]||c,(g[l+v]||[])[h-v]||c,(g[l-v]||[])[h]||c,(g[l]||[])[h]||c,(g[l+v]||[])[h]||c,(g[l-v]||[])[h+v]||c,(g[l]||[])[h+v]||c,(g[l+v]||[])[h+v]||c],s=0,A=Number.MAX_VALUE,d=0;d<9;++d){var m=o[d];m!==c&&(i=n.subtract2(m,r),(u=n.dot2(i,i))<A&&(A=u,s=d))}B[l][h]=o[s]}}return B}t.convertToSDF=function(e,t){void 0===t&&(t=l);var r=e.width,n=e.height,a=e.getContext("2d");if(a){var s=a.getImageData(0,0,r,n).data,u=o(r,n),d=i(A(u)),f=function(e,t){for(var r=e.width,n=e.height,i=[],o=[],A=0;A<r;++A){i[A]=[],o[A]=[];for(var a=0;a<n;++a)t[a*(4*r)+4*A+3]?(i[A][a]=[A,a],o[A][a]=c):(i[A][a]=c,o[A][a]=[A,a])}return{seed:i,inverse:o}}(e,s),p=h(f.seed,d),g=h(f.inverse,d),B=new ImageData(r,n);t(p,g,c,B.data),a.putImageData(B,0,0)}},t.makeFontSDF=function(e){}},function(e,t,r){"use strict";var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=c(r(87)),A=c(r(88)),a=r(149),s=r(14);function c(e){return e&&e.__esModule?e:{default:e}}var u=function(e,t){"object"===("undefined"==typeof console?"undefined":i(console))&&"function"==typeof console.log&&console.log("html2canvas $npm_package_version");var r=t||{},c=new A.default("boolean"!=typeof r.logging||r.logging);var u=e.ownerDocument;if(!u)return Promise.reject("Provided element is not within a Document");var l=u.defaultView,h=l.pageXOffset,d=l.pageYOffset,f="HTML"===e.tagName||"BODY"===e.tagName?(0,s.parseDocumentSize)(u):(0,s.parseBounds)(e,h,d),p=f.width,g=f.height,B=f.left,w=f.top,y={async:!0,allowTaint:!1,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,scale:l.devicePixelRatio||1,target:new o.default(r.canvas),useCORS:!1,x:B,y:w,width:Math.ceil(p),height:Math.ceil(g),windowWidth:l.innerWidth,windowHeight:l.innerHeight,scrollX:l.pageXOffset,scrollY:l.pageYOffset};return(0,a.renderElement)(e,n({},y,r),c)};u.CanvasRenderer=o.default,e.exports=u},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.renderElement=void 0;var n=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,i=!1,o=void 0;try{for(var A,a=e[Symbol.iterator]();!(n=(A=a.next()).done)&&(r.push(A.value),!t||r.length!==t);n=!0);}catch(e){i=!0,o=e}finally{try{!n&&a.return&&a.return()}finally{if(i)throw o}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},i=(d(r(88)),r(150)),o=d(r(172)),A=d(r(95)),a=d(r(43)),s=r(14),c=r(175),u=r(97),l=r(13),h=d(l);function d(e){return e&&e.__esModule?e:{default:e}}t.renderElement=function e(t,r,d){var f=t.ownerDocument,p=new s.Bounds(r.scrollX,r.scrollY,r.windowWidth,r.windowHeight),g=f.documentElement?new h.default(getComputedStyle(f.documentElement).backgroundColor):l.TRANSPARENT,B=f.body?new h.default(getComputedStyle(f.body).backgroundColor):l.TRANSPARENT,w=t===f.documentElement?g.isTransparent()?B.isTransparent()?r.backgroundColor?new h.default(r.backgroundColor):null:B:g:r.backgroundColor?new h.default(r.backgroundColor):null;return(r.foreignObjectRendering?a.default.SUPPORT_FOREIGNOBJECT_DRAWING:Promise.resolve(!1)).then(function(a){return a?(s=new c.DocumentCloner(t,r,d,!0,e)).inlineFonts(f).then(function(){return s.resourceLoader.ready()}).then(function(){return new A.default(s.documentElement).render({backgroundColor:w,logger:d,scale:r.scale,x:r.x,y:r.y,width:r.width,height:r.height,windowWidth:r.windowWidth,windowHeight:r.windowHeight,scrollX:r.scrollX,scrollY:r.scrollY})}):(0,c.cloneWindow)(f,p,t,r,d,e).then(function(e){var t=n(e,3),A=t[0],a=t[1],s=t[2];var c=(0,i.NodeParser)(a,s,d),h=a.ownerDocument;return w===c.container.style.background.backgroundColor&&(c.container.style.background.backgroundColor=l.TRANSPARENT),s.ready().then(function(e){var t=new u.FontMetrics(h);var n={backgroundColor:w,fontMetrics:t,imageStore:e,logger:d,scale:r.scale,x:r.x,y:r.y,width:r.width,height:r.height};if(Array.isArray(r.target))return Promise.all(r.target.map(function(e){return new o.default(e,n).render(c)}));var i=new o.default(r.target,n).render(c);return!0===r.removeContainer&&A.parentNode&&A.parentNode.removeChild(A),i})});var s})}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NodeParser=void 0;var n=c(r(151)),i=c(r(20)),o=c(r(42)),A=r(93),a=r(61),s=r(41);function c(e){return e&&e.__esModule?e:{default:e}}t.NodeParser=function(e,t,r){var o=0,A=new i.default(e,null,t,o++),a=new n.default(A,null,!0);return l(e,A,a,t,1),a};var u=["SCRIPT","HEAD","TITLE","OBJECT","BR","OPTION"],l=function e(t,r,c,l,f){for(var p,g=t.firstChild;g;g=p){p=g.nextSibling;var B=g.ownerDocument.defaultView;if(g instanceof B.Text||g instanceof Text||B.parent&&g instanceof B.parent.Text)g.data.trim().length>0&&r.childNodes.push(o.default.fromTextNode(g,r));else if(g instanceof B.HTMLElement||g instanceof HTMLElement||B.parent&&g instanceof B.parent.HTMLElement){if(-1===u.indexOf(g.nodeName)){var w=new i.default(g,r,l,f++);if(w.isVisible()){"INPUT"===g.tagName?(0,A.inlineInputElement)(g,w):"TEXTAREA"===g.tagName?(0,A.inlineTextAreaElement)(g,w):"SELECT"===g.tagName?(0,A.inlineSelectElement)(g,w):w.style.listStyle&&w.style.listStyle.listStyleType!==s.LIST_STYLE_TYPE.NONE&&(0,a.inlineListItemElement)(g,w,l);var y="TEXTAREA"!==g.tagName,v=h(w,g);if(v||d(w)){var m=v||w.isPositioned()?c.getRealParentStackingContext():c,b=new n.default(w,m,v);m.contexts.push(b),y&&e(g,w,b,l,f)}else c.children.push(w),y&&e(g,w,c,l,f)}}}else if(g instanceof B.SVGSVGElement||g instanceof SVGSVGElement||B.parent&&g instanceof B.parent.SVGSVGElement){var E=new i.default(g,r,l,f++),C=h(E,g);if(C||d(E)){var T=C||E.isPositioned()?c.getRealParentStackingContext():c,U=new n.default(E,T,C);T.contexts.push(U)}else c.children.push(E)}}},h=function(e,t){return e.isRootElement()||e.isPositionedWithZIndex()||e.style.opacity<1||e.isTransformed()||f(e,t)},d=function(e){return e.isPositioned()||e.isFloating()},f=function(e,t){return"BODY"===t.nodeName&&e.parent instanceof i.default&&e.parent.style.background.backgroundColor.isTransparent()}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(20);(n=o)&&n.__esModule,r(91);var A=function(){function e(t,r,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.container=t,this.parent=r,this.contexts=[],this.children=[],this.treatAsRealStackingContext=n}return i(e,[{key:"getOpacity",value:function(){return this.parent?this.container.style.opacity*this.parent.getOpacity():this.container.style.opacity}},{key:"getRealParentStackingContext",value:function(){return!this.parent||this.treatAsRealStackingContext?this:this.parent.getRealParentStackingContext()}}]),e}();t.default=A},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.width=t,this.height=r}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(39),A=r(40),a=(n=A)&&n.__esModule?n:{default:n};var s=function(e,t,r){return new a.default(e.x+(t.x-e.x)*r,e.y+(t.y-e.y)*r)},c=function(){function e(t,r,n,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.type=o.PATH.BEZIER_CURVE,this.start=t,this.startControl=r,this.endControl=n,this.end=i}return i(e,[{key:"subdivide",value:function(t,r){var n=s(this.start,this.startControl,t),i=s(this.startControl,this.endControl,t),o=s(this.endControl,this.end,t),A=s(n,i,t),a=s(i,o,t),c=s(A,a,t);return r?new e(this.start,n,A,c):new e(c,a,o,this.end)}},{key:"reverse",value:function(){return new e(this.end,this.endControl,this.startControl,this.start)}}]),e}();t.default=c},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseBorderRadius=void 0;var n,i=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,i=!1,o=void 0;try{for(var A,a=e[Symbol.iterator]();!(n=(A=a.next()).done)&&(r.push(A.value),!t||r.length!==t);n=!0);}catch(e){i=!0,o=e}finally{try{!n&&a.return&&a.return()}finally{if(i)throw o}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},o=r(16),A=(n=o)&&n.__esModule?n:{default:n};var a=["top-left","top-right","bottom-right","bottom-left"];t.parseBorderRadius=function(e){return a.map(function(t){var r=e.getPropertyValue("border-"+t+"-radius").split(" ").map(A.default.create),n=i(r,2),o=n[0],a=n[1];return void 0===a?[o,o]:[o,a]})}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=t.DISPLAY={NONE:1,BLOCK:2,INLINE:4,RUN_IN:8,FLOW:16,FLOW_ROOT:32,TABLE:64,FLEX:128,GRID:256,RUBY:512,SUBGRID:1024,LIST_ITEM:2048,TABLE_ROW_GROUP:4096,TABLE_HEADER_GROUP:8192,TABLE_FOOTER_GROUP:16384,TABLE_ROW:32768,TABLE_CELL:65536,TABLE_COLUMN_GROUP:1<<17,TABLE_COLUMN:1<<18,TABLE_CAPTION:1<<19,RUBY_BASE:1<<20,RUBY_TEXT:1<<21,RUBY_BASE_CONTAINER:1<<22,RUBY_TEXT_CONTAINER:1<<23,CONTENTS:1<<24,INLINE_BLOCK:1<<25,INLINE_LIST_ITEM:1<<26,INLINE_TABLE:1<<27,INLINE_FLEX:1<<28,INLINE_GRID:1<<29},i=function(e,t){return e|function(e){switch(e){case"block":return n.BLOCK;case"inline":return n.INLINE;case"run-in":return n.RUN_IN;case"flow":return n.FLOW;case"flow-root":return n.FLOW_ROOT;case"table":return n.TABLE;case"flex":return n.FLEX;case"grid":return n.GRID;case"ruby":return n.RUBY;case"subgrid":return n.SUBGRID;case"list-item":return n.LIST_ITEM;case"table-row-group":return n.TABLE_ROW_GROUP;case"table-header-group":return n.TABLE_HEADER_GROUP;case"table-footer-group":return n.TABLE_FOOTER_GROUP;case"table-row":return n.TABLE_ROW;case"table-cell":return n.TABLE_CELL;case"table-column-group":return n.TABLE_COLUMN_GROUP;case"table-column":return n.TABLE_COLUMN;case"table-caption":return n.TABLE_CAPTION;case"ruby-base":return n.RUBY_BASE;case"ruby-text":return n.RUBY_TEXT;case"ruby-base-container":return n.RUBY_BASE_CONTAINER;case"ruby-text-container":return n.RUBY_TEXT_CONTAINER;case"contents":return n.CONTENTS;case"inline-block":return n.INLINE_BLOCK;case"inline-list-item":return n.INLINE_LIST_ITEM;case"inline-table":return n.INLINE_TABLE;case"inline-flex":return n.INLINE_FLEX;case"inline-grid":return n.INLINE_GRID}return n.NONE}(t)};t.parseDisplay=function(e){return e.split(" ").reduce(i,0)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=t.FLOAT={NONE:0,LEFT:1,RIGHT:2,INLINE_START:3,INLINE_END:4};t.parseCSSFloat=function(e){switch(e){case"left":return n.LEFT;case"right":return n.RIGHT;case"inline-start":return n.INLINE_START;case"inline-end":return n.INLINE_END}return n.NONE}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.parseFont=function(e){return{fontFamily:e.fontFamily,fontSize:e.fontSize,fontStyle:e.fontStyle,fontVariant:e.fontVariant,fontWeight:function(e){switch(e){case"normal":return 400;case"bold":return 700}var t=parseInt(e,10);return isNaN(t)?400:t}(e.fontWeight)}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.parseLetterSpacing=function(e){if("normal"===e)return 0;var t=parseFloat(e);return isNaN(t)?0:t}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=t.LINE_BREAK={NORMAL:"normal",STRICT:"strict"};t.parseLineBreak=function(e){switch(e){case"strict":return n.STRICT;case"normal":default:return n.NORMAL}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseMargin=void 0;var n,i=r(16),o=(n=i)&&n.__esModule?n:{default:n};var A=["top","right","bottom","left"];t.parseMargin=function(e){return A.map(function(t){return new o.default(e.getPropertyValue("margin-"+t))})}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=t.OVERFLOW={VISIBLE:0,HIDDEN:1,SCROLL:2,AUTO:3};t.parseOverflow=function(e){switch(e){case"hidden":return n.HIDDEN;case"scroll":return n.SCROLL;case"auto":return n.AUTO;case"visible":default:return n.VISIBLE}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseTextShadow=void 0;var n,i=r(13),o=(n=i)&&n.__esModule?n:{default:n};var A=/^([+-]|\d|\.)$/i;t.parseTextShadow=function(e){if("none"===e||"string"!=typeof e)return null;for(var t="",r=!1,n=[],i=[],a=0,s=null,c=function(){t.length&&(r?n.push(parseFloat(t)):s=new o.default(t)),r=!1,t=""},u=function(){n.length&&null!==s&&i.push({color:s,offsetX:n[0]||0,offsetY:n[1]||0,blur:n[2]||0}),n.splice(0,n.length),s=null},l=0;l<e.length;l++){var h=e[l];switch(h){case"(":t+=h,a++;break;case")":t+=h,a--;break;case",":0===a?(c(),u()):t+=h;break;case" ":0===a?c():t+=h;break;default:0===t.length&&A.test(h)&&(r=!0),t+=h}}return c(),u(),0===i.length?null:i}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseTransform=void 0;var n,i=r(16),o=(n=i)&&n.__esModule?n:{default:n};var A=function(e){return parseFloat(e.trim())},a=/(matrix|matrix3d)\((.+)\)/,s=(t.parseTransform=function(e){var t=c(e.transform||e.webkitTransform||e.mozTransform||e.msTransform||e.oTransform);return null===t?null:{transform:t,transformOrigin:s(e.transformOrigin||e.webkitTransformOrigin||e.mozTransformOrigin||e.msTransformOrigin||e.oTransformOrigin)}},function(e){if("string"!=typeof e){var t=new o.default("0");return[t,t]}var r=e.split(" ").map(o.default.create);return[r[0],r[1]]}),c=function(e){if("none"===e||"string"!=typeof e)return null;var t=e.match(a);if(t){if("matrix"===t[1]){var r=t[2].split(",").map(A);return[r[0],r[1],r[2],r[3],r[4],r[5]]}var n=t[2].split(",").map(A);return[n[0],n[1],n[4],n[5],n[12],n[13]]}return null}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=t.VISIBILITY={VISIBLE:0,HIDDEN:1,COLLAPSE:2};t.parseVisibility=function(e){switch(e){case"hidden":return n.HIDDEN;case"collapse":return n.COLLAPSE;case"visible":default:return n.VISIBLE}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=t.WORD_BREAK={NORMAL:"normal",BREAK_ALL:"break-all",KEEP_ALL:"keep-all"};t.parseWordBreak=function(e){switch(e){case"break-all":return n.BREAK_ALL;case"keep-all":return n.KEEP_ALL;case"normal":default:return n.NORMAL}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.parseZIndex=function(e){var t="auto"===e;return{auto:t,order:t?0:parseInt(e,10)}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(60);Object.defineProperty(t,"toCodePoints",{enumerable:!0,get:function(){return n.toCodePoints}}),Object.defineProperty(t,"fromCodePoint",{enumerable:!0,get:function(){return n.fromCodePoint}});var i=r(168);Object.defineProperty(t,"LineBreaker",{enumerable:!0,get:function(){return i.LineBreaker}})},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LineBreaker=t.inlineBreakOpportunities=t.lineBreakAtIndex=t.codePointsToCharacterClasses=t.UnicodeTrie=t.BREAK_ALLOWED=t.BREAK_NOT_ALLOWED=t.BREAK_MANDATORY=t.classes=t.LETTER_NUMBER_MODIFIER=void 0;var n,i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,i=!1,o=void 0;try{for(var A,a=e[Symbol.iterator]();!(n=(A=a.next()).done)&&(r.push(A.value),!t||r.length!==t);n=!0);}catch(e){i=!0,o=e}finally{try{!n&&a.return&&a.return()}finally{if(i)throw o}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},A=r(169),a=r(170),s=(n=a)&&n.__esModule?n:{default:n},c=r(60);var u=t.LETTER_NUMBER_MODIFIER=50,l=10,h=13,d=15,f=17,p=18,g=19,B=20,w=21,y=22,v=24,m=25,b=26,E=27,C=28,T=30,U=32,_=33,Q=34,F=35,x=37,S=38,I=39,M=40,O=42,R=(t.classes={BK:1,CR:2,LF:3,CM:4,NL:5,SG:6,WJ:7,ZW:8,GL:9,SP:l,ZWJ:11,B2:12,BA:h,BB:14,HY:d,CB:16,CL:f,CP:p,EX:g,IN:B,NS:w,OP:y,QU:23,IS:v,NU:m,PO:b,PR:E,SY:C,AI:29,AL:T,CJ:31,EB:U,EM:_,H2:Q,H3:F,HL:36,ID:x,JL:S,JV:I,JT:M,RI:41,SA:O,XX:43},t.BREAK_MANDATORY="!"),P=t.BREAK_NOT_ALLOWED="",N=t.BREAK_ALLOWED="",L=t.UnicodeTrie=(0,A.createTrieFromBase64)(s.default),H=[T,36],D=[1,2,3,5],k=[l,8],z=[E,b],K=D.concat(k),j=[S,I,M,Q,F],G=[d,h],V=t.codePointsToCharacterClasses=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"strict",r=[],n=[],i=[];return e.forEach(function(e,o){var A=L.get(e);if(A>u?(i.push(!0),A-=u):i.push(!1),-1!==["normal","auto","loose"].indexOf(t)&&-1!==[8208,8211,12316,12448].indexOf(e))return n.push(o),r.push(16);if(4===A||11===A){if(0===o)return n.push(o),r.push(T);var a=r[o-1];return-1===K.indexOf(a)?(n.push(n[o-1]),r.push(a)):(n.push(o),r.push(T))}return n.push(o),31===A?r.push("strict"===t?w:x):A===O?r.push(T):29===A?r.push(T):43===A?e>=131072&&e<=196605||e>=196608&&e<=262141?r.push(x):r.push(T):void r.push(A)}),[n,r,i]},X=function(e,t,r,n){var i=n[r];if(Array.isArray(e)?-1!==e.indexOf(i):e===i)for(var o=r;o<=n.length;){var A=n[++o];if(A===t)return!0;if(A!==l)break}if(i===l)for(var a=r;a>0;){var s=n[--a];if(Array.isArray(e)?-1!==e.indexOf(s):e===s)for(var c=r;c<=n.length;){var u=n[++c];if(u===t)return!0;if(u!==l)break}if(s!==l)break}return!1},W=function(e,t){for(var r=e;r>=0;){var n=t[r];if(n!==l)return n;r--}return 0},Y=function(e,t,r,n,i){if(0===r[n])return P;var o=n-1;if(Array.isArray(i)&&!0===i[o])return P;var A=o-1,a=o+1,s=t[o],c=A>=0?t[A]:0,u=t[a];if(2===s&&3===u)return P;if(-1!==D.indexOf(s))return R;if(-1!==D.indexOf(u))return P;if(-1!==k.indexOf(u))return P;if(8===W(o,t))return N;if(11===L.get(e[o])&&(u===x||u===U||u===_))return P;if(7===s||7===u)return P;if(9===s)return P;if(-1===[l,h,d].indexOf(s)&&9===u)return P;if(-1!==[f,p,g,v,C].indexOf(u))return P;if(W(o,t)===y)return P;if(X(23,y,o,t))return P;if(X([f,p],w,o,t))return P;if(X(12,12,o,t))return P;if(s===l)return N;if(23===s||23===u)return P;if(16===u||16===s)return N;if(-1!==[h,d,w].indexOf(u)||14===s)return P;if(36===c&&-1!==G.indexOf(s))return P;if(s===C&&36===u)return P;if(u===B&&-1!==H.concat(B,g,m,x,U,_).indexOf(s))return P;if(-1!==H.indexOf(u)&&s===m||-1!==H.indexOf(s)&&u===m)return P;if(s===E&&-1!==[x,U,_].indexOf(u)||-1!==[x,U,_].indexOf(s)&&u===b)return P;if(-1!==H.indexOf(s)&&-1!==z.indexOf(u)||-1!==z.indexOf(s)&&-1!==H.indexOf(u))return P;if(-1!==[E,b].indexOf(s)&&(u===m||-1!==[y,d].indexOf(u)&&t[a+1]===m)||-1!==[y,d].indexOf(s)&&u===m||s===m&&-1!==[m,C,v].indexOf(u))return P;if(-1!==[m,C,v,f,p].indexOf(u))for(var T=o;T>=0;){var O=t[T];if(O===m)return P;if(-1===[C,v].indexOf(O))break;T--}if(-1!==[E,b].indexOf(u))for(var K=-1!==[f,p].indexOf(s)?A:o;K>=0;){var V=t[K];if(V===m)return P;if(-1===[C,v].indexOf(V))break;K--}if(S===s&&-1!==[S,I,Q,F].indexOf(u)||-1!==[I,Q].indexOf(s)&&-1!==[I,M].indexOf(u)||-1!==[M,F].indexOf(s)&&u===M)return P;if(-1!==j.indexOf(s)&&-1!==[B,b].indexOf(u)||-1!==j.indexOf(u)&&s===E)return P;if(-1!==H.indexOf(s)&&-1!==H.indexOf(u))return P;if(s===v&&-1!==H.indexOf(u))return P;if(-1!==H.concat(m).indexOf(s)&&u===y||-1!==H.concat(m).indexOf(u)&&s===p)return P;if(41===s&&41===u){for(var Y=r[o],J=1;Y>0&&41===t[--Y];)J++;if(J%2!=0)return P}return s===U&&u===_?P:N},J=(t.lineBreakAtIndex=function(e,t){if(0===t)return P;if(t>=e.length)return R;var r=V(e),n=o(r,2),i=n[0],A=n[1];return Y(e,A,i,t)},function(e,t){t||(t={lineBreak:"normal",wordBreak:"normal"});var r=V(e,t.lineBreak),n=o(r,3),i=n[0],A=n[1],a=n[2];return"break-all"!==t.wordBreak&&"break-word"!==t.wordBreak||(A=A.map(function(e){return-1!==[m,T,O].indexOf(e)?x:e})),[i,A,"keep-all"===t.wordBreak?a.map(function(t,r){return t&&e[r]>=19968&&e[r]<=40959}):null]}),q=(t.inlineBreakOpportunities=function(e,t){var r=(0,c.toCodePoints)(e),n=P,i=J(r,t),A=o(i,3),a=A[0],s=A[1],u=A[2];return r.forEach(function(e,t){n+=(0,c.fromCodePoint)(e)+(t>=r.length-1?R:Y(r,s,a,t+1,u))}),n},function(){function e(t,r,n,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._codePoints=t,this.required=r===R,this.start=n,this.end=i}return i(e,[{key:"slice",value:function(){return c.fromCodePoint.apply(void 0,function(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}(this._codePoints.slice(this.start,this.end)))}}]),e}());t.LineBreaker=function(e,t){var r=(0,c.toCodePoints)(e),n=J(r,t),i=o(n,3),A=i[0],a=i[1],s=i[2],u=r.length,l=0,h=0;return{next:function(){if(h>=u)return{done:!0};for(var e=P;h<u&&(e=Y(r,a,A,++h,s))===P;);if(e!==P||h===u){var t=new q(r,e,l,h);return l=h,{value:t,done:!1}}return{done:!0}}}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Trie=t.createTrieFromBase64=t.UTRIE2_INDEX_2_MASK=t.UTRIE2_INDEX_2_BLOCK_LENGTH=t.UTRIE2_OMITTED_BMP_INDEX_1_LENGTH=t.UTRIE2_INDEX_1_OFFSET=t.UTRIE2_UTF8_2B_INDEX_2_LENGTH=t.UTRIE2_UTF8_2B_INDEX_2_OFFSET=t.UTRIE2_INDEX_2_BMP_LENGTH=t.UTRIE2_LSCP_INDEX_2_LENGTH=t.UTRIE2_DATA_MASK=t.UTRIE2_DATA_BLOCK_LENGTH=t.UTRIE2_LSCP_INDEX_2_OFFSET=t.UTRIE2_SHIFT_1_2=t.UTRIE2_INDEX_SHIFT=t.UTRIE2_SHIFT_1=t.UTRIE2_SHIFT_2=void 0;var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=r(60);var o=t.UTRIE2_SHIFT_2=5,A=t.UTRIE2_SHIFT_1=11,a=t.UTRIE2_INDEX_SHIFT=2,s=t.UTRIE2_SHIFT_1_2=A-o,c=t.UTRIE2_LSCP_INDEX_2_OFFSET=65536>>o,u=t.UTRIE2_DATA_BLOCK_LENGTH=1<<o,l=t.UTRIE2_DATA_MASK=u-1,h=t.UTRIE2_LSCP_INDEX_2_LENGTH=1024>>o,d=t.UTRIE2_INDEX_2_BMP_LENGTH=c+h,f=t.UTRIE2_UTF8_2B_INDEX_2_OFFSET=d,p=t.UTRIE2_UTF8_2B_INDEX_2_LENGTH=32,g=t.UTRIE2_INDEX_1_OFFSET=f+p,B=t.UTRIE2_OMITTED_BMP_INDEX_1_LENGTH=65536>>A,w=t.UTRIE2_INDEX_2_BLOCK_LENGTH=1<<s,y=t.UTRIE2_INDEX_2_MASK=w-1,v=(t.createTrieFromBase64=function(e){var t=(0,i.decode)(e),r=Array.isArray(t)?(0,i.polyUint32Array)(t):new Uint32Array(t),n=Array.isArray(t)?(0,i.polyUint16Array)(t):new Uint16Array(t),o=n.slice(12,r[4]/2),A=2===r[5]?n.slice((24+r[4])/2):r.slice(Math.ceil((24+r[4])/4));return new v(r[0],r[1],r[2],r[3],o,A)},t.Trie=function(){function e(t,r,n,i,o,A){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.initialValue=t,this.errorValue=r,this.highStart=n,this.highValueIndex=i,this.index=o,this.data=A}return n(e,[{key:"get",value:function(e){var t=void 0;if(e>=0){if(e<55296||e>56319&&e<=65535)return t=((t=this.index[e>>o])<<a)+(e&l),this.data[t];if(e<=65535)return t=((t=this.index[c+(e-55296>>o)])<<a)+(e&l),this.data[t];if(e<this.highStart)return t=g-B+(e>>A),t=this.index[t],t+=e>>o&y,t=((t=this.index[t])<<a)+(e&l),this.data[t];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue}}]),e}())},function(e,t,r){"use strict";e.exports="KwAAAAAAAAAACA4AIDoAAPAfAAACAAAAAAAIABAAGABAAEgAUABYAF4AZgBeAGYAYABoAHAAeABeAGYAfACEAIAAiACQAJgAoACoAK0AtQC9AMUAXgBmAF4AZgBeAGYAzQDVAF4AZgDRANkA3gDmAOwA9AD8AAQBDAEUARoBIgGAAIgAJwEvATcBPwFFAU0BTAFUAVwBZAFsAXMBewGDATAAiwGTAZsBogGkAawBtAG8AcIBygHSAdoB4AHoAfAB+AH+AQYCDgIWAv4BHgImAi4CNgI+AkUCTQJTAlsCYwJrAnECeQKBAk0CiQKRApkCoQKoArACuALAAsQCzAIwANQC3ALkAjAA7AL0AvwCAQMJAxADGAMwACADJgMuAzYDPgOAAEYDSgNSA1IDUgNaA1oDYANiA2IDgACAAGoDgAByA3YDfgOAAIQDgACKA5IDmgOAAIAAogOqA4AAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAK8DtwOAAIAAvwPHA88D1wPfAyAD5wPsA/QD/AOAAIAABAQMBBIEgAAWBB4EJgQuBDMEIAM7BEEEXgBJBCADUQRZBGEEaQQwADAAcQQ+AXkEgQSJBJEEgACYBIAAoASoBK8EtwQwAL8ExQSAAIAAgACAAIAAgACgAM0EXgBeAF4AXgBeAF4AXgBeANUEXgDZBOEEXgDpBPEE+QQBBQkFEQUZBSEFKQUxBTUFPQVFBUwFVAVcBV4AYwVeAGsFcwV7BYMFiwWSBV4AmgWgBacFXgBeAF4AXgBeAKsFXgCyBbEFugW7BcIFwgXIBcIFwgXQBdQF3AXkBesF8wX7BQMGCwYTBhsGIwYrBjMGOwZeAD8GRwZNBl4AVAZbBl4AXgBeAF4AXgBeAF4AXgBeAF4AXgBeAGMGXgBqBnEGXgBeAF4AXgBeAF4AXgBeAF4AXgB5BoAG4wSGBo4GkwaAAIADHgR5AF4AXgBeAJsGgABGA4AAowarBrMGswagALsGwwbLBjAA0wbaBtoG3QbaBtoG2gbaBtoG2gblBusG8wb7BgMHCwcTBxsHCwcjBysHMAc1BzUHOgdCB9oGSgdSB1oHYAfaBloHaAfaBlIH2gbaBtoG2gbaBtoG2gbaBjUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHbQdeAF4ANQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQd1B30HNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1B4MH2gaKB68EgACAAIAAgACAAIAAgACAAI8HlwdeAJ8HpweAAIAArwe3B14AXgC/B8UHygcwANAH2AfgB4AA6AfwBz4B+AcACFwBCAgPCBcIogEYAR8IJwiAAC8INwg/CCADRwhPCFcIXwhnCEoDGgSAAIAAgABvCHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIhAiLCI4IMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAANQc1BzUHNQc1BzUHNQc1BzUHNQc1B54INQc1B6II2gaqCLIIugiAAIAAvgjGCIAAgACAAIAAgACAAIAAgACAAIAAywiHAYAA0wiAANkI3QjlCO0I9Aj8CIAAgACAAAIJCgkSCRoJIgknCTYHLwk3CZYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiAAIAAAAFAAXgBeAGAAcABeAHwAQACQAKAArQC9AJ4AXgBeAE0A3gBRAN4A7AD8AMwBGgEAAKcBNwEFAUwBXAF4QkhCmEKnArcCgAHHAsABz4LAAcABwAHAAd+C6ABoAG+C/4LAAcABwAHAAc+DF4MAAcAB54M3gweDV4Nng3eDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEeDqABVg6WDqABoQ6gAaABoAHXDvcONw/3DvcO9w73DvcO9w73DvcO9w73DvcO9w73DvcO9w73DvcO9w73DvcO9w73DvcO9w73DvcO9w73DvcO9w73DncPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB7cPPwlGCU4JMACAAIAAgABWCV4JYQmAAGkJcAl4CXwJgAkwADAAMAAwAIgJgACLCZMJgACZCZ8JowmrCYAAswkwAF4AXgB8AIAAuwkABMMJyQmAAM4JgADVCTAAMAAwADAAgACAAIAAgACAAIAAgACAAIAAqwYWBNkIMAAwADAAMADdCeAJ6AnuCR4E9gkwAP4JBQoNCjAAMACAABUK0wiAAB0KJAosCjQKgAAwADwKQwqAAEsKvQmdCVMKWwowADAAgACAALcEMACAAGMKgABrCjAAMAAwADAAMAAwADAAMAAwADAAMAAeBDAAMAAwADAAMAAwADAAMAAwADAAMAAwAIkEPQFzCnoKiQSCCooKkAqJBJgKoAqkCokEGAGsCrQKvArBCjAAMADJCtEKFQHZCuEK/gHpCvEKMAAwADAAMACAAIwE+QowAIAAPwEBCzAAMAAwADAAMACAAAkLEQswAIAAPwEZCyELgAAOCCkLMAAxCzkLMAAwADAAMAAwADAAXgBeAEELMAAwADAAMAAwADAAMAAwAEkLTQtVC4AAXAtkC4AAiQkwADAAMAAwADAAMAAwADAAbAtxC3kLgAuFC4sLMAAwAJMLlwufCzAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAApwswADAAMACAAIAAgACvC4AAgACAAIAAgACAALcLMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAvwuAAMcLgACAAIAAgACAAIAAyguAAIAAgACAAIAA0QswADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAANkLgACAAIAA4AswADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACJCR4E6AswADAAhwHwC4AA+AsADAgMEAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMACAAIAAGAwdDCUMMAAwAC0MNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQw1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHPQwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADUHNQc1BzUHNQc1BzUHNQc2BzAAMAA5DDUHNQc1BzUHNQc1BzUHNQc1BzUHNQdFDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAgACAAIAATQxSDFoMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAF4AXgBeAF4AXgBeAF4AYgxeAGoMXgBxDHkMfwxeAIUMXgBeAI0MMAAwADAAMAAwAF4AXgCVDJ0MMAAwADAAMABeAF4ApQxeAKsMswy7DF4Awgy9DMoMXgBeAF4AXgBeAF4AXgBeAF4AXgDRDNkMeQBqCeAM3Ax8AOYM7Az0DPgMXgBeAF4AXgBeAF4AXgBeAF4AXgBeAF4AXgBeAF4AXgCgAAANoAAHDQ4NFg0wADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAeDSYNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIAAgACAAIAAgACAAC4NMABeAF4ANg0wADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAD4NRg1ODVYNXg1mDTAAbQ0wADAAMAAwADAAMAAwADAA2gbaBtoG2gbaBtoG2gbaBnUNeg3CBYANwgWFDdoGjA3aBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gaUDZwNpA2oDdoG2gawDbcNvw3HDdoG2gbPDdYN3A3fDeYN2gbsDfMN2gbaBvoN/g3aBgYODg7aBl4AXgBeABYOXgBeACUG2gYeDl4AJA5eACwO2w3aBtoGMQ45DtoG2gbaBtoGQQ7aBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gZJDjUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1B1EO2gY1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQdZDjUHNQc1BzUHNQc1B2EONQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHaA41BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1B3AO2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gY1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1B2EO2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gZJDtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBkkOeA6gAKAAoAAwADAAMAAwAKAAoACgAKAAoACgAKAAgA4wADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAD//wQABAAEAAQABAAEAAQABAAEAA0AAwABAAEAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAKABMAFwAeABsAGgAeABcAFgASAB4AGwAYAA8AGAAcAEsASwBLAEsASwBLAEsASwBLAEsAGAAYAB4AHgAeABMAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAFgAbABIAHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYADQARAB4ABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkAFgAaABsAGwAbAB4AHQAdAB4ATwAXAB4ADQAeAB4AGgAbAE8ATwAOAFAAHQAdAB0ATwBPABcATwBPAE8AFgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwArAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAAQABAANAA0ASwBLAEsASwBLAEsASwBLAEsASwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUAArACsABABQAAQABAAEAAQABAAEAAQAKwArAAQABAArACsABAAEAAQAUAArACsAKwArACsAKwArACsABAArACsAKwArAFAAUAArAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAGgAaAFAAUABQAFAAUABMAB4AGwBQAB4AKwArACsABAAEAAQAKwBQAFAAUABQAFAAUAArACsAKwArAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUAArAFAAUAArACsABAArAAQABAAEAAQABAArACsAKwArAAQABAArACsABAAEAAQAKwArACsABAArACsAKwArACsAKwArAFAAUABQAFAAKwBQACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwAEAAQAUABQAFAABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUAArACsABABQAAQABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQAKwArAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwAeABsAKwArACsAKwArACsAKwBQAAQABAAEAAQABAAEACsABAAEAAQAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwArAAQABAArACsABAAEAAQAKwArACsAKwArACsAKwArAAQABAArACsAKwArAFAAUAArAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwAeAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwAEAFAAKwBQAFAAUABQAFAAUAArACsAKwBQAFAAUAArAFAAUABQAFAAKwArACsAUABQACsAUAArAFAAUAArACsAKwBQAFAAKwArACsAUABQAFAAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQAKwArACsABAAEAAQAKwAEAAQABAAEACsAKwBQACsAKwArACsAKwArAAQAKwArACsAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAB4AHgAeAB4AHgAeABsAHgArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABAArACsAKwArACsAKwArAAQABAArAFAAUABQACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAB4AUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABAArACsAKwArACsAKwArAAQABAArACsAKwArACsAKwArAFAAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwArAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAKwBcAFwAKwBcACsAKwBcACsAKwArACsAKwArAFwAXABcAFwAKwBcAFwAXABcAFwAXABcACsAXABcAFwAKwBcACsAXAArACsAXABcACsAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgArACoAKgBcACsAKwBcAFwAXABcAFwAKwBcACsAKgAqACoAKgAqACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAFwAXABcAFwAUAAOAA4ADgAOAB4ADgAOAAkADgAOAA0ACQATABMAEwATABMACQAeABMAHgAeAB4ABAAEAB4AHgAeAB4AHgAeAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUAANAAQAHgAEAB4ABAAWABEAFgARAAQABABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAAQABAAEAAQABAANAAQABABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsADQANAB4AHgAeAB4AHgAeAAQAHgAeAB4AHgAeAB4AKwAeAB4ADgAOAA0ADgAeAB4AHgAeAB4ACQAJACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgAeAB4AHgBcAFwAXABcAFwAXAAqACoAKgAqAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAKgAqACoAKgAqACoAKgBcAFwAXAAqACoAKgAqAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAXAAqAEsASwBLAEsASwBLAEsASwBLAEsAKgAqACoAKgAqACoAUABQAFAAUABQAFAAKwBQACsAKwArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQACsAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwAEAAQABAAeAA0AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAEQArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAADQANAA0AUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAA0ADQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQACsABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoADQANABUAXAANAB4ADQAbAFwAKgArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAB4AHgATABMADQANAA4AHgATABMAHgAEAAQABAAJACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAUABQAFAAUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwAeACsAKwArABMAEwBLAEsASwBLAEsASwBLAEsASwBLAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwBcAFwAXABcAFwAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcACsAKwArACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwAeAB4AXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgArACsABABLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKgAqACoAKgAqACoAKgBcACoAKgAqACoAKgAqACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAUABQAFAAUABQAFAAUAArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4ADQANAA0ADQAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAHgAeAB4AHgBQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwANAA0ADQANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwBQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsABAAEAAQAHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAABABQAFAAUABQAAQABAAEAFAAUAAEAAQABAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAKwBQACsAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAKwArAB4AHgAeAB4AHgAeACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAUABQAFAAKwAeAB4AHgAeAB4AHgAeAA4AHgArAA0ADQANAA0ADQANAA0ACQANAA0ADQAIAAQACwAEAAQADQAJAA0ADQAMAB0AHQAeABcAFwAWABcAFwAXABYAFwAdAB0AHgAeABQAFAAUAA0AAQABAAQABAAEAAQABAAJABoAGgAaABoAGgAaABoAGgAeABcAFwAdABUAFQAeAB4AHgAeAB4AHgAYABYAEQAVABUAFQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgANAB4ADQANAA0ADQAeAA0ADQANAAcAHgAeAB4AHgArAAQABAAEAAQABAAEAAQABAAEAAQAUABQACsAKwBPAFAAUABQAFAAUAAeAB4AHgAWABEATwBQAE8ATwBPAE8AUABQAFAAUABQAB4AHgAeABYAEQArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAGwAbABsAGwAbABsAGwAaABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAaABsAGwAbABsAGgAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgBQABoAHgAdAB4AUAAeABoAHgAeAB4AHgAeAB4AHgAeAB4ATwAeAFAAGwAeAB4AUABQAFAAUABQAB4AHgAeAB0AHQAeAFAAHgBQAB4AUAAeAFAATwBQAFAAHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AUABQAFAAUABPAE8AUABQAFAAUABQAE8AUABQAE8AUABPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAE8ATwBPAE8ATwBPAE8ATwBPAE8AUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAATwAeAB4AKwArACsAKwAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB0AHQAeAB4AHgAdAB0AHgAeAB0AHgAeAB4AHQAeAB0AGwAbAB4AHQAeAB4AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB0AHgAdAB4AHQAdAB0AHQAdAB0AHgAdAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAdAB0AHQAdAB4AHgAdAB0AHgAeAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABQAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAlACUAHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBQAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAeAB4AHgAeAB0AHQAeAB4AHgAeAB0AHQAdAB4AHgAdAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB0AHQAeAB4AHQAeAB4AHgAeAB0AHQAeAB4AHgAeACUAJQAdAB0AJQAeACUAJQAlACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAHgAeAB4AHgAdAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHQAdAB0AHgAdACUAHQAdAB4AHQAdAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHQAdAB0AHQAlAB4AJQAlACUAHQAlACUAHQAdAB0AJQAlAB0AHQAlAB0AHQAlACUAJQAeAB0AHgAeAB4AHgAdAB0AJQAdAB0AHQAdAB0AHQAlACUAJQAlACUAHQAlACUAIAAlAB0AHQAlACUAJQAlACUAJQAlACUAHgAeAB4AJQAlACAAIAAgACAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeABcAFwAXABcAFwAXAB4AEwATACUAHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwArACUAJQBXAFcAVwBXACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAKwArACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAE8ATwBPAE8ATwBPAE8ATwAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeACsAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUAArACsAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQBQAFAAUABQACsAKwArACsAUABQAFAAUABQAFAAUABQAA0AUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQACsAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgBQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAABAAEAAQAKwAEAAQAKwArACsAKwArAAQABAAEAAQAUABQAFAAUAArAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsABAAEAAQAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsADQANAA0ADQANAA0ADQANAB4AKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AUABQAFAAUABQAFAAUABQAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAUABQAFAAUABQAA0ADQANAA0ADQANABQAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwANAA0ADQANAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAeAAQABAAEAB4AKwArAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLACsADQArAB4AKwArAAQABAAEAAQAUABQAB4AUAArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwAEAAQABAAEAAQABAAEAAQABAAOAA0ADQATABMAHgAeAB4ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0AUABQAFAAUAAEAAQAKwArAAQADQANAB4AUAArACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXABcAA0ADQANACoASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUAArACsAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANACsADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEcARwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQACsAKwAeAAQABAANAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAEAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUAArACsAUAArACsAUABQACsAKwBQAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AKwArAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAeAB4ADQANAA0ADQAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAArAAQABAArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAEAAQABAAEAAQABAAEACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAFgAWAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAKwBQACsAKwArACsAKwArAFAAKwArACsAKwBQACsAUAArAFAAKwBQAFAAUAArAFAAUAArAFAAKwArAFAAKwBQACsAUAArAFAAKwBQACsAUABQACsAUAArACsAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAUABQAFAAUAArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUAArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAlACUAJQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeACUAJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeACUAJQAlACUAJQAeACUAJQAlACUAJQAgACAAIAAlACUAIAAlACUAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAIQAhACEAIQAhACUAJQAgACAAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAIAAgACAAIAAlACUAJQAlACAAJQAgACAAIAAgACAAIAAgACAAIAAlACUAJQAgACUAJQAlACUAIAAgACAAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeACUAHgAlAB4AJQAlACUAJQAlACAAJQAlACUAJQAeACUAHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAIAAgACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAIAAlACUAJQAlACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAIAAgACAAJQAlACUAIAAgACAAIAAgAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFwAXABcAFQAVABUAHgAeAB4AHgAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAIAAgACAAJQAlACUAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAlACAAIAAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsA"},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(39);t.default=function e(t,r,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.type=n.PATH.CIRCLE,this.x=t,this.y=r,this.radius=i}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,i=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,i=!1,o=void 0;try{for(var A,a=e[Symbol.iterator]();!(n=(A=a.next()).done)&&(r.push(A.value),!t||r.length!==t);n=!0);}catch(e){i=!0,o=e}finally{try{!n&&a.return&&a.return()}finally{if(i)throw o}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),A=r(14),a=(r(97),r(173)),s=r(42),c=(n=s)&&n.__esModule?n:{default:n},u=r(28),l=r(59);var h=function(){function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.target=t,this.options=r,t.render(r)}return o(e,[{key:"renderNode",value:function(e){e.isVisible()&&(this.renderNodeBackgroundAndBorders(e),this.renderNodeContent(e))}},{key:"renderNodeContent",value:function(e){var t=this,r=function(){if(e.childNodes.length&&e.childNodes.forEach(function(r){if(r instanceof c.default){var n=r.parent.style;t.target.renderTextNode(r.bounds,n.color,n.font,n.textDecoration,n.textShadow)}else t.target.drawShape(r,e.style.color)}),e.image){var r=t.options.imageStore.get(e.image);if(r){var n=(0,A.calculateContentBox)(e.bounds,e.style.padding,e.style.border),i="number"==typeof r.width&&r.width>0?r.width:n.width,o="number"==typeof r.height&&r.height>0?r.height:n.height;i>0&&o>0&&t.target.clip([(0,A.calculatePaddingBoxPath)(e.curvedBounds)],function(){t.target.drawImage(r,new A.Bounds(0,0,i,o),n)})}}},n=e.getClipPaths();n.length?this.target.clip(n,r):r()}},{key:"renderNodeBackgroundAndBorders",value:function(e){var t=this,r=!e.style.background.backgroundColor.isTransparent()||e.style.background.backgroundImage.length,n=e.style.border.some(function(e){return e.borderStyle!==l.BORDER_STYLE.NONE&&!e.borderColor.isTransparent()}),i=function(){var n=(0,u.calculateBackgroungPaintingArea)(e.curvedBounds,e.style.background.backgroundClip);r&&t.target.clip([n],function(){e.style.background.backgroundColor.isTransparent()||t.target.fill(e.style.background.backgroundColor),t.renderBackgroundImage(e)}),e.style.border.forEach(function(r,n){r.borderStyle===l.BORDER_STYLE.NONE||r.borderColor.isTransparent()||t.renderBorder(r,n,e.curvedBounds)})};if(r||n){var o=e.parent?e.parent.getClipPaths():[];o.length?this.target.clip(o,i):i()}}},{key:"renderBackgroundImage",value:function(e){var t=this;e.style.background.backgroundImage.slice(0).reverse().forEach(function(r){"url"===r.source.method&&r.source.args.length?t.renderBackgroundRepeat(e,r):/gradient/i.test(r.source.method)&&t.renderBackgroundGradient(e,r)})}},{key:"renderBackgroundRepeat",value:function(e,t){var r=this.options.imageStore.get(t.source.args[0]);if(r){var n=(0,u.calculateBackgroungPositioningArea)(e.style.background.backgroundOrigin,e.bounds,e.style.padding,e.style.border),i=(0,u.calculateBackgroundSize)(t,r,n),o=(0,u.calculateBackgroundPosition)(t.position,i,n),A=(0,u.calculateBackgroundRepeatPath)(t,o,i,n,e.bounds),a=Math.round(n.left+o.x),s=Math.round(n.top+o.y);this.target.renderRepeat(A,r,i,a,s)}}},{key:"renderBackgroundGradient",value:function(e,t){var r=(0,u.calculateBackgroungPositioningArea)(e.style.background.backgroundOrigin,e.bounds,e.style.padding,e.style.border),n=(0,u.calculateGradientBackgroundSize)(t,r),i=(0,u.calculateBackgroundPosition)(t.position,n,r),o=new A.Bounds(Math.round(r.left+i.x),Math.round(r.top+i.y),n.width,n.height),s=(0,a.parseGradient)(e,t.source,o);if(s)switch(s.type){case a.GRADIENT_TYPE.LINEAR_GRADIENT:this.target.renderLinearGradient(o,s);break;case a.GRADIENT_TYPE.RADIAL_GRADIENT:this.target.renderRadialGradient(o,s)}}},{key:"renderBorder",value:function(e,t,r){this.target.drawShape((0,A.parsePathForBorder)(r,t),e.borderColor)}},{key:"renderStack",value:function(e){var t=this;if(e.container.isVisible()){var r=e.getOpacity();r!==this._opacity&&(this.target.setOpacity(e.getOpacity()),this._opacity=r);var n=e.container.style.transform;null!==n?this.target.transform(e.container.bounds.left+n.transformOrigin[0].value,e.container.bounds.top+n.transformOrigin[1].value,n.transform,function(){return t.renderStackContent(e)}):this.renderStackContent(e)}}},{key:"renderStackContent",value:function(e){var t=f(e),r=i(t,5),n=r[0],o=r[1],A=r[2],a=r[3],s=r[4],c=d(e),u=i(c,2),l=u[0],h=u[1];this.renderNodeBackgroundAndBorders(e.container),n.sort(p).forEach(this.renderStack,this),this.renderNodeContent(e.container),h.forEach(this.renderNode,this),a.forEach(this.renderStack,this),s.forEach(this.renderStack,this),l.forEach(this.renderNode,this),o.forEach(this.renderStack,this),A.sort(p).forEach(this.renderStack,this)}},{key:"render",value:function(e){return this.options.backgroundColor&&this.target.rectangle(this.options.x,this.options.y,this.options.width,this.options.height,this.options.backgroundColor),this.renderStack(e),this.target.getTarget()}}]),e}();t.default=h;var d=function(e){for(var t=[],r=[],n=e.children.length,i=0;i<n;i++){var o=e.children[i];o.isInlineLevel()?t.push(o):r.push(o)}return[t,r]},f=function(e){for(var t=[],r=[],n=[],i=[],o=[],A=e.contexts.length,a=0;a<A;a++){var s=e.contexts[a];s.container.isPositioned()||s.container.style.opacity<1||s.container.isTransformed()?s.container.style.zIndex.order<0?t.push(s):s.container.style.zIndex.order>0?n.push(s):r.push(s):s.container.isFloating()?i.push(s):o.push(s)}return[t,r,n,i,o]},p=function(e,t){return e.container.style.zIndex.order>t.container.style.zIndex.order?1:e.container.style.zIndex.order<t.container.style.zIndex.order?-1:e.container.index>t.container.index?1:-1}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.transformWebkitRadialGradientArgs=t.parseGradient=t.RadialGradient=t.LinearGradient=t.RADIAL_GRADIENT_SHAPE=t.GRADIENT_TYPE=void 0;var n=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,i=!1,o=void 0;try{for(var A,a=e[Symbol.iterator]();!(n=(A=a.next()).done)&&(r.push(A.value),!t||r.length!==t);n=!0);}catch(e){i=!0,o=e}finally{try{!n&&a.return&&a.return()}finally{if(i)throw o}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},i=(c(r(20)),r(174)),o=c(r(13)),A=r(16),a=c(A),s=r(21);function c(e){return e&&e.__esModule?e:{default:e}}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var l=/^(to )?(left|top|right|bottom)( (left|top|right|bottom))?$/i,h=/^([+-]?\d*\.?\d+)% ([+-]?\d*\.?\d+)%$/i,d=/(px)|%|( 0)$/i,f=/^(from|to|color-stop)\((?:([\d.]+)(%)?,\s*)?(.+?)\)$/i,p=/^\s*(circle|ellipse)?\s*((?:([\d.]+)(px|r?em|%)\s*(?:([\d.]+)(px|r?em|%))?)|closest-side|closest-corner|farthest-side|farthest-corner)?\s*(?:at\s*(?:(left|center|right)|([\d.]+)(px|r?em|%))\s+(?:(top|center|bottom)|([\d.]+)(px|r?em|%)))?(?:\s|$)/i,g=t.GRADIENT_TYPE={LINEAR_GRADIENT:0,RADIAL_GRADIENT:1},B=t.RADIAL_GRADIENT_SHAPE={CIRCLE:0,ELLIPSE:1},w={left:new a.default("0%"),top:new a.default("0%"),center:new a.default("50%"),right:new a.default("100%"),bottom:new a.default("100%")},y=t.LinearGradient=function e(t,r){u(this,e),this.type=g.LINEAR_GRADIENT,this.colorStops=t,this.direction=r},v=t.RadialGradient=function e(t,r,n,i){u(this,e),this.type=g.RADIAL_GRADIENT,this.colorStops=t,this.shape=r,this.center=n,this.radius=i},m=(t.parseGradient=function(e,t,r){var n=t.args,i=t.method,o=t.prefix;return"linear-gradient"===i?b(n,r,!!o):"gradient"===i&&"linear"===n[0]?b(["to bottom"].concat(S(n.slice(3))),r,!!o):"radial-gradient"===i?E(e,"-webkit-"===o?x(n):n,r):"gradient"===i&&"radial"===n[0]?E(e,S(x(n.slice(1))),r):void 0},function(e,t,r){for(var n=[],i=t;i<e.length;i++){var A=e[i],s=d.test(A),c=A.lastIndexOf(" "),u=new o.default(s?A.substring(0,c):A),l=s?new a.default(A.substring(c+1)):i===t?new a.default("0%"):i===e.length-1?new a.default("100%"):null;n.push({color:u,stop:l})}for(var h=n.map(function(e){var t=e.color,n=e.stop;return{color:t,stop:0===r?0:n?n.getAbsoluteValue(r)/r:null}}),f=h[0].stop,p=0;p<h.length;p++)if(null!==f){var g=h[p].stop;if(null===g){for(var B=p;null===h[B].stop;)B++;for(var w=B-p+1,y=(h[B].stop-f)/w;p<B;p++)f=h[p].stop=f+y}else f=g}return h}),b=function(e,t,r){var n=(0,i.parseAngle)(e[0]),o=l.test(e[0]),A=o||null!==n||h.test(e[0]),a=A?null!==n?C(r?n-.5*Math.PI:n,t):o?U(e[0],t):_(e[0],t):C(Math.PI,t),c=A?1:0,u=Math.min((0,s.distance)(Math.abs(a.x0)+Math.abs(a.x1),Math.abs(a.y0)+Math.abs(a.y1)),2*t.width,2*t.height);return new y(m(e,c,u),a)},E=function(e,t,r){var n=t[0].match(p),i=n&&("circle"===n[1]||void 0!==n[3]&&void 0===n[5])?B.CIRCLE:B.ELLIPSE,o={},a={};n&&(void 0!==n[3]&&(o.x=(0,A.calculateLengthFromValueWithUnit)(e,n[3],n[4]).getAbsoluteValue(r.width)),void 0!==n[5]&&(o.y=(0,A.calculateLengthFromValueWithUnit)(e,n[5],n[6]).getAbsoluteValue(r.height)),n[7]?a.x=w[n[7].toLowerCase()]:void 0!==n[8]&&(a.x=(0,A.calculateLengthFromValueWithUnit)(e,n[8],n[9])),n[10]?a.y=w[n[10].toLowerCase()]:void 0!==n[11]&&(a.y=(0,A.calculateLengthFromValueWithUnit)(e,n[11],n[12])));var s={x:void 0===a.x?r.width/2:a.x.getAbsoluteValue(r.width),y:void 0===a.y?r.height/2:a.y.getAbsoluteValue(r.height)},c=F(n&&n[2]||"farthest-corner",i,s,o,r);return new v(m(t,n?1:0,Math.min(c.x,c.y)),i,s,c)},C=function(e,t){var r=t.width,n=t.height,i=.5*r,o=.5*n,A=(Math.abs(r*Math.sin(e))+Math.abs(n*Math.cos(e)))/2,a=i+Math.sin(e)*A,s=o-Math.cos(e)*A;return{x0:a,x1:r-a,y0:s,y1:n-s}},T=function(e){return Math.acos(e.width/2/((0,s.distance)(e.width,e.height)/2))},U=function(e,t){switch(e){case"bottom":case"to top":return C(0,t);case"left":case"to right":return C(Math.PI/2,t);case"right":case"to left":return C(3*Math.PI/2,t);case"top right":case"right top":case"to bottom left":case"to left bottom":return C(Math.PI+T(t),t);case"top left":case"left top":case"to bottom right":case"to right bottom":return C(Math.PI-T(t),t);case"bottom left":case"left bottom":case"to top right":case"to right top":return C(T(t),t);case"bottom right":case"right bottom":case"to top left":case"to left top":return C(2*Math.PI-T(t),t);case"top":case"to bottom":default:return C(Math.PI,t)}},_=function(e,t){var r=e.split(" ").map(parseFloat),i=n(r,2),o=i[0],A=i[1],a=o/100*t.width/(A/100*t.height);return C(Math.atan(isNaN(a)?1:a)+Math.PI/2,t)},Q=function(e,t,r,n){return[{x:0,y:0},{x:0,y:e.height},{x:e.width,y:0},{x:e.width,y:e.height}].reduce(function(e,i){var o=(0,s.distance)(t-i.x,r-i.y);return(n?o<e.optimumDistance:o>e.optimumDistance)?{optimumCorner:i,optimumDistance:o}:e},{optimumDistance:n?1/0:-1/0,optimumCorner:null}).optimumCorner},F=function(e,t,r,n,i){var o=r.x,A=r.y,a=0,c=0;switch(e){case"closest-side":t===B.CIRCLE?a=c=Math.min(Math.abs(o),Math.abs(o-i.width),Math.abs(A),Math.abs(A-i.height)):t===B.ELLIPSE&&(a=Math.min(Math.abs(o),Math.abs(o-i.width)),c=Math.min(Math.abs(A),Math.abs(A-i.height)));break;case"closest-corner":if(t===B.CIRCLE)a=c=Math.min((0,s.distance)(o,A),(0,s.distance)(o,A-i.height),(0,s.distance)(o-i.width,A),(0,s.distance)(o-i.width,A-i.height));else if(t===B.ELLIPSE){var u=Math.min(Math.abs(A),Math.abs(A-i.height))/Math.min(Math.abs(o),Math.abs(o-i.width)),l=Q(i,o,A,!0);c=u*(a=(0,s.distance)(l.x-o,(l.y-A)/u))}break;case"farthest-side":t===B.CIRCLE?a=c=Math.max(Math.abs(o),Math.abs(o-i.width),Math.abs(A),Math.abs(A-i.height)):t===B.ELLIPSE&&(a=Math.max(Math.abs(o),Math.abs(o-i.width)),c=Math.max(Math.abs(A),Math.abs(A-i.height)));break;case"farthest-corner":if(t===B.CIRCLE)a=c=Math.max((0,s.distance)(o,A),(0,s.distance)(o,A-i.height),(0,s.distance)(o-i.width,A),(0,s.distance)(o-i.width,A-i.height));else if(t===B.ELLIPSE){var h=Math.max(Math.abs(A),Math.abs(A-i.height))/Math.max(Math.abs(o),Math.abs(o-i.width)),d=Q(i,o,A,!1);c=h*(a=(0,s.distance)(d.x-o,(d.y-A)/h))}break;default:a=n.x||0,c=void 0!==n.y?n.y:a}return{x:a,y:c}},x=t.transformWebkitRadialGradientArgs=function(e){var t="",r="",n="",i="",o=0,A=/^(left|center|right|\d+(?:px|r?em|%)?)(?:\s+(top|center|bottom|\d+(?:px|r?em|%)?))?$/i,a=/^\d+(px|r?em|%)?(?:\s+\d+(px|r?em|%)?)?$/i,s=e[o].match(A);s&&o++;var c=e[o].match(/^(circle|ellipse)?\s*(closest-side|closest-corner|farthest-side|farthest-corner|contain|cover)?$/i);c&&(t=c[1]||"","contain"===(n=c[2]||"")?n="closest-side":"cover"===n&&(n="farthest-corner"),o++);var u=e[o].match(a);u&&o++;var l=e[o].match(A);l&&o++;var h=e[o].match(a);h&&o++;var d=l||s;d&&d[1]&&(i=d[1]+(/^\d+$/.test(d[1])?"px":""),d[2]&&(i+=" "+d[2]+(/^\d+$/.test(d[2])?"px":"")));var f=h||u;return f&&(r=f[0],f[1]||(r+="px")),!i||t||r||n||(r=i,i=""),i&&(i="at "+i),[[t,n,r,i].filter(function(e){return!!e}).join(" ")].concat(e.slice(o))},S=function(e){return e.map(function(e){return e.match(f)}).map(function(t,r){if(!t)return e[r];switch(t[1]){case"from":return t[4]+" 0%";case"to":return t[4]+" 100%";case"color-stop":return"%"===t[3]?t[4]+" "+t[2]:t[4]+" "+100*parseFloat(t[2])+"%"}})}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=/([+-]?\d*\.?\d+)(deg|grad|rad|turn)/i;t.parseAngle=function(e){var t=e.match(n);if(t){var r=parseFloat(t[1]);switch(t[2].toLowerCase()){case"deg":return Math.PI*r/180;case"grad":return Math.PI/200*r;case"rad":return r;case"turn":return 2*Math.PI*r}}return null}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.cloneWindow=t.DocumentCloner=void 0;var n=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,i=!1,o=void 0;try{for(var A,a=e[Symbol.iterator]();!(n=(A=a.next()).done)&&(r.push(A.value),!t||r.length!==t);n=!0);}catch(e){i=!0,o=e}finally{try{!n&&a.return&&a.return()}finally{if(i)throw o}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(14),A=r(98),a=h(r(176)),s=r(21),c=r(28),u=h(r(87)),l=r(177);function h(e){return e&&e.__esModule?e:{default:e}}var d=t.DocumentCloner=function(){function e(t,r,n,i,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.referenceElement=t,this.scrolledElements=[],this.copyStyles=i,this.inlineImages=i,this.logger=n,this.options=r,this.renderer=o,this.resourceLoader=new a.default(r,n,window),this.pseudoContentData={counters:{},quoteDepth:0},this.documentElement=this.cloneNode(t.ownerDocument.documentElement)}return i(e,[{key:"inlineAllImages",value:function(e){var t=this;if(this.inlineImages&&e){var r=e.style;Promise.all((0,c.parseBackgroundImage)(r.backgroundImage).map(function(e){return"url"===e.method?t.resourceLoader.inlineImage(e.args[0]).then(function(e){return e&&"string"==typeof e.src?'url("'+e.src+'")':"none"}).catch(function(e){0}):Promise.resolve(""+e.prefix+e.method+"("+e.args.join(",")+")")})).then(function(e){e.length>1&&(r.backgroundColor=""),r.backgroundImage=e.join(",")}),e instanceof HTMLImageElement&&this.resourceLoader.inlineImage(e.src).then(function(t){if(t&&e instanceof HTMLImageElement&&e.parentNode){var r=e.parentNode,n=(0,s.copyCSSStyles)(e.style,t.cloneNode(!1));r.replaceChild(n,e)}}).catch(function(e){0})}}},{key:"inlineFonts",value:function(e){var t=this;return Promise.all(Array.from(e.styleSheets).map(function(t){return t.href?fetch(t.href).then(function(e){return e.text()}).then(function(e){return p(e,t.href)}).catch(function(e){return[]}):f(t,e)})).then(function(e){return e.reduce(function(e,t){return e.concat(t)},[])}).then(function(e){return Promise.all(e.map(function(e){return fetch(e.formats[0].src).then(function(e){return e.blob()}).then(function(e){return new Promise(function(t,r){var n=new FileReader;n.onerror=r,n.onload=function(){var e=n.result;t(e)},n.readAsDataURL(e)})}).then(function(t){return e.fontFace.setProperty("src",'url("'+t+'")'),"@font-face {"+e.fontFace.cssText+" "})}))}).then(function(r){var n=e.createElement("style");n.textContent=r.join("\n"),t.documentElement.appendChild(n)})}},{key:"createElementClone",value:function(e){var t=this;if(this.copyStyles&&e instanceof HTMLCanvasElement){var r=e.ownerDocument.createElement("img");try{return r.src=e.toDataURL(),r}catch(e){0}}if(e instanceof HTMLIFrameElement){var n=e.cloneNode(!1),i=T();n.setAttribute("data-html2canvas-internal-iframe-key",i);var A=(0,o.parseBounds)(e,0,0),a=A.width,c=A.height;return this.resourceLoader.cache[i]=_(e,this.options).then(function(e){return t.renderer(e,{async:t.options.async,allowTaint:t.options.allowTaint,backgroundColor:"#ffffff",canvas:null,imageTimeout:t.options.imageTimeout,logging:t.options.logging,proxy:t.options.proxy,removeContainer:t.options.removeContainer,scale:t.options.scale,foreignObjectRendering:t.options.foreignObjectRendering,useCORS:t.options.useCORS,target:new u.default,width:a,height:c,x:0,y:0,windowWidth:e.ownerDocument.defaultView.innerWidth,windowHeight:e.ownerDocument.defaultView.innerHeight,scrollX:e.ownerDocument.defaultView.pageXOffset,scrollY:e.ownerDocument.defaultView.pageYOffset},t.logger.child(i))}).then(function(t){return new Promise(function(r,i){var o=document.createElement("img");o.onload=function(){return r(t)},o.onerror=i,o.src=t.toDataURL(),n.parentNode&&n.parentNode.replaceChild((0,s.copyCSSStyles)(e.ownerDocument.defaultView.getComputedStyle(e),o),n)})}),n}return e.cloneNode(!1)}},{key:"cloneNode",value:function(e){var t=e.nodeType===Node.TEXT_NODE?document.createTextNode(e.nodeValue):this.createElementClone(e),r=e.ownerDocument.defaultView,n=e instanceof r.HTMLElement?r.getComputedStyle(e):null,i=e instanceof r.HTMLElement?r.getComputedStyle(e,":before"):null,o=e instanceof r.HTMLElement?r.getComputedStyle(e,":after"):null;this.referenceElement===e&&t instanceof r.HTMLElement&&(this.clonedReferenceElement=t),t instanceof r.HTMLBodyElement&&b(t);for(var A=(0,l.parseCounterReset)(n,this.pseudoContentData),a=(0,l.resolvePseudoContent)(e,i,this.pseudoContentData),c=e.firstChild;c;c=c.nextSibling)(c.nodeType!==Node.ELEMENT_NODE||"SCRIPT"!==c.nodeName&&!c.hasAttribute("data-html2canvas-ignore"))&&(this.copyStyles&&"STYLE"===c.nodeName||t.appendChild(this.cloneNode(c)));var u=(0,l.resolvePseudoContent)(e,o,this.pseudoContentData);if((0,l.popCounters)(A,this.pseudoContentData),e instanceof r.HTMLElement&&t instanceof r.HTMLElement)switch(i&&this.inlineAllImages(B(e,t,i,a,w)),o&&this.inlineAllImages(B(e,t,o,u,y)),!n||!this.copyStyles||e instanceof HTMLIFrameElement||(0,s.copyCSSStyles)(n,t),this.inlineAllImages(t),0===e.scrollTop&&0===e.scrollLeft||this.scrolledElements.push([t,e.scrollLeft,e.scrollTop]),e.nodeName){case"CANVAS":this.copyStyles||g(e,t);break;case"TEXTAREA":case"SELECT":t.value=e.value}return t}}]),e}(),f=function(e,t){return(e.cssRules?Array.from(e.cssRules):[]).filter(function(e){return e.type===CSSRule.FONT_FACE_RULE}).map(function(e){for(var r=(0,c.parseBackgroundImage)(e.style.getPropertyValue("src")),n=[],i=0;i<r.length;i++)if("url"===r[i].method&&r[i+1]&&"format"===r[i+1].method){var o=t.createElement("a");o.href=r[i].args[0],t.body&&t.body.appendChild(o);var A={src:o.href,format:r[i+1].args[0]};n.push(A)}return{formats:n.filter(function(e){return/^woff/i.test(e.format)}),fontFace:e.style}}).filter(function(e){return e.formats.length})},p=function(e,t){var r=document.implementation.createHTMLDocument(""),n=document.createElement("base");n.href=t;var i=document.createElement("style");return i.textContent=e,r.head&&r.head.appendChild(n),r.body&&r.body.appendChild(i),i.sheet?f(i.sheet,r):[]},g=function(e,t){try{if(t){t.width=e.width,t.height=e.height;var r=e.getContext("2d"),n=t.getContext("2d");r?n.putImageData(r.getImageData(0,0,e.width,e.height),0,0):n.drawImage(e,0,0)}}catch(e){}},B=function(e,t,r,n,i){if(r&&r.content&&"none"!==r.content&&"-moz-alt-content"!==r.content&&"none"!==r.display){var o=t.ownerDocument.createElement("html2canvaspseudoelement");if((0,s.copyCSSStyles)(r,o),n)for(var A=n.length,a=0;a<A;a++){var u=n[a];switch(u.type){case l.PSEUDO_CONTENT_ITEM_TYPE.IMAGE:var h=t.ownerDocument.createElement("img");h.src=(0,c.parseBackgroundImage)("url("+u.value+")")[0].args[0],h.style.opacity="1",o.appendChild(h);break;case l.PSEUDO_CONTENT_ITEM_TYPE.TEXT:o.appendChild(t.ownerDocument.createTextNode(u.value))}}return o.className=v+" "+m,t.className+=i===w?" "+v:" "+m,i===w?t.insertBefore(o,t.firstChild):t.appendChild(o),o}},w=":before",y=":after",v="___html2canvas___pseudoelement_before",m="___html2canvas___pseudoelement_after",b=function(e){E(e,"."+v+w+'{\n    content: "" !important;\n    display: none !important;\n}\n         .'+m+y+'{\n    content: "" !important;\n    display: none !important;\n}')},E=function(e,t){var r=e.ownerDocument.createElement("style");r.innerHTML=t,e.appendChild(r)},C=function(e){var t=n(e,3),r=t[0],i=t[1],o=t[2];r.scrollLeft=i,r.scrollTop=o},T=function(){return Math.ceil(Date.now()+1e7*Math.random()).toString(16)},U=/^data:text\/(.+);(base64)?,(.*)$/i,_=function(e,t){try{return Promise.resolve(e.contentWindow.document.documentElement)}catch(r){return t.proxy?(0,A.Proxy)(e.src,t).then(function(e){var t=e.match(U);return t?"base64"===t[2]?window.atob(decodeURIComponent(t[3])):decodeURIComponent(t[3]):Promise.reject()}).then(function(t){return Q(e.ownerDocument,(0,o.parseBounds)(e,0,0)).then(function(e){var r=e.contentWindow.document;r.open(),r.write(t);var n=F(e).then(function(){return r.documentElement});return r.close(),n})}):Promise.reject()}},Q=function(e,t){var r=e.createElement("iframe");return r.className="html2canvas-container",r.style.visibility="hidden",r.style.position="fixed",r.style.left="-10000px",r.style.top="0px",r.style.border="0",r.width=t.width.toString(),r.height=t.height.toString(),r.scrolling="no",r.setAttribute("data-html2canvas-ignore","true"),e.body?(e.body.appendChild(r),Promise.resolve(r)):Promise.reject("")},F=function(e){var t=e.contentWindow,r=t.document;return new Promise(function(n,i){t.onload=e.onload=r.onreadystatechange=function(){var t=setInterval(function(){r.body.childNodes.length>0&&"complete"===r.readyState&&(clearInterval(t),n(e))},50)}})},x=(t.cloneWindow=function(e,t,r,n,i,o){var A=new d(r,n,i,!1,o),a=e.defaultView.pageXOffset,s=e.defaultView.pageYOffset;return Q(e,t).then(function(n){var i=n.contentWindow,o=i.document,c=F(n).then(function(){return A.scrolledElements.forEach(C),i.scrollTo(t.left,t.top),!/(iPad|iPhone|iPod)/g.test(navigator.userAgent)||i.scrollY===t.top&&i.scrollX===t.left||(o.documentElement.style.top=-t.top+"px",o.documentElement.style.left=-t.left+"px",o.documentElement.style.position="absolute"),A.clonedReferenceElement instanceof i.HTMLElement||A.clonedReferenceElement instanceof e.defaultView.HTMLElement||A.clonedReferenceElement instanceof HTMLElement?Promise.resolve([n,A.clonedReferenceElement,A.resourceLoader]):Promise.reject("")});return o.open(),o.write(x(document.doctype)+"<html></html>"),function(e,t,r){!e.defaultView||t===e.defaultView.pageXOffset&&r===e.defaultView.pageYOffset||e.defaultView.scrollTo(t,r)}(r.ownerDocument,a,s),o.replaceChild(o.adoptNode(A.documentElement),o.documentElement),o.close(),c})},function(e){var t="";return e&&(t+="<!DOCTYPE ",e.name&&(t+=e.name),e.internalSubset&&(t+=e.internalSubset),e.publicId&&(t+='"'+e.publicId+'"'),e.systemId&&(t+='"'+e.systemId+'"'),t+=">"),t})},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ResourceStore=void 0;var n,i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(43),A=(n=o)&&n.__esModule?n:{default:n},a=r(98);function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var c=function(){function e(t,r,n){s(this,e),this.options=t,this._window=n,this.origin=this.getOrigin(n.location.href),this.cache={},this.logger=r,this._index=0}return i(e,[{key:"loadImage",value:function(e){var t=this;if(this.hasResourceInCache(e))return e;if(!g(e)||A.default.SUPPORT_SVG_DRAWING){if(!0===this.options.allowTaint||f(e)||this.isSameOrigin(e))return this.addImage(e,e,!1);if(!this.isSameOrigin(e)){if("string"==typeof this.options.proxy)return this.cache[e]=(0,a.Proxy)(e,this.options).then(function(e){return B(e,t.options.imageTimeout||0)}),e;if(!0===this.options.useCORS&&A.default.SUPPORT_CORS_IMAGES)return this.addImage(e,e,!0)}}}},{key:"inlineImage",value:function(e){var t=this;return f(e)?B(e,this.options.imageTimeout||0):this.hasResourceInCache(e)?this.cache[e]:this.isSameOrigin(e)||"string"!=typeof this.options.proxy?this.xhrImage(e):this.cache[e]=(0,a.Proxy)(e,this.options).then(function(e){return B(e,t.options.imageTimeout||0)})}},{key:"xhrImage",value:function(e){var t=this;return this.cache[e]=new Promise(function(r,n){var i=new XMLHttpRequest;if(i.onreadystatechange=function(){if(4===i.readyState)if(200!==i.status)n("Failed to fetch image "+e.substring(0,256)+" with status code "+i.status);else{var t=new FileReader;t.addEventListener("load",function(){var e=t.result;r(e)},!1),t.addEventListener("error",function(e){return n(e)},!1),t.readAsDataURL(i.response)}},i.responseType="blob",t.options.imageTimeout){var o=t.options.imageTimeout;i.timeout=o,i.ontimeout=function(){return n("")}}i.open("GET",e,!0),i.send()}).then(function(e){return B(e,t.options.imageTimeout||0)}),this.cache[e]}},{key:"loadCanvas",value:function(e){var t=String(this._index++);return this.cache[t]=Promise.resolve(e),t}},{key:"hasResourceInCache",value:function(e){return void 0!==this.cache[e]}},{key:"addImage",value:function(e,t,r){var n=this;var i=function(e){return new Promise(function(i,o){var A=new Image;if(A.onload=function(){return i(A)},e&&!r||(A.crossOrigin="anonymous"),A.onerror=o,A.src=t,!0===A.complete&&setTimeout(function(){i(A)},500),n.options.imageTimeout){var a=n.options.imageTimeout;setTimeout(function(){return o("")},a)}})};return this.cache[e]=p(t)&&!g(t)?A.default.SUPPORT_BASE64_DRAWING(t).then(i):i(!0),e}},{key:"isSameOrigin",value:function(e){return this.getOrigin(e)===this.origin}},{key:"getOrigin",value:function(e){var t=this._link||(this._link=this._window.document.createElement("a"));return t.href=e,t.href=t.href,t.protocol+t.hostname+t.port}},{key:"ready",value:function(){var e=this,t=Object.keys(this.cache),r=t.map(function(t){return e.cache[t].catch(function(e){return null})});return Promise.all(r).then(function(e){return new u(t,e)})}}]),e}();t.default=c;var u=t.ResourceStore=function(){function e(t,r){s(this,e),this._keys=t,this._resources=r}return i(e,[{key:"get",value:function(e){var t=this._keys.indexOf(e);return-1===t?null:this._resources[t]}}]),e}(),l=/^data:image\/svg\+xml/i,h=/^data:image\/.*;base64,/i,d=/^data:image\/.*/i,f=function(e){return d.test(e)},p=function(e){return h.test(e)},g=function(e){return"svg"===e.substr(-3).toLowerCase()||l.test(e)},B=function(e,t){return new Promise(function(r,n){var i=new Image;i.onload=function(){return r(i)},i.onerror=n,i.src=e,!0===i.complete&&setTimeout(function(){r(i)},500),t&&setTimeout(function(){return n("")},t)})}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseContent=t.resolvePseudoContent=t.popCounters=t.parseCounterReset=t.TOKEN_TYPE=t.PSEUDO_CONTENT_ITEM_TYPE=void 0;var n=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,i=!1,o=void 0;try{for(var A,a=e[Symbol.iterator]();!(n=(A=a.next()).done)&&(r.push(A.value),!t||r.length!==t);n=!0);}catch(e){i=!0,o=e}finally{try{!n&&a.return&&a.return()}finally{if(i)throw o}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},i=r(61),o=r(41),A=t.PSEUDO_CONTENT_ITEM_TYPE={TEXT:0,IMAGE:1},a=t.TOKEN_TYPE={STRING:0,ATTRIBUTE:1,URL:2,COUNTER:3,COUNTERS:4,OPENQUOTE:5,CLOSEQUOTE:6},s=(t.parseCounterReset=function(e,t){if(!e||!e.counterReset||"none"===e.counterReset)return[];for(var r=[],i=e.counterReset.split(/\s*,\s*/),o=i.length,A=0;A<o;A++){var a=i[A].split(/\s+/),s=n(a,2),c=s[0],u=s[1];r.push(c);var l=t.counters[c];l||(l=t.counters[c]=[]),l.push(parseInt(u||0,10))}return r},t.popCounters=function(e,t){for(var r=e.length,n=0;n<r;n++)t.counters[e[n]].pop()},t.resolvePseudoContent=function(e,t,r){if(!t||!t.content||"none"===t.content||"-moz-alt-content"===t.content||"none"===t.display)return null;var i=s(t.content),o=i.length,c=[],h="",d=t.counterIncrement;if(d&&"none"!==d){var f=d.split(/\s+/),p=n(f,2),g=p[0],B=p[1],w=r.counters[g];w&&(w[w.length-1]+=void 0===B?1:parseInt(B,10))}for(var y=0;y<o;y++){var v=i[y];switch(v.type){case a.STRING:h+=v.value||"";break;case a.ATTRIBUTE:e instanceof HTMLElement&&v.value&&(h+=e.getAttribute(v.value)||"");break;case a.COUNTER:var m=r.counters[v.name||""];m&&(h+=l([m[m.length-1]],"",v.format));break;case a.COUNTERS:var b=r.counters[v.name||""];b&&(h+=l(b,v.glue,v.format));break;case a.OPENQUOTE:h+=u(t,!0,r.quoteDepth),r.quoteDepth++;break;case a.CLOSEQUOTE:r.quoteDepth--,h+=u(t,!1,r.quoteDepth);break;case a.URL:h&&(c.push({type:A.TEXT,value:h}),h=""),c.push({type:A.IMAGE,value:v.value||""})}}return h&&c.push({type:A.TEXT,value:h}),c},t.parseContent=function(e,t){if(t&&t[e])return t[e];for(var r=[],n=e.length,i=!1,o=!1,A=!1,s="",u="",l=[],h=0;h<n;h++){var d=e.charAt(h);switch(d){case"'":case'"':o?s+=d:(i=!i,A||i||(r.push({type:a.STRING,value:s}),s=""));break;case"\\":o?(s+=d,o=!1):o=!0;break;case"(":i?s+=d:(A=!0,u=s,s="",l=[]);break;case")":if(i)s+=d;else if(A){switch(s&&l.push(s),u){case"attr":l.length>0&&r.push({type:a.ATTRIBUTE,value:l[0]});break;case"counter":if(l.length>0){var f={type:a.COUNTER,name:l[0]};l.length>1&&(f.format=l[1]),r.push(f)}break;case"counters":if(l.length>0){var p={type:a.COUNTERS,name:l[0]};l.length>1&&(p.glue=l[1]),l.length>2&&(p.format=l[2]),r.push(p)}break;case"url":l.length>0&&r.push({type:a.URL,value:l[0]})}A=!1,s=""}break;case",":i?s+=d:A&&(l.push(s),s="");break;case" ":case"\t":i?s+=d:s&&(c(r,s),s="");break;default:s+=d}"\\"!==d&&(o=!1)}return s&&c(r,s),t&&(t[e]=r),r}),c=function(e,t){switch(t){case"open-quote":e.push({type:a.OPENQUOTE});break;case"close-quote":e.push({type:a.CLOSEQUOTE})}},u=function(e,t,r){var n=e.quotes?e.quotes.split(/\s+/):["'\"'","'\"'"],i=2*r;return i>=n.length&&(i=n.length-2),t||++i,n[i].replace(/^["']|["']$/g,"")},l=function(e,t,r){for(var n=e.length,A="",a=0;a<n;a++)a>0&&(A+=t||""),A+=(0,i.createCounterText)(e[a],(0,o.parseListStyleType)(r||"decimal"),!1);return A}},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},A=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(i,o){function A(e){try{s(n.next(e))}catch(e){o(e)}}function a(e){try{s(n.throw(e))}catch(e){o(e)}}function s(e){e.done?i(e.value):new r(function(t){t(e.value)}).then(A,a)}s((n=n.apply(e,t||[])).next())})},a=this&&this.__generator||function(e,t){var r,n,i,o,A={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;A;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return A.label++,{value:o[1],done:!1};case 5:A.label++,n=o[1],o=[0];continue;case 7:o=A.ops.pop(),A.trys.pop();continue;default:if(!(i=(i=A.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){A=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){A.label=o[1];break}if(6===o[0]&&A.label<i[1]){A.label=i[1],i=o;break}if(i&&A.label<i[2]){A.label=i[2],A.ops.push(o);break}i[2]&&A.ops.pop(),A.trys.pop();continue}o=t.call(e,A)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};Object.defineProperty(t,"__esModule",{value:!0});var s=r(19),c=r(0),u=r(1),l=r(38),h=r(62),d=r(84),f=r(100),p=r(2)("performance");t.fontRequest=function(e){return o({type:c.ResourceType.FONT},e)};var g=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.requestLookup=new Map,t.requestQueue=new Map,t.resourceLookup=new Map,t.fontManager=new d.FontManager,t}return i(t,e),t.prototype.dequeueRequests=function(){return A(this,void 0,Promise,function(){var e,t,r,n,i,o;return a(this,function(A){switch(A.label){case 0:e=!1,t=[],this.requestQueue.forEach(function(e,r){t.push([r,e])}),this.requestQueue.clear(),r=function(r,i){var o,A,s,c,l;return a(this,function(i){switch(i.label){case 0:return o=t[r],A=o[0],(s=o[1]).length>0?(e=!0,c=s.slice(0),s.length=0,p("Processing requests for resource '%s'",A),[4,n.fontManager.updateFontMap(A,c)]):[3,3];case 1:return i.sent(),[4,n.fontManager.calculateMetrics(A,c)];case 2:i.sent(),(l=n.requestLookup.get(A))?(c.forEach(function(e){var t=l.get(e);if(l.delete(e),t){for(var r=0,n=t.length;r<n;++r){var i=t[r],o=i[0],A=i[1];o.managesInstance(A)&&(A.active=!0)}u.nextFrame(function(){for(var e=new Set,r=0,n=t.length;r<n;++r){var i=t[r][1];e.has(i)||(e.add(i),i.resourceTrigger())}})}}),p("All requests for resource '%s' are processed",A)):p("There were no Font requests waiting for completion for resource",A),i.label=3;case 3:return[2]}})},n=this,i=0,o=t.length,A.label=1;case 1:return i<o?[5,r(i,o)]:[3,4];case 2:A.sent(),A.label=3;case 3:return++i,[3,1];case 4:return[2,e]}})})},t.prototype.destroy=function(){this.fontManager.destroy()},t.prototype.destroyResource=function(e){var t=this.resourceLookup.get(e.key);t&&(this.fontManager.destroyFontMap(t.id),this.resourceLookup.delete(e.key))},t.prototype.getResource=function(e){return this.resourceLookup.get(e)||null},t.prototype.getIOExpansion=function(){return[new h.TextureIOExpansion(c.ResourceType.FONT,this)]},t.prototype.initResource=function(e){return A(this,void 0,void 0,function(){var t;return a(this,function(r){switch(r.label){case 0:return d.isFontResource(e)?[4,this.fontManager.createFontMap(e)]:[3,2];case 1:(t=r.sent())&&this.resourceLookup.set(e.key,t),p("Font map created->",t),r.label=2;case 2:return[2]}})})},t.prototype.request=function(e,t,r,n){var i=r,o=i.fontMap,A=null;if(o)return i.character&&(A=o.getGlyphTexture(i.character)),A?i.fetch===f.FontResourceRequestFetch.IMAGE_SIZE?[A.pixelWidth,A.pixelHeight]:s.subTextureIOValue(A):i.fetch===f.FontResourceRequestFetch.IMAGE_SIZE?[0,0]:s.subTextureIOValue(null);var a=r.key,c=this.requestLookup.get(a);if(c){var u=c.get(i);if(u)return u.push([e,t]),t.active=!1,i.fetch===f.FontResourceRequestFetch.IMAGE_SIZE?[0,0]:s.subTextureIOValue(A)}else c=new Map,this.requestLookup.set(a,c);t.active=!1;var l=this.requestQueue.get(a);return l||(l=[],this.requestQueue.set(a,l)),l.push(i),c.set(i,[[e,t]]),i.fetch?[0,0]:s.subTextureIOValue(A)},t.prototype.updateResource=function(e){if(d.isFontResource(e)){var t=this.resourceLookup.get(e.key);t&&(u.shallowEqual(e.fontSource,t.fontSource)||p("Font resources currently do not update. To update their properties simply destroy and recreate for now."))}},t}(l.BaseResourceManager);t.FontResourceManager=g},function(e,t,r){"use strict";function n(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}Object.defineProperty(t,"__esModule",{value:!0}),n(r(101)),n(r(103)),n(r(181)),n(r(63)),n(r(102)),n(r(27)),n(r(19)),n(r(62))},function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(i,o){function A(e){try{s(n.next(e))}catch(e){o(e)}}function a(e){try{s(n.throw(e))}catch(e){o(e)}}function s(e){e.done?i(e.value):new r(function(t){t(e.value)}).then(A,a)}s((n=n.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){var r,n,i,o,A={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;A;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return A.label++,{value:o[1],done:!1};case 5:A.label++,n=o[1],o=[0];continue;case 7:o=A.ops.pop(),A.trys.pop();continue;default:if(!(i=(i=A.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){A=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){A.label=o[1];break}if(6===o[0]&&A.label<i[1]){A.label=i[1],i=o;break}if(i&&A.label<i[2]){A.label=i[2],A.ops.push(o);break}i[2]&&A.ops.pop(),A.trys.pop();continue}o=t.call(e,A)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};Object.defineProperty(t,"__esModule",{value:!0});var o=r(1),A=function(){function e(e,t){var r=this;this.video=e,this.subTexture=t,this.isDestroyed=!1,this.renderedTime=-1,this.previousTime=-1,this.playedFrames=0,this.caughtFrames=0,this.timeFrame=0,this.doUpdate=function(){Math.abs(r.video.currentTime-r.renderedTime)<.015||(r.renderedTime=r.video.currentTime,r.subTexture.update())},this.loop=function(e){r.doUpdate(),r.isDestroyed||o.onFrame(r.loop)},this.addEventListeners()}return e.prototype.addEventListeners=function(){return n(this,void 0,void 0,function(){var e;return i(this,function(t){switch(t.label){case 0:return this.isDestroyed?[2]:(e=this.loop,[4,o.onFrame()]);case 1:return e.apply(this,[t.sent()]),[2]}})})},e.prototype.destroy=function(){this.video.pause(),this.isDestroyed=!0,this.removeEventListeners()},e.prototype.removeEventListeners=function(){},e}();t.VideoTextureMonitor=A},function(e,t,r){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var i=r(0),o=new Image;t.atlasRequest=function(e){return n({type:i.ResourceType.ATLAS,source:o},e)}},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o=r(64),A=r(44),a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.processAttributeDestructuring=function(e,t,n,i,A,a){return A.find(function(e){return e.name===o.activeAttributeName})?(this.setDeclaration(t,"__active_attribute_handler__",r(183),"ActiveIOExpansion"),""):""},t}(A.BaseIOExpansion);t.ActiveIOExpansion=a},function(e,t){e.exports="if (_active == 0.0) {\ngl_Position = vec4(0.0, 0.0, 0.0, 1.0);\nreturn;\n}"},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.analyzeColorPickingRendering=function(e,t,r,n){for(var i={allColors:[],colorData:t,dataHeight:n,dataWidth:r,mouse:e,nearestColor:0,nearestColorBytes:[0,0,0,0]},o=new Map,A=0,a=[],s=r/2,c=n/2,u=0,l=[0,0,0,0],h=Number.MAX_SAFE_INTEGER,d=0;d<n;++d){var f=[];a.push(f);for(var p=0;p<r;++p){var g=t[A],B=t[A+1],w=t[A+2];A+=4;var y=g<<16|B<<8|w;if(o.set(y,!0),f.push(y),0!==y){var v=p-s,m=d-c,b=v*v+m*m;b<h&&(h=b,u=y,l=[g,B,w,255])}}}return i.allColors=Array.from(o.keys()),i.nearestColor=u,i.nearestColorBytes=l,i}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){}return e.prototype.sortInstanceAttributes=function(e,t){return e.resource&&!t.resource?-1:e.easing&&!t.easing?-1:1},e.prototype.sortVertexAttributes=function(e,t){return 1},e.prototype.sortUniforms=function(e,t){return 1},e}();t.BaseIOSorting=n},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(i,o){function A(e){try{s(n.next(e))}catch(e){o(e)}}function a(e){try{s(n.throw(e))}catch(e){o(e)}}function s(e){e.done?i(e.value):new r(function(t){t(e.value)}).then(A,a)}s((n=n.apply(e,t||[])).next())})},A=this&&this.__generator||function(e,t){var r,n,i,o,A={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;A;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return A.label++,{value:o[1],done:!1};case 5:A.label++,n=o[1],o=[0];continue;case 7:o=A.ops.pop(),A.trys.pop();continue;default:if(!(i=(i=A.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){A=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){A.label=o[1];break}if(6===o[0]&&A.label<i[1]){A.label=i[1],i=o;break}if(i&&A.label<i[2]){A.label=i[2],A.ops.push(o);break}i[2]&&A.ops.pop(),A.trys.pop();continue}o=t.call(e,A)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};Object.defineProperty(t,"__esModule",{value:!0});var a=r(48),s=r(0),c=r(1),u=function(e){function t(){var t=e.call(this,{})||this;return t.isOver=new Set,t.isTouchOver=new Map,t}return i(t,e),Object.defineProperty(t.prototype,"scenes",{get:function(){return this.surface&&this.surface.sceneDiffs?this.surface.sceneDiffs.items:[]},enumerable:!0,configurable:!0}),t.prototype.getSceneViewsUnderMouse=function(e){for(var t=new Map,r=0,n=this.scenes.length;r<n;++r)for(var i=this.scenes[r],o=0,A=i.views.length;o<A;++o){var a=i.views[o];t.set(a.id,a)}return e.target.views.map(function(e){return t.get(e.view.id)}).filter(c.isDefined)},t.prototype.handleClick=function(e){this.handleInteraction(e,function(t,r){t.interactions.handleMouseClick(r,e)})},t.prototype.handleTap=function(e){var t=this;e.touches.forEach(function(r){t.handleInteraction(r,function(t,n){t.interactions.handleTap(n,e,r)})})},t.prototype.handleDrag=function(e){this.handleInteraction(e,function(t,r){t.interactions.handleMouseDrag(r,e)})},t.prototype.handleMouseDown=function(e){this.handleInteraction(e,function(t,r){return t.interactions.handleMouseDown(r,e)})},t.prototype.handleTouchDown=function(e){return o(this,void 0,void 0,function(){var t,r=this;return A(this,function(n){switch(n.label){case 0:return t=[],e.touches.forEach(function(e){e.target.views.forEach(function(e){return t.push(e.view)})}),this.surface&&this.surface.updateColorPickPosition(e.touches[0].screen.position,t),[4,c.nextFrame()];case 1:return n.sent(),e.touches.forEach(function(t){r.handleInteraction(t,function(r,n){return r.interactions.handleTouchDown(n,e,t)})}),[2]}})})},t.prototype.handleMouseUp=function(e){this.handleInteraction(e,function(t,r){return t.interactions.handleMouseUp(r,e)})},t.prototype.handleTouchUp=function(e){var t=this;e.touches.forEach(function(r){t.handleInteraction(r,function(t,n){return t.interactions.handleTouchUp(n,e,r)})})},t.prototype.handleMouseOut=function(e){var t=this;this.isOver.forEach(function(r){t.handleView(r,function(t,r){return t.interactions.handleMouseOut(r,e)})}),this.isOver.clear()},t.prototype.handleTouchOut=function(e){var t=this;e.touches.forEach(function(r){c.mapGetWithDefault(t.isTouchOver,r.touch.touch.identifier,new Set).forEach(function(n){t.handleView(n,function(t,n){return t.interactions.handleTouchOut(n,e,r)})}),t.isOver.clear()})},t.prototype.handleMouseMove=function(e){var t=this;this.surface&&this.surface.updateColorPickPosition(e.screen.position,e.target.views.map(function(e){return e.view}));var r=this.handleInteraction(e,function(t,r){return t.interactions.handleMouseMove(r,e)}),n=new Set;r.forEach(function(e){return n.add(e)}),this.isOver.forEach(function(r){n.has(r)||t.handleView(r,function(t,r){return t.interactions.handleMouseOut(r,e)})}),n.forEach(function(r){t.isOver.has(r)||t.handleView(r,function(t,r){return t.interactions.handleMouseOver(r,e)})}),this.isOver=n},t.prototype.handleTouchDrag=function(e){var t=this;e.touches.forEach(function(r){t.surface&&t.surface.updateColorPickPosition(r.screen.position,r.target.views.map(function(e){return e.view}));var n=t.handleInteraction(r,function(t,n){return t.interactions.handleTouchMove(n,e,r)}),i=new Set;n.forEach(function(e){return i.add(e)});var o=c.mapInjectDefault(t.isTouchOver,r.touch.touch.identifier,new Set);o.forEach(function(n){i.has(n)||t.handleView(n,function(t,n){return t.interactions.handleTouchOut(n,e,r)})}),i.forEach(function(n){o.has(n)||t.handleView(n,function(t,n){return t.interactions.handleTouchOver(n,e,r)})}),t.isTouchOver.set(r.touch.touch.identifier,i)})},t.prototype.handleInteraction=function(e,t){for(var r=this.getSceneViewsUnderMouse(e),n=0,i=r.length;n<i;++n){var o=r[n];this.handleView(o,t)}return r},t.prototype.handleView=function(e,t){for(var r=0,n=e.scene.layers.length;r<n;++r){var i=e.scene.layers[r];i.picking&&i.picking.type!==s.PickType.NONE&&t(i,e.projection)}},t}(a.SimpleEventHandler);t.LayerMouseEvents=u},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var A=r(64),a=r(37),s=r(44),c=r(17),u=r(0),l="BasicIOExpansion",h=["x","y","z","w"],d={1:"float",2:"vec2",3:"vec3",4:"vec4",9:"mat3",16:"mat4",99:"vec4"};var f=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.generateUniformAttributePacking=function(e,t){return this.setDeclaration(e,A.uniformBufferInstanceBufferName,"\n// Instance Attributes as a packed Uniform Buffer\nuniform vec4 "+A.uniformBufferInstanceBufferName+"["+t.totalInstanceUniformBlocks+"];\n",l),this.setDeclaration(e,"instanceSize","int instanceSize = "+t.totalInstanceUniformBlocks+";",l),this.setDeclaration(e,"getBlock","vec4 getBlock(int index, int instanceIndex) { return "+A.uniformBufferInstanceBufferName+"[(instanceSize * instanceIndex) + index]; }",l),{injection:"",material:{uniforms:[{name:A.uniformBufferInstanceBufferName,type:a.MaterialUniformType.VEC4_ARRAY,value:new Array(t.totalInstanceUniformBlocks).fill(0).map(function(){return[0,0,0,0]})}]}}},t.prototype.processAttributeDestructuring=function(e,t,r,n,i,o){var A="",a=i.slice(0);switch(e.bufferType){case c.LayerBufferType.INSTANCE_ATTRIBUTE:A=this.processDestructuringInstanceAttribute(t,a);break;case c.LayerBufferType.INSTANCE_ATTRIBUTE_PACKING:A=this.processDestructuringInstanceAttributePacking(t,a);break;case c.LayerBufferType.UNIFORM:A=this.processDestructuringUniformBuffer(t,a,r.blocksPerInstance)}return e.picking.type===u.PickType.SINGLE&&(A+="\n// This portion is where the shader assigns the picking color that gets passed to the fragment shader\n_picking_color_pass_ = _pickingColor;\n"),A},t.prototype.processDestructuringInstanceAttribute=function(e,t){return""},t.prototype.processDestructuringInstanceAttributePacking=function(e,t){var r="";return r+=this.processDestructureBlocks(e,t)},t.prototype.processDestructuringUniformBuffer=function(e,t,r){this.setDeclaration(e,"instanceIndex","int instanceIndex = int(instance);",l);for(var n=0;n<r;++n)this.setDeclaration(e,"block"+n,"  vec4 block"+n+" = getBlock("+n+", instanceIndex);\n",l);return this.processDestructureBlocks(e,t)},t.prototype.processDestructureBlocks=function(e,t){var r=this;return t.forEach(function(t){var n,i,o=t.block||0;t.size===u.InstanceAttributeSize.MAT4X4?r.setDeclaration(e,t.name,"  "+d[t.size]+" "+t.name+" = mat4(block"+o+", block"+(o+1)+", block"+(o+2)+", block"+(o+3)+");\n",l):t.size===u.InstanceAttributeSize.FOUR?r.setDeclaration(e,t.name,"  "+d[t.size]+" "+t.name+" = block"+o+";\n",l):r.setDeclaration(e,t.name,"  "+d[t.size||1]+" "+t.name+" = block"+o+"."+(n=t.blockIndex||0,i=t.size||1,h.slice(n,n+i).join(""))+";\n",l)}),""},t.prototype.processHeaderInjection=function(e,t,r,n,i,A,a){var s={injection:""};e===u.ShaderInjectionTarget.VERTEX&&(s=this.processAttributeHeader(t,r,n,i,A));var c=this.processUniformHeader(t,a,e);return o({},s,{injection:s.injection+c})},t.prototype.processAttributeHeader=function(e,t,r,n,i){var o=void 0,A="// Shader input\n";if(t.bufferType===c.LayerBufferType.UNIFORM&&i.length>0){var a=this.generateUniformAttributePacking(e,r);o=a.material,A+=a.injection}return A+=this.processVertexAttributes(e,n),t.bufferType===c.LayerBufferType.INSTANCE_ATTRIBUTE&&i.length>0&&(A+=this.processInstanceAttributeBufferStrategy(e,i)),t.bufferType===c.LayerBufferType.INSTANCE_ATTRIBUTE_PACKING&&i.length>0&&(A+=this.processInstanceAttributePackingBufferStrategy(e,r.instanceMaxBlock)),{injection:A,material:o}},t.prototype.processUniformHeader=function(e,t,r){var n=this,i=r||u.ShaderInjectionTarget.VERTEX;return t.forEach(function(t){t.shaderInjection=t.shaderInjection||u.ShaderInjectionTarget.VERTEX,t.shaderInjection!==i&&t.shaderInjection!==u.ShaderInjectionTarget.ALL||n.setDeclaration(e,t.name,"uniform "+(t.qualifier||"")+(t.qualifier?" ":"")+d[t.size]+" "+t.name+";\n",l)}),""},t.prototype.processInstanceAttributeBufferStrategy=function(e,t){var r=this;return t.forEach(function(t){r.setDeclaration(e,t.name,"attribute "+d[t.size||1]+" "+(t.qualifier||"")+(t.qualifier?" ":"")+" "+t.name+";\n",l)}),""},t.prototype.processInstanceAttributePackingBufferStrategy=function(e,t){for(var r=0,n=t+1;r<n;++r)this.setDeclaration(e,"block"+r,"attribute "+d[u.InstanceAttributeSize.FOUR]+" block"+r+";\n",l);return""},t.prototype.processVertexAttributes=function(e,t){var r=this;return t.forEach(function(t){r.setDeclaration(e,t.name,"attribute "+d[t.size]+" "+(t.qualifier||"")+(t.qualifier?" ":"")+t.name+";\n",l)}),""},t}(s.BaseIOExpansion);t.BasicIOExpansion=f},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o=r(7),A=r(3),a=r(0),s=r(106),c=r(10),u=r(30),l=r(31),h=r(2)("performance"),d=Math.max;t.isInstanceAttributeBufferLocation=function(e){return Boolean(e&&e.buffer&&e.buffer.value)};var f=function(e){function t(t,r){var n=e.call(this,t,r)||this;return n.allBufferLocations={},n.availableLocations=[],n.currentInstancedCount=0,n.instanceToBufferLocation={},n.maxInstancedCount=0,n.attributeToPropertyIds=new Map,n.updateAllPropertyIdList=[],n.activePropertyId=-1,n.remove=function(e){var t=n.instanceToBufferLocation[e.uid];return t&&(delete n.instanceToBufferLocation[e.uid],n.availableLocations.push(t)),e},n.add=n.doAddWithRegistration,n}return i(t,e),t.prototype.doAddWithRegistration=function(e){var t=this;this.layer.instanceAttributes.forEach(function(r){if(!r.parentAttribute){A.ObservableMonitoring.setObservableMonitor(!0),r.update(e);var n=A.ObservableMonitoring.getObservableMonitorIds(!0);t.attributeToPropertyIds.set(r,n),r===t.layer.activeAttribute&&(t.activePropertyId=n[0])}}),A.ObservableMonitoring.setObservableMonitor(!1),this.makeUpdateAllPropertyIdList();var r=this.resizeBuffer();return this.gatherLocationsIntoGroups(r.newLocations,r.growth),this.add=this.doAdd,this.doAdd(e)},t.prototype.doAdd=function(e){if(this.availableLocations.length<=0){var t=this.resizeBuffer();this.gatherLocationsIntoGroups(t.newLocations,t.growth)}var r=this.availableLocations.shift();return r&&this.geometry?(this.instanceToBufferLocation[e.uid]=r,this.currentInstancedCount=this.geometry.maxInstancedCount=d(this.currentInstancedCount,r.instanceIndex+1),this.model&&(this.model.vertexDrawRange=[0,this.layer.instanceVertexCount],this.model.drawInstances=this.currentInstancedCount,0===this.layer.instanceVertexCount&&(this.model.vertexDrawRange[1]=this.model.drawInstances))):console.error("Add Error: Instance Attribute Buffer Manager failed to pair an instance with a buffer location"),r},t.prototype.destroy=function(){this.geometry&&this.geometry.dispose(),this.material&&this.material.dispose(),this.scene&&this.scene.container&&this.model&&this.scene.container.remove(this.model)},t.prototype.getBufferLocations=function(e){return this.instanceToBufferLocation[e.uid]},t.prototype.getActiveAttributePropertyId=function(){return this.activePropertyId},t.prototype.getUpdateAllPropertyIdList=function(){return this.updateAllPropertyIdList},t.prototype.managesInstance=function(e){return void 0!==this.instanceToBufferLocation[e.uid]},t.prototype.makeUpdateAllPropertyIdList=function(){var e={};this.attributeToPropertyIds.forEach(function(t){e[t[0]]=t[0]}),this.updateAllPropertyIdList=Object.values(e).filter(Boolean)},t.prototype.removeFromScene=function(){this.scene&&this.scene.container&&this.model&&this.scene.container.remove(this.model),delete this.scene},t.prototype.resizeBuffer=function(){var e=0,t=new Map;if(this.changeListContext){e=1e3;for(var r=0,n=this.changeListContext.length;r<n;++r){var i=this.changeListContext[r];switch(i[1]){case a.InstanceDiffType.CHANGE:case a.InstanceDiffType.INSERT:this.instanceToBufferLocation[i[0].uid]||e++}}}if(h("BEGIN: Resizing unpacked attribute buffer by %d instances",e),this.geometry){this.geometry.dispose(),this.geometry=new o.Geometry;for(var A=this.maxInstancedCount,s=0,l=this.layer.vertexAttributes;s<l.length;s++){(b=l[s]).materialAttribute&&this.geometry.addAttribute(b.name,b.materialAttribute)}this.maxInstancedCount+=e,this.attributes=this.attributes||[];for(var d=0,f=this.attributes;d<f.length;d++){E=(b=f[d]).bufferAttribute,T=b.size||0;if(E.data instanceof Float32Array){(U=new Float32Array(this.maxInstancedCount*T)).set(E.data,0);var p=new o.Attribute(U,T,!0,!0);p.setDynamic(!0),b.bufferAttribute=p,this.geometry.addAttribute(b.name,p);C=t.get(b.name),_=this.allBufferLocations[b.name]||[];this.allBufferLocations[b.name]=_;for(var g=0,B=_.length;g<B;++g)_[g].buffer.value=U;C||(C=[],t.set(b.name,C));for(r=A,x=this.maxInstancedCount;r<x;++r){F={attribute:b,buffer:{value:U},instanceIndex:r,range:[r*T,r*T+T]};C.push(F),_.push(F)}}}this.scene.container&&this.model&&this.scene.container.remove(this.model)}else{this.maxInstancedCount+=e,this.geometry=new o.Geometry;for(var w=0,y=this.layer.vertexAttributes;w<y.length;w++){(b=y[w]).materialAttribute&&this.geometry.addAttribute(b.name,b.materialAttribute)}this.attributes=[];for(var v=0,m=this.layer.instanceAttributes;v<m.length;v++){var b,E,C,T=(b=m[v]).size||0,U=new Float32Array(T*this.maxInstancedCount);(E=new o.Attribute(U,T,!0,!0)).setDynamic(!0),this.geometry.addAttribute(b.name,E),(C=t.get(b.name))||(C=[],t.set(b.name,C));var _=this.allBufferLocations[b.name]||[];this.allBufferLocations[b.name]=_;for(var Q=Object.assign({},b,{uid:c.uid(),bufferAttribute:E}),r=0;r<this.maxInstancedCount;++r){var F={attribute:Q,buffer:{value:U},instanceIndex:r,range:[r*T,r*T+T]};C.push(F),_.push(F)}this.attributes.push(Q)}this.geometry.maxInstancedCount=0,this.material=this.layer.material.clone();r=0;for(var x=this.layer.uniforms.length;r<x;++r){var S=this.layer.uniforms[r];S.materialUniforms.push(this.material.uniforms[S.name])}}return this.scene&&this.model&&this.scene.container&&this.scene.container.remove(this.model),this.material=this.material||this.layer.material.clone(),this.model=u.generateLayerModel(this.geometry,this.material,this.layer.model.drawMode),this.scene&&this.scene.container&&this.model&&this.scene.container.add(this.model),h("COMPLETE: Resizing unpacked attribute buffer"),{growth:e,newLocations:t}},t.prototype.gatherLocationsIntoGroups=function(e,t){if(0!==this.attributeToPropertyIds.size){h("BEGIN: Unpacked attribute manager grouping new buffer locations");var r,n,i,o,A,a,c=[];this.attributeToPropertyIds.forEach(function(t,r){c.push({attribute:r,bufferLocationsForAttribute:e.get(r.name)||[],childBufferLocations:(r.childAttributes||[]).map(function(t){return{location:e.get(t.name)||[],bufferIndex:-1}}),ids:t,bufferIndex:-1})});for(var u=0;u<t;++u){for(var l={instanceIndex:-1,propertyToBufferLocation:{}},d=0,f=c.length;d<f;++d)if(r=c[d],n=r.attribute,i=r.ids,o=r.bufferLocationsForAttribute)if(A=o[++r.bufferIndex]){if(-1===l.instanceIndex)l.instanceIndex=A.instanceIndex;else if(A.instanceIndex!==l.instanceIndex){s.emitOnce("Instance Attribute Parallelism Error",function(e,t){console.warn(t+": A buffer location does not have a matching instance index which means the buffer locations are not in parallel with each other somehow. Error count: "+e),console.warn(n.name,A)});continue}if(n.childAttributes){A.childLocations=[];for(var p=0,g=n.childAttributes.length;p<g;++p){var B=r.childBufferLocations[p];if(B){var w=B.location[++B.bufferIndex];w?A.childLocations.push(w):(a=n.childAttributes[p],s.emitOnce("Instance Attribute Child Attribute Error",function(e,t){console.warn(t+": A child attribute does not have a buffer location available. Error count: "+e),console.warn("Parent Attribute: "+n.name+" Child Attribute: "+a.name)}))}}}for(p=0,g=i.length;p<g;++p)l.propertyToBufferLocation[i[p]]=A}else s.emitOnce("Instance Attribute Buffer Error",function(e,t){console.warn(t+": There is an error in forming buffer location groups in InstanceAttributeBufferManager. Error count: "+e)});else s.emitOnce("Instance Attribute Buffer Error",function(e,t){console.warn(t+": There is an error in forming buffer location groups in InstanceAttributeBufferManager. Error count: "+e)});this.availableLocations.push(l)}h("COMPLETE: Unpacked attribute buffer manager buffer location grouping"),s.flushEmitOnce()}},t.prototype.getInstanceCount=function(){return this.maxInstancedCount},t}(l.BufferManagerBase);t.InstanceAttributeBufferManager=f},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.resourceTrigger=function(){},t}(r(9).Instance);t.BasicInstance=o},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o=r(7),A=r(3),a=r(0),s=r(1),c=r(106),u=r(30),l=r(31),h=Math.max,d=r(2)("performance"),f=function(e){function t(t,r){var n=e.call(this,t,r)||this;return n.allBufferLocations={},n.availableLocations=[],n.currentInstancedCount=0,n.instanceToBufferLocation={},n.maxInstancedCount=1e3,n.blockSubAttributesLookup=new Map,n.attributeToPropertyIds=new Map,n.updateAllPropertyIdList=[],n.activePropertyId=-1,n.remove=function(e){var t=n.instanceToBufferLocation[e.uid];return t&&(delete n.instanceToBufferLocation[e.uid],n.availableLocations.push(t)),e},n.add=n.doAddWithRegistration,n}return i(t,e),t.prototype.doAddWithRegistration=function(e){var t=this;this.layer.instanceAttributes.forEach(function(r){if(!r.parentAttribute){A.ObservableMonitoring.setObservableMonitor(!0),r.update(e);var n=A.ObservableMonitoring.getObservableMonitorIds(!0);t.attributeToPropertyIds.set(r,n),r===t.layer.activeAttribute&&(t.activePropertyId=n[0])}}),A.ObservableMonitoring.setObservableMonitor(!1),this.makeUpdateAllPropertyIdList();var r=this.resizeBuffer();return this.gatherLocationsIntoGroups(r.newLocations,r.growth),this.add=this.doAdd,this.doAdd(e)},t.prototype.doAdd=function(e){if(this.availableLocations.length<=0){var t=this.resizeBuffer();this.gatherLocationsIntoGroups(t.newLocations,t.growth)}var r=this.availableLocations.shift();return r&&this.geometry?(this.instanceToBufferLocation[e.uid]=r,this.currentInstancedCount=this.geometry.maxInstancedCount=h(this.currentInstancedCount,r.instanceIndex+1),this.model&&(this.model.vertexDrawRange=[0,this.layer.instanceVertexCount],this.model.drawInstances=this.currentInstancedCount,0===this.layer.instanceVertexCount&&(this.model.vertexDrawRange[1]=this.model.drawInstances))):console.error("Add Error: Instance Attribute Buffer Manager failed to pair an instance with a buffer location"),r},t.prototype.destroy=function(){this.geometry&&this.geometry.dispose(),this.material&&this.material.dispose(),this.scene&&this.scene.container&&this.model&&this.scene.container.remove(this.model)},t.prototype.getBufferLocations=function(e){return this.instanceToBufferLocation[e.uid]},t.prototype.getActiveAttributePropertyId=function(){return this.activePropertyId},t.prototype.getUpdateAllPropertyIdList=function(){return this.updateAllPropertyIdList},t.prototype.managesInstance=function(e){return void 0!==this.instanceToBufferLocation[e.uid]},t.prototype.makeUpdateAllPropertyIdList=function(){var e={};this.attributeToPropertyIds.forEach(function(t){e[t[0]]=t[0]}),this.updateAllPropertyIdList=Object.values(e).filter(Boolean)},t.prototype.removeFromScene=function(){this.scene&&this.scene.container&&this.model&&this.scene.container.remove(this.model),delete this.scene},t.prototype.resizeBuffer=function(){var e=0,t=new Map;if(this.changeListContext){e=1e3;for(var r=0,n=this.changeListContext.length;r<n;++r){var i=this.changeListContext[r];switch(i[1]){case a.InstanceDiffType.CHANGE:case a.InstanceDiffType.INSERT:this.instanceToBufferLocation[i[0].uid]||e++}}}if(this.geometry){d("Info: Vertex packing buffer is being resized for layer "+this.layer.id),this.geometry.dispose(),this.geometry=new o.Geometry;for(var A=this.maxInstancedCount,c=0,l=this.layer.vertexAttributes;c<l.length;c++){(M=l[c]).materialAttribute&&this.geometry.addAttribute(M.name,M.materialAttribute)}this.maxInstancedCount+=e,this.attributes=this.attributes||[],this.blockAttributes=this.blockAttributes||[];for(E=0,n=this.blockAttributes.length;E<n;++E){F=(M=this.blockAttributes[E]).bufferAttribute;var h=M.size||0;if(F.data instanceof Float32Array){(Q=new Float32Array(this.maxInstancedCount*h)).set(F.data,0);var f=new o.Attribute(Q,h,!0,!0);M.bufferAttribute=F=f,this.geometry.addAttribute(M.name,f);_=this.blockSubAttributesLookup.get(E),C=M.size||0;if(_)for(x=0,S=_.length;x<S;++x){var p=_[x];(I=t.get(p.name))||(I=[],t.set(p.name,I));O=this.allBufferLocations[p.name]||[];this.allBufferLocations[p.name]=O;R=Object.assign({},p,{uid:s.uid(),packUID:M.packUID,bufferAttribute:F}),P=p.blockIndex||0,N=p.size||1;for(var g=0,B=O.length;g<B;++g){var w=O[g];w.attribute=R,w.buffer={value:Q}}for(r=A;r<this.maxInstancedCount;++r){L={attribute:R,block:E,buffer:{value:Q},instanceIndex:r,range:[r*C+P,r*C+P+N]};I.push(L),O.push(L)}}}}}else{this.maxInstancedCount+=e,this.geometry=new o.Geometry;for(var y=0,v=this.layer.vertexAttributes;y<v.length;y++){(M=v[y]).materialAttribute&&this.geometry.addAttribute(M.name,M.materialAttribute)}this.attributes=[],this.blockAttributes=[];var m=new Map,b=new Map;this.blockSubAttributesLookup=b;for(var r=0,n=this.layer.instanceAttributes.length;r<n;++r){var E=(M=this.layer.instanceAttributes[r]).block||0,C=m.get(E)||0;C=Math.max(C,(M.blockIndex||0)+(M.size||0)),m.set(E,C);var T=b.get(E);T||(T=[],b.set(E,T)),T.push(M)}b.forEach(function(e){return e.sort(function(e,t){return(e.blockIndex||0)-(t.blockIndex||0)})});var E=0;for(n=m.size;E<n;++E){var C=m.get(E)||0,U=s.uid();C||console.warn("Instance Attribute Packing Error: The system tried to build an attribute with a size of zero.","These are the attributes used:",this.layer.instanceAttributes,"These are the block sizes calculated",m,"This is the block to attribute lookup generated",b);var _,Q=new Float32Array(C*this.maxInstancedCount),F=new o.Attribute(Q,C,!0,!0);if(this.geometry.addAttribute("block"+E,F),_=b.get(E)){for(var x=0,S=_.length;x<S;++x){var I,M=_[x];(I=t.get(M.name))||(I=[],t.set(M.name,I));var O=this.allBufferLocations[M.name]||[];this.allBufferLocations[M.name]=O;var R=Object.assign({},M,{uid:E,packUID:U,bufferAttribute:F,size:C}),P=M.blockIndex||0,N=M.size||1;for(r=0;r<this.maxInstancedCount;++r){var L={attribute:R,block:E,buffer:{value:Q},instanceIndex:r,range:[r*C+P,r*C+P+N]};I.push(L),O.push(L)}this.attributes.push(R)}this.blockAttributes.push({uid:s.uid(),packUID:U,bufferAttribute:F,name:"block"+E,size:a.InstanceAttributeSize.FOUR,update:function(){return[0]}})}else console.warn("Instance Attribute Packing Buffer Error: Somehow there are no attributes associated with a block.","These are the attributes used:",this.layer.instanceAttributes,"These are the block sizes calculated",m,"This is the block to attribute lookup generated",b)}this.geometry.maxInstancedCount=0,this.material=this.layer.material.clone();r=0;for(var H=this.layer.uniforms.length;r<H;++r){var D=this.layer.uniforms[r];D.materialUniforms.push(this.material.uniforms[D.name])}}return this.scene&&this.model&&this.scene.container&&this.scene.container.remove(this.model),this.material=this.material||this.layer.material.clone(),this.model=u.generateLayerModel(this.geometry,this.material,this.layer.model.drawMode),this.scene&&this.scene.container&&this.model&&this.scene.container.add(this.model),{growth:e,newLocations:t}},t.prototype.gatherLocationsIntoGroups=function(e,t){if(0!==this.attributeToPropertyIds.size){var r=[];this.attributeToPropertyIds.forEach(function(t,n){r.push({attribute:n,bufferLocationsForAttribute:e.get(n.name)||[],childBufferLocations:(n.childAttributes||[]).map(function(t){return{location:e.get(t.name)||[],bufferIndex:-1}}),ids:t,bufferIndex:-1})});for(var n=0;n<t;++n){for(var i={instanceIndex:-1,propertyToBufferLocation:{}},o=function(e,t){var n=r[e],o=n.attribute,A=n.ids,a=n.bufferLocationsForAttribute;if(!a)return c.emitOnce("Instance Attribute Buffer Error",function(e,t){console.warn(t+": There is an error in forming buffer location groups in InstanceAttributePackingBufferManager. Error count: "+e)}),"continue";var s=a[++n.bufferIndex];if(!s)return c.emitOnce("Instance Attribute Buffer Error",function(e,t){console.warn(t+": There is an error in forming buffer location groups in InstanceAttributePackingBufferManager. Error count: "+e)}),"continue";if(-1===i.instanceIndex)i.instanceIndex=s.instanceIndex;else if(s.instanceIndex!==i.instanceIndex)return c.emitOnce("Instance Attribute Parallelism Error",function(e,t){console.warn(t+": A buffer location does not have a matching instance index which means the buffer locations are not in parallel with each other somehow. Error count: "+e),console.warn(o.name,s)}),"continue";if(o.childAttributes){for(var u=[],l=function(e,t){var r=o.childAttributes[e],i=n.childBufferLocations[e];if(i){var A=i.location[++i.bufferIndex];A?u.push(A):c.emitOnce("Instance Attribute Child Attribute Error",function(e,t){console.warn(t+": A child attribute does not have a buffer location available. Error count: "+e),console.warn("Parent Attribute: "+o.name+" Child Attribute: "+r.name)})}},h=0,d=o.childAttributes.length;h<d;++h)l(h);s.childLocations=u}for(h=0,d=A.length;h<d;++h){var f=A[h];i.propertyToBufferLocation[f]=s}},A=0,a=r.length;A<a;++A)o(A);this.availableLocations.push(i)}c.flushEmitOnce()}},t.prototype.getInstanceCount=function(){return this.maxInstancedCount},t}(l.BufferManagerBase);t.InstanceAttributePackingBufferManager=f},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o=r(53),A=r(4),a=r(0),s=r(105),c=r(34),u=r(44),l="EasingIOExpansion",h=Math.abs,d=Math.max,f={duration:0,start:[0],end:[0],startTime:0},p={1:"float",2:"vec2",3:"vec3",4:"vec4",9:"mat3",16:"mat4",99:"vec4"},g="easingMethod",B="T";var w=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.baseAttributeName=new Map,t}return i(t,e),t.prototype.expand=function(e,t,r,n){for(var i,c=new Set,u=[],l=[],p=0,g=t;p<g.length;p++){var B=g[p];i=B,Boolean(i)&&i.easing&&void 0!==i.size&&i.size<=4&&u.push(B)}var w={};e.easingId=w;for(var y=function(t,r){var n=u[t],i=n.easing,p=i.cpu,g=i.loop,B=i.uid,y=n.name,m=n.size,b=n.update,E=B;v.baseAttributeName.set(n,n.name),n.name="_"+n.name+"_end",w[n.name]=E,c.has(E)&&console.error("Undefined behavior occurs if you reuse an IAutoEasingMethod. Please ensure you are using uid() from the util to give the IAutoEasingMethod its uid, or just use the default provided methods"),c.add(E);var C,T,U,_,Q,F,x,S,I,M,O,R={values:f};n.update=function(t){if(I=e.surface.frameMetrics,T=n.easing.delay,U=n.easing.duration,x=b(t),S=I.currentTime,M=t.easing.get(E),O&&M?t.reactivate&&(O.copy(x,M.end),O.copy(x,M.end),M.startTime=S):(O=A.VecMath(x),M=new s.EasingProps({duration:U,end:O.copy(x),start:O.copy(x),startTime:S}),t.easing.set(E,M)),_=U,C=T,(Q=M).isTimeSet&&(_=Q.duration||U,C=Q.delay||0),!Q.isManualStart){switch(F=1,g){case o.AutoEasingLoopStyle.CONTINUOUS:F=(S-Q.startTime)/_;break;case o.AutoEasingLoopStyle.REPEAT:F=(S-Q.startTime)/_%1;break;case o.AutoEasingLoopStyle.REFLECT:var r=(S-Q.startTime)/_;F=2*h(r/2%1-.5);break;case o.AutoEasingLoopStyle.NONE:default:F=(S-Q.startTime)/_}Q.start=p(Q.start,Q.end,F,Q.start)}return Q.startTime=S+C,O.copy(x,Q.end),R.values=Q,e.animationEndTime=d(e.animationEndTime,Q.startTime+_+I.frameDuration),x},n.childAttributes=n.childAttributes||[];var P={name:"_"+y+"_start",parentAttribute:n,size:m,update:function(e){return R.values.start}};n.childAttributes.push(P),l.push(P);var N={name:"_"+y+"_start_time",parentAttribute:n,size:a.InstanceAttributeSize.ONE,update:function(e){return[R.values.startTime]}};n.childAttributes.push(N),l.push(N);var L={name:"_"+y+"_duration",parentAttribute:n,size:a.InstanceAttributeSize.ONE,update:function(e){return[R.values.duration]}};n.childAttributes.push(L),l.push(L)},v=this,m=0,b=u.length;m<b;++m)y(m);return{instanceAttributes:l,vertexAttributes:[],uniforms:[]}},t.prototype.validate=function(e,t,r,n){var i=!1;return t.forEach(function(e){e.easing&&e.resource&&(console.warn("An instance attribute can not have both easing and resource properties. Undefined behavior will occur."),console.warn(e),i=!0),e.easing&&void 0===e.size&&console.warn("An Instance Attribute with easing MUST have a size declared")}),!i},t.prototype.processAttributeDestructuring=function(e,t,r,n,i,A){for(var a=0,s=i.length;a<s;++a){var c=i[a];if(c.easing&&c.size){var u=this.baseAttributeName.get(c);if(u){this.baseAttributeName.delete(c);var h="_"+u+"_time",d="_"+u+"_duration",f="_"+u+"_start_time";switch(c.easing.loop){case o.AutoEasingLoopStyle.CONTINUOUS:this.setDeclaration(t,h,"  float "+h+" = (currentTime - "+f+") / "+d+";\n",l);break;case o.AutoEasingLoopStyle.REPEAT:this.setDeclaration(t,h,"  float "+h+" = clamp(fract((currentTime - "+f+") / "+d+"), 0.0, 1.0);\n",l);break;case o.AutoEasingLoopStyle.REFLECT:var g="_"+u+"_timePassed",B="_"+u+"_pingPong";this.setDeclaration(t,g,"  float "+g+" = (currentTime - "+f+") / "+d+";\n",l),this.setDeclaration(t,B,"  float "+B+" = abs((fract("+g+" / 2.0)) - 0.5) * 2.0;\n",l),this.setDeclaration(t,h,"  float "+h+" = clamp("+B+", 0.0, 1.0);\n",l);break;case o.AutoEasingLoopStyle.NONE:default:this.setDeclaration(t,h,"  float "+h+" = clamp((currentTime - "+f+") / "+d+", 0.0, 1.0);\n",l)}this.setDeclaration(t,u,"  "+p[c.size]+" "+u+" = "+c.easing.methodName+"(_"+u+"_start, _"+u+"_end, _"+u+"_time);\n",l)}else console.warn("Could not determine a base name for an easing attribute.")}}return""},t.prototype.processHeaderInjection=function(e,t,r,n,i,o,A){var s=this,u={injection:""};if(e!==a.ShaderInjectionTarget.VERTEX)return u;var h=new Map;if(u.injection="// Auto Easing Methods specified by the layer\n",o.forEach(function(e){if(e.easing&&e.size){var t=h.get(e.easing.methodName);t||(t=new Map,h.set(e.easing.methodName,t)),t.set(e.size,e.easing.gpu)}}),0===h.size)return u.injection="",u;var d={name:"Easing Method Generation",values:[g]};return h.forEach(function(e,r){e.forEach(function(e,n){var i,o=p[n],A=((i={})[g]=o+" "+r+"("+o+" start, "+o+" end, float t)",i[B]=""+o,i),a=c.shaderTemplate({options:A,required:d,shader:e});s.setDeclaration(t,o+" "+r,a.shader+"\n",l)})}),u},t}(u.BaseIOExpansion);t.EasingIOExpansion=w},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(9),i=r(0),o=function(){function e(e){this.index=0,this.available=4,this.index=e}return e.prototype.setAttribute=function(e){return(e.size||0)<=this.available&&(e.block=this.index,e.blockIndex=4-this.available,this.available-=e.size||0,!0)},e}();t.packAttributes=function(e){!function(e){e.forEach(function(e){if(e.resource&&void 0===e.size&&(e.size=i.InstanceAttributeSize.FOUR),!e.size)try{var t=e.update(new n.Instance({}));t.length>0&&t.length<=i.InstanceAttributeSize.FOUR&&(e.size=t.length)}catch(t){console.warn("The system could not determine the size of the provided attribute. Please provide the size of the attribute:",e)}})}(e);var t=[];e.forEach(function(e){if(e.size&&e.size===i.InstanceAttributeSize.MAT4X4){e.block=t.length,e.blockIndex=0;for(var r=0;r<4;++r)(n=new o(t.length)).available=0,n.index=0,t.push(n)}else if(!t.find(function(t){return!!t.setAttribute(e)&&Boolean(t)})){var n=new o(t.length);t.push(n),n.setAttribute(e)||console.warn("There was a problem packing an attribute into a block. No block would accommodate it:",e)}})}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(109),i=r(17),o=r(0),A=r(34),a=r(194),s=r(195),c=r(76),u=function(){function e(){this.metricsProcessing=new s.MetricsProcessing}return e.prototype.process=function(e,t,r,s){var c;try{var u=this.processImports(e,t);if(!u)return null;var l=n.injectShaderIO(e.surface.gl,e,t,r,s,u),h=l.vertexAttributes,d=l.instanceAttributes,f=l.uniforms;i.getLayerBufferType(e.surface.gl,e,h,d),this.metricsProcessing.process(d,f);for(var p="",g="",B="",w={uniforms:[]},y=new Map,v=new Map,m=new Map,b=0,E=r.length;b<E;++b){var C=r[b],T=C.processHeaderInjection(o.ShaderInjectionTarget.VERTEX,y,e,this.metricsProcessing,h,d,f);p+=T.injection,T.material&&(w.uniforms=w.uniforms.concat(T.material.uniforms||[]));var U=C.processHeaderInjection(o.ShaderInjectionTarget.FRAGMENT,v,e,this.metricsProcessing,h,d,f);g+=U.injection,U.material&&(w.uniforms=w.uniforms.concat(U.material.uniforms||[])),B+=C.processAttributeDestructuring(e,m,this.metricsProcessing,h,d,f)}var _="";y.forEach(function(e){_+=e}),p=_+p,_="",v.forEach(function(e){_+=e}),g=_+g,_="",m.forEach(function(e){_+=e}),B=_+B;var Q="precision highp float;\n\n"+p+u.vs,F="precision highp float;\n\n"+g+u.fs,x=((c={})[a.templateVars.attributes]=B,c),S=!1,I=A.shaderTemplate({options:x,required:void 0,shader:Q,onToken:function(e,t){return e===a.templateVars.attributes&&(S=!0),t},onMain:function(e){return S?e||"":null===e?(console.warn("The body of void main() could not be determined."),""):B+"\n"+e}});return x={},{fs:A.shaderTemplate({options:x,required:void 0,shader:F}).shader.trim(),materialUniforms:w.uniforms,maxInstancesPerBuffer:this.metricsProcessing.maxInstancesPerUniformBuffer,modules:Array.from(u.shaderModuleUnits),vs:I.shader.trim(),vertexAttributes:h,instanceAttributes:d,uniforms:f}}catch(t){return console.warn("An unknown error occurred while processing the shaders for layer:",e.id),console.warn("Error:"),console.warn(t&&(t.stack||t.message)),null}},e.prototype.processImports=function(e,t){var r=new Set,n=e.baseShaderModules(t);e.props.baseShaderModules&&(n=e.props.baseShaderModules(t,n));var i=c.ShaderModule.process(e.id,t.vs,o.ShaderInjectionTarget.VERTEX,n.vs);if(i.errors.length>0)return console.warn.apply(console,["Error processing imports for the vertex shader of layer:",e.id,"Errors"].concat(i.errors.reverse())),null;var A=c.ShaderModule.process(e.id,t.fs,o.ShaderInjectionTarget.FRAGMENT,n.fs);return A.errors.length>0?(console.warn.apply(console,["Error processing imports for the fragment shader of layer:",e.id,"Errors"].concat(A.errors.reverse())),null):(i.shaderModuleUnits.forEach(function(e){return r.add(e)}),A.shaderModuleUnits.forEach(function(e){return r.add(e)}),{fs:A.shader||"",vs:i.shader||"",shaderModuleUnits:r})},e}();t.ShaderProcessor=u},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.templateVars={attributes:"attributes",easingMethod:"easingMethod",extend:"extend",extendHeader:"extendHeader",T:"T"}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(25),i=function(){function e(){}return e.calculateUniformBlockUseage=function(e){for(var t=0,r=0,n=e.length;r<n;++r)t+=Math.ceil(e[r].size/4);return t},e.prototype.process=function(t,r){var i=this;this.instanceMaxBlock=0,t.forEach(function(e){i.instanceMaxBlock=Math.max(i.instanceMaxBlock,e.block||0)}),this.blocksPerInstance=this.instanceMaxBlock+1,this.maxUniforms=n.WebGLStat.MAX_VERTEX_UNIFORMS,this.maxUniformsForInstancing=this.maxUniforms-e.calculateUniformBlockUseage(r),this.maxInstancesPerUniformBuffer=Math.floor(this.maxUniformsForInstancing/this.blocksPerInstance),this.totalInstanceUniformBlocks=this.maxInstancesPerUniformBuffer*this.blocksPerInstance},e}();t.MetricsProcessing=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(0),i=r(17),o=r(197),A=r(110),a=r(198),s=r(112),c=function(){function e(e,t){this.layer=e,this.bufferManager=t}return e.prototype.makeProcessor=function(){return this.processing?this.processing:(this.layer.bufferType===i.LayerBufferType.INSTANCE_ATTRIBUTE||this.layer.bufferType===i.LayerBufferType.INSTANCE_ATTRIBUTE_PACKING?(this.layer.picking&&this.layer.picking.type===n.PickType.SINGLE&&(this.processor=new o.InstanceAttributeColorDiffProcessor(this.layer,this.bufferManager)),this.processor||(this.processor=new A.InstanceAttributeDiffProcessor(this.layer,this.bufferManager))):(this.layer.picking&&this.layer.picking.type===n.PickType.SINGLE&&(this.processor=new a.UniformColorDiffProcessor(this.layer,this.bufferManager)),this.processor||(this.processor=new s.UniformDiffProcessor(this.layer,this.bufferManager))),this.processing=[this.processor.changeInstance,this.processor.addInstance,this.processor.removeInstance],this.processing)},e}();t.InstanceDiffManager=c},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o=r(0),A=r(31),a=r(110),s=[],c=function(e){function t(t,r){var n=e.call(this,t,r)||this;return t.picking.type===o.PickType.SINGLE?(n.colorPicking=t.picking,n.colorPicking.uidToInstance=new Map):console.warn("Diff Processing Error: A layer has a diff processor requesting Color Processing but the picking type is not valid."),n}return i(t,e),t.prototype.addInstance=function(e,t,r,n){if(n)e.changeInstance(e,t,s,n);else{var i=e.layer.bufferManager.add(t);A.isBufferLocationGroup(i)?(t.active=!0,t.easingId=e.layer.easingId,e.updateInstance(e.layer,t,s,i),e.colorPicking.uidToInstance.set(t.uid,t)):console.warn("A data cluster was not provided by the manager to associate an instance with.")}},t.prototype.changeInstance=function(e,t,r,n){n?e.updateInstance(e.layer,t,r,n):e.addInstance(e,t,s,n)},t.prototype.removeInstance=function(e,t,r,n){n&&(t.active=!1,t.clearEasing(),e.updateInstance(e.layer,t,s,n),e.layer.bufferManager.remove(t),e.colorPicking.uidToInstance.delete(t.uid))},t}(a.InstanceAttributeDiffProcessor);t.InstanceAttributeColorDiffProcessor=c},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o=r(0),A=r(65),a=r(112),s=[],c=function(e){function t(t,r){var n=e.call(this,t,r)||this;return t.picking.type===o.PickType.SINGLE?(n.colorPicking=t.picking,n.colorPicking.uidToInstance=new Map):console.warn("Diff Processing Error: A layer has a diff processor requesting Color Processing but the picking type is not valid."),n}return i(t,e),t.prototype.addInstance=function(e,t,r,n){if(n)e.changeInstance(e,t,s,n);else{var i=e.layer.bufferManager.add(t);A.isUniformBufferLocation(i)?(t.active=!0,t.easingId=e.layer.easingId,e.updateInstance(e.layer,t,i),e.colorPicking.uidToInstance.set(t.uid,t)):console.warn("A data cluster was not provided by the manager to associate an instance with.")}},t.prototype.changeInstance=function(e,t,r,n){n?e.updateInstance(e.layer,t,n):e.addInstance(e,t,s,n)},t.prototype.removeInstance=function(e,t,r,n){n&&(t.active=!1,t.clearEasing(),e.updateInstance(e.layer,t,n),e.layer.bufferManager.remove(t),e.colorPicking.uidToInstance.delete(t.uid))},t}(a.UniformDiffProcessor);t.UniformColorDiffProcessor=c},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(77),i=r(0);var o=function(){function e(e){this.isMouseOver=new Set,this.isMouseDown=new Set,this.isTouchOver=new Map,this.isTouchDown=new Map,this.layer=e}return e.prototype.getColorPickInstance=function(){return this.colorPicking&&this.layer.diffManager&&((e=this.layer.diffManager.processor)&&e.colorPicking)?this.layer.diffManager.processor.colorPicking.uidToInstance.get(16777215-this.colorPicking.nearestColor):null;var e},e.prototype.handleMouseOver=function(e,t){},e.prototype.handleTouchOver=function(e,t,r){},e.prototype.handleMouseDown=function(e,t){var r=this;if(this.layer.picking&&this.layer.picking.type!==i.PickType.NONE){var n=this.layer.props.onMouseDown;if(n){var o=e.screenToWorld(t.screen.position),A=[];if(this.layer.picking.type===i.PickType.SINGLE){var a=this.getColorPickInstance();a&&A.push(a)}n({interaction:t,instances:A,layer:this.layer.id,projection:e,screen:t.screen.position,world:o}),this.isMouseDown.clear(),A.forEach(function(e){return r.isMouseDown.add(e)})}}},e.prototype.handleTouchDown=function(e,t,r){var o=this.layer.props,A=o.onTouchDown,a=o.onTouchOver;if(this.layer.picking&&this.layer.picking.type!==i.PickType.NONE&&(A||a)){var s=e.screenToWorld(r.screen.position),c=[];if(this.layer.picking.type===i.PickType.SINGLE){var u=this.getColorPickInstance();u&&c.push(u)}var l={interaction:t,touch:r,instances:c,layer:this.layer.id,projection:e,screen:r.screen.position,world:s},h=n.mapInjectDefault(this.isTouchDown,r.touch.touch.identifier,function(){return new Set}),d=n.mapInjectDefault(this.isTouchOver,r.touch.touch.identifier,function(){return new Set});c.forEach(function(e){h.add(e),d.add(e)}),a&&a(l),A&&A(l)}},e.prototype.handleMouseOut=function(e,t){if(this.layer.picking&&this.layer.picking.type!==i.PickType.NONE){var r=this.layer.props.onMouseOut;if(r){var n=e.screenToWorld(t.screen.position);r({interaction:t,instances:Array.from(this.isMouseOver.keys()),layer:this.layer.id,projection:e,screen:t.screen.position,world:n})}}this.isMouseOver.clear()},e.prototype.handleTouchOut=function(e,t,r){var n=this.layer.props.onTouchOut;if(this.layer.picking&&this.layer.picking.type!==i.PickType.NONE&&n){var o=e.screenToWorld(r.screen.position);n({interaction:t,touch:r,instances:Array.from(this.isMouseOver.keys()),layer:this.layer.id,projection:e,screen:r.screen.position,world:o}),this.isTouchOver.delete(r.touch.touch.identifier)}},e.prototype.handleMouseUp=function(e,t){var r=this,n=this.layer.props,o=n.onMouseUp,A=n.onMouseUpOutside;if(this.layer.picking&&this.layer.picking.type!==i.PickType.NONE&&o){var a=e.screenToWorld(t.screen.position),s=[];if(this.layer.picking.type===i.PickType.SINGLE){var c=this.getColorPickInstance();c&&s.push(c)}var u={interaction:t,instances:s,layer:this.layer.id,projection:e,screen:t.screen.position,world:a};o(u),s.forEach(function(e){return r.isMouseDown.delete(e)}),this.isMouseDown.size<=0||!A||A(u={interaction:t,instances:Array.from(this.isMouseDown.values()),layer:this.layer.id,projection:e,screen:t.screen.position,world:a})}},e.prototype.handleTouchUp=function(e,t,r){var o=this.layer.props,A=o.onTouchUp,a=o.onTouchUpOutside,s=o.onTouchOut,c=o.onTouchAllEnd;if(this.layer.picking&&this.layer.picking.type!==i.PickType.NONE&&(A||a||s||c)){var u=e.screenToWorld(r.screen.position),l=[];if(this.layer.picking.type===i.PickType.SINGLE){var h=this.getColorPickInstance();h&&l.push(h)}var d={interaction:t,touch:r,instances:l,layer:this.layer.id,projection:e,screen:r.screen.position,world:u};s&&s(d),A&&A(d);var f=n.mapGetWithDefault(this.isTouchDown,r.touch.touch.identifier,new Set);l.forEach(function(e){return f.delete(e)}),f.size>0&&a&&a(d={interaction:t,touch:r,instances:Array.from(f.values()),layer:this.layer.id,projection:e,screen:r.screen.position,world:u}),this.isTouchDown.delete(r.touch.touch.identifier),this.isTouchDown.size<=0&&c&&c(d={interaction:t,touch:r,instances:[],layer:this.layer.id,projection:e,screen:r.screen.position,world:u})}},e.prototype.handleMouseMove=function(e,t){var r=this,n=this.layer.props,o=n.onMouseOver,A=n.onMouseMove,a=n.onMouseOut;if(this.layer.picking&&this.layer.picking.type!==i.PickType.NONE&&(o||A||a)){var s=void 0,c=e.screenToWorld(t.screen.position),u=[];if(this.layer.picking.type===i.PickType.SINGLE){var l=this.getColorPickInstance();l&&u.push(l)}var h=new Set;if(u.forEach(function(e){return h.add(e)}),a){var d=[];this.isMouseOver.forEach(function(e){h.has(e)||d.push(e)}),s={interaction:t,instances:d,layer:this.layer.id,projection:e,screen:t.screen.position,world:c},d.length>0&&a(s)}if(o){var f=u.filter(function(e){return!r.isMouseOver.has(e)});s={interaction:t,instances:f,layer:this.layer.id,projection:e,screen:t.screen.position,world:c},f.length>0&&o(s)}A&&A(s={interaction:t,instances:u,layer:this.layer.id,projection:e,screen:t.screen.position,world:c}),this.isMouseOver=h}},e.prototype.handleTouchMove=function(e,t,r){var o=this.layer.props,A=o.onTouchOver,a=o.onTouchMove,s=o.onTouchOut;if(this.layer.picking&&this.layer.picking.type!==i.PickType.NONE&&(A||a||s)){var c=void 0,u=e.screenToWorld(r.screen.position),l=[];if(this.layer.picking.type===i.PickType.SINGLE){var h=this.getColorPickInstance();h&&l.push(h)}var d=n.mapGetWithDefault(this.isTouchOver,r.touch.touch.identifier,new Set),f=new Set;if(l.forEach(function(e){return f.add(e)}),s){var p=[];d.forEach(function(e){f.has(e)||p.push(e)}),c={interaction:t,touch:r,instances:p,layer:this.layer.id,projection:e,screen:r.screen.position,world:u},p.length>0&&s(c)}if(A){var g=l.filter(function(e){return!d.has(e)});c={interaction:t,touch:r,instances:g,layer:this.layer.id,projection:e,screen:r.screen.position,world:u},g.length>0&&A(c)}a&&a(c={interaction:t,touch:r,instances:l,layer:this.layer.id,projection:e,screen:r.screen.position,world:u}),this.isMouseOver=f}},e.prototype.handleMouseClick=function(e,t){if(this.layer.picking&&this.layer.picking.type!==i.PickType.NONE){var r=this.layer.props.onMouseClick;if(r){var n=e.screenToWorld(t.screen.position),o=[];if(this.layer.picking.type===i.PickType.SINGLE){var A=this.getColorPickInstance();A&&o.push(A)}r({interaction:t,instances:o,layer:this.layer.id,projection:e,screen:t.screen.position,world:n})}}},e.prototype.handleTap=function(e,t,r){if(this.layer.picking&&this.layer.picking.type!==i.PickType.NONE){var n=this.layer.props.onTap;if(n){var o=e.screenToWorld(r.screen.position),A=[];if(this.layer.picking.type===i.PickType.SINGLE){var a=this.getColorPickInstance();a&&A.push(a)}n({interaction:t,touch:r,instances:A,layer:this.layer.id,projection:e,screen:r.screen.position,world:o})}}},e.prototype.handleMouseDrag=function(e,t){},e}();t.LayerInteractionHandler=o},function(e,t,r){"use strict";function n(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}Object.defineProperty(t,"__esModule",{value:!0}),n(r(201)),n(r(35)),n(r(36)),n(r(5)),n(r(202)),n(r(203))},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o,A=r(48),a=r(11),s=r(6),c=r(1);!function(e){e[e.TOP_LEFT=0]="TOP_LEFT",e[e.TOP_MIDDLE=1]="TOP_MIDDLE",e[e.TOP_RIGHT=2]="TOP_RIGHT",e[e.MIDDLE_LEFT=3]="MIDDLE_LEFT",e[e.MIDDLE=4]="MIDDLE",e[e.MIDDLE_RIGHT=5]="MIDDLE_RIGHT",e[e.BOTTOM_LEFT=6]="BOTTOM_LEFT",e[e.BOTTOM_MIDDLE=7]="BOTTOM_MIDDLE",e[e.BOTTOM_RIGHT=8]="BOTTOM_RIGHT"}(o=t.CameraBoundsAnchor||(t.CameraBoundsAnchor={}));var u=function(e){function t(t){var r=e.call(this,{})||this;return r._uid=c.uid(),r.isPanning=!1,r.isScaling=!1,r.panFilter=function(e,t,r){return e},r.scaleFilter=function(e,t,r){return e},r.startViews=[],r.optimizedViews=new Set,r.cameraImmediateAnimation=a.AutoEasingMethod.immediate(0),r.targetTouches=new Set,r.onRangeChanged=function(e,t){},r.startViewDidStart=!1,r.applyBounds=function(){if(r.bounds&&r.camera){var e=r.getView(r.bounds.view);r.applyScaleBounds(),e&&(r.camera.control2D.getOffset()[0]=r.boundsHorizontalOffset(e,r.bounds),r.camera.control2D.getOffset()[1]=r.boundsVerticalOffset(e,r.bounds))}},r.applyScaleBounds=function(){r.camera&&r.bounds&&(r.bounds.scaleMin&&r.camera.control2D.setScale(a.max3(r.camera.control2D.getScale(),r.bounds.scaleMin)),r.bounds.scaleMax&&r.camera.control2D.setScale(a.min3(r.camera.control2D.getScale(),r.bounds.scaleMax)))},r.handleCameraViewChange=function(e,t){if(t===r.startViews[0]){var n=r.surface.getProjections(t);n&&r.onRangeChanged(e,n)}},t.bounds&&r.setBounds(t.bounds),r._camera=t.camera,r.scaleFactor=t.scaleFactor||1e3,r.ignoreCoverViews=t.ignoreCoverViews||!1,r.twoFingerPan=t.twoFingerPan||!1,t.startView&&(Array.isArray(t.startView)?(r.startViews=t.startView,r._camera.control2D.setViewChangeHandler(r.handleCameraViewChange)):(r.startViews=[t.startView],r._camera.control2D.setViewChangeHandler(r.handleCameraViewChange))),r.panFilter=t.panFilter||r.panFilter,r.scaleFilter=t.scaleFilter||r.scaleFilter,r.onRangeChanged=t.onRangeChanged||r.onRangeChanged,t.wheelShouldScroll&&(r.wheelShouldScroll=t.wheelShouldScroll),r}return i(t,e),Object.defineProperty(t.prototype,"uid",{get:function(){return this._uid},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"camera",{get:function(){return this._camera},enumerable:!0,configurable:!0}),t.prototype.anchoredByBoundsHorizontal=function(e,t){switch(t.anchor){case o.TOP_LEFT:case o.MIDDLE_LEFT:case o.BOTTOM_LEFT:return-(t.worldBounds.left-t.screenPadding.left/this.camera.control2D.getScale()[0]);case o.TOP_MIDDLE:case o.MIDDLE:case o.BOTTOM_MIDDLE:return-(t.worldBounds.right-t.worldBounds.width/2-(e.screenBounds.width+t.screenPadding.right)/this.camera.control2D.getScale()[0]*.5);case o.TOP_RIGHT:case o.MIDDLE_RIGHT:case o.BOTTOM_RIGHT:return-(t.worldBounds.right-(e.screenBounds.width-t.screenPadding.right)/this.camera.control2D.getScale()[0])}},t.prototype.anchoredByBoundsVertical=function(e,t){switch(t.anchor){case o.TOP_LEFT:case o.TOP_MIDDLE:case o.TOP_RIGHT:return-(t.worldBounds.top-t.screenPadding.top/this.camera.control2D.getScale()[1]);case o.MIDDLE_LEFT:case o.MIDDLE:case o.MIDDLE_RIGHT:return-(t.worldBounds.bottom-t.worldBounds.height/2-(e.screenBounds.height+t.screenPadding.bottom)/this.camera.control2D.getScale()[1]*.5);case o.BOTTOM_LEFT:case o.BOTTOM_MIDDLE:case o.BOTTOM_RIGHT:return-(t.worldBounds.bottom-(e.screenBounds.height-t.screenPadding.bottom)/this.camera.control2D.getScale()[1])}},t.prototype.boundsHorizontalOffset=function(e,t){var r=e.projection.worldToScreen([t.worldBounds.left,t.worldBounds.top]),n=e.projection.worldToScreen([t.worldBounds.right,t.worldBounds.bottom]);return n[0]-r[0]+t.screenPadding.left+t.screenPadding.right-e.screenBounds.width<0?this.anchoredByBoundsHorizontal(e,t):n[0]<e.screenBounds.right-t.screenPadding.right?-t.worldBounds.right+(e.screenBounds.width-t.screenPadding.right)/this.camera.control2D.getScale()[0]:r[0]>e.screenBounds.left+t.screenPadding.left?-t.worldBounds.left+t.screenPadding.left/this.camera.control2D.getScale()[0]:this.camera.control2D.getOffset()[0]},t.prototype.boundsVerticalOffset=function(e,t){var r=e.projection.worldToScreen([t.worldBounds.left,t.worldBounds.top]),n=e.projection.worldToScreen([t.worldBounds.right,t.worldBounds.bottom]);return n[1]-r[1]+t.screenPadding.top+t.screenPadding.bottom-e.screenBounds.height<0?this.anchoredByBoundsVertical(e,t):n[1]<e.screenBounds.bottom-t.screenPadding.bottom?-t.worldBounds.bottom+(e.screenBounds.height-t.screenPadding.bottom)/this.camera.control2D.getScale()[1]:r[1]>e.screenBounds.top+t.screenPadding.top?-t.worldBounds.top+t.screenPadding.top/this.camera.control2D.getScale()[0]:this.camera.control2D.getOffset()[1]},t.prototype.canStart=function(e){return 0===this.startViews.length||this.startViews&&this.startViews.indexOf(e)>-1||this.startViewDidStart&&this.ignoreCoverViews},t.prototype.centerOn=function(e,t){if(this.camera.control2D.surface){var r=this.camera.control2D.surface.getViewSize(e);if(r){var n=[r.width/2,r.height/2,0],i=a.subtract3(t,a.divide3(n,this.camera.control2D.getScale())),o=a.scale3(i,-1);this.setOffset(e,o)}}},t.prototype.doPan=function(e,t,r){var n=a.vec3(a.divide2(r,this.camera.control2D.getScale()),0);this.panFilter&&(n=this.panFilter(n,t,e)),this.camera.control2D.getOffset()[0]+=n[0],this.camera.control2D.getOffset()[1]+=n[1],this.applyBounds(),this.onRangeChanged(this.camera,t.projection),this.applyBounds(),this.camera.control2D.update()},t.prototype.doScale=function(e,t,r,n){var i=t.projection.screenToWorld(e),o=this.camera.control2D.getScale()[0]||1,A=this.camera.control2D.getScale()[1]||1;this.scaleFilter&&(n=this.scaleFilter(n,t,r)),this.camera.control2D.getScale()[0]=o+n[0],this.camera.control2D.getScale()[1]=A+n[1],this.applyScaleBounds();var s=t.projection.screenToWorld(e),c=a.subtract2(i,s);this.camera.control2D.getOffset()[0]-=c[0],this.camera.control2D.getOffset()[1]-=c[1],this.applyBounds(),this.onRangeChanged(this.camera,t.projection),this.applyBounds(),this.camera.control2D.update(),this.camera.control2D.animation=this.cameraImmediateAnimation},t.prototype.filterTouchesByValidStart=function(e){return this.ignoreCoverViews?e.filter(c.touchesContainsStartView(this.startViews)):e.filter(c.touchesHasStartView(this.startViews))},t.prototype.findCoveredStartView=function(e){var t=this,r=e.target.views.find(function(e){return t.startViews.indexOf(e.view.id)>-1});this.startViewDidStart=Boolean(r),r&&(this.coveredStartView=r.view)},t.prototype.getRange=function(e){var t=this.getProjection(e),r=this.getViewScreenBounds(e);if(t&&r){var n=t.screenToWorld([r.x,r.y]),i=t.screenToWorld([r.right,r.bottom]);return new s.Bounds({height:i[1]-n[1],width:i[0]-n[0],x:n[0],y:n[1]})}return new s.Bounds({x:0,y:0,width:1,height:1})},t.prototype.getTargetView=function(e){return this.startViews&&!this.ignoreCoverViews?e.target.view:this.coveredStartView},t.prototype.handleMouseDown=function(e){this.startViews&&(this.findCoveredStartView(e),e.start&&(this.isPanning=this.canStart(e.start.view.id)||this.isPanning))},t.prototype.handleTouchDown=function(e){if(this.startViews){var t=this.filterTouchesByValidStart(e.allTouches);this.twoFingerPan?t.length>1&&(this.isPanning=!0):t.length>0&&(this.isPanning=!0),t.length>1&&(this.isScaling=!0);for(var r=0,n=t.length;r<n;++r){var i=t[r];this.targetTouches.add(i.touch.touch.identifier)}}},t.prototype.handleMouseUp=function(e){this.startViewDidStart=!1,this.isPanning=!1,this.optimizedViews.forEach(function(e){return e.optimizeRendering=!1}),this.optimizedViews.clear()},t.prototype.handleTouchUp=function(e){var t=this;e.touches.forEach(function(e){t.targetTouches.delete(e.touch.touch.identifier),t.targetTouches.size<=0&&(t.startViewDidStart=!1,t.isPanning=!1,t.optimizedViews.forEach(function(e){return e.optimizeRendering=!1}),t.optimizedViews.clear())}),this.isPanning=!1,this.isScaling=!1,this.targetTouches.size>0&&(this.isPanning=!0),this.targetTouches.size>1&&(this.isScaling=!0)},t.prototype.handleTouchCancelled=function(e){var t=this;e.touches.forEach(function(e){t.targetTouches.delete(e.touch.touch.identifier),t.targetTouches.size<=0&&(t.startViewDidStart=!1,t.isPanning=!1,t.optimizedViews.forEach(function(e){return e.optimizeRendering=!1}),t.optimizedViews.clear())}),this.isPanning=!1,this.isScaling=!1,this.targetTouches.size>0&&(this.isPanning=!0),this.targetTouches.size>1&&(this.isScaling=!0)},t.prototype.handleDrag=function(e){var t=this;e.start&&this.canStart(e.start.view.id)&&(e.target.views.forEach(function(e){e.view.optimizeRendering=!0,t.optimizedViews.add(e.view)}),this.doPan(e.target.views.map(function(e){return e.view}),e.start.view,e.mouse.deltaPosition),this.camera.control2D.animation=this.cameraImmediateAnimation)},t.prototype.handleTouchDrag=function(e){var t=this,r=this.filterTouchesByValidStart(e.allTouches);if(r.length>0&&this.isPanning){for(var n=0,i=r.length;n<i;++n){r[n].target.views.forEach(function(e){e.view.optimizeRendering=!0,t.optimizedViews.add(e.view)})}var o=new Set,A=r.reduce(function(e,t){for(var r=0,n=t.target.views.length;r<n;++r){var i=t.target.views[r];o.add(i.view)}return t.touch.startTime<e.touch.startTime?t:e},r[0]).start.view;if(this.isPanning&&(this.doPan(Array.from(o.values()),A,e.multitouch.centerDelta(r)),this.camera.control2D.animation=this.cameraImmediateAnimation),this.isScaling){var s=e.multitouch.center(r),c=a.subtract2(r[0].touch.currentPosition,s),u=a.subtract2(s,e.multitouch.centerDelta(r)),l=a.subtract2(r[0].touch.previousPosition,u),h=a.length2(c)/a.length2(l),d=[h*this.camera.scale2D[0]-this.camera.scale2D[0],h*this.camera.scale2D[1]-this.camera.scale2D[1],0];1!==h&&this.doScale(s,A,Array.from(o.values()),d)}}},t.prototype.handleWheel=function(e){if(this.findCoveredStartView(e),this.canStart(e.target.view.id))if(this.wheelShouldScroll){var t=[-e.mouse.wheel.delta[0],e.mouse.wheel.delta[1]];e.start&&this.doPan(e.target.views.map(function(e){return e.view}),e.start.view,t)}else{var r=this.camera.control2D.getScale()[0]||1,n=this.camera.control2D.getScale()[1]||1,i=this.getTargetView(e),o=[e.mouse.wheel.delta[1]/this.scaleFactor*r,e.mouse.wheel.delta[1]/this.scaleFactor*n,1];this.doScale(e.screen.position,i,e.target.views.map(function(e){return e.view}),o)}},Object.defineProperty(t.prototype,"pan",{get:function(){return this.camera.control2D.offset},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"scale",{get:function(){return this.camera.control2D.getScale()},enumerable:!0,configurable:!0}),t.prototype.setBounds=function(e){this.bounds=e,this.applyBounds()},t.prototype.setOffset=function(e,t){var r=a.copy3(this.camera.control2D.offset);if(this.camera.control2D.getOffset()[0]=t[0],this.camera.control2D.getOffset()[1]=t[1],this.camera.control2D.getOffset()[2]=t[2],this.applyBounds(),this.camera.control2D.surface){var n=this.camera.control2D.surface.getProjections(e);n&&this.onRangeChanged(this.camera,n)}this.applyBounds();var i=a.copy3(this.camera.control2D.getOffset()),o=this.camera.control2D.animation;this.camera.control2D.setOffset(r),this.camera.control2D.animation=this.cameraImmediateAnimation,this.camera.control2D.setOffset(i),this.camera.control2D.animation=o},t.prototype.setRange=function(e,t){var r=this.getProjection(t),n=this.getViewScreenBounds(t),i=this.getView(t);if(r&&n&&i){var o=a.subtract3([n.width/e.width,n.height/e.height,1],this.camera.control2D.getScale());this.camera.control2D.setScale(a.add3(this.camera.control2D.getScale(),this.scaleFilter(o,i,[i])));var A=a.subtract3([-e.x,-e.y,0],this.camera.control2D.offset);this.camera.control2D.setOffset(a.add3(this.camera.control2D.offset,this.scaleFilter(A,i,[i]))),this.applyBounds(),this.onRangeChanged(this.camera,i.projection),this.applyBounds()}},t.prototype.setRangeChangeHandler=function(e){this.onRangeChanged=e},t}(A.SimpleEventHandler);t.BasicCamera2DController=u},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o=r(35),A=function(e){function t(t,r){var n=e.call(this,t)||this;return n.offsetFilter=function(e){return e},n.scaleFilter=function(e){return e},n.base=r.base,n.offsetFilter=r.offsetFilter||n.offsetFilter,n.scaleFilter=r.scaleFilter||n.scaleFilter,n}return i(t,e),Object.defineProperty(t.prototype,"offset",{get:function(){return this.offsetFilter(this.base.offset)},set:function(e){},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"scale",{get:function(){return this.scaleFilter(this.base.scale)},set:function(e){},enumerable:!0,configurable:!0}),t}(r(36).Control2D),a=function(e){function t(t){var r=e.call(this)||this;return r.base=t.base,r._control2D=new A(r.base,{base:r.base.control2D,offsetFilter:t.offsetFilter,scaleFilter:t.scaleFilter}),r}return i(t,e),Object.defineProperty(t.prototype,"control2D",{get:function(){return this._control2D},set:function(e){},enumerable:!0,configurable:!0}),t}(o.Camera2D);t.ReferenceCamera2D=a},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o=r(6),A=r(4),a=r(18),s=r(15),c=r(35),u=r(204);function l(e){return e.projectionType===s.CameraProjectionType.ORTHOGRAPHIC}var h=function(e){function t(t,r){var n=e.call(this,t,r)||this;return n.projection=new u.Projection2D,n.projection.camera=r.camera,n}return i(t,e),t.prototype.fitViewtoViewport=function(e,t){if(l(this.props.camera)){var r=t.width,n=t.height,i={bottom:-n/2,far:1e7,left:-r/2,near:-100,right:r/2,top:n/2},a=1/this.pixelRatio,s=1/this.pixelRatio,c=this.props.camera;c.projectionOptions=Object.assign(c.projectionOptions,i),c.position=[t.width/2,-t.height/2,c.position[2]],c.scale=[a,-s,1],c.lookAt(A.add3(c.position,[0,0,-1]),[0,1,0]),c.update(),this.projection.viewBounds=t,t.d=this,this.projection.screenBounds=new o.Bounds({height:this.viewBounds.height/this.pixelRatio,width:this.viewBounds.width/this.pixelRatio,x:this.viewBounds.x/this.pixelRatio,y:this.viewBounds.y/this.pixelRatio}),this.screenBounds.d=this}else l(this.props.camera)||console.warn("View2D does not support non-orthographic cameras yet.")},t.prototype.willUpdateProps=function(e){this.projection.camera=e.camera},t.defaultProps={key:"",camera:new c.Camera2D,viewport:{left:0,right:0,bottom:0,top:0}},t}(a.View);t.View2D=h},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.screenToWorld=function(e,t){var r=this.screenToView(e),n=t||[0,0];return n[0]=(r[0]-this.camera.control2D.offset[0]*this.camera.scale2D[0])/this.camera.scale2D[0],n[1]=(r[1]-this.camera.control2D.offset[1]*this.camera.scale2D[1])/this.camera.scale2D[1],n},t.prototype.worldToScreen=function(e,t){var r=[0,0];return r[0]=(e[0]*this.camera.scale2D[0]+this.camera.control2D.offset[0]*this.camera.scale2D[0])*this.pixelRatio,r[1]=(e[1]*this.camera.scale2D[1]+this.camera.control2D.offset[1]*this.camera.scale2D[1])*this.pixelRatio,this.viewToScreen(r,t)},t.prototype.viewToWorld=function(e,t){var r=t||[0,0],n=e;return r[0]=(n[0]-this.camera.control2D.offset[0]*this.camera.scale2D[0])/this.camera.scale2D[0],r[1]=(n[1]-this.camera.control2D.offset[1]*this.camera.scale2D[1])/this.camera.scale2D[1],r},t.prototype.worldToView=function(e,t){var r=t||[0,0];return r[0]=e[0]*this.camera.scale2D[0]+this.camera.control2D.offset[0]*this.camera.scale2D[0],r[1]=e[1]*this.camera.scale2D[1]+this.camera.control2D.offset[1]*this.camera.scale2D[1],r},t}(r(11).BaseProjection);t.Projection2D=o},function(e,t,r){"use strict";function n(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}Object.defineProperty(t,"__esModule",{value:!0}),n(r(206)),n(r(212)),n(r(219)),n(r(228)),n(r(235)),n(r(248)),n(r(253))},function(e,t,r){"use strict";function n(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}Object.defineProperty(t,"__esModule",{value:!0}),n(r(207)),n(r(211))},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o,A=r(7),a=r(3),s=r(0),c=r(1),u=r(5);!function(e){e[e.NONE=0]="NONE",e[e.SCREEN_CURVE=1]="SCREEN_CURVE"}(o=t.ArcScaleType||(t.ArcScaleType={}));var l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.initShader=function(){for(var e,n,i=this.props.scaleType,A=this.props.animate||{},a=A.angle,c=A.angleOffset,u=A.center,l=A.radius,h=A.thickness,d=A.colorStart,f=A.colorEnd,p=((e={0:1})[302]=-1,e),g=((n={0:0})[302]=1,n),B=1,w=0;w<300;++w)p[w+1]=B,g[w+1]=Math.floor(w/2)/149,B*=-1;var y=i===o.NONE?r(208):r(209);return{fs:r(210),instanceAttributes:[{easing:u,name:t.attributeNames.center,size:s.InstanceAttributeSize.TWO,update:function(e){return e.center}},{easing:l,name:t.attributeNames.radius,size:s.InstanceAttributeSize.ONE,update:function(e){return[e.radius]}},{name:t.attributeNames.depth,size:s.InstanceAttributeSize.ONE,update:function(e){return[e.depth]}},{easing:h,name:t.attributeNames.thickness,size:s.InstanceAttributeSize.TWO,update:function(e){return e.thickness}},{easing:a,name:t.attributeNames.angle,size:s.InstanceAttributeSize.TWO,update:function(e){return e.angle}},{easing:c,name:t.attributeNames.angleOffset,size:s.InstanceAttributeSize.ONE,update:function(e){return[e.angleOffset]}},{easing:d,name:t.attributeNames.colorStart,size:s.InstanceAttributeSize.FOUR,update:function(e){return e.colorStart}},{easing:f,name:t.attributeNames.colorEnd,size:s.InstanceAttributeSize.FOUR,update:function(e){return e.colorEnd}}],uniforms:[{name:"scaleFactor",size:s.UniformSize.ONE,update:function(e){return[1]}}],vertexAttributes:[{name:"vertex",size:s.VertexAttributeSize.THREE,update:function(e){return[p[e],g[e],300]}}],vertexCount:302,vs:y}},t.prototype.getMaterialOptions=function(){return Object.assign({},c.CommonMaterialOptions.transparentShapeBlending,{culling:A.GLSettings.Material.CullSide.NONE})},t.defaultProps={data:new a.InstanceProvider,key:"",scaleType:o.NONE},t.attributeNames={angle:"angle",angleOffset:"angleOffset",center:"center",colorEnd:"colorEnd",colorStart:"colorStart",depth:"depth",radius:"radius",thickness:"thickness"},t}(u.Layer2D);t.ArcLayer=l},function(e,t){e.exports="${import: arc}\nprecision highp float;\nvarying vec4 vertexColor;\nvoid main() {\nfloat startAngle = angle.x + angleOffset;\nfloat endAngle = angle.y + angleOffset;\nfloat widthStart = thickness.x;\nfloat widthEnd = thickness.y;\nfloat normal = vertex.x;\nfloat interpolationTime = vertex.y;\nfloat interpolationIncrement = 1.0 / vertex.z;\nvec2 currentPosition = arc(interpolationTime, center, radius, startAngle, endAngle);\nvec2 currentNormal = normalize(currentPosition - center);\nfloat lineThickness = mix(widthStart, widthEnd, interpolationTime) / 2.0;\nvec2 vertex = currentPosition + currentNormal * (normal * lineThickness);\nvertexColor = mix(colorStart, colorEnd, interpolationTime);\ngl_Position = clipSpace(vec3(vertex, depth));\n}"},function(e,t){e.exports="precision highp float;\nvarying vec4 vertexColor;\nvec2 interpolation(float t, vec2 center, float radius, float start, float end) {\nfloat angle = (end - start) * t + start;\nreturn center + vec2(cos(angle) * radius, sin(angle) * radius);\n}\nvoid main() {\nfloat startAngle = angle.x;\nfloat endAngle = angle.y;\nfloat widthStart = thickness.x;\nfloat widthEnd = thickness.y;\nvec4 centerClip = clipSpace(vec3(center, depth));\nvec2 centerScreen = (centerClip.xy + vec2(1.0, 1.0)) * vec2(0.5, 0.5) * viewSize;\nfloat normal = position.x;\nfloat interpolationTime = position.y;\nfloat interpolationIncrement = 1.0 / position.z;\nvec2 currentPosition = interpolation(interpolationTime, centerScreen, radius, startAngle, endAngle);\nvec2 currentNormal = normalize(currentPosition - centerScreen);\nfloat lineThickness = mix(widthStart, widthEnd, interpolationTime) / 2.0;\nvec2 vertex = currentPosition + currentNormal * (normal * lineThickness);\nvertexColor = mix(colorStart, colorEnd, interpolationTime);\nvertexColor *= vertexColor.a;\ngl_Position = vec4((vertex / viewSize) * vec2(2.0, 2.0) - vec2(1.0, 1.0), centerClip.zw);\ngl_PointSize = 5.0;\n}"},function(e,t){e.exports="precision highp float;\nvarying vec4 vertexColor;\nvoid main() {\nsetColor(vertexColor);\n}"},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,A=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)A=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(A=(o<3?i(A):o>3?i(t,r,A):i(t,r))||A);return o>3&&A&&Object.defineProperty(t,r,A),A};Object.defineProperty(t,"__esModule",{value:!0});var A=r(3),a=function(e){function t(t){var r=e.call(this,t)||this;return r.angle=[0,Math.PI],r.colorEnd=[1,1,1,1],r.colorStart=[1,1,1,1],r.center=[0,0],r.depth=0,r.angleOffset=0,r.radius=1,r.thickness=[5,5],r.angle=t.angle||r.angle,r.colorEnd=t.colorEnd||r.colorEnd,r.colorStart=t.colorStart||r.colorStart,r.center=t.center||r.center,r.depth=t.depth||r.depth,r.radius=t.radius||r.radius,r.thickness=t.thickness||r.thickness,r}return i(t,e),o([A.observable],t.prototype,"angle",void 0),o([A.observable],t.prototype,"colorEnd",void 0),o([A.observable],t.prototype,"colorStart",void 0),o([A.observable],t.prototype,"center",void 0),o([A.observable],t.prototype,"depth",void 0),o([A.observable],t.prototype,"angleOffset",void 0),o([A.observable],t.prototype,"radius",void 0),o([A.observable],t.prototype,"thickness",void 0),t}(r(9).Instance);t.ArcInstance=a},function(e,t,r){"use strict";function n(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}Object.defineProperty(t,"__esModule",{value:!0}),n(r(213)),n(r(218))},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o=r(7),A=r(3),a=r(0),s=r(1),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.initShader=function(){var e=this.props,n=e.animate,i=void 0===n?{}:n,A=e.scaleFactor,s=void 0===A?function(){return 1}:A,c=e.usePoints,u=void 0!==c&&c,l=e.opacity,h=void 0===l?function(){return 1}:l,d=i.center,f=i.radius,p=i.color,g={0:1,1:1,2:-1,3:1,4:-1,5:-1},B={0:-1,1:-1,2:-1,3:1,4:1,5:1},w=[{name:"normals",size:a.VertexAttributeSize.TWO,update:function(e){return[g[e],B[e]]}}];return{drawMode:u?o.GLSettings.Model.DrawMode.POINTS:o.GLSettings.Model.DrawMode.TRIANGLE_STRIP,fs:r(u?214:215),instanceAttributes:[{easing:d,name:t.attributeNames.center,size:a.InstanceAttributeSize.TWO,update:function(e){return e.center}},{easing:f,name:t.attributeNames.radius,size:a.InstanceAttributeSize.ONE,update:function(e){return[e.radius]}},{name:t.attributeNames.depth,size:a.InstanceAttributeSize.ONE,update:function(e){return[e.depth]}},{easing:p,name:t.attributeNames.color,size:a.InstanceAttributeSize.FOUR,update:function(e){return e.color}}],uniforms:[{name:"scaleFactor",size:a.UniformSize.ONE,update:function(e){return[s()]}},{name:"layerOpacity",size:a.UniformSize.ONE,update:function(e){return[h()]}}],vertexAttributes:u?void 0:w,vertexCount:u?0:6,vs:r(u?216:217)}},t.prototype.getMaterialOptions=function(){return s.CommonMaterialOptions.transparentShapeBlending},t.defaultProps={data:new A.InstanceProvider,key:"",scaleFactor:function(){return 1}},t.attributeNames={center:"center",color:"color",depth:"depth",radius:"radius"},t}(r(5).Layer2D);t.CircleLayer=c},function(e,t){e.exports="precision highp float;\nvarying vec4 vertexColor;\nvarying float edgeSharpness;\nvarying float edgeSharpnessBase;\nfloat circle(vec2 coord, float radius){\nvec2 dist = coord - vec2(0.5);\nreturn 1.0 - smoothstep(\nradius - (radius * edgeSharpness),\nradius + (radius * edgeSharpnessBase),\ndot(dist, dist) * 4.0\n);\n}\nvoid main() {\nfloat step_factor = circle(gl_PointCoord, 1.0);\nsetColor(mix(\nvec4(0.0, 0.0, 0.0, 0.0),\nvertexColor,\nstep_factor\n));\nif (gl_FragColor.a <= 0.0) discard;\n}"},function(e,t){e.exports="precision highp float;\nvarying vec4 vertexColor;\nvarying float edgeSharpness;\nvarying float edgeSharpnessBase;\nvarying vec2 pointCoord;\nfloat circle(vec2 coord, float radius){\nvec2 dist = coord - vec2(0.5);\nreturn 1.0 - smoothstep(\nradius - (radius * edgeSharpness),\nradius + (radius * edgeSharpnessBase),\ndot(dist, dist) * 4.0\n);\n}\nvoid main() {\nfloat step_factor = circle(pointCoord, 1.0);\nsetColor(mix(\nvec4(0.0, 0.0, 0.0, 0.0),\nvertexColor,\nstep_factor\n));\nif (gl_FragColor.a <= 0.0) discard;\n}"},function(e,t){e.exports="precision highp float;\nvarying vec4 vertexColor;\nvarying float edgeSharpness;\nvarying float edgeSharpnessBase;\nvoid main() {\nvertexColor = color;\nvertexColor.a *= layerOpacity;\nfloat size = radius * scaleFactor;\nedgeSharpness = mix(0.8, 0.0, min((size * 6.0 * pixelRatio) / (45.0 * pixelRatio), 1.0));\nedgeSharpnessBase = mix(0.1, 0.0, min((size * 6.0 * pixelRatio) / (45.0 * pixelRatio), 1.0));\ngl_Position = clipSpace(vec3(center, depth));\ngl_PointSize = size * 2.0 * pixelRatio;\n}"},function(e,t){e.exports="precision highp float;\nvarying vec4 vertexColor;\nvarying float edgeSharpness;\nvarying float edgeSharpnessBase;\nvarying vec2 pointCoord;\nvoid main() {\nvertexColor = color;\nvertexColor.a *= layerOpacity;\nfloat size = radius * scaleFactor * pixelRatio;\nedgeSharpness = mix(0.8, 0.0, min((size * 6.0 * pixelRatio) / (45.0 * pixelRatio), 1.0));\nedgeSharpnessBase = mix(0.1, 0.0, min((size * 6.0 * pixelRatio) / (45.0 * pixelRatio), 1.0));\npointCoord = (normals.xy + vec2(1.0, 1.0)) / 2.0;\nvec4 clipCenter = clipSpace(vec3(center, depth));\nvec2 screenCenter = (clipCenter.xy + vec2(1.0, 1.0)) * vec2(0.5, 0.5) * viewSize;\nvec2 vertex = (normals.xy * size) + screenCenter;\ngl_Position = vec4((vertex / viewSize) * vec2(2.0, 2.0) - vec2(1.0, 1.0), clipCenter.zw);\n}"},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,A=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)A=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(A=(o<3?i(A):o>3?i(t,r,A):i(t,r))||A);return o>3&&A&&Object.defineProperty(t,r,A),A};Object.defineProperty(t,"__esModule",{value:!0});var A=r(3),a=function(e){function t(t){var r=e.call(this,t)||this;return r.color=[1,1,1,1],r.depth=0,r.radius=0,r.center=[0,0],r.color=t.color||r.color,r.radius=t.radius||r.radius,r.center=t.center||r.center,r.depth=t.depth||r.depth,r}return i(t,e),Object.defineProperty(t.prototype,"width",{get:function(){return 2*this.radius},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return 2*this.radius},enumerable:!0,configurable:!0}),o([A.observable],t.prototype,"color",void 0),o([A.observable],t.prototype,"depth",void 0),o([A.observable],t.prototype,"radius",void 0),o([A.observable],t.prototype,"center",void 0),t}(r(9).Instance);t.CircleInstance=a},function(e,t,r){"use strict";function n(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}Object.defineProperty(t,"__esModule",{value:!0}),n(r(220)),n(r(227)),n(r(114))},function(e,t,r){"use strict";var n,i,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var A=r(3),a=r(0),s=r(1),c=r(5),u=r(114);var l=((i={})[u.EdgeType.LINE]=r(221),i[u.EdgeType.BEZIER]=r(222),i[u.EdgeType.BEZIER2]=r(223),i),h=r(224),d=r(225),f=r(226),p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.initShader=function(){for(var e,r,n=this,i=this.props,o=i.animate,A=void 0===o?{}:o,c=i.scaleFactor,p=void 0===c?function(){return 1}:c,g=i.type,B=i.scaleType,w=void 0===B?u.EdgeScaleType.NONE:B,y=A.end,v=A.start,m=A.startColor,b=A.endColor,E=A.control,C=A.thickness,T=g===u.EdgeType.LINE?2:50,U=((e={0:1})[2*T+2]=-1,e),_=((r={0:0})[2*T+2]=1,r),Q=1,F=0;F<2*T;++F)U[F+1]=Q,_[F+1]=Math.floor(F/2)/(T-1),Q*=-1;var x={interpolation:l[g]},S=s.shaderTemplate({options:x,required:{name:"Edge Layer",values:["interpolation"]},shader:w===u.EdgeScaleType.NONE?h:d,onToken:function(e,t){return e in x?t:"${"+e+"}"}});return{fs:f,instanceAttributes:[{easing:m,name:t.attributeNames.startColor,size:a.InstanceAttributeSize.FOUR,update:function(e){return e.startColor}},{easing:b,name:t.attributeNames.endColor,size:a.InstanceAttributeSize.FOUR,update:function(e){return e.endColor}},{easing:v,name:t.attributeNames.start,size:a.InstanceAttributeSize.TWO,update:function(e){return e.start}},{easing:y,name:t.attributeNames.end,size:a.InstanceAttributeSize.TWO,update:function(e){return e.end}},{easing:C,name:t.attributeNames.thickness,size:a.InstanceAttributeSize.TWO,update:function(e){return e.thickness}},{name:t.attributeNames.depth,size:a.InstanceAttributeSize.ONE,update:function(e){return[e.depth]}},g===u.EdgeType.LINE?{easing:E,name:t.attributeNames.control,size:a.InstanceAttributeSize.FOUR,update:function(e){return[0,0,0,0]}}:null,g===u.EdgeType.BEZIER?{easing:E,name:t.attributeNames.control,size:a.InstanceAttributeSize.FOUR,update:function(e){return[e.control[0][0],e.control[0][1],0,0]}}:null,g===u.EdgeType.BEZIER2?{easing:E,name:t.attributeNames.control,size:a.InstanceAttributeSize.FOUR,update:function(e){return[(t=e.control)[0][0],t[0][1],t[1][0],t[1][1]];var t}}:null],uniforms:[{name:"scaleFactor",size:a.UniformSize.ONE,update:function(e){return[p()]}},{name:"layerOpacity",size:a.UniformSize.ONE,update:function(e){return[void 0===n.props.opacity?1:n.props.opacity]}}],vertexAttributes:[{name:"vertex",size:a.VertexAttributeSize.THREE,update:function(e){return[U[e],_[e],2*T]}}],vertexCount:2*T+2,vs:S.shader}},t.prototype.getMaterialOptions=function(){return s.CommonMaterialOptions.transparentShapeBlending},t.defaultProps={broadphase:u.EdgeBroadphase.ALL,data:new A.InstanceProvider,key:"none",scaleType:u.EdgeScaleType.NONE,type:u.EdgeType.LINE},t.attributeNames={control:"control",depth:"depth",end:"end",endColor:"endColor",start:"start",startColor:"startColor",thickness:"thickness"},t}(c.Layer2D);t.EdgeLayer=p},function(e,t){e.exports="vec2 interpolation(float t, vec2 p1, vec2 p2, vec2 c1, vec2 c2) {\nreturn p1 + (p2 - p1) * t;\n}"},function(e,t){e.exports="vec2 interpolation(float t, vec2 p1, vec2 p2, vec2 c1, vec2 c2) {\nreturn (1.0 - t) * (1.0 - t) * p1 + 2.0 * t * (1.0 - t) * c1 + t * t * p2;\n}"},function(e,t){e.exports="vec2 interpolation(float t, vec2 p1, vec2 p2, vec2 c1, vec2 c2) {\nfloat t1 = 1.0 - t;\nreturn pow(t1, 3.0) * p1 + 3.0 * t * pow(t1, 2.0) * c1 + 3.0 * pow(t, 2.0) * t1 * c2 + pow(t, 3.0) * p2;\n}"},function(e,t){e.exports="precision highp float;\nvarying vec4 vertexColor;\n${interpolation}\nvoid main() {\nfloat normal = vertex.x;\nfloat interpolationTime = vertex.y;\nfloat interpolationIncrement = 1.0 / vertex.z;\nvec2 currentPosition = interpolation(interpolationTime, start, end, control.xy, control.zw);\nvec2 prePosition = interpolation(interpolationTime - interpolationIncrement, start, end, control.xy, control.zw);\nvec2 nextPosition = interpolation(interpolationTime + interpolationIncrement, start, end, control.xy, control.zw);\nvec2 preLine = prePosition - currentPosition;\nvec2 nextLine = nextPosition - currentPosition;\nvec2 currentNormal = mix(\nnormalize(vec2(preLine.y, -preLine.x)),\nmix(\nnormalize(vec2(preLine.y, -preLine.x) + vec2(-nextLine.y, nextLine.x)),\nnormalize(vec2(-nextLine.y, nextLine.x)),\nfloat(vertex.x >= 1.0)\n),\nfloat(vertex.x > 0.0)\n);\nfloat lineThickness = mix(thickness.x, thickness.y, interpolationTime) / 2.0;\nvec2 vertexPos = currentPosition + currentNormal * (normal * lineThickness);\nvertexColor = mix(startColor, endColor, interpolationTime);\ngl_Position = clipSpace(vec3(vertexPos, depth));\ngl_PointSize = 5.0;\n}"},function(e,t){e.exports="precision highp float;\nvarying vec4 vertexColor;\n${interpolation}\nvoid main() {\nfloat normal = vertex.x;\nfloat interpolationTime = vertex.y;\nfloat interpolationIncrement = 1.0 / vertex.z;\nvec4 startClip = clipSpace(vec3(start, depth));\nvec4 endClip = clipSpace(vec3(end, depth));\nvec2 startScreen = (startClip.xy + vec2(1.0, 1.0)) * vec2(0.5, 0.5) * viewSize;\nvec2 endScreen = (endClip.xy + vec2(1.0, 1.0)) * vec2(0.5, 0.5) * viewSize;\nvec2 control1 = startScreen + vec2(control.x, -control.y) * scaleFactor;\nvec2 control2 = endScreen + vec2(control.z, -control.w) * scaleFactor;\nvec2 currentPosition = interpolation(interpolationTime, startScreen, endScreen, control1, control2);\nvec2 prePosition = interpolation(interpolationTime - interpolationIncrement, startScreen, endScreen, control1, control2);\nvec2 nextPosition = interpolation(interpolationTime + interpolationIncrement, startScreen, endScreen, control1, control2);\nvec2 preLine = prePosition - currentPosition;\nvec2 nextLine = nextPosition - currentPosition;\nvec2 currentNormal = mix(\nnormalize(vec2(preLine.y, -preLine.x)),\nmix(\nnormalize(vec2(preLine.y, -preLine.x) + vec2(-nextLine.y, nextLine.x)),\nnormalize(vec2(-nextLine.y, nextLine.x)),\nfloat(vertex.x >= 1.0)\n),\nfloat(vertex.x > 0.0)\n);\nfloat lineThickness = mix(thickness.x, thickness.y, interpolationTime) / 2.0;\nvec2 vertexPos = currentPosition + currentNormal * (-normal * lineThickness * scaleFactor);\nvertexColor = mix(startColor, endColor, interpolationTime);\ngl_Position = vec4((vertexPos / viewSize) * vec2(2.0, 2.0) - vec2(1.0, 1.0), startClip.zw);\ngl_PointSize = 5.0;\n}"},function(e,t){e.exports="precision highp float;\nvarying vec4 vertexColor;\nvoid main() {\nsetColor(vertexColor);\n}"},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,A=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)A=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(A=(o<3?i(A):o>3?i(t,r,A):i(t,r))||A);return o>3&&A&&Object.defineProperty(t,r,A),A};Object.defineProperty(t,"__esModule",{value:!0});var A=r(9),a=r(29),s=r(11),c=function(e){function t(t){var r=e.call(this,t)||this;return r.control=[[0,0],[0,0]],r.depth=0,r.end=[0,0],r.endColor=[1,1,1,1],r.start=[0,0],r.startColor=[1,1,1,1],r.thickness=[1,1],r.startColor=t.startColor||r.startColor,r.endColor=t.endColor||r.endColor,r.control=t.control||r.control,r.depth=t.depth||r.depth,r.end=t.end||r.end,r.thickness=t.thickness||r.thickness,r.start=t.start||r.start,r}return i(t,e),Object.defineProperty(t.prototype,"length",{get:function(){var e=[this.end[0]-this.start[0],this.end[1]-this.start[1]];return Math.sqrt(e[0]*e[0]+e[1]*e[1])},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"midpoint",{get:function(){return 0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"perpendicular",{get:function(){var e=this.length;return[(this.end[1]-this.start[1])/e,-(this.end[0]-this.start[0])/e]},enumerable:!0,configurable:!0}),t.prototype.setEdgeThickness=function(e){this.thickness=[e,e]},t.prototype.setColor=function(e){this.startColor=s.copy4(e),this.endColor=s.copy4(e)},o([a.observable],t.prototype,"control",void 0),o([a.observable],t.prototype,"depth",void 0),o([a.observable],t.prototype,"end",void 0),o([a.observable],t.prototype,"endColor",void 0),o([a.observable],t.prototype,"start",void 0),o([a.observable],t.prototype,"startColor",void 0),o([a.observable],t.prototype,"thickness",void 0),t}(A.Instance);t.EdgeInstance=c},function(e,t,r){"use strict";function n(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}Object.defineProperty(t,"__esModule",{value:!0}),n(r(229)),n(r(234))},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var A=r(3),a=r(26),s=r(45),c=r(0),u=r(1),l=r(56),h=r(5),d=r(230),f=r(231);function p(e){return e&&e.videoSrc}t.isVideoResource=p;var g=new Image;g.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII=";var B=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.childProvider=new A.InstanceProvider,t.imageToResource=new Map,t.sourceToRequest=new Map,t.sourceToVideo=new Map,t.usingVideo=new Map,t.waitingForVideo=new Map,t.waitForVideoSource=new Map,t.originalOnReadyCallbacks=new Map,t}return i(t,e),t.prototype.childLayers=function(){return[s.createLayer(f.ImageRenderLayer,o({},this.props,{key:this.props.key+".image-render-layer"}))]},t.prototype.destroy=function(){var t=this;e.prototype.destroy.call(this),this.sourceToVideo.forEach(function(e){e.pause(),t.sourceToVideo.clear(),t.waitingForVideo.clear(),t.waitForVideoSource.clear()})},t.prototype.draw=function(){var e=this.resolveChanges(!0);if(!(e.length<=0)){this.propertyIds||(this.propertyIds=this.getInstanceObservableIds(e[0][0],["source"]));for(var t=this.propertyIds.source,r=0,n=e.length;r<n;++r){var i=e[r],o=i[0],A=i[1],s=i[2];switch(A){case c.InstanceDiffType.CHANGE:if(void 0!==s[t]){var l=this.imageToResource.get(o),h=this.getAtlasSource(o);if(h===l)break;if(l instanceof HTMLVideoElement){if(B=this.waitForVideoSource.get(o))this.waitForVideoSource.delete(o),(w=this.waitingForVideo.get(B))&&w.delete(o);(y=this.usingVideo.get(l.getAttribute("data-source")||""))||(y=new Set),y.delete(o),y.size<=0&&this.sourceToVideo.delete(l.getAttribute("data-source")||""),o.onReady=this.originalOnReadyCallbacks.get(o)}if(p(o.source))this.prepareVideo(o,o.source),h=this.getAtlasSource(o),u.mapInjectDefault(this.usingVideo,o.source.videoSrc,new Set).add(o);if(this.imageToResource.set(o,h),this.resource.request(this,o,a.atlasRequest({key:this.props.atlas||"",disposeResource:!0,source:l})),h)(!(d=this.sourceToRequest.get(h))||d.texture&&!d.texture.isValid)&&(d=a.atlasRequest({key:this.props.atlas||"",source:h,rasterizationScale:this.props.rasterizationScale}),this.sourceToRequest.set(h,d)),o.request=d,this.resource.request(this,o,d)}break;case c.InstanceDiffType.INSERT:if(o.source){var d,f=this.getAtlasSource(o);if(p(o.source))this.prepareVideo(o,o.source),f=this.getAtlasSource(o),u.mapInjectDefault(this.usingVideo,o.source.videoSrc,new Set).add(o);(!(d=this.sourceToRequest.get(f))||d.texture&&!d.texture.isValid)&&(d=a.atlasRequest({key:this.props.atlas||"",source:f,rasterizationScale:this.props.rasterizationScale}),this.sourceToRequest.set(f,d)),o.request=d}break;case c.InstanceDiffType.REMOVE:var g=this.getAtlasSource(o);if(this.imageToResource.delete(o),p(o.source)){var B,w,y;if(B=this.waitForVideoSource.get(o))this.waitForVideoSource.delete(o),(w=this.waitingForVideo.get(B))&&w.delete(o);(y=this.usingVideo.get(o.source.videoSrc))||(y=new Set),y.delete(o),y.size<=0&&this.sourceToVideo.delete(o.source.videoSrc),this.originalOnReadyCallbacks.delete(o)}this.resource.request(this,o,a.atlasRequest({key:this.props.atlas||"",disposeResource:!0,source:g}))}}var v=[];this.usingVideo.forEach(function(e,t){e.size<=0&&v.push(t)});for(r=0,n=v.length;r<n;++r){var m=v[r];this.usingVideo.delete(m),this.sourceToVideo.delete(m)}}},t.prototype.getAtlasSource=function(e){return p(e.source)?this.sourceToVideo.get(e.source.videoSrc)||g:e.source},t.prototype.prepareVideo=function(e,t){var r=this,n=this.sourceToVideo.get(t.videoSrc);if(this.originalOnReadyCallbacks.get(e)||this.originalOnReadyCallbacks.set(e,e.onReady),n){var i=this.waitingForVideo.get(t.videoSrc);if(i)i.add(e),this.waitForVideoSource.set(e,t.videoSrc),e.onReady=void 0,e.source=g,e.videoLoad=function(){n.load(),t.autoPlay&&n.play()};else{var o=this.originalOnReadyCallbacks.get(e)||e.onReady;if(!o)return;e.onReady=function(e){o(e,n)}}}else{var A=document.createElement("video");this.sourceToVideo.set(t.videoSrc,A),A.setAttribute("data-source",t.videoSrc),d.debugVideoEvents(A);var a=new l.PromiseResolver,s=new l.PromiseResolver,c=function(){A.removeEventListener("loadedmetadata",f),A.removeEventListener("loadeddata",h),A.removeEventListener("error",p),r.waitingForVideo.delete(t.videoSrc),r.waitForVideoSource.delete(e)},h=function(){s.resolve()},f=function(){a.resolve()},p=function(e){var t;e.path&&e.path[0]&&(t=e.path[0].error),e.originalTarget&&(t=e.originalTarget.error),console.warn("There was an error loading the video resource to the atlas texture context"),console.warn(t),a.reject({}),s.reject({})};A.addEventListener("loadedmetadata",f),A.addEventListener("loadeddata",h),A.addEventListener("error",p),e.onReady=void 0,u.mapInjectDefault(this.waitingForVideo,t.videoSrc,new Set).add(e),this.waitForVideoSource.set(e,t.videoSrc),e.source=g,e.videoLoad=function(){A.load(),t.autoPlay&&A.play()},A.muted=!0,A.src=t.videoSrc,Promise.all([a.promise,s.promise]).then(function(){A.currentTime=0,t.autoPlay&&A.play();var e=r.waitingForVideo.get(t.videoSrc);e&&e.forEach(function(e){e.source=t,e.onReady=r.originalOnReadyCallbacks.get(e)}),c()}).catch(function(){c()})}},t.prototype.initShader=function(){return null},t.defaultProps={atlas:"default",key:"",data:new A.InstanceProvider},t}(h.Layer2D);t.ImageLayer=B},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(2)("video");t.debugVideoEvents=function(e){n.enabled&&(e.addEventListener("abort",function(){return n("abort")}),e.addEventListener("canplay",function(){return n("canplay")}),e.addEventListener("canplaythrough",function(){return n("canplaythrough")}),e.addEventListener("durationchange",function(){return n("durationchange")}),e.addEventListener("emptied",function(){return n("emptied")}),e.addEventListener("ended",function(){return n("ended")}),e.addEventListener("error",function(){return n("error")}),e.addEventListener("loadeddata",function(){return n("loadeddata")}),e.addEventListener("loadedmetadata",function(){return n("loadedmetadata")}),e.addEventListener("loadstart",function(){return n("loadstart")}),e.addEventListener("pause",function(){return n("pause")}),e.addEventListener("play",function(){return n("play")}),e.addEventListener("playing",function(){return n("playing")}),e.addEventListener("progress",function(){return n("progress")}),e.addEventListener("ratechange",function(){return n("ratechange")}),e.addEventListener("seeked",function(){return n("seeked")}),e.addEventListener("seeking",function(){return n("seeking")}),e.addEventListener("stalled",function(){return n("stalled")}),e.addEventListener("suspend",function(){return n("suspend")}),e.addEventListener("timeupdate",function(){return n("timeupdate")}),e.addEventListener("volumechange",function(){return n("volumechange")}),e.addEventListener("waiting",function(){return n("waiting")}))}},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o=r(3),A=r(0),a=r(78),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.initShader=function(){var e=this,n=this.props.animate||{},i=n.tint,o=n.location,a=n.size,s={0:1,1:1,2:-1,3:1,4:-1,5:-1},c={0:0,1:0,2:0,3:1,4:1,5:1};return{fs:r(232),instanceAttributes:[{easing:o,name:t.attributeNames.location,size:A.InstanceAttributeSize.TWO,update:function(e){return e.origin}},{name:t.attributeNames.anchor,size:A.InstanceAttributeSize.TWO,update:function(e){return[e.anchor.x||0,e.anchor.y||0]}},{easing:a,name:t.attributeNames.size,size:A.InstanceAttributeSize.TWO,update:function(e){return[e.width,e.height]}},{name:t.attributeNames.depth,size:A.InstanceAttributeSize.ONE,update:function(e){return[e.depth]}},{name:t.attributeNames.scaling,size:A.InstanceAttributeSize.ONE,update:function(e){return[e.scaling]}},{name:t.attributeNames.texture,resource:{key:function(){return e.props.atlas||""},name:"imageAtlas"},update:function(t){return t.source,t.request?e.resource.request(e,t,t.request):(console.warn("An image utilizing the image-render-layer does not have its request specified yet.","The image-render-layer does NOT manage requests and should be handled before this layer deals with the instance"),[0,0,0,0])}},{easing:i,name:t.attributeNames.tint,size:A.InstanceAttributeSize.FOUR,update:function(e){return e.tint}}],uniforms:[{name:"scaleFactor",size:A.UniformSize.ONE,update:function(e){return[1]}}],vertexAttributes:[{name:"normals",size:A.VertexAttributeSize.TWO,update:function(e){return[s[e],c[e]]}}],vertexCount:6,vs:r(233)}},t.prototype.getMaterialOptions=function(){return a.CommonMaterialOptions.transparentImageBlending},t.defaultProps={key:"",data:new o.InstanceProvider},t.attributeNames={location:"location",anchor:"anchor",size:"size",depth:"depth",scaling:"scaling",texture:"texture",tint:"tint"},t}(r(5).Layer2D);t.ImageRenderLayer=s},function(e,t){e.exports="precision highp float;\nvarying vec4 vertexColor;\nvarying vec2 texCoord;\nvoid main() {\ngl_FragColor = texture2D(imageAtlas, texCoord) * vertexColor;\nsetColor(gl_FragColor * gl_FragColor.a);\n}"},function(e,t){e.exports="precision highp float;\nvarying vec4 vertexColor;\nvarying vec2 texCoord;\nvoid main() {\nvec3 screenSize = cameraSpaceSize(vec3(size, 1.0));\nbool largerOnScreen = screenSize.y > size.y;\nfloat useScaleMode = float(\n(\nscaling == 3.0 ||\n(largerOnScreen && scaling == 2.0)\n) &&\nscaling != 1.0\n);\nfloat unequalZooms = float(cameraScale2D.x != cameraScale2D.y);\nfloat normal = normals.x;\nfloat side = normals.y;\nvec2 worldAnchor = location + anchor;\ntexCoord = texture.xy + ((texture.zw - texture.xy) * vec2(side, float(normal == -1.0)));\nvertexColor = tint;\nvec2 adjustedSize = mix(\nsize,\n(size * cameraScale2D.yx),\nunequalZooms\n);\nvec2 adjustedAnchor = mix(\nanchor,\n(anchor * cameraScale2D.yx),\nunequalZooms\n);\nvec2 vertex = vec2(side, float(normal == 1.0)) * adjustedSize + location - adjustedAnchor;\nfloat imageScreenScale = mix(\nscreenSize.y / adjustedSize.y,\nscreenSize.x / adjustedSize.x,\nfloat((cameraScale2D.x < 1.0) || (cameraScale2D.x > 1.0))\n);\nvec2 anchorToVertex = vertex - location;\nvertex = mix(\nvertex,\n(anchorToVertex / imageScreenScale) + location,\nuseScaleMode\n);\ngl_Position = clipSpace(vec3(vertex, depth));\n}"},function(e,t,r){"use strict";var n,i,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),A=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,A=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)A=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(A=(o<3?i(A):o>3?i(t,r,A):i(t,r))||A);return o>3&&A&&Object.defineProperty(t,r,A),A};Object.defineProperty(t,"__esModule",{value:!0});var a=r(3),s=r(9),c=r(0),u=r(22),l=Math.max,h=((i={})[u.AnchorType.TopLeft]=function(e,t){e.x=-e.padding,e.y=-e.padding},i[u.AnchorType.TopMiddle]=function(e,t){e.x=t.width/2,e.y=-e.padding},i[u.AnchorType.TopRight]=function(e,t){e.x=t.width+e.padding,e.y=-e.padding},i[u.AnchorType.MiddleLeft]=function(e,t){e.x=-e.padding,e.y=t.height/2},i[u.AnchorType.Middle]=function(e,t){e.x=t.width/2,e.y=t.height/2},i[u.AnchorType.MiddleRight]=function(e,t){e.x=t.width+e.padding,e.y=t.height/2},i[u.AnchorType.BottomLeft]=function(e,t){e.x=-e.padding,e.y=t.height+e.padding},i[u.AnchorType.BottomMiddle]=function(e,t){e.x=t.width/2,e.y=t.height+e.padding},i[u.AnchorType.BottomRight]=function(e,t){e.x=t.width+e.padding,e.y=t.height+e.padding},i[u.AnchorType.Custom]=function(e,t){e.x=e.x||0,e.y=e.y||0},i),d=function(e){function t(t){var r=e.call(this,t)||this;return r.tint=[0,0,0,1],r.depth=0,r.height=1,r.origin=[0,0],r.scaling=u.ScaleMode.BOUND_MAX,r.width=1,r.sourceWidth=0,r.sourceHeight=0,r._anchor={padding:0,type:u.AnchorType.TopLeft,x:0,y:0},r.videoLoad=c.NOOP,r.depth=t.depth||r.depth,r.tint=t.tint||r.tint,r.scaling=t.scaling||r.scaling,r.origin=t.origin||r.origin,r.width=t.width||1,r.height=t.height||1,r.source=t.source,r.onReady=t.onReady,t.anchor&&r.setAnchor(t.anchor),r}return o(t,e),Object.defineProperty(t.prototype,"maxSize",{get:function(){return l(this.width,this.height)},set:function(e){var t=this.width/this.height;this.width=e*t,this.height=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"anchor",{get:function(){return this._anchor},enumerable:!0,configurable:!0}),t.prototype.resourceTrigger=function(){this.source=this.source,this.request&&this.request.texture&&(this.sourceWidth=this.request.texture.pixelWidth,this.sourceHeight=this.request.texture.pixelHeight),this.onReady&&this.onReady(this)},t.prototype.setAnchor=function(e){var t={padding:e.padding||0,type:e.type,x:e.x||0,y:e.y||0};h[t.type](t,this),this._anchor=t},A([a.observable],t.prototype,"tint",void 0),A([a.observable],t.prototype,"depth",void 0),A([a.observable],t.prototype,"height",void 0),A([a.observable],t.prototype,"origin",void 0),A([a.observable],t.prototype,"scaling",void 0),A([a.observable],t.prototype,"source",void 0),A([a.observable],t.prototype,"width",void 0),A([a.observable],t.prototype,"_anchor",void 0),t}(s.Instance);t.ImageInstance=d},function(e,t,r){"use strict";function n(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}Object.defineProperty(t,"__esModule",{value:!0}),n(r(236)),n(r(247)),n(r(115)),n(r(116))},function(e,t,r){"use strict";var n,i,o,A=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var a=r(104),s=r(4),c=r(26),u=r(45),l=r(0),h=r(22),d=r(5),f=r(115),p=r(116),g=((i={})[h.AnchorType.TopLeft]=function(e,t){e.x=0,e.y=0},i[h.AnchorType.TopMiddle]=function(e,t){e.x=t.size[0]/2,e.y=0},i[h.AnchorType.TopRight]=function(e,t){e.x=t.size[0],e.y=0},i[h.AnchorType.MiddleLeft]=function(e,t){e.x=0,e.y=t.size[1]/2},i[h.AnchorType.Middle]=function(e,t){e.x=t.size[0]/2,e.y=t.size[1]/2},i[h.AnchorType.MiddleRight]=function(e,t){e.x=t.size[0],e.y=t.size[1]/2},i[h.AnchorType.BottomLeft]=function(e,t){e.x=0,e.y=t.size[1]},i[h.AnchorType.BottomMiddle]=function(e,t){e.x=t.size[0]/2,e.y=t.size[1]},i[h.AnchorType.BottomRight]=function(e,t){e.x=t.size[0],e.y=t.size[1]},i[h.AnchorType.Custom]=function(e,t){e.x=e.x||0,e.y=e.y||0},i),B=[[-1,-1],[0,-1],[1,-1],[-1,0],[0,0],[1,0],[-1,1],[0,1],[1,1]].map(function(e){var t=Math.sqrt(s.dot2(e,e));return s.scale2(e,1/-t)}),w=((o={})[h.AnchorType.TopLeft]=function(e){e.paddingDirection=s.scale2(B[0],e.padding)},o[h.AnchorType.TopMiddle]=function(e){e.paddingDirection=s.scale2(B[1],e.padding)},o[h.AnchorType.TopRight]=function(e){e.paddingDirection=s.scale2(B[2],e.padding)},o[h.AnchorType.MiddleLeft]=function(e){e.paddingDirection=s.scale2(B[3],e.padding)},o[h.AnchorType.Middle]=function(e){e.paddingDirection=[0,0]},o[h.AnchorType.MiddleRight]=function(e){e.paddingDirection=s.scale2(B[5],e.padding)},o[h.AnchorType.BottomLeft]=function(e){e.paddingDirection=s.scale2(B[6],e.padding)},o[h.AnchorType.BottomMiddle]=function(e){e.paddingDirection=s.scale2(B[7],e.padding)},o[h.AnchorType.BottomRight]=function(e){e.paddingDirection=s.scale2(B[8],e.padding)},o[h.AnchorType.Custom]=function(e){e.paddingDirection=e.paddingDirection},o),y=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.fullUpdate=!1,t.glyphProvider=new a.InstanceProvider,t.labelToGlyphs=new Map,t.labelToKerningRequest=new Map,t.labelWaitingOnGlyph=new Map,t.truncationWidth=-1,t.handleGlyphReady=function(e){if(e.parentLabel){var r=e.parentLabel,n=t.labelWaitingOnGlyph.get(e.parentLabel);if(n&&n.has(e)&&(n.delete(e),n.size<=0)){var i=r.onReady;i&&i(r)}}else delete e.onReady},t}return A(t,e),t.prototype.childLayers=function(){return[u.createLayer(this.props.customGlyphLayer||p.GlyphLayer,{animate:this.props.animate,data:this.glyphProvider,key:this.id+".glyphs",resourceKey:this.props.resourceKey,scaleMode:this.props.scaleMode||h.ScaleMode.BOUND_MAX,inTextArea:this.props.inTextArea})]},t.prototype.draw=function(){var e=this.resolveChanges();if(!(e.length<=0)){if(!this.propertyIds){var t=e[0][0];this.propertyIds=this.getInstanceObservableIds(t,["text","active","anchor","color","origin","fontSize","maxWidth","maxScale","letterSpacing"])}for(var r=this.propertyIds,n=r.text,i=r.active,o=r.anchor,A=r.color,a=r.origin,s=r.fontSize,c=r.maxWidth,u=r.maxScale,h=r.letterSpacing,d=0,f=e.length;d<f;++d){var p=e[d],g=(t=p[0],p[1]),B=p[2];switch(g){case l.InstanceDiffType.CHANGE:if(!this.labelToGlyphs.get(t)){this.insert(t);continue}void 0!==B[n]?(this.invalidateRequest(t),this.layoutGlyphs(t)):void 0!==B[i]&&(t.active?(this.layoutGlyphs(t),this.showGlyphs(t)):this.hideGlyphs(t)),B[o]&&this.updateAnchor(t),void 0!==B[A]&&this.updateGlyphColors(t),void 0!==B[a]&&this.updateGlyphOrigins(t),void 0!==B[u]&&this.updateGlyphMaxScales(t),void 0!==B[s]&&(this.invalidateRequest(t),this.layoutGlyphs(t)),void 0!==B[c]&&(this.invalidateRequest(t),this.layoutGlyphs(t)),void 0!==B[h]&&(this.invalidateRequest(t),this.layoutGlyphs(t));break;case l.InstanceDiffType.INSERT:this.insert(t);break;case l.InstanceDiffType.REMOVE:var w=this.labelToGlyphs.get(t);if(w){for(var y=0,v=w.length;y<v;++y)this.glyphProvider.remove(w[y]);this.labelToGlyphs.delete(t),this.labelToKerningRequest.delete(t),this.labelWaitingOnGlyph.delete(t)}}}}},t.prototype.insert=function(e){e.preload?this.props.data.remove(e):this.labelToGlyphs.get(e)||this.labelToGlyphs.set(e,[]);this.layoutGlyphs(e)},t.prototype.hideGlyphs=function(e){var t=this.labelToGlyphs.get(e);if(t)for(var r=0,n=t.length;r<n;++r)this.glyphProvider.remove(t[r])},t.prototype.initShader=function(){return null},t.prototype.invalidateRequest=function(e){this.labelToKerningRequest.delete(e)},t.prototype.layoutGlyphs=function(e){if(this.updateKerning(e)&&e.active){var t=this.labelToKerningRequest.get(e);if(t&&t.fontMap){var r=t.metrics;if(r&&r.layout){var n=r.layout;this.updateGlyphs(e,n);var i=e.glyphs;e.size=n.size,g[e.anchor.type](e.anchor,e),w[e.anchor.type](e.anchor);for(var o=e.anchor,A=e.anchor.paddingDirection,a=0,c=Math.min(n.positions.length,i.length);a<c;++a){var u=n.positions[a],l=i[a];l.offset=u,l.fontScale=n.fontScale,l.anchor=[o.x||0,o.y||0],l.origin=s.copy2(e.origin),l.padding=A||[0,0],l.maxScale=e.maxScale}}}}},t.prototype.managesInstance=function(e){return Boolean(this.labelToGlyphs.get(e))},t.prototype.showGlyphs=function(e){var t=this.labelToGlyphs.get(e);if(t)for(var r=0,n=t.length;r<n;++r)this.glyphProvider.add(t[r])},t.prototype.updateAnchor=function(e){var t=e.glyphs;if(t){g[e.anchor.type](e.anchor,e),w[e.anchor.type](e.anchor);for(var r=e.anchor,n=e.anchor.paddingDirection,i=0,o=t.length;i<o;++i)t[i].anchor=[r.x||0,r.y||0],t[i].padding=n||[0,0]}},t.prototype.updateGlyphs=function(e,t){var r=this.labelToGlyphs.get(e);r||(r=[],this.labelToGlyphs.set(e,r));var n=this.labelWaitingOnGlyph.get(e);n||(n=new Set,this.labelWaitingOnGlyph.set(e,n));for(var i=0,o=Math.min(r.length,t.glyphs.length);i<o;++i){(s=r[i]).character!==t.glyphs[i]&&(s.character=t.glyphs[i],s.request&&s.request.fontMap&&s.request.fontMap.glyphMap[s.character]||n.add(s))}if(r.length<t.glyphs.length){var A=0;for(i=r.length,o=t.glyphs.length;i<o;++i,++A){var a=t.glyphs[i];(s=new f.GlyphInstance({character:a,color:e.color,origin:e.origin,maxScale:e.maxScale,onReady:this.handleGlyphReady})).parentLabel=e,r.push(s),e.active&&this.glyphProvider.add(s),n.add(s)}}else if(r.length>t.glyphs.length){for(i=t.glyphs.length,o=r.length;i<o;++i){var s=r[i];this.glyphProvider.remove(s)}for(;r.length>t.glyphs.length;)r.pop()}e.glyphs=r},t.prototype.updateGlyphColors=function(e){var t=e.glyphs;if(t)for(var r=0,n=t.length;r<n;++r)t[r].color=s.copy4(e.color)},t.prototype.updateGlyphOrigins=function(e){var t=e.glyphs;if(t)for(var r=e.origin,n=0,i=t.length;n<i;++n)t[n].origin=[r[0],r[1]]},t.prototype.updateGlyphMaxScales=function(e){var t=e.glyphs;if(t)for(var r=e.maxScale,n=0,i=t.length;n<i;++n)t[n].maxScale=r},t.prototype.updateKerning=function(e){var t=this.labelToKerningRequest.get(e),r=e.text;if(t){if(t.kerningPairs&&t.kerningPairs.indexOf(r)>-1)return Boolean(t.fontMap);if(!t.fontMap||t.fontMap.supportsKerning(r.replace(/\s/g,"")))return!0;this.labelToKerningRequest.delete(e),t=void 0}if(!t){var n={fontSize:e.fontSize,text:e.text,letterSpacing:e.letterSpacing};return e.maxWidth>0&&(n.maxWidth=e.maxWidth,n.truncation=this.props.truncation||"..."),t=c.fontRequest({key:this.props.resourceKey||"",character:"",kerningPairs:[r],metrics:n}),e.preload?(e.resourceTrigger=function(){e.onReady&&e.onReady(e)},this.resource.request(this,e,t)):(this.resource.request(this,e,t,{resource:{type:l.ResourceType.FONT,key:this.props.resourceKey||""}}),this.labelToKerningRequest.set(e,t)),!1}return!0},t.prototype.willUpdateProps=function(e){e.data!==this.props.data&&delete this.propertyIds,e.scaleMode!==this.props.scaleMode&&this.rebuildLayer(),e.resourceKey!==this.props.resourceKey&&(this.fullUpdate=!0)},t.defaultProps={key:"",data:new a.InstanceProvider},t}(d.Layer2D);t.LabelLayer=y},function(e,t){e.exports="varying vec4 vertexColor;\nvarying vec2 texCoord;\nvoid main() {\nvec4 texColor = texture2D(fontMap, texCoord);\nif (texColor.r <= 0.0) discard;\ntexColor.a = texColor.r;\ngl_FragColor = texColor * vertexColor;\n}"},function(e,t){e.exports="varying vec4 vertexColor;\nvarying vec2 texCoord;\nvoid main() {\nvec4 texColor = texture2D(fontMap, texCoord);\nif (texColor.r <= 0.0) discard;\ntexColor.a = texColor.r;\ngl_FragColor = texColor * vertexColor;\n}"},function(e,t){e.exports="varying vec4 vertexColor;\nvarying vec2 texCoord;\nvoid main() {\nvec2 scale = fontScale * cameraScale2D.xy;\nfloat scaleBy = max(scale.x, scale.y) / maxScale;\nvec2 pushOut = normals * glyphSize * fontScale;\nfloat vx = mix(\n(origin.x + padding.x + offset.x + pushOut.x),\norigin.x + anchor.x + (padding.x - anchor.x + offset.x + pushOut.x) / scaleBy,\nfloat(scale.x >= maxScale)\n);\nfloat vy = mix(\n(origin.y + padding.y + offset.y + pushOut.y),\norigin.y + anchor.y + (padding.y - anchor.y + offset.y + pushOut.y) / scaleBy,\nfloat(scale.y >= maxScale)\n);\nvec3 position = vec3(vec2(vx, vy), depth);\ngl_Position = clipSpace(position);\ntexCoord = texture.xy + (texture.zw - texture.xy) * normals;\nvertexColor = color * color.a;\n}"},function(e,t){e.exports="varying vec4 vertexColor;\nvarying vec2 texCoord;\nvoid main() {\nvec2 scale = fontScale * cameraScale2D.xy;\nfloat scaleBy = max(scale.x, scale.y) / maxScale;\nvec2 pushOut = normals * glyphSize * fontScale;\nfloat vx = mix(\n(-anchor.x + offset.x + pushOut.x),\n(-anchor.x + offset.x + pushOut.x) / scaleBy,\nfloat(scale.x >= maxScale)\n);\nfloat vy = mix(\n(-anchor.y + offset.y + pushOut.y),\n(-anchor.y + offset.y + pushOut.y) / scaleBy,\nfloat(scale.y >= maxScale)\n);\nvec3 position = vec3(origin + padding + vec2(vx, vy), depth);\ngl_Position = clipSpace(position);\ntexCoord = texture.xy + (texture.zw - texture.xy) * normals;\nvertexColor = color * color.a;\n}"},function(e,t){e.exports="varying vec4 vertexColor;\nvarying vec2 texCoord;\nvoid main() {\nvec4 texColor = texture2D(fontMap, texCoord);\nif (texColor.r <= 0.0) discard;\ntexColor.a = texColor.r;\ngl_FragColor = texColor * vertexColor;\n}"},function(e,t){e.exports="varying vec4 vertexColor;\nvarying vec2 texCoord;\nvoid main() {\nvec4 texColor = texture2D(fontMap, texCoord);\nif (texColor.r <= 0.0) discard;\ntexColor.a = texColor.r;\ngl_FragColor = texColor * vertexColor;\n}"},function(e,t){e.exports="varying vec4 vertexColor;\nvarying vec2 texCoord;\nvoid main() {\nvec2 pushOut = normals * glyphSize * fontScale;\nvec3 position = vec3(origin + anchor + (padding - anchor + offset + pushOut) / cameraScale2D.xy , depth);\ngl_Position = clipSpace(position);\ntexCoord = texture.xy + (texture.zw - texture.xy) * normals;\nvertexColor = color * color.a;\n}"},function(e,t){e.exports="varying vec4 vertexColor;\nvarying vec2 texCoord;\nvoid main() {\nvec2 pushOut = normals * glyphSize * fontScale;\nvec3 position = vec3(origin + padding + (-anchor + offset + pushOut) / cameraScale2D.xy, depth);\ngl_Position = clipSpace(position);\ntexCoord = texture.xy + (texture.zw - texture.xy) * normals;\nvertexColor = color * color.a;\n}"},function(e,t){e.exports="varying vec4 vertexColor;\nvarying vec2 texCoord;\nvoid main() {\nvec4 texColor = texture2D(fontMap, texCoord);\nif (texColor.r <= 0.0) discard;\ntexColor.a = texColor.r;\ngl_FragColor = texColor * vertexColor;\n}"},function(e,t){e.exports="varying vec4 vertexColor;\nvarying vec2 texCoord;\nvoid main() {\nvec2 pushOut = normals * glyphSize * fontScale;\nvec3 position = vec3(origin + padding + offset + pushOut, depth);\ngl_Position = clipSpace(position);\ntexCoord = texture.xy + (texture.zw - texture.xy) * normals;\nvertexColor = color * color.a;\n}"},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,A=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)A=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(A=(o<3?i(A):o>3?i(t,r,A):i(t,r))||A);return o>3&&A&&Object.defineProperty(t,r,A),A};Object.defineProperty(t,"__esModule",{value:!0});var A=r(3),a=r(9),s=r(0),c=r(22),u=function(e){function t(t){var r=e.call(this,t)||this;return r.color=[0,0,0,1],r.depth=0,r.fontSize=12,r.maxScale=1,r.maxWidth=0,r.origin=[0,0],r.scale=1,r.text="",r.letterSpacing=0,r.preload=!1,r.glyphs=[],r.size=[0,0],r.truncatedText="",r.anchor={padding:0,paddingDirection:[0,0],type:c.AnchorType.TopLeft,x:0,y:0},r.anchor=t.anchor||r.anchor,r.color=t.color||r.color,r.depth=t.depth||r.depth,r.fontSize=t.fontSize||r.fontSize,r.maxScale=t.maxScale||r.maxScale,r.maxWidth=t.maxWidth||0,r.onReady=t.onReady,r.origin=t.origin,r.preload=t.preload||!1,r.scale=t.scale||r.scale,r.text=t.text||r.text,r.letterSpacing=t.letterSpacing||r.letterSpacing,t.anchor&&r.setAnchor(t.anchor),r}return i(t,e),t.prototype.getWidth=function(){return this.size[0]},t.prototype.setAnchor=function(e){var t={padding:e.padding||0,paddingDirection:e.paddingDirection,type:e.type,x:e.x||0,y:e.y||0};this.anchor=t},t.prototype.subTextGlyphs=function(e){var t=[],r=this.text.indexOf(e);if(r<0)return t;for(var n=0,i=0,o=Math.min(this.text.length,r+e.length);i<o;++i)s.isWhiteSpace(this.text[i])||(n++,i>=r&&t.push(this.glyphs[n]));return t},t.prototype.resourceTrigger=function(){},o([A.observable],t.prototype,"color",void 0),o([A.observable],t.prototype,"depth",void 0),o([A.observable],t.prototype,"fontSize",void 0),o([A.observable],t.prototype,"maxScale",void 0),o([A.observable],t.prototype,"maxWidth",void 0),o([A.observable],t.prototype,"origin",void 0),o([A.observable],t.prototype,"scale",void 0),o([A.observable],t.prototype,"text",void 0),o([A.observable],t.prototype,"letterSpacing",void 0),o([A.observable],t.prototype,"anchor",void 0),t}(a.Instance);t.LabelInstance=u},function(e,t,r){"use strict";function n(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}Object.defineProperty(t,"__esModule",{value:!0}),n(r(249)),n(r(252))},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o=r(3),A=r(0),a=r(1),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.initShader=function(){var e=this.props.animate||{},n={0:1,1:1,2:-1,3:1,4:-1,5:-1},i={0:0,1:0,2:0,3:1,4:1,5:1},o=this.props.scaleFactor,a=void 0===o?function(){return 1}:o;return{fs:r(250),instanceAttributes:[{easing:e.location,name:t.attributeNames.location,size:A.InstanceAttributeSize.TWO,update:function(e){return e.position}},{name:t.attributeNames.anchor,size:A.InstanceAttributeSize.TWO,update:function(e){return[e.anchor.x||0,e.anchor.y||0]}},{name:t.attributeNames.size,size:A.InstanceAttributeSize.TWO,update:function(e){return e.size}},{name:t.attributeNames.depth,size:A.InstanceAttributeSize.ONE,update:function(e){return[e.depth]}},{name:t.attributeNames.scaling,size:A.InstanceAttributeSize.ONE,update:function(e){return[e.scaling]}},{easing:e.color,name:t.attributeNames.color,size:A.InstanceAttributeSize.FOUR,update:function(e){return e.color}},{name:t.attributeNames.scale,size:A.InstanceAttributeSize.ONE,update:function(e){return[e.scale]}},{name:t.attributeNames.maxScale,size:A.InstanceAttributeSize.ONE,update:function(e){return[e.maxScale]}}],uniforms:[{name:"scaleFactor",size:A.UniformSize.ONE,update:function(e){return[a()]}}],vertexAttributes:[{name:"normals",size:A.VertexAttributeSize.TWO,update:function(e){return[n[e],i[e]]}}],vertexCount:6,vs:r(251)}},t.prototype.getMaterialOptions=function(){return a.CommonMaterialOptions.transparentShapeBlending},t.defaultProps={key:"",data:new o.InstanceProvider},t.attributeNames={anchor:"anchor",color:"color",depth:"depth",location:"location",maxScale:"maxScale",scale:"scale",scaling:"scaling",size:"size"},t}(r(5).Layer2D);t.RectangleLayer=s},function(e,t){e.exports="precision highp float;\nvarying vec4 vertexColor;\nvoid main() {\nsetColor(vertexColor);\n}"},function(e,t){e.exports="precision highp float;\nvarying vec4 vertexColor;\nvoid main() {\nvec3 screenSize = cameraSpaceSize(vec3(size * scale / scaleFactor / maxScale, 1.0));\nbool largerOnScreen = screenSize.y > size.y || screenSize.x > size.x;\nfloat useScaleMode = float(\n(\nscaling == 3.0 ||\n(largerOnScreen && scaling == 2.0)\n) &&\nscaling != 1.0\n);\nfloat unequalZooms = float(cameraScale2D.x != cameraScale2D.y);\nvec2 adjustedSize = mix(\nsize,\n(size * cameraScale2D.yx),\nunequalZooms\n);\nfloat normal = normals.x;\nfloat side = normals.y;\nvec2 scaledAnchor = anchor * scale;\nvec2 worldAnchor = location + scaledAnchor;\nvec2 adjustedAnchor = mix(\nscaledAnchor,\n(scaledAnchor * cameraScale2D.yx),\nunequalZooms\n);\nvec2 vertex = vec2(side, float(normal == 1.0)) * scale * adjustedSize + location - adjustedAnchor;\nfloat labelScreenScale = mix(\nscreenSize.y / adjustedSize.y,\nscreenSize.x / adjustedSize.x,\nfloat((cameraScale2D.x != 1.0))\n);\nfloat currentScale = labelScreenScale * scale;\nvec2 anchorToVertex = vertex - location;\nvertex = mix(\nvertex,\n(anchorToVertex / labelScreenScale) + location,\nuseScaleMode\n);\nvertexColor = color;\ngl_Position = clipSpace(vec3(vertex, depth));\n}"},function(e,t,r){"use strict";var n,i,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),A=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,A=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)A=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(A=(o<3?i(A):o>3?i(t,r,A):i(t,r))||A);return o>3&&A&&Object.defineProperty(t,r,A),A};Object.defineProperty(t,"__esModule",{value:!0});var a=r(3),s=r(9),c=r(22),u=((i={})[c.AnchorType.TopLeft]=function(e,t){e.x=-e.padding,e.y=-e.padding},i[c.AnchorType.TopMiddle]=function(e,t){e.x=t.size[0]/2,e.y=-e.padding},i[c.AnchorType.TopRight]=function(e,t){e.x=t.size[0]+e.padding,e.y=-e.padding},i[c.AnchorType.MiddleLeft]=function(e,t){e.x=-e.padding,e.y=t.size[1]/2},i[c.AnchorType.Middle]=function(e,t){e.x=t.size[0]/2,e.y=t.size[1]/2},i[c.AnchorType.MiddleRight]=function(e,t){e.x=t.size[0]+e.padding,e.y=t.size[1]/2},i[c.AnchorType.BottomLeft]=function(e,t){e.x=-e.padding,e.y=t.size[1]+e.padding},i[c.AnchorType.BottomMiddle]=function(e,t){e.x=t.size[0]/2,e.y=t.size[1]+e.padding},i[c.AnchorType.BottomRight]=function(e,t){e.x=t.size[0]+e.padding,e.y=t.size[1]+e.padding},i[c.AnchorType.Custom]=function(e,t){e.x=e.x||0,e.y=e.y||0},i),l=function(e){function t(t){var r=e.call(this,t)||this;return r.color=[0,0,0,1],r.depth=0,r.maxScale=1,r.scale=1,r.scaling=c.ScaleMode.BOUND_MAX,r.size=[1,1],r.position=[0,0],r._anchor={padding:0,type:c.AnchorType.TopLeft,x:0,y:0},r.depth=t.depth||r.depth,r.color=t.color||r.color,r.scaling=t.scaling||r.scaling,r.position=t.position||r.position,r.size=t.size||r.size,t.anchor&&r.setAnchor(t.anchor),r}return o(t,e),Object.defineProperty(t.prototype,"anchor",{get:function(){return this._anchor},enumerable:!0,configurable:!0}),t.prototype.setAnchor=function(e){var t={padding:e.padding||0,type:e.type,x:e.x||0,y:e.y||0};u[t.type](t,this),this._anchor=t},A([a.observable],t.prototype,"color",void 0),A([a.observable],t.prototype,"depth",void 0),A([a.observable],t.prototype,"maxScale",void 0),A([a.observable],t.prototype,"scale",void 0),A([a.observable],t.prototype,"scaling",void 0),A([a.observable],t.prototype,"size",void 0),A([a.observable],t.prototype,"position",void 0),A([a.observable],t.prototype,"_anchor",void 0),t}(s.Instance);t.RectangleInstance=l},function(e,t,r){"use strict";function n(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}Object.defineProperty(t,"__esModule",{value:!0}),n(r(254)),n(r(255))},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,A=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)A=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(A=(o<3?i(A):o>3?i(t,r,A):i(t,r))||A);return o>3&&A&&Object.defineProperty(t,r,A),A};Object.defineProperty(t,"__esModule",{value:!0});var A=r(9),a=r(29),s=function(e){function t(t){var r=e.call(this,t)||this;return r.color=[1,1,1,1],r.depth=0,r.radius=0,r.thickness=1,r.center=[0,0],r.color=t.color||r.color,r.depth=t.depth||r.depth,r.radius=t.radius||r.radius,r.thickness=t.thickness||r.thickness,r.center=t.center||r.center,r}return i(t,e),Object.defineProperty(t.prototype,"width",{get:function(){return 2*this.radius},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return 2*this.radius},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"innerRadius",{get:function(){return this.radius-this.thickness},enumerable:!0,configurable:!0}),o([a.observable],t.prototype,"color",void 0),o([a.observable],t.prototype,"depth",void 0),o([a.observable],t.prototype,"radius",void 0),o([a.observable],t.prototype,"thickness",void 0),o([a.observable],t.prototype,"center",void 0),t}(A.Instance);t.RingInstance=s},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o=r(3),A=r(0),a=r(1),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.initShader=function(){var e=this.props.scaleFactor||function(){return 1},n=this.props.animate||{},i=n.color,o=n.center,a=n.radius,s={0:1,1:1,2:-1,3:1,4:-1,5:-1},c={0:-1,1:-1,2:-1,3:1,4:1,5:1};return{fs:r(256),instanceAttributes:[{easing:o,name:t.attributeNames.center,size:A.InstanceAttributeSize.TWO,update:function(e){return e.center}},{easing:a,name:t.attributeNames.radius,size:A.InstanceAttributeSize.ONE,update:function(e){return[e.radius]}},{name:t.attributeNames.depth,size:A.InstanceAttributeSize.ONE,update:function(e){return[e.depth]}},{easing:i,name:t.attributeNames.color,size:A.InstanceAttributeSize.FOUR,update:function(e){return e.color}},{name:t.attributeNames.thickness,size:A.InstanceAttributeSize.ONE,update:function(e){return[e.thickness]}}],uniforms:[{name:"scaleFactor",size:A.UniformSize.ONE,update:function(t){return[e()]}}],vertexAttributes:[{name:"normals",size:A.VertexAttributeSize.TWO,update:function(e){return[s[e],c[e]]}}],vertexCount:6,vs:r(257)}},t.prototype.getMaterialOptions=function(){return a.CommonMaterialOptions.transparentShapeBlending},t.defaultProps={key:"",data:new o.InstanceProvider},t.attributeNames={center:"center",radius:"radius",depth:"depth",color:"color",thickness:"thickness"},t}(r(5).Layer2D);t.RingLayer=s},function(e,t){e.exports="precision highp float;\nvarying vec4 vertexColor;\nvarying float edgeSharpness;\nvarying float borderSize;\nvarying vec2 pointCoord;\nvarying float scale;\nfloat circle(vec2 coord, float radius){\nvec2 dist = coord - vec2(0.5);\nreturn 1.0 - smoothstep(\nradius - (radius * edgeSharpness),\nradius,\ndot(dist, dist) * 4.0\n);\n}\nvoid main() {\nfloat outer_step_factor = circle(pointCoord, 1.0);\nfloat inner_step_factor = circle(pointCoord, 1.0 - borderSize * scale);\nsetColor(mix(\nmix(\nvec4(0.0, 0.0, 0.0, 0.0),\nvertexColor,\nouter_step_factor\n),\nvec4(0.0, 0.0, 0.0, 0.0),\ninner_step_factor\n));\n}"},function(e,t){e.exports="precision highp float;\nvarying vec4 vertexColor;\nvarying float edgeSharpness;\nvarying float borderSize;\nvarying vec2 pointCoord;\nvarying float scale;\nvoid main() {\nscale = scaleFactor;\nvertexColor = color;\nfloat size = radius * scaleFactor * pixelRatio;\nfloat ringWidth = mix(2.0 , thickness, float(thickness > 2.0));\nborderSize = mix(\n(ringWidth) / size,\n((ringWidth * pixelRatio) / size),\nfloat(pixelRatio > 1.0)\n);\nedgeSharpness = min(0.2 / (ringWidth * scale), 0.1);\npointCoord = (normals.xy + vec2(1.0, 1.0)) / 2.0;\nvec4 clipCenter = clipSpace(vec3(center, depth));\nvec2 screenCenter = (clipCenter.xy + vec2(1.0, 1.0)) * vec2(0.5, 0.5) * viewSize;\nvec2 vertex = (normals.xy * size) + screenCenter;\ngl_Position = vec4((vertex / viewSize) * vec2(2.0, 2.0) - vec2(1.0, 1.0), clipCenter.zw);\n}"},function(e,t,r){"use strict";function n(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}Object.defineProperty(t,"__esModule",{value:!0}),r(259),n(r(296)),n(r(298)),n(r(301))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),r(260),r(292),r(294)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(33),i=r(5),o=r(46),A=r(0);o.ShaderModule.register([{moduleId:"world2DXY",content:r(113),compatibility:A.ShaderInjectionTarget.ALL,uniforms:function(e){return e instanceof i.Layer2D?e.props.control2D?[{name:"projection",size:A.UniformSize.MATRIX4,update:function(){return e.view.props.camera.projection}},{name:"view",size:A.UniformSize.MATRIX4,update:function(){return e.view.props.camera.view}},{name:"cameraOffset",size:A.UniformSize.THREE,update:function(){return e.props.control2D instanceof n.Control2D?e.props.control2D.offset:[0,0,0]}},{name:"cameraPosition",size:A.UniformSize.THREE,update:function(){return e.view.props.camera.position}},{name:"cameraScale",size:A.UniformSize.THREE,update:function(){return e.view.props.camera.scale}},{name:"cameraScale2D",size:A.UniformSize.THREE,update:function(){return e.props.control2D instanceof n.Control2D?e.props.control2D.scale:[1,1,1]}},{name:"cameraRotation",size:A.UniformSize.FOUR,update:function(){return e.view.props.camera.transform.rotation}},{name:"viewSize",size:A.UniformSize.TWO,update:function(){return[e.view.viewBounds.width,e.view.viewBounds.height]}},{name:"pixelRatio",size:A.UniformSize.ONE,update:function(){return[e.view.pixelRatio]}}]:(console.warn("For a layer 2D to be compatible with a 3D View, the layer requires an additional prop of control2D"),[]):(console.warn("A shader requesed the module world2DXZ; however, the layer the shader comes from is NOT a Layer2D which is","required for the module to work."),[])}}])},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),r(262),r(264),r(265),r(266),r(267),r(268),r(284),r(289)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(0);r(8).ShaderModule.register([{moduleId:"camera",content:"",compatibility:n.ShaderInjectionTarget.ALL,uniforms:function(e){return[{name:"projection",size:n.UniformSize.MATRIX4,update:function(){return e.view.props.camera.projection}},{name:"viewProjection",size:n.UniformSize.MATRIX4,update:function(){return e.view.props.camera.viewProjection}},{name:"view",size:n.UniformSize.MATRIX4,update:function(){return e.view.props.camera.view}},{name:"cameraPosition",size:n.UniformSize.THREE,update:function(){return e.view.props.camera.position}},{name:"cameraScale",size:n.UniformSize.THREE,update:function(){return e.view.props.camera.scale}},{name:"cameraRotation",size:n.UniformSize.THREE,update:function(){return e.view.props.camera.scale}},{name:"viewSize",size:n.UniformSize.TWO,update:function(){return[e.view.viewBounds.width,e.view.viewBounds.height]}},{name:"pixelRatio",size:n.UniformSize.ONE,update:function(){return[e.view.pixelRatio]}}]}},{moduleId:"projection",content:r(263),compatibility:n.ShaderInjectionTarget.ALL}])},function(e,t){e.exports="${import: camera}\nvec3 cameraSpace(vec3 world) {\nreturn (view * vec4(world, 1.0)).xyz;\n}\nvec3 cameraSpaceSize(vec3 worldSize) {\nreturn (view * vec4(worldSize, 0.0)).xyz;\n}\nvec4 clipSpace(vec3 world) {\nreturn (projection * view) * vec4(world, 1.0);\n}\nvec4 clipSpaceSize(vec3 worldSize) {\nreturn (projection * view) * vec4(worldSize, 0.0);\n}"},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(0);r(8).ShaderModule.register({moduleId:"dimColor",content:r(119),compatibility:n.ShaderInjectionTarget.ALL})},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(0);r(8).ShaderModule.register({moduleId:"frame",content:"",compatibility:n.ShaderInjectionTarget.ALL,uniforms:function(e){return[{name:"currentTime",size:n.UniformSize.ONE,update:function(){return[e.surface.frameMetrics.currentTime]}},{name:"currentFrame",size:n.UniformSize.ONE,update:function(){return[e.surface.frameMetrics.currentFrame]}}]}})},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(0);r(8).ShaderModule.register({moduleId:"hsv",content:r(119),compatibility:n.ShaderInjectionTarget.ALL})},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(17),i=r(0);r(8).ShaderModule.register({moduleId:"instancing",content:"",compatibility:i.ShaderInjectionTarget.ALL,instanceAttributes:function(e){var t={name:"_active",size:i.InstanceAttributeSize.ONE,update:function(e){return[e.active?1:0]}};return e.activeAttribute=t,[t]},vertexAttributes:function(e){return e.bufferType===n.LayerBufferType.UNIFORM?[{name:"instance",size:i.VertexAttributeSize.ONE,update:function(){return[0]}}]:[]}})},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(0),i=r(8),o=[{moduleId:"PI_INV",content:r(269),compatibility:n.ShaderInjectionTarget.ALL},{moduleId:"PI2_INV",content:r(270),compatibility:n.ShaderInjectionTarget.ALL},{moduleId:"PI_2",content:r(271),compatibility:n.ShaderInjectionTarget.ALL},{moduleId:"PI_4",content:r(272),compatibility:n.ShaderInjectionTarget.ALL},{moduleId:"PI",content:r(273),compatibility:n.ShaderInjectionTarget.ALL},{moduleId:"PI2",content:r(274),compatibility:n.ShaderInjectionTarget.ALL},{moduleId:"toDegrees",content:r(275),compatibility:n.ShaderInjectionTarget.ALL},{moduleId:"toRadians",content:r(276),compatibility:n.ShaderInjectionTarget.ALL}],A={moduleId:"constants",content:"${import: "+o.map(function(e){return e.moduleId}).join(", ")+"}",compatibility:n.ShaderInjectionTarget.ALL},a=[{moduleId:"bezier1",content:r(277),compatibility:n.ShaderInjectionTarget.ALL},{moduleId:"bezier2",content:r(278),compatibility:n.ShaderInjectionTarget.ALL},{moduleId:"arc",content:r(279),compatibility:n.ShaderInjectionTarget.ALL},{moduleId:"fmod",content:r(280),compatibility:n.ShaderInjectionTarget.ALL},{moduleId:"wrap",content:r(281),compatibility:n.ShaderInjectionTarget.ALL},{moduleId:"fcos",content:r(282),compatibility:n.ShaderInjectionTarget.ALL},{moduleId:"fsin",content:r(283),compatibility:n.ShaderInjectionTarget.ALL}];i.ShaderModule.register(a.concat(o,[A]))},function(e,t){e.exports="float PI_INV = 0.3183098862;"},function(e,t){e.exports="float PI2_INV = 0.1591549431;"},function(e,t){e.exports="float PI_2 = 1.5707963268;"},function(e,t){e.exports="float PI_4 = 0.7853981634;"},function(e,t){e.exports="float PI = 3.14159265;"},function(e,t){e.exports="float PI2 = 6.2831853;"},function(e,t){e.exports="float toDegrees = 57.2957795131;"},function(e,t){e.exports="float toRadians = 0.01745329252;"},function(e,t){e.exports="vec2 bezier1(float t, vec2 p1, vec2 p2, vec2 c1) {\nreturn (1.0 - t) * (1.0 - t) * p1 + 2.0 * t * (1.0 - t) * c1 + t * t * p2;\n}"},function(e,t){e.exports="vec2 bezier2(float t, vec2 p1, vec2 p2, vec2 c1, vec2 c2) {\nfloat t1 = 1.0 - t;\nreturn pow(t1, 3.0) * p1 + 3.0 * t * pow(t1, 2.0) * c1 + 3.0 * pow(t, 2.0) * t1 * c2 + pow(t, 3.0) * p2;\n}"},function(e,t){e.exports="${import: PI, PI2, fsin, fcos, wrap}\nvec2 arc(float t, vec2 center, float radius, float start, float end) {\nfloat angle = wrap((end - start) * t + start, 0.0, PI2);\nreturn center + vec2(fcos(angle), fsin(angle)) * radius;\n}"},function(e,t){e.exports="float fmod(float x, float m, float m_inv) {\nreturn x - m * floor(x * m_inv);\n}"},function(e,t){e.exports="float wrap(float value, float start, float end) {\nfloat width = end - start;\nfloat offsetValue = value - start;\nreturn (offsetValue - (floor(offsetValue / width) * width)) + start;\n}"},function(e,t){e.exports="${import: PI, PI2, PI_2}\nfloat fcos(float x) {\nfloat sine;\nx += PI_2;\nx += mix(\nmix(\n0.0,\n-PI2, float(x > PI)\n),\nPI2, float(x < -PI)\n);\nsine = 1.27323954 * x;\nsine += mix(-1.0, 1.0, float(x < 0.0)) * 0.405284735 * x * x;\nsine = 0.225 * (sine * (mix(1.0, -1.0, float(sine < 0.0)) * sine) - sine) + sine;\nreturn sine;\n}"},function(e,t){e.exports="${import: PI, PI2}\nfloat fsin(float x) {\nfloat sine;\nx += mix(\nmix(\n0.0,\n-PI2, float(x > PI)\n),\nPI2, float(x < -PI)\n);\nsine = 1.27323954 * x;\nsine += mix(-1.0, 1.0, float(x < 0.0)) * 0.405284735 * x * x;\nsine = 0.225 * (sine * (mix(1.0, -1.0, float(sine < 0.0)) * sine) - sine) + sine;\nreturn sine;\n}"},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(0);r(8).ShaderModule.register([{moduleId:"picking",content:r(285),compatibility:n.ShaderInjectionTarget.VERTEX,instanceAttributes:function(e){return[{name:"_pickingColor",size:n.InstanceAttributeSize.FOUR,update:function(e){var t=16777215-e.uid;return[((16711680&t)>>16)/255,((65280&t)>>8)/255,(255&t)/255,1]}}]},uniforms:function(e){return[{name:"pickingActive",shaderInjection:n.ShaderInjectionTarget.ALL,size:n.UniformSize.ONE,update:function(){return[e.picking.currentPickMode===n.PickType.SINGLE?1:0]}}]}},{moduleId:"picking",content:r(286),compatibility:n.ShaderInjectionTarget.FRAGMENT},{moduleId:"no-picking",content:r(287),compatibility:n.ShaderInjectionTarget.VERTEX},{moduleId:"no-picking",content:r(288),compatibility:n.ShaderInjectionTarget.FRAGMENT}])},function(e,t){e.exports="varying highp vec4 _picking_color_pass_;"},function(e,t){e.exports="varying highp vec4 _picking_color_pass_;\nhighp vec4 setColor(vec4 color) {\ngl_FragColor = mix(color, _picking_color_pass_, pickingActive);\nif (color.a == 0.0) {\ndiscard;\n}\nreturn gl_FragColor;\n}"},function(e,t){e.exports=""},function(e,t){e.exports="lowp vec4 setColor(vec4 color) {\ngl_FragColor = color;\nreturn gl_FragColor;\n}"},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(0);r(8).ShaderModule.register([{moduleId:"no-op",content:r(290),compatibility:n.ShaderInjectionTarget.VERTEX},{moduleId:"no-op",content:r(291),compatibility:n.ShaderInjectionTarget.FRAGMENT}])},function(e,t){e.exports="void main() {\ngl_Position = vec4(0.0, 0.0, 0.0, 1.0);\n}"},function(e,t){e.exports="void main() {\ngl_FragColor = vec4(0.0, 0.0, 0.0, 0.0);\n}"},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(33),i=r(5),o=r(46),A=r(0);o.ShaderModule.register([{moduleId:"world2DXZ",content:r(293),compatibility:A.ShaderInjectionTarget.ALL,uniforms:function(e){return e instanceof i.Layer2D?e.props.control2D?[{name:"projection",size:A.UniformSize.MATRIX4,update:function(){return e.view.props.camera.projection}},{name:"view",size:A.UniformSize.MATRIX4,update:function(){return e.view.props.camera.view}},{name:"cameraOffset",size:A.UniformSize.THREE,update:function(){return e.props.control2D instanceof n.Control2D?e.props.control2D.offset:[0,0,0]}},{name:"cameraPosition",size:A.UniformSize.THREE,update:function(){return e.view.props.camera.position}},{name:"cameraScale",size:A.UniformSize.THREE,update:function(){return e.view.props.camera.scale}},{name:"cameraScale2D",size:A.UniformSize.THREE,update:function(){return e.props.control2D instanceof n.Control2D?e.props.control2D.scale:[1,1,1]}},{name:"cameraRotation",size:A.UniformSize.THREE,update:function(){return e.view.props.camera.scale}},{name:"viewSize",size:A.UniformSize.TWO,update:function(){return[e.view.viewBounds.width,e.view.viewBounds.height]}},{name:"pixelRatio",size:A.UniformSize.ONE,update:function(){return[e.view.pixelRatio]}}]:(console.warn("For a layer 2D to be compatible with a 3D View, the layer requires an additional prop of control2D"),[]):(console.warn("A shader requesed the module world2DXZ; however, the layer the shader comes from is NOT a Layer2D which is","required for the module to work."),[])}}])},function(e,t){e.exports="vec3 cameraSpace(vec3 world) {\nreturn (world + cameraOffset) * cameraScale2D;\n}\nvec3 cameraSpaceSize(vec3 worldSize) {\nreturn worldSize * cameraScale2D;\n}\nvec4 clipSpace(vec3 world) {\nreturn ((projection * view) * vec4(cameraSpace(world.xzy), 1.0));\n}\nvec4 clipSpaceSize(vec3 worldSize) {\nreturn ((projection * view) * vec4(cameraSpaceSize(worldSize.xzy), 0.0));\n}"},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(36),i=r(5),o=r(46),A=r(0);o.ShaderModule.register([{moduleId:"world2DYZ",content:r(295),compatibility:A.ShaderInjectionTarget.ALL,uniforms:function(e){return e instanceof i.Layer2D?e.props.control2D?[{name:"projection",size:A.UniformSize.MATRIX4,update:function(){return e.view.props.camera.projection}},{name:"view",size:A.UniformSize.MATRIX4,update:function(){return e.view.props.camera.view}},{name:"cameraOffset",size:A.UniformSize.THREE,update:function(){return e.props.control2D instanceof n.Control2D?e.props.control2D.offset:[0,0,0]}},{name:"cameraPosition",size:A.UniformSize.THREE,update:function(){return e.view.props.camera.position}},{name:"cameraScale",size:A.UniformSize.THREE,update:function(){return e.view.props.camera.scale}},{name:"cameraScale2D",size:A.UniformSize.THREE,update:function(){return e.props.control2D instanceof n.Control2D?e.props.control2D.scale:[1,1,1]}},{name:"cameraRotation",size:A.UniformSize.THREE,update:function(){return e.view.props.camera.scale}},{name:"viewSize",size:A.UniformSize.TWO,update:function(){return[e.view.viewBounds.width,e.view.viewBounds.height]}},{name:"pixelRatio",size:A.UniformSize.ONE,update:function(){return[e.view.pixelRatio]}}]:(console.warn("For a layer 2D to be compatible with a 3D View, the layer requires an additional prop of control2D"),[]):(console.warn("A shader requesed the module world2DYZ; however, the layer the shader comes from is NOT a Layer2D which is","required for the module to work."),[])}}])},function(e,t){e.exports="vec3 cameraSpace(vec3 world) {\nreturn (world + cameraOffset) * cameraScale2D;\n}\nvec3 cameraSpaceSize(vec3 worldSize) {\nreturn worldSize * cameraScale2D;\n}\nvec4 clipSpace(vec3 world) {\nreturn ((projection * view) * vec4(cameraSpace(world.zyx), 1.0));\n}\nvec4 clipSpaceSize(vec3 worldSize) {\nreturn ((projection * view) * vec4(cameraSpaceSize(worldSize.zyx), 0.0));\n}"},function(e,t,r){"use strict";function n(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}Object.defineProperty(t,"__esModule",{value:!0}),n(r(120)),n(r(297)),n(r(121)),n(r(120))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,i=r(33),o=r(45);!function(e){e[e.XY=0]="XY",e[e.XZ=1]="XZ",e[e.YZ=2]="YZ"}(n=t.Axis2D||(t.Axis2D={})),t.createLayer2Din3D=function(e,t,r){var A;if(!(t===i.Layer2D||t.prototype instanceof i.Layer2D))return console.warn("A Layer type was specified for createLayer2din3D that is NOT a Layer2D type, which is invalid.","The layer will be used without being modified."),o.createLayer(t,r);switch(e){case n.XY:A="world2DXY";break;case n.XZ:A="world2DXZ";break;case n.YZ:A="world2DYZ";break;default:return o.createLayer(t,r)}var a=Object.assign({},r,{baseShaderModules:function(e,t){var r=t.vs.indexOf("world2D");return r>=0&&t.vs.splice(r,1,A),(r=t.fs.indexOf("world2D"))>=0&&t.fs.splice(r,1,A),t}});return o.createLayer(t,a)}},function(e,t,r){"use strict";function n(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}Object.defineProperty(t,"__esModule",{value:!0}),n(r(52)),n(r(299))},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o=r(11),A=r(300),a=r(52),s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._local=new a.Transform,t._parent=null,t._world=o.identity4(),t}return i(t,e),Object.defineProperty(t.prototype,"local",{get:function(){return this._local.matrix},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return this._parent},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"world",{get:function(){return this._world?this._world:this._local.matrix},enumerable:!0,configurable:!0}),t.prototype.willMount=function(){throw new Error("Method not implemented.")},t.prototype.didMount=function(){throw new Error("Method not implemented.")},t}(A.Node);t.Node3D=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(1),i=function(){function e(){this._uid=n.uid(),this._siblings=new Map}return Object.defineProperty(e.prototype,"uid",{get:function(){return this._uid},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"siblings",{get:function(){return this._siblings},enumerable:!0,configurable:!0}),e.prototype.addSibling=function(e,t){this._siblings.set(e.uid,e),t||e.siblings.has(this.uid)||e.addSibling(this,!0)},e.prototype.addSiblings=function(e){for(var t=0,r=e.length;t<r;++t){var n=e[t];this._siblings.set(n.uid,n),n.siblings.has(this.uid)||n.addSibling(this,!0)}},e.prototype.remove=function(){var e=this;this._siblings.forEach(function(t){t.removeSibling(e)}),this._siblings.clear()},e.prototype.removeSibling=function(e,t){this._siblings.delete(e.uid)&&!t&&e.removeSibling(this,!0)},e.prototype.trigger=function(){},e}();t.Node=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NOOP_3D_LAYERS=function(){}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}(r(303))},function(e,t,r){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},i=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(i,o){function A(e){try{s(n.next(e))}catch(e){o(e)}}function a(e){try{s(n.throw(e))}catch(e){o(e)}}function s(e){e.done?i(e.value):new r(function(t){t(e.value)}).then(A,a)}s((n=n.apply(e,t||[])).next())})},o=this&&this.__generator||function(e,t){var r,n,i,o,A={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;A;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return A.label++,{value:o[1],done:!1};case 5:A.label++,n=o[1],o=[0];continue;case 7:o=A.ops.pop(),A.trys.pop();continue;default:if(!(i=(i=A.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){A=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){A.label=o[1];break}if(6===o[0]&&A.label<i[1]){A.label=i[1],i=o;break}if(i&&A.label<i[2]){A.label=i[2],A.ops.push(o);break}i[2]&&A.ops.pop(),A.trys.pop();continue}o=t.call(e,A)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};Object.defineProperty(t,"__esModule",{value:!0});var A=r(47),a=r(3),s=r(6),c=r(18),u=r(0),l=r(1);function h(e,t){for(var r=[],n=Object.values(t),i=0;i<n.length;++i){var o=n[i];o instanceof e?r.push(o):n.push.apply(n,Object.values(o))}return r}function d(e,t,r,n){for(var i=new Set,o=[],A=Object.keys(r).map(function(e){return[e,r[e]]}),a=function(r){var a=A[r];if(t(a[1]))o.push(n(a[0],a[1]));else{var s=!1;if(Object.keys(a[1]).forEach(function(t){var r=a[1][t];i.has(r)?(s=!0,console.warn("Invalid lookup for BasicSurface detected:",e)):(A.push([a[0]+"."+t,r]),i.add(r))}),s)return"break"}},s=0;s<A.length;++s){if("break"===a(s))break}return o}var f=function(){function e(e){var t=this;this.currentTime=0,this.drawRequestId=0,this.resizeTimer=0,this.waitForSizeContext=0,this.destroy=function(){t.base&&(t.base.destroy(),delete t.base),t.context&&(t.context.remove(),delete t.context),cancelAnimationFrame(t.drawRequestId),window.removeEventListener("resize",t.handleResize)},this.draw=function(e){return i(t,void 0,void 0,function(){return o(this,function(t){return this.base?(this.currentTime=e,this.base.draw(e),this.drawRequestId=requestAnimationFrame(this.draw),[2]):[2]})})},this.handleResize=function(){clearTimeout(t.resizeTimer),t.base&&(t.resizeTimer=window.setTimeout(function(){t.fitContainer()},100))},this.rebuild(e)}return e.prototype.createContext=function(){this.context||(this.context=document.createElement("canvas"),this.context.title="",this.context.width=(this.options.container.offsetWidth||0)*window.devicePixelRatio,this.context.height=(this.options.container.offsetHeight||0)*window.devicePixelRatio,this.context.style.width=(this.options.container.offsetWidth||0)+"px",this.context.style.height=(this.options.container.offsetHeight||0)+"px",this.options.container.appendChild(this.context))},e.prototype.init=function(){return i(this,void 0,void 0,function(){var e,t,r;return o(this,function(n){switch(n.label){case 0:return this.base?[2]:[4,this.waitForValidDimensions(this.options.container)];case 1:if(!n.sent())return[2];this.createContext(),n.label=2;case 2:return n.trys.push([2,6,,7]),this.providers=this.options.providers,this.cameras=this.options.cameras,this.resources=this.options.resources,this.eventManagers=this.options.eventManagers(this.cameras),e=this,[4,new c.Surface({context:this.context,handlesWheelEvents:void 0===this.options.handlesWheelEvents||this.options.handlesWheelEvents,pixelRatio:window.devicePixelRatio,eventManagers:h(A.EventManager,this.eventManagers),rendererOptions:Object.assign({alpha:!0,antialias:!1},this.options.rendererOptions)}).ready];case 3:return e.base=n.sent(),this.fitContainer(!0),t=this.draw,[4,l.onFrame()];case 4:return t.apply(this,[n.sent()]),[4,this.updatePipeline()];case 5:return n.sent(),window.addEventListener("resize",this.handleResize),[3,7];case 6:return(r=n.sent()).error===u.SurfaceErrorType.NO_WEBGL_CONTEXT?this.options.onNoWebGL&&this.options.onNoWebGL():(console.error("The Basic Surface could not be initialized"),console.error(r.stack||r.message)),[3,7];case 7:return[2]}})})},e.prototype.fitContainer=function(e){this.base&&(this.context.remove(),this.base.resize(this.options.container.offsetWidth||0,this.options.container.offsetHeight||0),this.options.container.appendChild(this.context),e||this.base.draw(this.currentTime))},e.prototype.getViewProjections=function(e){return this.base?this.base.getProjections(e):null},e.prototype.getViewScreenSize=function(e){if(!this.base)return[0,0];var t=this.base.getViewSize(e);return t?[t.width,t.height]:[0,0]},e.prototype.getViewScreenBounds=function(e){if(!this.base)return new s.Bounds({x:0,y:0,width:0,height:0});var t=this.base.getViewWorldBounds(e);return t||new s.Bounds({x:0,y:0,width:0,height:0})},e.prototype.getViewWorldBounds=function(e){if(!this.base)return new s.Bounds({x:0,y:0,width:0,height:0});var t=this.base.getViewWorldBounds(e);return t||new s.Bounds({x:0,y:0,width:0,height:0})},e.prototype.pipeline=function(e){return i(this,void 0,void 0,function(){return o(this,function(t){switch(t.label){case 0:return this.options.pipeline=e,this.base?[4,this.updatePipeline()]:[2];case 1:return t.sent(),[2]}})})},e.prototype.rebuild=function(e){return i(this,void 0,void 0,function(){var t,r,n,i,A;return o(this,function(o){switch(o.label){case 0:if("boolean"==typeof e){if(e&&this.providers)for(r=h(a.InstanceProvider,this.providers),n=0,i=r.length;n<i;++n)r[n].clear()}else t=e;return this.options&&t&&console.warn("Ignoring options provided to rebuild method. The constructor is the only way to apply an options configuration object"),this.base&&this.base.destroy(),this.context&&(this.context.remove(),delete this.context),!this.options&&t&&(this.options=t),A=new l.PromiseResolver,this.ready=A.promise,[4,this.init()];case 1:return o.sent(),A.resolve(this),[2]}})})},e.prototype.setContainer=function(e){this.options.container=e,e.appendChild(this.context),this.fitContainer()},e.prototype.updatePipeline=function(){return i(this,void 0,void 0,function(){var e,t,r,i;return o(this,function(o){switch(o.label){case 0:return this.base?(e=d("resources",function(e){return e&&void 0!==e.type},this.resources||[],function(e,t){var r=n({},t,{key:t.key||e});return t.key=r.key,r}),t=this.options.pipeline(this.resources,this.providers,this.cameras,this.eventManagers),r=d("scenes",function(e){return e&&void 0!==e.views&&void 0!==e.layers},t.scenes,function(e,t){var r=d("views",function(e){return e&&void 0!==e.init&&2===e.init.length},t.views,function(t,r){var i=n({},r,{key:e+"."+(r.key||t)});return i.init[1]=n({},i.init[1],{key:i.key}),i}),i=d("layers",function(e){return e&&void 0!==e.init},t.layers,function(e,t){var r={init:t.init,key:t.key||e};return t.init[1].key=r.key,r}),o={key:e,order:t.order,views:r,layers:i};return void 0===t.order&&delete o.order,o}),i={resources:e,scenes:r},[4,this.base.pipeline(i)]):[2];case 1:return[2,o.sent()]}})})},e.prototype.waitForValidDimensions=function(e){return i(this,void 0,void 0,function(){var t,r,n,i,A,a,s=this;return o(this,function(o){switch(o.label){case 0:return t=++this.waitForSizeContext,r=new l.PromiseResolver,0!==(n=e.getBoundingClientRect()).width&&0!==n.height?[3,2]:(i=!0,A={attributes:!0},(a=new MutationObserver(function(o){if(i)for(var A=0,c=o;A<c.length;A++){"attributes"===c[A].type&&0!==(n=e.getBoundingClientRect()).width&&0!==n.height&&(a.disconnect(),i=!1,r.resolve(t===s.waitForSizeContext))}})).observe(e,A),[4,l.nextFrame()]);case 1:return o.sent(),n=e.getBoundingClientRect(),i&&0!==n.width&&0!==n.height&&(a.disconnect(),i=!1,r.resolve(t===this.waitForSizeContext)),[3,4];case 2:return[4,l.nextFrame()];case 3:o.sent(),r.resolve(t===this.waitForSizeContext),o.label=4;case 4:return[4,r.promise];case 5:return[2,o.sent()]}})})},e}();t.BasicSurface=f},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}(r(305))},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o=r(3),A=r(18),a=function(e){function t(t,r,n){var i=e.call(this,t,r,n)||this;return console.warn("Please ensure all debugLayer calls are removed for production:",n.key),i}return i(t,e),t.prototype.childLayers=function(){return this.props.wrap?(this.props.wrap.init[1].key="debug-wrapper."+this.props.key,[this.props.wrap]):[]},t.prototype.draw=function(){if(this.props.wrap){var e=this.resolveChanges(!0);if(0!==e.length){var t=this.props.messageHeader,r=void 0===t?function(){return""}:t;console.warn(r()+"\n",{totalChanges:e.length,changes:e})}}},t.prototype.initShader=function(){if(!this.props.wrap)return null;for(var e=new this.props.wrap.init[0](this.surface,this.scene,this.props.wrap.init[1]),t=e.childLayers(),r={};t.length>0;){var n=t.pop();if(n){var i=new n.init[0](this.surface,this.scene,n.init[1]);r[i.id]={shaderIO:i.initShader()},i.childLayers().forEach(function(e){return t.push(e)})}}return console.warn("Shader IO: "+this.id+"\n",{shaderIO:e.initShader(),childLayers:r}),null},t.defaultProps={data:new o.InstanceProvider,key:"default",messageHeader:function(){return""},wrap:A.createLayer(A.Layer,{data:new o.InstanceProvider,scene:"default"})},t}(A.Layer);t.debugLayer=function(e,t){var r=A.createLayer(a,{messageHeader:function(){return"CHANGES FOR: "+r.init[1].key},wrap:A.createLayer(e,t),data:t.data});return r}}])});
//# sourceMappingURL=index.js.map