!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports["network-bubble-chart"]=t():e["network-bubble-chart"]=t()}(window,function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=114)}([function(e,t,n){"use strict";var r,i;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.ONE=1]="ONE",e[e.TWO=2]="TWO",e[e.THREE=3]="THREE",e[e.FOUR=4]="FOUR"}(t.InstanceBlockIndex||(t.InstanceBlockIndex={})),function(e){e[e.ONE=1]="ONE",e[e.TWO=2]="TWO",e[e.THREE=3]="THREE",e[e.FOUR=4]="FOUR",e[e.ATLAS=99]="ATLAS"}(i=t.InstanceAttributeSize||(t.InstanceAttributeSize={})),t.instanceAttributeSizeFloatCount=((r={})[i.ONE]=1,r[i.TWO]=2,r[i.THREE]=3,r[i.FOUR]=4,r[i.ATLAS]=4,r),function(e){e[e.ONE=1]="ONE",e[e.TWO=2]="TWO",e[e.THREE=3]="THREE",e[e.FOUR=4]="FOUR",e[e.MATRIX3=9]="MATRIX3",e[e.MATRIX4=16]="MATRIX4",e[e.VEC4_ARRAY=98]="VEC4_ARRAY",e[e.ATLAS=99]="ATLAS"}(t.UniformSize||(t.UniformSize={})),function(e){e[e.ONE=1]="ONE",e[e.TWO=2]="TWO",e[e.THREE=3]="THREE",e[e.FOUR=4]="FOUR"}(t.VertexAttributeSize||(t.VertexAttributeSize={})),function(e){e[e._2=2]="_2",e[e._4=4]="_4",e[e._8=8]="_8",e[e._16=16]="_16",e[e._32=32]="_32",e[e._64=64]="_64",e[e._128=128]="_128",e[e._256=256]="_256",e[e._512=512]="_512",e[e._1024=1024]="_1024",e[e._2048=2048]="_2048",e[e._4096=4096]="_4096"}(t.TextureSize||(t.TextureSize={})),function(e){e[e.ATLAS=0]="ATLAS",e[e.FONT=1]="FONT"}(t.ResourceType||(t.ResourceType={})),t.isResourceAttribute=function(e){return Boolean(e&&e.resource)},function(e){e[e.VERTEX=1]="VERTEX",e[e.FRAGMENT=2]="FRAGMENT",e[e.ALL=3]="ALL"}(t.ShaderInjectionTarget||(t.ShaderInjectionTarget={})),t.NOOP=function(){},t.whiteSpaceRegEx=/\s/g,t.whiteSpaceCharRegEx=/\s/,t.isWhiteSpace=t.whiteSpaceCharRegEx.test.bind(t.whiteSpaceCharRegEx),t.newLineRegEx=/\r\n|\n|\r/g,t.newLineCharRegEx=/\r\n|\n|\r/,t.isNewline=t.newLineCharRegEx.test.bind(t.newLineCharRegEx),t.createMaterialOptions=function(e){return e},function(e){e[e.NONE=0]="NONE",e[e.SINGLE=1]="SINGLE"}(t.PickType||(t.PickType={})),function(e){e[e.CHANGE=0]="CHANGE",e[e.INSERT=1]="INSERT",e[e.REMOVE=2]="REMOVE"}(t.InstanceDiffType||(t.InstanceDiffType={})),function(e){e[e.NO_WEBGL_CONTEXT=0]="NO_WEBGL_CONTEXT"}(t.SurfaceErrorType||(t.SurfaceErrorType={}))},function(e,t,n){"use strict";function r(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),r(n(48)),r(n(65)),r(n(71)),r(n(72)),r(n(132)),r(n(133)),r(n(73)),r(n(45)),r(n(45)),r(n(66)),r(n(49)),r(n(67)),r(n(47)),r(n(31)),r(n(134)),r(n(135)),r(n(9)),r(n(4))},function(e,t,n){(function(r){function i(){var e;try{e=t.storage.debug}catch(e){}return!e&&void 0!==r&&"env"in r&&(e=r.env.DEBUG),e}(t=e.exports=n(122)).log=function(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},t.formatArgs=function(e){var n=this.useColors;if(e[0]=(n?"%c":"")+this.namespace+(n?" %c":" ")+e[0]+(n?"%c ":" ")+"+"+t.humanize(this.diff),!n)return;var r="color: "+this.color;e.splice(1,0,r,"color: inherit");var i=0,o=0;e[0].replace(/%[a-zA-Z%]/g,function(e){"%%"!==e&&(i++,"%c"===e&&(o=i))}),e.splice(o,0,r)},t.save=function(e){try{null==e?t.storage.removeItem("debug"):t.storage.debug=e}catch(e){}},t.load=i,t.useColors=function(){if("undefined"!=typeof window&&window.process&&"renderer"===window.process.type)return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(e){}}(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}},t.enable(i())}).call(this,n(121))},function(e,t,n){"use strict";function r(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),r(n(27)),r(n(100)),r(n(8)),r(n(185))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Math.sqrt,i=Math.max,o=Math.min,A=Math.floor,a=Math.ceil;function s(e,t){return[e[0]+t[0]]}function c(e){return[a(e[0])]}function u(e,t){return e[0]===t[0]}function l(e){return[e[0]]}function h(e,t){return[e[0]/t[0]]}function d(e){for(var t=[],n=0,r=e.length;n<r;++n)t.push(e[n][0]);return t}function f(e){return[A(e[0])]}function p(e){return[1/e[0]]}function g(e,t){return[e[0]*t]}function B(e,t){return[e[0]-t[0]]}function w(e,t){return[i(e[0],t[0])]}function y(e,t){return[o(e[0],t[0])]}function v(e,t){return[e[0]*t[0]]}function m(e,t){return e[0]*t[0]}function b(e,t,n){return g(s(B(t,e),e),n)}function E(e){return r(m(e,e))}function T(e,t){return[e[0]+t[0],e[1]+t[1]]}function C(e){return[a(e[0]),a(e[1])]}function U(e){return[e[0],e[1]]}function _(e,t){return e[0]===t[0]&&e[1]===t[1]}function Q(e,t){return[e[0]/t[0],e[1]/t[1]]}function F(e){for(var t=[],n=0,r=e.length;n<r;++n){var i=e[n];t.push(i[0]),t.push(i[1])}return t}function x(e){return[A(e[0]),A(e[1])]}function I(e){return[1/e[0],1/e[1]]}function S(e,t){return[i(e[0],t[0]),i(e[1],t[1])]}function O(e,t){return[o(e[0],t[0]),o(e[1],t[1])]}function M(e,t){return[e[0]*t,e[1]*t]}function R(e,t){return[e[0]-t[0],e[1]-t[1]]}function N(e,t){return[e[0]*t[0],e[1]*t[1]]}function P(e,t){return e[0]*t[0]+e[1]*t[1]}function L(e,t,n){return M(T(R(t,e),e),n)}function H(e){return r(P(e,e))}function D(e,t){return[e[0]+t[0],e[1]+t[1],e[2]+t[2]]}function k(e){return[a(e[0]),a(e[1]),a(e[2])]}function z(e){return[e[0],e[1],e[2]]}function K(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]}function G(e,t){return[e[0]/t[0],e[1]/t[1],e[2]/t[2]]}function V(e){for(var t=[],n=0,r=e.length;n<r;++n){var i=e[n];t.push(i[0]),t.push(i[1]),t.push(i[2])}return t}function j(e){return[A(e[0]),A(e[1]),A(e[2])]}function X(e){return[1/e[0],1/e[1],1/e[2]]}function W(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function Y(e,t){return[e[0]-t[0],e[1]-t[1],e[2]-t[2]]}function J(e,t){return[e[0]*t[0],e[1]*t[1],e[2]*t[2]]}function q(e,t,n){return W(D(Y(t,e),e),n)}function $(e){return r(te(e,e))}function Z(e,t){return[i(e[0],t[0]),i(e[1],t[1]),i(e[2],t[2])]}function ee(e,t){return[o(e[0],t[0]),o(e[1],t[1]),o(e[2],t[2])]}function te(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function ne(e,t){return[e[0]+t[0],e[1]+t[1],e[2]+t[2],e[3]+t[3]]}function re(e){return[a(e[0]),a(e[1]),a(e[2]),a(e[3])]}function ie(e){return[e[0],e[1],e[2],e[3]]}function oe(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]}function Ae(e,t){return[e[0]/t[0],e[1]/t[1],e[2]/t[2],e[3]/t[3]]}function ae(e){for(var t=[],n=0,r=e.length;n<r;++n){var i=e[n];t.push(i[0]),t.push(i[1]),t.push(i[2]),t.push(i[3])}return t}function se(e){return[A(e[0]),A(e[1]),A(e[2]),A(e[3])]}function ce(e){return[1/e[0],1/e[1],1/e[2],1/e[3]]}function ue(e,t){return[e[0]*t,e[1]*t,e[2]*t,e[3]*t]}function le(e,t){return[e[0]-t[0],e[1]-t[1],e[2]-t[2],e[3]-t[3]]}function he(e,t){return[e[0]*t[0],e[1]*t[1],e[2]*t[2],e[3]*t[3]]}function de(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]}function fe(e,t,n){return ue(ne(le(t,e),e),n)}function pe(e){return r(de(e,e))}function ge(e,t){return[i(e[0],t[0]),i(e[1],t[1]),i(e[2],t[2]),i(e[3],t[3])]}function Be(e,t){return[o(e[0],t[0]),o(e[1],t[1]),o(e[2],t[2]),o(e[3],t[3])]}t.isVec1=function(e){return e&&Array.isArray(e)&&1===e.length},t.isVec2=function(e){return e&&Array.isArray(e)&&2===e.length},t.isVec3=function(e){return e&&Array.isArray(e)&&3===e.length},t.isVec4=function(e){return e&&Array.isArray(e)&&4===e.length},t.add1=s,t.ceil1=c,t.compare1=u,t.copy1=l,t.divide1=h,t.flatten1=d,t.floor1=f,t.inverse1=p,t.scale1=g,t.subtract1=B,t.max1=w,t.min1=y,t.multiply1=v,t.dot1=m,t.linear1=b,t.length1=E,t.vec1=function(e){for(var t,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];if(n=n||[],(t=Array.isArray(e)?e.slice(0,1):[e]).length<1)for(var i=0,o=n.length;i<o&&t.length<1;++i){var A=n[i];Array.isArray(A)?t.push.apply(t,A.slice(0,1-t.length)):t.push(A)}for(;t.length<1;)t.push(0);return t},t.add2=T,t.ceil2=C,t.copy2=U,t.compare2=_,t.divide2=Q,t.flatten2=F,t.floor2=x,t.inverse2=I,t.max2=S,t.min2=O,t.scale2=M,t.subtract2=R,t.multiply2=N,t.dot2=P,t.linear2=L,t.length2=H,t.vec2=function(e){for(var t,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];if(n=n||[],(t=Array.isArray(e)?e.slice(0,2):[e]).length<2)for(var i=0,o=n.length;i<o&&t.length<2;++i){var A=n[i];Array.isArray(A)?t.push.apply(t,A.slice(0,2-t.length)):t.push(A)}for(;t.length<2;)t.push(0);return t},t.add3=D,t.ceil3=k,t.copy3=z,t.compare3=K,t.divide3=G,t.flatten3=V,t.floor3=j,t.inverse3=X,t.scale3=W,t.subtract3=Y,t.multiply3=J,t.linear3=q,t.length3=$,t.max3=Z,t.min3=ee,t.dot3=te,t.vec3=function(e){for(var t,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];if(n=n||[],(t=Array.isArray(e)?e.slice(0,3):[e]).length<3)for(var i=0,o=n.length;i<o&&t.length<3;++i){var A=n[i];Array.isArray(A)?t.push.apply(t,A.slice(0,3-t.length)):t.push(A)}for(;t.length<3;)t.push(0);return t},t.add4=ne,t.ceil4=re,t.copy4=ie,t.compare4=oe,t.divide4=Ae,t.flatten4=ae,t.floor4=se,t.inverse4=ce,t.scale4=ue,t.subtract4=le,t.multiply4=he,t.dot4=de,t.linear4=fe,t.length4=pe,t.max4=ge,t.min4=Be,t.vec4=function(e){for(var t,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];if(n=n||[],(t=Array.isArray(e)?e.slice(0,4):[e]).length<4)for(var i=0,o=n.length;i<o&&t.length<4;++i){var A=n[i];Array.isArray(A)?t.push.apply(t,A.slice(0,4-t.length)):t.push(A)}for(;t.length<4;)t.push(0);return t},t.vec1Methods={add:s,ceil:c,copy:l,compare:u,divide:h,dot:m,flatten:d,floor:f,inverse:p,length:E,linear:b,max:w,min:y,multiply:v,scale:g,subtract:B},t.vec2Methods={add:T,ceil:C,copy:U,compare:_,divide:Q,dot:P,flatten:F,floor:x,inverse:I,length:H,linear:L,max:S,min:O,multiply:N,scale:M,subtract:R},t.vec3Methods={add:D,ceil:k,copy:z,compare:K,divide:G,dot:te,flatten:V,floor:j,inverse:X,length:$,linear:q,max:Z,min:ee,multiply:J,scale:W,subtract:Y},t.vec4Methods={add:ne,ceil:re,copy:ie,compare:oe,divide:Ae,dot:de,flatten:ae,floor:se,inverse:ce,length:pe,linear:fe,max:ge,min:Be,multiply:he,scale:ue,subtract:le},t.VecMath=function(e){return 1===e.length?t.vec1Methods:2===e.length?t.vec2Methods:3===e.length?t.vec3Methods:t.vec4Methods}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Math.min,i=Math.max,o=function(){function e(e){this.x=0,this.y=0,this.width=0,this.height=0,this.x=e.x||e.left||0,this.y=e.y||e.top||0,this.height=e.height||(e.bottom||0)-this.y||0,this.width=e.width||(e.right||0)-this.x||0}return Object.defineProperty(e.prototype,"area",{get:function(){return this.width*this.height},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"left",{get:function(){return this.x},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"mid",{get:function(){return[this.x+this.width/2,this.y+this.height/2]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"right",{get:function(){return this.x+this.width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"top",{get:function(){return this.y},enumerable:!0,configurable:!0}),e.emptyBounds=function(){return new e({height:0,width:0,x:0,y:0})},e.prototype.containsPoint=function(e){return!(e[0]<this.x||e[1]<this.y||e[0]>this.right||e[1]>this.bottom)},e.prototype.encapsulate=function(t){return t instanceof e?(t.x<this.x&&(this.width+=Math.abs(t.x-this.x),this.x=t.x),t.y<this.y&&(this.height+=Math.abs(t.y-this.y),this.y=t.y),this.right<t.right&&(this.width+=t.right-this.right),this.bottom<t.bottom&&(this.height+=t.bottom-this.bottom),!0):(t[0]<this.x&&(this.width+=this.x-t[0],this.x=t[0]),t[0]>this.right&&(this.width+=t[0]-this.x),t[1]<this.y&&(this.height+=this.y-t[1],this.y=t[1]),t[1]>this.bottom&&(this.height+=t[1]-this.y),!0)},e.prototype.encapsulateAll=function(t){if(!(t.length<=0)){var n=Number.MAX_SAFE_INTEGER,o=Number.MIN_SAFE_INTEGER,A=Number.MAX_SAFE_INTEGER,a=Number.MIN_SAFE_INTEGER;if(t[0]instanceof e)for(var s=t,c=0,u=s.length;c<u;++c){var l=s[c];n=r(n,l.left),o=i(o,l.right),A=r(A,l.top),a=i(a,l.bottom)}else{var h=t;for(c=0,u=h.length;c<u;++c){var d=h[c],f=d[0],p=d[1];n=r(n,f),o=i(o,f),A=r(A,p),a=i(a,p)}}this.x=Math.min(this.x,n),this.y=Math.min(this.y,A),this.width=Math.max(this.width,o-n),this.height=Math.max(this.height,a-A)}},e.prototype.fits=function(e){return this.width===e.width&&this.height===e.height?1:this.width>=e.width&&this.height>=e.height?2:0},e.prototype.hitBounds=function(e){return!(this.right<e.x||this.x>e.right||this.bottom<e.y||this.y>e.bottom)},e.prototype.isInside=function(e){return this.x>=e.x&&this.right<=e.right&&this.y>=e.y&&this.bottom<=e.bottom},Object.defineProperty(e.prototype,"location",{get:function(){return[this.x,this.y]},enumerable:!0,configurable:!0}),e.prototype.toString=function(){return"{x: "+this.x+" y:"+this.y+" w:"+this.width+" h:"+this.height+"}"},e}();t.Bounds=o},function(e,t,n){"use strict";function r(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),r(n(137)),r(n(138)),r(n(51)),r(n(76)),r(n(11)),r(n(77)),r(n(139)),r(n(140)),r(n(78)),r(n(63)),r(n(22)),r(n(33)),r(n(79)),r(n(23))},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.baseShaderModules=function(t){var n=e.prototype.baseShaderModules.call(this,t);return n.vs.push("world2D"),n},t}(n(21).Layer);t.Layer2D=o},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,A=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)A=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(A=(o<3?i(A):o>3?i(t,n,A):i(t,n))||A);return o>3&&A&&Object.defineProperty(t,n,A),A};Object.defineProperty(t,"__esModule",{value:!0});var i=n(101),o=n(27),A=0,a=function(){function e(t){this.changes={},this._easing=new Map,this.observableStorage=[],this._uid=e.newUID,this.reactivate=!1,this._id=t.id||"",this.active=t.active||this.active}return Object.defineProperty(e,"newUID",{get:function(){return A=++A%16777215},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"active",{get:function(){return this._active},set:function(e){this._active=e,this.reactivate=!0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"observableDisposer",{get:function(){var e=this;return function(){return delete e._observer}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"observer",{get:function(){return this._observer||null},set:function(e){var t=this._observer;t&&t!==e&&(this._easing.clear(),t.remove(this)),this._observer=e},enumerable:!0,configurable:!0}),e.prototype.clearEasing=function(){this._easing.clear(),delete this.easingId},Object.defineProperty(e.prototype,"easing",{get:function(){return this._easing},enumerable:!0,configurable:!0}),e.prototype.getEasing=function(e){if(this.easingId){var t=this.easingId["_"+e+"_end"];if(t){var n=this._easing.get(t);if(n instanceof i.EasingProps)return n}}},Object.defineProperty(e.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"uid",{get:function(){return this._uid},enumerable:!0,configurable:!0}),e.prototype.resourceTrigger=function(){console.warn("resourceTrigger called on an instance that did not override resourceTrigger. resourceTrigger MUST be overridden for instances","that utilize a resource. The observable that is tied to committing the resource should be 'triggered' in this method.")},r([o.observable],e.prototype,"_active",void 0),r([o.observable],e.prototype,"_uid",void 0),e}();t.Instance=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=1;t.uid=function(){return++r};var i=0;t.colorUID=function(){return++i%16777215}},function(e,t,n){"use strict";function r(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),r(n(68)),r(n(69)),r(n(70))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){!function(e){!function(e){e[e.RGBA4=0]="RGBA4",e[e.RGB565=1]="RGB565",e[e.RGB5_A1=2]="RGB5_A1"}(e.ColorBufferFormat||(e.ColorBufferFormat={})),function(e){e[e.DEPTH_COMPONENT16=0]="DEPTH_COMPONENT16",e[e.DEPTH_STENCIL=1]="DEPTH_STENCIL"}(e.DepthBufferFormat||(e.DepthBufferFormat={})),function(e){e[e.STENCIL_INDEX8=0]="STENCIL_INDEX8"}(e.StencilBufferFormat||(e.StencilBufferFormat={}))}(e.RenderTarget||(e.RenderTarget={})),function(e){!function(e){e[e.NoBlending=0]="NoBlending",e[e.NormalBlending=1]="NormalBlending",e[e.AdditiveBlending=2]="AdditiveBlending",e[e.SubtractiveBlending=3]="SubtractiveBlending",e[e.MultiplyBlending=4]="MultiplyBlending"}(e.Blending||(e.Blending={})),function(e){e[e.Zero=0]="Zero",e[e.One=1]="One",e[e.SrcColor=2]="SrcColor",e[e.OneMinusSrcColor=3]="OneMinusSrcColor",e[e.SrcAlpha=4]="SrcAlpha",e[e.OneMinusSrcAlpha=5]="OneMinusSrcAlpha",e[e.DstAlpha=6]="DstAlpha",e[e.OneMinusDstAlpha=7]="OneMinusDstAlpha",e[e.DstColor=8]="DstColor",e[e.OneMinusDstColor=9]="OneMinusDstColor"}(e.BlendingDstFactor||(e.BlendingDstFactor={})),function(e){e[e.Zero=0]="Zero",e[e.One=1]="One",e[e.SrcColor=2]="SrcColor",e[e.OneMinusSrcColor=3]="OneMinusSrcColor",e[e.SrcAlpha=4]="SrcAlpha",e[e.OneMinusSrcAlpha=5]="OneMinusSrcAlpha",e[e.DstAlpha=6]="DstAlpha",e[e.OneMinusDstAlpha=7]="OneMinusDstAlpha",e[e.DstColor=8]="DstColor",e[e.OneMinusDstColor=9]="OneMinusDstColor",e[e.SrcAlphaSaturate=10]="SrcAlphaSaturate"}(e.BlendingSrcFactor||(e.BlendingSrcFactor={})),function(e){e[e.Add=0]="Add",e[e.Subtract=1]="Subtract",e[e.ReverseSubtract=2]="ReverseSubtract"}(e.BlendingEquations||(e.BlendingEquations={})),function(e){e[e.NEVER=0]="NEVER",e[e.LESS=1]="LESS",e[e.EQUAL=2]="EQUAL",e[e.LESS_OR_EQUAL=3]="LESS_OR_EQUAL",e[e.GREATER=4]="GREATER",e[e.NOTEQUAL=5]="NOTEQUAL",e[e.GREATER_OR_EQUAL=6]="GREATER_OR_EQUAL",e[e.ALWAYS=7]="ALWAYS"}(e.DepthFunctions||(e.DepthFunctions={})),function(e){e[e.NONE=0]="NONE",e[e.CW=1]="CW",e[e.CCW=2]="CCW",e[e.BOTH=3]="BOTH"}(e.CullSide||(e.CullSide={}))}(e.Material||(e.Material={})),function(e){!function(e){e[e.LINE_LOOP=0]="LINE_LOOP",e[e.LINE_STRIP=1]="LINE_STRIP",e[e.LINES=2]="LINES",e[e.POINTS=3]="POINTS",e[e.TRIANGLE_FAN=4]="TRIANGLE_FAN",e[e.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",e[e.TRIANGLES=6]="TRIANGLES"}(e.DrawMode||(e.DrawMode={}))}(e.Model||(e.Model={})),function(e){!function(e){e[e.TEXTURE_2D=0]="TEXTURE_2D",e[e.CUBE_MAP=1]="CUBE_MAP"}(e.TextureBindingTarget||(e.TextureBindingTarget={})),function(e){e[e.REPEAT=0]="REPEAT",e[e.CLAMP_TO_EDGE=1]="CLAMP_TO_EDGE",e[e.MIRRORED_REPEAT=2]="MIRRORED_REPEAT"}(e.Wrapping||(e.Wrapping={})),function(e){e[e.Nearest=0]="Nearest",e[e.NearestMipMapNearest=1]="NearestMipMapNearest",e[e.NearestMipMapLinear=2]="NearestMipMapLinear",e[e.Linear=3]="Linear",e[e.LinearMipMapNearest=4]="LinearMipMapNearest",e[e.LinearMipMapLinear=5]="LinearMipMapLinear"}(e.TextureMinFilter||(e.TextureMinFilter={})),function(e){e[e.Nearest=0]="Nearest",e[e.Linear=1]="Linear"}(e.TextureMagFilter||(e.TextureMagFilter={})),function(e){e[e.UnsignedByte=0]="UnsignedByte",e[e.UnsignedShort_5_6_5=1]="UnsignedShort_5_6_5",e[e.UnsignedShort_4_4_4_4=2]="UnsignedShort_4_4_4_4",e[e.UnsignedShort_5_5_5_1=3]="UnsignedShort_5_5_5_1",e[e.UnsignedShort=4]="UnsignedShort",e[e.UnsignedInt=5]="UnsignedInt",e[e.UnsignedInt_24_8=6]="UnsignedInt_24_8",e[e.Byte=7]="Byte",e[e.Short=8]="Short",e[e.Int=9]="Int",e[e.Float=10]="Float",e[e.HalfFloat=11]="HalfFloat",e[e.UnsignedInt_2_10_10_10_REV=12]="UnsignedInt_2_10_10_10_REV",e[e.UnsignedInt_10F_11F_11F_REV=13]="UnsignedInt_10F_11F_11F_REV",e[e.UnsignedInt_5_9_9_9_REV=14]="UnsignedInt_5_9_9_9_REV",e[e.Float32UnsignedInt_24_8_REV=15]="Float32UnsignedInt_24_8_REV"}(e.SourcePixelFormat||(e.SourcePixelFormat={})),function(e){e[e.Alpha=0]="Alpha",e[e.DepthComponent=1]="DepthComponent",e[e.DepthStencil=2]="DepthStencil",e[e.Luminance=3]="Luminance",e[e.LuminanceAlpha=4]="LuminanceAlpha",e[e.RGB=5]="RGB",e[e.RGBA=6]="RGBA",e[e.RGBE=7]="RGBE"}(e.TexelDataType||(e.TexelDataType={})),function(e){e[e.ONE=1]="ONE",e[e.TWO=2]="TWO",e[e.FOUR=4]="FOUR",e[e.EIGHT=8]="EIGHT"}(e.PackAlignment||(e.PackAlignment={})),function(e){e[e.ONE=1]="ONE",e[e.TWO=2]="TWO",e[e.FOUR=4]="FOUR",e[e.EIGHT=8]="EIGHT"}(e.UnpackAlignment||(e.UnpackAlignment={}))}(e.Texture||(e.Texture={})),function(e){!function(e){e[e.ALPHA=0]="ALPHA",e[e.RGB=1]="RGB",e[e.RGBA=2]="RGBA"}(e.ReadFilter||(e.ReadFilter={})),function(e){e[e.UNSIGNED_BYTE=0]="UNSIGNED_BYTE",e[e.UNSIGNED_SHORT_5_6_5=1]="UNSIGNED_SHORT_5_6_5",e[e.UNSIGNED_SHORT_4_4_4_4=2]="UNSIGNED_SHORT_4_4_4_4",e[e.UNSIGNED_SHORT_5_5_5_1=3]="UNSIGNED_SHORT_5_5_5_1",e[e.FLOAT=4]="FLOAT"}(e.ReadTargetArrayFormat||(e.ReadTargetArrayFormat={}))}(e.Renderer||(e.Renderer={}))}(t.GLSettings||(t.GLSettings={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var A,a=e[Symbol.iterator]();!(r=(A=a.next()).done)&&(n.push(A.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{!r&&a.return&&a.return()}finally{if(i)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var o=/^#([a-f0-9]{3})$/i,A=function(e){var t=e.match(o);return!!t&&[parseInt(t[1][0]+t[1][0],16),parseInt(t[1][1]+t[1][1],16),parseInt(t[1][2]+t[1][2],16),null]},a=/^#([a-f0-9]{6})$/i,s=function(e){var t=e.match(a);return!!t&&[parseInt(t[1].substring(0,2),16),parseInt(t[1].substring(2,4),16),parseInt(t[1].substring(4,6),16),null]},c=/^rgb\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*\)$/,u=function(e){var t=e.match(c);return!!t&&[Number(t[1]),Number(t[2]),Number(t[3]),null]},l=/^rgba\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d?\.?\d+)\s*\)$/,h=function(e){var t=e.match(l);return!!(t&&t.length>4)&&[Number(t[1]),Number(t[2]),Number(t[3]),Number(t[4])]},d=function(e){return[Math.min(e[0],255),Math.min(e[1],255),Math.min(e[2],255),e.length>3?e[3]:null]},f=function(e){var t=g[e.toLowerCase()];return t||!1},p=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var n=Array.isArray(t)?d(t):A(t)||u(t)||h(t)||f(t)||s(t)||[0,0,0,null],i=r(n,4),o=i[0],a=i[1],c=i[2],l=i[3];this.r=o,this.g=a,this.b=c,this.a=l}return i(e,[{key:"isTransparent",value:function(){return 0===this.a}},{key:"toString",value:function(){return null!==this.a&&1!==this.a?"rgba("+this.r+","+this.g+","+this.b+","+this.a+")":"rgb("+this.r+","+this.g+","+this.b+")"}}]),e}();t.default=p;var g={transparent:[0,0,0,0],aliceblue:[240,248,255,null],antiquewhite:[250,235,215,null],aqua:[0,255,255,null],aquamarine:[127,255,212,null],azure:[240,255,255,null],beige:[245,245,220,null],bisque:[255,228,196,null],black:[0,0,0,null],blanchedalmond:[255,235,205,null],blue:[0,0,255,null],blueviolet:[138,43,226,null],brown:[165,42,42,null],burlywood:[222,184,135,null],cadetblue:[95,158,160,null],chartreuse:[127,255,0,null],chocolate:[210,105,30,null],coral:[255,127,80,null],cornflowerblue:[100,149,237,null],cornsilk:[255,248,220,null],crimson:[220,20,60,null],cyan:[0,255,255,null],darkblue:[0,0,139,null],darkcyan:[0,139,139,null],darkgoldenrod:[184,134,11,null],darkgray:[169,169,169,null],darkgreen:[0,100,0,null],darkgrey:[169,169,169,null],darkkhaki:[189,183,107,null],darkmagenta:[139,0,139,null],darkolivegreen:[85,107,47,null],darkorange:[255,140,0,null],darkorchid:[153,50,204,null],darkred:[139,0,0,null],darksalmon:[233,150,122,null],darkseagreen:[143,188,143,null],darkslateblue:[72,61,139,null],darkslategray:[47,79,79,null],darkslategrey:[47,79,79,null],darkturquoise:[0,206,209,null],darkviolet:[148,0,211,null],deeppink:[255,20,147,null],deepskyblue:[0,191,255,null],dimgray:[105,105,105,null],dimgrey:[105,105,105,null],dodgerblue:[30,144,255,null],firebrick:[178,34,34,null],floralwhite:[255,250,240,null],forestgreen:[34,139,34,null],fuchsia:[255,0,255,null],gainsboro:[220,220,220,null],ghostwhite:[248,248,255,null],gold:[255,215,0,null],goldenrod:[218,165,32,null],gray:[128,128,128,null],green:[0,128,0,null],greenyellow:[173,255,47,null],grey:[128,128,128,null],honeydew:[240,255,240,null],hotpink:[255,105,180,null],indianred:[205,92,92,null],indigo:[75,0,130,null],ivory:[255,255,240,null],khaki:[240,230,140,null],lavender:[230,230,250,null],lavenderblush:[255,240,245,null],lawngreen:[124,252,0,null],lemonchiffon:[255,250,205,null],lightblue:[173,216,230,null],lightcoral:[240,128,128,null],lightcyan:[224,255,255,null],lightgoldenrodyellow:[250,250,210,null],lightgray:[211,211,211,null],lightgreen:[144,238,144,null],lightgrey:[211,211,211,null],lightpink:[255,182,193,null],lightsalmon:[255,160,122,null],lightseagreen:[32,178,170,null],lightskyblue:[135,206,250,null],lightslategray:[119,136,153,null],lightslategrey:[119,136,153,null],lightsteelblue:[176,196,222,null],lightyellow:[255,255,224,null],lime:[0,255,0,null],limegreen:[50,205,50,null],linen:[250,240,230,null],magenta:[255,0,255,null],maroon:[128,0,0,null],mediumaquamarine:[102,205,170,null],mediumblue:[0,0,205,null],mediumorchid:[186,85,211,null],mediumpurple:[147,112,219,null],mediumseagreen:[60,179,113,null],mediumslateblue:[123,104,238,null],mediumspringgreen:[0,250,154,null],mediumturquoise:[72,209,204,null],mediumvioletred:[199,21,133,null],midnightblue:[25,25,112,null],mintcream:[245,255,250,null],mistyrose:[255,228,225,null],moccasin:[255,228,181,null],navajowhite:[255,222,173,null],navy:[0,0,128,null],oldlace:[253,245,230,null],olive:[128,128,0,null],olivedrab:[107,142,35,null],orange:[255,165,0,null],orangered:[255,69,0,null],orchid:[218,112,214,null],palegoldenrod:[238,232,170,null],palegreen:[152,251,152,null],paleturquoise:[175,238,238,null],palevioletred:[219,112,147,null],papayawhip:[255,239,213,null],peachpuff:[255,218,185,null],peru:[205,133,63,null],pink:[255,192,203,null],plum:[221,160,221,null],powderblue:[176,224,230,null],purple:[128,0,128,null],rebeccapurple:[102,51,153,null],red:[255,0,0,null],rosybrown:[188,143,143,null],royalblue:[65,105,225,null],saddlebrown:[139,69,19,null],salmon:[250,128,114,null],sandybrown:[244,164,96,null],seagreen:[46,139,87,null],seashell:[255,245,238,null],sienna:[160,82,45,null],silver:[192,192,192,null],skyblue:[135,206,235,null],slateblue:[106,90,205,null],slategray:[112,128,144,null],slategrey:[112,128,144,null],snow:[255,250,250,null],springgreen:[0,255,127,null],steelblue:[70,130,180,null],tan:[210,180,140,null],teal:[0,128,128,null],thistle:[216,191,216,null],tomato:[255,99,71,null],turquoise:[64,224,208,null],violet:[238,130,238,null],wheat:[245,222,179,null],white:[255,255,255,null],whitesmoke:[245,245,245,null],yellow:[255,255,0,null],yellowgreen:[154,205,50,null]};t.TRANSPARENT=new p([0,0,0,0])},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseBoundCurves=t.calculatePaddingBoxPath=t.calculateBorderBoxPath=t.parsePathForBorder=t.parseDocumentSize=t.calculateContentBox=t.calculatePaddingBox=t.parseBounds=t.Bounds=void 0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=A(n(36)),o=A(n(149));function A(e){return e&&e.__esModule?e:{default:e}}var a=t.Bounds=function(){function e(t,n,r,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.left=t,this.top=n,this.width=r,this.height=i}return r(e,null,[{key:"fromClientRect",value:function(t,n,r){return new e(t.left+n,t.top+r,t.width,t.height)}}]),e}(),s=(t.parseBounds=function(e,t,n){return a.fromClientRect(e.getBoundingClientRect(),t,n)},t.calculatePaddingBox=function(e,t){return new a(e.left+t[3].borderWidth,e.top+t[0].borderWidth,e.width-(t[1].borderWidth+t[3].borderWidth),e.height-(t[0].borderWidth+t[2].borderWidth))},t.calculateContentBox=function(e,t,n){var r=t[0].value,i=t[1].value,o=t[2].value,A=t[3].value;return new a(e.left+A+n[3].borderWidth,e.top+r+n[0].borderWidth,e.width-(n[1].borderWidth+n[3].borderWidth+A+i),e.height-(n[0].borderWidth+n[2].borderWidth+r+o))},t.parseDocumentSize=function(e){var t=e.body,n=e.documentElement;if(!t||!n)throw new Error("");var r=Math.max(Math.max(t.scrollWidth,n.scrollWidth),Math.max(t.offsetWidth,n.offsetWidth),Math.max(t.clientWidth,n.clientWidth)),i=Math.max(Math.max(t.scrollHeight,n.scrollHeight),Math.max(t.offsetHeight,n.offsetHeight),Math.max(t.clientHeight,n.clientHeight));return new a(0,0,r,i)},t.parsePathForBorder=function(e,t){switch(t){case 0:return s(e.topLeftOuter,e.topLeftInner,e.topRightOuter,e.topRightInner);case 1:return s(e.topRightOuter,e.topRightInner,e.bottomRightOuter,e.bottomRightInner);case 2:return s(e.bottomRightOuter,e.bottomRightInner,e.bottomLeftOuter,e.bottomLeftInner);case 3:default:return s(e.bottomLeftOuter,e.bottomLeftInner,e.topLeftOuter,e.topLeftInner)}},function(e,t,n,r){var i=[];return e instanceof o.default?i.push(e.subdivide(.5,!1)):i.push(e),n instanceof o.default?i.push(n.subdivide(.5,!0)):i.push(n),r instanceof o.default?i.push(r.subdivide(.5,!0).reverse()):i.push(r),t instanceof o.default?i.push(t.subdivide(.5,!1).reverse()):i.push(t),i}),c=(t.calculateBorderBoxPath=function(e){return[e.topLeftOuter,e.topRightOuter,e.bottomRightOuter,e.bottomLeftOuter]},t.calculatePaddingBoxPath=function(e){return[e.topLeftInner,e.topRightInner,e.bottomRightInner,e.bottomLeftInner]},t.parseBoundCurves=function(e,t,n){var r=e.width/2,o=e.height/2,A=n[c.TOP_LEFT][0].getAbsoluteValue(e.width)<r?n[c.TOP_LEFT][0].getAbsoluteValue(e.width):r,a=n[c.TOP_LEFT][1].getAbsoluteValue(e.height)<o?n[c.TOP_LEFT][1].getAbsoluteValue(e.height):o,s=n[c.TOP_RIGHT][0].getAbsoluteValue(e.width)<r?n[c.TOP_RIGHT][0].getAbsoluteValue(e.width):r,l=n[c.TOP_RIGHT][1].getAbsoluteValue(e.height)<o?n[c.TOP_RIGHT][1].getAbsoluteValue(e.height):o,h=n[c.BOTTOM_RIGHT][0].getAbsoluteValue(e.width)<r?n[c.BOTTOM_RIGHT][0].getAbsoluteValue(e.width):r,d=n[c.BOTTOM_RIGHT][1].getAbsoluteValue(e.height)<o?n[c.BOTTOM_RIGHT][1].getAbsoluteValue(e.height):o,f=n[c.BOTTOM_LEFT][0].getAbsoluteValue(e.width)<r?n[c.BOTTOM_LEFT][0].getAbsoluteValue(e.width):r,p=n[c.BOTTOM_LEFT][1].getAbsoluteValue(e.height)<o?n[c.BOTTOM_LEFT][1].getAbsoluteValue(e.height):o,g=e.width-s,B=e.height-d,w=e.width-h,y=e.height-p;return{topLeftOuter:A>0||a>0?u(e.left,e.top,A,a,c.TOP_LEFT):new i.default(e.left,e.top),topLeftInner:A>0||a>0?u(e.left+t[3].borderWidth,e.top+t[0].borderWidth,Math.max(0,A-t[3].borderWidth),Math.max(0,a-t[0].borderWidth),c.TOP_LEFT):new i.default(e.left+t[3].borderWidth,e.top+t[0].borderWidth),topRightOuter:s>0||l>0?u(e.left+g,e.top,s,l,c.TOP_RIGHT):new i.default(e.left+e.width,e.top),topRightInner:s>0||l>0?u(e.left+Math.min(g,e.width+t[3].borderWidth),e.top+t[0].borderWidth,g>e.width+t[3].borderWidth?0:s-t[3].borderWidth,l-t[0].borderWidth,c.TOP_RIGHT):new i.default(e.left+e.width-t[1].borderWidth,e.top+t[0].borderWidth),bottomRightOuter:h>0||d>0?u(e.left+w,e.top+B,h,d,c.BOTTOM_RIGHT):new i.default(e.left+e.width,e.top+e.height),bottomRightInner:h>0||d>0?u(e.left+Math.min(w,e.width-t[3].borderWidth),e.top+Math.min(B,e.height+t[0].borderWidth),Math.max(0,h-t[1].borderWidth),d-t[2].borderWidth,c.BOTTOM_RIGHT):new i.default(e.left+e.width-t[1].borderWidth,e.top+e.height-t[2].borderWidth),bottomLeftOuter:f>0||p>0?u(e.left,e.top+y,f,p,c.BOTTOM_LEFT):new i.default(e.left,e.top+e.height),bottomLeftInner:f>0||p>0?u(e.left+t[3].borderWidth,e.top+y,Math.max(0,f-t[3].borderWidth),p-t[2].borderWidth,c.BOTTOM_LEFT):new i.default(e.left+t[3].borderWidth,e.top+e.height-t[2].borderWidth)}},{TOP_LEFT:0,TOP_RIGHT:1,BOTTOM_RIGHT:2,BOTTOM_LEFT:3}),u=function(e,t,n,r,A){var a=(Math.sqrt(2)-1)/3*4,s=n*a,u=r*a,l=e+n,h=t+r;switch(A){case c.TOP_LEFT:return new o.default(new i.default(e,h),new i.default(e,h-u),new i.default(l-s,t),new i.default(l,t));case c.TOP_RIGHT:return new o.default(new i.default(e,t),new i.default(e+s,t),new i.default(l,h-u),new i.default(l,h));case c.BOTTOM_RIGHT:return new o.default(new i.default(l,t),new i.default(l,t+u),new i.default(e+s,h),new i.default(e,h));case c.BOTTOM_LEFT:default:return new o.default(new i.default(l,h),new i.default(l-s,h),new i.default(e,t+u),new i.default(e,t))}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.calculateLengthFromValueWithUnit=t.LENGTH_TYPE=void 0;var r,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(17);(r=o)&&r.__esModule;var A=t.LENGTH_TYPE={PX:0,PERCENTAGE:1},a=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.type="%"===t.substr(t.length-1)?A.PERCENTAGE:A.PX;var n=parseFloat(t);this.value=isNaN(n)?0:n}return i(e,[{key:"isPercentage",value:function(){return this.type===A.PERCENTAGE}},{key:"getAbsoluteValue",value:function(e){return this.isPercentage()?e*(this.value/100):this.value}}],[{key:"create",value:function(t){return new e(t)}}]),e}();t.default=a;t.calculateLengthFromValueWithUnit=function(e,t,n){switch(n){case"px":case"%":return new a(t+n);case"em":case"rem":var r=new a(t);return r.value*="em"===n?parseFloat(e.style.font.fontSize):function e(t){var n=t.parent;return n?e(n):parseFloat(t.style.font.fontSize)}(e),r;default:return new a("0")}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=n(23),o=n(0),A=n(184),a=n(186),s=n(59),c=n(2)("performance");function u(e,t,n,A){var a=r.UNIFORM,s=0;if(void 0!==t.bufferType)return t.bufferType;if(i.WebGLStat.HARDWARE_INSTANCING){for(var u=0,l=n.length;u<l;++u){var h=n[u];s+=Math.ceil(h.size/4)}for(u=0,l=A.length;u<l;++u){h=A[u];s+=Math.ceil(o.instanceAttributeSizeFloatCount[h.size||1]/4)}if(s>i.WebGLStat.MAX_VERTEX_ATTRIBUTES){s=0;for(u=0,l=A.length;u<l;++u){h=A[u];s=Math.max(s,h.block||0)}for(u=0,l=n.length;u<l;++u){h=n[u];s+=Math.ceil(h.size/4)}s<i.WebGLStat.MAX_VERTEX_ATTRIBUTES&&(a=r.INSTANCE_ATTRIBUTE_PACKING,c("Performance Issue (Moderate):\n          Layer %o is utilizing too many vertex attributes and is now using vertex packing.\n          Max Vertex units %o\n          Used Vertex units %o\n          Instance Attributes %o\n          Vertex Attributes %o",t.id,i.WebGLStat.MAX_VERTEX_ATTRIBUTES,s,A,n))}else a=r.INSTANCE_ATTRIBUTE}return a===r.UNIFORM&&(c("Performance Issue (High):\n      Layer %o is utilizing too many vertex attributes and is now using a uniform buffer.\n      Max Vertex units %o\n      Used Vertex units %o\n      Instance Attributes %o\n      Vertex Attributes %o",t.id,i.WebGLStat.MAX_VERTEX_ATTRIBUTES,s,A,n),a=r.UNIFORM),t.setBufferType(a),a}!function(e){e[e.UNIFORM=0]="UNIFORM",e[e.INSTANCE_ATTRIBUTE=1]="INSTANCE_ATTRIBUTE",e[e.INSTANCE_ATTRIBUTE_PACKING=2]="INSTANCE_ATTRIBUTE_PACKING"}(r=t.LayerBufferType||(t.LayerBufferType={})),t.getLayerBufferType=u,t.makeLayerBufferManager=function(e,t,n){switch(u(0,t,t.vertexAttributes,t.instanceAttributes)){case r.INSTANCE_ATTRIBUTE:t.setBufferManager(new A.InstanceAttributeBufferManager(t,n));break;case r.INSTANCE_ATTRIBUTE_PACKING:t.setBufferManager(new a.InstanceAttributePackingBufferManager(t,n));break;default:t.setBufferManager(new s.UniformBufferManager(t,n))}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(5),i=n(1);t.subTextureIOValue=function(e){return e?[e.atlasTL[0],e.atlasTL[1],e.atlasBR[0],e.atlasBR[1]]:[0,0,0,0]};var o=function(){function e(e){this._uid=i.uid(),this.aspectRatio=1,this.atlasTL=[0,0],this.atlasTR=[0,0],this.atlasBL=[0,0],this.atlasBR=[0,0],this.heightOnAtlas=0,this.isValid=!1,this.pixelWidth=0,this.pixelHeight=0,this.texture=null,this.widthOnAtlas=0,Object.assign(this,e)}return Object.defineProperty(e.prototype,"uid",{get:function(){return this._uid},enumerable:!0,configurable:!0}),e.fromRegion=function(t,n){if(!t.data)return null;var i=n.x/t.data.width,o=n.y/t.data.height,A=n.width/t.data.width,a=n.height/t.data.height,s=new r.Bounds({bottom:o+a,left:i,right:i+A,top:o}),c=s.bottom,u=s.y,l=s.x,h=s.x+s.width,d=new e;return d.atlasTL=[l,u],d.atlasBR=[h,c],d.atlasBL=[l,c],d.atlasTR=[h,u],d},e.prototype.update=function(){this.texture&&this.source&&this.atlasRegion&&this.texture.update(this.source,this.atlasRegion)},e.prototype.toString=function(){return JSON.stringify({atlas:{TL:this.atlasTL,TR:this.atlasTR,BL:this.atlasBL,BR:this.atlasBR},width:this.pixelWidth,height:this.pixelHeight},null,2)},e}();t.SubTexture=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(12),A=(r=o)&&r.__esModule?r:{default:r},a=n(18),s=n(26),c=n(53),u=n(150),l=n(151),h=n(152),d=n(153),f=n(154),p=n(155),g=n(37),B=n(156),w=n(157),y=n(86),v=n(85),m=n(87),b=n(52),E=n(158),T=n(88),C=n(159),U=n(160),_=n(161),Q=n(162),F=n(13),x=n(89),I=n(55);var S=["INPUT","TEXTAREA","SELECT"],O=function(){function e(t,n,r,i){var o=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.parent=n,this.tagName=t.tagName,this.index=i,this.childNodes=[],this.listItems=[],"number"==typeof t.start&&(this.listStart=t.start);var a=t.ownerDocument.defaultView,O=a.pageXOffset,R=a.pageYOffset,N=a.getComputedStyle(t,null),P=(0,l.parseDisplay)(N.display),L="radio"===t.type||"checkbox"===t.type,H=(0,m.parsePosition)(N.position);if(this.style={background:L?x.INPUT_BACKGROUND:(0,s.parseBackground)(N,r),border:L?x.INPUT_BORDERS:(0,c.parseBorder)(N),borderRadius:(t instanceof a.HTMLInputElement||t instanceof HTMLInputElement)&&L?(0,x.getInputBorderRadius)(t):(0,u.parseBorderRadius)(N),color:L?x.INPUT_COLOR:new A.default(N.color),display:P,float:(0,h.parseCSSFloat)(N.float),font:(0,d.parseFont)(N),letterSpacing:(0,f.parseLetterSpacing)(N.letterSpacing),listStyle:P===l.DISPLAY.LIST_ITEM?(0,g.parseListStyle)(N):null,lineBreak:(0,p.parseLineBreak)(N.lineBreak),margin:(0,B.parseMargin)(N),opacity:parseFloat(N.opacity),overflow:-1===S.indexOf(t.tagName)?(0,w.parseOverflow)(N.overflow):w.OVERFLOW.HIDDEN,overflowWrap:(0,y.parseOverflowWrap)(N.overflowWrap?N.overflowWrap:N.wordWrap),padding:(0,v.parsePadding)(N),position:H,textDecoration:(0,b.parseTextDecoration)(N),textShadow:(0,E.parseTextShadow)(N.textShadow),textTransform:(0,T.parseTextTransform)(N.textTransform),transform:(0,C.parseTransform)(N),visibility:(0,U.parseVisibility)(N.visibility),wordBreak:(0,_.parseWordBreak)(N.wordBreak),zIndex:(0,Q.parseZIndex)(H!==m.POSITION.STATIC?N.zIndex:"auto")},this.isTransformed()&&(t.style.transform="matrix(1,0,0,1,0,0)"),P===l.DISPLAY.LIST_ITEM){var D=(0,I.getListOwner)(this);if(D){var k=D.listItems.length;D.listItems.push(this),this.listIndex=t.hasAttribute("value")&&"number"==typeof t.value?t.value:0===k?"number"==typeof D.listStart?D.listStart:1:D.listItems[k-1].listIndex+1}}"IMG"===t.tagName&&t.addEventListener("load",function(){o.bounds=(0,F.parseBounds)(t,O,R),o.curvedBounds=(0,F.parseBoundCurves)(o.bounds,o.style.border,o.style.borderRadius)}),this.image=M(t,r),this.bounds=L?(0,x.reformatInputBounds)((0,F.parseBounds)(t,O,R)):(0,F.parseBounds)(t,O,R),this.curvedBounds=(0,F.parseBoundCurves)(this.bounds,this.style.border,this.style.borderRadius)}return i(e,[{key:"getClipPaths",value:function(){var e=this.parent?this.parent.getClipPaths():[];return this.style.overflow!==w.OVERFLOW.VISIBLE?e.concat([(0,F.calculatePaddingBoxPath)(this.curvedBounds)]):e}},{key:"isInFlow",value:function(){return this.isRootElement()&&!this.isFloating()&&!this.isAbsolutelyPositioned()}},{key:"isVisible",value:function(){return!(0,a.contains)(this.style.display,l.DISPLAY.NONE)&&this.style.opacity>0&&this.style.visibility===U.VISIBILITY.VISIBLE}},{key:"isAbsolutelyPositioned",value:function(){return this.style.position!==m.POSITION.STATIC&&this.style.position!==m.POSITION.RELATIVE}},{key:"isPositioned",value:function(){return this.style.position!==m.POSITION.STATIC}},{key:"isFloating",value:function(){return this.style.float!==h.FLOAT.NONE}},{key:"isRootElement",value:function(){return null===this.parent}},{key:"isTransformed",value:function(){return null!==this.style.transform}},{key:"isPositionedWithZIndex",value:function(){return this.isPositioned()&&!this.style.zIndex.auto}},{key:"isInlineLevel",value:function(){return(0,a.contains)(this.style.display,l.DISPLAY.INLINE)||(0,a.contains)(this.style.display,l.DISPLAY.INLINE_BLOCK)||(0,a.contains)(this.style.display,l.DISPLAY.INLINE_FLEX)||(0,a.contains)(this.style.display,l.DISPLAY.INLINE_GRID)||(0,a.contains)(this.style.display,l.DISPLAY.INLINE_LIST_ITEM)||(0,a.contains)(this.style.display,l.DISPLAY.INLINE_TABLE)}},{key:"isInlineBlockOrInlineTable",value:function(){return(0,a.contains)(this.style.display,l.DISPLAY.INLINE_BLOCK)||(0,a.contains)(this.style.display,l.DISPLAY.INLINE_TABLE)}}]),e}();t.default=O;var M=function(e,t){if(e instanceof e.ownerDocument.defaultView.SVGSVGElement||e instanceof SVGSVGElement){var n=new XMLSerializer;return t.loadImage("data:image/svg+xml,"+encodeURIComponent(n.serializeToString(e)))}switch(e.tagName){case"IMG":var r=e;return t.loadImage(r.currentSrc||r.src);case"CANVAS":var i=e;return t.loadCanvas(i);case"IFRAME":var o=e.getAttribute("data-html2canvas-internal-iframe-key");if(o)return o}return null}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.contains=function(e,t){return 0!=(e&t)},t.distance=function(e,t){return Math.sqrt(e*e+t*t)},t.copyCSSStyles=function(e,t){for(var n=e.length-1;n>=0;n--){var r=e.item(n);"content"!==r&&t.style.setProperty(r,e.getPropertyValue(r))}return t},t.SMALL_IMAGE="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.BottomLeft=0]="BottomLeft",e[e.BottomMiddle=1]="BottomMiddle",e[e.BottomRight=2]="BottomRight",e[e.Custom=3]="Custom",e[e.Middle=4]="Middle",e[e.MiddleLeft=5]="MiddleLeft",e[e.MiddleRight=6]="MiddleRight",e[e.TopLeft=7]="TopLeft",e[e.TopMiddle=8]="TopMiddle",e[e.TopRight=9]="TopRight"}(t.AnchorType||(t.AnchorType={})),function(e){e[e.ALWAYS=1]="ALWAYS",e[e.BOUND_MAX=2]="BOUND_MAX",e[e.NEVER=3]="NEVER"}(t.ScaleMode||(t.ScaleMode={}))},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e){this._key=e.key}return Object.defineProperty(e.prototype,"id",{get:function(){return this._key},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"key",{get:function(){return this._key},enumerable:!0,configurable:!0}),e}();t.IdentifyByKey=o;var A=function(e){function t(t){var n=e.call(this,t)||this;return n.data=t.data,n}return i(t,e),t}(o);t.IdentifiableData=A},function(e,t,n){"use strict";function r(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),r(n(136)),r(n(64)),r(n(103)),r(n(104)),r(n(28)),r(n(105)),r(n(60)),r(n(46)),r(n(44))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),i=n(11),o=function(){function e(e){this._uid=r.uid(),this._flipY=!1,this._format=i.GLSettings.Texture.TexelDataType.RGBA,this._generateMipmaps=!1,this._magFilter=i.GLSettings.Texture.TextureMagFilter.Linear,this._minFilter=i.GLSettings.Texture.TextureMinFilter.LinearMipMapLinear,this.needsDataUpload=!1,this.needsPartialDataUpload=!1,this.needsSettingsUpdate=!1,this._packAlignment=i.GLSettings.Texture.PackAlignment.FOUR,this._premultiplyAlpha=!1,this._type=i.GLSettings.Texture.SourcePixelFormat.UnsignedByte,this._unpackAlignment=i.GLSettings.Texture.UnpackAlignment.FOUR,this._updateRegions=[],this._wrapHorizontal=i.GLSettings.Texture.Wrapping.CLAMP_TO_EDGE,this._wrapVertical=i.GLSettings.Texture.Wrapping.CLAMP_TO_EDGE,this.anisotropy=e.anisotropy||this.anisotropy,this.data=e.data||this.data,this.flipY=e.flipY||this.flipY,this.format=e.format||this.format,this.generateMipMaps=e.generateMipMaps||this.generateMipMaps,this.magFilter=e.magFilter||this.magFilter,this.minFilter=e.minFilter||this.minFilter,this.packAlignment=e.packAlignment||this.packAlignment,this.premultiplyAlpha=e.premultiplyAlpha||this.premultiplyAlpha,this.type=e.type||this.type,this.unpackAlignment=e.unpackAlignment||this.unpackAlignment,this.wrapHorizontal=e.wrapHorizontal||this.wrapHorizontal,this.wrapVertical=e.wrapVertical||this.wrapVertical}return Object.defineProperty(e.prototype,"uid",{get:function(){return this._uid},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"anisotropy",{get:function(){return this._anisotropy},set:function(e){this.needsSettingsUpdate=!0,this._anisotropy=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"data",{get:function(){return this._data},set:function(e){this.needsDataUpload=!0,this._data=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"flipY",{get:function(){return this._flipY},set:function(e){this.needsDataUpload=!0,this._flipY=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"format",{get:function(){return this._format},set:function(e){this.needsDataUpload=!0,this._format=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"generateMipMaps",{get:function(){return this._generateMipmaps},set:function(e){this.needsSettingsUpdate=!0,this._generateMipmaps=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"magFilter",{get:function(){return this._magFilter},set:function(e){this.needsSettingsUpdate=!0,this._magFilter=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"minFilter",{get:function(){return this._minFilter},set:function(e){this.needsSettingsUpdate=!0,this._minFilter=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"packAlignment",{get:function(){return this._packAlignment},set:function(e){this.needsSettingsUpdate=!0,this._packAlignment=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"premultiplyAlpha",{get:function(){return this._premultiplyAlpha},set:function(e){this.needsSettingsUpdate=!0,this._premultiplyAlpha=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"type",{get:function(){return this._type},set:function(e){this.needsDataUpload=!0,this._type=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"unpackAlignment",{get:function(){return this._unpackAlignment},set:function(e){this.needsSettingsUpdate=!0,this._unpackAlignment=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"updateRegions",{get:function(){return this._updateRegions},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"wrapHorizontal",{get:function(){return this._wrapHorizontal},set:function(e){this.needsSettingsUpdate=!0,this._wrapHorizontal=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"wrapVertical",{get:function(){return this._wrapVertical},set:function(e){this.needsSettingsUpdate=!0,this._wrapVertical=e},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){this.gl&&this.gl.proxy.disposeTexture(this),delete this._data},e.prototype.resolve=function(){this.needsDataUpload=!1,this.needsPartialDataUpload=!1,this.needsSettingsUpdate=!1,this._updateRegions=[]},e.prototype.update=function(e,t){this.needsPartialDataUpload=!0,this._updateRegions.push([e,t])},e}();t.Texture=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getProgramInfo=function(e,t){for(var n={attributeCount:0,attributes:new Array,uniformCount:0,uniforms:new Array},r=e.getProgramParameter(t,e.ACTIVE_UNIFORMS),i=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES),o={35664:"FLOAT_VEC2",35665:"FLOAT_VEC3",35666:"FLOAT_VEC4",35667:"INT_VEC2",35668:"INT_VEC3",35669:"INT_VEC4",35670:"BOOL",35671:"BOOL_VEC2",35672:"BOOL_VEC3",35673:"BOOL_VEC4",35674:"FLOAT_MAT2",35675:"FLOAT_MAT3",35676:"FLOAT_MAT4",35678:"SAMPLER_2D",35680:"SAMPLER_CUBE",5120:"BYTE",5121:"UNSIGNED_BYTE",5122:"SHORT",5123:"UNSIGNED_SHORT",5124:"INT",5125:"UNSIGNED_INT",5126:"FLOAT"},A={35664:1,35665:1,35666:1,35667:1,35668:1,35669:1,35670:1,35671:1,35672:1,35673:1,35674:1,35675:3,35676:4,35678:1,35680:1,5120:1,5121:1,5122:1,5123:1,5124:1,5125:1,5126:1},a=0;a<r;++a){var s=e.getActiveUniform(t,a);s.typeName=o[s.type],n.uniforms.push(s),n.uniformCount+=s.size,s.size=s.size*A[s.type]}for(a=0;a<i;a++){var c=e.getActiveAttrib(t,a);c.typeName=o[c.type],n.attributes.push(c),n.attributeCount+=c.size}return n};var r,i=function(){function e(){}return e.MAX_VERTEX_UNIFORMS=0,e.MAX_FRAGMENT_UNIFORMS=0,e.MAX_VERTEX_ATTRIBUTES=0,e.WEBGL_SUPPORTED=!1,e.MAX_TEXTURE_SIZE=0,e.HARDWARE_INSTANCING=!1,e.HARDWARE_INSTANCING_ANGLE=!1,e}();t.WebGLStat=i,(r=function(){try{var e=document.createElement("canvas");return window.WebGLRenderingContext&&(e.getContext("webgl")||e.getContext("experimental-webgl"))}catch(e){return!1}}())&&(i.WEBGL_SUPPORTED=!0,i.MAX_VERTEX_UNIFORMS=r.getParameter(r.MAX_VERTEX_UNIFORM_VECTORS),i.MAX_FRAGMENT_UNIFORMS=r.getParameter(r.MAX_FRAGMENT_UNIFORM_VECTORS),i.MAX_VERTEX_ATTRIBUTES=r.getParameter(r.MAX_VERTEX_ATTRIBS),i.MAX_TEXTURE_SIZE=r.getParameter(r.MAX_TEXTURE_SIZE),i.HARDWARE_INSTANCING_ANGLE=Boolean(r.getExtension("ANGLE_instanced_arrays")),i.HARDWARE_INSTANCING=i.HARDWARE_INSTANCING_ANGLE)},function(e,t,n){"use strict";function r(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),r(n(34)),r(n(141)),r(n(142)),r(n(175))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(5),i=function(){function e(e,t,n,i){this.child=[null,null],this.isLeaf=!0,this.data=null,this.bounds=new r.Bounds({height:i,width:n,x:e,y:t})}return e.prototype.destroy=function(){var e=this.child[0],t=this.child[1];this.data=null,e&&e.destroy(),t&&t.destroy(),this.child[0]=null,this.child[1]=null},e.prototype.hasChild=function(){var e=this.child[0],t=this.child[1];return e&&!e.data?!e.isLeaf:!(!t||t.data)&&!t.isLeaf},e.prototype.insert=function(t){var n=this.child[0],r=this.child[1];if(!this.isLeaf&&n&&r){var i=n.insert(t);return null!==i?i:r.insert(t)}if(this.data)return null;var o=this.bounds.fits(t.bounds);if(0===o)return null;if(1===o)return this.data=t.data,this;this.isLeaf=!1;var A=t.bounds.width,a=t.bounds.height,s=this.bounds.width-A,c=this.bounds.height-t.bounds.height;return s>c?(n=this.child[0]=new e(this.bounds.x,this.bounds.y,A,this.bounds.height),r=this.child[1]=new e(this.bounds.x+A,this.bounds.y,s,this.bounds.height)):(n=this.child[0]=new e(this.bounds.x,this.bounds.y,this.bounds.width,a),r=this.child[1]=new e(this.bounds.x,this.bounds.y+a,this.bounds.width,c)),n.insert(t)},e.prototype.remove=function(e){var t=this.child[0],n=this.child[1];if(n&&t&&!this.isLeaf){var r=t.remove(e);return!!r||(r=n.remove(e),t.hasChild()||n.hasChild()||(this.child[0]=null,this.child[1]=null),r)}return this.data===e&&(this.data=null,!0)},e.applyToSubTexture=function(t,n,i,o,A){if(i){o=o||{top:0,left:0,bottom:0,right:0};var a,s=n instanceof e?n.bounds:n,c=(s.x+o.left)/t.bounds.width,u=(s.y+o.top)/t.bounds.height,l=(s.width-o.left-o.right)/t.bounds.width,h=(s.height-o.top-o.bottom)/t.bounds.height,d=(a=A?new r.Bounds({bottom:1-u,left:c,right:c+l,top:1-(u+h)}):new r.Bounds({top:1-u,left:c,right:c+l,bottom:1-(u+h)})).bottom,f=a.y,p=a.x,g=a.x+a.width;i.atlasTL=[p,f],i.atlasBR=[g,d],i.atlasBL=[p,d],i.atlasTR=[g,f],i.widthOnAtlas=Math.abs(i.atlasTR[0]-i.atlasTL[0]),i.heightOnAtlas=Math.abs(i.atlasTR[1]-i.atlasBR[1]),i.pixelWidth=l*t.bounds.width,i.pixelHeight=h*t.bounds.height}},e}();t.PackNode=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseBackgroundImage=t.parseBackground=t.calculateBackgroundRepeatPath=t.calculateBackgroundPosition=t.calculateBackgroungPositioningArea=t.calculateBackgroungPaintingArea=t.calculateGradientBackgroundSize=t.calculateBackgroundSize=t.BACKGROUND_ORIGIN=t.BACKGROUND_CLIP=t.BACKGROUND_SIZE=t.BACKGROUND_REPEAT=void 0;var r=c(n(12)),i=c(n(14)),o=c(n(148)),A=c(n(36)),a=n(13),s=n(85);function c(e){return e&&e.__esModule?e:{default:e}}var u=t.BACKGROUND_REPEAT={REPEAT:0,NO_REPEAT:1,REPEAT_X:2,REPEAT_Y:3},l=t.BACKGROUND_SIZE={AUTO:0,CONTAIN:1,COVER:2,LENGTH:3},h=t.BACKGROUND_CLIP={BORDER_BOX:0,PADDING_BOX:1,CONTENT_BOX:2},d=t.BACKGROUND_ORIGIN=h,f=function e(t){switch(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t){case"contain":this.size=l.CONTAIN;break;case"cover":this.size=l.COVER;break;case"auto":this.size=l.AUTO;break;default:this.value=new i.default(t)}},p=(t.calculateBackgroundSize=function(e,t,n){var r=0,i=0,A=e.size;if(A[0].size===l.CONTAIN||A[0].size===l.COVER){var a=n.width/n.height,s=t.width/t.height;return a<s!=(A[0].size===l.COVER)?new o.default(n.width,n.width/s):new o.default(n.height*s,n.height)}return A[0].value&&(r=A[0].value.getAbsoluteValue(n.width)),A[0].size===l.AUTO&&A[1].size===l.AUTO?i=t.height:A[1].size===l.AUTO?i=r/t.width*t.height:A[1].value&&(i=A[1].value.getAbsoluteValue(n.height)),A[0].size===l.AUTO&&(r=i/t.height*t.width),new o.default(r,i)},t.calculateGradientBackgroundSize=function(e,t){var n=e.size,r=n[0].value?n[0].value.getAbsoluteValue(t.width):t.width,i=n[1].value?n[1].value.getAbsoluteValue(t.height):n[0].value?r:t.height;return new o.default(r,i)},new f("auto")),g=(t.calculateBackgroungPaintingArea=function(e,t){switch(t){case h.BORDER_BOX:return(0,a.calculateBorderBoxPath)(e);case h.PADDING_BOX:default:return(0,a.calculatePaddingBoxPath)(e)}},t.calculateBackgroungPositioningArea=function(e,t,n,r){var i=(0,a.calculatePaddingBox)(t,r);switch(e){case d.BORDER_BOX:return t;case d.CONTENT_BOX:var o=n[s.PADDING_SIDES.LEFT].getAbsoluteValue(t.width),A=n[s.PADDING_SIDES.RIGHT].getAbsoluteValue(t.width),c=n[s.PADDING_SIDES.TOP].getAbsoluteValue(t.width),u=n[s.PADDING_SIDES.BOTTOM].getAbsoluteValue(t.width);return new a.Bounds(i.left+o,i.top+c,i.width-o-A,i.height-c-u);case d.PADDING_BOX:default:return i}},t.calculateBackgroundPosition=function(e,t,n){return new A.default(e[0].getAbsoluteValue(n.width-t.width),e[1].getAbsoluteValue(n.height-t.height))},t.calculateBackgroundRepeatPath=function(e,t,n,r,i){switch(e.repeat){case u.REPEAT_X:return[new A.default(Math.round(i.left),Math.round(r.top+t.y)),new A.default(Math.round(i.left+i.width),Math.round(r.top+t.y)),new A.default(Math.round(i.left+i.width),Math.round(n.height+r.top+t.y)),new A.default(Math.round(i.left),Math.round(n.height+r.top+t.y))];case u.REPEAT_Y:return[new A.default(Math.round(r.left+t.x),Math.round(i.top)),new A.default(Math.round(r.left+t.x+n.width),Math.round(i.top)),new A.default(Math.round(r.left+t.x+n.width),Math.round(i.height+i.top)),new A.default(Math.round(r.left+t.x),Math.round(i.height+i.top))];case u.NO_REPEAT:return[new A.default(Math.round(r.left+t.x),Math.round(r.top+t.y)),new A.default(Math.round(r.left+t.x+n.width),Math.round(r.top+t.y)),new A.default(Math.round(r.left+t.x+n.width),Math.round(r.top+t.y+n.height)),new A.default(Math.round(r.left+t.x),Math.round(r.top+t.y+n.height))];default:return[new A.default(Math.round(i.left),Math.round(i.top)),new A.default(Math.round(i.left+i.width),Math.round(i.top)),new A.default(Math.round(i.left+i.width),Math.round(i.height+i.top)),new A.default(Math.round(i.left),Math.round(i.height+i.top))]}},t.parseBackground=function(e,t){return{backgroundColor:new r.default(e.backgroundColor),backgroundImage:y(e,t),backgroundClip:g(e.backgroundClip),backgroundOrigin:B(e.backgroundOrigin)}},function(e){switch(e){case"padding-box":return h.PADDING_BOX;case"content-box":return h.CONTENT_BOX}return h.BORDER_BOX}),B=function(e){switch(e){case"padding-box":return d.PADDING_BOX;case"content-box":return d.CONTENT_BOX}return d.BORDER_BOX},w=function(e){switch(e.trim()){case"no-repeat":return u.NO_REPEAT;case"repeat-x":case"repeat no-repeat":return u.REPEAT_X;case"repeat-y":case"no-repeat repeat":return u.REPEAT_Y;case"repeat":return u.REPEAT}return u.REPEAT},y=function(e,t){var n=b(e.backgroundImage).map(function(e){if("url"===e.method){var n=t.loadImage(e.args[0]);e.args=n?[n]:[]}return e}),r=e.backgroundPosition.split(","),i=e.backgroundRepeat.split(","),o=e.backgroundSize.split(",");return n.map(function(e,t){var n=(o[t]||"auto").trim().split(" ").map(v),A=(r[t]||"auto").trim().split(" ").map(m);return{source:e,repeat:w("string"==typeof i[t]?i[t]:i[0]),size:n.length<2?[n[0],p]:[n[0],n[1]],position:A.length<2?[A[0],A[0]]:[A[0],A[1]]}})},v=function(e){return"auto"===e?p:new f(e)},m=function(e){switch(e){case"bottom":case"right":return new i.default("100%");case"left":case"top":return new i.default("0%");case"auto":return new i.default("0")}return new i.default(e)},b=t.parseBackgroundImage=function(e){var t=/^\s$/,n=[],r=[],i="",o=null,A="",a=0,s=0,c=function(){var e="";if(i){'"'===A.substr(0,1)&&(A=A.substr(1,A.length-2)),A&&r.push(A.trim());var t=i.indexOf("-",1)+1;"-"===i.substr(0,1)&&t>0&&(e=i.substr(0,t).toLowerCase(),i=i.substr(t)),"none"!==(i=i.toLowerCase())&&n.push({prefix:e,method:i,args:r})}r=[],i=A=""};return e.split("").forEach(function(e){if(0!==a||!t.test(e)){switch(e){case'"':o?o===e&&(o=null):o=e;break;case"(":if(o)break;if(0===a)return void(a=1);s++;break;case")":if(o)break;if(1===a){if(0===s)return a=0,void c();s--}break;case",":if(o)break;if(0===a)return void c();if(1===a&&0===s&&!i.match(/^url$/i))return r.push(A.trim()),void(A="")}0===a?i+=e:A+=e}}),c(),n}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(9),i=function(){function e(){}return e.setObservableMonitor=function(t){e.gatherIds=t,e.observableIds=[]},e.getObservableMonitorIds=function(t){var n=e.observableIds.slice(0);return t&&(e.observableIds=[]),n},e.gatherIds=!1,e.observableIds=[],e.observableNamesToUID=new Map,e}();t.ObservableMonitoring=i,t.observable=function(e,t){var n=i.observableNamesToUID.get(t)||0;n||(n=r.uid(),i.observableNamesToUID.set(t,n)),Object.defineProperty(e,t,{configurable:!0,enumerable:!0,get:function(){return i.gatherIds&&i.observableIds.push(n),this.observableStorage[n]},set:function(e){this.observableStorage[n]=e,this.changes[n]=n,this.observer&&this.observer.instanceUpdated(this)}})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(6);t.generateLayerModel=function(e,t,n){var i=new r.Model(e,t);return i.drawMode=n||r.GLSettings.Model.DrawMode.TRIANGLE_STRIP,i}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isBufferLocation=function(e){return e&&e.buffer&&e.buffer.value},t.isBufferLocationGroup=function(e){return e&&e.propertyToBufferLocation};var r=function(){function e(e,t){this.layer=e,this.scene=t}return e.prototype.changesProcessed=function(){delete this.changeListContext},e.prototype.incomingChangeList=function(e){this.changeListContext=e},e}();t.BufferManagerBase=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=n(45),o=n(9),A=n(4);function a(e){return e.projectionOptions.type===r.ORTHOGRAPHIC&&"left"in e.projectionOptions}function s(e){return e.projectionOptions.type===r.PERSPECTIVE&&"fov"in e.projectionOptions}!function(e){e[e.PERSPECTIVE=0]="PERSPECTIVE",e[e.ORTHOGRAPHIC=1]="ORTHOGRAPHIC"}(r=t.CameraProjectionType||(t.CameraProjectionType={})),t.isOrthographic=a,t.isPerspective=s;var c=function(){function e(e){this._id=o.uid(),this.animationEndTime=0,this.needsViewDrawn=!0,this.needsBroadcast=!1,this.viewChangeViewId="",this._projection=i.identity4(),this._view=i.identity4(),this._needsUpdate=!1,this._position=[0,0,0],this._scale=[1,1,1],this._rotation=[0,0,0],this._projectionOptions=e,this._needsUpdate=!0,this.onViewChange=e.onViewChange,this.update()}return Object.defineProperty(e.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0}),e.prototype.broadcast=function(e){this.onViewChange&&this.onViewChange(this,e)},e.makeOrthographic=function(){return new e({left:-100,right:100,top:-100,bottom:100,near:-100,far:1e5,type:r.ORTHOGRAPHIC})},Object.defineProperty(e.prototype,"projectionType",{get:function(){return this._projectionOptions.type},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"projection",{get:function(){return this._projection},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"view",{get:function(){return this._view},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"needsUpdate",{get:function(){return this._needsUpdate},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"position",{get:function(){return A.copy3(this._position)},set:function(e){this._position=e,this._needsUpdate=!0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scale",{get:function(){return A.copy3(this._scale)},set:function(e){this._scale=e,this._needsUpdate=!0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rotation",{get:function(){return A.copy3(this._rotation)},set:function(e){this._rotation=e,this._needsUpdate=!0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"projectionOptions",{get:function(){return Object.assign({},this._projectionOptions)},set:function(e){this._projectionOptions=e,this._needsUpdate=!0},enumerable:!0,configurable:!0}),e.prototype.resolve=function(){this._needsUpdate=!1,this.needsViewDrawn=!1,this.needsBroadcast=!1},e.prototype.update=function(e){(this._needsUpdate||e)&&(this.updateProjection(),this.updateTransform())},e.prototype.updateProjection=function(){a(this)?this._projection=i.orthographic4x4(this.projectionOptions.left,this.projectionOptions.right,this.projectionOptions.bottom,this.projectionOptions.top,this.projectionOptions.near,this.projectionOptions.far):s(this)&&(this._projection=i.perspective4x4(this.projectionOptions.fov,this.projectionOptions.width/this.projectionOptions.height,this.projectionOptions.near,this.projectionOptions.far))},e.prototype.updateTransform=function(){this._view=i.multiply4x4(i.scale4x4by3(this._scale),i.translation4x4by3(this._position))},e}();t.Camera=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.shaderTemplate=function(e){var t=e.shader,n=e.options,r=e.required,i=e.onError,o=e.onToken,A=new Map,a=new Map,s=new Map,c=new Map,u=t.replace(/\$\{([^\}]*)\}/g,function(e,t){var r="";return c.set(t,(c.get(t)||0)+1),t in n?(A.set(t,(A.get(t)||0)+1),r=n[t]):a.set(t,(a.get(t)||0)+1),o&&(r=o(t,r)),r});Object.keys(n).forEach(function(e){A.get(e)||s.set(e,(s.get(e)||0)+1)});var l={resolvedShaderOptions:A,shader:u,shaderProvidedOptions:c,unresolvedProvidedOptions:s,unresolvedShaderOptions:a};return r&&r.values.forEach(function(e){if(l.unresolvedProvidedOptions.get(e)){var t=r.name+": Could not resolve all the required inputs. Input: "+e;i?i(t):console.error(t)}else l.unresolvedShaderOptions.get(e)?(t=r.name+": A required option was not provided in the options parameter. Option: "+e,i?i(t):console.error(t)):l.resolvedShaderOptions.get(e)||(t=r.name+": A required option was not provided in the options parameter. Option: "+e,i?i(t):console.error(t))}),l}},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o=n(30),A=n(50),a=function(e){function t(t){var n=e.call(this,{left:-100,right:100,top:-100,bottom:100,near:-100,far:1e5,type:o.CameraProjectionType.ORTHOGRAPHIC})||this;return n.control2D=new A.Control2D(n,t),n}return i(t,e),Object.defineProperty(t.prototype,"scale2D",{get:function(){return this.control2D.scale},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"offset",{get:function(){return this.control2D.offset},enumerable:!0,configurable:!0}),t}(o.Camera);t.Camera2D=a},function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.FLOAT=0]="FLOAT",e[e.VEC2=1]="VEC2",e[e.VEC3=2]="VEC3",e[e.VEC4=3]="VEC4",e[e.VEC4_ARRAY=4]="VEC4_ARRAY",e[e.FLOAT_ARRAY=5]="FLOAT_ARRAY",e[e.MATRIX3x3=6]="MATRIX3x3",e[e.MATRIX4x4=7]="MATRIX4x4",e[e.TEXTURE=8]="TEXTURE"}(r=t.MaterialUniformType||(t.MaterialUniformType={})),t.isUniformVec2=function(e){return e.type===r.VEC2},t.isUniformVec3=function(e){return e.type===r.VEC3},t.isUniformVec4=function(e){return e.type===r.VEC4},t.isUniformVec4Array=function(e){return e.type===r.VEC4_ARRAY},t.isUniformMat3=function(e){return e.type===r.MATRIX3x3},t.isUniformMat4=function(e){return e.type===r.MATRIX4x4},t.isUniformTexture=function(e){return e.type===r.TEXTURE},t.isUniformFloat=function(e){return e.type===r.FLOAT}},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function A(e){try{s(r.next(e))}catch(e){o(e)}}function a(e){try{s(r.throw(e))}catch(e){o(e)}}function s(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(A,a)}s((r=r.apply(e,t||[])).next())})},A=this&&this.__generator||function(e,t){var n,r,i,o,A={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;A;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return A.label++,{value:o[1],done:!1};case 5:A.label++,r=o[1],o=[0];continue;case 7:o=A.ops.pop(),A.trys.pop();continue;default:if(!(i=(i=A.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){A=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){A.label=o[1];break}if(6===o[0]&&A.label<i[1]){A.label=i[1],i=o;break}if(i&&A.label<i[2]){A.label=i[2],A.ops.push(o);break}i[2]&&A.ops.pop(),A.trys.pop();continue}o=t.call(e,A)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(){}return e.prototype.getIOExpansion=function(){return[]},e.prototype.setAttributeContext=function(e){},e}();t.BaseResourceManager=a;var s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.resources=new Map,t}return i(t,e),t.prototype.dequeueRequests=function(){return o(this,void 0,void 0,function(){return A(this,function(e){return[2,!1]})})},t.prototype.destroy=function(){},t.prototype.destroyResource=function(e){this.resources.delete(e.key)},t.prototype.getResource=function(e){return this.resources.get(e)||{key:"",type:-1}},t.prototype.initResource=function(e){return o(this,void 0,void 0,function(){return A(this,function(t){return this.resources.set(e.key,e),[2]})})},t.prototype.request=function(e,t,n){return[0,0,0,0]},t.prototype.updateResource=function(e){},t}(a);t.InvalidResourceManager=s,t.INVALID_RESOURCE_MANAGER=new s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.PATH={VECTOR:0,BEZIER_CURVE:1,CIRCLE:2}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(35);t.default=function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.type=r.PATH.VECTOR,this.x=t,this.y=n}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseListStyle=t.parseListStyleType=t.LIST_STYLE_TYPE=t.LIST_STYLE_POSITION=void 0;var r=n(26),i=t.LIST_STYLE_POSITION={INSIDE:0,OUTSIDE:1},o=t.LIST_STYLE_TYPE={NONE:-1,DISC:0,CIRCLE:1,SQUARE:2,DECIMAL:3,CJK_DECIMAL:4,DECIMAL_LEADING_ZERO:5,LOWER_ROMAN:6,UPPER_ROMAN:7,LOWER_GREEK:8,LOWER_ALPHA:9,UPPER_ALPHA:10,ARABIC_INDIC:11,ARMENIAN:12,BENGALI:13,CAMBODIAN:14,CJK_EARTHLY_BRANCH:15,CJK_HEAVENLY_STEM:16,CJK_IDEOGRAPHIC:17,DEVANAGARI:18,ETHIOPIC_NUMERIC:19,GEORGIAN:20,GUJARATI:21,GURMUKHI:22,HEBREW:22,HIRAGANA:23,HIRAGANA_IROHA:24,JAPANESE_FORMAL:25,JAPANESE_INFORMAL:26,KANNADA:27,KATAKANA:28,KATAKANA_IROHA:29,KHMER:30,KOREAN_HANGUL_FORMAL:31,KOREAN_HANJA_FORMAL:32,KOREAN_HANJA_INFORMAL:33,LAO:34,LOWER_ARMENIAN:35,MALAYALAM:36,MONGOLIAN:37,MYANMAR:38,ORIYA:39,PERSIAN:40,SIMP_CHINESE_FORMAL:41,SIMP_CHINESE_INFORMAL:42,TAMIL:43,TELUGU:44,THAI:45,TIBETAN:46,TRAD_CHINESE_FORMAL:47,TRAD_CHINESE_INFORMAL:48,UPPER_ARMENIAN:49,DISCLOSURE_OPEN:50,DISCLOSURE_CLOSED:51},A=t.parseListStyleType=function(e){switch(e){case"disc":return o.DISC;case"circle":return o.CIRCLE;case"square":return o.SQUARE;case"decimal":return o.DECIMAL;case"cjk-decimal":return o.CJK_DECIMAL;case"decimal-leading-zero":return o.DECIMAL_LEADING_ZERO;case"lower-roman":return o.LOWER_ROMAN;case"upper-roman":return o.UPPER_ROMAN;case"lower-greek":return o.LOWER_GREEK;case"lower-alpha":return o.LOWER_ALPHA;case"upper-alpha":return o.UPPER_ALPHA;case"arabic-indic":return o.ARABIC_INDIC;case"armenian":return o.ARMENIAN;case"bengali":return o.BENGALI;case"cambodian":return o.CAMBODIAN;case"cjk-earthly-branch":return o.CJK_EARTHLY_BRANCH;case"cjk-heavenly-stem":return o.CJK_HEAVENLY_STEM;case"cjk-ideographic":return o.CJK_IDEOGRAPHIC;case"devanagari":return o.DEVANAGARI;case"ethiopic-numeric":return o.ETHIOPIC_NUMERIC;case"georgian":return o.GEORGIAN;case"gujarati":return o.GUJARATI;case"gurmukhi":return o.GURMUKHI;case"hebrew":return o.HEBREW;case"hiragana":return o.HIRAGANA;case"hiragana-iroha":return o.HIRAGANA_IROHA;case"japanese-formal":return o.JAPANESE_FORMAL;case"japanese-informal":return o.JAPANESE_INFORMAL;case"kannada":return o.KANNADA;case"katakana":return o.KATAKANA;case"katakana-iroha":return o.KATAKANA_IROHA;case"khmer":return o.KHMER;case"korean-hangul-formal":return o.KOREAN_HANGUL_FORMAL;case"korean-hanja-formal":return o.KOREAN_HANJA_FORMAL;case"korean-hanja-informal":return o.KOREAN_HANJA_INFORMAL;case"lao":return o.LAO;case"lower-armenian":return o.LOWER_ARMENIAN;case"malayalam":return o.MALAYALAM;case"mongolian":return o.MONGOLIAN;case"myanmar":return o.MYANMAR;case"oriya":return o.ORIYA;case"persian":return o.PERSIAN;case"simp-chinese-formal":return o.SIMP_CHINESE_FORMAL;case"simp-chinese-informal":return o.SIMP_CHINESE_INFORMAL;case"tamil":return o.TAMIL;case"telugu":return o.TELUGU;case"thai":return o.THAI;case"tibetan":return o.TIBETAN;case"trad-chinese-formal":return o.TRAD_CHINESE_FORMAL;case"trad-chinese-informal":return o.TRAD_CHINESE_INFORMAL;case"upper-armenian":return o.UPPER_ARMENIAN;case"disclosure-open":return o.DISCLOSURE_OPEN;case"disclosure-closed":return o.DISCLOSURE_CLOSED;case"none":default:return o.NONE}},a=(t.parseListStyle=function(e){var t=(0,r.parseBackgroundImage)(e.getPropertyValue("list-style-image"));return{listStyleType:A(e.getPropertyValue("list-style-type")),listStyleImage:t.length?t[0]:null,listStylePosition:a(e.getPropertyValue("list-style-position"))}},function(e){switch(e){case"inside":return i.INSIDE;case"outside":default:return i.OUTSIDE}})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(88),o=n(90);var A=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.text=t,this.parent=n,this.bounds=r}return r(e,null,[{key:"fromTextNode",value:function(t,n){var r=s(t.data,n.style.textTransform);return new e(r,n,(0,o.parseTextBounds)(r,n,t))}}]),e}();t.default=A;var a=/(^|\s|:|-|\(|\))([a-z])/g,s=function(e,t){switch(t){case i.TEXT_TRANSFORM.LOWERCASE:return e.toLowerCase();case i.TEXT_TRANSFORM.CAPITALIZE:return e.replace(a,c);case i.TEXT_TRANSFORM.UPPERCASE:return e.toUpperCase();default:return e}};function c(e,t,n){return e.length>0?t+n.toUpperCase():e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(91),i=function(e){return 0===e[0]&&255===e[1]&&0===e[2]&&255===e[3]},o={get SUPPORT_RANGE_BOUNDS(){var e=function(e){if(e.createRange){var t=e.createRange();if(t.getBoundingClientRect){var n=e.createElement("boundtest");n.style.height="123px",n.style.display="block",e.body.appendChild(n),t.selectNode(n);var r=t.getBoundingClientRect(),i=Math.round(r.height);if(e.body.removeChild(n),123===i)return!0}}return!1}(document);return Object.defineProperty(o,"SUPPORT_RANGE_BOUNDS",{value:e}),e},get SUPPORT_SVG_DRAWING(){var e=function(e){var t=new Image,n=e.createElement("canvas"),r=n.getContext("2d");t.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{r.drawImage(t,0,0),n.toDataURL()}catch(e){return!1}return!0}(document);return Object.defineProperty(o,"SUPPORT_SVG_DRAWING",{value:e}),e},get SUPPORT_BASE64_DRAWING(){return function(e){var t=function(e,t){var n=new Image,r=e.createElement("canvas"),i=r.getContext("2d");return new Promise(function(e){n.src=t;var o=function(){try{i.drawImage(n,0,0),r.toDataURL()}catch(t){return e(!1)}return e(!0)};n.onload=o,n.onerror=function(){return e(!1)},!0===n.complete&&setTimeout(function(){o()},500)})}(document,e);return Object.defineProperty(o,"SUPPORT_BASE64_DRAWING",{value:function(){return t}}),t}},get SUPPORT_FOREIGNOBJECT_DRAWING(){var e="function"==typeof Array.from&&"function"==typeof window.fetch?function(e){var t=e.createElement("canvas");t.width=100,t.height=100;var n=t.getContext("2d");n.fillStyle="rgb(0, 255, 0)",n.fillRect(0,0,100,100);var o=new Image,A=t.toDataURL();o.src=A;var a=(0,r.createForeignObjectSVG)(100,100,0,0,o);return n.fillStyle="red",n.fillRect(0,0,100,100),(0,r.loadSerializedSVG)(a).then(function(t){n.drawImage(t,0,0);var o=n.getImageData(0,0,100,100).data;n.fillStyle="red",n.fillRect(0,0,100,100);var a=e.createElement("div");return a.style.backgroundImage="url("+A+")",a.style.height="100px",i(o)?(0,r.loadSerializedSVG)((0,r.createForeignObjectSVG)(100,100,0,0,a)):Promise.reject(!1)}).then(function(e){return n.drawImage(e,0,0),i(n.getImageData(0,0,100,100).data)}).catch(function(e){return!1})}(document):Promise.resolve(!1);return Object.defineProperty(o,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:e}),e},get SUPPORT_CORS_IMAGES(){var e=void 0!==(new Image).crossOrigin;return Object.defineProperty(o,"SUPPORT_CORS_IMAGES",{value:e}),e},get SUPPORT_RESPONSE_TYPE(){var e="string"==typeof(new XMLHttpRequest).responseType;return Object.defineProperty(o,"SUPPORT_RESPONSE_TYPE",{value:e}),e},get SUPPORT_CORS_XHR(){var e="withCredentials"in new XMLHttpRequest;return Object.defineProperty(o,"SUPPORT_CORS_XHR",{value:e}),e}};t.default=o},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.expand=function(e,t,n,r){return{instanceAttributes:[],uniforms:[],vertexAttributes:[]}},t.prototype.validate=function(e,t,n,r){return!0},t.prototype.processHeaderInjection=function(e,t,n,r,i,o,A){return{injection:""}},t.prototype.processAttributeDestructuring=function(e,t,n,r,i,o){return""},t}(n(68).BaseShaderIOInjection);t.BaseIOExpansion=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){}return e.prototype.getProjection=function(e){return this.userInputManager.getView(e)},e.prototype.getView=function(e){return this.userInputManager&&this.userInputManager.getView(e)||null},e.prototype.getViewScreenBounds=function(e){var t=this.userInputManager.getView(e);return t?t.screenBounds:null},e.prototype.setUserInputManager=function(e){this.userInputManager=e},e}();t.EventManager=r},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){function t(t){var n=e.call(this)||this;return Object.assign(n,t),n}return i(t,e),t.prototype.handleMouseDown=function(e){},t.prototype.handleMouseUp=function(e){},t.prototype.handleMouseOver=function(e){},t.prototype.handleMouseOut=function(e){},t.prototype.handleMouseMove=function(e){},t.prototype.handleClick=function(e){},t.prototype.handleDrag=function(e){},t.prototype.handleWheel=function(e){},t.prototype.handleTouchCancelled=function(e){},t.prototype.handleTouchDown=function(e){},t.prototype.handleTouchUp=function(e){},t.prototype.handleTouchOut=function(e){},t.prototype.handleTouchDrag=function(e){},t.prototype.handleTap=function(e){},t.prototype.handleDoubleTap=function(e){},t.prototype.handleLongTouch=function(e){},t.prototype.handleLongTap=function(e){},t.prototype.handlePinch=function(e){},t.prototype.handleSpread=function(e){},t.prototype.handleTouchRotate=function(e){},t.prototype.handleSwipe=function(e){},t}(n(41).EventManager);t.SimpleEventHandler=o},function(e,t,n){"use strict";function r(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),r(n(62)),r(n(5)),r(n(118)),r(n(119)),r(n(120))},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o=n(5),A=n(30),a=n(20),s=n(46);!function(e){e[e.COLOR=1]="COLOR",e[e.DEPTH=2]="DEPTH",e[e.STENCIL=4]="STENCIL"}(t.ClearFlags||(t.ClearFlags={})),t.createView=function(e,t){return{get key(){return t.key||""},init:[e,Object.assign(t,{key:t.key||"",viewport:t.viewport||{left:0,right:0,top:0,bottom:0}})]}};var c=function(e){function t(n,r){var i=e.call(this,r)||this;return i.animationEndTime=0,i.depth=0,i.lastFrameTime=0,i.needsDraw=!1,i.optimizeRendering=!1,i.pixelRatio=window.devicePixelRatio,i.scene=n,i.props=Object.assign({},t.defaultProps||{},r),i}return i(t,e),Object.defineProperty(t.prototype,"clearFlags",{get:function(){return this.props.clearFlags||[]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"order",{get:function(){return this.props.order||0},enumerable:!0,configurable:!0}),t.prototype.screenToPixelSpace=function(e,t){var n=t||[0,0];return n[0]=e[0]*this.pixelRatio,n[1]=e[1]*this.pixelRatio,n},t.prototype.pixelSpaceToScreen=function(e,t){var n=t||[0,0];return n[0]=e[0]/this.pixelRatio,n[1]=e[1]/this.pixelRatio,n},t.prototype.screenToView=function(e,t){var n=t||[0,0];return n[0]=e[0]-this.screenBounds.x,n[1]=e[1]-this.screenBounds.y,n},t.prototype.viewToScreen=function(e,t){var n=[0,0];return n[0]=e[0]+this.screenBounds.x,n[1]=e[1]+this.screenBounds.y,this.pixelSpaceToScreen(n,t)},t.prototype.shouldDrawView=function(e,t){for(var n in t)if(t[n]!==e[n])return!0;return!1},t.prototype.willUpdateProps=function(e){},t.prototype.didUpdateProps=function(){},t.defaultProps={key:"",camera:A.Camera.makeOrthographic(),viewport:{left:0,right:0,top:0,bottom:0}},t}(a.IdentifyByKey);t.View=c;var u=function(e){function t(){var t=e.call(this,new s.LayerScene(void 0,{key:"error",layers:[],views:[]}),{key:"error",viewport:{},camera:A.Camera.makeOrthographic()})||this;return t.screenBounds=new o.Bounds({x:0,y:0,width:100,height:100}),t}return i(t,e),t.prototype.screenToWorld=function(e,t){return[0,0]},t.prototype.worldToScreen=function(e,t){return[0,0]},t.prototype.viewToWorld=function(e,t){return[0,0]},t.prototype.worldToView=function(e,t){return[0,0]},t.prototype.fitViewtoViewport=function(e,t){this.screenBounds=e},t}(c);t.NoView=u},function(e,t,n){"use strict";function r(e){return e[3]*e[0]-e[1]*e[2]}function i(e){return e[0]*e[4]*e[8]-e[0]*e[5]*e[7]+e[1]*e[5]*e[6]-e[1]*e[3]*e[8]+e[2]*e[3]*e[7]-e[2]*e[4]*e[6]}function o(e){var t=[e[5],e[6],e[7],e[9],e[10],e[11],e[13],e[14],e[15]],n=[e[4],e[6],e[7],e[8],e[10],e[11],e[12],e[14],e[15]],r=[e[4],e[5],e[7],e[8],e[9],e[11],e[12],e[13],e[15]],o=[e[4],e[5],e[6],e[8],e[9],e[10],e[12],e[13],e[14]];return e[0]*i(t)-e[1]*i(n)+e[2]*i(r)-e[3]*i(o)}function A(e,t,n){return[e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1]}function a(e,t,n){return[1,0,0,0,0,1,0,0,0,0,1,0,e,t,n,1]}Object.defineProperty(t,"__esModule",{value:!0}),t.determinant2x2=r,t.determinant3x3=i,t.determinant4x4=o,t.affineInverse2x2=function(e){var t=r(e);return 0===t?null:[e[3]/t,-e[1]/t,-e[2]/t,e[0]/t]},t.affineInverse3x3=function(e){var t=i(e);if(0===t)return null;var n=r([e[4],e[5],e[7],e[8]]),o=r([e[3],e[5],e[6],e[8]]),A=r([e[3],e[4],e[6],e[7]]),a=r([e[1],e[2],e[7],e[8]]),s=r([e[0],e[2],e[6],e[8]]),c=r([e[0],e[1],e[6],e[7]]);return[n/t,-a/t,r([e[1],e[2],e[4],e[5]])/t,-o/t,s/t,r([e[0],e[2],e[3],e[5]])/t,A/t,-c/t,r([e[0],e[1],e[3],e[4]])/t]},t.affineInverse4x4=function(e){var t=o(e);if(0===t)return null;var n=r([e[0],e[1],e[4],e[5]]),i=r([e[0],e[2],e[4],e[6]]),A=r([e[0],e[3],e[4],e[7]]),a=r([e[1],e[2],e[5],e[6]]),s=r([e[1],e[3],e[5],e[7]]),c=r([e[2],e[3],e[6],e[7]]),u=r([e[10],e[11],e[14],e[15]]),l=r([e[9],e[11],e[13],e[15]]),h=r([e[9],e[10],e[13],e[14]]),d=r([e[8],e[11],e[12],e[15]]),f=r([e[8],e[10],e[12],e[14]]),p=r([e[8],e[9],e[12],e[13]]);return[(e[5]*u-e[6]*l+e[7]*h)/t,(-e[1]*u+e[2]*l-e[3]*h)/t,(e[12]*c-e[13]*s+e[14]*a)/t,(-e[9]*c+e[10]*s-e[11]*a)/t,(-e[4]*u+e[6]*d-e[7]*f)/t,(e[0]*u-e[2]*d+e[3]*f)/t,(-e[12]*c+e[14]*A-e[15]*i)/t,(e[8]*c-e[10]*A+e[11]*i)/t,(e[4]*l-e[5]*d+e[7]*p)/t,(-e[0]*l+e[1]*d-e[3]*p)/t,(e[12]*s-e[13]*A+e[15]*n)/t,(-e[8]*s+e[9]*A-e[11]*n)/t,(-e[4]*h+e[5]*f-e[6]*p)/t,(e[0]*h-e[1]*f+e[2]*p)/t,(-e[12]*a+e[13]*i-e[14]*n)/t,(e[8]*a-e[9]*i+e[10]*n)/t]},t.scale2x2=function(e,t){return[e[0]*t,e[1]*t,e[2]*t,e[3]*t]},t.scale3x3=function(e,t){return[e[0]*t,e[1]*t,e[2]*t,e[3]*t,e[4]*t,e[5]*t,e[6]*t,e[7]*t,e[8]*t]},t.multiplyScalar4x4=function(e,t){return[e[0]*t,e[1]*t,e[2]*t,e[3]*t,e[4]*t,e[5]*t,e[6]*t,e[7]*t,e[8]*t,e[9]*t,e[10]*t,e[11]*t,e[12]*t,e[13]*t,e[14]*t,e[15]*t]},t.identity2=function(){return[1,0,0,1]},t.identity3=function(){return[1,0,0,0,1,0,0,0,1]},t.identity4=function(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]},t.multiply2x2=function(e,t){return[e[0]*t[0]+e[1]*t[2],e[0]*t[1]+e[1]*t[3],e[2]*t[0]+e[3]*t[2],e[2]*t[1]+e[1]*t[3]]},t.multiply3x3=function(e,t){return[e[0]*t[0]+e[1]*t[3]+e[2]*t[6],e[0]*t[1]+e[1]*t[4]+e[2]*t[7],e[0]*t[2]+e[1]*t[5]+e[2]*t[8],e[3]*t[0]+e[4]*t[3]+e[5]*t[6],e[3]*t[1]+e[4]*t[4]+e[5]*t[7],e[3]*t[2]+e[4]*t[5]+e[5]*t[8],e[6]*t[0]+e[7]*t[3]+e[8]*t[6],e[6]*t[1]+e[7]*t[4]+e[8]*t[7],e[6]*t[2]+e[7]*t[5]+e[8]*t[8]]},t.multiply4x4=function(e,t){return[e[0]*t[0]+e[1]*t[4]+e[2]*t[8]+e[3]*t[12],e[0]*t[1]+e[1]*t[5]+e[2]*t[9]+e[3]*t[13],e[0]*t[2]+e[1]*t[6]+e[2]*t[10]+e[3]*t[14],e[0]*t[3]+e[1]*t[7]+e[2]*t[11]+e[3]*t[15],e[4]*t[0]+e[5]*t[4]+e[6]*t[8]+e[7]*t[12],e[4]*t[1]+e[5]*t[5]+e[6]*t[9]+e[7]*t[13],e[4]*t[2]+e[5]*t[6]+e[6]*t[10]+e[7]*t[14],e[4]*t[3]+e[5]*t[7]+e[6]*t[11]+e[7]*t[15],e[8]*t[0]+e[9]*t[4]+e[10]*t[8]+e[11]*t[12],e[8]*t[1]+e[9]*t[5]+e[10]*t[9]+e[11]*t[13],e[8]*t[2]+e[9]*t[6]+e[10]*t[10]+e[11]*t[14],e[8]*t[3]+e[9]*t[7]+e[10]*t[11]+e[11]*t[15],e[12]*t[0]+e[13]*t[4]+e[14]*t[8]+e[15]*t[12],e[12]*t[1]+e[13]*t[5]+e[14]*t[9]+e[15]*t[13],e[12]*t[2]+e[13]*t[6]+e[14]*t[10]+e[15]*t[14],e[12]*t[3]+e[13]*t[7]+e[14]*t[11]+e[15]*t[15]]},t.add2x2=function(e,t){return[e[0]+t[0],e[1]+t[1],e[2]+t[2],e[3]+t[3]]},t.add3x3=function(e,t){return[e[0]+t[0],e[1]+t[1],e[2]+t[2],e[3]+t[3],e[4]+t[4],e[5]+t[5],e[6]+t[6],e[7]+t[7],e[8]+t[8]]},t.add4x4=function(e,t){return[e[0]+t[0],e[1]+t[1],e[2]+t[2],e[3]+t[3],e[4]+t[4],e[5]+t[5],e[6]+t[6],e[7]+t[7],e[8]+t[8],e[9]+t[9],e[10]+t[10],e[11]+t[11],e[12]+t[12],e[13]+t[13],e[14]+t[14],e[15]+t[15]]},t.subtract2x2=function(e,t){return[e[0]-t[0],e[1]-t[1],e[2]-t[2],e[3]-t[3]]},t.subtract3x3=function(e,t){return[e[0]-t[0],e[1]-t[1],e[2]-t[2],e[3]-t[3],e[4]-t[4],e[5]-t[5],e[6]-t[6],e[7]-t[7],e[8]-t[8]]},t.subtract4x4=function(e,t){return[e[0]-t[0],e[1]-t[1],e[2]-t[2],e[3]-t[3],e[4]-t[4],e[5]-t[5],e[6]-t[6],e[7]-t[7],e[8]-t[8],e[9]-t[9],e[10]-t[10],e[11]-t[11],e[12]-t[12],e[13]-t[13],e[14]-t[14],e[15]-t[15]]},t.Hadamard2x2=function(e,t){return[e[0]*t[0],e[1]*t[1],e[2]*t[2],e[3]*t[3]]},t.Hadamard3x3=function(e,t){return[e[0]*t[0],e[1]*t[1],e[2]*t[2],e[3]*t[3],e[4]*t[4],e[5]*t[5],e[6]*t[6],e[7]*t[7],e[8]*t[8]]},t.Hadamard4x4=function(e,t){return[e[0]*t[0],e[1]*t[1],e[2]*t[2],e[3]*t[3],e[4]*t[4],e[5]*t[5],e[6]*t[6],e[7]*t[7],e[8]*t[8],e[9]*t[9],e[10]*t[10],e[11]*t[11],e[12]*t[12],e[13]*t[13],e[14]*t[14],e[15]*t[15]]},t.transpose2x2=function(e){return[e[0],e[2],e[1],e[3]]},t.transpose3x3=function(e){return[e[0],e[3],e[6],e[1],e[4],e[7],e[2],e[5],e[8]]},t.transpose4x4=function(e){return[e[0],e[4],e[8],e[12],e[1],e[5],e[9],e[13],e[2],e[6],e[10],e[14],e[3],e[7],e[11],e[15]]},t.toString4x4=function(e){return"Matrix: [\n    "+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+",\n    "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+",\n    "+e[8]+", "+e[9]+", "+e[10]+", "+e[11]+",\n    "+e[12]+", "+e[13]+", "+e[14]+", "+e[15]+",\n  ]"},t.scale4x4by3=function(e){return A(e[0],e[1],e[2])},t.scale4x4=A,t.translation4x4by3=function(e){return a(e[0],e[1],e[2])},t.translation4x4=a,t.perspective4x4=function(e,t,n,r){var i=1/Math.tan(e/2),o=1/(n-r);return[i/t,0,0,0,0,i,0,0,0,0,(n+r)*o,-1,0,0,n*r*o*2,0]},t.orthographic4x4=function(e,t,n,r,i,o){return[2/(t-e),0,0,0,0,2/(r-n),0,0,0,0,-1/(o-i),0,(t+e)/(e-t),(r+n)/(n-r),-i/(i-o),1]}},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function A(e){try{s(r.next(e))}catch(e){o(e)}}function a(e){try{s(r.throw(e))}catch(e){o(e)}}function s(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(A,a)}s((r=r.apply(e,t||[])).next())})},A=this&&this.__generator||function(e,t){var n,r,i,o,A={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;A;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return A.label++,{value:o[1],done:!1};case 5:A.label++,r=o[1],o=[0];continue;case 7:o=A.ops.pop(),A.trys.pop();continue;default:if(!(i=(i=A.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){A=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){A.label=o[1];break}if(6===o[0]&&A.label<i[1]){A.label=i[1],i=o;break}if(i&&A.label<i[2]){A.label=i[2],A.ops.push(o);break}i[2]&&A.ops.pop(),A.trys.pop();continue}o=t.call(e,A)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(63),s=n(20),c=n(47),u=n(64),l=n(2)("performance"),h=function(e){function t(t,n){var r=e.call(this,n)||this;return r.container=new a.Scene,r.surface=t,r.init(n),r}return i(t,e),Object.defineProperty(t.prototype,"layers",{get:function(){return this.layerDiffs.items},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"views",{get:function(){return this.viewDiffs.items},enumerable:!0,configurable:!0}),t.prototype.init=function(e){var t=this;if(this.surface&&this.surface.gl){this.container=new a.Scene;var n=u.generateDefaultElements(this.surface.gl);this.layerDiffs=new c.ReactiveDiff({buildItem:function(e){return o(t,void 0,void 0,function(){var t,n,r,i,o,a;return A(this,function(A){if(l("Building layer",e.key),!this.surface)return[2,null];if(t=e.init[0],n=e.init[1],(r=new t(this.surface,this,Object.assign({},t.defaultProps,n))).order=e.init[1].order||Number.MAX_SAFE_INTEGER,r.initializer=e,r.props.data.sync(),r.parent=n.parent,n.parent&&(n.parent.children?n.parent.children.push(r):n.parent.children=[r]),!r.init())return console.warn("Error initializing layer:",n.key,"A layer was unable to be added to the surface. See previous warnings (if any) to determine why they could not be instantiated"),[2,null];for(i=r.childLayers(),o=0,a=i.length;o<a;++o)i[o].init[1].order=r.order+.01*o;return this.layerDiffs.inline(i),[2,r]})})},destroyItem:function(e,n){return o(t,void 0,void 0,function(){return A(this,function(t){return l("Destroying layer",e.key),n.destroy(),[2,!0]})})},updateItem:function(e,n){return o(t,void 0,void 0,function(){var t,r,i;return A(this,function(o){return t=e.init[1],n.willUpdateProps(t),n.order=t.order,t.data!==n.props.data&&t.data.sync(),n.shouldDrawView(n.props,t)&&(n.needsViewDrawn=!0),Object.assign(n.props,t),n.initializer.init[1]=n.props,n.didUpdateProps(),t.parent&&n.parent&&n.parent!==t.parent&&(r=n.parent.children||[],(i=r.indexOf(n)||-1)>-1&&r.splice(i,1)),n.parent=t.parent,n.willRebuildLayer?(this.layerDiffs.rebuild(),n.willRebuildLayer=!1):this.layerDiffs.inline(n.childLayers()),[2]})})}}),this.viewDiffs=new c.ReactiveDiff({buildItem:function(e){return o(t,void 0,void 0,function(){var t;return A(this,function(r){return this.surface?((t=new e.init[0](this,e.init[1])).props.camera=t.props.camera||n.camera,t.pixelRatio=this.surface.pixelRatio,t.props.camera.surface=this.surface,this.surface.mouseManager.waitingForRender=!0,[2,t]):[2,null]})})},destroyItem:function(e,n){return o(t,void 0,void 0,function(){return A(this,function(e){return[2,!0]})})},updateItem:function(e,n){return o(t,void 0,void 0,function(){var t;return A(this,function(r){return t=e.init[1],n.willUpdateProps(t),n.shouldDrawView(n.props,t)&&(n.needsDraw=!0),Object.assign(n.props,t),n.didUpdateProps(),this.surface&&(this.surface.mouseManager.waitingForRender=!0),[2]})})}}),this.update(e)}},t.prototype.destroy=function(){delete this.container,this.layerDiffs.destroy(),this.viewDiffs.destroy()},t.prototype.removeLayer=function(e){if(this.layers){var t=this.layers.indexOf(e);if(t>=0)return void this.layers.splice(t,1)}},t.prototype.update=function(e){return o(this,void 0,void 0,function(){return A(this,function(t){switch(t.label){case 0:return this.order=e.order,[4,this.viewDiffs.diff(e.views)];case 1:return t.sent(),[4,this.layerDiffs.diff(e.layers)];case 2:return t.sent(),[2]}})})},t.DEFAULT_SCENE_ID="__default__",t}(s.IdentifyByKey);t.LayerScene=h},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function A(e){try{s(r.next(e))}catch(e){o(e)}}function a(e){try{s(r.throw(e))}catch(e){o(e)}}function s(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(A,a)}s((r=r.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){var n,r,i,o,A={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;A;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return A.label++,{value:o[1],done:!1};case 5:A.label++,r=o[1],o=[0];continue;case 7:o=A.ops.pop(),A.trys.pop();continue;default:if(!(i=(i=A.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){A=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){A.label=o[1];break}if(6===o[0]&&A.label<i[1]){A.label=i[1],i=o;break}if(i&&A.label<i[2]){A.label=i[2],A.ops.push(o);break}i[2]&&A.ops.pop(),A.trys.pop();continue}o=t.call(e,A)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e){var t=this;this.willDispose=new Set,this.keyToItem=new Map,this.keyToInitializer=new Map,this.currentInitalizerIndex=0,this.currentInitializers=[],this._items=[],this.inlineDeferred=function(e){t.deferredInlining=e},this.inlineImmediate=function(e){var n;if(e.length>0&&t.currentInitializers&&t.currentItem){(n=t.currentInitializers).splice.apply(n,[t.currentInitalizerIndex+1,0].concat(e));for(var r=0,i=e.length;r<i;++r){e[r].parent=t.currentItem}}},this.inline=this.inlineImmediate,this.options=e}return Object.defineProperty(e.prototype,"items",{get:function(){return this._items.slice(0)},enumerable:!0,configurable:!0}),e.prototype.destroy=function(){return r(this,void 0,void 0,function(){var e,t,n,r,o;return i(this,function(i){switch(i.label){case 0:for(e=[],t=0,n=this.currentInitializers.length;t<n;++t)r=this.currentInitializers[t],(o=this.keyToItem.get(r.key))&&e.push(this.options.destroyItem(r,o));return[4,Promise.all(e)];case 1:return i.sent(),[2]}})})},e.prototype.diff=function(e){return r(this,void 0,void 0,function(){var t,n,o,A,a=this;return i(this,function(s){switch(s.label){case 0:t=e.slice(0),this.currentInitializers=t,this._items=[],n=0,s.label=1;case 1:return n<t.length?(o=t[n],this.currentInitalizerIndex=n,this.currentInitializer=o,this.willDispose.has(o.key)?(A=this.keyToItem.get(o.key)||null)?(this.currentItem=A,[4,this.options.updateItem(o,A)]):[3,3]:[3,6]):[3,9];case 2:return s.sent(),[3,5];case 3:return[4,this.options.buildItem(o)];case 4:A=s.sent(),s.label=5;case 5:return A&&(this.keyToInitializer.set(o.key,o),this.willDispose.delete(o.key),this._items.push(A)),[3,8];case 6:return this.inline=this.inlineDeferred,[4,this.options.buildItem(o)];case 7:A=s.sent(),this.inline=this.inlineImmediate,A&&(this.currentItem=A,this.deferredInlining&&(this.inline(this.deferredInlining),delete this.deferredInlining),this.keyToItem.set(o.key,A),this.keyToInitializer.set(o.key,o),this._items.push(A)),s.label=8;case 8:return delete this.currentItem,n++,[3,1];case 9:return this.willDispose.forEach(function(e){return r(a,void 0,void 0,function(){var t,n;return i(this,function(r){switch(r.label){case 0:return t=this.keyToItem.get(e),n=this.keyToInitializer.get(e),t&&n?[4,this.options.destroyItem(n,t)]:[2];case 1:return r.sent()&&(this.keyToItem.delete(e),this.keyToInitializer.delete(e)),[2]}})})}),this.willDispose.clear(),this.keyToInitializer.forEach(function(e){a.willDispose.add(e.key)}),this.currentInitializers=[],delete this.currentItem,delete this.currentInitializer,[2]}})})},e.prototype.getByKey=function(e){return this.keyToItem.get(e)},e.prototype.rebuild=function(){return r(this,void 0,void 0,function(){var e;return i(this,function(t){switch(t.label){case 0:return this.currentItem&&this.currentInitializer?(this.keyToItem.delete(this.currentItem.id),this.keyToInitializer.delete(this.currentItem.id),this.options.destroyItem(this.currentInitializer,this.currentItem),[4,this.options.buildItem(this.currentInitializer)]):[2];case 1:return(e=t.sent())&&(this.keyToItem.set(this.currentItem.id,e),this.keyToInitializer.set(this.currentItem.id,this.currentInitializer)),[2]}})})},e}();t.ReactiveDiff=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=n(9),o=n(4),A=Math.min,a=Math.max,s=Math.pow,c=Math.round,u=Math.sin,l=Math.PI,h=c(1e3*l)/1e3;function d(e,t,n){return A(a(e,t),n)}!function(e){e[e.NONE=1]="NONE",e[e.CONTINUOUS=4]="CONTINUOUS",e[e.REPEAT=2]="REPEAT",e[e.REFLECT=3]="REFLECT"}(r=t.AutoEasingLoopStyle||(t.AutoEasingLoopStyle={}));var f="\n${easingMethod} {\n  float p = 0.3;\n  float time = pow(2.0, -10.0 * t) * sin((t - p / 4.0) * (2.0 * "+h+") / p) + 1.0;\n  return (end - start) * time + start;\n}\n",p="\n${easingMethod} {\n  float time = t * t * t - t * 1.05 * sin(t * "+h+");\n  return (end - start) * time + start;\n}\n",g="\n${easingMethod} {\n  ${T} direction = end - start;\n  float amplitude = length(direction) * 2.0;\n  return start + direction * sin(t * "+h+" * 2.0) * amplitude;\n}\n",B=function(){function e(e,t,n,o){this.uid=i.uid(),this.delay=0,this.duration=500,this.loop=r.NONE,this.cpu=e,this.gpu=t,this.duration=n||500,this.methodName=o||"easingMethod"}return e.immediate=function(e,t,n){return void 0===t&&(t=0),void 0===n&&(n=r.NONE),{uid:i.uid(),cpu:function(e,t,n){return t},delay:t,duration:e,gpu:"\n${easingMethod} {\n  return end;\n}\n",loop:n,methodName:"immediate"}},e.linear=function(e,t,n){return void 0===t&&(t=0),void 0===n&&(n=r.NONE),{uid:i.uid(),cpu:function(e,t,n){var r=o.VecMath(e),i=r.add,A=r.scale,a=r.subtract;return n=d(n,0,1),i(A(a(t,e),n),e)},delay:t,duration:e,gpu:"\n${easingMethod} {\n  return (end - start) * t + start;\n}\n",loop:n,methodName:"linear"}},e.easeInQuad=function(e,t,n){return void 0===t&&(t=0),void 0===n&&(n=r.NONE),{uid:i.uid(),cpu:function(e,t,n){var r=(n=d(n,0,1))*n,i=o.VecMath(e);return(0,i.add)((0,i.scale)((0,i.subtract)(t,e),r),e)},delay:t,duration:e,gpu:"\n${easingMethod} {\n  float time = t * t;\n  return (end - start) * time + start;\n}\n",loop:n,methodName:"easeInQuad"}},e.easeOutQuad=function(e,t,n){return void 0===t&&(t=0),void 0===n&&(n=r.NONE),{uid:i.uid(),cpu:function(e,t,n){var r=(n=d(n,0,1))*(2-n),i=o.VecMath(e);return(0,i.add)((0,i.scale)((0,i.subtract)(t,e),r),e)},delay:t,duration:e,gpu:"\n${easingMethod} {\n  float time = t * (2.0 - t);\n  return (end - start) * time + start;\n}\n",loop:n,methodName:"easeOutQuad"}},e.easeInOutQuad=function(e,t,n){return void 0===t&&(t=0),void 0===n&&(n=r.NONE),{uid:i.uid(),cpu:function(e,t,n){var r=(n=d(n,0,1))<.5?2*n*n:(4-2*n)*n-1,i=o.VecMath(e);return(0,i.add)((0,i.scale)((0,i.subtract)(t,e),r),e)},delay:t,duration:e,gpu:"\n${easingMethod} {\n  float time = t < 0.5 ? 2.0 * t * t : -1.0 + (4.0 - 2.0 * t) * t;\n  return (end - start) * time + start;\n}\n",loop:n,methodName:"easeInOutQuad"}},e.easeInCubic=function(e,t,n){return void 0===t&&(t=0),void 0===n&&(n=r.NONE),{uid:i.uid(),cpu:function(e,t,n){var r=(n=d(n,0,1))*n*n,i=o.VecMath(e);return(0,i.add)((0,i.scale)((0,i.subtract)(t,e),r),e)},delay:t,duration:e,gpu:"\n${easingMethod} {\n  float time = t * t * t;\n  return (end - start) * time + start;\n}\n",loop:n,methodName:"easeInCubic"}},e.easeOutCubic=function(e,t,n){return void 0===t&&(t=0),void 0===n&&(n=r.NONE),{uid:i.uid(),cpu:function(e,t,n){n=d(n,0,1);var r=--n*n*n+1,i=o.VecMath(e);return(0,i.add)((0,i.scale)((0,i.subtract)(t,e),r),e)},delay:t,duration:e,gpu:"\n${easingMethod} {\n  float t1 = t - 1.0;\n  float time = t1 * t1 * t1 + 1.0;\n  return (end - start) * time + start;\n}\n",loop:n,methodName:"easeOutCubic"}},e.easeInOutCubic=function(e,t,n){return void 0===t&&(t=0),void 0===n&&(n=r.NONE),{uid:i.uid(),cpu:function(e,t,n){var r=(n=d(n,0,1))<.5?4*n*n*n:(n-1)*(2*n-2)*(2*n-2)+1,i=o.VecMath(e);return(0,i.add)((0,i.scale)((0,i.subtract)(t,e),r),e)},delay:t,duration:e,gpu:"\n${easingMethod} {\n  float time = t < 0.5 ? 4.0 * t * t * t : (t - 1.0) * (2.0 * t - 2.0) * (2.0 * t - 2.0) + 1.0;\n  return (end - start) * time + start;\n}\n",loop:n,methodName:"easeInOutCubic"}},e.easeInQuart=function(e,t,n){return void 0===t&&(t=0),void 0===n&&(n=r.NONE),{uid:i.uid(),cpu:function(e,t,n){var r=(n=d(n,0,1))*n*n*n,i=o.VecMath(e);return(0,i.add)((0,i.scale)((0,i.subtract)(t,e),r),e)},delay:t,duration:e,gpu:"\n${easingMethod} {\n  float time = t * t * t * t;\n  return (end - start) * time + start;\n}\n",loop:n,methodName:"easeInQuart"}},e.easeOutQuart=function(e,t,n){return void 0===t&&(t=0),void 0===n&&(n=r.NONE),{uid:i.uid(),cpu:function(e,t,n){n=d(n,0,1);var r=1- --n*n*n*n,i=o.VecMath(e);return(0,i.add)((0,i.scale)((0,i.subtract)(t,e),r),e)},delay:t,duration:e,gpu:"\n${easingMethod} {\n  float t1 = t - 1.0;\n  float time = 1.0 - t1 * t1 * t1 * t1;\n  return (end - start) * time + start;\n}\n",loop:n,methodName:"easeOutQuart"}},e.easeInOutQuart=function(e,t,n){return void 0===t&&(t=0),void 0===n&&(n=r.NONE),{uid:i.uid(),cpu:function(e,t,n){var r=(n=d(n,0,1))<.5?8*n*n*n*n:1-8*--n*n*n*n,i=o.VecMath(e);return(0,i.add)((0,i.scale)((0,i.subtract)(t,e),r),e)},delay:t,duration:e,gpu:"\n${easingMethod} {\n  float t1 = t - 1.0;\n  float time = t < 0.5 ? 8.0 * t * t * t * t : 1.0 - 8.0 * t1 * t1 * t1 * t1;\n  return (end - start) * time + start;\n}\n",loop:n,methodName:"easeInOutQuart"}},e.easeInQuint=function(e,t,n){return void 0===t&&(t=0),void 0===n&&(n=r.NONE),{uid:i.uid(),cpu:function(e,t,n){var r=(n=d(n,0,1))*n*n*n*n,i=o.VecMath(e);return(0,i.add)((0,i.scale)((0,i.subtract)(t,e),r),e)},delay:t,duration:e,gpu:"\n${easingMethod} {\n  float time = t * t * t * t * t;\n  return (end - start) * time + start;\n}\n",loop:n,methodName:"easeInQuint"}},e.easeOutQuint=function(e,t,n){return void 0===t&&(t=0),void 0===n&&(n=r.NONE),{uid:i.uid(),cpu:function(e,t,n){n=d(n,0,1);var r=1+--n*n*n*n*n,i=o.VecMath(e);return(0,i.add)((0,i.scale)((0,i.subtract)(t,e),r),e)},delay:t,duration:e,gpu:"\n${easingMethod} {\n  float t1 = t - 1.0;\n  float time = 1.0 + t1 * t1 * t1 * t1 * t1;\n  return (end - start) * time + start;\n}\n",loop:n,methodName:"easeOutQuint"}},e.easeInOutQuint=function(e,t,n){return void 0===t&&(t=0),void 0===n&&(n=r.NONE),{uid:i.uid(),cpu:function(e,t,n){var r=(n=d(n,0,1))<.5?16*n*n*n*n*n:1+16*--n*n*n*n*n,i=o.VecMath(e);return(0,i.add)((0,i.scale)((0,i.subtract)(t,e),r),e)},delay:t,duration:e,gpu:"\n${easingMethod} {\n  float t1 = t - 1.0;\n  float time = t < 0.5 ? 16.0 * t * t * t * t * t : 1.0 + 16.0 * t1 * t1 * t1 * t1 * t1;\n  return (end - start) * time + start;\n}\n",loop:n,methodName:"easeInOutQuint"}},e.easeOutElastic=function(e,t,n){return void 0===t&&(t=0),void 0===n&&(n=r.NONE),{uid:i.uid(),cpu:function(e,t,n){n=d(n,0,1);var r=s(2,-10*n)*u(2*l*(n-.075)/.3)+1,i=o.VecMath(e);return(0,i.add)((0,i.scale)((0,i.subtract)(t,e),r),e)},delay:t,duration:e,gpu:f,loop:n,methodName:"easeOutElastic"}},e.easeBackIn=function(e,t,n){return void 0===t&&(t=0),void 0===n&&(n=r.NONE),{uid:i.uid(),cpu:function(e,t,n){var r=(n=d(n,0,1))*n*n-1.05*n*u(n*l),i=o.VecMath(e);return(0,i.add)((0,i.scale)((0,i.subtract)(t,e),r),e)},delay:t,duration:e,gpu:p,loop:n,methodName:"easeBackIn"}},e.easeBackOut=function(e,t,n){return void 0===t&&(t=0),void 0===n&&(n=r.NONE),{uid:i.uid(),cpu:function(e,t,n){var r=(n=d(n,0,1))-1,i=r*r*(2.7*r+1.7)+1,A=o.VecMath(e);return(0,A.add)((0,A.scale)((0,A.subtract)(t,e),i),e)},delay:t,duration:e,gpu:"\n${easingMethod} {\n  float t1 = t - 1.0;\n  float a = 1.7;\n  float time = (t1 * t1 * ((a + 1.0) * t1 + a) + 1.0);\n  return (end - start) * time + start;\n}\n",loop:n,methodName:"easeBackOut"}},e.easeBackInOut=function(e,t,n){return void 0===t&&(t=0),void 0===n&&(n=r.NONE),{uid:i.uid(),cpu:function(e,t,n){var r=2.5925,i=(n=d(n,0,1))/.5,A=i-2,a=i<1?.5*(i*i*(r+1)*i-r):.5*(A*A*((r+1)*A+r)+2),s=o.VecMath(e);return(0,s.add)((0,s.scale)((0,s.subtract)(t,e),a),e)},delay:t,duration:e,gpu:"\n${easingMethod} {\n  float a = 1.4;\n  float a1 = a * 1.525;\n  float t1 = t / 0.5;\n  float t2 = t1 - 2.0;\n  float time =\n    (t1 < 1.0) ? 0.5 * (t1 * t1 * (a1 + 1.0) * t1 - a1) :\n    0.5 * (t2 * t2 * ((a1 + 1.0) * t2 + a1) + 2.0)\n  ;\n\n  return (end - start) * time + start;\n}\n",loop:n,methodName:"easeBackInOut"}},e.continuousSinusoidal=function(e,t,n){return void 0===t&&(t=0),void 0===n&&(n=r.CONTINUOUS),{uid:i.uid(),cpu:function(e,t,n){var r=o.VecMath(e),i=r.add,A=r.length,a=r.scale,s=r.subtract;n=d(n,0,1);var c=s(t,e),h=2*A(c);return i(e,a(c,u(n*l*2)*h))},delay:t,duration:e,gpu:g,loop:n,methodName:"repeatingSinusoidal",validation:{ignoreEndValueCheck:!0,ignoreOverTimeCheck:!0}}},e}();t.AutoEasingMethod=B},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){var e=this;this.promise=new Promise(function(t,n){return e.resolver=t,e.rejector=n})}return e.prototype.resolve=function(e){this.resolver(e)},e.prototype.reject=function(e){this.rejector(e)},e}();t.PromiseResolver=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(48),i=n(9),o=n(4),A=r.AutoEasingMethod.immediate(0),a=function(){function e(e,t){this._id=i.uid(),this.animation=r.AutoEasingMethod.immediate(0),this.animationEndTime=0,this.offsetBroadcastTime=0,this.scaleBroadcastTime=0,this._offset=[0,0,0],this.startOffset=[0,0,0],this.startOffsetTime=0,this.offsetEndTime=0,this._scale=[1,1,1],this.startScale=[1,1,1],this.startScaleTime=0,this.scaleEndTime=0,this._needsViewDrawn=!0,this.needsBroadcast=!1,this.camera=e,t&&(this._offset=o.copy3(t.offset||this._offset),this._scale=o.copy3(t.scale||this._scale))}return Object.defineProperty(e.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0}),e.prototype.broadcast=function(e){this.offset,this.scale,this.needsBroadcast&&(this.needsBroadcast=!1,this.onViewChange&&this.onViewChange(this.camera,e))},e.prototype.centerOn=function(e,t){var n=this.surface.getViewSize(e);if(n){var r=[n.width/2,n.height/2,0],i=o.subtract3(t,o.divide3(r,this._scale)),a=this.animation;this.setOffset(o.copy3(this.offset)),this.animation=A,this.setOffset(o.scale3(i,-1)),this.animation=a}},e.prototype.getCurrentTime=function(){return this.surface?this.surface.frameMetrics.currentTime:0},e.prototype.getOffset=function(){return this._offset},e.prototype.getScale=function(){return this._scale},Object.defineProperty(e.prototype,"needsViewDrawn",{get:function(){return this._needsViewDrawn},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"offset",{get:function(){var e=this.getCurrentTime();return this.onViewChange&&this.offsetBroadcastTime<this.offsetEndTime&&(this.offsetBroadcastTime=e,this.needsBroadcast=!0),this.animation.cpu(this.startOffset,this._offset,(e-this.startOffsetTime)/this.animation.duration)},enumerable:!0,configurable:!0}),e.prototype.setId=function(e){this._id=e,this._needsViewDrawn=!0},e.prototype.setOffset=function(e){this.startOffset=o.copy3(this.offset),this._offset=o.copy3(e),this.startOffsetTime=this.getCurrentTime(),this.offsetEndTime=this.startOffsetTime+this.animation.duration,this.updateEndTime(),this._needsViewDrawn=!0,this.onViewChange&&(this.offsetBroadcastTime=this.startOffsetTime,this.needsBroadcast=!0)},Object.defineProperty(e.prototype,"scale",{get:function(){var e=this.getCurrentTime();return this.onViewChange&&this.scaleBroadcastTime<this.scaleEndTime&&(this.scaleBroadcastTime=e,this.needsBroadcast=!0),this.animation.cpu(this.startScale,this._scale,(e-this.startScaleTime)/this.animation.duration)},enumerable:!0,configurable:!0}),e.prototype.setViewChangeHandler=function(e){this.onViewChange=e},e.prototype.setScale=function(e){this.startScale=o.copy3(this.scale),this._scale=o.copy3(e),this.startScaleTime=this.getCurrentTime(),this.scaleEndTime=this.startScaleTime+this.animation.duration,this.updateEndTime(),this._needsViewDrawn=!0,this.onViewChange&&(this.scaleBroadcastTime=this.startScaleTime,this.needsBroadcast=!0)},e.prototype.resolve=function(){this._needsViewDrawn=!1,this.needsBroadcast=!1},e.prototype.update=function(){this._needsViewDrawn=!0},e.prototype.updateEndTime=function(){this.animationEndTime=Math.max(this.scaleEndTime,this.offsetEndTime)},e}();t.Control2D=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(11);t.drawMode=function(e,t){switch(t){case r.GLSettings.Model.DrawMode.LINES:return e.LINES;case r.GLSettings.Model.DrawMode.LINE_LOOP:return e.LINE_LOOP;case r.GLSettings.Model.DrawMode.LINE_STRIP:return e.LINE_STRIP;case r.GLSettings.Model.DrawMode.POINTS:return e.POINTS;case r.GLSettings.Model.DrawMode.TRIANGLES:return e.TRIANGLES;case r.GLSettings.Model.DrawMode.TRIANGLE_FAN:return e.TRIANGLE_FAN;case r.GLSettings.Model.DrawMode.TRIANGLE_STRIP:return e.TRIANGLE_STRIP;default:return e.TRIANGLES}},t.texelFormat=function(e,t){switch(t){case r.GLSettings.Texture.TexelDataType.Alpha:return e.ALPHA;case r.GLSettings.Texture.TexelDataType.DepthComponent:return e.DEPTH_COMPONENT;case r.GLSettings.Texture.TexelDataType.DepthStencil:return e.DEPTH_STENCIL;case r.GLSettings.Texture.TexelDataType.Luminance:return e.LUMINANCE;case r.GLSettings.Texture.TexelDataType.LuminanceAlpha:return e.LUMINANCE_ALPHA;case r.GLSettings.Texture.TexelDataType.RGB:return e.RGB;case r.GLSettings.Texture.TexelDataType.RGBA:return e.RGBA;default:return console.warn("An Unsupported texel format was provided",t),e.RGBA}},t.inputImageFormat=function(e,t){switch(t){case r.GLSettings.Texture.SourcePixelFormat.Byte:return e.BYTE;case r.GLSettings.Texture.SourcePixelFormat.Float:return e.FLOAT;case r.GLSettings.Texture.SourcePixelFormat.HalfFloat:return console.warn("Unsupported HALF_FLOAT"),e.BYTE;case r.GLSettings.Texture.SourcePixelFormat.Int:return e.INT;case r.GLSettings.Texture.SourcePixelFormat.Short:return e.SHORT;case r.GLSettings.Texture.SourcePixelFormat.UnsignedByte:return e.UNSIGNED_BYTE;case r.GLSettings.Texture.SourcePixelFormat.UnsignedInt:return e.UNSIGNED_INT;case r.GLSettings.Texture.SourcePixelFormat.UnsignedShort:return e.UNSIGNED_SHORT;case r.GLSettings.Texture.SourcePixelFormat.UnsignedShort_4_4_4_4:return e.UNSIGNED_SHORT_4_4_4_4;case r.GLSettings.Texture.SourcePixelFormat.UnsignedShort_5_5_5_1:return e.UNSIGNED_SHORT_5_5_5_1;case r.GLSettings.Texture.SourcePixelFormat.UnsignedShort_5_6_5:return e.UNSIGNED_SHORT_5_6_5;default:return console.warn("An Unsupported input image format was provided",t),e.BYTE}},t.magFilter=function(e,t,n){if(!n)return e.LINEAR;switch(t){case r.GLSettings.Texture.TextureMagFilter.Linear:return e.LINEAR;case r.GLSettings.Texture.TextureMagFilter.Nearest:return e.NEAREST}},t.minFilter=function(e,t,n,i){if(!n)return e.LINEAR;switch(t){case r.GLSettings.Texture.TextureMinFilter.Linear:return e.LINEAR;case r.GLSettings.Texture.TextureMinFilter.Nearest:return e.NEAREST;case r.GLSettings.Texture.TextureMinFilter.LinearMipMapLinear:return i?e.LINEAR_MIPMAP_LINEAR:e.LINEAR;case r.GLSettings.Texture.TextureMinFilter.LinearMipMapNearest:return i?e.LINEAR_MIPMAP_NEAREST:e.LINEAR;case r.GLSettings.Texture.TextureMinFilter.NearestMipMapLinear:return i?e.NEAREST_MIPMAP_LINEAR:e.NEAREST;case r.GLSettings.Texture.TextureMinFilter.NearestMipMapNearest:return i?e.NEAREST_MIPMAP_NEAREST:e.NEAREST;default:return e.LINEAR}},t.colorBufferFormat=function(e,t){switch(t){case r.GLSettings.RenderTarget.ColorBufferFormat.RGB565:return e.RGB565;case r.GLSettings.RenderTarget.ColorBufferFormat.RGB5_A1:return e.RGB5_A1;case r.GLSettings.RenderTarget.ColorBufferFormat.RGBA4:default:return e.RGBA4}},t.depthBufferFormat=function(e,t){switch(t){case r.GLSettings.RenderTarget.DepthBufferFormat.DEPTH_COMPONENT16:return e.DEPTH_COMPONENT16;case r.GLSettings.RenderTarget.DepthBufferFormat.DEPTH_STENCIL:return e.DEPTH_STENCIL;default:return e.DEPTH_COMPONENT16}},t.stencilBufferFormat=function(e,t){switch(t){case r.GLSettings.RenderTarget.StencilBufferFormat.STENCIL_INDEX8:default:return e.STENCIL_INDEX8}},t.wrapMode=function(e,t){switch(t){case r.GLSettings.Texture.Wrapping.CLAMP_TO_EDGE:return e.CLAMP_TO_EDGE;case r.GLSettings.Texture.Wrapping.MIRRORED_REPEAT:return e.MIRRORED_REPEAT;case r.GLSettings.Texture.Wrapping.REPEAT:return e.REPEAT}},t.indexToColorAttachment=function(e,t,n,r){if(r)return e.COLOR_ATTACHMENT0;var i=t.drawBuffers;if(i instanceof WebGL2RenderingContext)switch(n){case 0:return i.COLOR_ATTACHMENT0;case 1:return i.COLOR_ATTACHMENT1;case 2:return i.COLOR_ATTACHMENT2;case 3:return i.COLOR_ATTACHMENT3;case 4:return i.COLOR_ATTACHMENT4;case 5:return i.COLOR_ATTACHMENT5;case 6:return i.COLOR_ATTACHMENT6;case 7:return i.COLOR_ATTACHMENT7;case 8:return i.COLOR_ATTACHMENT8;case 9:return i.COLOR_ATTACHMENT9;case 10:return i.COLOR_ATTACHMENT10;case 11:return i.COLOR_ATTACHMENT11;case 12:return i.COLOR_ATTACHMENT12;case 13:return i.COLOR_ATTACHMENT13;case 14:return i.COLOR_ATTACHMENT14;case 15:return i.COLOR_ATTACHMENT15}else if(i)switch(n){case 0:return i.COLOR_ATTACHMENT0_WEBGL;case 1:return i.COLOR_ATTACHMENT1_WEBGL;case 2:return i.COLOR_ATTACHMENT2_WEBGL;case 3:return i.COLOR_ATTACHMENT3_WEBGL;case 4:return i.COLOR_ATTACHMENT4_WEBGL;case 5:return i.COLOR_ATTACHMENT5_WEBGL;case 6:return i.COLOR_ATTACHMENT6_WEBGL;case 7:return i.COLOR_ATTACHMENT7_WEBGL;case 8:return i.COLOR_ATTACHMENT8_WEBGL;case 9:return i.COLOR_ATTACHMENT9_WEBGL;case 10:return i.COLOR_ATTACHMENT10_WEBGL;case 11:return i.COLOR_ATTACHMENT11_WEBGL;case 12:return i.COLOR_ATTACHMENT12_WEBGL;case 13:return i.COLOR_ATTACHMENT13_WEBGL;case 14:return i.COLOR_ATTACHMENT14_WEBGL;case 15:return i.COLOR_ATTACHMENT15_WEBGL}return e.COLOR_ATTACHMENT0},t.indexToTextureUnit=function(e,t){return e.TEXTURE0+t},t.textureUnitToIndex=function(e,t){return t-e.TEXTURE0}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseTextDecoration=t.TEXT_DECORATION_LINE=t.TEXT_DECORATION=t.TEXT_DECORATION_STYLE=void 0;var r,i=n(12),o=(r=i)&&r.__esModule?r:{default:r};var A=t.TEXT_DECORATION_STYLE={SOLID:0,DOUBLE:1,DOTTED:2,DASHED:3,WAVY:4},a=t.TEXT_DECORATION={NONE:null},s=t.TEXT_DECORATION_LINE={UNDERLINE:1,OVERLINE:2,LINE_THROUGH:3,BLINK:4},c=function(e){switch(e){case"underline":return s.UNDERLINE;case"overline":return s.OVERLINE;case"line-through":return s.LINE_THROUGH}return s.BLINK};t.parseTextDecoration=function(e){var t,n="none"===(t=e.textDecorationLine?e.textDecorationLine:e.textDecoration)?null:t.split(" ").map(c);return null===n?a.NONE:{textDecorationLine:n,textDecorationColor:e.textDecorationColor?new o.default(e.textDecorationColor):null,textDecorationStyle:function(e){switch(e){case"double":return A.DOUBLE;case"dotted":return A.DOTTED;case"dashed":return A.DASHED;case"wavy":return A.WAVY}return A.SOLID}(e.textDecorationStyle)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseBorder=t.BORDER_SIDES=t.BORDER_STYLE=void 0;var r,i=n(12),o=(r=i)&&r.__esModule?r:{default:r};var A=t.BORDER_STYLE={NONE:0,SOLID:1},a=t.BORDER_SIDES={TOP:0,RIGHT:1,BOTTOM:2,LEFT:3},s=Object.keys(a).map(function(e){return e.toLowerCase()});t.parseBorder=function(e){return s.map(function(t){var n=new o.default(e.getPropertyValue("border-"+t+"-color")),r=function(e){switch(e){case"none":return A.NONE}return A.SOLID}(e.getPropertyValue("border-"+t+"-style")),i=parseFloat(e.getPropertyValue("border-"+t+"-width"));return{borderColor:n,borderStyle:r,borderWidth:isNaN(i)?0:i}})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.toCodePoints=function(e){for(var t=[],n=0,r=e.length;n<r;){var i=e.charCodeAt(n++);if(i>=55296&&i<=56319&&n<r){var o=e.charCodeAt(n++);56320==(64512&o)?t.push(((1023&i)<<10)+(1023&o)+65536):(t.push(i),n--)}else t.push(i)}return t},t.fromCodePoint=function(){if(String.fromCodePoint)return String.fromCodePoint.apply(String,arguments);var e=arguments.length;if(!e)return"";for(var t=[],n=-1,r="";++n<e;){var i=arguments.length<=n?void 0:arguments[n];i<=65535?t.push(i):(i-=65536,t.push(55296+(i>>10),i%1024+56320)),(n+1===e||t.length>16384)&&(r+=String.fromCharCode.apply(String,t),t.length=0)}return r};for(var r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i="undefined"==typeof Uint8Array?[]:new Uint8Array(256),o=0;o<r.length;o++)i[r.charCodeAt(o)]=o;t.decode=function(e){var t=.75*e.length,n=e.length,r=void 0,o=0,A=void 0,a=void 0,s=void 0,c=void 0;"="===e[e.length-1]&&(t--,"="===e[e.length-2]&&t--);var u="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array&&void 0!==Uint8Array.prototype.slice?new ArrayBuffer(t):new Array(t),l=Array.isArray(u)?u:new Uint8Array(u);for(r=0;r<n;r+=4)A=i[e.charCodeAt(r)],a=i[e.charCodeAt(r+1)],s=i[e.charCodeAt(r+2)],c=i[e.charCodeAt(r+3)],l[o++]=A<<2|a>>4,l[o++]=(15&a)<<4|s>>2,l[o++]=(3&s)<<6|63&c;return u},t.polyUint16Array=function(e){for(var t=e.length,n=[],r=0;r<t;r+=2)n.push(e[r+1]<<8|e[r]);return n},t.polyUint32Array=function(e){for(var t=e.length,n=[],r=0;r<t;r+=4)n.push(e[r+3]<<24|e[r+2]<<16|e[r+1]<<8|e[r]);return n}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createCounterText=t.inlineListItemElement=t.getListOwner=void 0;var r=n(18),i=s(n(17)),o=s(n(38)),A=n(37),a=n(92);function s(e){return e&&e.__esModule?e:{default:e}}var c=["OL","UL","MENU"],u=(t.getListOwner=function(e){var t=e.parent;if(!t)return null;do{if(-1!==c.indexOf(t.tagName))return t;t=t.parent}while(t);return e.parent},t.inlineListItemElement=function(e,t,n){var a=t.style.listStyle;if(a){var s=e.ownerDocument.defaultView.getComputedStyle(e,null),c=e.ownerDocument.createElement("html2canvaswrapper");switch((0,r.copyCSSStyles)(s,c),c.style.position="absolute",c.style.bottom="auto",c.style.display="block",c.style.letterSpacing="normal",a.listStylePosition){case A.LIST_STYLE_POSITION.OUTSIDE:c.style.left="auto",c.style.right=e.ownerDocument.defaultView.innerWidth-t.bounds.left-t.style.margin[1].getAbsoluteValue(t.bounds.width)+7+"px",c.style.textAlign="right";break;case A.LIST_STYLE_POSITION.INSIDE:c.style.left=t.bounds.left-t.style.margin[3].getAbsoluteValue(t.bounds.width)+"px",c.style.right="auto",c.style.textAlign="left"}var u=void 0,l=t.style.margin[0].getAbsoluteValue(t.bounds.width),h=a.listStyleImage;if(h)if("url"===h.method){var d=e.ownerDocument.createElement("img");d.src=h.args[0],c.style.top=t.bounds.top-l+"px",c.style.width="auto",c.style.height="auto",c.appendChild(d)}else{var f=.5*parseFloat(t.style.font.fontSize);c.style.top=t.bounds.top-l+t.bounds.height-1.5*f+"px",c.style.width=f+"px",c.style.height=f+"px",c.style.backgroundImage=s.listStyleImage}else"number"==typeof t.listIndex&&(u=e.ownerDocument.createTextNode(y(t.listIndex,a.listStyleType,!0)),c.appendChild(u),c.style.top=t.bounds.top-l+"px");var p=e.ownerDocument.body;p.appendChild(c),u?(t.childNodes.push(o.default.fromTextNode(u,t)),p.removeChild(c)):t.childNodes.push(new i.default(c,t,n,0))}},{integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]}),l={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["Ք","Փ","Ւ","Ց","Ր","Տ","Վ","Ս","Ռ","Ջ","Պ","Չ","Ո","Շ","Ն","Յ","Մ","Ճ","Ղ","Ձ","Հ","Կ","Ծ","Խ","Լ","Ի","Ժ","Թ","Ը","Է","Զ","Ե","Դ","Գ","Բ","Ա"]},h={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["י׳","ט׳","ח׳","ז׳","ו׳","ה׳","ד׳","ג׳","ב׳","א׳","ת","ש","ר","ק","צ","פ","ע","ס","נ","מ","ל","כ","יט","יח","יז","טז","טו","י","ט","ח","ז","ו","ה","ד","ג","ב","א"]},d={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["ჵ","ჰ","ჯ","ჴ","ხ","ჭ","წ","ძ","ც","ჩ","შ","ყ","ღ","ქ","ფ","ჳ","ტ","ს","რ","ჟ","პ","ო","ჲ","ნ","მ","ლ","კ","ი","თ","ჱ","ზ","ვ","ე","დ","გ","ბ","ა"]},f=function(e,t,n,r,i,o){return e<t||e>n?y(e,i,o.length>0):r.integers.reduce(function(t,n,i){for(;e>=n;)e-=n,t+=r.values[i];return t},"")+o},p=function(e,t,n,r){var i="";do{n||e--,i=r(e)+i,e/=t}while(e*t>=t);return i},g=function(e,t,n,r,i){var o=n-t+1;return(e<0?"-":"")+(p(Math.abs(e),o,r,function(e){return(0,a.fromCodePoint)(Math.floor(e%o)+t)})+i)},B=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:". ",r=t.length;return p(Math.abs(e),r,!1,function(e){return t[Math.floor(e%r)]})+n},w=function(e,t,n,i,o,a){if(e<-9999||e>9999)return y(e,A.LIST_STYLE_TYPE.CJK_DECIMAL,o.length>0);var s=Math.abs(e),c=o;if(0===s)return t[0]+c;for(var u=0;s>0&&u<=4;u++){var l=s%10;0===l&&(0,r.contains)(a,1)&&""!==c?c=t[l]+c:l>1||1===l&&0===u||1===l&&1===u&&(0,r.contains)(a,2)||1===l&&1===u&&(0,r.contains)(a,4)&&e>100||1===l&&u>1&&(0,r.contains)(a,8)?c=t[l]+(u>0?n[u-1]:"")+c:1===l&&u>0&&(c=n[u-1]+c),s=Math.floor(s/10)}return(e<0?i:"")+c},y=t.createCounterText=function(e,t,n){var r=n?". ":"",i=n?"、":"",o=n?", ":"";switch(t){case A.LIST_STYLE_TYPE.DISC:return"•";case A.LIST_STYLE_TYPE.CIRCLE:return"◦";case A.LIST_STYLE_TYPE.SQUARE:return"◾";case A.LIST_STYLE_TYPE.DECIMAL_LEADING_ZERO:var a=g(e,48,57,!0,r);return a.length<4?"0"+a:a;case A.LIST_STYLE_TYPE.CJK_DECIMAL:return B(e,"〇一二三四五六七八九",i);case A.LIST_STYLE_TYPE.LOWER_ROMAN:return f(e,1,3999,u,A.LIST_STYLE_TYPE.DECIMAL,r).toLowerCase();case A.LIST_STYLE_TYPE.UPPER_ROMAN:return f(e,1,3999,u,A.LIST_STYLE_TYPE.DECIMAL,r);case A.LIST_STYLE_TYPE.LOWER_GREEK:return g(e,945,969,!1,r);case A.LIST_STYLE_TYPE.LOWER_ALPHA:return g(e,97,122,!1,r);case A.LIST_STYLE_TYPE.UPPER_ALPHA:return g(e,65,90,!1,r);case A.LIST_STYLE_TYPE.ARABIC_INDIC:return g(e,1632,1641,!0,r);case A.LIST_STYLE_TYPE.ARMENIAN:case A.LIST_STYLE_TYPE.UPPER_ARMENIAN:return f(e,1,9999,l,A.LIST_STYLE_TYPE.DECIMAL,r);case A.LIST_STYLE_TYPE.LOWER_ARMENIAN:return f(e,1,9999,l,A.LIST_STYLE_TYPE.DECIMAL,r).toLowerCase();case A.LIST_STYLE_TYPE.BENGALI:return g(e,2534,2543,!0,r);case A.LIST_STYLE_TYPE.CAMBODIAN:case A.LIST_STYLE_TYPE.KHMER:return g(e,6112,6121,!0,r);case A.LIST_STYLE_TYPE.CJK_EARTHLY_BRANCH:return B(e,"子丑寅卯辰巳午未申酉戌亥",i);case A.LIST_STYLE_TYPE.CJK_HEAVENLY_STEM:return B(e,"甲乙丙丁戊己庚辛壬癸",i);case A.LIST_STYLE_TYPE.CJK_IDEOGRAPHIC:case A.LIST_STYLE_TYPE.TRAD_CHINESE_INFORMAL:return w(e,"零一二三四五六七八九","十百千萬","負",i,14);case A.LIST_STYLE_TYPE.TRAD_CHINESE_FORMAL:return w(e,"零壹貳參肆伍陸柒捌玖","拾佰仟萬","負",i,15);case A.LIST_STYLE_TYPE.SIMP_CHINESE_INFORMAL:return w(e,"零一二三四五六七八九","十百千萬","负",i,14);case A.LIST_STYLE_TYPE.SIMP_CHINESE_FORMAL:return w(e,"零壹贰叁肆伍陆柒捌玖","拾佰仟萬","负",i,15);case A.LIST_STYLE_TYPE.JAPANESE_INFORMAL:return w(e,"〇一二三四五六七八九","十百千万","マイナス",i,0);case A.LIST_STYLE_TYPE.JAPANESE_FORMAL:return w(e,"零壱弐参四伍六七八九","拾百千万","マイナス",i,7);case A.LIST_STYLE_TYPE.KOREAN_HANGUL_FORMAL:return w(e,"영일이삼사오육칠팔구","십백천만","마이너스 ",o,7);case A.LIST_STYLE_TYPE.KOREAN_HANJA_INFORMAL:return w(e,"零一二三四五六七八九","十百千萬","마이너스 ",o,0);case A.LIST_STYLE_TYPE.KOREAN_HANJA_FORMAL:return w(e,"零壹貳參四五六七八九","拾百千","마이너스 ",o,7);case A.LIST_STYLE_TYPE.DEVANAGARI:return g(e,2406,2415,!0,r);case A.LIST_STYLE_TYPE.GEORGIAN:return f(e,1,19999,d,A.LIST_STYLE_TYPE.DECIMAL,r);case A.LIST_STYLE_TYPE.GUJARATI:return g(e,2790,2799,!0,r);case A.LIST_STYLE_TYPE.GURMUKHI:return g(e,2662,2671,!0,r);case A.LIST_STYLE_TYPE.HEBREW:return f(e,1,10999,h,A.LIST_STYLE_TYPE.DECIMAL,r);case A.LIST_STYLE_TYPE.HIRAGANA:return B(e,"あいうえおかきくけこさしすせそたちつてとなにぬねのはひふへほまみむめもやゆよらりるれろわゐゑをん");case A.LIST_STYLE_TYPE.HIRAGANA_IROHA:return B(e,"いろはにほへとちりぬるをわかよたれそつねならむうゐのおくやまけふこえてあさきゆめみしゑひもせす");case A.LIST_STYLE_TYPE.KANNADA:return g(e,3302,3311,!0,r);case A.LIST_STYLE_TYPE.KATAKANA:return B(e,"アイウエオカキクケコサシスセソタチツテトナニヌネノハヒフヘホマミムメモヤユヨラリルレロワヰヱヲン",i);case A.LIST_STYLE_TYPE.KATAKANA_IROHA:return B(e,"イロハニホヘトチリヌルヲワカヨタレソツネナラムウヰノオクヤマケフコエテアサキユメミシヱヒモセス",i);case A.LIST_STYLE_TYPE.LAO:return g(e,3792,3801,!0,r);case A.LIST_STYLE_TYPE.MONGOLIAN:return g(e,6160,6169,!0,r);case A.LIST_STYLE_TYPE.MYANMAR:return g(e,4160,4169,!0,r);case A.LIST_STYLE_TYPE.ORIYA:return g(e,2918,2927,!0,r);case A.LIST_STYLE_TYPE.PERSIAN:return g(e,1776,1785,!0,r);case A.LIST_STYLE_TYPE.TAMIL:return g(e,3046,3055,!0,r);case A.LIST_STYLE_TYPE.TELUGU:return g(e,3174,3183,!0,r);case A.LIST_STYLE_TYPE.THAI:return g(e,3664,3673,!0,r);case A.LIST_STYLE_TYPE.TIBETAN:return g(e,3872,3881,!0,r);case A.LIST_STYLE_TYPE.DECIMAL:default:return g(e,48,57,!0,r)}}},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o=n(22),A=n(40),a=n(0),s=new o.Texture({data:{width:2,height:2,buffer:new Uint8Array(16)}});var c=function(e){function t(t,n){var r=e.call(this)||this;return r.manager=n,r.resourceType=t,r}return i(t,e),t.prototype.expand=function(e,t,n,r){var i=this,o=this.manager,A=[],c=new Map;t.forEach(function(e){if(r=e,o=i.manager.router,s=i.resourceType,r&&r.resource&&o.getResourceType(r.resource.key())===s&&void 0!==r.resource.name&&void 0!==r.resource.key){void 0===e.size&&(e.size=a.InstanceAttributeSize.FOUR);var t=e.resource.shaderInjection||a.ShaderInjectionTarget.FRAGMENT,n=c.get(e.resource.name);n?c.set(e.resource.name,[n[0]||t===a.ShaderInjectionTarget.VERTEX||t===a.ShaderInjectionTarget.ALL,n[1]||t===a.ShaderInjectionTarget.FRAGMENT||t===a.ShaderInjectionTarget.ALL]):(A.push(e),c.set(e.resource.name,[t===a.ShaderInjectionTarget.VERTEX||t===a.ShaderInjectionTarget.ALL,t===a.ShaderInjectionTarget.FRAGMENT||t===a.ShaderInjectionTarget.ALL]))}var r,o,s});var u=A.map(function(e){var t=a.ShaderInjectionTarget.FRAGMENT;if(e.resource){var n=c.get(e.resource.name);n&&(t=n[0]&&n[1]&&a.ShaderInjectionTarget.ALL||n[0]&&!n[1]&&a.ShaderInjectionTarget.VERTEX||!n[0]&&n[1]&&a.ShaderInjectionTarget.FRAGMENT||t)}return[{name:e.resource.name,shaderInjection:t,size:a.UniformSize.ATLAS,update:function(){var t=o.getResource(e.resource.key());return t&&t.texture||s}},{name:e.resource.name+"_size",shaderInjection:t,size:a.UniformSize.TWO,update:function(){var t=o.getResource(e.resource.key());if(t){var n=t.texture;if(n&&n.data){var r=n.data;return[r.width||1,r.height||1]}}return[1,1]}}]}),l=[];return u.forEach(function(e){return e.forEach(function(e){return l.push(e)})}),{instanceAttributes:[],vertexAttributes:[],uniforms:l}},t.prototype.validate=function(e,t,n,r){var i=!1;return t.forEach(function(e){e.easing&&e.resource&&(console.warn("An instance attribute can not have both easing and resource properties. Undefined behavior will occur."),console.warn(e),i=!0)}),!i},t.prototype.processHeaderInjection=function(e,t,n,r,i,o,A){for(var s=0,c=A.length;s<c;++s){var u=A[s],l=u.shaderInjection||a.ShaderInjectionTarget.VERTEX;u.size===a.UniformSize.ATLAS&&l===e&&this.setDeclaration(t,u.name,"uniform sampler2D "+u.name+";\n","TextureIOExpansion")}return{injection:""}},t}(A.BaseIOExpansion);t.TextureIOExpansion=c},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var A=n(22),a=n(0),s=n(20),c=n(25),u=n(16),l=n(2)("performance");t.createAtlas=function(e){return o({key:"",type:a.ResourceType.ATLAS},e)},t.isAtlasResource=function(e){return e&&e.type===a.ResourceType.ATLAS};var h=function(e){function t(t){var n=e.call(this,t)||this;n.resourceReferences=new Map,n.type=a.ResourceType.ATLAS;var r=document.createElement("canvas");return n.width=r.width=t.width,n.height=r.height=t.height,n.textureSettings=t.textureSettings,n.packing=new c.PackNode(0,0,t.width,t.height),n.createTexture(r),n}return i(t,e),t.prototype.createTexture=function(e){var t;this.texture||(t=this.textureSettings?o({generateMipMaps:!0,premultiplyAlpha:!0},this.textureSettings):{generateMipMaps:!0,premultiplyAlpha:!0},this.texture=new A.Texture(o({data:e},t)))},t.prototype.destroy=function(){var e=this;this.texture.dispose(),this.resourceReferences.forEach(function(t){e.invalidateTexture(t.subtexture)})},t.prototype.invalidateTexture=function(e){var t=[0,0];e.aspectRatio=1,e.atlasBL=t,e.atlasBR=t,e.atlasTL=t,e.atlasTR=t,e.isValid=!1,e.texture=null,e.pixelHeight=0,e.pixelWidth=0,delete e.source,e.video&&(e.video.monitor.destroy(),delete e.video)},t.prototype.resolveResources=function(){var e=this,t=[];this.resourceReferences.forEach(function(n,r){n.count<=0&&n.subtexture&&(l("A subtexture on an atlas has been invalidated as it is deemed no longer used: %o",n.subtexture),e.invalidateTexture(n.subtexture),t.push(r))});for(var n=0,r=t.length;n<r;++n)this.resourceReferences.delete(t[n])},t.prototype.stopUsingResource=function(e){(this.resourceReferences.get(e.source)||{subtexture:e.texture||new u.SubTexture,count:0}).count--},t.prototype.useResource=function(e){(this.resourceReferences.get(e.source)||{subtexture:e.texture,count:0}).count++},t}(s.IdentifyByKey);t.Atlas=h},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.uniformBufferInstanceBufferName="instanceData",t.activeAttributeName="_active"},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o=n(58),A=n(6),a=n(33),s=n(1),c=n(28),u=n(29);t.isUniformBufferLocation=function(e){return e&&e.buffer&&e.buffer.value&&e.type===a.MaterialUniformType.VEC4_ARRAY};var l=function(e){function t(t,n){var r=e.call(this,t,n)||this;r.buffers=[],r.availableClusters=[],r.instanceToCluster={},r.clusterToBuffer=new Map,r.add=function(e){r.availableClusters.length<=0&&r.makeNewBuffer();var t=r.availableClusters.pop();return t?r.instanceToCluster[e.uid]=t:console.warn("No valid cluster available for instance added to uniform manager."),t},r.remove=function(e){var t=this.instanceToCluster[e.uid];return t&&(delete this.instanceToCluster[e.uid],this.availableClusters.push(t)),e};var i=0;return t.instanceAttributes.forEach(function(e){i=Math.max(e.block||0,i)}),r.uniformBlocksPerInstance=i+1,r}return i(t,e),t.prototype.destroy=function(){this.buffers.forEach(function(e){e.geometry.dispose(),e.material.dispose()})},t.prototype.getBufferLocations=function(e){return this.instanceToCluster[e.uid]},t.prototype.getActiveAttributePropertyId=function(){return-1},t.prototype.getInstanceCount=function(){return-1},t.prototype.getUpdateAllPropertyIdList=function(){return[]},t.prototype.managesInstance=function(e){return void 0===this.instanceToCluster[e.uid]},t.prototype.removeFromScene=function(){var e=this.scene;if(e.container){for(var t=0,n=this.buffers.length;t<n;++t){var r=this.buffers[t];e.container.remove(r.model)}delete this.scene}},t.prototype.setScene=function(e){if(e.container){for(var t=0,n=this.buffers.length;t<n;++t){var r=this.buffers[t];e.container.add(r.model)}this.scene=e}else console.warn("Can not set a scene that has an undefined container.")},t.prototype.makeNewBuffer=function(){var e=new A.Geometry;this.layer.vertexAttributes.forEach(function(t){t.materialAttribute&&e.addAttribute(t.name,t.materialAttribute)});var t=this.layer.material.clone(),n=c.generateLayerModel(e,t,this.layer.model.drawMode);n.vertexDrawRange=[0,this.layer.maxInstancesPerBuffer*this.layer.instanceVertexCount];var r={activeInstances:[],clusters:[],firstInstance:0,geometry:e,lastInstance:0,material:t,model:n};this.buffers.push(r);var i=0,u=o.uniformBufferInstanceBufferName,l=t.uniforms[u];if(a.isUniformVec4Array(l)){l.value=l.value.map(function(){return[0,0,0,0]});for(var h=Object.assign({},this.layer.instanceAttributes[0],{bufferAttribute:new A.Attribute(new Float32Array(1),1),uid:s.uid()}),d=0,f=this.layer.maxInstancesPerBuffer;d<f;++d){var p={attribute:h,buffer:l,instanceIndex:d,range:[i,0]};i+=this.uniformBlocksPerInstance,p.range[1]=i,r.clusters.push(p),this.availableClusters.push(p),this.clusterToBuffer.set(p,r)}for(d=0,f=this.layer.uniforms.length;d<f;++d){var g=this.layer.uniforms[d];g.materialUniforms.push(t.uniforms[g.name])}this.scene&&this.scene.container&&this.scene.container.add(r.model)}else console.warn("Material is utilizing an invalid uniform type for Uniform Buffer Management. Buffering will not be possible.")},t}(u.BufferManagerBase);t.UniformBufferManager=l},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o=n(27),A=n(189),a=n(0),s=n(1),c=n(20),u=n(191),l=n(194),h=n(103),d=n(104),f=n(28),p=n(15),g=n(2)("performance");t.createLayer=function(e,t){return{get key(){return t.key||""},init:[e,Object.assign(t,{key:t.key||""})]}};var B=function(e){function t(n,r,i){var o=e.call(this,i)||this;return o.animationEndTime=0,o.depth=0,o.instanceAttributes=[],o.instanceVertexCount=0,o.lastFrameTime=0,o.needsViewDrawn=!1,o.uniforms=[],o._uid=s.uid(),o.vertexAttributes=[],o.willRebuildLayer=!1,o.surface=n,o.scene=r,o.props=Object.assign({},t.defaultProps||{},i),o}return i(t,e),Object.defineProperty(t.prototype,"bufferManager",{get:function(){return this._bufferManager},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bufferType",{get:function(){return this._bufferType},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"uid",{get:function(){return this._uid},enumerable:!0,configurable:!0}),t.prototype.init=function(){var e=this.props.picking;(void 0===e?a.PickType.NONE:e)===a.PickType.SINGLE?this.picking={currentPickMode:a.PickType.NONE,type:a.PickType.SINGLE,uidToInstance:new Map}:this.picking={currentPickMode:a.PickType.NONE,type:a.PickType.NONE},this.resource=this.surface.resourceManager;var t=this.initShader();if(this.interactions=new l.LayerInteractionHandler(this),!t)return this.picking.type=a.PickType.NONE,g("Shell layer initialized. Nothing will be rendered for this layer",this.id),!0;if(!t.fs||!t.vs)return console.warn("Layer needs to specify the fragment and vertex shaders:",this.id),!1;t.instanceAttributes=(t.instanceAttributes||[]).filter(Boolean),t.vertexAttributes=(t.vertexAttributes||[]).filter(Boolean),t.uniforms=(t.uniforms||[]).filter(Boolean);var n=(new A.ShaderProcessor).process(this,t,this.surface.getIOExpanders(),this.surface.getIOSorting());if(!n)return console.warn("The shader processor did not produce metrics for the layer."),!1;var r=n.vertexAttributes,i=n.instanceAttributes,o=n.uniforms,s=h.generateLayerGeometry(this,n.maxInstancesPerBuffer,r,t.vertexCount),c=d.generateLayerMaterial(this,n.vs,n.fs,o,n.materialUniforms),u=f.generateLayerModel(s,c,t.drawMode);return this.geometry=s,this.instanceAttributes=i,this.instanceVertexCount=t.vertexCount,this.material=c,this.maxInstancesPerBuffer=n.maxInstancesPerBuffer,this.model=u,this.uniforms=o,this.vertexAttributes=r,p.makeLayerBufferManager(this.surface.gl,this,this.scene),this.props.printShader&&(console.warn("A Layer requested its shader be debugged. Do not leave this active for production:","Layer:",this.props.key,"Shader Metrics",n),console.warn("\n\nVERTEX SHADER\n--------------\n\n",n.vs),console.warn("\n\nFRAGMENT SHADER\n--------------\n\n",n.fs)),!0},t.prototype.baseShaderModules=function(e){var t=[],n=[];return t.push("instancing"),this.picking.type===a.PickType.SINGLE?(t.push("picking"),n.push("picking")):(t.push("no-picking"),n.push("no-picking")),(e.instanceAttributes||[]).find(function(e){return Boolean(e&&e.easing)})&&t.push("frame"),{fs:n,vs:t}},t.prototype.childLayers=function(){return[]},t.prototype.destroy=function(){this.bufferManager&&(this.bufferManager.scene&&this.bufferManager.scene.removeLayer(this),this.bufferManager.removeFromScene(),this.bufferManager.destroy())},t.prototype.didUpdateProps=function(){},t.prototype.draw=function(){var e,t,n,r=this.props.data.changeList;r.length>0&&(this.needsViewDrawn=!0);var i=this.diffManager,o=i.processing,A=i.processor;A.incomingChangeList(r),this.bufferManager.incomingChangeList(r);for(var a=0,s=r.length;a<s;++a)t=(e=r[a])[0],n=this.bufferManager.getBufferLocations(t),o[e[1]](A,t,Object.values(e[2]),n),t.changes={};A.commit(),this.bufferManager.changesProcessed(),this.props.data.resolve(this.id),this.updateUniforms()},t.prototype.getInstanceObservableIds=function(e,t){for(var n={},r=0,i=t.length;r<i;++r){o.ObservableMonitoring.setObservableMonitor(!0),e[t[r]];var A=o.ObservableMonitoring.getObservableMonitorIds(!0);void 0!==A[0]&&(n[t[r]]=A[0])}return o.ObservableMonitoring.setObservableMonitor(!1),n},t.prototype.getMaterialOptions=function(){return{}},t.prototype.initShader=function(){return{fs:"${import: no-op}",instanceAttributes:[],uniforms:[],vertexAttributes:[],vertexCount:0,vs:"${import: no-op}"}},t.prototype.managesInstance=function(e){return this.bufferManager&&this.bufferManager.managesInstance(e)},t.prototype.rebuildLayer=function(){if(this.willRebuildLayer=!0,this.children)for(var e=0,t=this.children.length;e<t;++e){this.children[e].rebuildLayer()}},t.prototype.resolveChanges=function(e){var t=this.props.data.changeList;t.length>0&&(this.needsViewDrawn=!0),e||this.props.data.resolve(this.id);for(var n=0,r=t.length;n<r;++n)t[n][0].changes={};return t},t.prototype.setBufferManager=function(e){this._bufferManager?console.warn("You can not change a layer's buffer strategy once it has been instantiated."):(this._bufferManager=e,this.diffManager=new u.InstanceDiffManager(this,e),this.diffManager.makeProcessor())},t.prototype.setBufferType=function(e){void 0===this._bufferType?this._bufferType=e:console.warn("You can not change a layers buffer strategy once it has been instantiated.")},t.prototype.shouldDrawView=function(e,t){for(var n in t)if(t[n]!==e[n])return!0;return!1},t.prototype.updateUniforms=function(){for(var e,t,n=0,r=this.uniforms.length;n<r;++n)e=this.uniforms[n],t=e.update(e),e.materialUniforms.forEach(function(e){return e.value=t})},t.prototype.willUpdateInstances=function(e){},t.prototype.willUpdateProps=function(e){e.picking!==this.props.picking&&this.rebuildLayer()},t.defaultProps={},t}(c.IdentifyByKey);t.Layer=B},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(43),i=n(44),o=n(65),A=n(66),a=n(67),s=n(4),c=new i.NoView;function u(e,t){return t.d&&e.d?t.d.depth-e.d.depth:0}function l(e,t){return e.touch.identifier-t.touch.identifier}c.fitViewtoViewport(new r.Bounds({x:0,y:0,width:100,height:100}),new r.Bounds({x:0,y:0,width:100,height:100}));var h=function(){function e(e,t,n,r){var i=this;this.eventCleanup=[],this._waitingForRender=!0,this.getViewsUnderPosition=function(e){var t=i.quadTree.query(e);return t.sort(u),t},this.resize=function(){i._waitingForRender=!0},this.context=e,this.surface=t,this.setControllers(n),this.addContextListeners(r)}return Object.defineProperty(e.prototype,"waitingForRender",{get:function(){return this._waitingForRender},set:function(e){if(this._waitingForRender=e,!e){this.quadTree=new a.QuadTree(0,0,0,0);for(var t=this.scenes,n=[],r=0,i=t.length;r<i;++r)for(var o=t[r],A=0,s=o.views.length;A<s;++A){var c=o.views[A];n.push(c.screenBounds)}this.quadTree.addAll(n)}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scenes",{get:function(){return this.surface&&this.surface.sceneDiffs?this.surface.sceneDiffs.items:[]},enumerable:!0,configurable:!0}),e.prototype.addContextListeners=function(e){this.addMouseContextListeners(e),this.addTouchContextListeners()},e.prototype.addMouseContextListeners=function(e){var t,n=this,r=this.context,i=!1;if(e){var o=function(e){var i=A.eventElementPosition(e,r),o=n.getViewsUnderPosition(i);if(!(o.length<=0)){t={canClick:!1,currentPosition:i,deltaPosition:[0,0],previousPosition:i,start:i,startTime:Date.now(),startView:o[0].d,event:e,wheel:n.makeWheel(e),button:-1};var a=n.makeMouseInteraction(t);n.controllers.forEach(function(e){e.handleWheel(a)}),e.stopPropagation(),e.preventDefault()}};"onwheel"in r&&(r.onwheel=o),"addEventListener"in r&&(r.addEventListener("DOMMouseScroll",o),this.eventCleanup.push(["DOMMouseScroll",o]))}r.onmouseleave=function(e){if(!n.waitingForRender&&t){var i=A.eventElementPosition(e,r);t.deltaPosition=s.subtract2(i,t.currentPosition),t.previousPosition=t.currentPosition,t.currentPosition=i;var o=n.makeMouseInteraction(t);n.controllers.forEach(function(e){e.handleMouseOut(o)})}},r.onmousemove=function(e){if(!n.waitingForRender){var o=A.eventElementPosition(e,r);if(!t){var a=n.getViewsUnderPosition(o);t={canClick:!1,currentPosition:o,deltaPosition:[0,0],previousPosition:o,start:o,startTime:Date.now(),startView:a[0].d,event:e,wheel:n.makeWheel(),button:-1}}t.deltaPosition=s.subtract2(o,t.currentPosition),t.previousPosition=t.currentPosition,t.currentPosition=o,t.canClick=!1;var c=n.makeMouseInteraction(t);n.controllers.forEach(function(e){e.handleMouseMove(c)}),i=!0}},r.onmousedown=function(e){if(!n.waitingForRender){var o=A.eventElementPosition(e,r),a=n.getViewsUnderPosition(o);if(!(a.length<=0)){t={canClick:!0,currentPosition:o,deltaPosition:[0,0],previousPosition:o,start:o,startTime:Date.now(),startView:a[0].d,event:e,wheel:n.makeWheel(),button:e.button};var c=n.makeMouseInteraction(t);n.controllers.forEach(function(e){e.handleMouseDown(c)}),e.stopPropagation(),document.onmousemove=function(e){if(t){if(!i){var o=A.eventElementPosition(e,r);t.deltaPosition=s.subtract2(o,t.currentPosition),t.previousPosition=t.currentPosition,t.currentPosition=o,t.canClick=!1}var a=n.makeMouseInteraction(t);n.controllers.forEach(function(e){e.handleDrag(a)}),e.preventDefault(),e.stopPropagation(),i=!1}},document.onmouseup=function(e){document.onmousemove=null,document.onmouseup=null,document.onmouseover=null,t=void 0},document.onmouseover=function(e){if(t){var i=A.eventElementPosition(e,r);t.deltaPosition=s.subtract2(i,t.currentPosition),t.previousPosition=t.currentPosition,t.currentPosition=i;var o=n.makeMouseInteraction(t);n.controllers.forEach(function(e){e.handleMouseOver(o)}),e.stopPropagation()}},r.onmouseup=function(e){if(t){var i=A.eventElementPosition(e,r);t.deltaPosition=s.subtract2(i,t.currentPosition),t.previousPosition=t.currentPosition,t.currentPosition=i,t.button=e.button;var o=n.makeMouseInteraction(t);n.controllers.forEach(function(e){e.handleMouseUp(o)}),t.canClick&&Date.now()-t.startTime<1e3&&n.controllers.forEach(function(e){e.handleClick(o)}),t=void 0}};var u=r;void 0!==u.onselectstart?u.onselectstart=function(){return!1}:r.addEventListener("selectstart",function(){e.preventDefault()})}}}},e.prototype.addTouchContextListeners=function(){var e=this,t=this.context,n=new Map,r=new Map;function i(e){return e.map(function(e){return e.touch})}function a(e){return e.reduce(function(e,t){return t.touch.startTime>e.touch.startTime?t:e},e[0])}var c={center:function(t){return t.length<=0?[0,0]:e.getTouchCenter(i(t))},centerDelta:function(t){if(t.length<=0)return[0,0];var n=i(t),r=e.getTouchCenter(n,function(e){return e.previousPosition}),o=e.getTouchCenter(n);return s.subtract2(o,r)},centerStart:function(t){if(t.length<=0)return[0,0];var n=a(t).touch;return e.getTouchCenter(i(t),function(e){return e===n?e.start:e.startRelative.get(n)||[0,0]})},id:function(e){return i(e).sort(l).map(function(e){return e.touch.identifier}).join("_")},rotation:function(t){if(t.length<=0)return 0;var n=i(t),r=e.getTouchCenter(n);return e.getAverageAngle(n,r)},rotationDelta:function(t){if(t.length<=0)return 0;var n=i(t),r=e.getTouchCenter(n,function(e){return e.previousPosition}),o=e.getAverageAngle(n,r,function(e){return e.previousPosition}),A=e.getTouchCenter(n);return e.getAverageAngle(n,A)-o},rotationStart:function(t){if(t.length<=0)return 0;var n=a(t).touch,r=i(t),o=e.getTouchCenter(r,function(e){return e===n?e.start:e.startRelative.get(n)||[0,0]});return e.getAverageAngle(r,o,function(e){return e===n?e.start:e.startRelative.get(n)||[0,0]})},spread:function(t){if(t.length<=0)return 0;var n=i(t),r=e.getTouchCenter(n);return e.getAverageDistance(n,r)},spreadDelta:function(t){if(t.length<=0)return 0;var n=i(t),r=e.getTouchCenter(n,function(e){return e.previousPosition}),o=e.getAverageDistance(n,r,function(e){return e.previousPosition}),A=e.getTouchCenter(n);return e.getAverageDistance(n,A)-o},spreadStart:function(t){if(t.length<=0)return 0;var n=a(t).touch,r=i(t),o=e.getTouchCenter(r,function(e){return e===n?e.start:e.startRelative.get(n)||[0,0]});return e.getAverageDistance(r,o,function(e){return e===n?e.start:e.startRelative.get(n)||[0,0]})}};t.ontouchstart=function(t){t.preventDefault(),t.stopPropagation();for(var i=e.getTouches(t),a=[],s=[],l=0,f=i.length;l<f;++l){var p=i[l],g=n.get(p.identifier);if(g)a.push(g);else{var B=A.eventElementPosition(p),w=e.getViewsUnderPosition(B);if(w.length<=0)continue;var y=w[0].d,v={canTap:!0,currentPosition:B,deltaPosition:[0,0],startTime:Date.now(),start:B,startView:y,previousPosition:B,startRelative:new Map,touch:p};n.set(p.identifier,v),s.push(v)}}if(s.length>0){var m=s.concat(a),b=[];for(l=0,f=s.length;l<f;++l){for(var E=s[l],T=0,C=m.length;T<C;++T){E!==(p=m[T])&&p.startRelative.set(E,p.currentPosition)}var U=e.makeSingleTouchInteraction(E);b.push(U),r.set(E.touch.identifier,U)}var _={touches:b,allTouches:m.map(function(e){return r.get(e.touch.identifier)}).filter(o.isDefined),multitouch:c};e.controllers.forEach(function(e){e.handleTouchDown(_)})}document.ontouchend=function(e){u.call(document,e),document.ontouchend=null,document.ontouchcancel=null,document.ontouchmove=null},document.ontouchcancel=function(e){d.call(document,e),document.ontouchend=null,document.ontouchcancel=null,document.ontouchmove=null},document.ontouchmove=h};var u=t.ontouchend=function(t){t.stopPropagation(),t.preventDefault();for(var i=e.getTouches(t,"changed"),o=Array.from(r.values()),A=[],a=function(t,a){var s=i[t],u=n.get(s.identifier);if(!u)return"continue";if(u.canTap&&Date.now()-u.startTime<200){var l={touches:[e.makeSingleTouchInteraction(u)],allTouches:o,multitouch:c};e.controllers.forEach(function(e){e.handleTap(l)})}A.push(u),n.delete(s.identifier),r.delete(s.identifier)},s=0,u=i.length;s<u;++s)a(s);if(A.length>0){var l={touches:A.map(function(t){return e.makeSingleTouchInteraction(t)}),allTouches:o,multitouch:c};e.controllers.forEach(function(e){e.handleTouchUp(l)})}},h=t.ontouchmove=function(t){t.stopPropagation(),t.preventDefault();for(var i=e.getTouches(t),a=[],u=[],l=0,h=i.length;l<h;++l){var d=i[l],f=n.get(d.identifier);if(f){var p=A.eventElementPosition(d),g=s.subtract2(p,f.currentPosition);if(s.length2(g)<=0){u.push(f),Object.assign(f,{currentPosition:p,deltaPosition:g,previousPosition:f.currentPosition,touch:d});continue}a.push(f),Object.assign(f,{canTap:!1,currentPosition:p,deltaPosition:g,previousPosition:f.currentPosition,touch:d})}}if(a.length>0){var B=a.concat(u),w={touches:a.map(function(t){return e.makeSingleTouchInteraction(t)}),allTouches:B.map(function(e){return r.get(e.touch.identifier)}).filter(o.isDefined),multitouch:c};e.controllers.forEach(function(e){e.handleTouchDrag(w)})}},d=t.ontouchcancel=function(t){t.stopPropagation(),t.preventDefault();for(var i=e.getTouches(t,"changed"),o=Array.from(r.values()),A=[],a=0,s=i.length;a<s;++a){var u=i[a],l=n.get(u.identifier);l&&(A.push(l),n.delete(u.identifier),r.delete(u.identifier))}if(A.length>0){var h={touches:A.map(function(t){return e.makeSingleTouchInteraction(t)}),allTouches:o,multitouch:c};e.controllers.forEach(function(e){e.handleTouchCancelled(h)})}}},e.prototype.getAverageDistance=function(e,t,n){var r=0;if(e.length<=0)return r;n||(n=function(e){return e.currentPosition});for(var i=0,o=e.length;i<o;++i){var A=e[i];r+=s.length2(s.subtract2(n(A),t))}return r/e.length},e.prototype.getAverageAngle=function(e,t,n){var r=0;if(e.length<=0)return r;n||(n=function(e){return e.currentPosition});for(var i=0,o=e.length;i<o;++i){var A=e[i],a=s.subtract2(n(A),t),c=Math.atan2(a[1],a[0]);c<0&&(c+=2*Math.PI),r+=c}return r/e.length},e.prototype.getTouchCenter=function(e,t){var n=[0,0];if(e.length<=0)return n;t||(t=function(e){return e.currentPosition});for(var r=0,i=e.length;r<i;++r){var o=t(e[r]);n=s.add2(n,o)}return s.scale2(n,1/e.length)},e.prototype.getTouches=function(e,t){var n=new Map;if(e.touches&&e.touches.length>0&&(!t||"touches"===t))for(var r=0,i=e.touches.length;r<i;++r){(o=e.touches.item(r))&&n.set(o.identifier,o)}if(e.changedTouches&&e.changedTouches.length>0&&(!t||"changed"===t))for(r=0,i=e.changedTouches.length;r<i;++r){(o=e.changedTouches.item(r))&&n.set(o.identifier,o)}if(e.targetTouches&&e.targetTouches.length>0&&(!t||"target"===t))for(r=0,i=e.targetTouches.length;r<i;++r){var o;(o=e.targetTouches.item(r))&&n.set(o.identifier,o)}return Array.from(n.values())},e.prototype.getView=function(e){for(var t=this.scenes,n=0,r=t.length;n<r;++n){var i=t[n].viewDiffs.getByKey(e);if(i)return i}return null},e.prototype.makeMouseInteraction=function(e){var t=this.getViewsUnderPosition(e.currentPosition),n=t[0]&&t[0].d;n||(n=c);var r=this.getViewsUnderPosition(e.start),i=e.startView;return i||(i=c),{mouse:e,screen:{position:e.currentPosition},start:{position:i.screenToView(e.start),view:i,views:r.map(function(t){return t.d||(t.d=c),{position:t.d.screenToView(e.start),view:t.d}})},target:{position:n.screenToView(e.currentPosition),view:n,views:t.map(function(t){return t.d||(t.d=c),{position:t.d.screenToView(e.currentPosition),view:t.d}})}}},e.prototype.makeSingleTouchInteraction=function(e){var t=e.currentPosition,n=this.getViewsUnderPosition(t),r=n[0]&&n[0].d;r||(r=c);var i=e.startView;return i||(i=c),{touch:e,screen:{position:t},start:{position:i.screenToView(e.start),view:i,views:this.getViewsUnderPosition(e.start).map(function(t){return t.d||(t.d=c),{position:t.d.screenToView(e.start),view:t.d}})},target:{position:r.screenToView(t),view:r,views:n.map(function(e){return e.d||(e.d=c),{position:e.d.screenToView(t),view:e.d}})}}},e.prototype.makeMultiTouchInteractions=function(e,t){e.sort(l);for(var n=this.allTouchCombinations(e),r=0,i=n.length;r<i;++r){var o=n[r],A=o.map(function(e){return e.touch.identifier}).join("_"),a=t.get(A);if(!a){var s=this.getTouchCenter(o);a={touches:o,averageSpreadDelta:0,startCenter:s,currentCenter:s,currentRotation:this.getAverageAngle(o,s),centerDelta:[0,0],rotationDelta:0},t.set(A,a)}}},e.prototype.updateMultiTouchInteractions=function(e,t){e.sort(l);for(var n=this.allTouchCombinations(e),r=0,i=n.length;r<i;++r){var o=n[r],A=o.map(function(e){return e.touch.identifier}).join("_"),a=t.get(A);if(a){var c=this.getTouchCenter(o),u=this.getAverageAngle(o,c);a.centerDelta=s.subtract2(c,a.currentCenter),a.currentCenter=c,a.rotationDelta=u-a.currentRotation,a.currentRotation=u}}},e.prototype.allTouchCombinations=function(e){for(var t=[],n=e.length,r=1<<n,i=1;i<r;i++){for(var o=[],A=0;A<n;A++)i&1<<A&&o.push(e[A]);t.push(o)}return t},e.prototype.makeWheel=function(e){if(!e)return{delta:[0,0]};var t=A.normalizeWheel(e);return{delta:[t.pixelX,t.pixelY]}},e.prototype.setControllers=function(e){this.controllers=e;for(var t=0,n=this.controllers;t<n.length;t++){n[t].setUserInputManager(this)}},e.prototype.destroy=function(){var e=this;delete this.quadTree,this.context.onmousedown=null,this.context.onmousemove=null,this.context.onmouseleave=null;var t=this.context;t.onmousewheel&&(t.onmousewheel=null),this.eventCleanup.forEach(function(t){e.context.removeEventListener(t[0],t[1])})},e}();t.UserInputEventManager=h},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(5);function i(e,t,n){var r=""+e,i=parseFloat(r);return isNaN(i)?0:r.indexOf("%")>-1?i/100*t:i*n}t.getAbsolutePositionBounds=function(e,t,n){0!==t.width&&0!==t.height||console.warn("An AbsolutePosition evaluated to invalid dimensions.","Please ensure that the object provided and the reference has valid dimensions","to produce dimensions with width and height that are non-zero.","item:",e,"reference:",t.toString());var o,A,a=r.Bounds.emptyBounds();if(e.width)a.width=i(e.width,t.width,n),void 0!==e.left?a.x=i(e.left,t.width,n):void 0!==e.right&&(a.x=t.width-i(e.right,t.width,n)-a.width);else{var s=i(e.left||0,t.width,n);(o=t.width-i(e.right||0,t.width,n)-s)<0&&console.warn("An AbsolutePosition evaluated to invalid dimensions.","Please ensure that the object provided and the reference has valid dimensions","to produce dimensions with width and height that are greater than zero.","item:",e,"reference:",t.toString()),a.x=s,a.width=o}if(e.height)a.height=i(e.height,t.height,n),void 0!==e.top?a.y=i(e.top,t.height,n):void 0!==e.bottom&&(a.y=t.height-i(e.bottom,t.height,n)-a.height);else{var c=i(e.top||0,t.height,n);(void 0===(A=t.height-i(e.bottom||0,t.height,n)-c)||A<0)&&console.warn("An AbsolutePosition evaluated to invalid dimensions.","Please ensure that the object provided and the reference has valid dimensions","to produce dimensions with width and height that are greater than zero.","item:",e,"reference:",t.toString()),a.y=c,a.height=A}return(0===a.width||0===a.height||isNaN(a.x+a.y+a.width+a.height))&&(a.x=0,a.y=0,a.width=t.width,a.height=t.height),a}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){this.models=new Set}return e.prototype.add=function(e){this.models.add(e)},e.prototype.remove=function(e){this.models.delete(e)},e}();t.Scene=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(30);t.generateDefaultElements=function(e){var t=e.canvas.height,n=e.canvas.width,i={aspectRatio:n/t,bottom:-t/2,far:1e7,left:-n/2,near:-100,right:n/2,top:t/2,viewSize:t},o=new r.Camera({type:r.CameraProjectionType.ORTHOGRAPHIC,left:i.left,right:i.right,top:i.top,bottom:i.bottom,near:i.near,far:i.far});return o.scale=[1,-1,1],o.position=[0,0,-300],o.update(),{camera:o,viewport:{bottom:0,left:0,right:0,top:0}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isDefined=function(e){return Boolean(e)},t.touchesHasStartView=function(e){return Array.isArray(e)?function(t){return e.indexOf(t.start.view.id)>=0}:function(t){return t.start.view.id===e}},t.touchesContainsStartView=function(e){return Array.isArray(e)?function(t){return t.start.views.find(function(t){return e.indexOf(t.view.id)>=0})}:function(t){return t.start.views.find(function(t){return t.view.id===e})}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(124);t.normalizeWheel=r.normalizeWheel,t.eventElementPosition=function(e,t){var n=0,r=0,i=0,o=0,A=t||e.nativeEvent&&e.nativeEvent.target||e.target;if(e||(e=window.event),e.pageX||e.pageY)n=e.pageX,r=e.pageY;else if(e.clientX||e.clientY){var a=0,s=0;document.documentElement&&(a=document.documentElement.scrollLeft,s=document.documentElement.scrollTop),n=e.clientX+document.body.scrollLeft+a,r=e.clientY+document.body.scrollTop+s}if(A.offsetParent)do{i+=A.offsetLeft,o+=A.offsetTop,A=A.offsetParent}while(A);return[n-i,r-o]}},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o=n(5),A=n(4);t.filterQuery=function(e,t){var n=[];return t.forEach(function(t){e.find(function(e){return t instanceof e})&&n.push(t)}),n};var a=function(){function e(e,t){var n=e.mid;this.TL=new s(e.x,n[0],e.y,n[1],t),this.TR=new s(n[0],e.right,e.y,n[1],t),this.BL=new s(e.x,n[0],n[1],e.bottom,t),this.BR=new s(n[0],e.right,n[1],e.bottom,t)}return e.prototype.destroy=function(){this.TL.destroy(),this.TR.destroy(),this.BL.destroy(),this.BR.destroy(),delete this.TL,delete this.TR,delete this.BL,delete this.BR},e}();t.QuadTreeQuadrants=a;var s=function(){function e(e,t,n,r,i){this.children=[],this.depth=0,arguments.length>=4?this.bounds=new o.Bounds({left:e,right:t,top:n,bottom:r}):this.bounds=new o.Bounds({left:0,right:1,top:0,bottom:1}),this.depth=i||0}return e.prototype.destroy=function(){delete this.children,delete this.bounds,this.nodes&&(this.nodes.destroy(),delete this.nodes)},e.prototype.add=function(e,t){return e.isInside(this.bounds)?this.doAdd(e):(this.cover(e),this.add(e,t))},e.prototype.addAll=function(e){for(var t=this,n=Number.MAX_SAFE_INTEGER,r=Number.MAX_SAFE_INTEGER,i=Number.MIN_SAFE_INTEGER,A=Number.MIN_SAFE_INTEGER,a=Math.min,s=Math.max,c=0,u=e.length;c<u;++c){var l=e[c];n=a(n,l.x),i=s(l.right,i),r=a(r,l.y),A=s(A,l.bottom)}this.cover(new o.Bounds({left:n,right:i,top:r,bottom:A})),e.forEach(function(e){return t.doAdd(e)})},e.prototype.cover=function(e){var t=this;if(!e.isInside(this.bounds)){this.bounds.encapsulate(e),this.bounds.x-=1,this.bounds.y-=1,this.bounds.width+=2,this.bounds.height+=2;var n=this.gatherChildren([]);this.nodes&&(this.nodes.destroy(),delete this.nodes),n.forEach(function(e){return t.doAdd(e)})}},e.prototype.doAdd=function(e){return this.nodes?e.isInside(this.nodes.TL.bounds)?this.nodes.TL.doAdd(e):e.isInside(this.nodes.TR.bounds)?this.nodes.TR.doAdd(e):e.isInside(this.nodes.BL.bounds)?this.nodes.BL.doAdd(e):e.isInside(this.nodes.BR.bounds)?this.nodes.BR.doAdd(e):(this.children.push(e),!0):e.isInside(this.bounds)?(this.children.push(e),this.children.length>5&&this.depth<10&&this.split(),!0):(isNaN(e.width+e.height+e.x+e.y)?console.error("Child did not fit into bounds because a dimension is NaN",e):0===e.area&&console.error("Child did not fit into bounds because the area is zero",e),!0)},e.prototype.gatherChildren=function(e,t){t&&t(this);for(var n=0,r=this.children.length;n<r;++n)e.push(this.children[n]);return this.nodes&&(this.nodes.TL.gatherChildren(e,t),this.nodes.TR.gatherChildren(e,t),this.nodes.BL.gatherChildren(e,t),this.nodes.BR.gatherChildren(e,t)),e},e.prototype.query=function(e,t){return e instanceof o.Bounds?e.hitBounds(this.bounds)?this.queryBounds(e,[],t):[]:A.isVec2(e)&&this.bounds.containsPoint(e)?this.queryPoint(e,[],t):[]},e.prototype.queryBounds=function(e,t,n){return this.bounds.isInside(e)?(this.gatherChildren(t,n),t):(this.children.forEach(function(n){n.hitBounds(e)&&t.push(n)}),n&&n(this),this.nodes&&(e.hitBounds(this.nodes.TL.bounds)&&this.nodes.TL.queryBounds(e,t,n),e.hitBounds(this.nodes.TR.bounds)&&this.nodes.TR.queryBounds(e,t,n),e.hitBounds(this.nodes.BL.bounds)&&this.nodes.BL.queryBounds(e,t,n),e.hitBounds(this.nodes.BR.bounds)&&this.nodes.BR.queryBounds(e,t,n)),t)},e.prototype.queryPoint=function(e,t,n){return this.children.forEach(function(n){n.containsPoint(e)&&t.push(n)}),n&&n(this),this.nodes&&(this.nodes.TL.bounds.containsPoint(e)&&this.nodes.TL.queryPoint(e,t,n),this.nodes.TR.bounds.containsPoint(e)&&this.nodes.TR.queryPoint(e,t,n),this.nodes.BL.bounds.containsPoint(e)&&this.nodes.BL.queryPoint(e,t,n),this.nodes.BR.bounds.containsPoint(e)&&this.nodes.BR.queryPoint(e,t,n)),t},e.prototype.split=function(){var e=[];this.gatherChildren(e),this.nodes=new a(this.bounds,this.depth+1),this.children=[];for(var t=0,n=e.length;t<n;++t){var r=e[t];r&&this.doAdd(r)}},e.prototype.visit=function(e){var t=Boolean(e(this));this.nodes&&!t&&(this.nodes.TL.visit(e),this.nodes.TR.visit(e),this.nodes.BL.visit(e),this.nodes.BR.visit(e))},e}();t.QuadTreeNode=s;var c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t}(s);t.QuadTree=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(2)("performance"),i=function(){function e(){}return e.prototype.setDeclaration=function(e,t,n,i){e.get(t)&&r("%s: Overriding declaration %s\nSetting new value: %s",i||"Expand IO Declarations",t,n),e.set(t,n)},e}();t.BaseShaderIOInjection=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r="Once a ShaderModuleUnit has been registered, you CAN NOT modify it! Module ID:",i=function(){function e(e){this._dependents=null,Object.assign(this,e)}return Object.defineProperty(e.prototype,"content",{get:function(){return this._content},set:function(e){this._isLocked?console.warn(r,this._moduleId):this._content=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"compatibility",{get:function(){return this._compatibility},set:function(e){this._isLocked?console.warn(r,this._moduleId):this._compatibility=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dependents",{get:function(){return this._dependents},set:function(e){this._isLocked&&null!==this._dependents?console.warn(r,this._moduleId):this._dependents=e},enumerable:!0,configurable:!0}),e.prototype.isLocked=function(){return this._isLocked},Object.defineProperty(e.prototype,"moduleId",{get:function(){return this._moduleId},set:function(e){this._isLocked?console.warn(r,this._moduleId):this._moduleId=e},enumerable:!0,configurable:!0}),e.prototype.applyAnalyzedContent=function(e){this._isLocked&&null!==this.dependents?console.warn(r,this._moduleId):this._content=e},e.prototype.lock=function(){this._isLocked=!0},e}();t.ShaderModuleUnit=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=n(1),o=n(69),A=n(2)("performance"),a=n(2)("shader-module-vs"),s=n(2)("shader-module-fs");function c(e,t){return Boolean(e)&&(e.compatibility===t||e.compatibility===r.ShaderInjectionTarget.ALL)}var u=function(){function e(){}return e.register=function(t){if(!(t instanceof o.ShaderModuleUnit)){if(Array.isArray(t)){var n="";return t.forEach(function(t){var r=e.register(t);r&&(n+=r+"\n")}),n||null}return e.register(new o.ShaderModuleUnit(t))}var i=e.modules.get(t.moduleId);i||(i={},e.modules.set(t.moduleId,i));var a=i.fs,s=i.vs,u=c(t,r.ShaderInjectionTarget.FRAGMENT),l=c(t,r.ShaderInjectionTarget.VERTEX);if(a&&u){if(a.isFinal)return"Module ID: "+t.moduleId+" Can not override the module's existing Fragment registration as the exisitng module is marked as final";A("A Shader Module Unit has overridden an existing module for the Fragment Shader Module ID: %o",t.moduleId)}if(s&&l){if(s.isFinal)return"Module ID: "+t.moduleId+" Can not override the module's existing Vertex registration as the exisitng module is marked as final";A("A Shader Module Unit has overridden an existing module for the Vertex Shader Module ID: %o",t.moduleId)}return u&&(i.fs=t),l&&(i.vs=t),t.lock(),null},e.analyzeDependents=function(t){if(t.dependents&&t.isLocked)return[];var n=[],o=[],A=new Set,a=t.compatibility,s=t.moduleId,c=i.shaderTemplate({options:{},shader:t.content,onToken:function(t){var i=t.trim();if(0===i.indexOf("import")){var c=i.substr("import".length).trim();if(":"===c[0]){var u=!1,l=c.substr(":".length).trim().split(",");return 0===l[l.length-1].trim().length&&l.pop(),l.forEach(function(t){t=t.trim();var i=e.modules.get(t);i?(a!==r.ShaderInjectionTarget.FRAGMENT&&a!==r.ShaderInjectionTarget.ALL||(i.fs?(u=!0,A.has(t)||o.push(t)):n.push("Could not find requested target fragment module for Module ID: "+t+" requested by module: "+s)),a!==r.ShaderInjectionTarget.VERTEX&&a!==r.ShaderInjectionTarget.ALL||(i.vs?(u=!0,A.has(t)||o.push(t)):n.push("Could not find requested target vertex module for Module ID: "+t+" requested by module: "+s)),i.vs||i.fs||n.push("Could not find a vertex or fragment shader within exisitng module"),u||n.push("Error Processing module Module ID: "+t+" requested by module: "+s)):n.push("Could not find requested module: "+t+" requested by module: "+s)}),""}}return"${"+t+"}"}});return t.applyAnalyzedContent(c.shader),t.dependents=o,n},e.process=function(t,n,i,A){var c=new Set,u=new Set,l=[],h=[],d=i===r.ShaderInjectionTarget.VERTEX?a:s;d("Processing Shader for id %o:",t);var f=n;if(A){var p="";A.forEach(function(e){return p+="${import: "+e+"}\n"}),f=p+n}var g=new o.ShaderModuleUnit({content:f,compatibility:i,moduleId:'Layer "'+t+'" '+(i===r.ShaderInjectionTarget.ALL?"fs vs":i===r.ShaderInjectionTarget.VERTEX?"vs":"fs")});return{errors:h,shader:function t(n){var o=n.moduleId;if(!function(e){var t=e.moduleId;d("%o: %o",t,l.slice(0).reverse().join(" -> "));var n=l.indexOf(t);if(l.unshift(t),n>-1){var r=l.slice(0,n+2).reverse();return h.push("A Shader has detected a Circular dependency in import requests: "+r.join(" -> ")),l.shift(),!1}return!0}(n))return null;if(o&&u.has(o))return l.shift(),"";var A="";e.analyzeDependents(n).forEach(function(e){return h.push(e)});var a=n.dependents;if(a&&a.length>0)for(var s=0,f=a.length;s<f;++s){var p=a[s],g=e.modules.get(p);if(g){var B=void 0;i!==r.ShaderInjectionTarget.FRAGMENT&&i!==r.ShaderInjectionTarget.ALL||(g.fs?(c.add(g.fs),B=t(g.fs)):h.push("Could not find requested target fragment module for Module ID: "+p+" requested by module: "+o)),i!==r.ShaderInjectionTarget.VERTEX&&i!==r.ShaderInjectionTarget.ALL||(g.vs?(c.add(g.vs),B=t(g.vs)):h.push("Could not find requested target vertex module for Module ID: "+p+" requested by module: "+o)),g.vs||g.fs||h.push("Could not find a vertex or fragment shader within exisitng module"),null===B&&h.push("Error Processing module Module ID: "+p+" requested by module: "+o),A+=B||""}else h.push("Could not find requested module: "+p+" requested by module: "+o)}return l.shift(),u.add(o||""),A.trim()+"\n\n"+n.content.trim()}(g),shaderModuleUnits:c}},e.modules=new Map,e}();t.ShaderModule=u},function(e,t,n){"use strict";function r(e){return e&&e.constructor===Function}Object.defineProperty(t,"__esModule",{value:!0}),t.mapInjectDefault=function(e,t,n){var i=e.get(t);return void 0===i&&(i=r(n)?n():n,e.set(t,i)),i},t.mapGetWithDefault=function(e,t,n){var i=e.get(t);return void 0===i&&(i=r(n)?n():n),i}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(11),i=function(){function e(){}return e.transparentShapeBlending={blending:{blendDst:r.GLSettings.Material.BlendingDstFactor.OneMinusSrcAlpha,blendEquation:r.GLSettings.Material.BlendingEquations.Add,blendSrc:r.GLSettings.Material.BlendingSrcFactor.SrcAlpha},culling:r.GLSettings.Material.CullSide.NONE},e.transparentImageBlending={blending:{blendSrc:r.GLSettings.Material.BlendingSrcFactor.One,blendDst:r.GLSettings.Material.BlendingDstFactor.OneMinusSrcAlpha,blendEquation:r.GLSettings.Material.BlendingEquations.Add},culling:r.GLSettings.Material.CullSide.NONE},e}();t.CommonMaterialOptions=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(49),i=[],o=[],A=[];requestAnimationFrame(function e(t){requestAnimationFrame(e);var n=o.slice();o=[];for(var r=0,a=n.length;r<a;++r)(s=n[r])&&s(t);for(r=0,a=A.length;r<a;++r){var s;(s=A[r])&&s(t)}A=i.slice(0),i=[]}),t.nextFrame=function(e){var t=new r.PromiseResolver;return i.push(function(n){e&&e(n),t.resolve(n)}),t.promise},t.onFrame=function(e){var t=new r.PromiseResolver;return o.push(function(n){e&&e(n),t.resolve(n)}),t.promise}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(31),i=n(75);t.extendShader=function(e,t,n){var o=e.vs,A=e.fs,a={shader:o},s={shader:A};if(t){(u={})[i.templateVars.extendHeader]=t.header?t.header+"\n${"+i.templateVars.extendHeader+"}":"",u[i.templateVars.extend]=t.body?t.body+"\n${"+i.templateVars.extend+"}":"";var c={name:"Extend VS Shader",values:[i.templateVars.extendHeader,i.templateVars.extend]};a=r.shaderTemplate({options:u,required:c,shader:o,onToken:function(e,t){return e===i.templateVars.extendHeader||e===i.templateVars.extend?t:"${"+e+"}"}})}if(n){var u;(u={})[i.templateVars.extendHeader]=n.header?n.header+"\n${"+i.templateVars.extendHeader+"}":"",u[i.templateVars.extend]=n.body?n.body+"\n${"+i.templateVars.extend+"}":"",c={name:"Extend FS Shader",values:[i.templateVars.extendHeader,i.templateVars.extend]},s=r.shaderTemplate({options:u,required:c,shader:A,onToken:function(e,t){return e===i.templateVars.extendHeader||e===i.templateVars.extend?t:"${"+e+"}"}})}return{fs:s.shader,vs:a.shader}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.templateVars={attributes:"attributes",easingMethod:"easingMethod",extend:"extend",extendHeader:"extendHeader",T:"T"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(51),i=n(11),o=n(22),A=n(2)("performance");function a(e){return e&&e.buffer&&void 0!==e.buffer.byteOffset&&e.buffer.byteLength||null===e.buffer}function s(e){return 0==(e&e-1)}function c(e){return Boolean(e.gl&&e.gl.textureId&&e.gl.textureUnit>-1)}var u=function(){function e(e,t,n){this.debugContext="",this.fragmentShaders=new Map,this.vertexShaders=new Map,this.programs=new Map,this.gl=e,this.state=t,this.extensions=n}return e.addExtensions=function(e){var t=e.getExtension("ANGLE_instanced_arrays"),n=e.getExtension("WEBGL_draw_buffers"),r=e.getExtension("EXT_texture_filter_anisotropic"),i={maxAnistropicFilter:0};return t||e instanceof WebGL2RenderingContext||A("This device does not have hardware instancing. All buffering strategies will be utilizing compatibility modes."),n||e instanceof WebGL2RenderingContext||A("This device does not have hardware multi-render target capabilities. The system will have to fallback to multiple render passes to multiple FBOs to achieve the same result."),r?i.maxAnistropicFilter=e.getParameter(r.MAX_TEXTURE_MAX_ANISOTROPY_EXT):A("This device does not have hardware anisotropic filtering for textures. This property will be ignored when setting texture settings."),{instancing:(e instanceof WebGL2RenderingContext?e:t)||void 0,drawBuffers:(e instanceof WebGL2RenderingContext?e:n)||void 0,anisotropicFiltering:r?{ext:r,stat:i}:void 0}},e.prototype.clear=function(e,t,n){var r=0;e&&(r|=this.gl.COLOR_BUFFER_BIT),t&&(r|=this.gl.DEPTH_BUFFER_BIT),n&&(r|=this.gl.STENCIL_BUFFER_BIT),this.gl.clear(r)},e.prototype.compileAttribute=function(e){if(!e.gl){var t=this.gl,n=t.createBuffer();return n?(this.state.bindVBO(n),t.bufferData(t.ARRAY_BUFFER,e.data,e.isDynamic?t.DYNAMIC_DRAW:t.STATIC_DRAW),e.gl={bufferId:n,type:t.ARRAY_BUFFER},e.resolve(),!0):(console.warn(this.debugContext,"Could bot create WebGLBuffer. Printing any existing gl errors:"),void this.printError())}},e.prototype.compileGeometry=function(e){var t=this,n=!0;return e.attributes.forEach(function(e){n=Boolean(t.compileAttribute(e)&&n)}),n},e.prototype.compileMaterial=function(e){if(!e.gl){var t=this.fragmentShaders.get(e.fragmentShader)||null;if(!t){if(!(t=this.gl.createShader(this.gl.FRAGMENT_SHADER)))return console.warn(this.debugContext,"Could not create a Fragment WebGLShader. Printing GL Errors:"),void this.printError();if(this.gl.shaderSource(t,e.fragmentShader),this.gl.compileShader(t),!this.gl.getShaderParameter(t,this.gl.COMPILE_STATUS))return console.error(this.debugContext,"FRAGMENT SHADER COMPILER ERROR:",e.name),console.warn("Could not compile provided shader. Printing logs and errors:"),console.warn(this.lineFormatShader(e.fragmentShader)),console.warn("LOGS:"),console.warn(this.gl.getShaderInfoLog(t)),this.printError(),void this.gl.deleteShader(t)}var n=this.vertexShaders.get(e.vertexShader)||null;if(!n){if(!(n=this.gl.createShader(this.gl.VERTEX_SHADER)))return console.warn(this.debugContext,"Could not create a Vertex WebGLShader. Printing GL Errors:"),void this.printError();if(this.gl.shaderSource(n,e.vertexShader),this.gl.compileShader(n),!this.gl.getShaderParameter(n,this.gl.COMPILE_STATUS))return console.error(this.debugContext,"VERTEX SHADER COMPILER ERROR",e.name),console.warn("Could not compile provided shader. Printing logs and errors:"),console.warn(this.lineFormatShader(e.vertexShader)),console.warn("LOGS:"),console.warn(this.gl.getShaderInfoLog(n)),this.printError(),void this.gl.deleteShader(n)}var r=this.programs.get(n);r||(r=new Map,this.programs.set(n,r));var i=r.get(t)||null;if(i)i.useCount++;else{var o=this.gl.createProgram();if(!o)return console.warn(this.debugContext,"Could not create a WebGLProgram. Printing GL Errors:"),void this.printError();if(i={useCount:1,program:o},this.gl.attachShader(o,n),this.gl.attachShader(o,t),this.gl.linkProgram(o),this.gl.validateProgram(o),!this.gl.getProgramParameter(o,this.gl.LINK_STATUS)||!this.gl.getProgramParameter(o,this.gl.VALIDATE_STATUS)){var A=this.gl.getProgramInfoLog(o);return console.warn(this.debugContext,"Could not compile WebGL program. \n\n",A),void this.gl.deleteProgram(o)}r.set(t,i)}e.gl={fsId:t,vsId:n,programId:i.program,proxy:this},this.state.useProgram(i.program);var a=this.state.currentProgram;if(!a)return!1;for(var s=this.gl.getProgramParameter(a,this.gl.ACTIVE_UNIFORMS),c=new Set,u=0;u<s;u++){var l=this.gl.getActiveUniform(a,u);l&&c.add(l.name)}var h=new Set;return Object.keys(e.uniforms).forEach(function(e){c.has(e)||h.add(e)}),h.forEach(function(t){delete e.uniforms[t]}),Object.keys(e.uniforms).length===c.size||(console.warn(this.debugContext,"A program is requesting a set of uniforms:",Array.from(c.values()),"but our material only provides",Object.keys(e.uniforms),"thus the expected rendering will be considered invalid."),!1)}},e.prototype.compileRenderTarget=function(e){var t=this;if(!e.gl){var n=this.gl,i=n.createFramebuffer();if(!i)return console.warn(this.debugContext,"Could not generate a frame buffer object. Printing GL errors:"),this.printError(),!1;this.state.bindFBO(i);var A={fboId:i,proxy:this};if(Array.isArray(e.buffers.color)){var a=[],s=!0;if(A.colorBufferId=a,e.buffers.color.forEach(function(i,A){if(s)if(i instanceof o.Texture)a.push(i),c(i)?n.framebufferTexture2D(n.FRAMEBUFFER,r.indexToColorAttachment(n,t.extensions,A,!0),n.TEXTURE_2D,i.gl.textureId,0):(console.warn(t.debugContext,"Attempted to compile render target whose target texture was not ready for use."),s=!1);else{var u=t.compileColorBuffer(i,e.width,e.height);u&&(a.push(u),n.framebufferRenderbuffer(n.FRAMEBUFFER,r.indexToColorAttachment(n,t.extensions,A,!0),n.RENDERBUFFER,u))}}),!s)return!1}else if(void 0!==e.buffers.color){var u;if((u=e.buffers.color)instanceof o.Texture){if(A.colorBufferId=u,!c(u))return console.warn(this.debugContext,"Attempted to compile render target whose target texture was not ready for use."),!1;n.framebufferTexture2D(n.FRAMEBUFFER,r.indexToColorAttachment(n,this.extensions,0,!0),n.TEXTURE_2D,u.gl.textureId,0)}else{var l;(l=this.compileColorBuffer(u,e.width,e.height))&&(A.colorBufferId=l,n.framebufferRenderbuffer(n.FRAMEBUFFER,r.indexToColorAttachment(n,this.extensions,0,!0),n.RENDERBUFFER,l))}}if(void 0!==e.buffers.depth)if((u=e.buffers.depth)instanceof o.Texture)A.depthBufferId=u,c(u)&&n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,u.gl.textureId,0);else(l=this.compileDepthBuffer(u,e.width,e.height))&&(A.depthBufferId=l,n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.RENDERBUFFER,l));if(void 0!==e.buffers.stencil)if((u=e.buffers.stencil)instanceof o.Texture)A.stencilBufferId=u,c(u)&&n.framebufferTexture2D(n.FRAMEBUFFER,n.STENCIL_ATTACHMENT,n.TEXTURE_2D,u.gl.textureId,0);else(l=this.compileStencilBuffer(u,e.width,e.height))&&(A.stencilBufferId=l,n.framebufferRenderbuffer(n.FRAMEBUFFER,n.STENCIL_ATTACHMENT,n.RENDERBUFFER,l));e.gl=A;var h=n.checkFramebufferStatus(n.FRAMEBUFFER),d=!1,f=!1,p="";switch(h){case n.FRAMEBUFFER_COMPLETE:e.setAsValid();break;case n.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:p="FRAMEBUFFER_INCOMPLETE_ATTACHMENT";break;case n.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:p="FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";break;case n.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:p="FRAMEBUFFER_INCOMPLETE_DIMENSIONS";break;case n.FRAMEBUFFER_UNSUPPORTED:p="FRAMEBUFFER_UNSUPPORTED";break;default:d=!0}if(n instanceof WebGL2RenderingContext)switch(h){case n.FRAMEBUFFER_INCOMPLETE_MULTISAMPLE:p="FRAMEBUFFER_INCOMPLETE_MULTISAMPLE";break;case n.RENDERBUFFER_SAMPLES:p="RENDERBUFFER_SAMPLES";break;default:f=!0}return d&&f&&(console.warn(this.debugContext,"A framebuffer check failed to return a known result. This FBO for render target will be assumed failed"),console.warn("Result:",h,"Render Target:",e),p="UNKNOWN"),!p||(console.warn(this.debugContext,"When creating a new FrameBuffer Object, the check on the framebuffer failed. Printing Errors:"),console.warn(p),console.warn("FAILED RENDER TARGET:",e),delete e.gl,!1)}},e.prototype.compileDepthBuffer=function(e,t,n){var i=this.gl,o=i.createRenderbuffer();return o?(this.state.bindRBO(o),i.renderbufferStorage(i.RENDERBUFFER,r.depthBufferFormat(i,e),t,n),o):(console.warn(this.debugContext,"Could not generate a WebGLRenderBuffer. Printing GL Errors:"),void this.printError())},e.prototype.compileStencilBuffer=function(e,t,n){var i=this.gl,o=i.createRenderbuffer();return o?(this.state.bindRBO(o),i.renderbufferStorage(i.RENDERBUFFER,r.stencilBufferFormat(i,e),t,n),o):(console.warn(this.debugContext,"Could not generate a WebGLRenderBuffer. Printing GL Errors:"),void this.printError())},e.prototype.compileColorBuffer=function(e,t,n){var i=this.gl,o=i.createRenderbuffer();return o?(this.state.bindRBO(o),i.renderbufferStorage(i.RENDERBUFFER,r.colorBufferFormat(i,e),t,n),o):(console.warn(this.debugContext,"Could not generate a WebGLRenderBuffer. Printing GL Errors:"),void this.printError())},e.prototype.compileTexture=function(e){if(e.gl&&!e.gl.textureId){if(!(e.gl.textureUnit<0)){this.state.setActiveTextureUnit(e.gl.textureUnit);var t=this.gl.createTexture();return t?(e.gl.textureId=t,e.needsDataUpload=!0,e.needsSettingsUpdate=!0,this.updateTextureData(e),this.updateTextureSettings(e),!0):(console.warn(this.debugContext,"Could not generate a texture object on the GPU. Printing any gl errors:"),void this.printError())}console.warn(this.debugContext,"A Texture object attempted to be compiled without an established Texture Unit.",e)}},e.prototype.draw=function(e){var t,n=[0,0];n=e.vertexDrawRange&&e.vertexDrawRange[0]>=0&&e.vertexDrawRange[1]>=0?[e.vertexDrawRange[0],e.vertexDrawRange[1]-e.vertexDrawRange[0]]:[0,e.vertexCount],e.drawInstances>=0&&e.geometry.isInstanced&&(t=this.extensions.instancing),t&&t instanceof WebGL2RenderingContext?t.drawArraysInstanced(r.drawMode(this.gl,e.drawMode),n[0],n[1],e.drawInstances):t?t.drawArraysInstancedANGLE(r.drawMode(this.gl,e.drawMode),n[0],n[1],e.drawInstances):this.gl.drawArrays(r.drawMode(this.gl,e.drawMode),n[0],n[1])},e.prototype.disposeMaterial=function(e){if(e.gl){var t=e.gl,n=t.vsId,r=t.fsId,i=t.programId,o=this.programs.get(n);o||(o=new Map,this.gl.deleteShader(n));var A=o.get(r);A||(A={useCount:0,program:i}),A.useCount--,A.useCount<1&&(this.gl.deleteProgram(A.program),o.delete(r),o.size<=0&&this.gl.deleteShader(n));var a=!1;this.programs.forEach(function(e){e.has(r)&&(a=!0)}),a||this.gl.deleteShader(r)}delete e.gl},e.prototype.disposeRenderBuffer=function(e){this.gl.deleteRenderbuffer(e)},e.prototype.disposeRenderTarget=function(e){var t=this;e.gl&&(Array.isArray(e.gl.colorBufferId)?e.gl.colorBufferId.forEach(function(n){n instanceof o.Texture&&!e.retainTextureTargets?t.disposeTexture(n):t.disposeRenderBuffer(n)}):e.gl.colorBufferId instanceof o.Texture&&!e.retainTextureTargets?this.disposeTexture(e.gl.colorBufferId):e.gl.colorBufferId instanceof WebGLRenderbuffer&&this.disposeRenderBuffer(e.gl.colorBufferId),e.gl.depthBufferId instanceof o.Texture&&!e.retainTextureTargets?this.disposeTexture(e.gl.depthBufferId):e.gl.depthBufferId instanceof WebGLRenderbuffer&&this.disposeRenderBuffer(e.gl.depthBufferId),e.gl.stencilBufferId instanceof o.Texture&&!e.retainTextureTargets?this.disposeTexture(e.gl.stencilBufferId):e.gl.stencilBufferId instanceof WebGLRenderbuffer&&this.disposeRenderBuffer(e.gl.stencilBufferId),delete e.gl)},e.prototype.disposeTexture=function(e){e.gl&&(this.gl.deleteTexture(e.gl.textureId),this.state.freeTextureUnit(e)),delete e.gl},e.getContext=function(t,n){for(var r=["webgl","experimental-webgl"],i=null,o={},a=0;a<r.length;++a){var s=r[a],c=t.getContext(s,n);if(c&&(c instanceof WebGLRenderingContext||c instanceof WebGL2RenderingContext)){A("Generated GL Context of version with attributes:",s,n),i=c,o=e.addExtensions(i);break}}return{context:i,extensions:o}},e.prototype.printError=function(){var e=this.gl.getError();switch(e){case this.gl.NO_ERROR:console.warn("GL Error: No Error");break;case this.gl.INVALID_ENUM:console.warn("GL Error: INVALID ENUM");break;case this.gl.INVALID_VALUE:console.warn("GL Error: INVALID_VALUE");break;case this.gl.INVALID_OPERATION:console.warn("GL Error: INVALID OPERATION");break;case this.gl.INVALID_FRAMEBUFFER_OPERATION:console.warn("GL Error: INVALID FRAMEBUFFER OPERATION");break;case this.gl.OUT_OF_MEMORY:console.warn("GL Error: OUT OF MEMORY");break;case this.gl.CONTEXT_LOST_WEBGL:console.warn("GL Error: CONTEXT LOST WEBGL");break;default:console.warn("GL Error: GL Context output an unrecognized error value:",e)}},e.prototype.lineFormatShader=function(e){var t=e.split("\n"),n=String(t.length).length+1;return"\n"+t.map(function(e,t){return""+Array(n-String(t+1).length).join(" ")+(t+1)+": "+e}).join("\n")},e.prototype.updateTexture=function(e){!e.gl||e.gl.textureUnit<0?console.warn(this.debugContext,"Can not update or compile a texture that does not have an established texture unit.",e):(this.compileTexture(e),this.updateTextureData(e),this.updateTexturePartialData(e),this.updateTextureSettings(e),e.resolve())},e.prototype.updateTextureData=function(e){if(e.needsDataUpload&&e.gl&&e.gl.textureId)if(e.gl.textureUnit<0)console.warn(this.debugContext,"A Texture object attempted to update it's data without an established Texture Unit.",e);else{var t=this.gl;this.state.setActiveTextureUnit(e.gl.textureUnit),this.state.bindTexture(e,i.GLSettings.Texture.TextureBindingTarget.TEXTURE_2D),e.needsSettingsUpdate=!0,this.updateTextureSettings(e),t instanceof WebGLRenderingContext&&(a(e.data)?(s(e.data.width)&&s(e.data.height)||A("Created a texture that is not using power of 2 dimensions."),t.texImage2D(t.TEXTURE_2D,0,r.texelFormat(t,e.format),e.data.width,e.data.height,0,r.texelFormat(t,e.format),r.inputImageFormat(t,e.type),e.data.buffer)):e.data&&(s(e.data.width)&&s(e.data.height)||A("Created a texture that is not using power of 2 dimensions. %o",e),t.texImage2D(t.TEXTURE_2D,0,r.texelFormat(t,e.format),r.texelFormat(t,e.format),r.inputImageFormat(t,e.type),e.data)),e.generateMipMaps&&t.generateMipmap(t.TEXTURE_2D)),e.data&&(e.data={width:e.data.width,height:e.data.height,buffer:null}),e.needsDataUpload=!1}},e.prototype.updateTexturePartialData=function(e){if(e.needsPartialDataUpload&&e.gl&&e.gl.textureId)if(e.gl.textureUnit<0)console.warn(this.debugContext,"A Texture object attempted to update it's data without an established Texture Unit.",e);else{var t=this.gl;this.state.setActiveTextureUnit(e.gl.textureUnit),this.state.bindTexture(e,i.GLSettings.Texture.TextureBindingTarget.TEXTURE_2D),e.updateRegions.forEach(function(n){var i=n[0],o=n[1];t instanceof WebGLRenderingContext&&(a(i)?t.texSubImage2D(t.TEXTURE_2D,0,o.x,o.y,i.width,i.height,r.texelFormat(t,e.format),r.inputImageFormat(t,e.type),i.buffer):i&&t.texSubImage2D(t.TEXTURE_2D,0,o.x,o.y,r.texelFormat(t,e.format),r.inputImageFormat(t,e.type),i),e.generateMipMaps&&t.generateMipmap(t.TEXTURE_2D))}),e.needsPartialDataUpload=!1}},e.prototype.updateTextureSettings=function(e){if(e.needsSettingsUpdate&&e.gl&&e.data&&e.gl.textureId)if(e.gl.textureUnit<0)console.warn(this.debugContext,"A Texture object attempted to update it's settings without an established Texture Unit.",e);else{var t=s(e.data.width)&&s(e.data.height),n=this.gl;if(this.state.setActiveTextureUnit(e.gl.textureUnit),this.state.bindTexture(e,i.GLSettings.Texture.TextureBindingTarget.TEXTURE_2D),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,r.magFilter(n,e.magFilter,t)),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,r.minFilter(n,e.minFilter,t,e.generateMipMaps)),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,r.wrapMode(n,e.wrapHorizontal)),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,r.wrapMode(n,e.wrapVertical)),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.premultiplyAlpha),n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,e.flipY),this.extensions.anisotropicFiltering){var o=this.extensions.anisotropicFiltering,A=o.ext,a=o.stat;n.texParameterf(n.TEXTURE_2D,A.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(a.maxAnistropicFilter,Math.floor(e.anisotropy)))}e.needsSettingsUpdate=!1}},e.prototype.updateAttribute=function(e){if(!e.gl)return this.compileAttribute(e);if(!e.fullUpdate&&!e.needsUpdate)return!0;var t=this.gl;if(e.fullUpdate||e.updateRange.count<0||e.updateRange.offset<0)this.state.bindVBO(e.gl.bufferId),t.bufferData(t.ARRAY_BUFFER,e.data,e.isDynamic?t.DYNAMIC_DRAW:t.STATIC_DRAW);else if(e.updateRange.count>0){this.state.bindVBO(e.gl.bufferId);var n=e.updateRange.offset;t.bufferSubData(t.ARRAY_BUFFER,4*n,e.data.subarray(n,n+e.updateRange.count))}return e.resolve(),!0},e.prototype.useAttribute=function(e,t,n){if(!this.state.currentProgram)return!1;if(!t.gl)return!1;t.gl.locations=t.gl.locations||new Map;var r=t.gl.locations.get(this.state.currentProgram);return void 0===r&&(-1===(r=this.gl.getAttribLocation(this.state.currentProgram,e))&&A("WARN: An attribute is not being used with the current material: %o",t),t.gl.locations.set(this.state.currentProgram,r)),-1!==r?(this.state.bindVBO(t.gl.bufferId),this.state.willUseVertexAttributeArray(r),this.gl.vertexAttribPointer(r,t.size,this.gl.FLOAT,t.normalize,0,0),n.isInstanced&&t.isInstanced&&this.extensions.instancing?this.state.setVertexAttributeArrayDivisor(r,1):this.state.setVertexAttributeArrayDivisor(r,0),!0):void 0},e}();t.GLProxy=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(4),i=n(51),o=n(11),A=n(78),a=n(33),s=n(2)("performance"),c=function(){function e(e,t){this.debugContext="",this._textureUnitToTexture=new Map,this._freeUnits=[],this._blendingEnabled=!0,this._blendDstFactor=o.GLSettings.Material.BlendingDstFactor.One,this._blendSrcFactor=o.GLSettings.Material.BlendingDstFactor.One,this._blendEquation=o.GLSettings.Material.BlendingEquations.Add,this._cullFace=o.GLSettings.Material.CullSide.NONE,this._colorMask=[!0,!0,!0,!0],this._clearColor=[0,0,0,1],this._depthFunc=o.GLSettings.Material.DepthFunctions.ALWAYS,this._depthTestEnabled=!0,this._depthMask=!0,this._ditheringEnabled=!0,this._boundFBO=null,this._boundRBO=null,this._boundVBO=null,this._boundTexture={id:null,unit:-1},this._currentProgram=null,this._scissorTestEnabled=!1,this._scissorBounds={x:0,y:0,width:1,height:1},this._activeTextureUnit=-1,this._textureWillBeUsed=new Map,this._viewport={x:0,y:0,width:100,height:100},this._enabledVertexAttributeArray=[],this._willUseVertexAttributeArray=[],this._vertexAttributeArrayDivisor=new Map,this.gl=e,this.extensions=t;for(var n=this.gl.getParameter(e.MAX_COMBINED_TEXTURE_IMAGE_UNITS),r=0;r<n;++r)this._freeUnits.push(i.indexToTextureUnit(e,r));this._activeTextureUnit=e.TEXTURE0}return Object.defineProperty(e.prototype,"blendingEnabled",{get:function(){return this._blendingEnabled},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"blendDstFactor",{get:function(){return this._blendDstFactor},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"blendSrcFactor",{get:function(){return this._blendSrcFactor},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"blendEquation",{get:function(){return this._blendEquation},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cullFace",{get:function(){return this._cullFace},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"colorMask",{get:function(){return this._colorMask},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"clearColor",{get:function(){return this._clearColor},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"depthFunc",{get:function(){return this._depthFunc},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"depthTestEnabled",{get:function(){return this._depthTestEnabled},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"depthMask",{get:function(){return this._depthMask},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ditheringEnabled",{get:function(){return this._ditheringEnabled},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"boundFBO",{get:function(){return this._boundFBO},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"boundRBO",{get:function(){return this._boundRBO},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"boundVBO",{get:function(){return this._boundVBO},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"boundTexture",{get:function(){return this._boundTexture},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"currentProgram",{get:function(){return this._currentProgram},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scissorTestEnabled",{get:function(){return this._scissorTestEnabled},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scissorBounds",{get:function(){return this._scissorBounds},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"currentUniforms",{get:function(){return this._currentUniforms},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"activeTextureUnit",{get:function(){return this._activeTextureUnit},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"textureWillBeUsed",{get:function(){return this._textureWillBeUsed},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"viewport",{get:function(){return this._viewport},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"enabledVertexAttributeArray",{get:function(){return this._enabledVertexAttributeArray.slice(0).filter(function(e){return void 0!==e})},enumerable:!0,configurable:!0}),e.prototype.bindVBO=function(e){this._boundVBO!==e&&(this._boundVBO=e,this.gl.bindBuffer(this.gl.ARRAY_BUFFER,e))},e.prototype.bindRBO=function(e){this._boundRBO!==e&&(this._boundRBO=e,this.gl.bindRenderbuffer(this.gl.RENDERBUFFER,e))},e.prototype.bindFBO=function(e){this._boundFBO!==e&&(this._boundFBO=e,this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,e))},e.prototype.bindTexture=function(e,t){if(e.gl&&e.gl.textureId&&(!e||this._boundTexture.id!==e.gl.textureId||this._boundTexture.unit!==this._activeTextureUnit)){switch(this._boundTexture={id:e.gl.textureId,unit:this._activeTextureUnit},t){case o.GLSettings.Texture.TextureBindingTarget.TEXTURE_2D:this.gl.bindTexture(this.gl.TEXTURE_2D,e.gl.textureId);break;case o.GLSettings.Texture.TextureBindingTarget.TEXTURE_2D:this.gl.bindTexture(this.gl.TEXTURE_CUBE_MAP,e.gl.textureId)}var n=this._textureUnitToTexture.get(this._activeTextureUnit);n&&n.gl&&(n.gl.textureUnit=-1),this._textureUnitToTexture.set(this._activeTextureUnit,e),e.gl.textureUnit=this._activeTextureUnit}},e.prototype.willUseVertexAttributeArray=function(e){this._willUseVertexAttributeArray[e]=e,void 0===this._enabledVertexAttributeArray[e]&&(this._enabledVertexAttributeArray[e]=e,this.gl.enableVertexAttribArray(e))},e.prototype.applyVertexAttributeArrays=function(){for(var e=0,t=this._enabledVertexAttributeArray.length;e<t;++e){var n=this._enabledVertexAttributeArray[e];if(void 0!==n){if(void 0!==this._willUseVertexAttributeArray[n])return;this.gl.disableVertexAttribArray(n),delete this._enabledVertexAttributeArray[n]}}this._willUseVertexAttributeArray=[]},e.prototype.setVertexAttributeArrayDivisor=function(e,t){this.extensions.instancing&&void 0!==this._enabledVertexAttributeArray[e]&&this._vertexAttributeArrayDivisor.get(e)!==t&&(this.extensions.instancing instanceof WebGL2RenderingContext?this.extensions.instancing.vertexAttribDivisor(e,t):this.extensions.instancing.vertexAttribDivisorANGLE(e,t),this._vertexAttributeArrayDivisor.set(e,t))},e.prototype.freeTextureUnit=function(e){e.gl&&e.gl.textureUnit>-1&&(this._freeUnits.unshift(e.gl.textureUnit),e.gl.textureUnit=-1)},e.prototype.setActiveTextureUnit=function(e){this._activeTextureUnit!==e&&(this._activeTextureUnit=e,this.gl.activeTexture(e))},e.prototype.setClearColor=function(e){r.compare4(e,this._clearColor)||(this._clearColor=r.copy4(e),this.applyClearColor())},e.prototype.setProxy=function(e){this.glProxy=e},e.prototype.setScissor=function(e){e?(this._scissorTestEnabled||(this._scissorTestEnabled=!0,this.gl.enable(this.gl.SCISSOR_TEST)),e.x===this._scissorBounds.x&&e.y===this._scissorBounds.y&&e.width===this._scissorBounds.width&&e.height===this._scissorBounds.height||(this._scissorBounds=e,this.applyScissorBounds())):this._scissorTestEnabled&&(this._scissorTestEnabled=!1,this.gl.disable(this.gl.SCISSOR_TEST))},e.prototype.setViewport=function(e,t,n,r){e===this._viewport.x&&t===this._viewport.y&&n===this._viewport.width&&r===this._viewport.height||(this._viewport={x:e,y:t,width:n,height:r},this.applyViewport())},e.prototype.useProgram=function(e){this._currentProgram!==e&&(this._currentProgram=e,this.gl.useProgram(this._currentProgram))},e.prototype.useMaterial=function(e){if(!e.gl){if(!this.glProxy.compileMaterial(e))return!1;if(!e.gl)return!1}return!!e.gl.programId&&(this.useProgram(e.gl.programId),this.syncMaterial(e),!0)},e.prototype.useRenderTarget=function(e){return e?!!e.gl&&(this.bindFBO(e.gl.fboId),!0):(this.bindFBO(null),!0)},e.prototype.syncMaterial=function(e){var t=this,n=this.gl,r=Boolean(e.depthWrite);this._depthMask!==r&&(this._depthMask=r,n.depthMask(this._depthMask)),this._depthTestEnabled!==e.depthTest&&(this._depthTestEnabled=e.depthTest,this._depthTestEnabled?n.enable(n.DEPTH_TEST):n.disable(n.DEPTH_TEST)),this._depthFunc!==e.depthFunc&&(this._depthFunc=e.depthFunc,this.applyDepthFunc()),e.blending?(this._blendingEnabled||n.enable(n.BLEND),this._blendDstFactor===e.blending.blendDst&&this._blendSrcFactor===e.blending.blendSrc&&this._blendEquation===e.blending.blendEquation||(this._blendDstFactor=e.blending.blendDst||this._blendDstFactor,this._blendSrcFactor=e.blending.blendSrc||this._blendSrcFactor,this._blendEquation=e.blending.blendEquation||this._blendEquation,this.applyBlendFactors())):this._blendingEnabled&&n.disable(n.BLEND),this._cullFace!==e.culling&&(this._cullFace=e.culling,this.applyCullFace()),this._colorMask[0]===e.colorWrite[0]&&this._colorMask[1]===e.colorWrite[1]&&this._colorMask[2]===e.colorWrite[2]&&this._colorMask[3]===e.colorWrite[3]||(this._colorMask=e.colorWrite,this.applyColorMask()),this._ditheringEnabled!==e.dithering&&(this._ditheringEnabled=e.dithering,this._ditheringEnabled?n.enable(n.DITHER):n.disable(n.DITHER)),this._currentUniforms=e.uniforms;var i=!0;return!!this._currentProgram&&(Object.entries(e.uniforms).forEach(function(e){var n=e[0],r=e[1];if(t._currentProgram){r.gl||(r.gl=new Map);var o=r.gl.get(t._currentProgram);if(!o){var A=t.gl.getUniformLocation(t._currentProgram,n);if(!A)return console.warn(t.debugContext,"A Material specified a uniform "+n+", but none was found in the current program."),void(i=!1);o={location:A},r.gl.set(t._currentProgram,o)}t.uploadUniform(o.location,r)}}),i?!(this._textureWillBeUsed.size>0&&!this.applyUsedTextures()):(console.warn(e.vertexShader),console.warn(e.fragmentShader),!1))},e.prototype.uploadUniform=function(e,t){var n;switch(t.type){case a.MaterialUniformType.FLOAT:n=t.value,this.gl.uniform1f(e,n);break;case a.MaterialUniformType.VEC2:n=t.value,this.gl.uniform2f(e,n[0],n[1]);break;case a.MaterialUniformType.VEC3:n=t.value,this.gl.uniform3f(e,n[0],n[1],n[2]);break;case a.MaterialUniformType.VEC4:n=t.value,this.gl.uniform4f(e,n[0],n[1],n[2],n[3]);break;case a.MaterialUniformType.VEC4_ARRAY:n=t.value,this.gl.uniform4fv(e,r.flatten4(n));break;case a.MaterialUniformType.MATRIX3x3:n=t.value,this.gl.uniformMatrix3fv(e,!1,n);break;case a.MaterialUniformType.MATRIX4x4:n=t.value,this.gl.uniformMatrix4fv(e,!1,n);break;case a.MaterialUniformType.TEXTURE:n=t.value,this.willUseTextureUnit(n,e);break;default:console.warn(this.debugContext,"A uniform specified an unrecognized type. It will not sync with the GPU:",t)}},e.prototype.applyUsedTextures=function(){var e=this,t=this.assignTextureUnits(Array.from(this._textureWillBeUsed.keys()));t.forEach(function(t){t.gl?t.gl.textureUnit=e.gl.TEXTURE0:t.gl={textureId:null,textureUnit:e.gl.TEXTURE0,proxy:e.glProxy}});var n=new Map,r=new Set;return this._textureWillBeUsed.forEach(function(e,t){e instanceof A.RenderTarget?r.add(e):n.set(t,e)}),r.forEach(function(n){n.getTextures().some(function(n){return!(t.indexOf(n)<0)||(e.glProxy.updateTexture(n),!1)})?console.warn(e.debugContext,"A RenderTarget can not be used because all of it's textures could not be compiled."):e.glProxy.compileRenderTarget(n)}),n.forEach(function(n,r){t.indexOf(r)<0?(e.glProxy.updateTexture(r),n.forEach(function(t){e.uploadTextureToUniform(t,r)})):n.forEach(function(t){e.gl.uniform1i(t,i.textureUnitToIndex(e.gl,0))})}),this._textureWillBeUsed.clear(),!0},e.prototype.assignTextureUnits=function(e){var t=[],n=[];for(e.forEach(function(e){!e.gl||e.gl.textureUnit<0?t.push(e):n.push(e)});this._freeUnits.length>0&&t.length>0;){if(o=t.shift())void 0!==(A=this._freeUnits.shift())?(o.gl?o.gl.textureUnit=A:o.gl={textureId:null,textureUnit:A,proxy:this.glProxy},n.push(o)):t.unshift(o)}if(t.length<=0)return t;s("WARNING: Too many textures in use are causing texture units to be swapped. Doing this occasionally is fine, but handling this on a frame loop can have serious performance concerns.");var r=new Map;this._textureUnitToTexture.forEach(function(e){e&&r.set(e,!1)}),n.forEach(function(e){r.set(e,!0)});var i=[];if(r.forEach(function(e,t){e||i.push(t)}),0===i.length)return console.warn(this.debugContext,"There are too many textures being used for a single draw call. These textures will not be utilized on the GPU",t),t;for(;i.length>0&&t.length>0;){var o,A;if(o=t.shift())void 0===(A=i.shift())||!A.gl||A.gl.textureUnit<0?t.unshift(o):(o.gl?o.gl.textureUnit=A.gl.textureUnit:o.gl={textureId:null,textureUnit:A.gl.textureUnit,proxy:this.glProxy},n.push(o))}return t.length>0&&console.warn(this.debugContext,"There are too many textures being used for a single draw call. These textures will not be utilized on the GPU",t),t},e.prototype.uploadTextureToUniform=function(e,t){t.gl&&t.gl.textureUnit>=0?this.gl.uniform1i(e,i.textureUnitToIndex(this.gl,t.gl.textureUnit)):console.warn(this.debugContext,"Attempted to set a Texture Object to a uniform, but the Texture object did not have a valid texture unit.",t)},e.prototype.willUseTextureUnit=function(e,t){var n=this._textureWillBeUsed.get(e);t instanceof A.RenderTarget?n?n instanceof A.RenderTarget&&n!==t&&console.warn(this.debugContext,"A Texture is attempting to be used by two different render targets in a single draw."):this._textureWillBeUsed.set(e,t):n?n instanceof A.RenderTarget?console.warn(this.debugContext,"A texture in a single draw is attempting to attach to a uniform AND a render target which is invalid."):n.add(t):this._textureWillBeUsed.set(e,new Set([t]))},e.prototype.syncState=function(){var e=this.gl;this._blendingEnabled?e.enable(e.BLEND):e.disable(e.BLEND),this._ditheringEnabled?e.enable(e.DITHER):e.disable(e.DITHER),this._depthTestEnabled?e.enable(e.DEPTH_TEST):e.disable(e.DEPTH_TEST),this._scissorTestEnabled?e.enable(e.SCISSOR_TEST):e.disable(e.SCISSOR_TEST),this.setActiveTextureUnit(this._activeTextureUnit),this.applyClearColor(),this.applyCullFace(),this.applyBlendFactors(),this.applyBlendEquation(),this.applyColorMask(),this.applyDepthFunc(),this.applyScissorBounds(),this.applyViewport(),e.depthMask(this._depthMask)},e.prototype.applyClearColor=function(){this.gl.clearColor(this._clearColor[0],this._clearColor[1],this._clearColor[2],this._clearColor[3])},e.prototype.applyDepthFunc=function(){var e=this.gl;switch(this._depthFunc){case o.GLSettings.Material.DepthFunctions.ALWAYS:e.depthFunc(e.ALWAYS);break;case o.GLSettings.Material.DepthFunctions.EQUAL:e.depthFunc(e.EQUAL);break;case o.GLSettings.Material.DepthFunctions.GREATER:e.depthFunc(e.GREATER);break;case o.GLSettings.Material.DepthFunctions.GREATER_OR_EQUAL:e.depthFunc(e.GEQUAL);break;case o.GLSettings.Material.DepthFunctions.LESS:e.depthFunc(e.LESS);break;case o.GLSettings.Material.DepthFunctions.LESS_OR_EQUAL:e.depthFunc(e.LEQUAL);break;case o.GLSettings.Material.DepthFunctions.NEVER:e.depthFunc(e.NEVER);break;case o.GLSettings.Material.DepthFunctions.NOTEQUAL:e.depthFunc(e.NOTEQUAL);break;default:e.depthFunc(e.ALWAYS)}},e.prototype.applyScissorBounds=function(){this.gl.scissor(this._scissorBounds.x,this._scissorBounds.y,this._scissorBounds.width,this._scissorBounds.height)},e.prototype.applyColorMask=function(){this.gl.colorMask(this.colorMask[0]||!1,this.colorMask[1]||!1,this.colorMask[2]||!1,this.colorMask[3]||!1)},e.prototype.applyBlendEquation=function(){var e=this.gl;switch(this._blendEquation){case o.GLSettings.Material.BlendingEquations.Add:e.blendEquation(e.FUNC_ADD);break;case o.GLSettings.Material.BlendingEquations.Subtract:e.blendEquation(e.FUNC_SUBTRACT);break;case o.GLSettings.Material.BlendingEquations.ReverseSubtract:e.blendEquation(e.FUNC_REVERSE_SUBTRACT)}},e.prototype.applyBlendFactors=function(){var e,t,n=this.gl;switch(this._blendDstFactor){case o.GLSettings.Material.BlendingDstFactor.DstAlpha:e=n.BLEND_DST_ALPHA;break;case o.GLSettings.Material.BlendingDstFactor.DstColor:e=n.BLEND_DST_RGB;break;case o.GLSettings.Material.BlendingDstFactor.One:e=n.ONE;break;case o.GLSettings.Material.BlendingDstFactor.OneMinusDstAlpha:e=n.ONE_MINUS_DST_ALPHA;break;case o.GLSettings.Material.BlendingDstFactor.OneMinusDstColor:e=n.ONE_MINUS_DST_COLOR;break;case o.GLSettings.Material.BlendingDstFactor.OneMinusSrcAlpha:e=n.ONE_MINUS_SRC_ALPHA;break;case o.GLSettings.Material.BlendingDstFactor.OneMinusSrcColor:e=n.ONE_MINUS_SRC_COLOR;break;case o.GLSettings.Material.BlendingDstFactor.SrcAlpha:e=n.SRC_ALPHA;break;case o.GLSettings.Material.BlendingDstFactor.SrcColor:e=n.SRC_COLOR;break;case o.GLSettings.Material.BlendingDstFactor.Zero:e=n.ZERO;break;default:e=n.ONE}switch(this._blendSrcFactor){case o.GLSettings.Material.BlendingDstFactor.DstAlpha:t=n.BLEND_DST_ALPHA;break;case o.GLSettings.Material.BlendingDstFactor.DstColor:t=n.BLEND_DST_RGB;break;case o.GLSettings.Material.BlendingDstFactor.One:t=n.ONE;break;case o.GLSettings.Material.BlendingDstFactor.OneMinusDstAlpha:t=n.ONE_MINUS_DST_ALPHA;break;case o.GLSettings.Material.BlendingDstFactor.OneMinusDstColor:t=n.ONE_MINUS_DST_COLOR;break;case o.GLSettings.Material.BlendingDstFactor.OneMinusSrcAlpha:t=n.ONE_MINUS_SRC_ALPHA;break;case o.GLSettings.Material.BlendingDstFactor.OneMinusSrcColor:t=n.ONE_MINUS_SRC_COLOR;break;case o.GLSettings.Material.BlendingDstFactor.SrcAlpha:t=n.SRC_ALPHA;break;case o.GLSettings.Material.BlendingDstFactor.SrcColor:t=n.SRC_COLOR;break;case o.GLSettings.Material.BlendingDstFactor.Zero:t=n.ZERO;break;case o.GLSettings.Material.BlendingSrcFactor.SrcAlphaSaturate:t=n.SRC_ALPHA_SATURATE;break;default:t=n.ONE}n.blendFunc(t,e)},e.prototype.applyCullFace=function(){var e=this.gl;switch(this._cullFace!==o.GLSettings.Material.CullSide.NONE&&e.enable(e.CULL_FACE),this._cullFace){case o.GLSettings.Material.CullSide.CW:e.frontFace(e.CW),e.cullFace(e.FRONT);break;case o.GLSettings.Material.CullSide.CCW:e.frontFace(e.CCW),e.cullFace(e.FRONT);break;case o.GLSettings.Material.CullSide.BOTH:e.frontFace(e.CW),e.cullFace(e.FRONT_AND_BACK);break;default:e.disable(e.CULL_FACE)}},e.prototype.applyViewport=function(){this.gl.viewport(this._viewport.x,this._viewport.y,this._viewport.width,this._viewport.height)},e}();t.GLState=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(9),i=n(22),o=function(){function e(e){this._uid=r.uid(),this._validFramebuffer=!1,this.retainTextureTargets=!1,this._splitRenderBuffers=null,this._buffers={color:Array.isArray(e.buffers.color)?e.buffers.color.slice(0):e.buffers.color,depth:e.buffers.depth,stencil:e.buffers.stencil},this._width=e.width||0,this._height=e.height||0,this.retainTextureTargets=e.retainTextureTargets||!1,this.getDimensions()}return Object.defineProperty(e.prototype,"uid",{get:function(){return this._uid},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"buffers",{get:function(){return{color:Array.isArray(this._buffers.color)?this._buffers.color.slice(0):this._buffers.color,depth:this._buffers.depth,stencil:this._buffers.stencil}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return this._width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"validFramebuffer",{get:function(){return this._validFramebuffer},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"splitRenderBuffers",{get:function(){return this._splitRenderBuffers},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){this.gl&&this.gl.proxy.disposeRenderTarget(this)},e.prototype.getDimensions=function(){var e=this,t=[];if(this._buffers.color instanceof i.Texture&&t.push(this._buffers.color),Array.isArray(this._buffers.color)&&this._buffers.color.forEach(function(e){e instanceof i.Texture&&t.push(e)}),this._buffers.depth instanceof i.Texture&&t.push(this._buffers.depth),this._buffers.stencil instanceof i.Texture&&t.push(this._buffers.stencil),t.length>0&&t[0].data){var n=t[0].data,r=n.width,o=n.height;t.forEach(function(n){if(n.data){var i=n.data,A=i.width,a=i.height;A===r&&a===o||(console.warn("Texture applied to the render target is invalid as it does not match dimensions of all textures applied:",n,t,"The texture will be removed as a target for the render target"),e.removeTextureFromBuffer(n))}}),this._width=r,this._height=o}else this._width&&this._height||console.warn("A RenderTarget was not able to establish valid dimensions. This target had no texture buffers and did not specify valid width and height values.",this)},e.prototype.getTextures=function(){var e=[];return Array.isArray(this.buffers.color)?this.buffers.color.forEach(function(t){t instanceof i.Texture&&e.push(t)}):this.buffers.color instanceof i.Texture&&e.push(this.buffers.color),this.buffers.depth instanceof i.Texture&&e.push(this.buffers.depth),this.buffers.stencil instanceof i.Texture&&e.push(this.buffers.stencil),e},e.prototype.removeTextureFromBuffer=function(e){if(Array.isArray(this._buffers.color)){var t=this._buffers.color.indexOf(e);t>-1&&this._buffers.color.splice(t,1)}else this._buffers.color===e&&delete this._buffers.color;this._buffers.depth===e&&delete this._buffers.depth,this._buffers.stencil===e&&delete this._buffers.stencil},e.prototype.setSize=function(e,t){this.dispose(),this._width=e,this._height=t,this.getTextures().forEach(function(n){n.data={buffer:null,height:t,width:e}})},e.prototype.setAsValid=function(){this._validFramebuffer=!0},e}();t.RenderTarget=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(76),i=n(77),o=n(23),A=function(){function e(e){this.state={clearMask:[!1,!1,!1],currentRenderTarget:null,displaySize:[1,1],pixelRatio:1,renderSize:[1,1]},this.options=Object.assign({alpha:!1,antialias:!1,preserveDrawingBuffer:!1},e),this.options.canvas||console.warn("WebGLRenderer ERROR: A canvas is REQUIRED as a parameter."),this.getContext()}return Object.defineProperty(e.prototype,"debugContext",{set:function(e){this.glProxy&&(this.glProxy.debugContext=e),this.glState&&(this.glState.debugContext=e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"gl",{get:function(){return this._gl},enumerable:!0,configurable:!0}),e.prototype.clear=function(e,t,n){var r=this.state.clearMask;this.state.clearMask=[r[0]||e||!1,r[1]||t||!1,r[2]||n||!1]},e.prototype.clearColor=function(e){e&&this.glState.setClearColor(e)},e.prototype.dispose=function(){},e.prototype.getContext=function(){if(this._gl)return this._gl;var e=r.GLProxy.getContext(this.options.canvas,{alpha:this.options.alpha||!1,antialias:this.options.antialias||!1,premultipliedAlpha:this.options.premultipliedAlpha||!1,preserveDrawingBuffer:this.options.preserveDrawingBuffer||!1});return e.context?(this._gl=e.context,this.glState=new i.GLState(e.context,e.extensions),this.glProxy=new r.GLProxy(e.context,this.glState,e.extensions),this.glState.setProxy(this.glProxy),this.glState.syncState()):this.options.onNoContext?this.options.onNoContext():console.warn("No context was able to be produced, and the handler onNoContext was not implemented for such cases."),this._gl},e.prototype.getDisplaySize=function(){return this.state.displaySize},e.prototype.getPixelRatio=function(){return this.state.pixelRatio},e.prototype.getRenderSize=function(){return this.state.renderSize},e.prototype.getFullViewport=function(){var e=this.state.currentRenderTarget;if(e)return{x:0,y:0,width:e.width,height:e.height};var t=this.getRenderSize();return{x:0,y:0,width:t[0],height:t[1]}},e.prototype.prepareAttribute=function(e,t,n){return this.glProxy.updateAttribute(t)?(this.glProxy.useAttribute(n,t,e),!0):(console.warn("Could not update attribute",t),!1)},e.prototype.render=function(e,t){var n=this;if(void 0===t&&(t=null),this.gl){this.setRenderTarget(t);var r=this.state.clearMask;if((r[0]||r[1]||r[2])&&(this.glProxy.clear(r[0],r[1],r[2]),this.state.clearMask=[!1,!1,!1]),!t||t.gl){var i=[];e.models.forEach(function(e){n.renderModel(e,i)}),i.forEach(function(t){e.remove(t)})}else console.warn("FBO is not ready for drawing. Skipping the rendering of the scene and target:",{scene:e,target:t})}},e.prototype.renderModel=function(e,t){var n=e.geometry,r=e.material;if(this.glState.useMaterial(r)){var i=!0;n.attributes.forEach(function(e,t){i=this.prepareAttribute(n,e,t)&&i},this),this.glState.applyVertexAttributeArrays(),i?this.glProxy.draw(e):(console.warn("Geometry was unable to update correctly, thus we are skipping the drawing of",e),t.push(e))}else console.warn("Could not utilize material. Skipping draw call for:",r,n),t.push(e)},e.prototype.readPixels=function(e,t,n,r,i){if(this.gl){var o=this.state.currentRenderTarget,A=!0;if(o&&(A=o.validFramebuffer),A)if(e=Math.max(0,e),t=Math.max(0,t),o){e+n>o.width&&(n=o.width-e),t+r>o.height&&(r=o.height-t);var a=o.height;this.gl.readPixels(e,a-t-r,n,r,this.gl.RGBA,this.gl.UNSIGNED_BYTE,i)}else{var s=this.getRenderSize();a=s[1];e+n>s[0]&&(n=s[0]-e),t+r>s[1]&&(r=s[1]-t),this.gl.readPixels(e,a-t-r,n,r,this.gl.RGBA,this.gl.UNSIGNED_BYTE,i)}else console.warn("Framebuffer is incomplete. Can not read pixels at this time.")}},e.prototype.setClearColor=function(e){this.glState.setClearColor(e)},e.prototype.setPixelRatio=function(e){var t=this.options.canvas,n=this.getDisplaySize();t.width=n[0]*e,t.height=n[1]*e,this.state.pixelRatio=e},e.prototype.setScissor=function(e,t){if(t=t||this.state.currentRenderTarget||void 0){var n=t.height;if(e){var r=e.x,i=e.y,o=e.width,A=e.height;this.glState.setScissor({x:r,y:n-i-A,width:o,height:A})}else this.glState.setScissor(null)}else{n=this.state.renderSize[1];if(e){r=e.x,i=e.y,o=e.width,A=e.height;this.glState.setScissor({x:r,y:n-i-A,width:o,height:A})}else this.glState.setScissor(null)}},e.prototype.setSize=function(e,t){var n=this.options.canvas,r=this.state.pixelRatio;n.width=Math.min(e*r,o.WebGLStat.MAX_TEXTURE_SIZE),n.height=Math.min(t*r,o.WebGLStat.MAX_TEXTURE_SIZE),n.style.width=e+"px",n.style.height=t+"px",this.state.renderSize=[n.width,n.height],this.state.displaySize=[e,t]},e.prototype.setRenderTarget=function(e){var t=this;this.state.currentRenderTarget!==e&&(!this.glState.useRenderTarget(e)&&e&&(e.getTextures().forEach(function(n){t.glState.willUseTextureUnit(n,e)}),this.glState.applyUsedTextures(),this.glProxy.compileRenderTarget(e)&&this.glState.useRenderTarget(e)),this.state.currentRenderTarget=e)},e.prototype.setViewport=function(e){var t=this.state.currentRenderTarget,n=e.x,r=e.y,i=e.width,o=e.height;if(t){var A=t.height;this.glState.setViewport(n,A-r-o,i,o)}else{A=this.state.renderSize[1];this.glState.setViewport(n,A-r-o,i,o)}},e}();t.WebGLRenderer=A},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function A(e){try{s(r.next(e))}catch(e){o(e)}}function a(e){try{s(r.throw(e))}catch(e){o(e)}}function s(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(A,a)}s((r=r.apply(e,t||[])).next())})},o=this&&this.__generator||function(e,t){var n,r,i,o,A={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;A;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return A.label++,{value:o[1],done:!1};case 5:A.label++,r=o[1],o=[0];continue;case 7:o=A.ops.pop(),A.trys.pop();continue;default:if(!(i=(i=A.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){A=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){A.label=o[1];break}if(6===o[0]&&A.label<i[1]){A.label=i[1],i=o;break}if(i&&A.label<i[2]){A.label=i[2],A.ops.push(o);break}i[2]&&A.ops.pop(),A.trys.pop();continue}o=t.call(e,A)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};Object.defineProperty(t,"__esModule",{value:!0});var A=n(43),a=n(25),s=n(0),c=n(16),u=n(81),l=n(82),h=n(2)("performance");!function(e){e[e._16=16]="_16",e[e._32=32]="_32",e[e._64=64]="_64",e[e._128=128]="_128"}(t.FontGlyphRenderSize||(t.FontGlyphRenderSize={})),t.isFontResource=function(e){return e&&e.type===s.ResourceType.FONT},t.createFont=function(e){return r({key:"",type:s.ResourceType.FONT},e)};var d=function(){function e(){this.fontMaps=new Map,this.fontRenderer=new l.FontRenderer}return e.prototype.calculateMetrics=function(e,t){return i(this,void 0,void 0,function(){var n,r,i,A,a,s;return o(this,function(o){switch(o.label){case 0:if(h("Calculating metrics for requests"),!(n=this.fontMaps.get(e)))return[2];r=0,i=t.length,o.label=1;case 1:return r<i?(A=t[r],(a=A.metrics)?(a.layout=n.getStringLayout(a.text,a.fontSize,a.letterSpacing),a.maxWidth?(h("Calculating truncation for",a.text,a.maxWidth),s=a,[4,n.getTruncatedLayout(a.layout,a.truncation||"",a.maxWidth,a.fontSize,a.letterSpacing,this.fontRenderer)]):[3,3]):[3,3]):[3,4];case 2:s.layout=o.sent(),a.truncatedText=a.layout.text,o.label=3;case 3:return++r,[3,1];case 4:return[2]}})})},e.prototype.characterFilterToCharacters=function(e){for(var t=new Set,n="",r=0,i=e.length;r<i;++r){var o=e[r];t.has(o)||(t.add(o),n+=o)}return n},e.prototype.createFontMap=function(e){return i(this,void 0,void 0,function(){var t,n,i,A;return o(this,function(o){switch(o.label){case 0:return t=this.characterFilterToCharacters(e.characterFilter||""),i=e.fontSource,A=u.FontMapGlyphType.SDF,i&&(A=(a=i)&&void 0===a.type?u.FontMapGlyphType.BITMAP:i.type||A),n=new u.FontMap(r({},e,{glyphType:A})),[4,this.updateFontMapCharacters(t,n)];case 1:return o.sent(),this.fontMaps.set(e.key,n),[2,n]}var a})})},e.prototype.destroy=function(){this.fontMaps.forEach(function(e){return e.destroy()})},e.prototype.destroyFontMap=function(e){var t=this.fontMaps.get(e);t&&t.destroy()},e.prototype.updateFontMap=function(e,t){return i(this,void 0,void 0,function(){var n,r,i,A,a,s,c,u,l,h;return o(this,function(o){switch(o.label){case 0:if(!(n=this.fontMaps.get(e)))return[2];for(r=[],i=new Set,l=0,h=t.length;l<h;++l)if((A=t[l]).character&&i.add(A.character),A.kerningPairs&&(r=r.concat(A.kerningPairs)),A.metrics&&A.metrics.truncation)for(a=A.metrics.truncation.replace(/\s/g,""),r.push(a),s=0,c=A.metrics.truncation.length;s<c;++s)i.add(a);for(l=0,h=r.length;l<h;++l)i.add(r[l]);return u="",i.forEach(function(e){return u+=e}),[4,this.updateFontMapCharacters(u,n)];case 1:return o.sent(),[4,this.updateKerningPairs(r,n)];case 2:for(o.sent(),l=0,h=t.length;l<h;++l)t[l].fontMap=n;return[2]}})})},e.prototype.updateKerningPairs=function(e,t){return i(this,void 0,void 0,function(){var n;return o(this,function(r){switch(r.label){case 0:return t?[4,this.fontRenderer.estimateKerning(e,t.fontString,t.fontSource.size,t.kerning,!t.spaceWidth)]:[2];case 1:return n=r.sent(),t.addKerning(n.pairs),t.spaceWidth=t.spaceWidth||n.spaceWidth,[2]}})})},e.prototype.updateFontMapCharacters=function(e,t){return i(this,void 0,void 0,function(){var n,i,s,u,l,h,d,f;return o(this,function(o){if(!t)return[2];if(n=t.texture,(i=t.findMissingCharacters(e)).length<=0)return[2];for(u in s=this.fontRenderer.makeBitmapGlyphs(i,t.fontString,t.fontSource.size))if(l=s[u],n.data){if(h=new A.Bounds({x:0,y:0,width:l.glyph.width,height:l.glyph.height}),d=new c.SubTexture,!(f=t.packing.insert({data:d,bounds:h})))return console.warn("Font map is full and could not pack in any more glyphs"),[2];a.PackNode.applyToSubTexture(t.packing,f,d,void 0,!0),n.update(l.glyph,r({},f.bounds,{y:t.packing.bounds.height-f.bounds.y-f.bounds.height})),d?t.registerGlyph(u,d):console.warn("Could not generate a subtexture for the font map registration.")}else console.warn("Can not update font map as the maps texture data is not defined.");return[2]})})},e.prototype.getPrerenderedImageData=function(e,t,n){return i(this,void 0,void 0,function(){var r;return o(this,function(i){switch(i.label){case 0:return r=[],n.forEach(function(n){var i=e.glyphs[n];if(i||(i=e.errorGlyph),!e.errorGlyph)return console.warn("The prerendered source provided did NOT provide a proper glyph for rendering when a glyph could not be located."),[];var o,A=new Image,a=new Promise(function(e){return o=e});return A.onload=function(){var e=document.createElement("canvas"),n=e.getContext("2d");if(n){e.width=t,e.height=t,n.drawImage(A,0,0,t,t);var r=n.getImageData(0,0,t,t);o(r)}},A.onerror=function(){console.warn("There was an issue with loading the glyph data for character:",n),o(null)},A.src=e.glyphs[n],r.push(a),[]}),[4,Promise.all(r)];case 1:return[2,i.sent()]}})})},e}();t.FontManager=d},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},A=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function A(e){try{s(r.next(e))}catch(e){o(e)}}function a(e){try{s(r.throw(e))}catch(e){o(e)}}function s(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(A,a)}s((r=r.apply(e,t||[])).next())})},a=this&&this.__generator||function(e,t){var n,r,i,o,A={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;A;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return A.label++,{value:o[1],done:!1};case 5:A.label++,r=o[1],o=[0];continue;case 7:o=A.ops.pop(),A.trys.pop();continue;default:if(!(i=(i=A.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){A=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){A.label=o[1];break}if(6===o[0]&&A.label<i[1]){A.label=i[1],i=o;break}if(i&&A.label<i[2]){A.label=i[2],A.ops.push(o);break}i[2]&&A.ops.pop(),A.trys.pop();continue}o=t.call(e,A)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};Object.defineProperty(t,"__esModule",{value:!0});var s,c=n(6),u=n(0),l=n(20),h=n(4),d=n(25),f=n(2)("performance");!function(e){e[e.BITMAP=0]="BITMAP",e[e.SDF=1]="SDF",e[e.MSDF=2]="MSDF"}(s=t.FontMapGlyphType||(t.FontMapGlyphType={}));var p=function(e){function t(t){var n=e.call(this,t)||this;n.dynamic=!1,n.glyphMap={},n.kerning={},n.spaceWidth=0,n.type=u.ResourceType.FONT,n.dynamic=t.dynamic||!1,n.fontSource=t.fontSource,t.characters&&t.characters.forEach(function(e){n.doRegisterGlyph(e[0],e[1])});var r=t.fontMapSize?t.fontMapSize:[u.TextureSize._1024,u.TextureSize._1024];return n.makeGlyphTypeTextureSettings(t.glyphType),n.createTexture(r),n.packing=new d.PackNode(0,0,r[0],r[1]),n.addCachedKerning(),n}return i(t,e),Object.defineProperty(t.prototype,"fontString",{get:function(){return this.fontSource.size+"px "+this.fontSource.family},enumerable:!0,configurable:!0}),t.prototype.getKerningCacheName=function(){return"__deltav_kerning_cache_"+this.fontSource.family+"__"},t.prototype.addCachedKerning=function(){if(this.fontSource.localKerningCache){var e=localStorage.getItem(this.getKerningCacheName());if(e){f("Loading cached kerning items:",this.getKerningCacheName());try{var t=JSON.parse(e),n=0;for(var r in t){var i="string"==typeof r&&1===r.length;if(i){var o=t[r],A=this.kerning[r]||{};for(var a in this.kerning[r]=A,o)(i="string"==typeof r&&1===r.length)&&(A[a]=o[a],n++)}}f("Found kerning items in the cache!","Count:",n)}catch(e){}}}},t.prototype.addKerning=function(e){var t=!1;for(var n in e){var r=e[n],i=this.kerning[n]||{};for(var o in this.kerning[n]||(t=!0),this.kerning[n]=i,r)i[o]||(t=!0),i[o]=r[o]}if(t&&this.fontSource.localKerningCache)try{f("Storing kerning info in cache...");var A=JSON.stringify(this.kerning);localStorage.setItem(this.getKerningCacheName(),A)}catch(e){f("Could not cache kerning info")}},t.prototype.createTexture=function(e){var t;this.texture||(t=this.textureSettings?o({generateMipMaps:!0,premultiplyAlpha:!0},this.textureSettings):{generateMipMaps:!0,premultiplyAlpha:!0},this.texture=new c.Texture(o({data:{width:e[0],height:e[1],buffer:null}},t)))},t.prototype.destroy=function(){this.texture.dispose()},t.prototype.doRegisterGlyph=function(e,t){var n=e[0];this.glyphMap[n]?console.warn("A Glyph is already registered with a rendering"):this.glyphMap[n]=t},t.prototype.findMissingCharacters=function(e){for(var t=new Set,n="",r=0,i=e.length;r<i;++r){var o=e[r];this.glyphMap[o]||t.has(o)||(t.add(o),n+=o)}return n},t.prototype.getGlyphTexture=function(e){return this.glyphMap[e[0]]||null},t.prototype.getGlyphKerning=function(e,t){var n=this.kerning[e];return n&&n[t]||[0,0]},t.prototype.getGlyphWidth=function(e,t,n){var r=e.positions[t],i=e.positions[n];if(!t||!n)return 0;var o=this.glyphMap[e.glyphs[n]];return o?i[0]+o.pixelWidth-r[0]:0},t.prototype.getTruncatedLayout=function(e,t,n,r,i,o){return A(this,void 0,void 0,function(){var A,s,c,l,h,d,f,p,g,B,w,y,v,m,b;return a(this,function(a){switch(a.label){case 0:if(!(e.size[0]>n))return[3,5];for(A="",s=0,v=0,m=t.length;v<m;++v)s+=this.glyphMap[t[v]].pixelWidth;if(s>n)return[2,{fontScale:1,glyphs:"",positions:[],size:[0,0],text:""}];for(c=0,l=e.positions.length,h=0,d=0,f="";c!==l;){if(h=Math.floor((l-c)/2)+c,f=e.glyphs[h],(d=e.positions[h][0]+this.glyphMap[f].pixelWidth+s)>n)l=h;else{if(!(d<n))break;c=h}if(Math.abs(c-l)<=1){if(d<n)break;for(;d>n&&h>=0;)h--,d=e.positions[h][0]+this.glyphMap[f].pixelWidth+s;break}}if(!((d=e.positions[h][0]+this.glyphMap[f].pixelWidth+s)<n))return[3,3];for(p=0,g=0,v=0,m=e.text.length;v<m&&p<=h;++v)B=e.text[v],g++,u.isWhiteSpace(B)||p++;for(w=e.text[g-1],y=void 0,v=0,m=t.length;v<m;++v)if(!u.isWhiteSpace(t[v])){y=t[v];break}return w&&y&&!this.kerning[w][y]?[4,o.estimateKerning([w+y],this.fontString,this.fontSource.size,this.kerning,!1)]:[3,2];case 1:b=a.sent(),this.addKerning(b.pairs),a.label=2;case 2:return A=""+e.text.substr(0,g)+t,[3,4];case 3:A=t,a.label=4;case 4:return[2,this.getStringLayout(A,r,i)];case 5:return[2,e]}})})},t.prototype.getStringWidth=function(e,t,n){var r=e.text,i=0,o=r.length;if("string"==typeof t){var A=r.indexOf(t);if(A<0)return 0;o=(i=A)+t.length}else i=t;void 0!==n&&(o=n);for(var a=0,s=Math.min(r.length,i),c=Math.min(r.length,o);a<s;++a)u.isWhiteSpace(r[a])&&(i--,o--);for(;a<c;++a)u.isWhiteSpace(r[a])&&o--;var l=this.glyphMap[e.text[o]||""];return l?(e.positions[o]||[0,0])[0]-(e.positions[i]||[0,0])[0]+l.pixelWidth:0},t.prototype.getStringLayout=function(e,t,n){for(var r,i,o=[],A="",a=t/this.fontSource.size,s=Number.MAX_SAFE_INTEGER,c=0,l=0,d=[0,0],f=this.spaceWidth,p=0,g="",B=0,w=e.length;B<w;++B){var y=e[B];u.isWhiteSpace(y)?p++:(r=[0,0],g&&(r=this.kerning[g][y]||[0,0]),d=h.add2(h.add2(d,h.scale2(r,a)),[p*f*a+(0===B?0:n),0]),o.push([d[0],d[1]]),A+=y,i=this.glyphMap[y],s=Math.min(d[1],s),c=Math.max(d[1]+i.pixelHeight*a,c),g=y,l=d[0]+i.pixelWidth*a,p=0)}var v=[l,c-s];for(B=0,w=o.length;B<w;++B)(d=o[B])[1]-=s;return{fontScale:a,glyphs:A,positions:o,size:v,text:e}},t.prototype.makeGlyphTypeTextureSettings=function(e){switch(e){case s.BITMAP:this.textureSettings={magFilter:c.GLSettings.Texture.TextureMagFilter.Linear,minFilter:c.GLSettings.Texture.TextureMinFilter.LinearMipMapLinear,format:c.GLSettings.Texture.TexelDataType.LuminanceAlpha};break;case s.SDF:this.textureSettings={magFilter:c.GLSettings.Texture.TextureMagFilter.Linear,minFilter:c.GLSettings.Texture.TextureMinFilter.Linear,format:c.GLSettings.Texture.TexelDataType.Luminance};break;case s.MSDF:this.textureSettings={magFilter:c.GLSettings.Texture.TextureMagFilter.Linear,minFilter:c.GLSettings.Texture.TextureMinFilter.Linear,format:c.GLSettings.Texture.TexelDataType.RGB}}},t.prototype.registerGlyph=function(e,t){this.dynamic?this.doRegisterGlyph(e,t):console.warn("Attempted to register a new glyph with a non-dynamic FontMap")},t.prototype.supportsKerning=function(e){for(var t=1,n=e.length;t<n;++t){var r=e[t],i=e[t-1];if(!this.kerning[i])return!1;if(!this.kerning[i][r])return!1}return!0},t}(l.IdentifyByKey);t.FontMap=p},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function A(e){try{s(r.next(e))}catch(e){o(e)}}function a(e){try{s(r.throw(e))}catch(e){o(e)}}function s(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(A,a)}s((r=r.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){var n,r,i,o,A={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;A;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return A.label++,{value:o[1],done:!1};case 5:A.label++,r=o[1],o=[0];continue;case 7:o=A.ops.pop(),A.trys.pop();continue;default:if(!(i=(i=A.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){A=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){A.label=o[1];break}if(6===o[0]&&A.label<i[1]){A.label=i[1],i=o;break}if(i&&A.label<i[2]){A.label=i[2],A.ops.push(o);break}i[2]&&A.ops.pop(),A.trys.pop();continue}o=t.call(e,A)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};Object.defineProperty(t,"__esModule",{value:!0});var o=n(144),A=n(23),a=n(1),s=n(95),c=n(2)("performance"),u=Math.floor;function l(e,t,n,l){return r(this,void 0,void 0,function(){var r,h,d,f,p,g,B,w,y,v,m,b,E,T,C,U,_,Q,F,x,I,S,O,M,R,N,P,L,H,D,k,z,K,G,V,j,X,W,Y,J,q,$,Z,ee,te,ne,re,ie;return i(this,function(i){switch(i.label){case 0:for(r=A.WebGLStat.MAX_TEXTURE_SIZE/window.devicePixelRatio,h=document.createElement("div"),d=u(r/(2*t)),f=2.5*t,p=2*t,h.style.display="table",h.style.width=r+"px",h.style.textAlign="center",h.style.tableLayout="fixed",h.style.position="relative",h.style.left="0px",h.style.top=window.innerHeight+"px",g=0,B=0,v=0;g<n.all.length;){for(S=document.createElement("div"),w=S,S.style.display="table-row",S.style.height=p+"px",S.style.width="width:"+r+"px",m=r,B=0;B<d&&g<n.all.length;B++)(x=document.createElement("div")).style.display="table-cell",x.style.width=f+"px",x.style.height=p+"px",x.style.overflow="hidden",x.style.font=e,$=n.all[g],g++,b=$[0],E=$[1],T=document.createElement("span"),C=document.createElement("span"),T.style.color="#ff0000",C.style.color="#0000ff",T.innerText=b,C.innerText=E,x.appendChild(T),x.appendChild(C),S.appendChild(x),m-=f;m>=0?((x=document.createElement("div")).style.display="table-cell",x.style.width=m+"px",S.appendChild(x),y=x):y=null,v=m,h.appendChild(S)}for(U=[],J=0;J<n.all.length;J++)U.push([Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER]);return _=0,Q=!1,l?(F="M",(x=document.createElement("div")).style.display="table-cell",x.style.width=f+"px",x.style.height=p+"px",x.style.overflow="hidden",x.style.font=e,[4,s.renderGlyph(F,128,128,e)]):[3,2];case 1:(I=i.sent())&&(_=I.size[0],x.innerHTML='<span style="color:#ff0000">'+F+'</span> <span style="color:#0000ff">'+F+"</span>",B<d&&w?(w.appendChild(x),v-=f,y&&(y.remove(),v>0&&(w.style.width=v+"px",w.appendChild(y)))):(S=document.createElement("div"),w=S,S.style.display="table-row",S.style.height=p+"px",S.style.width="width:"+r+"px",w.appendChild(x),h.appendChild(S),(y=document.createElement("div")).style.display="table-cell",y.style.width=(d-1)*f+"px",S.appendChild(y)),U.push([Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER]),Q=!0),i.label=2;case 2:return document.getElementsByTagName("body")[0].appendChild(h),O={backgroundColor:null,logging:c.enabled},c("Rendering table for font kerning analysis",n,h),[4,o(h,O)];case 3:if(!(M=i.sent()))return console.warn("Could not convert DOM structure to canvas"),[2];if(R=f*window.devicePixelRatio,N=p*window.devicePixelRatio,P=M.getContext("2d"),c("Analyzing rendered canvas",M),P){for(L=P.getImageData(0,0,M.width,M.height).data,H=void 0,D=void 0,k=void 0,z=void 0,K=void 0,G=void 0,V=0,j=M.height;V<j;V++)for(X=0,W=M.width;X<W;X++)D=L[(H=4*(W*V+X))+0],k=L[H+1],z=L[H+2],(G=u(V/N)*d+u(X/R))<U.length&&(K=U[G],D>0&&0===k&&0===z&&(X<K[0]&&(K[0]=X),V<K[1]&&(K[1]=V)),0===D&&0===k&&z>0&&(X<K[2]&&(K[2]=X),V<K[3]&&(K[3]=V)));for(Q&&(Y=U.pop())&&(ne=[Y[2]-Y[0],0],ie=a.scale2(ne,1/window.devicePixelRatio),n.spaceWidth=Math.ceil(ie[0])-_),J=0,q=U.length;J<q;J++)$=n.all[J],Z=$[0],ee=$[1],te=U[J],ne=[te[2]-te[0],te[3]-te[1]],(re=n.pairs[Z])&&(ie=a.scale2(ne,1/window.devicePixelRatio),re[ee]=[Math.ceil(ie[0]),ie[1]])}else console.warn("html2canvas did not produce a valid canvas context to analyze");return h.remove(),c("Kerning rendering analysis complete",n.pairs),[2]}})})}function h(e,t,n){e=e.replace(/\s/g,"");for(var r=n&&n.all||[],i=n&&n.pairs||{},o=0;o<e.length-1;o++){var A=e[o],a=e[o+1],s=i[A];s||(s=i[A]={}),t[A]&&t[A][a]||s[a]||(s[a]=[0,0],r.push(""+A+a))}return{all:r,pairs:i,spaceWidth:0}}var d=function(){function e(){}return e.prototype.makeBitmapGlyphs=function(e,t,n){for(var r={},i=new Set,o=0,A=e.length;o<A;++o)i.add(e[o]);var a=Array.from(i.values());for(o=0,A=a.length;o<A;++o){var c=a[o],u=s.renderGlyph(c,2*n,2*n,t);u?r[c]={glyph:u.data,glyphIndex:o}:console.warn("Unable to render character",c,"to font map for rendering.")}return r},e.prototype.estimateKerning=function(e,t,n,o,A){return r(this,void 0,void 0,function(){var r,a,s;return i(this,function(i){switch(i.label){case 0:for(r={all:[],pairs:{},spaceWidth:0},c("Estimating Kerning for",e),a=0,s=e.length;a<s;++a)h(e[a],o,r);return r.all.length>0||A?[4,l(t,n,r,A)]:[3,2];case 1:i.sent(),i.label=2;case 2:return[2,r]}})})},e}();t.FontRenderer=d},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(35),o=n(52);var A=function(e,t){var n=Math.max.apply(null,e.colorStops.map(function(e){return e.stop})),r=1/Math.max(1,n);e.colorStops.forEach(function(e){t.addColorStop(r*e.stop,e.color.toString())})},a=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.canvas=t||document.createElement("canvas")}return r(e,[{key:"render",value:function(e){this.ctx=this.canvas.getContext("2d"),this.options=e,this.canvas.width=Math.floor(e.width*e.scale),this.canvas.height=Math.floor(e.height*e.scale),this.canvas.style.width=e.width+"px",this.canvas.style.height=e.height+"px",this.ctx.scale(this.options.scale,this.options.scale),this.ctx.translate(-e.x,-e.y),this.ctx.textBaseline="bottom",e.logger.log("Canvas renderer initialized ("+e.width+"x"+e.height+" at "+e.x+","+e.y+") with scale "+this.options.scale)}},{key:"clip",value:function(e,t){var n=this;e.length&&(this.ctx.save(),e.forEach(function(e){n.path(e),n.ctx.clip()})),t(),e.length&&this.ctx.restore()}},{key:"drawImage",value:function(e,t,n){this.ctx.drawImage(e,t.left,t.top,t.width,t.height,n.left,n.top,n.width,n.height)}},{key:"drawShape",value:function(e,t){this.path(e),this.ctx.fillStyle=t.toString(),this.ctx.fill()}},{key:"fill",value:function(e){this.ctx.fillStyle=e.toString(),this.ctx.fill()}},{key:"getTarget",value:function(){return Promise.resolve(this.canvas)}},{key:"path",value:function(e){var t=this;this.ctx.beginPath(),Array.isArray(e)?e.forEach(function(e,n){var r=e.type===i.PATH.VECTOR?e:e.start;0===n?t.ctx.moveTo(r.x,r.y):t.ctx.lineTo(r.x,r.y),e.type===i.PATH.BEZIER_CURVE&&t.ctx.bezierCurveTo(e.startControl.x,e.startControl.y,e.endControl.x,e.endControl.y,e.end.x,e.end.y)}):this.ctx.arc(e.x+e.radius,e.y+e.radius,e.radius,0,2*Math.PI,!0),this.ctx.closePath()}},{key:"rectangle",value:function(e,t,n,r,i){this.ctx.fillStyle=i.toString(),this.ctx.fillRect(e,t,n,r)}},{key:"renderLinearGradient",value:function(e,t){var n=this.ctx.createLinearGradient(e.left+t.direction.x1,e.top+t.direction.y1,e.left+t.direction.x0,e.top+t.direction.y0);A(t,n),this.ctx.fillStyle=n,this.ctx.fillRect(e.left,e.top,e.width,e.height)}},{key:"renderRadialGradient",value:function(e,t){var n=this,r=e.left+t.center.x,i=e.top+t.center.y,o=this.ctx.createRadialGradient(r,i,0,r,i,t.radius.x);if(o)if(A(t,o),this.ctx.fillStyle=o,t.radius.x!==t.radius.y){var a=e.left+.5*e.width,s=e.top+.5*e.height,c=t.radius.y/t.radius.x,u=1/c;this.transform(a,s,[1,0,0,c,0,0],function(){return n.ctx.fillRect(e.left,u*(e.top-s)+s,e.width,e.height*u)})}else this.ctx.fillRect(e.left,e.top,e.width,e.height)}},{key:"renderRepeat",value:function(e,t,n,r,i){this.path(e),this.ctx.fillStyle=this.ctx.createPattern(this.resizeImage(t,n),"repeat"),this.ctx.translate(r,i),this.ctx.fill(),this.ctx.translate(-r,-i)}},{key:"renderTextNode",value:function(e,t,n,r,i){var A=this;this.ctx.font=[n.fontStyle,n.fontVariant,n.fontWeight,n.fontSize,n.fontFamily].join(" "),e.forEach(function(e){if(A.ctx.fillStyle=t.toString(),i&&e.text.trim().length?i.slice(0).reverse().forEach(function(t){A.ctx.shadowColor=t.color.toString(),A.ctx.shadowOffsetX=t.offsetX*A.options.scale,A.ctx.shadowOffsetY=t.offsetY*A.options.scale,A.ctx.shadowBlur=t.blur,A.ctx.fillText(e.text,e.bounds.left,e.bounds.top+e.bounds.height)}):A.ctx.fillText(e.text,e.bounds.left,e.bounds.top+e.bounds.height),null!==r){var a=r.textDecorationColor||t;r.textDecorationLine.forEach(function(t){switch(t){case o.TEXT_DECORATION_LINE.UNDERLINE:var r=A.options.fontMetrics.getMetrics(n).baseline;A.rectangle(e.bounds.left,Math.round(e.bounds.top+e.bounds.height-r),e.bounds.width,1,a);break;case o.TEXT_DECORATION_LINE.OVERLINE:A.rectangle(e.bounds.left,Math.round(e.bounds.top),e.bounds.width,1,a);break;case o.TEXT_DECORATION_LINE.LINE_THROUGH:var i=A.options.fontMetrics.getMetrics(n).middle;A.rectangle(e.bounds.left,Math.ceil(e.bounds.top+i),e.bounds.width,1,a)}})}})}},{key:"resizeImage",value:function(e,t){if(e.width===t.width&&e.height===t.height)return e;var n=this.canvas.ownerDocument.createElement("canvas");return n.width=t.width,n.height=t.height,n.getContext("2d").drawImage(e,0,0,e.width,e.height,0,0,t.width,t.height),n}},{key:"setOpacity",value:function(e){this.ctx.globalAlpha=e}},{key:"transform",value:function(e,t,n,r){this.ctx.save(),this.ctx.translate(e,t),this.ctx.transform(n[0],n[1],n[2],n[3],n[4],n[5]),this.ctx.translate(-e,-t),r(),this.ctx.restore()}}]),e}();t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var i=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.enabled=t,this.start=r||Date.now(),this.id=n}return r(e,[{key:"child",value:function(t){return new e(this.enabled,t,this.start)}},{key:"log",value:function(){if(this.enabled&&window.console&&window.console.log){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];Function.prototype.bind.call(window.console.log,window.console).apply(window.console,[Date.now()-this.start+"ms",this.id?"html2canvas ("+this.id+"):":"html2canvas:"].concat([].slice.call(t,0)))}}},{key:"error",value:function(){if(this.enabled&&window.console&&window.console.error){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];Function.prototype.bind.call(window.console.error,window.console).apply(window.console,[Date.now()-this.start+"ms",this.id?"html2canvas ("+this.id+"):":"html2canvas:"].concat([].slice.call(t,0)))}}}]),e}();t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parsePadding=t.PADDING_SIDES=void 0;var r,i=n(14),o=(r=i)&&r.__esModule?r:{default:r};t.PADDING_SIDES={TOP:0,RIGHT:1,BOTTOM:2,LEFT:3};var A=["top","right","bottom","left"];t.parsePadding=function(e){return A.map(function(t){return new o.default(e.getPropertyValue("padding-"+t))})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=t.OVERFLOW_WRAP={NORMAL:0,BREAK_WORD:1};t.parseOverflowWrap=function(e){switch(e){case"break-word":return r.BREAK_WORD;case"normal":default:return r.NORMAL}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=t.POSITION={STATIC:0,RELATIVE:1,ABSOLUTE:2,FIXED:3,STICKY:4};t.parsePosition=function(e){switch(e){case"relative":return r.RELATIVE;case"absolute":return r.ABSOLUTE;case"fixed":return r.FIXED;case"sticky":return r.STICKY}return r.STATIC}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=t.TEXT_TRANSFORM={NONE:0,LOWERCASE:1,UPPERCASE:2,CAPITALIZE:3};t.parseTextTransform=function(e){switch(e){case"uppercase":return r.UPPERCASE;case"lowercase":return r.LOWERCASE;case"capitalize":return r.CAPITALIZE}return r.NONE}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.reformatInputBounds=t.inlineSelectElement=t.inlineTextAreaElement=t.inlineInputElement=t.getInputBorderRadius=t.INPUT_BACKGROUND=t.INPUT_BORDERS=t.INPUT_COLOR=void 0;var r=l(n(38)),i=n(26),o=n(53),A=l(n(167)),a=l(n(36)),s=l(n(12)),c=l(n(14)),u=(n(13),n(90),n(18));function l(e){return e&&e.__esModule?e:{default:e}}t.INPUT_COLOR=new s.default([42,42,42]);var h=new s.default([165,165,165]),d=new s.default([222,222,222]),f={borderWidth:1,borderColor:h,borderStyle:o.BORDER_STYLE.SOLID},p=(t.INPUT_BORDERS=[f,f,f,f],t.INPUT_BACKGROUND={backgroundColor:d,backgroundImage:[],backgroundClip:i.BACKGROUND_CLIP.PADDING_BOX,backgroundOrigin:i.BACKGROUND_ORIGIN.PADDING_BOX},new c.default("50%")),g=[p,p],B=[g,g,g,g],w=new c.default("3px"),y=[w,w],v=[y,y,y,y],m=(t.getInputBorderRadius=function(e){return"radio"===e.type?B:v},t.inlineInputElement=function(e,t){if("radio"===e.type||"checkbox"===e.type){if(e.checked){var n=Math.min(t.bounds.width,t.bounds.height);t.childNodes.push("checkbox"===e.type?[new a.default(t.bounds.left+.39363*n,t.bounds.top+.79*n),new a.default(t.bounds.left+.16*n,t.bounds.top+.5549*n),new a.default(t.bounds.left+.27347*n,t.bounds.top+.44071*n),new a.default(t.bounds.left+.39694*n,t.bounds.top+.5649*n),new a.default(t.bounds.left+.72983*n,t.bounds.top+.23*n),new a.default(t.bounds.left+.84*n,t.bounds.top+.34085*n),new a.default(t.bounds.left+.39363*n,t.bounds.top+.79*n)]:new A.default(t.bounds.left+n/4,t.bounds.top+n/4,n/4))}}else m(b(e),e,t,!1)},t.inlineTextAreaElement=function(e,t){m(e.value,e,t,!0)},t.inlineSelectElement=function(e,t){var n=e.options[e.selectedIndex||0];m(n&&n.text||"",e,t,!1)},t.reformatInputBounds=function(e){return e.width>e.height?(e.left+=(e.width-e.height)/2,e.width=e.height):e.width<e.height&&(e.top+=(e.height-e.width)/2,e.height=e.width),e},function(e,t,n,i){var o=t.ownerDocument.body;if(e.length>0&&o){var A=t.ownerDocument.createElement("html2canvaswrapper");(0,u.copyCSSStyles)(t.ownerDocument.defaultView.getComputedStyle(t,null),A),A.style.position="absolute",A.style.left=n.bounds.left+"px",A.style.top=n.bounds.top+"px",i||(A.style.whiteSpace="nowrap");var a=t.ownerDocument.createTextNode(e);A.appendChild(a),o.appendChild(A),n.childNodes.push(r.default.fromTextNode(a,n)),o.removeChild(A)}}),b=function(e){var t="password"===e.type?new Array(e.value.length+1).join("•"):e.value;return 0===t.length?e.placeholder||"":t}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseTextBounds=t.TextBounds=void 0;var r,i=n(13),o=n(52),A=n(39),a=(r=A)&&r.__esModule?r:{default:r},s=n(92);var c=t.TextBounds=function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.text=t,this.bounds=n},u=(t.parseTextBounds=function(e,t,n){for(var r=0!==t.style.letterSpacing?(0,s.toCodePoints)(e).map(function(e){return(0,s.fromCodePoint)(e)}):(0,s.breakWords)(e,t),i=r.length,A=n.parentNode?n.parentNode.ownerDocument.defaultView:null,h=A?A.pageXOffset:0,d=A?A.pageYOffset:0,f=[],p=0,g=0;g<i;g++){var B=r[g];if(t.style.textDecoration!==o.TEXT_DECORATION.NONE||B.trim().length>0)if(a.default.SUPPORT_RANGE_BOUNDS)f.push(new c(B,l(n,p,B.length,h,d)));else{var w=n.splitText(B.length);f.push(new c(B,u(n,h,d))),n=w}else a.default.SUPPORT_RANGE_BOUNDS||(n=n.splitText(B.length));p+=B.length}return f},function(e,t,n){var r=e.ownerDocument.createElement("html2canvaswrapper");r.appendChild(e.cloneNode(!0));var o=e.parentNode;if(o){o.replaceChild(r,e);var A=(0,i.parseBounds)(r,t,n);return r.firstChild&&o.replaceChild(r.firstChild,r),A}return new i.Bounds(0,0,0,0)}),l=function(e,t,n,r,o){var A=e.ownerDocument.createRange();return A.setStart(e,t),A.setEnd(e,t+n),i.Bounds.fromClientRect(A.getBoundingClientRect(),r,o)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var i=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.element=t}return r(e,[{key:"render",value:function(e){var t=this;this.options=e,this.canvas=document.createElement("canvas"),this.ctx=this.canvas.getContext("2d"),this.canvas.width=Math.floor(e.width)*e.scale,this.canvas.height=Math.floor(e.height)*e.scale,this.canvas.style.width=e.width+"px",this.canvas.style.height=e.height+"px",e.logger.log("ForeignObject renderer initialized ("+e.width+"x"+e.height+" at "+e.x+","+e.y+") with scale "+e.scale);var n=o(Math.max(e.windowWidth,e.width)*e.scale,Math.max(e.windowHeight,e.height)*e.scale,e.scrollX*e.scale,e.scrollY*e.scale,this.element);return A(n).then(function(n){return e.backgroundColor&&(t.ctx.fillStyle=e.backgroundColor.toString(),t.ctx.fillRect(0,0,e.width*e.scale,e.height*e.scale)),t.ctx.drawImage(n,-e.x*e.scale,-e.y*e.scale),t.canvas})}}]),e}();t.default=i;var o=t.createForeignObjectSVG=function(e,t,n,r,i){var o="http://www.w3.org/2000/svg",A=document.createElementNS(o,"svg"),a=document.createElementNS(o,"foreignObject");return A.setAttributeNS(null,"width",e),A.setAttributeNS(null,"height",t),a.setAttributeNS(null,"width","100%"),a.setAttributeNS(null,"height","100%"),a.setAttributeNS(null,"x",n),a.setAttributeNS(null,"y",r),a.setAttributeNS(null,"externalResourcesRequired","true"),A.appendChild(a),a.appendChild(i),A},A=t.loadSerializedSVG=function(e){return new Promise(function(t,n){var r=new Image;r.onload=function(){return t(r)},r.onerror=n,r.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent((new XMLSerializer).serializeToString(e))})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.breakWords=t.fromCodePoint=t.toCodePoints=void 0;var r=n(163);Object.defineProperty(t,"toCodePoints",{enumerable:!0,get:function(){return r.toCodePoints}}),Object.defineProperty(t,"fromCodePoint",{enumerable:!0,get:function(){return r.fromCodePoint}});var i,o=n(17),A=((i=o)&&i.__esModule,n(86));t.breakWords=function(e,t){for(var n=(0,r.LineBreaker)(e,{lineBreak:t.style.lineBreak,wordBreak:t.style.overflowWrap===A.OVERFLOW_WRAP.BREAK_WORD?"break-word":t.style.wordBreak}),i=[],o=void 0;!(o=n.next()).done;)i.push(o.value.slice());return i}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FontMetrics=void 0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(18);t.FontMetrics=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._data={},this._document=t}return r(e,[{key:"_parseMetrics",value:function(e){var t=this._document.createElement("div"),n=this._document.createElement("img"),r=this._document.createElement("span"),o=this._document.body;if(!o)throw new Error("");t.style.visibility="hidden",t.style.fontFamily=e.fontFamily,t.style.fontSize=e.fontSize,t.style.margin="0",t.style.padding="0",o.appendChild(t),n.src=i.SMALL_IMAGE,n.width=1,n.height=1,n.style.margin="0",n.style.padding="0",n.style.verticalAlign="baseline",r.style.fontFamily=e.fontFamily,r.style.fontSize=e.fontSize,r.style.margin="0",r.style.padding="0",r.appendChild(this._document.createTextNode("Hidden Text")),t.appendChild(r),t.appendChild(n);var A=n.offsetTop-r.offsetTop+2;t.removeChild(r),t.appendChild(this._document.createTextNode("Hidden Text")),t.style.lineHeight="normal",n.style.verticalAlign="super";var a=n.offsetTop-t.offsetTop+2;return o.removeChild(t),{baseline:A,middle:a}}},{key:"getMetrics",value:function(e){var t=e.fontFamily+" "+e.fontSize;return void 0===this._data[t]&&(this._data[t]=this._parseMetrics(e)),this._data[t]}}]),e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Proxy=void 0;var r,i=n(39),o=(r=i)&&r.__esModule?r:{default:r};t.Proxy=function(e,t){if(!t.proxy)return Promise.reject(null);var n=t.proxy;return new Promise(function(r,i){var A=o.default.SUPPORT_CORS_XHR&&o.default.SUPPORT_RESPONSE_TYPE?"blob":"text",a=o.default.SUPPORT_CORS_XHR?new XMLHttpRequest:new XDomainRequest;if(a.onload=function(){if(a instanceof XMLHttpRequest)if(200===a.status)if("text"===A)r(a.response);else{var e=new FileReader;e.addEventListener("load",function(){return r(e.result)},!1),e.addEventListener("error",function(e){return i(e)},!1),e.readAsDataURL(a.response)}else i("");else r(a.responseText)},a.onerror=i,a.open("GET",n+"?url="+encodeURIComponent(e)+"&responseType="+A),"text"!==A&&a instanceof XMLHttpRequest&&(a.responseType=A),t.imageTimeout){var s=t.imageTimeout;a.timeout=s,a.ontimeout=function(){return i("")}}a.send()})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=Math.min,o=Math.max,A=document.createElement("canvas");t.renderGlyph=function(e,t,n,a){if(e=e[0],(A.width<t||A.height<n)&&(A.width=t,A.height=n),!r){var s=A.getContext("2d");if(!s)return null;r=s}r.clearRect(0,0,A.width,A.height),r.font=a,r.fillStyle="white",r.fillText(e,t/2,n/2);var c=function(e){for(var t=e.canvas,n=t.width,r=t.height,A=e.getImageData(0,0,n,r).data,a=!1,s=Number.MAX_SAFE_INTEGER,c=Number.MAX_SAFE_INTEGER,u=Number.MIN_SAFE_INTEGER,l=Number.MIN_SAFE_INTEGER,h=0;h<n;++h)for(var d=0;d<r;++d)A[d*(4*n)+4*h]>0&&(a=!0,s=i(s,d),c=i(c,h),u=o(u,h),l=o(l,d));return a?(l+=2,u+=2,c-=1,s=o(s-=1,0),{minX:c=o(c,0),minY:s,maxX:u,maxY:l}):null}(r);if(!c)return{data:r.getImageData(0,0,1,1),size:[0,0]};var u=c.maxX-c.minX,l=c.maxY-c.minY;return{data:r.getImageData(c.minX,c.minY,u,l),size:[u,l]}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.TEXCOORDS=0]="TEXCOORDS",e[e.IMAGE_SIZE=1]="IMAGE_SIZE"}(t.FontResourceRequestFetch||(t.FontResourceRequestFetch={}))},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function A(e){try{s(r.next(e))}catch(e){o(e)}}function a(e){try{s(r.throw(e))}catch(e){o(e)}}function s(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(A,a)}s((r=r.apply(e,t||[])).next())})},o=this&&this.__generator||function(e,t){var n,r,i,o,A={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;A;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return A.label++,{value:o[1],done:!1};case 5:A.label++,r=o[1],o=[0];continue;case 7:o=A.ops.pop(),A.trys.pop();continue;default:if(!(i=(i=A.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){A=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){A.label=o[1];break}if(6===o[0]&&A.label<i[1]){A.label=i[1],i=o;break}if(i&&A.label<i[2]){A.label=i[2],A.ops.push(o);break}i[2]&&A.ops.pop(),A.trys.pop();continue}o=t.call(e,A)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};Object.defineProperty(t,"__esModule",{value:!0});var A=n(6),a=n(5),s=n(98),c=n(176),u=n(57),l=n(25),h=n(16),d=n(2)("performance"),f=new h.SubTexture({aspectRatio:0,atlasBL:[0,0],atlasBR:[0,0],texture:null,atlasTL:[0,0],atlasTR:[0,0],heightOnAtlas:0,isValid:!1,pixelHeight:0,pixelWidth:0,widthOnAtlas:0});var p=function(){function e(){this.allAtlas=new Map}return e.prototype.createAtlas=function(e){return i(this,void 0,void 0,function(){var t;return o(this,function(n){return t=new u.Atlas(e),this.allAtlas.set(t.id,t),d("Atlas Created-> %o",t),[2,t]})})},e.prototype.destroy=function(){this.allAtlas.forEach(function(e){return e.destroy()})},e.prototype.destroyAtlas=function(e){var t=this.allAtlas.get(e);t&&t.destroy()},e.prototype.setDefaultImage=function(e,t){return e=Object.assign(e,f,{atlasReferenceID:t})},e.prototype.draw=function(e,t){return i(this,void 0,Promise,function(){var n,i,A,s,u,f,p;return o(this,function(o){switch(o.label){case 0:return n=e.id,t.disposeResource?[2,!0]:e.resourceReferences.get(t.source)?[2,!0]:(t.texture=t.texture||new h.SubTexture,t.texture.isValid=!0,e.resourceReferences.set(t.source,{subtexture:t.texture,count:0}),[4,this.loadImage(t)]);case 1:if(i=o.sent(),A=t.texture,i&&((g=A)&&g.isValid&&g.pixelWidth&&g.pixelHeight)){if(s=new a.Bounds({bottom:A.pixelHeight,left:0,right:A.pixelWidth,top:0}),(u={data:A,bounds:s}).bounds.width+=1,u.bounds.height+=1,f=e.packing,!(p=f.insert(u))){if(!this.repackResources(e))return console.error("Repacking the atlas failed. Some resources may be in an undefined state. Consider making another atlas."),[2,!1];f=e.packing,p=f.insert(u)}return p?(p.data=A,l.PackNode.applyToSubTexture(f,p,A,{top:0,left:0,right:1,bottom:1}),A.texture=e.texture,A.source=i,A.atlasRegion=r({},p.bounds,{y:e.height-p.bounds.y-p.bounds.height}),e.texture.update(i,A.atlasRegion),i instanceof HTMLVideoElement&&(A.video={monitor:new c.VideoTextureMonitor(i,A)}),[2,!0]):(console.error("Could not fit resource into atlas",t),t.texture=this.setDefaultImage(A,n),[2,!1])}return A&&!A.isValid?d("Resource was invalidated during load:",t):console.error("Could not load resource:",t),t.texture&&(t.texture=this.setDefaultImage(t.texture,n)),[2,!1]}var g})})},e.prototype.getAtlasTexture=function(e){return this.allAtlas.get(e)},e.prototype.loadImage=function(e){return i(this,void 0,Promise,function(){var t,n,r,i;return o(this,function(o){switch(o.label){case 0:return t=e.texture||new h.SubTexture,n=e.source,e.texture=t,!1===e.texture.isValid?[2,null]:n instanceof HTMLImageElement?[4,new Promise(function(e){if(n instanceof HTMLImageElement){var r=n;if(r.width&&r.height)return s.ImageRasterizer.calculateImageSize(r),t.pixelWidth=r.width,t.pixelHeight=r.height,t.aspectRatio=r.width/r.height,void e(r);r?(r.onload=function(){t.pixelWidth=r.width,t.pixelHeight=r.height,t.aspectRatio=r.width/r.height,r.onload=null,e(r)},r.onerror=function(){r.onload=null,e(null)}):e(null)}})]:[3,4];case 1:return(i=o.sent())&&void 0!==e.rasterizationScale&&1!==e.rasterizationScale?[4,s.ImageRasterizer.resizeImage(i,e.rasterizationScale||1)]:[3,3];case 2:i=o.sent(),o.label=3;case 3:return[2,i];case 4:return n instanceof HTMLVideoElement?0===n.videoHeight||0===n.videoWidth?(console.warn("Video requests to the atlas manager MUST have the video completely loaded and ready for loading","There are too many caveats to automate video loading at this low of a level to have it prepped properly for","use in the texture for all browsers. Consider handling video resources at the layer level to have them","prepped for use."),[2,null]):(t.pixelWidth=n.videoWidth,t.pixelHeight=n.videoHeight,t.aspectRatio=n.videoWidth/n.videoHeight,[2,n]):[3,5];case 5:return"string"!=typeof n?[3,9]:(r=n,[4,new Promise(function(e){var n=new Image;n.onload=function(){t.pixelWidth=n.width,t.pixelHeight=n.height,t.aspectRatio=n.width/n.height,n.onload=null,e(n)},n.onerror=function(){e(null)},n.src=r})]);case 6:return(i=o.sent())&&void 0!==e.rasterizationScale&&1!==e.rasterizationScale?[4,s.ImageRasterizer.resizeImage(i,e.rasterizationScale||1)]:[3,8];case 7:i=o.sent(),o.label=8;case 8:return[3,12];case 9:return(i=n)&&void 0!==e.rasterizationScale&&1!==e.rasterizationScale?[4,s.ImageRasterizer.resizeImage(i,e.rasterizationScale||1)]:[3,11];case 10:i=o.sent(),o.label=11;case 11:return[2,i];case 12:return[2,null]}})})},e.prototype.repackResources=function(e){if(!this.renderer)return console.warn("Attempted to repack resources for an atlas, but no renderer has been specified for this manager yet."),!1;for(var t=[e.packing],n=[],r=0,i=new Map;r<t.length;){var o=t[r];r++,o.data&&o.data.texture&&(n.push(o),i.set(o.bounds,new a.Bounds(o.bounds))),o.child[0]&&t.push(o.child[0]),o.child[1]&&t.push(o.child[1])}if(n.sort(function(e,t){return Math.max(t.bounds.width,t.bounds.height)-Math.max(e.bounds.width,e.bounds.height)}),n.length<=0)return e.packing=new l.PackNode(0,0,e.width,e.height),!0;var s=new A.Texture(e.texture);s.data={buffer:new Uint8Array(e.width*e.height*4),width:e.width,height:e.height};for(var c=new l.PackNode(0,0,e.width,e.height),u=!1,d=0,f=n.length;d<f;++d){if((y=n[d]).data){y.bounds.x=0,y.bounds.y=0;var p=c.insert({bounds:y.bounds,data:y.data});p?l.PackNode.applyToSubTexture(c,p,y.data):(console.warn("When repacking the atlas, an existing node was unable to be repacked",y),u=!0)}else console.warn("Attempted to repack a node with no valid data.")}if(u)return!1;var g=new Float32Array(2*n.length*6),B=new Float32Array(2*n.length*6),w=new h.SubTexture;for(d=0,f=n.length;d<f;++d){var y=n[d],v=i.get(y.bounds),m=y.data;if(v&&m){l.PackNode.applyToSubTexture(c,v,w);var b=2*d*6;g[b]=2*m.atlasTL[0]-1,g[b+1]=2*m.atlasTL[1]-1,g[b+2]=2*m.atlasTR[0]-1,g[b+3]=2*m.atlasTR[1]-1,g[b+4]=2*m.atlasBL[0]-1,g[b+5]=2*m.atlasBL[1]-1,g[b+6]=2*m.atlasTR[0]-1,g[b+7]=2*m.atlasTR[1]-1,g[b+8]=2*m.atlasBR[0]-1,g[b+9]=2*m.atlasBR[1]-1,g[b+10]=2*m.atlasBL[0]-1,g[b+11]=2*m.atlasBL[1]-1,B[b]=w.atlasTL[0],B[b+1]=w.atlasTL[1],B[b+2]=w.atlasTR[0],B[b+3]=w.atlasTR[1],B[b+4]=w.atlasBL[0],B[b+5]=w.atlasBL[1],B[b+6]=w.atlasTR[0],B[b+7]=w.atlasTR[1],B[b+8]=w.atlasBR[0],B[b+9]=w.atlasBR[1],B[b+10]=w.atlasBL[0],B[b+11]=w.atlasBL[1],m.texture=s}else console.warn("While repacking there was an issue finding the previous bounds and the next texture to use",v,m)}var E=new A.Geometry,T=new A.Attribute(g,2),C=new A.Attribute(B,2);E.addAttribute("position",T),E.addAttribute("texCoord",C);var U=new A.Material({culling:A.GLSettings.Material.CullSide.NONE,uniforms:{texture:{type:A.MaterialUniformType.TEXTURE,value:e.texture}},fragmentShader:"\n        precision highp float;\n\n        uniform sampler2D texture;\n        varying vec2 _texCoord;\n\n        void main() {\n          gl_FragColor = texture2D(texture, _texCoord);\n        }\n      ",vertexShader:"\n        precision highp float;\n\n        attribute vec2 position;\n        attribute vec2 texCoord;\n        varying vec2 _texCoord;\n\n        void main() {\n          _texCoord = texCoord;\n          gl_Position = vec4(position, 0.0, 1.0);\n        }\n      "}),_=new A.Model(E,U);_.vertexCount=6*n.length,_.drawMode=A.GLSettings.Model.DrawMode.TRIANGLES;var Q=new A.RenderTarget({buffers:{color:s},retainTextureTargets:!0}),F=new A.Scene;return F.add(_),this.renderer.setRenderTarget(Q),this.renderer.setViewport(this.renderer.getFullViewport()),this.renderer.setScissor(this.renderer.getFullViewport()),this.renderer.render(F,Q),U.dispose(),E.dispose(),Q.dispose(),e.texture.dispose(),e.texture=s,e.packing=c,!0},e.prototype.updateAtlas=function(e,t){return i(this,void 0,void 0,function(){var n,r,i,A,a;return o(this,function(o){switch(o.label){case 0:if(!(n=this.allAtlas.get(e)))return[3,2];for(r=[],i=0,A=t.length;i<A;++i)(a=t[i]).disposeResource||r.push(this.draw(n,a));return[4,Promise.all(r)];case 1:for(o.sent(),i=0,A=t.length;i<A;++i)(a=t[i]).disposeResource?n.stopUsingResource(a):n.useResource(a);return n.resolveResources(),[3,3];case 2:console.warn("Can not update non-existing atlas:",e,"These resources will not be loaded:",t),o.label=3;case 3:return[2,n]}})})},e}();t.AtlasManager=p},function(e,t,n){"use strict";var r,i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function A(e){try{s(r.next(e))}catch(e){o(e)}}function a(e){try{s(r.throw(e))}catch(e){o(e)}}function s(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(A,a)}s((r=r.apply(e,t||[])).next())})},o=this&&this.__generator||function(e,t){var n,r,i,o,A={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;A;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return A.label++,{value:o[1],done:!1};case 5:A.label++,r=o[1],o=[0];continue;case 7:o=A.ops.pop(),A.trys.pop();continue;default:if(!(i=(i=A.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){A=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){A.label=o[1];break}if(6===o[0]&&A.label<i[1]){A.label=i[1],i=o;break}if(i&&A.label<i[2]){A.label=i[2],A.ops.push(o);break}i[2]&&A.ops.pop(),A.trys.pop();continue}o=t.call(e,A)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};Object.defineProperty(t,"__esModule",{value:!0});var A=function(){function e(){}return e.awaitContext=function(){return i(this,void 0,void 0,function(){return o(this,function(e){switch(e.label){case 0:return r?[3,2]:(this.getContext(),[4,new Promise(function(e){return setTimeout(e,10)})]);case 1:return e.sent(),[3,0];case 2:return[2]}})})},e.getContext=function(){r||(r=document.createElement("canvas").getContext("2d"))},e.calculateImageSize=function(e){return i(this,void 0,void 0,function(){return o(this,function(t){switch(t.label){case 0:return[4,this.awaitContext()];case 1:return t.sent(),r?0===e.width||0===e.height?(console.warn("Images provided shoud have valid dimensions! Please ensure the image is loaded first."),[2]):(r.canvas.width=100,r.canvas.height=100,r.drawImage(e,0,0,1,1),[2,[e.width,e.height]]):(console.warn("The Image rasterizer was unable to establish a valid canvas context. Please ensure the system supports contexts and ensure the document is ready first."),[2])}})})},e.resizeImage=function(t,n){return i(this,void 0,void 0,function(){var i;return o(this,function(o){switch(o.label){case 0:return[4,this.awaitContext()];case 1:return o.sent(),r?0===t.width||0===t.height?(console.warn("Images provided shoud have valid dimensions! Please ensure the image is loaded first."),[2,t]):(r.canvas.width=Math.floor(t.width*n),r.canvas.height=Math.floor(t.height*n),t instanceof ImageData?r.putImageData(t,0,0,0,0,r.canvas.width,r.canvas.height):r.drawImage(t,0,0,r.canvas.width,r.canvas.height),(i=new Image).src=r.canvas.toDataURL("image/png"),[4,e.calculateImageSize(i)]):(console.warn("The Image rasterizer was unable to establish a valid canvas context. Please ensure the system supports contexts and ensure the document is ready first."),[2,t]);case 2:return o.sent(),[2,i]}})})},e}();t.ImageRasterizer=A},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function A(e){try{s(r.next(e))}catch(e){o(e)}}function a(e){try{s(r.throw(e))}catch(e){o(e)}}function s(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(A,a)}s((r=r.apply(e,t||[])).next())})},A=this&&this.__generator||function(e,t){var n,r,i,o,A={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;A;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return A.label++,{value:o[1],done:!1};case 5:A.label++,r=o[1],o=[0];continue;case 7:o=A.ops.pop(),A.trys.pop();continue;default:if(!(i=(i=A.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){A=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){A.label=o[1];break}if(6===o[0]&&A.label<i[1]){A.label=i[1],i=o;break}if(i&&A.label<i[2]){A.label=i[2],A.ops.push(o);break}i[2]&&A.ops.pop(),A.trys.pop();continue}o=t.call(e,A)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=n(1),c=n(34),u=n(57),l=n(97),h=n(16),d=n(56),f=function(e){function t(t){var n=e.call(this)||this;return n.resources=new Map,n.requestQueue=new Map,n.requestLookup=new Map,n.atlasManager=t&&t.atlasManager||new l.AtlasManager,n}return i(t,e),Object.defineProperty(t.prototype,"webGLRenderer",{get:function(){return this._webGLRenderer},set:function(e){this._webGLRenderer=e,this.atlasManager.renderer=e},enumerable:!0,configurable:!0}),t.prototype.dequeueRequests=function(){return o(this,void 0,void 0,function(){var e,t,n,r,i,o,a,c,u;return A(this,function(l){switch(l.label){case 0:e=!1,t=[],this.requestQueue.forEach(function(e,n){t.push([n,e])}),this.requestQueue.clear(),n=function(t,n){var i,o;return A(this,function(A){switch(A.label){case 0:return n.length>0?(e=!0,i=n.slice(0),n.length=0,[4,r.atlasManager.updateAtlas(t,i)]):[3,2];case 1:A.sent(),(o=r.requestLookup.get(t))&&i.forEach(function(e){var t=o.get(e);if(o.delete(e),t&&!e.disposeResource){for(var n=0,r=t.length;n<r;++n){var i=t[n],A=i[0],a=i[1];A.managesInstance(a)&&(a.active=!0)}s.nextFrame(function(){for(var e=new Set,n=0,r=t.length;n<r;++n){var i=t[n][1];e.has(i)||(e.add(i),i.active=!0,i.resourceTrigger())}})}}),A.label=2;case 2:return[2]}})},r=this,i=0,o=t,l.label=1;case 1:return i<o.length?(a=o[i],c=a[0],u=a[1],[5,n(c,u)]):[3,4];case 2:l.sent(),l.label=3;case 3:return i++,[3,1];case 4:return[2,e]}})})},t.prototype.destroy=function(){this.atlasManager.destroy()},t.prototype.destroyResource=function(e){this.resources.get(e.key)&&(this.atlasManager.destroyAtlas(e.key),this.resources.delete(e.key))},t.prototype.getAtlasTexture=function(e){var t=this.atlasManager.getAtlasTexture(e);return t?t.texture:null},t.prototype.getResource=function(e){return this.resources.get(e)||null},t.prototype.getIOExpansion=function(){return[new d.TextureIOExpansion(a.ResourceType.ATLAS,this)]},t.prototype.initResource=function(e){return o(this,void 0,void 0,function(){var t;return A(this,function(n){switch(n.label){case 0:return u.isAtlasResource(e)?[4,this.atlasManager.createAtlas(e)]:[3,2];case 1:t=n.sent(),this.resources.set(e.key,t),n.label=2;case 2:return[2]}})})},t.prototype.request=function(e,t,n,r){var i=n.key||"",o=n.texture;if(o)return h.subTextureIOValue(o);var A=this.requestLookup.get(i);if(A){var a=A.get(n);if(a)return a.push([e,t]),t.active=!1,h.subTextureIOValue(o)}else A=new Map,this.requestLookup.set(i,A);n.disposeResource||(t.active=!1);var s=this.requestQueue.get(i);return s||(s=[],this.requestQueue.set(i,s)),s.push(n),A.set(n,[[e,t]]),h.subTextureIOValue(o)},t.prototype.updateResource=function(e){u.isAtlasResource(e)},t}(c.BaseResourceManager);t.AtlasResourceManager=f},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=n(9),o=function(){function e(e){if(this._uid=i.uid(),this.cleanObservation=new Map,this.instanceChanges=new Map,this.allowChanges=!0,this.resolveContext="",e)for(var t=0,n=e.length;t<n;++t){var r=e[t];this.add(r)}}return Object.defineProperty(e.prototype,"uid",{get:function(){return this._uid},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"changeList",{get:function(){this.allowChanges=!1;var e=[];return this.instanceChanges.forEach(function(t){return e.push(t)}),e},enumerable:!0,configurable:!0}),e.prototype.add=function(e){if(this.cleanObservation.get(e.uid))return e;if(this.allowChanges){e.observer=this;var t=e.observableDisposer;this.cleanObservation.set(e.uid,[e,t]),this.instanceChanges.set(e.uid,[e,r.InstanceDiffType.INSERT,e.changes])}return e},e.prototype.clear=function(){var e=this;this.cleanObservation.forEach(function(t){e.remove(t[0])})},e.prototype.destroy=function(){this.cleanObservation.forEach(function(e){e[1]()}),this.cleanObservation.clear(),this.instanceChanges.clear()},e.prototype.instanceUpdated=function(e){this.allowChanges&&this.instanceChanges.set(e.uid,[e,r.InstanceDiffType.CHANGE,e.changes])},e.prototype.remove=function(e){if(this.allowChanges){var t=this.cleanObservation.get(e.uid);t&&(t[1](),this.cleanObservation.delete(e.uid),this.instanceChanges.set(e.uid,[e,r.InstanceDiffType.REMOVE,{}]))}return!1},e.prototype.resolve=function(e){if(this.allowChanges=!0,this.instanceChanges.clear(),this.resolveContext&&this.resolveContext!==e)throw new Error("An instance provider has been issued to two layers. This is not a suppported feature yet and can cause issues.");this.resolveContext=e},e.prototype.sync=function(){var e=this,t=[];this.cleanObservation.forEach(function(n){var i=n[0];e.instanceChanges.set(i.uid,[i,r.InstanceDiffType.INSERT,t])})},e}();t.InstanceProvider=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e){this.delay=0,this.isManualStart=!1,this.isTimeSet=!1,Object.assign(this,e)}return e.prototype.setAutomatic=function(){this.isManualStart=!1,this.isTimeSet=!1},e.prototype.setStart=function(e){e&&(this.start.length!==e.length?console.warn("A manual easing adjustment provided an incompatible value for the easing type."):(this.start=e,this.isManualStart=!0))},e.prototype.setTiming=function(e,t){this.delay=void 0===e?this.delay:e,this.duration=void 0===t?this.duration:t,this.isTimeSet=!0},e}();t.EasingProps=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={};t.emitOnce=function(e,t){var n=r[e]||[t,-1,0];r[e]=n,n[2]++,clearTimeout(n[1]),n[1]=window.setTimeout(function(){t(n[2],e),delete r[e]},1)},t.flushEmitOnce=function(){for(var e in r){var t=r[e];clearTimeout(t[1]),t[0](t[2],e)}r={}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(6),i=n(15);t.generateLayerGeometry=function(e,t,n,o){var A=[];e.bufferType!==i.LayerBufferType.INSTANCE_ATTRIBUTE&&e.bufferType!==i.LayerBufferType.INSTANCE_ATTRIBUTE_PACKING||(t=1);for(var a=0,s=n.length;a<s;++a){var c=n[a];A.push(new Float32Array(c.size*o*t))}var u,l,h,d,f=n.length,p=!1;for(a=0,s=o;a<s;++a)for(var g=0;g<f;++g)if(l=n[g],u=A[g],h=l.update(a),d=h,Array.isArray(d[0]))p=!0;else for(var B=a*l.size,w=B+l.size,y=0;B<w;++B,++y)u[B]=h[y];for(p&&console.warn("A vertex buffer updating method should not use arrays of arrays of numbers."),a=0,s=n.length;a<s;++a)for(var v=n[a].size*o,m=(g=1,t);g<m;++g)A[a].copyWithin(v*g,0,v);if(e.bufferType===i.LayerBufferType.UNIFORM){var b=A[0];for(a=0,s=t;a<s;++a){var E=a*o;for(g=0;g<o;++g)b[g+E]=a}}var T=new r.Geometry;for(a=0,s=n.length;a<s;++a){var C=n[a],U=new r.Attribute(A[a],C.size);C.materialAttribute=U,T.addAttribute(C.name,U)}return T}},function(e,t,n){"use strict";var r,i;Object.defineProperty(t,"__esModule",{value:!0});var o=n(6),A=n(0),a=((r={})[A.UniformSize.ONE]=o.MaterialUniformType.FLOAT,r[A.UniformSize.TWO]=o.MaterialUniformType.VEC2,r[A.UniformSize.THREE]=o.MaterialUniformType.VEC3,r[A.UniformSize.FOUR]=o.MaterialUniformType.VEC4,r[A.UniformSize.MATRIX3]=o.MaterialUniformType.MATRIX3x3,r[A.UniformSize.MATRIX4]=o.MaterialUniformType.MATRIX4x4,r[A.UniformSize.ATLAS]=o.MaterialUniformType.TEXTURE,r),s=((i={})[A.UniformSize.ONE]=[0],i[A.UniformSize.TWO]=[0,0],i[A.UniformSize.THREE]=[0,0,0],i[A.UniformSize.FOUR]=[0,0,0,0],i[A.UniformSize.MATRIX3]=[0,0,0,0,0,0,0,0,0],i[A.UniformSize.MATRIX4]=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],i);function c(e){return{type:a[e.size],value:s[e.size]}}t.generateLayerMaterial=function(e,t,n,r,i){var A=e.getMaterialOptions();Object.assign(A,e.props.materialOptions||{}),A.vertexShader=t,A.fragmentShader=n,A.name=e.id,A.uniforms={};for(var a=0,s=r.length;a<s;++a){var u=r[a],l=c(u);A.uniforms[u.name]=l}for(a=0,s=i.length;a<s;++a){var h=i[a];A.uniforms[h.name]={type:h.type,value:h.value}}return new o.Material(A)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(15),i=n(188);function o(e){return Boolean(e)}function A(e){return Boolean(e)}function a(e){return Boolean(e)}function s(e){return Object.assign({},e,{materialAttribute:null})}function c(e){return Object.assign({},e,{materialUniforms:[]})}t.injectShaderIO=function(e,t,n,u,l,h){!function(e,t,n){if(n){var r=t.instanceAttributes||[],i=t.uniforms||[],o=t.vertexAttributes||[];n.shaderModuleUnits.forEach(function(t){t.instanceAttributes&&(r=r.concat(t.instanceAttributes(e))),t.uniforms&&(i=i.concat(t.uniforms(e))),t.vertexAttributes&&(o=o.concat(t.vertexAttributes(e)))});var A=new Set,a=new Set,s=new Set;i.filter(function(e){return!!e&&(A.has(e.name)?(console.warn("Included shader modules has introduced duplicate uniform names:",e.name,"One will be overridden thus causing a potential crash of the shader."),!1):(A.add(e.name),!0))}),r.filter(function(e){return!!e&&(a.has(e.name)?(console.warn("Included shader modules has introduced duplicate Instance Attribute names:",e.name,"One will be overridden thus causing a potential crash of the shader."),!1):(a.add(e.name),!0))}),o.filter(function(e){return!!e&&(s.has(e.name)?(console.warn("Included shader modules has introduced duplicate Vertex Attribute names:",e.name,"One will be overridden thus causing a potential crash of the shader."),!1):(s.add(e.name),!0))}),t.instanceAttributes=r,t.uniforms=i,t.vertexAttributes=o}}(t,n,h);for(var d=(n.instanceAttributes||[]).filter(o),f=(n.vertexAttributes||[]).filter(A),p=(n.uniforms||[]).filter(a),g=0,B=u.length;g<B;++g){var w=u[g];if(w.validate(t,d,f,p)){var y=w.expand(t,d,f,p);y.instanceAttributes.filter(o).forEach(function(e){return d.push(e)}),y.vertexAttributes.filter(A).forEach(function(e){return f.push(e)}),y.uniforms.filter(a).forEach(function(e){return p.push(e)})}}!function(e,t,n,r){t.forEach(function(r){void 0===r.name&&console.warn("All instance attributes MUST have a name on Layer:",e.id),t.find(function(e){return e!==r&&e.name===r.name})&&console.warn("An instance attribute can not have the same name used more than once:",r.name),n.find(function(e){return e.name===r.name})&&console.warn("An instance attribute and a vertex attribute in a layer can not share the same name:",r.name),r.resource||void 0===r.size&&(console.warn("An instance attribute requires the size to be defined."),console.warn(r))})}(t,d,f);var v=d.slice(0),m=(f||[]).map(s),b=p.map(c);return v.sort(l.sortInstanceAttributes),b.sort(l.sortUniforms),m.sort(l.sortVertexAttributes),i.packAttributes(v),r.getLayerBufferType(e,t,f,v),{instanceAttributes:v,uniforms:b,vertexAttributes:m}}},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o,A=n(107),a=n(29),s=[],c=Math.min,u=Math.max;!function(e){e[e.PARTIAL=0]="PARTIAL",e[e.FULL=1]="FULL"}(o||(o={}));var l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.diffMode=o.PARTIAL,t.bufferAttributeUpdateRange={},t.bufferAttributeWillUpdate={},t.updateInstance=t.updateInstancePartial,t}return i(t,e),t.prototype.addInstance=function(e,t,n,r){if(r)e.changeInstance(e,t,s,r);else{var i=e.layer.bufferManager.add(t);a.isBufferLocationGroup(i)&&(t.active=!0,t.easingId=e.layer.easingId,e.updateInstance(e.layer,t,s,i))}},t.prototype.changeInstance=function(e,t,n,r){r?e.updateInstance(e.layer,t,n,r):e.addInstance(e,t,s,r)},t.prototype.removeInstance=function(e,t,n,r){r&&(t.active=!1,t.clearEasing(),e.updateInstance(e.layer,t,s,r),e.layer.bufferManager.remove(t))},t.prototype.updateInstancePartial=function(e,t,n,r){var i,o,A,a,s,l,h=r.propertyToBufferLocation,d=this.bufferAttributeUpdateRange;if(t.active){(0===n.length||t.reactivate)&&(n=this.bufferManager.getUpdateAllPropertyIdList());for(var f=0,p=n.length;f<p;++f)if(l=(s=(i=h[n[f]]).attribute).packUID||s.uid,o=s.update(t),i.buffer.value.set(o,i.range[0]),(A=d[l]||[null,Number.MAX_SAFE_INTEGER,Number.MIN_SAFE_INTEGER])[0]=s,A[1]=c(i.range[0],A[1]),A[2]=u(i.range[1],A[2]),d[l]=A,i.childLocations)for(var g=0,B=(a=i.childLocations).length;g<B;++g)l=(i=a[g]).attribute.packUID||i.attribute.uid,o=i.attribute.update(t),i.buffer.value.set(o,i.range[0]),(A=d[l]||[null,Number.MAX_SAFE_INTEGER,Number.MIN_SAFE_INTEGER])[0]=i.attribute,A[1]=c(i.range[0],A[1]),A[2]=u(i.range[1],A[2]),d[l]=A}else l=(s=(i=h[this.bufferManager.getActiveAttributePropertyId()]).attribute).packUID||s.uid,o=s.update(t),i.buffer.value.set(o,i.range[0]),(A=d[l]||[null,Number.MAX_SAFE_INTEGER,Number.MIN_SAFE_INTEGER])[0]=s,A[1]=c(i.range[0],A[1]),A[2]=u(i.range[1],A[2]),d[l]=A;t.reactivate=!1},t.prototype.updateInstanceFull=function(e,t,n,r){var i,o,A,a,s=r.propertyToBufferLocation,c=this.bufferAttributeWillUpdate;if(t.active){(0===n.length||t.reactivate)&&(n=this.bufferManager.getUpdateAllPropertyIdList());for(var u=0,l=n.length;u<l;++u)if(o=(a=(i=s[n[u]]).attribute).update(t),i.buffer.value.set(o,i.range[0]),c[a.packUID||a.uid]=a,i.childLocations)for(var h=0,d=(A=i.childLocations).length;h<d;++h)o=(a=(i=A[h]).attribute).update(t),i.buffer.value.set(o,i.range[0]),c[a.packUID||a.uid]=a}else o=(a=(i=s[this.bufferManager.getActiveAttributePropertyId()]).attribute).update(t),i.buffer.value.set(o,i.range[0]),c[a.packUID||a.uid]=a;t.reactivate=!1},t.prototype.commit=function(){if(this.diffMode===o.PARTIAL)for(var e=0,t=(r=Object.values(this.bufferAttributeUpdateRange)).length;e<t;++e){var n=r[e];n[0].bufferAttribute.updateRange={count:n[2]-n[1],offset:n[1]}}else{var r;for(e=0,t=(r=Object.values(this.bufferAttributeWillUpdate)).length;e<t;++e){r[e].bufferAttribute.updateRange={count:-1,offset:0}}}this.bufferAttributeUpdateRange={}},t.prototype.incomingChangeList=function(e){0===e.length?this.diffMode=o.PARTIAL:e.length>.7*this.bufferManager.getInstanceCount()?this.diffMode=o.FULL:this.diffMode=o.PARTIAL,this.diffMode===o.PARTIAL?this.updateInstance=this.updateInstancePartial:this.updateInstance=this.updateInstanceFull},t}(A.BaseDiffProcessor);t.InstanceAttributeDiffProcessor=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t){this.layer=e,this.bufferManager=t};t.BaseDiffProcessor=r},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o=n(107),A=n(59),a=[],s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.addInstance=function(e,t,n,r){if(r)e.changeInstance(e,t,a,r);else{var i=e.layer.bufferManager.add(t);A.isUniformBufferLocation(i)&&(t.active=!0,t.easingId=e.layer.easingId,e.updateInstance(e.layer,t,i))}},t.prototype.changeInstance=function(e,t,n,r){r?e.updateInstance(e.layer,t,r):e.addInstance(e,t,a,r)},t.prototype.removeInstance=function(e,t,n,r){r&&(t.active=!1,t.clearEasing(),e.updateInstance(e.layer,t,r),e.layer.bufferManager.remove(t))},t.prototype.updateInstance=function(e,t,n){if(t.active){for(var r=n.buffer,i=n.range[0],o=r.value,A=void 0,a=void 0,s=void 0,c=void 0,u=void 0,l=void 0,h=0,d=e.instanceAttributes.length;h<d;++h)if(a=(A=e.instanceAttributes[h]).update(t),s=o[i+(A.block||0)],void 0!==(c=A.blockIndex))for(u=c,l=a.length+c;u<l;++u)s[u]=a[u-c];r.value=o}else{r=n.buffer,i=n.range[0],o=r.value,A=void 0,a=void 0,s=void 0,c=void 0;if(a=(A=e.activeAttribute).update(t),s=o[i+(A.block||0)],void 0!==(c=A.blockIndex))for(u=c,l=a.length+c;u<l;++u)s[u]=a[u-c];r.value=o}},t.prototype.commit=function(){},t.prototype.incomingChangeList=function(e){},t}(o.BaseDiffProcessor);t.UniformDiffProcessor=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.NONE=0]="NONE",e[e.SCREEN_CURVE=1]="SCREEN_CURVE"}(t.EdgeScaleType||(t.EdgeScaleType={})),function(e){e[e.LINE=0]="LINE",e[e.BEZIER=1]="BEZIER",e[e.BEZIER2=2]="BEZIER2"}(t.EdgeType||(t.EdgeType={})),function(e){e[e.ALL=0]="ALL",e[e.PASS_Y=1]="PASS_Y",e[e.PASS_X=2]="PASS_X"}(t.EdgeBroadphase||(t.EdgeBroadphase={}))},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,A=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)A=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(A=(o<3?i(A):o>3?i(t,n,A):i(t,n))||A);return o>3&&A&&Object.defineProperty(t,n,A),A};Object.defineProperty(t,"__esModule",{value:!0});var A=n(3),a=function(e){function t(t){var n=e.call(this,t)||this;return n.anchor=[0,0],n.character="a",n.color=[1,1,1,1],n.depth=0,n.fontScale=1,n.maxScale=1,n.offset=[0,0],n.origin=[0,0],n.padding=[0,0],n.origin=t.origin||n.origin,n.offset=t.offset||n.offset,n.character=t.character||n.character,n.color=t.color||n.color,n.maxScale=t.maxScale||n.maxScale,n.padding=t.padding||n.padding,n.anchor=t.anchor||n.anchor,n.onReady=t.onReady,n}return i(t,e),t.prototype.clone=function(){var e=new t(this);e.onReady=this.onReady,e.request=this.request},t.prototype.resourceTrigger=function(){this.offset=this.offset,this.origin=this.origin,this.character=this.character,this.color=this.color,this.onReady&&this.onReady(this)},o([A.observable],t.prototype,"anchor",void 0),o([A.observable],t.prototype,"character",void 0),o([A.observable],t.prototype,"color",void 0),o([A.observable],t.prototype,"depth",void 0),o([A.observable],t.prototype,"fontScale",void 0),o([A.observable],t.prototype,"maxScale",void 0),o([A.observable],t.prototype,"offset",void 0),o([A.observable],t.prototype,"origin",void 0),o([A.observable],t.prototype,"padding",void 0),t}(A.Instance);t.GlyphInstance=a},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o=n(3),A=n(24),a=n(0),s=n(1),c=n(19),u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.glyphRequests={},t}return i(t,e),t.prototype.initShader=function(){var e,r,i=this,o=this.props.animate||{},s=o.anchor,u=o.color,l=o.offset,h=o.origin,d={0:[0,0],1:[0,0],2:[1,0],3:[0,1],4:[1,1],5:[1,1]},f={name:"texture",resource:{key:function(){return i.props.resourceKey||""},name:"fontMap"},update:function(e){var t=e.character;return e.request&&e.character===e.request.character||(i.glyphRequests[e.character]?e.request=i.glyphRequests[e.character]:(e.request=A.fontRequest({key:i.props.resourceKey||"",character:t}),i.glyphRequests[e.character]=e.request),e.request.fontMap&&e.onReady&&e.onReady(e)),e.request.fetch=A.FontResourceRequestFetch.TEXCOORDS,i.resource.request(i,e,e.request)}},p={name:"glyphSize",parentAttribute:f,resource:{key:function(){return i.props.resourceKey||""},name:"fontMap"},size:a.InstanceAttributeSize.TWO,update:function(e){var t=e.character;return e.request&&e.character===e.request.character||(i.glyphRequests[e.character]?e.request=i.glyphRequests[e.character]:(e.request=A.fontRequest({key:i.props.resourceKey||"",character:t}),i.glyphRequests[e.character]=e.request),e.request.fontMap&&e.onReady&&e.onReady(e)),e.request.fetch=A.FontResourceRequestFetch.IMAGE_SIZE,i.resource.request(i,e,e.request)}};switch(f.childAttributes=[p],this.props.scaleMode||c.ScaleMode.ALWAYS){case c.ScaleMode.BOUND_MAX:e=this.props.inTextArea?n(232):n(233),r=this.props.inTextArea?n(234):n(235);break;case c.ScaleMode.NEVER:e=this.props.inTextArea?n(236):n(237),r=this.props.inTextArea?n(238):n(239);break;case c.ScaleMode.ALWAYS:e=this.props.inTextArea?n(240):n(112),r=this.props.inTextArea?n(241):n(113);break;default:e=n(112),r=n(113)}return{fs:e,instanceAttributes:[{easing:u,name:t.attributeNames.color,size:a.InstanceAttributeSize.FOUR,update:function(e){return e.color}},{name:t.attributeNames.depth,size:a.InstanceAttributeSize.ONE,update:function(e){return[e.depth]}},{name:"fontScale",size:a.InstanceAttributeSize.ONE,update:function(e){return[e.fontScale]}},{easing:s,name:t.attributeNames.anchor,size:a.InstanceAttributeSize.TWO,update:function(e){return e.anchor}},{easing:h,name:t.attributeNames.origin,size:a.InstanceAttributeSize.TWO,update:function(e){return e.origin}},{easing:l,name:t.attributeNames.offset,size:a.InstanceAttributeSize.TWO,update:function(e){return e.offset}},{name:"padding",size:a.InstanceAttributeSize.TWO,update:function(e){return e.padding}},{name:"maxScale",size:a.InstanceAttributeSize.ONE,update:function(e){return[e.maxScale]}},p,f],uniforms:[],vertexAttributes:[{name:"normals",size:a.VertexAttributeSize.TWO,update:function(e){return d[e]}}],vertexCount:6,vs:r}},t.prototype.draw=function(){e.prototype.draw.call(this)},t.prototype.getMaterialOptions=function(){return Object.assign({},s.CommonMaterialOptions.transparentImageBlending,a.createMaterialOptions({depthTest:!1}))},t.prototype.willUpdateProps=function(e){e.resourceKey!==this.props.resourceKey&&(Object.values(this.glyphRequests).forEach(function(t){delete t.fontMap,t.key=e.resourceKey||""}),this.rebuildLayer())},t.defaultProps={key:"",data:new o.InstanceProvider,resourceKey:"No resource specified"},t.attributeNames={color:"color",depth:"depth",anchor:"anchor",origin:"origin",offset:"offset"},t}(n(7).Layer2D);t.GlyphLayer=u},function(e,t){e.exports="varying vec4 vertexColor;\nvarying vec2 texCoord;\n\nvoid main() {\n  vec4 texColor = texture2D(fontMap, texCoord);\n  if (texColor.r <= 0.0) discard;\n  texColor.a = texColor.r;\n  gl_FragColor = texColor * vertexColor;\n}\n"},function(e,t){e.exports="varying vec4 vertexColor;\nvarying vec2 texCoord;\n\nvoid main() {\n  ${attributes}\n\n  // Calculate in the anchor, the origin, glyph offset, and the quad pushout to make our quad geometry\n  vec2 pushOut = normals * glyphSize * fontScale;\n  vec3 position = vec3(origin + padding - anchor + offset + pushOut, depth);\n  gl_Position = clipSpace(position);\n\n  // Get the atlas position of the texture information\n  texCoord = texture.xy + (texture.zw - texture.xy) * normals;\n  // Apply the color of the glyph\n  vertexColor = color * color.a;\n}\n"},function(e,t,n){"use strict";function r(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),n(115),r(n(116)),r(n(129)),r(n(3)),r(n(43)),r(n(21)),r(n(0)),r(n(1)),r(n(253)),r(n(24)),r(n(6)),r(n(283)),r(n(285))},function(e,t){window.WebGL2RenderingContext=window.WebGL2RenderingContext||function(){}},function(e,t,n){"use strict";function r(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),r(n(41)),r(n(42)),r(n(117)),r(n(61))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.NONE=-1]="NONE",e[e.LEFT=0]="LEFT",e[e.AUX=1]="AUX",e[e.RIGHT=2]="RIGHT",e[e.FOURTH=3]="FOURTH",e[e.FIFTH=4]="FIFTH"}(t.MouseButton||(t.MouseButton={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(4);function i(e,t){var n=r.subtract2(e,t),i=n[0],o=n[1];return i*i+o*o}var o=function(){function e(){}return e.add=function(e,t,n){var i=r.add2(e,t);return n?(n[0]=i[0],n[1]=i[1],n):i},e.getClosest=function(e,t){var n,r=Number.MAX_VALUE,o=e;return t.forEach(function(t){(n=i(t,e))<r&&(r=n,o=t)}),o},e.getClosestIndex=function(e,t){var n,r=Number.MAX_VALUE,o=0;return t.forEach(function(t,A){(n=i(t,e))<r&&(r=n,o=A)}),o},e.subtract=function(e,t,n){void 0===n&&(n=!1);var i=r.subtract2(t,e),o=i[0],A=i[1];if(n){var a=Math.sqrt(o*o+A*A);o/=a,A/=a}return[o,A]},e.getDistance=function(e,t,n){return void 0===n&&(n=!1),n?i(e,t):Math.sqrt(i(e,t))},e.getMidpoint=function(e,t){var n=r.scale2(r.subtract2(t,e),.5);return r.add2(n,e)},e.make=function(e,t){return{x:e,y:t}},e.scale=function(e,t,n){return n?(n[0]=e[0]*t,n[1]=e[1]*t,n):[e[0]*t,e[1]*t]},e.zero=function(){return[0,0]},e}();t.Point=o},function(e,t){var n,r,i=e.exports={};function o(){throw new Error("setTimeout has not been defined")}function A(){throw new Error("clearTimeout has not been defined")}function a(e){if(n===setTimeout)return setTimeout(e,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(e){n=o}try{r="function"==typeof clearTimeout?clearTimeout:A}catch(e){r=A}}();var s,c=[],u=!1,l=-1;function h(){u&&s&&(u=!1,s.length?c=s.concat(c):l=-1,c.length&&d())}function d(){if(!u){var e=a(h);u=!0;for(var t=c.length;t;){for(s=c,c=[];++l<t;)s&&s[l].run();l=-1,t=c.length}s=null,u=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===A||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function f(e,t){this.fun=e,this.array=t}function p(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.push(new f(e,t)),1!==c.length||u||a(d)},f.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=p,i.addListener=p,i.once=p,i.off=p,i.removeListener=p,i.removeAllListeners=p,i.emit=p,i.prependListener=p,i.prependOnceListener=p,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(e,t,n){function r(e){var n;function r(){if(r.enabled){var e=r,i=+new Date,o=i-(n||i);e.diff=o,e.prev=n,e.curr=i,n=i;for(var A=new Array(arguments.length),a=0;a<A.length;a++)A[a]=arguments[a];A[0]=t.coerce(A[0]),"string"!=typeof A[0]&&A.unshift("%O");var s=0;A[0]=A[0].replace(/%([a-zA-Z%])/g,function(n,r){if("%%"===n)return n;s++;var i=t.formatters[r];if("function"==typeof i){var o=A[s];n=i.call(e,o),A.splice(s,1),s--}return n}),t.formatArgs.call(e,A),(r.log||t.log||console.log.bind(console)).apply(e,A)}}return r.namespace=e,r.enabled=t.enabled(e),r.useColors=t.useColors(),r.color=function(e){var n,r=0;for(n in e)r=(r<<5)-r+e.charCodeAt(n),r|=0;return t.colors[Math.abs(r)%t.colors.length]}(e),r.destroy=i,"function"==typeof t.init&&t.init(r),t.instances.push(r),r}function i(){var e=t.instances.indexOf(this);return-1!==e&&(t.instances.splice(e,1),!0)}(t=e.exports=r.debug=r.default=r).coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){t.enable("")},t.enable=function(e){var n;t.save(e),t.names=[],t.skips=[];var r=("string"==typeof e?e:"").split(/[\s,]+/),i=r.length;for(n=0;n<i;n++)r[n]&&("-"===(e=r[n].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.substr(1)+"$")):t.names.push(new RegExp("^"+e+"$")));for(n=0;n<t.instances.length;n++){var o=t.instances[n];o.enabled=t.enabled(o.namespace)}},t.enabled=function(e){if("*"===e[e.length-1])return!0;var n,r;for(n=0,r=t.skips.length;n<r;n++)if(t.skips[n].test(e))return!1;for(n=0,r=t.names.length;n<r;n++)if(t.names[n].test(e))return!0;return!1},t.humanize=n(123),t.instances=[],t.names=[],t.skips=[],t.formatters={}},function(e,t){var n=1e3,r=60*n,i=60*r,o=24*i,A=365.25*o;function a(e,t,n){if(!(e<t))return e<1.5*t?Math.floor(e/t)+" "+n:Math.ceil(e/t)+" "+n+"s"}e.exports=function(e,t){t=t||{};var s,c=typeof e;if("string"===c&&e.length>0)return function(e){if((e=String(e)).length>100)return;var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(!t)return;var a=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return a*A;case"days":case"day":case"d":return a*o;case"hours":case"hour":case"hrs":case"hr":case"h":return a*i;case"minutes":case"minute":case"mins":case"min":case"m":return a*r;case"seconds":case"second":case"secs":case"sec":case"s":return a*n;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return a;default:return}}(e);if("number"===c&&!1===isNaN(e))return t.long?a(s=e,o,"day")||a(s,i,"hour")||a(s,r,"minute")||a(s,n,"second")||s+" ms":function(e){if(e>=o)return Math.round(e/o)+"d";if(e>=i)return Math.round(e/i)+"h";if(e>=r)return Math.round(e/r)+"m";if(e>=n)return Math.round(e/n)+"s";return e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(125);t.normalizeWheel=r.normalizeWheel},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(126),i=n(127),o=10,A=40,a=800;function s(e){var t=0,n=0,r=0,i=0;return"detail"in e&&(n=e.detail),"wheelDelta"in e&&(n=-e.wheelDelta/120),"wheelDeltaY"in e&&(n=-e.wheelDeltaY/120),"wheelDeltaX"in e&&(t=-e.wheelDeltaX/120),"axis"in e&&e.axis===e.HORIZONTAL_AXIS&&(t=n,n=0),r=t*o,i=n*o,"deltaY"in e&&(i=e.deltaY),"deltaX"in e&&(r=e.deltaX),(r||i)&&e.deltaMode&&(1===e.deltaMode?(r*=A,i*=A):(r*=a,i*=a)),r&&!t&&(t=r<1?-1:1),i&&!n&&(n=i<1?-1:1),{spinX:t,spinY:-n,pixelX:r,pixelY:-i}}t.normalizeWheel=s,s.getEventType=function(){return r.firefox()?"DOMMouseScroll":i("wheel")?"wheel":"mousewheel"}},function(e,t){var n,r,i,o,A,a,s,c,u,l,h,d,f,p,g,B=!1;function w(){if(!B){B=!0;var e=navigator.userAgent,t=/(?:MSIE.(\d+\.\d+))|(?:(?:Firefox|GranParadiso|Iceweasel).(\d+\.\d+))|(?:Opera(?:.+Version.|.)(\d+\.\d+))|(?:AppleWebKit.(\d+(?:\.\d+)?))|(?:Trident\/\d+\.\d+.*rv:(\d+\.\d+))/.exec(e),w=/(Mac OS X)|(Windows)|(Linux)/.exec(e);if(d=/\b(iPhone|iP[ao]d)/.exec(e),f=/\b(iP[ao]d)/.exec(e),l=/Android/i.exec(e),p=/FBAN\/\w+;/i.exec(e),g=/Mobile/i.exec(e),h=!!/Win64/.exec(e),t){(n=t[1]?parseFloat(t[1]):t[5]?parseFloat(t[5]):NaN)&&document&&document.documentMode&&(n=document.documentMode);var y=/(?:Trident\/(\d+.\d+))/.exec(e);a=y?parseFloat(y[1])+4:n,r=t[2]?parseFloat(t[2]):NaN,i=t[3]?parseFloat(t[3]):NaN,(o=t[4]?parseFloat(t[4]):NaN)?(t=/(?:Chrome\/(\d+\.\d+))/.exec(e),A=t&&t[1]?parseFloat(t[1]):NaN):A=NaN}else n=r=i=A=o=NaN;if(w){if(w[1]){var v=/(?:Mac OS X (\d+(?:[._]\d+)?))/.exec(e);s=!v||parseFloat(v[1].replace("_","."))}else s=!1;c=!!w[2],u=!!w[3]}else s=c=u=!1}}var y={ie:function(){return w()||n},ieCompatibilityMode:function(){return w()||a>n},ie64:function(){return y.ie()&&h},firefox:function(){return w()||r},opera:function(){return w()||i},webkit:function(){return w()||o},safari:function(){return y.webkit()},chrome:function(){return w()||A},windows:function(){return w()||c},osx:function(){return w()||s},linux:function(){return w()||u},iphone:function(){return w()||d},mobile:function(){return w()||d||f||l||g},nativeApp:function(){return w()||p},android:function(){return w()||l},ipad:function(){return w()||f}};e.exports=y},function(e,t,n){"use strict";var r,i=n(128);i.canUseDOM&&(r=document.implementation&&document.implementation.hasFeature&&!0!==document.implementation.hasFeature("",""))
/**
 * Checks if an event is supported in the current execution environment.
 *
 * NOTE: This will not work correctly for non-generic events such as `change`,
 * `reset`, `load`, `error`, and `select`.
 *
 * Borrows from Modernizr.
 *
 * @param {string} eventNameSuffix Event name, e.g. "click".
 * @param {?boolean} capture Check if the capture phase is supported.
 * @return {boolean} True if the event is supported.
 * @internal
 * @license Modernizr 3.0.0pre (Custom Build) | MIT
 */,e.exports=function(e,t){if(!i.canUseDOM||t&&!("addEventListener"in document))return!1;var n="on"+e,o=n in document;if(!o){var A=document.createElement("div");A.setAttribute(n,"return;"),o="function"==typeof A[n]}return!o&&r&&"wheel"===e&&(o=document.implementation.hasFeature("Events.wheel","3.0")),o}},function(e,t,n){"use strict";var r=!("undefined"==typeof window||!window.document||!window.document.createElement),i={canUseDOM:r,canUseWorkers:"undefined"!=typeof Worker,canUseEventListeners:r&&!(!window.addEventListener&&!window.attachEvent),canUseViewport:r&&!!window.screen,isInWorker:!r};e.exports=i},function(e,t,n){"use strict";function r(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),n(130),r(n(19)),r(n(196)),r(n(200))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(131)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(10),i=n(0),o=n(32),A=n(7);r.ShaderModule.register([{moduleId:"world2D",content:n(195),compatibility:i.ShaderInjectionTarget.ALL,uniforms:function(e){return e instanceof A.Layer2D?[{name:"projection",size:i.UniformSize.MATRIX4,update:function(){return e.view.props.camera.projection}},{name:"modelView",size:i.UniformSize.MATRIX4,update:function(){return e.view.props.camera.view}},{name:"cameraOffset",size:i.UniformSize.THREE,update:function(){return e.view.props.camera instanceof o.Camera2D?e.view.props.camera.control2D.offset:[0,0,0]}},{name:"cameraPosition",size:i.UniformSize.THREE,update:function(){return e.view.props.camera.position}},{name:"cameraScale",size:i.UniformSize.THREE,update:function(){return e.view.props.camera.scale}},{name:"cameraScale2D",size:i.UniformSize.THREE,update:function(){return e.view.props.camera instanceof o.Camera2D?e.view.props.camera.scale2D:[1,1,1]}},{name:"cameraRotation",size:i.UniformSize.THREE,update:function(){return e.view.props.camera.scale}},{name:"viewSize",size:i.UniformSize.TWO,update:function(){return[e.view.viewBounds.width,e.view.viewBounds.height]}},{name:"pixelRatio",size:i.UniformSize.ONE,update:function(){return[e.view.pixelRatio]}}]:(console.warn("A shader requesed the module world2D; however, the layer the shader comes from is NOT a Layer2D which is","required for the module to work."),[])}}])},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function A(e){try{s(r.next(e))}catch(e){o(e)}}function a(e){try{s(r.throw(e))}catch(e){o(e)}}function s(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(A,a)}s((r=r.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){var n,r,i,o,A={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;A;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return A.label++,{value:o[1],done:!1};case 5:A.label++,r=o[1],o=[0];continue;case 7:o=A.ops.pop(),A.trys.pop();continue;default:if(!(i=(i=A.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){A=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){A.label=o[1];break}if(6===o[0]&&A.label<i[1]){A.label=i[1],i=o;break}if(i&&A.label<i[2]){A.label=i[2],A.ops.push(o);break}i[2]&&A.ops.pop(),A.trys.pop();continue}o=t.call(e,A)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),A=n(73),a=function(){function e(){}return e.all=function(e,t,n,a){return r(this,void 0,void 0,function(){var r,s,c,u,l,h,d,f,p,g,B,w;return i(this,function(i){for(r=o.NOOP,s=new Promise(function(e){return r=e}),c=0,u=0,l=0,h=n.length;l<h;++l)for(d=n[l],f=0,p=t.length;f<p;++f)g=t[f],(B=g.getEasing(d))&&(a&&a(B,g,f,l),c=Math.max((B.delay||0)+B.duration));return w=function(e){e-u<c?A.nextFrame(w):r()},e?requestAnimationFrame(function(e){u=e,w(e)}):r(),[2,s]})})},e}();t.EasingUtil=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(74);t.extendShaderInitialization=function(e,t){var n=r.extendShader(e,t.vs,t.fs);return{fs:n.fs,instanceAttributes:(e.instanceAttributes||[]).concat(t.instanceAttributes||[]),uniforms:(e.uniforms||[]).concat(t.uniforms||[]),vertexAttributes:(e.vertexAttributes||[]).concat(t.vertexAttributes||[]),vertexCount:e.vertexCount,vs:n.vs}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.shallowEqual=function(e,t){return e&&t?!Boolean(Object.keys(Object.assign({},e,t)).find(function(n){return e[n]!==t[n]})):e===t}},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o=n(5),A=n(4),a=function(){function e(e,t,n,r,i){var o=e.mid;this.TL=new s(e.x,o[0],e.y,o[1],n,t),this.TR=new s(o[0],e.right,e.y,o[1],n,t),this.BL=new s(e.x,o[0],o[1],e.bottom,n,t),this.BR=new s(o[0],e.right,o[1],e.bottom,n,t),this.TL.childToNode=r,this.TR.childToNode=r,this.BL.childToNode=r,this.BR.childToNode=r,this.TL.childToBounds=i,this.TR.childToBounds=i,this.BL.childToBounds=i,this.BR.childToBounds=i}return e.prototype.destroy=function(){this.TL.destroy(),this.TR.destroy(),this.BL.destroy(),this.BR.destroy(),delete this.TL,delete this.TR,delete this.BL,delete this.BR},e}();t.TrackedQuadTreeQuadrants=a;var s=function(){function e(e,t,n,r,i,A){void 0===A&&(A=0),this.children=[],this.depth=0,this.nodes=null,arguments.length>=4?this.bounds=new o.Bounds({left:e,right:t,top:n,bottom:r}):this.bounds=new o.Bounds({left:0,right:1,top:1,bottom:0}),this.depth=A,this.getBounds=i,0===this.depth&&(this.nullBounded=[],this.childToNode=new Map,this.childToBounds=new Map)}return e.prototype.destroy=function(){delete this.children,delete this.bounds,this.nodes&&(this.nodes.destroy(),this.nodes=null)},e.prototype.add=function(e){var t=this.childToBounds.get(e);return t||(t=this.getBounds(e),this.childToBounds.set(e,t)),!t||t.isInside(this.bounds)?this.doAdd(e,t):(this.cover(t),this.add(e))},e.prototype.addAll=function(e){var t=this,n=Number.MAX_VALUE,r=Number.MAX_VALUE,i=-Number.MAX_VALUE,A=-Number.MAX_VALUE;e.forEach(function(e){var o=t.getBounds(e);t.childToBounds.set(e,o),o&&(o.x<n&&(n=o.x),o.right>i&&(i=o.right),o.bottom>A&&(A=o.bottom),o.y<r&&(r=o.y))}),n!==Number.MAX_VALUE&&r!==Number.MAX_VALUE&&i!==-Number.MAX_VALUE&&A!==-Number.MAX_VALUE&&this.cover(new o.Bounds({left:n,right:i,bottom:A,top:r})),e.forEach(function(e){return t.doAdd(e,t.childToBounds.get(e)||null,!0)})},e.prototype.cover=function(e){var t=this;if(!e.isInside(this.bounds)){this.bounds.encapsulate(e),this.bounds.x-=1,this.bounds.y-=1,this.bounds.width+=2,this.bounds.height+=2;var n=this.gatherChildren([]);this.children=[],this.nodes&&(this.nodes.destroy(),this.nodes=null),this.childToNode.clear(),n.forEach(function(e){return t.doAdd(e,t.childToBounds.get(e)||null)})}},e.prototype.doAdd=function(e,t,n){return t||0!==this.depth?t?this.nodes?t.isInside(this.nodes.TL.bounds)?this.nodes.TL.doAdd(e,t,n):t.isInside(this.nodes.TR.bounds)?this.nodes.TR.doAdd(e,t,n):t.isInside(this.nodes.BL.bounds)?this.nodes.BL.doAdd(e,t,n):t.isInside(this.nodes.BR.bounds)?this.nodes.BR.doAdd(e,t,n):(this.children.push(e),this.childToNode.set(e,this),!0):t.isInside(this.bounds)?(this.children.push(e),this.childToNode.set(e,this),this.children.length>5&&this.depth<10&&this.split(),!0):(isNaN(t.width+t.height+t.x+t.y)?console.error("Child did not fit into bounds because a dimension is NaN",e,t):0===t.area?console.error("Child did not fit into bounds because the area is zero",e,t):console.error("Child did not get insertted.","Parent:",this.bounds.toString(),"Child:",t.toString(),"Inside Checks:",t.x>=this.bounds.x,t.right<=this.bounds.right,t.y>=this.bounds.y,t.bottom<=this.bounds.bottom),!0):(console.warn("A null bounds was added to a Quad Tree node below the top node, which is invalid."),!1):(this.nullBounded.push(e),this.childToNode.set(e,this),!0)},e.prototype.doRemove=function(e){var t=this.children.indexOf(e);t>-1&&(this.children.splice(t,1),this.childToNode.delete(e),this.childToBounds.delete(e))},e.prototype.gatherChildren=function(e){return this.children.forEach(function(t){return e.push(t)}),this.nodes&&(this.nodes.TL.gatherChildren(e),this.nodes.TR.gatherChildren(e),this.nodes.BL.gatherChildren(e),this.nodes.BR.gatherChildren(e)),e},e.prototype.query=function(e,t){var n=[];return 0===this.depth&&(n=this.nullBounded.slice(0)),e instanceof o.Bounds&&e.hitBounds(this.bounds)?this.queryBounds(e,n,t):A.isVec2(e)&&this.bounds.containsPoint(e)?this.queryPoint(e,n,t):n},e.prototype.queryBounds=function(e,t,n){var r=this;return this.children.forEach(function(n){var i=r.childToBounds.get(n);i&&i.hitBounds(e)&&t.push(n)}),n&&n(this),this.nodes&&(e.hitBounds(this.nodes.TL.bounds)&&this.nodes.TL.queryBounds(e,t,n),e.hitBounds(this.nodes.TR.bounds)&&this.nodes.TR.queryBounds(e,t,n),e.hitBounds(this.nodes.BL.bounds)&&this.nodes.BL.queryBounds(e,t,n),e.hitBounds(this.nodes.BR.bounds)&&this.nodes.BR.queryBounds(e,t,n)),t},e.prototype.queryPoint=function(e,t,n){var r=this;return this.children.forEach(function(n){var i=r.childToBounds.get(n);i&&i.containsPoint(e)&&t.push(n)}),n&&n(this),this.nodes&&(this.nodes.TL.bounds.containsPoint(e)&&this.nodes.TL.queryPoint(e,t,n),this.nodes.TR.bounds.containsPoint(e)&&this.nodes.TR.queryPoint(e,t,n),this.nodes.BL.bounds.containsPoint(e)&&this.nodes.BL.queryPoint(e,t,n),this.nodes.BR.bounds.containsPoint(e)&&this.nodes.BR.queryPoint(e,t,n)),t},e.prototype.remove=function(e){if(this.childToNode){var t=this.childToNode.get(e);if(t&&0===t.depth){var n=t.nullBounded.indexOf(e);if(n>-1)return t.nullBounded.splice(n),this.childToNode.delete(e),void this.childToBounds.delete(e)}t&&t.doRemove(e)}},e.prototype.split=function(){var e=this.gatherChildren([]);this.nodes=new a(this.bounds,this.depth+1,this.getBounds,this.childToNode,this.childToBounds),this.children=[];for(var t=0,n=e.length;t<n;++t){var r=e[t];this.doAdd(r,this.childToBounds.get(r)||null,!0)}},e.prototype.visit=function(e){var t=Boolean(e(this));this.nodes&&!t&&(this.nodes.TL.visit(e),this.nodes.TR.visit(e),this.nodes.BL.visit(e),this.nodes.BR.visit(e))},e}();t.TrackedQuadtreeNode=s;var c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t}(s);t.TrackedQuadTree=c},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function A(e){try{s(r.next(e))}catch(e){o(e)}}function a(e){try{s(r.throw(e))}catch(e){o(e)}}function s(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(A,a)}s((r=r.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){var n,r,i,o,A={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;A;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return A.label++,{value:o[1],done:!1};case 5:A.label++,r=o[1],o=[0];continue;case 7:o=A.ops.pop(),A.trys.pop();continue;default:if(!(i=(i=A.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){A=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){A.label=o[1];break}if(6===o[0]&&A.label<i[1]){A.label=i[1],i=o;break}if(i&&A.label<i[2]){A.label=i[2],A.ops.push(o);break}i[2]&&A.ops.pop(),A.trys.pop();continue}o=t.call(e,A)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};Object.defineProperty(t,"__esModule",{value:!0});var o=n(61),A=n(6),a=n(79),s=n(62),c=n(5),u=n(24),l=n(99),h=n(178),d=n(0),f=n(0),p=n(1),g=n(180),B=n(47),w=n(4),y=n(181),v=n(182),m=n(183),b=n(187),E=n(46),T=n(44);t.DEFAULT_IO_EXPANSION=[new m.BasicIOExpansion,new h.ActiveIOExpansion,new b.EasingIOExpansion],t.DEFAULT_RESOURCE_MANAGEMENT=[{type:d.ResourceType.ATLAS,manager:new l.AtlasResourceManager({})},{type:d.ResourceType.FONT,manager:new u.FontResourceManager}];var C=[0,0,0,0];function U(e,t){return(e.order||Number.MAX_SAFE_INTEGER)-(t.order||Number.MAX_SAFE_INTEGER)}var _=function(){function e(e){var t=this;this.frameMetrics={currentFrame:0,currentTime:0|Date.now(),frameDuration:1e3/60,previousTime:0|Date.now()},this.isBufferingResources=!1,this.ioExpanders=[],this.ioSorting=new y.BaseIOSorting,this.layers=new Map,this.pixelRatio=window.devicePixelRatio,this.viewDrawDependencies=new Map,this.resourceDiffs=new B.ReactiveDiff({buildItem:function(e){return r(t,void 0,void 0,function(){return i(this,function(t){switch(t.label){case 0:return[4,this.resourceManager.initResource(e)];case 1:return t.sent(),[2,{id:e.key}]}})})},destroyItem:function(e,n){return r(t,void 0,void 0,function(){return i(this,function(t){switch(t.label){case 0:return[4,this.resourceManager.destroyResource(e)];case 1:return t.sent(),[2,!0]}})})},updateItem:function(e,n){return r(t,void 0,void 0,function(){return i(this,function(t){switch(t.label){case 0:return[4,this.resourceManager.updateResource(e)];case 1:return t.sent(),[2]}})})}}),this.sceneDiffs=new B.ReactiveDiff({buildItem:function(e){return r(t,void 0,void 0,function(){return i(this,function(t){return[2,new E.LayerScene(this,{key:e.key,views:e.views,layers:e.layers})]})})},destroyItem:function(e,n){return r(t,void 0,void 0,function(){return i(this,function(e){return n.destroy(),[2,!0]})})},updateItem:function(e,n){return r(t,void 0,void 0,function(){return i(this,function(t){switch(t.label){case 0:return[4,n.update(e)];case 1:return t.sent(),[2]}})})}}),this.readyResolver=new p.PromiseResolver,this.ready=this.readyResolver.promise,e&&this.init(e)}return Object.defineProperty(e.prototype,"gl",{get:function(){return this.context},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scenes",{get:function(){return this.sceneDiffs.items},enumerable:!0,configurable:!0}),e.prototype.getIOExpanders=function(){return this.ioExpanders},e.prototype.getIOSorting=function(){return this.ioSorting},e.prototype.analyzePickRendering=function(){if(this.queuedPicking){for(var e=0,t=this.queuedPicking.length;e<t;++e){var n=this.queuedPicking[e],r=n[1],i=n[2],o=n[3];if(!r.optimizeRendering){var A=new Uint8Array(100);this.renderer.readPixels(Math.floor(o[0]-2.5),Math.floor(o[1]-2.5),5,5,A);for(var a=g.analyzeColorPickingRendering([o[0]-r.screenBounds.x,o[1]-r.screenBounds.y],A,5,5),s=0,c=i.length;s<c;++s){var u=i[s];u.picking.type===f.PickType.SINGLE&&(u.interactions.colorPicking=a)}}}delete this.queuedPicking}},e.prototype.commit=function(e,t,n){return r(this,void 0,void 0,function(){var r,o,A,a,u,l,h,d,p,g,B,w,y,v,m,b,E,T,C,_,Q,F;return i(this,function(i){if(!this.gl)return[2];for(r=!1,t&&this.frameMetrics.currentFrame++,this.frameMetrics.frameDuration=this.frameMetrics.currentTime-this.frameMetrics.previousTime,this.frameMetrics.previousTime=this.frameMetrics.currentTime,void 0===e?this.frameMetrics.currentTime=0|Date.now():(this.frameMetrics.previousTime===this.frameMetrics.currentTime&&(this.frameMetrics.previousTime=e),this.frameMetrics.currentTime=e),e=this.frameMetrics.currentTime,(o=this.sceneDiffs.items).sort(U),A={},a=new Map,m=0,b=o.length;m<b;++m){for(E=o[m],T=E.views,u=E.layers,l={},T.sort(U),u.sort(U),C=0,_=T.length;C<_;++C){for(Q=T[C],h=[],d=new c.Bounds({height:this.context.canvas.height,width:this.context.canvas.width,x:0,y:0}),p=s.getAbsolutePositionBounds(Q.props.viewport,d,this.pixelRatio),Q.fitViewtoViewport(d,p),g=0,B=u.length;g<B;++g){(w=u[g]).view=Q;try{w.draw(),w.needsViewDrawn&&(Q.needsDraw=!0),l[w.id]=w,Q.animationEndTime=Math.max(Q.animationEndTime,w.animationEndTime,Q.props.camera.animationEndTime),w.lastFrameTime=e}catch(e){A[w.id]||(A[w.id]=[w,e])}w.picking.type===f.PickType.SINGLE&&h.push(w)}Q.needsDraw||e&&e<Q.lastFrameTime||Q.props.camera.needsViewDrawn,Q.needsDraw=!0,r=!0,(y=this.viewDrawDependencies.get(Q))&&y.forEach(function(e){e.needsDraw=!0}),a.set(Q,h)}v=Object.values(l),u.length!==v.length&&E.layerDiffs.diff(v.map(function(e){return e.initializer}))}for(m=0,b=o.length;m<b;++m)if((E=o[m]).container)for(T=E.views,C=0,_=T.length;C<_;++C)Q=T[C],n&&n(r,E,Q,a.get(Q)||[]);return(F=Object.values(A)).length>0&&(console.warn("Some layers errored during their draw update. These layers will be removed. They can be re-added if render() is called again:",F.map(function(e){return e[0].id})),F.forEach(function(e){if(console.warn("Layer "+e[0].id+" removed for the following error:"),e[1]){var t=e[1].stack||e[1].message;if(console.error(t),t.indexOf("RangeError")>-1||t.indexOf("Source is too large")>-1){for(var n,r=e[0],i=r.bufferManager.changeListContext,o=0,A=function(e,t){var A=i[e][0];r.instanceAttributes.forEach(function(e){e.update(A).length!==e.size&&(n||(n=["Example instance returned the wrong sized value for an attribute:",A,e]),o++)})},a=0,s=i.length;a<s;++a)A(a);n&&(console.error("The following output shows discovered issues related to the specified error"),console.error("Instances are returning too large IO for an attribute\n",n[0],n[1],n[2],"Total errors for too large IO values",o))}}})),[2]})})},e.prototype.destroy=function(){this.layers.forEach(function(e){return e.destroy()}),this.resourceManager.destroy(),this.mouseManager.destroy(),this.sceneDiffs.destroy(),this.renderer.dispose(),this.pickingTarget.dispose(),delete this.context},e.prototype.draw=function(e){return r(this,void 0,void 0,function(){var t,n,r,o,A,a,s,c,u,l,h,d,f=this;return i(this,function(i){switch(i.label){case 0:if(!this.gl)return[2];for(this.analyzePickRendering(),t=[],l=0,h=this.sceneDiffs.items.length;l<h;++l)for(a=this.sceneDiffs.items[l],n=0,r=a.views.length;n<r;++n)(u=a.views[n]).props.camera.broadcast(u.id);return[4,this.commit(e,!0,function(e,n,r,i){n.container&&(e&&f.drawSceneView(n.container,r),i.length>0&&f.updateColorPick&&t.push([n,r,i]))})];case 1:return i.sent(),this.mouseManager.waitingForRender&&(this.mouseManager.waitingForRender=!1),this.isBufferingResources?[3,4]:(this.isBufferingResources=!0,[4,this.resourceManager.dequeueRequests()]);case 2:return o=i.sent(),this.isBufferingResources=!1,o?(A=this.draw,[4,p.onFrame()]):[3,4];case 3:A.apply(this,[i.sent()]),i.label=4;case 4:for(l=0,h=this.sceneDiffs.items.length;l<h;++l)for(a=this.sceneDiffs.items[l],s=0,c=a.views.length;s<c;++s)(u=a.views[s]).needsDraw=!1,u.props.camera.resolve();for(this.layers.forEach(function(e){e.needsViewDrawn=!1,e.props.data.resolveContext=""}),l=0,h=t.length;l<h;++l)d=t[l],this.drawPicking(d[0],d[1],d[2])&&d.length>0&&!d[1].optimizeRendering&&this.updateColorPick&&(this.queuedPicking||(this.queuedPicking=[]),this.queuedPicking.push([d[0],d[1],d[2],this.updateColorPick.position]));return delete this.updateColorPick,[2]}})})},e.prototype.drawPicking=function(e,t,n){if(!this.updateColorPick)return!1;if(!e.container)return!1;if(t.optimizeRendering)return!1;if(this.updateColorPick.views.indexOf(t)>-1){t.pixelRatio=1;var r=t.clearFlags.slice(0),i=t.props.background&&w.copy4(t.props.background);t.props.clearFlags=[T.ClearFlags.COLOR,T.ClearFlags.DEPTH],t.props.background=[0,0,0,0];var o=new c.Bounds({height:this.pickingTarget.height,width:this.pickingTarget.width,x:0,y:0}),A=s.getAbsolutePositionBounds(t.props.viewport,o,this.pixelRatio);t.fitViewtoViewport(o,A);for(var a=0,u=n.length;a<u;++a){var l=n[a];l.picking.currentPickMode=f.PickType.SINGLE;try{l.updateUniforms()}catch(e){console.warn(e)}l.picking.currentPickMode=f.PickType.NONE}return this.drawSceneView(e.container,t,this.renderer,this.pickingTarget),t.pixelRatio=this.pixelRatio,t.props.clearFlags=r,t.props.background=i,o=new c.Bounds({height:this.context.canvas.height,width:this.context.canvas.width,x:0,y:0}),A=s.getAbsolutePositionBounds(t.props.viewport,o,this.pixelRatio),t.fitViewtoViewport(o,A),!0}return!1},e.prototype.drawSceneView=function(e,t,n,r){n=n||this.renderer;var i={x:t.viewBounds.left,y:t.viewBounds.top},o=t.viewBounds,A=t.props.background||C,a=t.clearFlags.indexOf(T.ClearFlags.COLOR)>-1;n.setRenderTarget(r||null),n.setScissor({x:i.x,y:i.y,width:o.width,height:o.height},r),a&&n.clearColor([A[0],A[1],A[2],A[3]]),n.setViewport({x:i.x,y:i.y,width:o.width,height:o.height}),t.clearFlags&&t.clearFlags.length>0?n.clear(a,t.clearFlags.indexOf(T.ClearFlags.DEPTH)>-1,t.clearFlags.indexOf(T.ClearFlags.STENCIL)>-1):n.clear(!1),n.render(e,r),t.lastFrameTime=this.frameMetrics.currentTime},e.prototype.gatherViewDrawDependencies=function(){if(this.sceneDiffs){this.viewDrawDependencies.clear();for(var e=this.sceneDiffs.items,t=0,n=e.length;t<n;t++)for(var r=0,i=(u=e[t]).views.length;r<i;++r){var o=u.views[r],A=new c.Bounds({height:this.context.canvas.height,width:this.context.canvas.width,x:0,y:0}),a=s.getAbsolutePositionBounds(o.props.viewport,A,this.pixelRatio);o.fitViewtoViewport(A,a)}for(t=0,n=e.length;t<n;t++){var u;for(r=0,i=(u=e[t]).views.length;r<i;++r){for(var l=u.views[r],h=[],d=0,f=e.length;d<f;d++)if(d!==t)for(var p=e[d],g=0,B=p.views.length;g<B;++g){var w=p.views[g];l.viewBounds.hitBounds(w.viewBounds)&&h.push(w)}this.viewDrawDependencies.set(l,h)}}}},e.prototype.getViewSize=function(e){for(var t=0,n=this.sceneDiffs.items.length;t<n;++t){var r=this.sceneDiffs.items[t].viewDiffs.getByKey(e);if(r)return r.screenBounds}return null},e.prototype.getViewWorldBounds=function(e){for(var t=0,n=this.sceneDiffs.items.length;t<n;++t){var r=this.sceneDiffs.items[t].viewDiffs.getByKey(e);if(r){if(r.screenBounds){var i=r.viewToWorld([0,0]),o=r.screenToWorld([r.screenBounds.right,r.screenBounds.bottom]);return new c.Bounds({bottom:o[1],left:i[0],right:o[0],top:i[1]})}return null}}return null},e.prototype.getProjections=function(e){for(var t=0,n=this.sceneDiffs.items.length;t<n;++t){var r=this.sceneDiffs.items[t].viewDiffs.getByKey(e);if(r)return r}return null},e.prototype.init=function(e){return r(this,void 0,void 0,function(){var t;return i(this,function(n){switch(n.label){case 0:return this.context?[2,this]:(this.pixelRatio=e.pixelRatio||this.pixelRatio,this.pixelRatio<1&&(this.pixelRatio=1),(t=this.initGL(e))?(this.context=t,this.gl?(this.initMouseManager(e),[4,this.initResources(e)]):[3,3]):(this.readyResolver.reject({error:d.SurfaceErrorType.NO_WEBGL_CONTEXT,message:"Could not establish a webgl context. Surface is being destroyed to free resources."}),this.destroy(),[2,this]));case 1:return n.sent(),[4,this.initIOExpanders(e)];case 2:return n.sent(),[3,4];case 3:console.warn("Could not establish a GL context. Layer Surface will be unable to render"),n.label=4;case 4:return this.readyResolver.resolve(this),[2,this]}})})},e.prototype.initGL=function(e){var t=e.context;if(!t)return null;var n=t.width,r=t.height,i=!0,o=Object.assign({alpha:!1,antialias:!1,preserveDrawingBuffer:!1,premultiplyAlpha:!1},e.rendererOptions);return this.renderer=new a.WebGLRenderer({alpha:o.alpha,antialias:o.antialias,canvas:t,preserveDrawingBuffer:o.preserveDrawingBuffer,premultipliedAlpha:o.premultipliedAlpha,onNoContext:function(){i=!1}}),i&&this.renderer.gl?(this.context=this.renderer.gl,this.resourceManager&&this.resourceManager.setWebGLRenderer(this.renderer),this.pickingTarget=new A.RenderTarget({buffers:{color:new A.Texture({generateMipMaps:!1,data:{width:n,height:r,buffer:null}}),depth:A.GLSettings.RenderTarget.DepthBufferFormat.DEPTH_COMPONENT16},width:n,height:r}),this.setRendererSize(n,r),this.renderer.setPixelRatio(this.pixelRatio),this.renderer.gl):null},e.prototype.initIOExpanders=function(e){Array.isArray(e.ioExpansion)||void 0===e.ioExpansion?this.ioExpanders=e.ioExpansion&&e.ioExpansion.slice(0)||t.DEFAULT_IO_EXPANSION&&t.DEFAULT_IO_EXPANSION.slice(0)||[]:e.ioExpansion instanceof Function&&(this.ioExpanders=e.ioExpansion(t.DEFAULT_IO_EXPANSION));var n=this.resourceManager.getIOExpansion();this.ioExpanders=this.ioExpanders.concat(n)},e.prototype.initMouseManager=function(e){var t=[new v.LayerMouseEvents(this)].concat(e.eventManagers||[]);this.mouseManager=new o.UserInputEventManager(this.context.canvas,this,t,e.handlesWheelEvents)},e.prototype.initResources=function(e){return r(this,void 0,void 0,function(){var n=this;return i(this,function(r){return this.resourceManager=new u.ResourceRouter,this.resourceManager.setWebGLRenderer(this.renderer),(e.resourceManagers&&e.resourceManagers.slice(0)||t.DEFAULT_RESOURCE_MANAGEMENT&&t.DEFAULT_RESOURCE_MANAGEMENT.slice(0)||[]).forEach(function(e){n.resourceManager.setManager(e.type,e.manager)}),[2]})})},e.prototype.pipeline=function(e){return r(this,void 0,void 0,function(){return i(this,function(t){switch(t.label){case 0:return e.resources?[4,this.resourceDiffs.diff(e.resources)]:[3,2];case 1:t.sent(),t.label=2;case 2:return e.scenes?[4,this.sceneDiffs.diff(e.scenes)]:[3,4];case 3:t.sent(),t.label=4;case 4:return this.gatherViewDrawDependencies(),[2]}})})},e.prototype.fitContainer=function(e){var t=this.context.canvas.parentElement;if(t){var n=this.context.canvas;n.className="",n.setAttribute("style",""),t.style.position="relative",n.style.position="absolute",n.style.left="0xp",n.style.top="0xp",n.style.width="100%",n.style.height="100%",n.setAttribute("width",""),n.setAttribute("height","");var r=t.getBoundingClientRect(),i=n.getBoundingClientRect();this.resize(i.width||100,r.height||100)}},e.prototype.resize=function(e,t,n){if(this.pixelRatio=n||this.pixelRatio,this.pixelRatio<1&&(this.pixelRatio=1),this.sceneDiffs)for(var r=this.sceneDiffs.items,i=0,o=r.length;i<o;++i)for(var A=r[i],a=0,s=A.views.length;a<s;++a){A.views[a].pixelRatio=this.pixelRatio}this.setRendererSize(e,t),this.renderer.setPixelRatio(this.pixelRatio),this.mouseManager.resize(),this.gatherViewDrawDependencies()},e.prototype.setRendererSize=function(e,t){e=e||100,t=t||100,this.renderer.setSize(e,t),this.pickingTarget.setSize(e,t)},e.prototype.updateColorPickPosition=function(e,t){this.updateColorPick={position:e,views:t}},e}();t.Surface=_},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t,n,r){void 0===n&&(n=!1),void 0===r&&(r=!1),this._isInstanced=!1,this._fullUpdate=!1,this.normalize=!1,this._updateRange={count:-1,offset:-1},this.data=e,this.size=t,this._isDynamic=n,this._isInstanced=r}return Object.defineProperty(e.prototype,"isDynamic",{get:function(){return this._isDynamic},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isInstanced",{get:function(){return this._isInstanced},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fullUpdate",{get:function(){return this._fullUpdate},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"needsUpdate",{get:function(){return this._needsUpdate},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"updateRange",{get:function(){return this._updateRange},set:function(e){this._updateRange=e,this._needsUpdate=!0},enumerable:!0,configurable:!0}),e.prototype.resolve=function(){this._needsUpdate=!1,this._fullUpdate=!1},e.prototype.setDynamic=function(e){this._isDynamic=e,this._needsUpdate=!0,this._fullUpdate=!0},e}();t.Attribute=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){this._attributes={},this.gl={},this.maxInstancedCount=0,this.isInstanced=!1}return Object.defineProperty(e.prototype,"attributes",{get:function(){return new Map(Object.entries(this._attributes))},enumerable:!0,configurable:!0}),e.prototype.addAttribute=function(e,t){var n,r=this;this._attributes[e]=t,this.isInstanced=!1,Object.values(this._attributes).forEach(function(e){var t=e.isInstanced?1:0;void 0===n&&(n=t),1==(n^t)&&(r.isInstanced=!0)})},e.prototype.removeAttribute=function(e){delete this._attributes[e]},e.prototype.dispose=function(){},e}();t.Geometry=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(11),i=function(){function e(e){this.blending={blendDst:r.GLSettings.Material.BlendingDstFactor.OneMinusSrcAlpha,blendEquation:r.GLSettings.Material.BlendingEquations.Add,blendSrc:r.GLSettings.Material.BlendingSrcFactor.SrcAlpha},this.colorWrite=[!0,!0,!0,!0],this.culling=r.GLSettings.Material.CullSide.CCW,this.depthFunc=r.GLSettings.Material.DepthFunctions.LESS_OR_EQUAL,this.depthTest=!0,this.depthWrite=!0,this.dithering=!0,this.fragmentShader="",this.name="",this.uniforms={},this.vertexShader="",Object.assign(this,e),delete this.gl}return e.prototype.clone=function(){var t=new e(this);t.blending=Object.assign({},this.blending),t.polygonOffset=Object.assign({},this.polygonOffset),t.uniforms=Object.assign({},this.uniforms);var n=function(e){var n=t.uniforms[e];if(n.gl){var r=new Map;n.gl.forEach(function(e,t){r.set(t,Object.assign({},e))})}};for(var r in t.uniforms)n(r);return t},e.prototype.dispose=function(){this.gl&&this.gl.proxy.disposeMaterial(this)},e}();t.Material=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(11),i=function(e,t){this.drawMode=r.GLSettings.Model.DrawMode.TRIANGLES,this.vertexDrawRange=[-1,-1],this.drawInstances=-1,this.vertexCount=0,this.geometry=e,this.material=t};t.Model=i},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function A(e){try{s(r.next(e))}catch(e){o(e)}}function a(e){try{s(r.throw(e))}catch(e){o(e)}}function s(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(A,a)}s((r=r.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){var n,r,i,o,A={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;A;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return A.label++,{value:o[1],done:!1};case 5:A.label++,r=o[1],o=[0];continue;case 7:o=A.ops.pop(),A.trys.pop();continue;default:if(!(i=(i=A.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){A=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){A.label=o[1];break}if(6===o[0]&&A.label<i[1]){A.label=i[1],i=o;break}if(i&&A.label<i[2]){A.label=i[2],A.ops.push(o);break}i[2]&&A.ops.pop(),A.trys.pop();continue}o=t.call(e,A)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};Object.defineProperty(t,"__esModule",{value:!0});var o=n(34),A=n(2)("performance"),a=function(){function e(){this.managers=new Map,this.resourceKeyToType=new Map}return e.prototype.dequeueRequests=function(){return r(this,void 0,void 0,function(){var e,t,n,r,o;return i(this,function(i){switch(i.label){case 0:e=!1,t=Array.from(this.managers.values()),n=0,r=t.length,i.label=1;case 1:return n<r?[4,t[n].dequeueRequests()]:[3,4];case 2:o=i.sent(),e=e||o,i.label=3;case 3:return++n,[3,1];case 4:return[2,e]}})})},e.prototype.destroy=function(){this.managers.forEach(function(e){return e.destroy()}),this.resourceKeyToType.clear(),this.managers.clear(),delete this.webGLRenderer},e.prototype.destroyResource=function(e){return r(this,void 0,void 0,function(){var t;return i(this,function(n){switch(n.label){case 0:return(t=this.managers.get(e.type))?(this.resourceKeyToType.delete(e.key),[4,t.destroyResource(e)]):(console.warn("A Resource is trying to be destroyed but has no manager to facilitate the operation: "+e.type),[2]);case 1:return[2,n.sent()]}})})},e.prototype.getIOExpansion=function(){var e=[];return this.managers.forEach(function(t){e=e.concat(t.getIOExpansion())}),e},e.prototype.getManager=function(e){var t=this.managers.get(e);return t||(console.warn("A manager was requested that does not exist for type "+e),o.INVALID_RESOURCE_MANAGER)},e.prototype.getResourceType=function(e){return this.resourceKeyToType.get(e)},e.prototype.initResource=function(e){return r(this,void 0,void 0,function(){var t;return i(this,function(n){switch(n.label){case 0:return(t=this.managers.get(e.type))?this.resourceKeyToType.has(e.key)?(console.warn("Detected two resources with identical keys. The duplicate resource will not be generated:",e.key),[2]):(this.resourceKeyToType.set(e.key,e.type),[4,t.initResource(e)]):(console.warn("A Resource is trying to be created but has no manager to facilitate the operation: "+e.type),[2]);case 1:return[2,n.sent()]}})})},e.prototype.request=function(e,t,n,r){var i=this.managers.get(n.type);return i?i.request(e,t,n,r):(console.warn("A Layer is requesting a resource for which there is no manager set. Please make sure a Resource Manager is set for resource of type: "+n.type),[-1,-1,-1,-1])},e.prototype.setManager=function(e,t){this.managers.get(e)&&A("A manager was assigned to a resource type: "+e+" that overrides another manager already set to that type."),t.router=this,this.managers.set(e,t),t.webGLRenderer=this.webGLRenderer},e.prototype.setWebGLRenderer=function(e){this.webGLRenderer=e,this.managers.forEach(function(t){return t.webGLRenderer=e})},e.prototype.updateResource=function(e){return r(this,void 0,void 0,function(){var t;return i(this,function(n){switch(n.label){case 0:return(t=this.managers.get(e.type))?[4,t.updateResource(e)]:(console.warn("A Resource is trying to be updated but has no manager to facilitate the operation: "+e.type),[2]);case 1:return[2,n.sent()]}})})},e}();t.ResourceRouter=a},function(e,t,n){"use strict";function r(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),r(n(143)),r(n(80)),r(n(81)),r(n(82)),r(n(174)),r(n(96)),r(n(95))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(4),i=Math.ceil,o=Math.max,A=Math.log2,a=Math.pow,s=Math.sqrt,c=[-1,-1];function u(e,t,n){void 0===n&&(n=!1);for(var i,A,a,c,u=n?-1:1,l=[],h=-1,d=0,f=e.length;d<f;++d){var p=e[d];l[d]=[];for(var g=0,B=p.length;g<B;++g)(i=p[g])===t?c=256:(A=[d,g],a=r.subtract2(i,A),c=s(r.dot2(a,a))),l[d][g]=c,h=o(c,h)}for(d=0,f=e.length;d<f;++d)for(g=0,B=(p=e[d]).length;g<B;++g)c=l[d][g],l[d][g]=c/h*255*u;return l}function l(e,t,n,r){for(var i,o=u(e,n,!0),A=u(t,n,!1),a=o.length,s=o,c=0,l=o.length;c<l;++c)for(var h=o[c],d=A[c],f=0,p=h.length;f<p;++f){var g=h[f],B=d[f];h[f]=g+B}for(c=0,l=s.length;c<l;++c)for(f=0,p=(h=s[c]).length;f<p;++f){i=i=h[f];var w=f*(4*a)+4*c;r[w]=i,r[w+1]=i,r[w+2]=i,r[w+3]=255}}function h(e,t){for(var n,i,o,A,s,u,l,h,d,f=e.length,p=e[0].length,g=function(e){for(var t=[],n=0,r=e.length;n<r;++n)t[n]=[];return t}(e),B=e,w=0;w<t;++w){var y=g;g=B,B=y;var v=a(2,t-w-1);for(l=0;l<f;++l)for(h=0;h<p;++h){for(n=[l,h],o=[(g[l-v]||[])[h-v]||c,(g[l]||[])[h-v]||c,(g[l+v]||[])[h-v]||c,(g[l-v]||[])[h]||c,(g[l]||[])[h]||c,(g[l+v]||[])[h]||c,(g[l-v]||[])[h+v]||c,(g[l]||[])[h+v]||c,(g[l+v]||[])[h+v]||c],s=0,A=Number.MAX_VALUE,d=0;d<9;++d){var m=o[d];m!==c&&(i=r.subtract2(m,n),(u=r.dot2(i,i))<A&&(A=u,s=d))}B[l][h]=o[s]}}return B}t.convertToSDF=function(e,t){void 0===t&&(t=l);var n=e.width,r=e.height,a=e.getContext("2d");if(a){var s=a.getImageData(0,0,n,r).data,u=o(n,r),d=i(A(u)),f=function(e,t){for(var n=e.width,r=e.height,i=[],o=[],A=0;A<n;++A){i[A]=[],o[A]=[];for(var a=0;a<r;++a)t[a*(4*n)+4*A+3]?(i[A][a]=[A,a],o[A][a]=c):(i[A][a]=c,o[A][a]=[A,a])}return{seed:i,inverse:o}}(e,s),p=h(f.seed,d),g=h(f.inverse,d),B=new ImageData(n,r);t(p,g,c,B.data),a.putImageData(B,0,0)}},t.makeFontSDF=function(e){}},function(e,t,n){"use strict";var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=c(n(83)),A=c(n(84)),a=n(145),s=n(13);function c(e){return e&&e.__esModule?e:{default:e}}var u=function(e,t){"object"===("undefined"==typeof console?"undefined":i(console))&&"function"==typeof console.log&&console.log("html2canvas $npm_package_version");var n=t||{},c=new A.default("boolean"!=typeof n.logging||n.logging);var u=e.ownerDocument;if(!u)return Promise.reject("Provided element is not within a Document");var l=u.defaultView,h=l.pageXOffset,d=l.pageYOffset,f="HTML"===e.tagName||"BODY"===e.tagName?(0,s.parseDocumentSize)(u):(0,s.parseBounds)(e,h,d),p=f.width,g=f.height,B=f.left,w=f.top,y={async:!0,allowTaint:!1,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,scale:l.devicePixelRatio||1,target:new o.default(n.canvas),useCORS:!1,x:B,y:w,width:Math.ceil(p),height:Math.ceil(g),windowWidth:l.innerWidth,windowHeight:l.innerHeight,scrollX:l.pageXOffset,scrollY:l.pageYOffset};return(0,a.renderElement)(e,r({},y,n),c)};u.CanvasRenderer=o.default,e.exports=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.renderElement=void 0;var r=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var A,a=e[Symbol.iterator]();!(r=(A=a.next()).done)&&(n.push(A.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{!r&&a.return&&a.return()}finally{if(i)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},i=(d(n(84)),n(146)),o=d(n(168)),A=d(n(91)),a=d(n(39)),s=n(13),c=n(171),u=n(93),l=n(12),h=d(l);function d(e){return e&&e.__esModule?e:{default:e}}t.renderElement=function e(t,n,d){var f=t.ownerDocument,p=new s.Bounds(n.scrollX,n.scrollY,n.windowWidth,n.windowHeight),g=f.documentElement?new h.default(getComputedStyle(f.documentElement).backgroundColor):l.TRANSPARENT,B=f.body?new h.default(getComputedStyle(f.body).backgroundColor):l.TRANSPARENT,w=t===f.documentElement?g.isTransparent()?B.isTransparent()?n.backgroundColor?new h.default(n.backgroundColor):null:B:g:n.backgroundColor?new h.default(n.backgroundColor):null;return(n.foreignObjectRendering?a.default.SUPPORT_FOREIGNOBJECT_DRAWING:Promise.resolve(!1)).then(function(a){return a?(s=new c.DocumentCloner(t,n,d,!0,e)).inlineFonts(f).then(function(){return s.resourceLoader.ready()}).then(function(){return new A.default(s.documentElement).render({backgroundColor:w,logger:d,scale:n.scale,x:n.x,y:n.y,width:n.width,height:n.height,windowWidth:n.windowWidth,windowHeight:n.windowHeight,scrollX:n.scrollX,scrollY:n.scrollY})}):(0,c.cloneWindow)(f,p,t,n,d,e).then(function(e){var t=r(e,3),A=t[0],a=t[1],s=t[2];var c=(0,i.NodeParser)(a,s,d),h=a.ownerDocument;return w===c.container.style.background.backgroundColor&&(c.container.style.background.backgroundColor=l.TRANSPARENT),s.ready().then(function(e){var t=new u.FontMetrics(h);var r={backgroundColor:w,fontMetrics:t,imageStore:e,logger:d,scale:n.scale,x:n.x,y:n.y,width:n.width,height:n.height};if(Array.isArray(n.target))return Promise.all(n.target.map(function(e){return new o.default(e,r).render(c)}));var i=new o.default(n.target,r).render(c);return!0===n.removeContainer&&A.parentNode&&A.parentNode.removeChild(A),i})});var s})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NodeParser=void 0;var r=c(n(147)),i=c(n(17)),o=c(n(38)),A=n(89),a=n(55),s=n(37);function c(e){return e&&e.__esModule?e:{default:e}}t.NodeParser=function(e,t,n){var o=0,A=new i.default(e,null,t,o++),a=new r.default(A,null,!0);return l(e,A,a,t,1),a};var u=["SCRIPT","HEAD","TITLE","OBJECT","BR","OPTION"],l=function e(t,n,c,l,f){for(var p,g=t.firstChild;g;g=p){p=g.nextSibling;var B=g.ownerDocument.defaultView;if(g instanceof B.Text||g instanceof Text||B.parent&&g instanceof B.parent.Text)g.data.trim().length>0&&n.childNodes.push(o.default.fromTextNode(g,n));else if(g instanceof B.HTMLElement||g instanceof HTMLElement||B.parent&&g instanceof B.parent.HTMLElement){if(-1===u.indexOf(g.nodeName)){var w=new i.default(g,n,l,f++);if(w.isVisible()){"INPUT"===g.tagName?(0,A.inlineInputElement)(g,w):"TEXTAREA"===g.tagName?(0,A.inlineTextAreaElement)(g,w):"SELECT"===g.tagName?(0,A.inlineSelectElement)(g,w):w.style.listStyle&&w.style.listStyle.listStyleType!==s.LIST_STYLE_TYPE.NONE&&(0,a.inlineListItemElement)(g,w,l);var y="TEXTAREA"!==g.tagName,v=h(w,g);if(v||d(w)){var m=v||w.isPositioned()?c.getRealParentStackingContext():c,b=new r.default(w,m,v);m.contexts.push(b),y&&e(g,w,b,l,f)}else c.children.push(w),y&&e(g,w,c,l,f)}}}else if(g instanceof B.SVGSVGElement||g instanceof SVGSVGElement||B.parent&&g instanceof B.parent.SVGSVGElement){var E=new i.default(g,n,l,f++),T=h(E,g);if(T||d(E)){var C=T||E.isPositioned()?c.getRealParentStackingContext():c,U=new r.default(E,C,T);C.contexts.push(U)}else c.children.push(E)}}},h=function(e,t){return e.isRootElement()||e.isPositionedWithZIndex()||e.style.opacity<1||e.isTransformed()||f(e,t)},d=function(e){return e.isPositioned()||e.isFloating()},f=function(e,t){return"BODY"===t.nodeName&&e.parent instanceof i.default&&e.parent.style.background.backgroundColor.isTransparent()}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(17);(r=o)&&r.__esModule,n(87);var A=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.container=t,this.parent=n,this.contexts=[],this.children=[],this.treatAsRealStackingContext=r}return i(e,[{key:"getOpacity",value:function(){return this.parent?this.container.style.opacity*this.parent.getOpacity():this.container.style.opacity}},{key:"getRealParentStackingContext",value:function(){return!this.parent||this.treatAsRealStackingContext?this:this.parent.getRealParentStackingContext()}}]),e}();t.default=A},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.width=t,this.height=n}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(35),A=n(36),a=(r=A)&&r.__esModule?r:{default:r};var s=function(e,t,n){return new a.default(e.x+(t.x-e.x)*n,e.y+(t.y-e.y)*n)},c=function(){function e(t,n,r,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.type=o.PATH.BEZIER_CURVE,this.start=t,this.startControl=n,this.endControl=r,this.end=i}return i(e,[{key:"subdivide",value:function(t,n){var r=s(this.start,this.startControl,t),i=s(this.startControl,this.endControl,t),o=s(this.endControl,this.end,t),A=s(r,i,t),a=s(i,o,t),c=s(A,a,t);return n?new e(this.start,r,A,c):new e(c,a,o,this.end)}},{key:"reverse",value:function(){return new e(this.end,this.endControl,this.startControl,this.start)}}]),e}();t.default=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseBorderRadius=void 0;var r,i=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var A,a=e[Symbol.iterator]();!(r=(A=a.next()).done)&&(n.push(A.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{!r&&a.return&&a.return()}finally{if(i)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},o=n(14),A=(r=o)&&r.__esModule?r:{default:r};var a=["top-left","top-right","bottom-right","bottom-left"];t.parseBorderRadius=function(e){return a.map(function(t){var n=e.getPropertyValue("border-"+t+"-radius").split(" ").map(A.default.create),r=i(n,2),o=r[0],a=r[1];return void 0===a?[o,o]:[o,a]})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=t.DISPLAY={NONE:1,BLOCK:2,INLINE:4,RUN_IN:8,FLOW:16,FLOW_ROOT:32,TABLE:64,FLEX:128,GRID:256,RUBY:512,SUBGRID:1024,LIST_ITEM:2048,TABLE_ROW_GROUP:4096,TABLE_HEADER_GROUP:8192,TABLE_FOOTER_GROUP:16384,TABLE_ROW:32768,TABLE_CELL:65536,TABLE_COLUMN_GROUP:1<<17,TABLE_COLUMN:1<<18,TABLE_CAPTION:1<<19,RUBY_BASE:1<<20,RUBY_TEXT:1<<21,RUBY_BASE_CONTAINER:1<<22,RUBY_TEXT_CONTAINER:1<<23,CONTENTS:1<<24,INLINE_BLOCK:1<<25,INLINE_LIST_ITEM:1<<26,INLINE_TABLE:1<<27,INLINE_FLEX:1<<28,INLINE_GRID:1<<29},i=function(e,t){return e|function(e){switch(e){case"block":return r.BLOCK;case"inline":return r.INLINE;case"run-in":return r.RUN_IN;case"flow":return r.FLOW;case"flow-root":return r.FLOW_ROOT;case"table":return r.TABLE;case"flex":return r.FLEX;case"grid":return r.GRID;case"ruby":return r.RUBY;case"subgrid":return r.SUBGRID;case"list-item":return r.LIST_ITEM;case"table-row-group":return r.TABLE_ROW_GROUP;case"table-header-group":return r.TABLE_HEADER_GROUP;case"table-footer-group":return r.TABLE_FOOTER_GROUP;case"table-row":return r.TABLE_ROW;case"table-cell":return r.TABLE_CELL;case"table-column-group":return r.TABLE_COLUMN_GROUP;case"table-column":return r.TABLE_COLUMN;case"table-caption":return r.TABLE_CAPTION;case"ruby-base":return r.RUBY_BASE;case"ruby-text":return r.RUBY_TEXT;case"ruby-base-container":return r.RUBY_BASE_CONTAINER;case"ruby-text-container":return r.RUBY_TEXT_CONTAINER;case"contents":return r.CONTENTS;case"inline-block":return r.INLINE_BLOCK;case"inline-list-item":return r.INLINE_LIST_ITEM;case"inline-table":return r.INLINE_TABLE;case"inline-flex":return r.INLINE_FLEX;case"inline-grid":return r.INLINE_GRID}return r.NONE}(t)};t.parseDisplay=function(e){return e.split(" ").reduce(i,0)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=t.FLOAT={NONE:0,LEFT:1,RIGHT:2,INLINE_START:3,INLINE_END:4};t.parseCSSFloat=function(e){switch(e){case"left":return r.LEFT;case"right":return r.RIGHT;case"inline-start":return r.INLINE_START;case"inline-end":return r.INLINE_END}return r.NONE}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.parseFont=function(e){return{fontFamily:e.fontFamily,fontSize:e.fontSize,fontStyle:e.fontStyle,fontVariant:e.fontVariant,fontWeight:function(e){switch(e){case"normal":return 400;case"bold":return 700}var t=parseInt(e,10);return isNaN(t)?400:t}(e.fontWeight)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.parseLetterSpacing=function(e){if("normal"===e)return 0;var t=parseFloat(e);return isNaN(t)?0:t}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=t.LINE_BREAK={NORMAL:"normal",STRICT:"strict"};t.parseLineBreak=function(e){switch(e){case"strict":return r.STRICT;case"normal":default:return r.NORMAL}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseMargin=void 0;var r,i=n(14),o=(r=i)&&r.__esModule?r:{default:r};var A=["top","right","bottom","left"];t.parseMargin=function(e){return A.map(function(t){return new o.default(e.getPropertyValue("margin-"+t))})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=t.OVERFLOW={VISIBLE:0,HIDDEN:1,SCROLL:2,AUTO:3};t.parseOverflow=function(e){switch(e){case"hidden":return r.HIDDEN;case"scroll":return r.SCROLL;case"auto":return r.AUTO;case"visible":default:return r.VISIBLE}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseTextShadow=void 0;var r,i=n(12),o=(r=i)&&r.__esModule?r:{default:r};var A=/^([+-]|\d|\.)$/i;t.parseTextShadow=function(e){if("none"===e||"string"!=typeof e)return null;for(var t="",n=!1,r=[],i=[],a=0,s=null,c=function(){t.length&&(n?r.push(parseFloat(t)):s=new o.default(t)),n=!1,t=""},u=function(){r.length&&null!==s&&i.push({color:s,offsetX:r[0]||0,offsetY:r[1]||0,blur:r[2]||0}),r.splice(0,r.length),s=null},l=0;l<e.length;l++){var h=e[l];switch(h){case"(":t+=h,a++;break;case")":t+=h,a--;break;case",":0===a?(c(),u()):t+=h;break;case" ":0===a?c():t+=h;break;default:0===t.length&&A.test(h)&&(n=!0),t+=h}}return c(),u(),0===i.length?null:i}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseTransform=void 0;var r,i=n(14),o=(r=i)&&r.__esModule?r:{default:r};var A=function(e){return parseFloat(e.trim())},a=/(matrix|matrix3d)\((.+)\)/,s=(t.parseTransform=function(e){var t=c(e.transform||e.webkitTransform||e.mozTransform||e.msTransform||e.oTransform);return null===t?null:{transform:t,transformOrigin:s(e.transformOrigin||e.webkitTransformOrigin||e.mozTransformOrigin||e.msTransformOrigin||e.oTransformOrigin)}},function(e){if("string"!=typeof e){var t=new o.default("0");return[t,t]}var n=e.split(" ").map(o.default.create);return[n[0],n[1]]}),c=function(e){if("none"===e||"string"!=typeof e)return null;var t=e.match(a);if(t){if("matrix"===t[1]){var n=t[2].split(",").map(A);return[n[0],n[1],n[2],n[3],n[4],n[5]]}var r=t[2].split(",").map(A);return[r[0],r[1],r[4],r[5],r[12],r[13]]}return null}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=t.VISIBILITY={VISIBLE:0,HIDDEN:1,COLLAPSE:2};t.parseVisibility=function(e){switch(e){case"hidden":return r.HIDDEN;case"collapse":return r.COLLAPSE;case"visible":default:return r.VISIBLE}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=t.WORD_BREAK={NORMAL:"normal",BREAK_ALL:"break-all",KEEP_ALL:"keep-all"};t.parseWordBreak=function(e){switch(e){case"break-all":return r.BREAK_ALL;case"keep-all":return r.KEEP_ALL;case"normal":default:return r.NORMAL}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.parseZIndex=function(e){var t="auto"===e;return{auto:t,order:t?0:parseInt(e,10)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(54);Object.defineProperty(t,"toCodePoints",{enumerable:!0,get:function(){return r.toCodePoints}}),Object.defineProperty(t,"fromCodePoint",{enumerable:!0,get:function(){return r.fromCodePoint}});var i=n(164);Object.defineProperty(t,"LineBreaker",{enumerable:!0,get:function(){return i.LineBreaker}})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LineBreaker=t.inlineBreakOpportunities=t.lineBreakAtIndex=t.codePointsToCharacterClasses=t.UnicodeTrie=t.BREAK_ALLOWED=t.BREAK_NOT_ALLOWED=t.BREAK_MANDATORY=t.classes=t.LETTER_NUMBER_MODIFIER=void 0;var r,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var A,a=e[Symbol.iterator]();!(r=(A=a.next()).done)&&(n.push(A.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{!r&&a.return&&a.return()}finally{if(i)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},A=n(165),a=n(166),s=(r=a)&&r.__esModule?r:{default:r},c=n(54);var u=t.LETTER_NUMBER_MODIFIER=50,l=10,h=13,d=15,f=17,p=18,g=19,B=20,w=21,y=22,v=24,m=25,b=26,E=27,T=28,C=30,U=32,_=33,Q=34,F=35,x=37,I=38,S=39,O=40,M=42,R=(t.classes={BK:1,CR:2,LF:3,CM:4,NL:5,SG:6,WJ:7,ZW:8,GL:9,SP:l,ZWJ:11,B2:12,BA:h,BB:14,HY:d,CB:16,CL:f,CP:p,EX:g,IN:B,NS:w,OP:y,QU:23,IS:v,NU:m,PO:b,PR:E,SY:T,AI:29,AL:C,CJ:31,EB:U,EM:_,H2:Q,H3:F,HL:36,ID:x,JL:I,JV:S,JT:O,RI:41,SA:M,XX:43},t.BREAK_MANDATORY="!"),N=t.BREAK_NOT_ALLOWED="×",P=t.BREAK_ALLOWED="÷",L=t.UnicodeTrie=(0,A.createTrieFromBase64)(s.default),H=[C,36],D=[1,2,3,5],k=[l,8],z=[E,b],K=D.concat(k),G=[I,S,O,Q,F],V=[d,h],j=t.codePointsToCharacterClasses=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"strict",n=[],r=[],i=[];return e.forEach(function(e,o){var A=L.get(e);if(A>u?(i.push(!0),A-=u):i.push(!1),-1!==["normal","auto","loose"].indexOf(t)&&-1!==[8208,8211,12316,12448].indexOf(e))return r.push(o),n.push(16);if(4===A||11===A){if(0===o)return r.push(o),n.push(C);var a=n[o-1];return-1===K.indexOf(a)?(r.push(r[o-1]),n.push(a)):(r.push(o),n.push(C))}return r.push(o),31===A?n.push("strict"===t?w:x):A===M?n.push(C):29===A?n.push(C):43===A?e>=131072&&e<=196605||e>=196608&&e<=262141?n.push(x):n.push(C):void n.push(A)}),[r,n,i]},X=function(e,t,n,r){var i=r[n];if(Array.isArray(e)?-1!==e.indexOf(i):e===i)for(var o=n;o<=r.length;){var A=r[++o];if(A===t)return!0;if(A!==l)break}if(i===l)for(var a=n;a>0;){var s=r[--a];if(Array.isArray(e)?-1!==e.indexOf(s):e===s)for(var c=n;c<=r.length;){var u=r[++c];if(u===t)return!0;if(u!==l)break}if(s!==l)break}return!1},W=function(e,t){for(var n=e;n>=0;){var r=t[n];if(r!==l)return r;n--}return 0},Y=function(e,t,n,r,i){if(0===n[r])return N;var o=r-1;if(Array.isArray(i)&&!0===i[o])return N;var A=o-1,a=o+1,s=t[o],c=A>=0?t[A]:0,u=t[a];if(2===s&&3===u)return N;if(-1!==D.indexOf(s))return R;if(-1!==D.indexOf(u))return N;if(-1!==k.indexOf(u))return N;if(8===W(o,t))return P;if(11===L.get(e[o])&&(u===x||u===U||u===_))return N;if(7===s||7===u)return N;if(9===s)return N;if(-1===[l,h,d].indexOf(s)&&9===u)return N;if(-1!==[f,p,g,v,T].indexOf(u))return N;if(W(o,t)===y)return N;if(X(23,y,o,t))return N;if(X([f,p],w,o,t))return N;if(X(12,12,o,t))return N;if(s===l)return P;if(23===s||23===u)return N;if(16===u||16===s)return P;if(-1!==[h,d,w].indexOf(u)||14===s)return N;if(36===c&&-1!==V.indexOf(s))return N;if(s===T&&36===u)return N;if(u===B&&-1!==H.concat(B,g,m,x,U,_).indexOf(s))return N;if(-1!==H.indexOf(u)&&s===m||-1!==H.indexOf(s)&&u===m)return N;if(s===E&&-1!==[x,U,_].indexOf(u)||-1!==[x,U,_].indexOf(s)&&u===b)return N;if(-1!==H.indexOf(s)&&-1!==z.indexOf(u)||-1!==z.indexOf(s)&&-1!==H.indexOf(u))return N;if(-1!==[E,b].indexOf(s)&&(u===m||-1!==[y,d].indexOf(u)&&t[a+1]===m)||-1!==[y,d].indexOf(s)&&u===m||s===m&&-1!==[m,T,v].indexOf(u))return N;if(-1!==[m,T,v,f,p].indexOf(u))for(var C=o;C>=0;){var M=t[C];if(M===m)return N;if(-1===[T,v].indexOf(M))break;C--}if(-1!==[E,b].indexOf(u))for(var K=-1!==[f,p].indexOf(s)?A:o;K>=0;){var j=t[K];if(j===m)return N;if(-1===[T,v].indexOf(j))break;K--}if(I===s&&-1!==[I,S,Q,F].indexOf(u)||-1!==[S,Q].indexOf(s)&&-1!==[S,O].indexOf(u)||-1!==[O,F].indexOf(s)&&u===O)return N;if(-1!==G.indexOf(s)&&-1!==[B,b].indexOf(u)||-1!==G.indexOf(u)&&s===E)return N;if(-1!==H.indexOf(s)&&-1!==H.indexOf(u))return N;if(s===v&&-1!==H.indexOf(u))return N;if(-1!==H.concat(m).indexOf(s)&&u===y||-1!==H.concat(m).indexOf(u)&&s===p)return N;if(41===s&&41===u){for(var Y=n[o],J=1;Y>0&&41===t[--Y];)J++;if(J%2!=0)return N}return s===U&&u===_?N:P},J=(t.lineBreakAtIndex=function(e,t){if(0===t)return N;if(t>=e.length)return R;var n=j(e),r=o(n,2),i=r[0],A=r[1];return Y(e,A,i,t)},function(e,t){t||(t={lineBreak:"normal",wordBreak:"normal"});var n=j(e,t.lineBreak),r=o(n,3),i=r[0],A=r[1],a=r[2];return"break-all"!==t.wordBreak&&"break-word"!==t.wordBreak||(A=A.map(function(e){return-1!==[m,C,M].indexOf(e)?x:e})),[i,A,"keep-all"===t.wordBreak?a.map(function(t,n){return t&&e[n]>=19968&&e[n]<=40959}):null]}),q=(t.inlineBreakOpportunities=function(e,t){var n=(0,c.toCodePoints)(e),r=N,i=J(n,t),A=o(i,3),a=A[0],s=A[1],u=A[2];return n.forEach(function(e,t){r+=(0,c.fromCodePoint)(e)+(t>=n.length-1?R:Y(n,s,a,t+1,u))}),r},function(){function e(t,n,r,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._codePoints=t,this.required=n===R,this.start=r,this.end=i}return i(e,[{key:"slice",value:function(){return c.fromCodePoint.apply(void 0,function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(this._codePoints.slice(this.start,this.end)))}}]),e}());t.LineBreaker=function(e,t){var n=(0,c.toCodePoints)(e),r=J(n,t),i=o(r,3),A=i[0],a=i[1],s=i[2],u=n.length,l=0,h=0;return{next:function(){if(h>=u)return{done:!0};for(var e=N;h<u&&(e=Y(n,a,A,++h,s))===N;);if(e!==N||h===u){var t=new q(n,e,l,h);return l=h,{value:t,done:!1}}return{done:!0}}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Trie=t.createTrieFromBase64=t.UTRIE2_INDEX_2_MASK=t.UTRIE2_INDEX_2_BLOCK_LENGTH=t.UTRIE2_OMITTED_BMP_INDEX_1_LENGTH=t.UTRIE2_INDEX_1_OFFSET=t.UTRIE2_UTF8_2B_INDEX_2_LENGTH=t.UTRIE2_UTF8_2B_INDEX_2_OFFSET=t.UTRIE2_INDEX_2_BMP_LENGTH=t.UTRIE2_LSCP_INDEX_2_LENGTH=t.UTRIE2_DATA_MASK=t.UTRIE2_DATA_BLOCK_LENGTH=t.UTRIE2_LSCP_INDEX_2_OFFSET=t.UTRIE2_SHIFT_1_2=t.UTRIE2_INDEX_SHIFT=t.UTRIE2_SHIFT_1=t.UTRIE2_SHIFT_2=void 0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(54);var o=t.UTRIE2_SHIFT_2=5,A=t.UTRIE2_SHIFT_1=11,a=t.UTRIE2_INDEX_SHIFT=2,s=t.UTRIE2_SHIFT_1_2=A-o,c=t.UTRIE2_LSCP_INDEX_2_OFFSET=65536>>o,u=t.UTRIE2_DATA_BLOCK_LENGTH=1<<o,l=t.UTRIE2_DATA_MASK=u-1,h=t.UTRIE2_LSCP_INDEX_2_LENGTH=1024>>o,d=t.UTRIE2_INDEX_2_BMP_LENGTH=c+h,f=t.UTRIE2_UTF8_2B_INDEX_2_OFFSET=d,p=t.UTRIE2_UTF8_2B_INDEX_2_LENGTH=32,g=t.UTRIE2_INDEX_1_OFFSET=f+p,B=t.UTRIE2_OMITTED_BMP_INDEX_1_LENGTH=65536>>A,w=t.UTRIE2_INDEX_2_BLOCK_LENGTH=1<<s,y=t.UTRIE2_INDEX_2_MASK=w-1,v=(t.createTrieFromBase64=function(e){var t=(0,i.decode)(e),n=Array.isArray(t)?(0,i.polyUint32Array)(t):new Uint32Array(t),r=Array.isArray(t)?(0,i.polyUint16Array)(t):new Uint16Array(t),o=r.slice(12,n[4]/2),A=2===n[5]?r.slice((24+n[4])/2):n.slice(Math.ceil((24+n[4])/4));return new v(n[0],n[1],n[2],n[3],o,A)},t.Trie=function(){function e(t,n,r,i,o,A){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.initialValue=t,this.errorValue=n,this.highStart=r,this.highValueIndex=i,this.index=o,this.data=A}return r(e,[{key:"get",value:function(e){var t=void 0;if(e>=0){if(e<55296||e>56319&&e<=65535)return t=((t=this.index[e>>o])<<a)+(e&l),this.data[t];if(e<=65535)return t=((t=this.index[c+(e-55296>>o)])<<a)+(e&l),this.data[t];if(e<this.highStart)return t=g-B+(e>>A),t=this.index[t],t+=e>>o&y,t=((t=this.index[t])<<a)+(e&l),this.data[t];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue}}]),e}())},function(e,t,n){"use strict";e.exports="KwAAAAAAAAAACA4AIDoAAPAfAAACAAAAAAAIABAAGABAAEgAUABYAF4AZgBeAGYAYABoAHAAeABeAGYAfACEAIAAiACQAJgAoACoAK0AtQC9AMUAXgBmAF4AZgBeAGYAzQDVAF4AZgDRANkA3gDmAOwA9AD8AAQBDAEUARoBIgGAAIgAJwEvATcBPwFFAU0BTAFUAVwBZAFsAXMBewGDATAAiwGTAZsBogGkAawBtAG8AcIBygHSAdoB4AHoAfAB+AH+AQYCDgIWAv4BHgImAi4CNgI+AkUCTQJTAlsCYwJrAnECeQKBAk0CiQKRApkCoQKoArACuALAAsQCzAIwANQC3ALkAjAA7AL0AvwCAQMJAxADGAMwACADJgMuAzYDPgOAAEYDSgNSA1IDUgNaA1oDYANiA2IDgACAAGoDgAByA3YDfgOAAIQDgACKA5IDmgOAAIAAogOqA4AAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAK8DtwOAAIAAvwPHA88D1wPfAyAD5wPsA/QD/AOAAIAABAQMBBIEgAAWBB4EJgQuBDMEIAM7BEEEXgBJBCADUQRZBGEEaQQwADAAcQQ+AXkEgQSJBJEEgACYBIAAoASoBK8EtwQwAL8ExQSAAIAAgACAAIAAgACgAM0EXgBeAF4AXgBeAF4AXgBeANUEXgDZBOEEXgDpBPEE+QQBBQkFEQUZBSEFKQUxBTUFPQVFBUwFVAVcBV4AYwVeAGsFcwV7BYMFiwWSBV4AmgWgBacFXgBeAF4AXgBeAKsFXgCyBbEFugW7BcIFwgXIBcIFwgXQBdQF3AXkBesF8wX7BQMGCwYTBhsGIwYrBjMGOwZeAD8GRwZNBl4AVAZbBl4AXgBeAF4AXgBeAF4AXgBeAF4AXgBeAGMGXgBqBnEGXgBeAF4AXgBeAF4AXgBeAF4AXgB5BoAG4wSGBo4GkwaAAIADHgR5AF4AXgBeAJsGgABGA4AAowarBrMGswagALsGwwbLBjAA0wbaBtoG3QbaBtoG2gbaBtoG2gblBusG8wb7BgMHCwcTBxsHCwcjBysHMAc1BzUHOgdCB9oGSgdSB1oHYAfaBloHaAfaBlIH2gbaBtoG2gbaBtoG2gbaBjUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHbQdeAF4ANQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQd1B30HNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1B4MH2gaKB68EgACAAIAAgACAAIAAgACAAI8HlwdeAJ8HpweAAIAArwe3B14AXgC/B8UHygcwANAH2AfgB4AA6AfwBz4B+AcACFwBCAgPCBcIogEYAR8IJwiAAC8INwg/CCADRwhPCFcIXwhnCEoDGgSAAIAAgABvCHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIhAiLCI4IMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAANQc1BzUHNQc1BzUHNQc1BzUHNQc1B54INQc1B6II2gaqCLIIugiAAIAAvgjGCIAAgACAAIAAgACAAIAAgACAAIAAywiHAYAA0wiAANkI3QjlCO0I9Aj8CIAAgACAAAIJCgkSCRoJIgknCTYHLwk3CZYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiAAIAAAAFAAXgBeAGAAcABeAHwAQACQAKAArQC9AJ4AXgBeAE0A3gBRAN4A7AD8AMwBGgEAAKcBNwEFAUwBXAF4QkhCmEKnArcCgAHHAsABz4LAAcABwAHAAd+C6ABoAG+C/4LAAcABwAHAAc+DF4MAAcAB54M3gweDV4Nng3eDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEeDqABVg6WDqABoQ6gAaABoAHXDvcONw/3DvcO9w73DvcO9w73DvcO9w73DvcO9w73DvcO9w73DvcO9w73DvcO9w73DvcO9w73DvcO9w73DvcO9w73DncPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB7cPPwlGCU4JMACAAIAAgABWCV4JYQmAAGkJcAl4CXwJgAkwADAAMAAwAIgJgACLCZMJgACZCZ8JowmrCYAAswkwAF4AXgB8AIAAuwkABMMJyQmAAM4JgADVCTAAMAAwADAAgACAAIAAgACAAIAAgACAAIAAqwYWBNkIMAAwADAAMADdCeAJ6AnuCR4E9gkwAP4JBQoNCjAAMACAABUK0wiAAB0KJAosCjQKgAAwADwKQwqAAEsKvQmdCVMKWwowADAAgACAALcEMACAAGMKgABrCjAAMAAwADAAMAAwADAAMAAwADAAMAAeBDAAMAAwADAAMAAwADAAMAAwADAAMAAwAIkEPQFzCnoKiQSCCooKkAqJBJgKoAqkCokEGAGsCrQKvArBCjAAMADJCtEKFQHZCuEK/gHpCvEKMAAwADAAMACAAIwE+QowAIAAPwEBCzAAMAAwADAAMACAAAkLEQswAIAAPwEZCyELgAAOCCkLMAAxCzkLMAAwADAAMAAwADAAXgBeAEELMAAwADAAMAAwADAAMAAwAEkLTQtVC4AAXAtkC4AAiQkwADAAMAAwADAAMAAwADAAbAtxC3kLgAuFC4sLMAAwAJMLlwufCzAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAApwswADAAMACAAIAAgACvC4AAgACAAIAAgACAALcLMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAvwuAAMcLgACAAIAAgACAAIAAyguAAIAAgACAAIAA0QswADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAANkLgACAAIAA4AswADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACJCR4E6AswADAAhwHwC4AA+AsADAgMEAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMACAAIAAGAwdDCUMMAAwAC0MNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQw1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHPQwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADUHNQc1BzUHNQc1BzUHNQc2BzAAMAA5DDUHNQc1BzUHNQc1BzUHNQc1BzUHNQdFDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAgACAAIAATQxSDFoMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAF4AXgBeAF4AXgBeAF4AYgxeAGoMXgBxDHkMfwxeAIUMXgBeAI0MMAAwADAAMAAwAF4AXgCVDJ0MMAAwADAAMABeAF4ApQxeAKsMswy7DF4Awgy9DMoMXgBeAF4AXgBeAF4AXgBeAF4AXgDRDNkMeQBqCeAM3Ax8AOYM7Az0DPgMXgBeAF4AXgBeAF4AXgBeAF4AXgBeAF4AXgBeAF4AXgCgAAANoAAHDQ4NFg0wADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAeDSYNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIAAgACAAIAAgACAAC4NMABeAF4ANg0wADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAD4NRg1ODVYNXg1mDTAAbQ0wADAAMAAwADAAMAAwADAA2gbaBtoG2gbaBtoG2gbaBnUNeg3CBYANwgWFDdoGjA3aBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gaUDZwNpA2oDdoG2gawDbcNvw3HDdoG2gbPDdYN3A3fDeYN2gbsDfMN2gbaBvoN/g3aBgYODg7aBl4AXgBeABYOXgBeACUG2gYeDl4AJA5eACwO2w3aBtoGMQ45DtoG2gbaBtoGQQ7aBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gZJDjUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1B1EO2gY1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQdZDjUHNQc1BzUHNQc1B2EONQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHaA41BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1B3AO2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gY1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1B2EO2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gZJDtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBkkOeA6gAKAAoAAwADAAMAAwAKAAoACgAKAAoACgAKAAgA4wADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAD//wQABAAEAAQABAAEAAQABAAEAA0AAwABAAEAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAKABMAFwAeABsAGgAeABcAFgASAB4AGwAYAA8AGAAcAEsASwBLAEsASwBLAEsASwBLAEsAGAAYAB4AHgAeABMAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAFgAbABIAHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYADQARAB4ABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkAFgAaABsAGwAbAB4AHQAdAB4ATwAXAB4ADQAeAB4AGgAbAE8ATwAOAFAAHQAdAB0ATwBPABcATwBPAE8AFgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwArAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAAQABAANAA0ASwBLAEsASwBLAEsASwBLAEsASwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUAArACsABABQAAQABAAEAAQABAAEAAQAKwArAAQABAArACsABAAEAAQAUAArACsAKwArACsAKwArACsABAArACsAKwArAFAAUAArAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAGgAaAFAAUABQAFAAUABMAB4AGwBQAB4AKwArACsABAAEAAQAKwBQAFAAUABQAFAAUAArACsAKwArAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUAArAFAAUAArACsABAArAAQABAAEAAQABAArACsAKwArAAQABAArACsABAAEAAQAKwArACsABAArACsAKwArACsAKwArAFAAUABQAFAAKwBQACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwAEAAQAUABQAFAABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUAArACsABABQAAQABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQAKwArAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwAeABsAKwArACsAKwArACsAKwBQAAQABAAEAAQABAAEACsABAAEAAQAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwArAAQABAArACsABAAEAAQAKwArACsAKwArACsAKwArAAQABAArACsAKwArAFAAUAArAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwAeAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwAEAFAAKwBQAFAAUABQAFAAUAArACsAKwBQAFAAUAArAFAAUABQAFAAKwArACsAUABQACsAUAArAFAAUAArACsAKwBQAFAAKwArACsAUABQAFAAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQAKwArACsABAAEAAQAKwAEAAQABAAEACsAKwBQACsAKwArACsAKwArAAQAKwArACsAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAB4AHgAeAB4AHgAeABsAHgArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABAArACsAKwArACsAKwArAAQABAArAFAAUABQACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAB4AUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABAArACsAKwArACsAKwArAAQABAArACsAKwArACsAKwArAFAAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwArAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAKwBcAFwAKwBcACsAKwBcACsAKwArACsAKwArAFwAXABcAFwAKwBcAFwAXABcAFwAXABcACsAXABcAFwAKwBcACsAXAArACsAXABcACsAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgArACoAKgBcACsAKwBcAFwAXABcAFwAKwBcACsAKgAqACoAKgAqACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAFwAXABcAFwAUAAOAA4ADgAOAB4ADgAOAAkADgAOAA0ACQATABMAEwATABMACQAeABMAHgAeAB4ABAAEAB4AHgAeAB4AHgAeAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUAANAAQAHgAEAB4ABAAWABEAFgARAAQABABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAAQABAAEAAQABAANAAQABABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsADQANAB4AHgAeAB4AHgAeAAQAHgAeAB4AHgAeAB4AKwAeAB4ADgAOAA0ADgAeAB4AHgAeAB4ACQAJACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgAeAB4AHgBcAFwAXABcAFwAXAAqACoAKgAqAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAKgAqACoAKgAqACoAKgBcAFwAXAAqACoAKgAqAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAXAAqAEsASwBLAEsASwBLAEsASwBLAEsAKgAqACoAKgAqACoAUABQAFAAUABQAFAAKwBQACsAKwArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQACsAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwAEAAQABAAeAA0AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAEQArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAADQANAA0AUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAA0ADQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQACsABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoADQANABUAXAANAB4ADQAbAFwAKgArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAB4AHgATABMADQANAA4AHgATABMAHgAEAAQABAAJACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAUABQAFAAUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwAeACsAKwArABMAEwBLAEsASwBLAEsASwBLAEsASwBLAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwBcAFwAXABcAFwAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcACsAKwArACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwAeAB4AXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgArACsABABLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKgAqACoAKgAqACoAKgBcACoAKgAqACoAKgAqACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAUABQAFAAUABQAFAAUAArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4ADQANAA0ADQAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAHgAeAB4AHgBQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwANAA0ADQANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwBQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsABAAEAAQAHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAABABQAFAAUABQAAQABAAEAFAAUAAEAAQABAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAKwBQACsAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAKwArAB4AHgAeAB4AHgAeACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAUABQAFAAKwAeAB4AHgAeAB4AHgAeAA4AHgArAA0ADQANAA0ADQANAA0ACQANAA0ADQAIAAQACwAEAAQADQAJAA0ADQAMAB0AHQAeABcAFwAWABcAFwAXABYAFwAdAB0AHgAeABQAFAAUAA0AAQABAAQABAAEAAQABAAJABoAGgAaABoAGgAaABoAGgAeABcAFwAdABUAFQAeAB4AHgAeAB4AHgAYABYAEQAVABUAFQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgANAB4ADQANAA0ADQAeAA0ADQANAAcAHgAeAB4AHgArAAQABAAEAAQABAAEAAQABAAEAAQAUABQACsAKwBPAFAAUABQAFAAUAAeAB4AHgAWABEATwBQAE8ATwBPAE8AUABQAFAAUABQAB4AHgAeABYAEQArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAGwAbABsAGwAbABsAGwAaABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAaABsAGwAbABsAGgAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgBQABoAHgAdAB4AUAAeABoAHgAeAB4AHgAeAB4AHgAeAB4ATwAeAFAAGwAeAB4AUABQAFAAUABQAB4AHgAeAB0AHQAeAFAAHgBQAB4AUAAeAFAATwBQAFAAHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AUABQAFAAUABPAE8AUABQAFAAUABQAE8AUABQAE8AUABPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAE8ATwBPAE8ATwBPAE8ATwBPAE8AUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAATwAeAB4AKwArACsAKwAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB0AHQAeAB4AHgAdAB0AHgAeAB0AHgAeAB4AHQAeAB0AGwAbAB4AHQAeAB4AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB0AHgAdAB4AHQAdAB0AHQAdAB0AHgAdAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAdAB0AHQAdAB4AHgAdAB0AHgAeAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABQAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAlACUAHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBQAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAeAB4AHgAeAB0AHQAeAB4AHgAeAB0AHQAdAB4AHgAdAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB0AHQAeAB4AHQAeAB4AHgAeAB0AHQAeAB4AHgAeACUAJQAdAB0AJQAeACUAJQAlACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAHgAeAB4AHgAdAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHQAdAB0AHgAdACUAHQAdAB4AHQAdAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHQAdAB0AHQAlAB4AJQAlACUAHQAlACUAHQAdAB0AJQAlAB0AHQAlAB0AHQAlACUAJQAeAB0AHgAeAB4AHgAdAB0AJQAdAB0AHQAdAB0AHQAlACUAJQAlACUAHQAlACUAIAAlAB0AHQAlACUAJQAlACUAJQAlACUAHgAeAB4AJQAlACAAIAAgACAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeABcAFwAXABcAFwAXAB4AEwATACUAHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwArACUAJQBXAFcAVwBXACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAKwArACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAE8ATwBPAE8ATwBPAE8ATwAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeACsAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUAArACsAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQBQAFAAUABQACsAKwArACsAUABQAFAAUABQAFAAUABQAA0AUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQACsAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgBQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAABAAEAAQAKwAEAAQAKwArACsAKwArAAQABAAEAAQAUABQAFAAUAArAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsABAAEAAQAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsADQANAA0ADQANAA0ADQANAB4AKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AUABQAFAAUABQAFAAUABQAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAUABQAFAAUABQAA0ADQANAA0ADQANABQAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwANAA0ADQANAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAeAAQABAAEAB4AKwArAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLACsADQArAB4AKwArAAQABAAEAAQAUABQAB4AUAArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwAEAAQABAAEAAQABAAEAAQABAAOAA0ADQATABMAHgAeAB4ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0AUABQAFAAUAAEAAQAKwArAAQADQANAB4AUAArACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXABcAA0ADQANACoASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUAArACsAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANACsADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEcARwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQACsAKwAeAAQABAANAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAEAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUAArACsAUAArACsAUABQACsAKwBQAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AKwArAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAeAB4ADQANAA0ADQAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAArAAQABAArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAEAAQABAAEAAQABAAEACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAFgAWAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAKwBQACsAKwArACsAKwArAFAAKwArACsAKwBQACsAUAArAFAAKwBQAFAAUAArAFAAUAArAFAAKwArAFAAKwBQACsAUAArAFAAKwBQACsAUABQACsAUAArACsAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAUABQAFAAUAArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUAArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAlACUAJQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeACUAJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeACUAJQAlACUAJQAeACUAJQAlACUAJQAgACAAIAAlACUAIAAlACUAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAIQAhACEAIQAhACUAJQAgACAAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAIAAgACAAIAAlACUAJQAlACAAJQAgACAAIAAgACAAIAAgACAAIAAlACUAJQAgACUAJQAlACUAIAAgACAAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeACUAHgAlAB4AJQAlACUAJQAlACAAJQAlACUAJQAeACUAHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAIAAgACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAIAAlACUAJQAlACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAIAAgACAAJQAlACUAIAAgACAAIAAgAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFwAXABcAFQAVABUAHgAeAB4AHgAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAIAAgACAAJQAlACUAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAlACAAIAAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsA"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(35);t.default=function e(t,n,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.type=r.PATH.CIRCLE,this.x=t,this.y=n,this.radius=i}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var A,a=e[Symbol.iterator]();!(r=(A=a.next()).done)&&(n.push(A.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{!r&&a.return&&a.return()}finally{if(i)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),A=n(13),a=(n(93),n(169)),s=n(38),c=(r=s)&&r.__esModule?r:{default:r},u=n(26),l=n(53);var h=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.target=t,this.options=n,t.render(n)}return o(e,[{key:"renderNode",value:function(e){e.isVisible()&&(this.renderNodeBackgroundAndBorders(e),this.renderNodeContent(e))}},{key:"renderNodeContent",value:function(e){var t=this,n=function(){if(e.childNodes.length&&e.childNodes.forEach(function(n){if(n instanceof c.default){var r=n.parent.style;t.target.renderTextNode(n.bounds,r.color,r.font,r.textDecoration,r.textShadow)}else t.target.drawShape(n,e.style.color)}),e.image){var n=t.options.imageStore.get(e.image);if(n){var r=(0,A.calculateContentBox)(e.bounds,e.style.padding,e.style.border),i="number"==typeof n.width&&n.width>0?n.width:r.width,o="number"==typeof n.height&&n.height>0?n.height:r.height;i>0&&o>0&&t.target.clip([(0,A.calculatePaddingBoxPath)(e.curvedBounds)],function(){t.target.drawImage(n,new A.Bounds(0,0,i,o),r)})}}},r=e.getClipPaths();r.length?this.target.clip(r,n):n()}},{key:"renderNodeBackgroundAndBorders",value:function(e){var t=this,n=!e.style.background.backgroundColor.isTransparent()||e.style.background.backgroundImage.length,r=e.style.border.some(function(e){return e.borderStyle!==l.BORDER_STYLE.NONE&&!e.borderColor.isTransparent()}),i=function(){var r=(0,u.calculateBackgroungPaintingArea)(e.curvedBounds,e.style.background.backgroundClip);n&&t.target.clip([r],function(){e.style.background.backgroundColor.isTransparent()||t.target.fill(e.style.background.backgroundColor),t.renderBackgroundImage(e)}),e.style.border.forEach(function(n,r){n.borderStyle===l.BORDER_STYLE.NONE||n.borderColor.isTransparent()||t.renderBorder(n,r,e.curvedBounds)})};if(n||r){var o=e.parent?e.parent.getClipPaths():[];o.length?this.target.clip(o,i):i()}}},{key:"renderBackgroundImage",value:function(e){var t=this;e.style.background.backgroundImage.slice(0).reverse().forEach(function(n){"url"===n.source.method&&n.source.args.length?t.renderBackgroundRepeat(e,n):/gradient/i.test(n.source.method)&&t.renderBackgroundGradient(e,n)})}},{key:"renderBackgroundRepeat",value:function(e,t){var n=this.options.imageStore.get(t.source.args[0]);if(n){var r=(0,u.calculateBackgroungPositioningArea)(e.style.background.backgroundOrigin,e.bounds,e.style.padding,e.style.border),i=(0,u.calculateBackgroundSize)(t,n,r),o=(0,u.calculateBackgroundPosition)(t.position,i,r),A=(0,u.calculateBackgroundRepeatPath)(t,o,i,r,e.bounds),a=Math.round(r.left+o.x),s=Math.round(r.top+o.y);this.target.renderRepeat(A,n,i,a,s)}}},{key:"renderBackgroundGradient",value:function(e,t){var n=(0,u.calculateBackgroungPositioningArea)(e.style.background.backgroundOrigin,e.bounds,e.style.padding,e.style.border),r=(0,u.calculateGradientBackgroundSize)(t,n),i=(0,u.calculateBackgroundPosition)(t.position,r,n),o=new A.Bounds(Math.round(n.left+i.x),Math.round(n.top+i.y),r.width,r.height),s=(0,a.parseGradient)(e,t.source,o);if(s)switch(s.type){case a.GRADIENT_TYPE.LINEAR_GRADIENT:this.target.renderLinearGradient(o,s);break;case a.GRADIENT_TYPE.RADIAL_GRADIENT:this.target.renderRadialGradient(o,s)}}},{key:"renderBorder",value:function(e,t,n){this.target.drawShape((0,A.parsePathForBorder)(n,t),e.borderColor)}},{key:"renderStack",value:function(e){var t=this;if(e.container.isVisible()){var n=e.getOpacity();n!==this._opacity&&(this.target.setOpacity(e.getOpacity()),this._opacity=n);var r=e.container.style.transform;null!==r?this.target.transform(e.container.bounds.left+r.transformOrigin[0].value,e.container.bounds.top+r.transformOrigin[1].value,r.transform,function(){return t.renderStackContent(e)}):this.renderStackContent(e)}}},{key:"renderStackContent",value:function(e){var t=f(e),n=i(t,5),r=n[0],o=n[1],A=n[2],a=n[3],s=n[4],c=d(e),u=i(c,2),l=u[0],h=u[1];this.renderNodeBackgroundAndBorders(e.container),r.sort(p).forEach(this.renderStack,this),this.renderNodeContent(e.container),h.forEach(this.renderNode,this),a.forEach(this.renderStack,this),s.forEach(this.renderStack,this),l.forEach(this.renderNode,this),o.forEach(this.renderStack,this),A.sort(p).forEach(this.renderStack,this)}},{key:"render",value:function(e){return this.options.backgroundColor&&this.target.rectangle(this.options.x,this.options.y,this.options.width,this.options.height,this.options.backgroundColor),this.renderStack(e),this.target.getTarget()}}]),e}();t.default=h;var d=function(e){for(var t=[],n=[],r=e.children.length,i=0;i<r;i++){var o=e.children[i];o.isInlineLevel()?t.push(o):n.push(o)}return[t,n]},f=function(e){for(var t=[],n=[],r=[],i=[],o=[],A=e.contexts.length,a=0;a<A;a++){var s=e.contexts[a];s.container.isPositioned()||s.container.style.opacity<1||s.container.isTransformed()?s.container.style.zIndex.order<0?t.push(s):s.container.style.zIndex.order>0?r.push(s):n.push(s):s.container.isFloating()?i.push(s):o.push(s)}return[t,n,r,i,o]},p=function(e,t){return e.container.style.zIndex.order>t.container.style.zIndex.order?1:e.container.style.zIndex.order<t.container.style.zIndex.order?-1:e.container.index>t.container.index?1:-1}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.transformWebkitRadialGradientArgs=t.parseGradient=t.RadialGradient=t.LinearGradient=t.RADIAL_GRADIENT_SHAPE=t.GRADIENT_TYPE=void 0;var r=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var A,a=e[Symbol.iterator]();!(r=(A=a.next()).done)&&(n.push(A.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{!r&&a.return&&a.return()}finally{if(i)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},i=(c(n(17)),n(170)),o=c(n(12)),A=n(14),a=c(A),s=n(18);function c(e){return e&&e.__esModule?e:{default:e}}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var l=/^(to )?(left|top|right|bottom)( (left|top|right|bottom))?$/i,h=/^([+-]?\d*\.?\d+)% ([+-]?\d*\.?\d+)%$/i,d=/(px)|%|( 0)$/i,f=/^(from|to|color-stop)\((?:([\d.]+)(%)?,\s*)?(.+?)\)$/i,p=/^\s*(circle|ellipse)?\s*((?:([\d.]+)(px|r?em|%)\s*(?:([\d.]+)(px|r?em|%))?)|closest-side|closest-corner|farthest-side|farthest-corner)?\s*(?:at\s*(?:(left|center|right)|([\d.]+)(px|r?em|%))\s+(?:(top|center|bottom)|([\d.]+)(px|r?em|%)))?(?:\s|$)/i,g=t.GRADIENT_TYPE={LINEAR_GRADIENT:0,RADIAL_GRADIENT:1},B=t.RADIAL_GRADIENT_SHAPE={CIRCLE:0,ELLIPSE:1},w={left:new a.default("0%"),top:new a.default("0%"),center:new a.default("50%"),right:new a.default("100%"),bottom:new a.default("100%")},y=t.LinearGradient=function e(t,n){u(this,e),this.type=g.LINEAR_GRADIENT,this.colorStops=t,this.direction=n},v=t.RadialGradient=function e(t,n,r,i){u(this,e),this.type=g.RADIAL_GRADIENT,this.colorStops=t,this.shape=n,this.center=r,this.radius=i},m=(t.parseGradient=function(e,t,n){var r=t.args,i=t.method,o=t.prefix;return"linear-gradient"===i?b(r,n,!!o):"gradient"===i&&"linear"===r[0]?b(["to bottom"].concat(I(r.slice(3))),n,!!o):"radial-gradient"===i?E(e,"-webkit-"===o?x(r):r,n):"gradient"===i&&"radial"===r[0]?E(e,I(x(r.slice(1))),n):void 0},function(e,t,n){for(var r=[],i=t;i<e.length;i++){var A=e[i],s=d.test(A),c=A.lastIndexOf(" "),u=new o.default(s?A.substring(0,c):A),l=s?new a.default(A.substring(c+1)):i===t?new a.default("0%"):i===e.length-1?new a.default("100%"):null;r.push({color:u,stop:l})}for(var h=r.map(function(e){var t=e.color,r=e.stop;return{color:t,stop:0===n?0:r?r.getAbsoluteValue(n)/n:null}}),f=h[0].stop,p=0;p<h.length;p++)if(null!==f){var g=h[p].stop;if(null===g){for(var B=p;null===h[B].stop;)B++;for(var w=B-p+1,y=(h[B].stop-f)/w;p<B;p++)f=h[p].stop=f+y}else f=g}return h}),b=function(e,t,n){var r=(0,i.parseAngle)(e[0]),o=l.test(e[0]),A=o||null!==r||h.test(e[0]),a=A?null!==r?T(n?r-.5*Math.PI:r,t):o?U(e[0],t):_(e[0],t):T(Math.PI,t),c=A?1:0,u=Math.min((0,s.distance)(Math.abs(a.x0)+Math.abs(a.x1),Math.abs(a.y0)+Math.abs(a.y1)),2*t.width,2*t.height);return new y(m(e,c,u),a)},E=function(e,t,n){var r=t[0].match(p),i=r&&("circle"===r[1]||void 0!==r[3]&&void 0===r[5])?B.CIRCLE:B.ELLIPSE,o={},a={};r&&(void 0!==r[3]&&(o.x=(0,A.calculateLengthFromValueWithUnit)(e,r[3],r[4]).getAbsoluteValue(n.width)),void 0!==r[5]&&(o.y=(0,A.calculateLengthFromValueWithUnit)(e,r[5],r[6]).getAbsoluteValue(n.height)),r[7]?a.x=w[r[7].toLowerCase()]:void 0!==r[8]&&(a.x=(0,A.calculateLengthFromValueWithUnit)(e,r[8],r[9])),r[10]?a.y=w[r[10].toLowerCase()]:void 0!==r[11]&&(a.y=(0,A.calculateLengthFromValueWithUnit)(e,r[11],r[12])));var s={x:void 0===a.x?n.width/2:a.x.getAbsoluteValue(n.width),y:void 0===a.y?n.height/2:a.y.getAbsoluteValue(n.height)},c=F(r&&r[2]||"farthest-corner",i,s,o,n);return new v(m(t,r?1:0,Math.min(c.x,c.y)),i,s,c)},T=function(e,t){var n=t.width,r=t.height,i=.5*n,o=.5*r,A=(Math.abs(n*Math.sin(e))+Math.abs(r*Math.cos(e)))/2,a=i+Math.sin(e)*A,s=o-Math.cos(e)*A;return{x0:a,x1:n-a,y0:s,y1:r-s}},C=function(e){return Math.acos(e.width/2/((0,s.distance)(e.width,e.height)/2))},U=function(e,t){switch(e){case"bottom":case"to top":return T(0,t);case"left":case"to right":return T(Math.PI/2,t);case"right":case"to left":return T(3*Math.PI/2,t);case"top right":case"right top":case"to bottom left":case"to left bottom":return T(Math.PI+C(t),t);case"top left":case"left top":case"to bottom right":case"to right bottom":return T(Math.PI-C(t),t);case"bottom left":case"left bottom":case"to top right":case"to right top":return T(C(t),t);case"bottom right":case"right bottom":case"to top left":case"to left top":return T(2*Math.PI-C(t),t);case"top":case"to bottom":default:return T(Math.PI,t)}},_=function(e,t){var n=e.split(" ").map(parseFloat),i=r(n,2),o=i[0],A=i[1],a=o/100*t.width/(A/100*t.height);return T(Math.atan(isNaN(a)?1:a)+Math.PI/2,t)},Q=function(e,t,n,r){return[{x:0,y:0},{x:0,y:e.height},{x:e.width,y:0},{x:e.width,y:e.height}].reduce(function(e,i){var o=(0,s.distance)(t-i.x,n-i.y);return(r?o<e.optimumDistance:o>e.optimumDistance)?{optimumCorner:i,optimumDistance:o}:e},{optimumDistance:r?1/0:-1/0,optimumCorner:null}).optimumCorner},F=function(e,t,n,r,i){var o=n.x,A=n.y,a=0,c=0;switch(e){case"closest-side":t===B.CIRCLE?a=c=Math.min(Math.abs(o),Math.abs(o-i.width),Math.abs(A),Math.abs(A-i.height)):t===B.ELLIPSE&&(a=Math.min(Math.abs(o),Math.abs(o-i.width)),c=Math.min(Math.abs(A),Math.abs(A-i.height)));break;case"closest-corner":if(t===B.CIRCLE)a=c=Math.min((0,s.distance)(o,A),(0,s.distance)(o,A-i.height),(0,s.distance)(o-i.width,A),(0,s.distance)(o-i.width,A-i.height));else if(t===B.ELLIPSE){var u=Math.min(Math.abs(A),Math.abs(A-i.height))/Math.min(Math.abs(o),Math.abs(o-i.width)),l=Q(i,o,A,!0);c=u*(a=(0,s.distance)(l.x-o,(l.y-A)/u))}break;case"farthest-side":t===B.CIRCLE?a=c=Math.max(Math.abs(o),Math.abs(o-i.width),Math.abs(A),Math.abs(A-i.height)):t===B.ELLIPSE&&(a=Math.max(Math.abs(o),Math.abs(o-i.width)),c=Math.max(Math.abs(A),Math.abs(A-i.height)));break;case"farthest-corner":if(t===B.CIRCLE)a=c=Math.max((0,s.distance)(o,A),(0,s.distance)(o,A-i.height),(0,s.distance)(o-i.width,A),(0,s.distance)(o-i.width,A-i.height));else if(t===B.ELLIPSE){var h=Math.max(Math.abs(A),Math.abs(A-i.height))/Math.max(Math.abs(o),Math.abs(o-i.width)),d=Q(i,o,A,!1);c=h*(a=(0,s.distance)(d.x-o,(d.y-A)/h))}break;default:a=r.x||0,c=void 0!==r.y?r.y:a}return{x:a,y:c}},x=t.transformWebkitRadialGradientArgs=function(e){var t="",n="",r="",i="",o=0,A=/^(left|center|right|\d+(?:px|r?em|%)?)(?:\s+(top|center|bottom|\d+(?:px|r?em|%)?))?$/i,a=/^\d+(px|r?em|%)?(?:\s+\d+(px|r?em|%)?)?$/i,s=e[o].match(A);s&&o++;var c=e[o].match(/^(circle|ellipse)?\s*(closest-side|closest-corner|farthest-side|farthest-corner|contain|cover)?$/i);c&&(t=c[1]||"","contain"===(r=c[2]||"")?r="closest-side":"cover"===r&&(r="farthest-corner"),o++);var u=e[o].match(a);u&&o++;var l=e[o].match(A);l&&o++;var h=e[o].match(a);h&&o++;var d=l||s;d&&d[1]&&(i=d[1]+(/^\d+$/.test(d[1])?"px":""),d[2]&&(i+=" "+d[2]+(/^\d+$/.test(d[2])?"px":"")));var f=h||u;return f&&(n=f[0],f[1]||(n+="px")),!i||t||n||r||(n=i,i=""),i&&(i="at "+i),[[t,r,n,i].filter(function(e){return!!e}).join(" ")].concat(e.slice(o))},I=function(e){return e.map(function(e){return e.match(f)}).map(function(t,n){if(!t)return e[n];switch(t[1]){case"from":return t[4]+" 0%";case"to":return t[4]+" 100%";case"color-stop":return"%"===t[3]?t[4]+" "+t[2]:t[4]+" "+100*parseFloat(t[2])+"%"}})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=/([+-]?\d*\.?\d+)(deg|grad|rad|turn)/i;t.parseAngle=function(e){var t=e.match(r);if(t){var n=parseFloat(t[1]);switch(t[2].toLowerCase()){case"deg":return Math.PI*n/180;case"grad":return Math.PI/200*n;case"rad":return n;case"turn":return 2*Math.PI*n}}return null}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.cloneWindow=t.DocumentCloner=void 0;var r=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var A,a=e[Symbol.iterator]();!(r=(A=a.next()).done)&&(n.push(A.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{!r&&a.return&&a.return()}finally{if(i)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(13),A=n(94),a=h(n(172)),s=n(18),c=n(26),u=h(n(83)),l=n(173);function h(e){return e&&e.__esModule?e:{default:e}}var d=t.DocumentCloner=function(){function e(t,n,r,i,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.referenceElement=t,this.scrolledElements=[],this.copyStyles=i,this.inlineImages=i,this.logger=r,this.options=n,this.renderer=o,this.resourceLoader=new a.default(n,r,window),this.pseudoContentData={counters:{},quoteDepth:0},this.documentElement=this.cloneNode(t.ownerDocument.documentElement)}return i(e,[{key:"inlineAllImages",value:function(e){var t=this;if(this.inlineImages&&e){var n=e.style;Promise.all((0,c.parseBackgroundImage)(n.backgroundImage).map(function(e){return"url"===e.method?t.resourceLoader.inlineImage(e.args[0]).then(function(e){return e&&"string"==typeof e.src?'url("'+e.src+'")':"none"}).catch(function(e){0}):Promise.resolve(""+e.prefix+e.method+"("+e.args.join(",")+")")})).then(function(e){e.length>1&&(n.backgroundColor=""),n.backgroundImage=e.join(",")}),e instanceof HTMLImageElement&&this.resourceLoader.inlineImage(e.src).then(function(t){if(t&&e instanceof HTMLImageElement&&e.parentNode){var n=e.parentNode,r=(0,s.copyCSSStyles)(e.style,t.cloneNode(!1));n.replaceChild(r,e)}}).catch(function(e){0})}}},{key:"inlineFonts",value:function(e){var t=this;return Promise.all(Array.from(e.styleSheets).map(function(t){return t.href?fetch(t.href).then(function(e){return e.text()}).then(function(e){return p(e,t.href)}).catch(function(e){return[]}):f(t,e)})).then(function(e){return e.reduce(function(e,t){return e.concat(t)},[])}).then(function(e){return Promise.all(e.map(function(e){return fetch(e.formats[0].src).then(function(e){return e.blob()}).then(function(e){return new Promise(function(t,n){var r=new FileReader;r.onerror=n,r.onload=function(){var e=r.result;t(e)},r.readAsDataURL(e)})}).then(function(t){return e.fontFace.setProperty("src",'url("'+t+'")'),"@font-face {"+e.fontFace.cssText+" "})}))}).then(function(n){var r=e.createElement("style");r.textContent=n.join("\n"),t.documentElement.appendChild(r)})}},{key:"createElementClone",value:function(e){var t=this;if(this.copyStyles&&e instanceof HTMLCanvasElement){var n=e.ownerDocument.createElement("img");try{return n.src=e.toDataURL(),n}catch(e){0}}if(e instanceof HTMLIFrameElement){var r=e.cloneNode(!1),i=C();r.setAttribute("data-html2canvas-internal-iframe-key",i);var A=(0,o.parseBounds)(e,0,0),a=A.width,c=A.height;return this.resourceLoader.cache[i]=_(e,this.options).then(function(e){return t.renderer(e,{async:t.options.async,allowTaint:t.options.allowTaint,backgroundColor:"#ffffff",canvas:null,imageTimeout:t.options.imageTimeout,logging:t.options.logging,proxy:t.options.proxy,removeContainer:t.options.removeContainer,scale:t.options.scale,foreignObjectRendering:t.options.foreignObjectRendering,useCORS:t.options.useCORS,target:new u.default,width:a,height:c,x:0,y:0,windowWidth:e.ownerDocument.defaultView.innerWidth,windowHeight:e.ownerDocument.defaultView.innerHeight,scrollX:e.ownerDocument.defaultView.pageXOffset,scrollY:e.ownerDocument.defaultView.pageYOffset},t.logger.child(i))}).then(function(t){return new Promise(function(n,i){var o=document.createElement("img");o.onload=function(){return n(t)},o.onerror=i,o.src=t.toDataURL(),r.parentNode&&r.parentNode.replaceChild((0,s.copyCSSStyles)(e.ownerDocument.defaultView.getComputedStyle(e),o),r)})}),r}return e.cloneNode(!1)}},{key:"cloneNode",value:function(e){var t=e.nodeType===Node.TEXT_NODE?document.createTextNode(e.nodeValue):this.createElementClone(e),n=e.ownerDocument.defaultView,r=e instanceof n.HTMLElement?n.getComputedStyle(e):null,i=e instanceof n.HTMLElement?n.getComputedStyle(e,":before"):null,o=e instanceof n.HTMLElement?n.getComputedStyle(e,":after"):null;this.referenceElement===e&&t instanceof n.HTMLElement&&(this.clonedReferenceElement=t),t instanceof n.HTMLBodyElement&&b(t);for(var A=(0,l.parseCounterReset)(r,this.pseudoContentData),a=(0,l.resolvePseudoContent)(e,i,this.pseudoContentData),c=e.firstChild;c;c=c.nextSibling)(c.nodeType!==Node.ELEMENT_NODE||"SCRIPT"!==c.nodeName&&!c.hasAttribute("data-html2canvas-ignore"))&&(this.copyStyles&&"STYLE"===c.nodeName||t.appendChild(this.cloneNode(c)));var u=(0,l.resolvePseudoContent)(e,o,this.pseudoContentData);if((0,l.popCounters)(A,this.pseudoContentData),e instanceof n.HTMLElement&&t instanceof n.HTMLElement)switch(i&&this.inlineAllImages(B(e,t,i,a,w)),o&&this.inlineAllImages(B(e,t,o,u,y)),!r||!this.copyStyles||e instanceof HTMLIFrameElement||(0,s.copyCSSStyles)(r,t),this.inlineAllImages(t),0===e.scrollTop&&0===e.scrollLeft||this.scrolledElements.push([t,e.scrollLeft,e.scrollTop]),e.nodeName){case"CANVAS":this.copyStyles||g(e,t);break;case"TEXTAREA":case"SELECT":t.value=e.value}return t}}]),e}(),f=function(e,t){return(e.cssRules?Array.from(e.cssRules):[]).filter(function(e){return e.type===CSSRule.FONT_FACE_RULE}).map(function(e){for(var n=(0,c.parseBackgroundImage)(e.style.getPropertyValue("src")),r=[],i=0;i<n.length;i++)if("url"===n[i].method&&n[i+1]&&"format"===n[i+1].method){var o=t.createElement("a");o.href=n[i].args[0],t.body&&t.body.appendChild(o);var A={src:o.href,format:n[i+1].args[0]};r.push(A)}return{formats:r.filter(function(e){return/^woff/i.test(e.format)}),fontFace:e.style}}).filter(function(e){return e.formats.length})},p=function(e,t){var n=document.implementation.createHTMLDocument(""),r=document.createElement("base");r.href=t;var i=document.createElement("style");return i.textContent=e,n.head&&n.head.appendChild(r),n.body&&n.body.appendChild(i),i.sheet?f(i.sheet,n):[]},g=function(e,t){try{if(t){t.width=e.width,t.height=e.height;var n=e.getContext("2d"),r=t.getContext("2d");n?r.putImageData(n.getImageData(0,0,e.width,e.height),0,0):r.drawImage(e,0,0)}}catch(e){}},B=function(e,t,n,r,i){if(n&&n.content&&"none"!==n.content&&"-moz-alt-content"!==n.content&&"none"!==n.display){var o=t.ownerDocument.createElement("html2canvaspseudoelement");if((0,s.copyCSSStyles)(n,o),r)for(var A=r.length,a=0;a<A;a++){var u=r[a];switch(u.type){case l.PSEUDO_CONTENT_ITEM_TYPE.IMAGE:var h=t.ownerDocument.createElement("img");h.src=(0,c.parseBackgroundImage)("url("+u.value+")")[0].args[0],h.style.opacity="1",o.appendChild(h);break;case l.PSEUDO_CONTENT_ITEM_TYPE.TEXT:o.appendChild(t.ownerDocument.createTextNode(u.value))}}return o.className=v+" "+m,t.className+=i===w?" "+v:" "+m,i===w?t.insertBefore(o,t.firstChild):t.appendChild(o),o}},w=":before",y=":after",v="___html2canvas___pseudoelement_before",m="___html2canvas___pseudoelement_after",b=function(e){E(e,"."+v+w+'{\n    content: "" !important;\n    display: none !important;\n}\n         .'+m+y+'{\n    content: "" !important;\n    display: none !important;\n}')},E=function(e,t){var n=e.ownerDocument.createElement("style");n.innerHTML=t,e.appendChild(n)},T=function(e){var t=r(e,3),n=t[0],i=t[1],o=t[2];n.scrollLeft=i,n.scrollTop=o},C=function(){return Math.ceil(Date.now()+1e7*Math.random()).toString(16)},U=/^data:text\/(.+);(base64)?,(.*)$/i,_=function(e,t){try{return Promise.resolve(e.contentWindow.document.documentElement)}catch(n){return t.proxy?(0,A.Proxy)(e.src,t).then(function(e){var t=e.match(U);return t?"base64"===t[2]?window.atob(decodeURIComponent(t[3])):decodeURIComponent(t[3]):Promise.reject()}).then(function(t){return Q(e.ownerDocument,(0,o.parseBounds)(e,0,0)).then(function(e){var n=e.contentWindow.document;n.open(),n.write(t);var r=F(e).then(function(){return n.documentElement});return n.close(),r})}):Promise.reject()}},Q=function(e,t){var n=e.createElement("iframe");return n.className="html2canvas-container",n.style.visibility="hidden",n.style.position="fixed",n.style.left="-10000px",n.style.top="0px",n.style.border="0",n.width=t.width.toString(),n.height=t.height.toString(),n.scrolling="no",n.setAttribute("data-html2canvas-ignore","true"),e.body?(e.body.appendChild(n),Promise.resolve(n)):Promise.reject("")},F=function(e){var t=e.contentWindow,n=t.document;return new Promise(function(r,i){t.onload=e.onload=n.onreadystatechange=function(){var t=setInterval(function(){n.body.childNodes.length>0&&"complete"===n.readyState&&(clearInterval(t),r(e))},50)}})},x=(t.cloneWindow=function(e,t,n,r,i,o){var A=new d(n,r,i,!1,o),a=e.defaultView.pageXOffset,s=e.defaultView.pageYOffset;return Q(e,t).then(function(r){var i=r.contentWindow,o=i.document,c=F(r).then(function(){return A.scrolledElements.forEach(T),i.scrollTo(t.left,t.top),!/(iPad|iPhone|iPod)/g.test(navigator.userAgent)||i.scrollY===t.top&&i.scrollX===t.left||(o.documentElement.style.top=-t.top+"px",o.documentElement.style.left=-t.left+"px",o.documentElement.style.position="absolute"),A.clonedReferenceElement instanceof i.HTMLElement||A.clonedReferenceElement instanceof e.defaultView.HTMLElement||A.clonedReferenceElement instanceof HTMLElement?Promise.resolve([r,A.clonedReferenceElement,A.resourceLoader]):Promise.reject("")});return o.open(),o.write(x(document.doctype)+"<html></html>"),function(e,t,n){!e.defaultView||t===e.defaultView.pageXOffset&&n===e.defaultView.pageYOffset||e.defaultView.scrollTo(t,n)}(n.ownerDocument,a,s),o.replaceChild(o.adoptNode(A.documentElement),o.documentElement),o.close(),c})},function(e){var t="";return e&&(t+="<!DOCTYPE ",e.name&&(t+=e.name),e.internalSubset&&(t+=e.internalSubset),e.publicId&&(t+='"'+e.publicId+'"'),e.systemId&&(t+='"'+e.systemId+'"'),t+=">"),t})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ResourceStore=void 0;var r,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(39),A=(r=o)&&r.__esModule?r:{default:r},a=n(94);function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var c=function(){function e(t,n,r){s(this,e),this.options=t,this._window=r,this.origin=this.getOrigin(r.location.href),this.cache={},this.logger=n,this._index=0}return i(e,[{key:"loadImage",value:function(e){var t=this;if(this.hasResourceInCache(e))return e;if(!g(e)||A.default.SUPPORT_SVG_DRAWING){if(!0===this.options.allowTaint||f(e)||this.isSameOrigin(e))return this.addImage(e,e,!1);if(!this.isSameOrigin(e)){if("string"==typeof this.options.proxy)return this.cache[e]=(0,a.Proxy)(e,this.options).then(function(e){return B(e,t.options.imageTimeout||0)}),e;if(!0===this.options.useCORS&&A.default.SUPPORT_CORS_IMAGES)return this.addImage(e,e,!0)}}}},{key:"inlineImage",value:function(e){var t=this;return f(e)?B(e,this.options.imageTimeout||0):this.hasResourceInCache(e)?this.cache[e]:this.isSameOrigin(e)||"string"!=typeof this.options.proxy?this.xhrImage(e):this.cache[e]=(0,a.Proxy)(e,this.options).then(function(e){return B(e,t.options.imageTimeout||0)})}},{key:"xhrImage",value:function(e){var t=this;return this.cache[e]=new Promise(function(n,r){var i=new XMLHttpRequest;if(i.onreadystatechange=function(){if(4===i.readyState)if(200!==i.status)r("Failed to fetch image "+e.substring(0,256)+" with status code "+i.status);else{var t=new FileReader;t.addEventListener("load",function(){var e=t.result;n(e)},!1),t.addEventListener("error",function(e){return r(e)},!1),t.readAsDataURL(i.response)}},i.responseType="blob",t.options.imageTimeout){var o=t.options.imageTimeout;i.timeout=o,i.ontimeout=function(){return r("")}}i.open("GET",e,!0),i.send()}).then(function(e){return B(e,t.options.imageTimeout||0)}),this.cache[e]}},{key:"loadCanvas",value:function(e){var t=String(this._index++);return this.cache[t]=Promise.resolve(e),t}},{key:"hasResourceInCache",value:function(e){return void 0!==this.cache[e]}},{key:"addImage",value:function(e,t,n){var r=this;var i=function(e){return new Promise(function(i,o){var A=new Image;if(A.onload=function(){return i(A)},e&&!n||(A.crossOrigin="anonymous"),A.onerror=o,A.src=t,!0===A.complete&&setTimeout(function(){i(A)},500),r.options.imageTimeout){var a=r.options.imageTimeout;setTimeout(function(){return o("")},a)}})};return this.cache[e]=p(t)&&!g(t)?A.default.SUPPORT_BASE64_DRAWING(t).then(i):i(!0),e}},{key:"isSameOrigin",value:function(e){return this.getOrigin(e)===this.origin}},{key:"getOrigin",value:function(e){var t=this._link||(this._link=this._window.document.createElement("a"));return t.href=e,t.href=t.href,t.protocol+t.hostname+t.port}},{key:"ready",value:function(){var e=this,t=Object.keys(this.cache),n=t.map(function(t){return e.cache[t].catch(function(e){return null})});return Promise.all(n).then(function(e){return new u(t,e)})}}]),e}();t.default=c;var u=t.ResourceStore=function(){function e(t,n){s(this,e),this._keys=t,this._resources=n}return i(e,[{key:"get",value:function(e){var t=this._keys.indexOf(e);return-1===t?null:this._resources[t]}}]),e}(),l=/^data:image\/svg\+xml/i,h=/^data:image\/.*;base64,/i,d=/^data:image\/.*/i,f=function(e){return d.test(e)},p=function(e){return h.test(e)},g=function(e){return"svg"===e.substr(-3).toLowerCase()||l.test(e)},B=function(e,t){return new Promise(function(n,r){var i=new Image;i.onload=function(){return n(i)},i.onerror=r,i.src=e,!0===i.complete&&setTimeout(function(){n(i)},500),t&&setTimeout(function(){return r("")},t)})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseContent=t.resolvePseudoContent=t.popCounters=t.parseCounterReset=t.TOKEN_TYPE=t.PSEUDO_CONTENT_ITEM_TYPE=void 0;var r=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var A,a=e[Symbol.iterator]();!(r=(A=a.next()).done)&&(n.push(A.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{!r&&a.return&&a.return()}finally{if(i)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},i=n(55),o=n(37),A=t.PSEUDO_CONTENT_ITEM_TYPE={TEXT:0,IMAGE:1},a=t.TOKEN_TYPE={STRING:0,ATTRIBUTE:1,URL:2,COUNTER:3,COUNTERS:4,OPENQUOTE:5,CLOSEQUOTE:6},s=(t.parseCounterReset=function(e,t){if(!e||!e.counterReset||"none"===e.counterReset)return[];for(var n=[],i=e.counterReset.split(/\s*,\s*/),o=i.length,A=0;A<o;A++){var a=i[A].split(/\s+/),s=r(a,2),c=s[0],u=s[1];n.push(c);var l=t.counters[c];l||(l=t.counters[c]=[]),l.push(parseInt(u||0,10))}return n},t.popCounters=function(e,t){for(var n=e.length,r=0;r<n;r++)t.counters[e[r]].pop()},t.resolvePseudoContent=function(e,t,n){if(!t||!t.content||"none"===t.content||"-moz-alt-content"===t.content||"none"===t.display)return null;var i=s(t.content),o=i.length,c=[],h="",d=t.counterIncrement;if(d&&"none"!==d){var f=d.split(/\s+/),p=r(f,2),g=p[0],B=p[1],w=n.counters[g];w&&(w[w.length-1]+=void 0===B?1:parseInt(B,10))}for(var y=0;y<o;y++){var v=i[y];switch(v.type){case a.STRING:h+=v.value||"";break;case a.ATTRIBUTE:e instanceof HTMLElement&&v.value&&(h+=e.getAttribute(v.value)||"");break;case a.COUNTER:var m=n.counters[v.name||""];m&&(h+=l([m[m.length-1]],"",v.format));break;case a.COUNTERS:var b=n.counters[v.name||""];b&&(h+=l(b,v.glue,v.format));break;case a.OPENQUOTE:h+=u(t,!0,n.quoteDepth),n.quoteDepth++;break;case a.CLOSEQUOTE:n.quoteDepth--,h+=u(t,!1,n.quoteDepth);break;case a.URL:h&&(c.push({type:A.TEXT,value:h}),h=""),c.push({type:A.IMAGE,value:v.value||""})}}return h&&c.push({type:A.TEXT,value:h}),c},t.parseContent=function(e,t){if(t&&t[e])return t[e];for(var n=[],r=e.length,i=!1,o=!1,A=!1,s="",u="",l=[],h=0;h<r;h++){var d=e.charAt(h);switch(d){case"'":case'"':o?s+=d:(i=!i,A||i||(n.push({type:a.STRING,value:s}),s=""));break;case"\\":o?(s+=d,o=!1):o=!0;break;case"(":i?s+=d:(A=!0,u=s,s="",l=[]);break;case")":if(i)s+=d;else if(A){switch(s&&l.push(s),u){case"attr":l.length>0&&n.push({type:a.ATTRIBUTE,value:l[0]});break;case"counter":if(l.length>0){var f={type:a.COUNTER,name:l[0]};l.length>1&&(f.format=l[1]),n.push(f)}break;case"counters":if(l.length>0){var p={type:a.COUNTERS,name:l[0]};l.length>1&&(p.glue=l[1]),l.length>2&&(p.format=l[2]),n.push(p)}break;case"url":l.length>0&&n.push({type:a.URL,value:l[0]})}A=!1,s=""}break;case",":i?s+=d:A&&(l.push(s),s="");break;case" ":case"\t":i?s+=d:s&&(c(n,s),s="");break;default:s+=d}"\\"!==d&&(o=!1)}return s&&c(n,s),t&&(t[e]=n),n}),c=function(e,t){switch(t){case"open-quote":e.push({type:a.OPENQUOTE});break;case"close-quote":e.push({type:a.CLOSEQUOTE})}},u=function(e,t,n){var r=e.quotes?e.quotes.split(/\s+/):["'\"'","'\"'"],i=2*n;return i>=r.length&&(i=r.length-2),t||++i,r[i].replace(/^["']|["']$/g,"")},l=function(e,t,n){for(var r=e.length,A="",a=0;a<r;a++)a>0&&(A+=t||""),A+=(0,i.createCounterText)(e[a],(0,o.parseListStyleType)(n||"decimal"),!1);return A}},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},A=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function A(e){try{s(r.next(e))}catch(e){o(e)}}function a(e){try{s(r.throw(e))}catch(e){o(e)}}function s(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(A,a)}s((r=r.apply(e,t||[])).next())})},a=this&&this.__generator||function(e,t){var n,r,i,o,A={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;A;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return A.label++,{value:o[1],done:!1};case 5:A.label++,r=o[1],o=[0];continue;case 7:o=A.ops.pop(),A.trys.pop();continue;default:if(!(i=(i=A.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){A=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){A.label=o[1];break}if(6===o[0]&&A.label<i[1]){A.label=i[1],i=o;break}if(i&&A.label<i[2]){A.label=i[2],A.ops.push(o);break}i[2]&&A.ops.pop(),A.trys.pop();continue}o=t.call(e,A)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};Object.defineProperty(t,"__esModule",{value:!0});var s=n(16),c=n(0),u=n(1),l=n(34),h=n(56),d=n(80),f=n(96),p=n(2)("performance");t.fontRequest=function(e){return o({type:c.ResourceType.FONT},e)};var g=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.requestLookup=new Map,t.requestQueue=new Map,t.resourceLookup=new Map,t.fontManager=new d.FontManager,t}return i(t,e),t.prototype.dequeueRequests=function(){return A(this,void 0,Promise,function(){var e,t,n,r,i,o;return a(this,function(A){switch(A.label){case 0:e=!1,t=[],this.requestQueue.forEach(function(e,n){t.push([n,e])}),this.requestQueue.clear(),n=function(n,i){var o,A,s,c,l;return a(this,function(i){switch(i.label){case 0:return o=t[n],A=o[0],(s=o[1]).length>0?(e=!0,c=s.slice(0),s.length=0,p("Processing requests for resource '%s'",A),[4,r.fontManager.updateFontMap(A,c)]):[3,3];case 1:return i.sent(),[4,r.fontManager.calculateMetrics(A,c)];case 2:i.sent(),(l=r.requestLookup.get(A))?(c.forEach(function(e){var t=l.get(e);if(l.delete(e),t){for(var n=0,r=t.length;n<r;++n){var i=t[n],o=i[0],A=i[1];o.managesInstance(A)&&(A.active=!0)}u.nextFrame(function(){for(var e=new Set,n=0,r=t.length;n<r;++n){var i=t[n][1];e.has(i)||(e.add(i),i.resourceTrigger())}})}}),p("All requests for resource '%s' are processed",A)):p("There were no Font requests waiting for completion for resource",A),i.label=3;case 3:return[2]}})},r=this,i=0,o=t.length,A.label=1;case 1:return i<o?[5,n(i,o)]:[3,4];case 2:A.sent(),A.label=3;case 3:return++i,[3,1];case 4:return[2,e]}})})},t.prototype.destroy=function(){this.fontManager.destroy()},t.prototype.destroyResource=function(e){var t=this.resourceLookup.get(e.key);t&&(this.fontManager.destroyFontMap(t.id),this.resourceLookup.delete(e.key))},t.prototype.getResource=function(e){return this.resourceLookup.get(e)||null},t.prototype.getIOExpansion=function(){return[new h.TextureIOExpansion(c.ResourceType.FONT,this)]},t.prototype.initResource=function(e){return A(this,void 0,void 0,function(){var t;return a(this,function(n){switch(n.label){case 0:return d.isFontResource(e)?[4,this.fontManager.createFontMap(e)]:[3,2];case 1:(t=n.sent())&&this.resourceLookup.set(e.key,t),p("Font map created->",t),n.label=2;case 2:return[2]}})})},t.prototype.request=function(e,t,n,r){var i=n,o=i.fontMap,A=null;if(o)return i.character&&(A=o.getGlyphTexture(i.character)),A?i.fetch===f.FontResourceRequestFetch.IMAGE_SIZE?[A.pixelWidth,A.pixelHeight]:s.subTextureIOValue(A):i.fetch===f.FontResourceRequestFetch.IMAGE_SIZE?[0,0]:s.subTextureIOValue(null);var a=n.key,c=this.requestLookup.get(a);if(c){var u=c.get(i);if(u)return u.push([e,t]),t.active=!1,i.fetch===f.FontResourceRequestFetch.IMAGE_SIZE?[0,0]:s.subTextureIOValue(A)}else c=new Map,this.requestLookup.set(a,c);t.active=!1;var l=this.requestQueue.get(a);return l||(l=[],this.requestQueue.set(a,l)),l.push(i),c.set(i,[[e,t]]),i.fetch?[0,0]:s.subTextureIOValue(A)},t.prototype.updateResource=function(e){if(d.isFontResource(e)){var t=this.resourceLookup.get(e.key);t&&(u.shallowEqual(e.fontSource,t.fontSource)||p("Font resources currently do not update. To update their properties simply destroy and recreate for now."))}},t}(l.BaseResourceManager);t.FontResourceManager=g},function(e,t,n){"use strict";function r(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),r(n(97)),r(n(99)),r(n(177)),r(n(57)),r(n(98)),r(n(25)),r(n(16)),r(n(56))},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function A(e){try{s(r.next(e))}catch(e){o(e)}}function a(e){try{s(r.throw(e))}catch(e){o(e)}}function s(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(A,a)}s((r=r.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){var n,r,i,o,A={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;A;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return A.label++,{value:o[1],done:!1};case 5:A.label++,r=o[1],o=[0];continue;case 7:o=A.ops.pop(),A.trys.pop();continue;default:if(!(i=(i=A.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){A=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){A.label=o[1];break}if(6===o[0]&&A.label<i[1]){A.label=i[1],i=o;break}if(i&&A.label<i[2]){A.label=i[2],A.ops.push(o);break}i[2]&&A.ops.pop(),A.trys.pop();continue}o=t.call(e,A)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),A=function(){function e(e,t){var n=this;this.video=e,this.subTexture=t,this.isDestroyed=!1,this.renderedTime=-1,this.previousTime=-1,this.playedFrames=0,this.caughtFrames=0,this.timeFrame=0,this.doUpdate=function(){Math.abs(n.video.currentTime-n.renderedTime)<.015||(n.renderedTime=n.video.currentTime,n.subTexture.update())},this.loop=function(e){n.doUpdate(),n.isDestroyed||o.onFrame(n.loop)},this.addEventListeners()}return e.prototype.addEventListeners=function(){return r(this,void 0,void 0,function(){var e;return i(this,function(t){switch(t.label){case 0:return this.isDestroyed?[2]:(e=this.loop,[4,o.onFrame()]);case 1:return e.apply(this,[t.sent()]),[2]}})})},e.prototype.destroy=function(){this.video.pause(),this.isDestroyed=!0,this.removeEventListeners()},e.prototype.removeEventListeners=function(){},e}();t.VideoTextureMonitor=A},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),o=new Image;t.atlasRequest=function(e){return r({type:i.ResourceType.ATLAS,source:o},e)}},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o=n(58),A=n(40),a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.processAttributeDestructuring=function(e,t,r,i,A,a){return A.find(function(e){return e.name===o.activeAttributeName})?(this.setDeclaration(t,"__active_attribute_handler__",n(179),"ActiveIOExpansion"),""):""},t}(A.BaseIOExpansion);t.ActiveIOExpansion=a},function(e,t){e.exports="\n  // This is a special injected instance attribute. It lets the system\n  // control specific instances ability to draw, which allows the backend\n  // system greater control on how it optimizes draw calls and it's buffers.\n  if (_active == 0.0) {\n    gl_Position = vec4(0.0, 0.0, 0.0, 1.0);\n\n    // Quick exit to prevent any geometry from arising from the instance\n    return;\n  }\n\n"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.analyzeColorPickingRendering=function(e,t,n,r){for(var i={allColors:[],colorData:t,dataHeight:r,dataWidth:n,mouse:e,nearestColor:0,nearestColorBytes:[0,0,0,0]},o=new Map,A=0,a=[],s=n/2,c=r/2,u=0,l=[0,0,0,0],h=Number.MAX_SAFE_INTEGER,d=0;d<r;++d){var f=[];a.push(f);for(var p=0;p<n;++p){var g=t[A],B=t[A+1],w=t[A+2];A+=4;var y=g<<16|B<<8|w;if(o.set(y,!0),f.push(y),0!==y){var v=p-s,m=d-c,b=v*v+m*m;b<h&&(h=b,u=y,l=[g,B,w,255])}}}return i.allColors=Array.from(o.keys()),i.nearestColor=u,i.nearestColorBytes=l,i}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){}return e.prototype.sortInstanceAttributes=function(e,t){return e.resource&&!t.resource?-1:e.easing&&!t.easing?-1:1},e.prototype.sortVertexAttributes=function(e,t){return 1},e.prototype.sortUniforms=function(e,t){return 1},e}();t.BaseIOSorting=r},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function A(e){try{s(r.next(e))}catch(e){o(e)}}function a(e){try{s(r.throw(e))}catch(e){o(e)}}function s(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(A,a)}s((r=r.apply(e,t||[])).next())})},A=this&&this.__generator||function(e,t){var n,r,i,o,A={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;A;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return A.label++,{value:o[1],done:!1};case 5:A.label++,r=o[1],o=[0];continue;case 7:o=A.ops.pop(),A.trys.pop();continue;default:if(!(i=(i=A.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){A=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){A.label=o[1];break}if(6===o[0]&&A.label<i[1]){A.label=i[1],i=o;break}if(i&&A.label<i[2]){A.label=i[2],A.ops.push(o);break}i[2]&&A.ops.pop(),A.trys.pop();continue}o=t.call(e,A)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(42),s=n(0),c=n(1),u=function(e){function t(t){var n=e.call(this,{})||this;return n.isOver=new Set,n.isTouchOver=new Map,n.surface=t,n}return i(t,e),Object.defineProperty(t.prototype,"scenes",{get:function(){return this.surface&&this.surface.sceneDiffs?this.surface.sceneDiffs.items:[]},enumerable:!0,configurable:!0}),t.prototype.getSceneViewsUnderMouse=function(e){for(var t=new Map,n=0,r=this.scenes.length;n<r;++n)for(var i=this.scenes[n],o=0,A=i.views.length;o<A;++o){var a=i.views[o];t.set(a.id,a)}return e.target.views.map(function(e){return t.get(e.view.id)}).filter(c.isDefined)},t.prototype.handleClick=function(e){this.handleInteraction(e,function(t,n){t.interactions.handleMouseClick(n,e)})},t.prototype.handleTap=function(e){var t=this;e.touches.forEach(function(n){t.handleInteraction(n,function(t,r){t.interactions.handleTap(r,e,n)})})},t.prototype.handleDrag=function(e){this.handleInteraction(e,function(t,n){t.interactions.handleMouseDrag(n,e)})},t.prototype.handleMouseDown=function(e){this.handleInteraction(e,function(t,n){return t.interactions.handleMouseDown(n,e)})},t.prototype.handleTouchDown=function(e){return o(this,void 0,void 0,function(){var t,n=this;return A(this,function(r){switch(r.label){case 0:return t=[],e.touches.forEach(function(e){e.target.views.forEach(function(e){return t.push(e.view)})}),this.surface&&this.surface.updateColorPickPosition(e.touches[0].screen.position,t),[4,c.nextFrame()];case 1:return r.sent(),e.touches.forEach(function(t){n.handleInteraction(t,function(n,r){return n.interactions.handleTouchDown(r,e,t)})}),[2]}})})},t.prototype.handleMouseUp=function(e){this.handleInteraction(e,function(t,n){return t.interactions.handleMouseUp(n,e)})},t.prototype.handleTouchUp=function(e){var t=this;e.touches.forEach(function(n){t.handleInteraction(n,function(t,r){return t.interactions.handleTouchUp(r,e,n)})})},t.prototype.handleMouseOut=function(e){var t=this;this.isOver.forEach(function(n){t.handleView(n,function(t,n){return t.interactions.handleMouseOut(n,e)})}),this.isOver.clear()},t.prototype.handleTouchOut=function(e){var t=this;e.touches.forEach(function(n){c.mapGetWithDefault(t.isTouchOver,n.touch.touch.identifier,new Set).forEach(function(r){t.handleView(r,function(t,r){return t.interactions.handleTouchOut(r,e,n)})}),t.isOver.clear()})},t.prototype.handleMouseMove=function(e){var t=this;this.surface&&this.surface.updateColorPickPosition(e.screen.position,e.target.views.map(function(e){return e.view}));var n=this.handleInteraction(e,function(t,n){return t.interactions.handleMouseMove(n,e)}),r=new Set;n.forEach(function(e){return r.add(e)}),this.isOver.forEach(function(n){r.has(n)||t.handleView(n,function(t,n){return t.interactions.handleMouseOut(n,e)})}),r.forEach(function(n){t.isOver.has(n)||t.handleView(n,function(t,n){return t.interactions.handleMouseOver(n,e)})}),this.isOver=r},t.prototype.handleTouchDrag=function(e){var t=this;e.touches.forEach(function(n){t.surface&&t.surface.updateColorPickPosition(n.screen.position,n.target.views.map(function(e){return e.view}));var r=t.handleInteraction(n,function(t,r){return t.interactions.handleTouchMove(r,e,n)}),i=new Set;r.forEach(function(e){return i.add(e)});var o=c.mapInjectDefault(t.isTouchOver,n.touch.touch.identifier,new Set);o.forEach(function(r){i.has(r)||t.handleView(r,function(t,r){return t.interactions.handleTouchOut(r,e,n)})}),i.forEach(function(r){o.has(r)||t.handleView(r,function(t,r){return t.interactions.handleTouchOver(r,e,n)})}),t.isTouchOver.set(n.touch.touch.identifier,i)})},t.prototype.handleInteraction=function(e,t){for(var n=this.getSceneViewsUnderMouse(e),r=0,i=n.length;r<i;++r){var o=n[r];this.handleView(o,t)}return n},t.prototype.handleView=function(e,t){for(var n=0,r=e.scene.layers.length;n<r;++n){var i=e.scene.layers[n];i.picking&&i.picking.type!==s.PickType.NONE&&t(i,e)}},t}(a.SimpleEventHandler);t.LayerMouseEvents=u},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var A=n(58),a=n(33),s=n(40),c=n(15),u=n(0),l="BasicIOExpansion",h=["x","y","z","w"],d={1:"float",2:"vec2",3:"vec3",4:"vec4",9:"mat3",16:"mat4",99:"vec4"};var f=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.generateUniformAttributePacking=function(e,t){return this.setDeclaration(e,A.uniformBufferInstanceBufferName,"\n// Instance Attributes as a packed Uniform Buffer\nuniform vec4 "+A.uniformBufferInstanceBufferName+"["+t.totalInstanceUniformBlocks+"];\n",l),this.setDeclaration(e,"instanceSize","int instanceSize = "+t.totalInstanceUniformBlocks+";",l),this.setDeclaration(e,"getBlock","vec4 getBlock(int index, int instanceIndex) { return "+A.uniformBufferInstanceBufferName+"[(instanceSize * instanceIndex) + index]; }",l),{injection:"",material:{uniforms:[{name:A.uniformBufferInstanceBufferName,type:a.MaterialUniformType.VEC4_ARRAY,value:new Array(t.totalInstanceUniformBlocks).fill(0).map(function(){return[0,0,0,0]})}]}}},t.prototype.processAttributeDestructuring=function(e,t,n,r,i,o){var A="",a=i.slice(0);switch(e.bufferType){case c.LayerBufferType.INSTANCE_ATTRIBUTE:A=this.processDestructuringInstanceAttribute(t,a);break;case c.LayerBufferType.INSTANCE_ATTRIBUTE_PACKING:A=this.processDestructuringInstanceAttributePacking(t,a);break;case c.LayerBufferType.UNIFORM:A=this.processDestructuringUniformBuffer(t,a,n.blocksPerInstance)}return e.picking.type===u.PickType.SINGLE&&(A+="\n// This portion is where the shader assigns the picking color that gets passed to the fragment shader\n_picking_color_pass_ = _pickingColor;\n"),A},t.prototype.processDestructuringInstanceAttribute=function(e,t){return""},t.prototype.processDestructuringInstanceAttributePacking=function(e,t){var n="";return n+=this.processDestructureBlocks(e,t)},t.prototype.processDestructuringUniformBuffer=function(e,t,n){this.setDeclaration(e,"instanceIndex","int instanceIndex = int(instance);",l);for(var r=0;r<n;++r)this.setDeclaration(e,"block"+r,"  vec4 block"+r+" = getBlock("+r+", instanceIndex);\n",l);return this.processDestructureBlocks(e,t)},t.prototype.processDestructureBlocks=function(e,t){var n=this;return t.forEach(function(t){var r,i,o=t.block;t.size===u.InstanceAttributeSize.FOUR?n.setDeclaration(e,t.name,"  "+d[t.size]+" "+t.name+" = block"+o+";\n",l):n.setDeclaration(e,t.name,"  "+d[t.size||1]+" "+t.name+" = block"+o+"."+(r=t.blockIndex||0,i=t.size||1,h.slice(r,r+i).join(""))+";\n",l)}),""},t.prototype.processHeaderInjection=function(e,t,n,r,i,A,a){var s={injection:""};e===u.ShaderInjectionTarget.VERTEX&&(s=this.processAttributeHeader(t,n,r,i,A));var c=this.processUniformHeader(t,a,e);return o({},s,{injection:s.injection+c})},t.prototype.processAttributeHeader=function(e,t,n,r,i){var o=void 0,A="// Shader input\n";if(t.bufferType===c.LayerBufferType.UNIFORM&&i.length>0){var a=this.generateUniformAttributePacking(e,n);o=a.material,A+=a.injection}return A+=this.processVertexAttributes(e,r),t.bufferType===c.LayerBufferType.INSTANCE_ATTRIBUTE&&i.length>0&&(A+=this.processInstanceAttributeBufferStrategy(e,i)),t.bufferType===c.LayerBufferType.INSTANCE_ATTRIBUTE_PACKING&&i.length>0&&(A+=this.processInstanceAttributePackingBufferStrategy(e,n.instanceMaxBlock)),{injection:A,material:o}},t.prototype.processUniformHeader=function(e,t,n){var r=this,i=n||u.ShaderInjectionTarget.VERTEX;return t.forEach(function(t){t.shaderInjection=t.shaderInjection||u.ShaderInjectionTarget.VERTEX,t.shaderInjection!==i&&t.shaderInjection!==u.ShaderInjectionTarget.ALL||r.setDeclaration(e,t.name,"uniform "+(t.qualifier||"")+(t.qualifier?" ":"")+d[t.size]+" "+t.name+";\n",l)}),""},t.prototype.processInstanceAttributeBufferStrategy=function(e,t){var n=this;return t.forEach(function(t){n.setDeclaration(e,t.name,"attribute "+d[t.size||1]+" "+(t.qualifier||"")+(t.qualifier?" ":"")+" "+t.name+";\n",l)}),""},t.prototype.processInstanceAttributePackingBufferStrategy=function(e,t){for(var n=0,r=t+1;n<r;++n)this.setDeclaration(e,"block"+n,"attribute "+d[u.InstanceAttributeSize.FOUR]+" block"+n+";\n",l);return""},t.prototype.processVertexAttributes=function(e,t){var n=this;return t.forEach(function(t){n.setDeclaration(e,t.name,"attribute "+d[t.size]+" "+(t.qualifier||"")+(t.qualifier?" ":"")+t.name+";\n",l)}),""},t}(s.BaseIOExpansion);t.BasicIOExpansion=f},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o=n(6),A=n(3),a=n(0),s=n(102),c=n(9),u=n(28),l=n(29),h=n(2)("performance"),d=Math.max;t.isInstanceAttributeBufferLocation=function(e){return Boolean(e&&e.buffer&&e.buffer.value)};var f=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.allBufferLocations={},r.availableLocations=[],r.currentInstancedCount=0,r.instanceToBufferLocation={},r.maxInstancedCount=0,r.attributeToPropertyIds=new Map,r.updateAllPropertyIdList=[],r.activePropertyId=-1,r.remove=function(e){var t=r.instanceToBufferLocation[e.uid];return t&&(delete r.instanceToBufferLocation[e.uid],r.availableLocations.push(t)),e},r.add=r.doAddWithRegistration,r}return i(t,e),t.prototype.doAddWithRegistration=function(e){var t=this;this.layer.instanceAttributes.forEach(function(n){if(!n.parentAttribute){A.ObservableMonitoring.setObservableMonitor(!0),n.update(e);var r=A.ObservableMonitoring.getObservableMonitorIds(!0);t.attributeToPropertyIds.set(n,r),n===t.layer.activeAttribute&&(t.activePropertyId=r[0])}}),A.ObservableMonitoring.setObservableMonitor(!1),this.makeUpdateAllPropertyIdList();var n=this.resizeBuffer();return this.gatherLocationsIntoGroups(n.newLocations,n.growth),this.add=this.doAdd,this.doAdd(e)},t.prototype.doAdd=function(e){if(this.availableLocations.length<=0){var t=this.resizeBuffer();this.gatherLocationsIntoGroups(t.newLocations,t.growth)}var n=this.availableLocations.shift();return n&&this.geometry?(this.instanceToBufferLocation[e.uid]=n,this.currentInstancedCount=this.geometry.maxInstancedCount=d(this.currentInstancedCount,n.instanceIndex+1),this.model&&(this.model.vertexDrawRange=[0,this.layer.instanceVertexCount],this.model.drawInstances=this.currentInstancedCount,0===this.layer.instanceVertexCount&&(this.model.vertexDrawRange[1]=this.model.drawInstances))):console.error("Add Error: Instance Attribute Buffer Manager failed to pair an instance with a buffer location"),n},t.prototype.destroy=function(){this.geometry&&this.geometry.dispose(),this.material&&this.material.dispose(),this.scene&&this.scene.container&&this.model&&this.scene.container.remove(this.model)},t.prototype.getBufferLocations=function(e){return this.instanceToBufferLocation[e.uid]},t.prototype.getActiveAttributePropertyId=function(){return this.activePropertyId},t.prototype.getUpdateAllPropertyIdList=function(){return this.updateAllPropertyIdList},t.prototype.managesInstance=function(e){return void 0!==this.instanceToBufferLocation[e.uid]},t.prototype.makeUpdateAllPropertyIdList=function(){var e={};this.attributeToPropertyIds.forEach(function(t){e[t[0]]=t[0]}),this.updateAllPropertyIdList=Object.values(e).filter(Boolean)},t.prototype.removeFromScene=function(){this.scene&&this.scene.container&&this.model&&this.scene.container.remove(this.model),delete this.scene},t.prototype.resizeBuffer=function(){var e=0,t=new Map;if(this.changeListContext){e=1e3;for(var n=0,r=this.changeListContext.length;n<r;++n){var i=this.changeListContext[n];switch(i[1]){case a.InstanceDiffType.CHANGE:case a.InstanceDiffType.INSERT:this.instanceToBufferLocation[i[0].uid]||e++}}}if(h("BEGIN: Resizing unpacked attribute buffer by %d instances",e),this.geometry){this.geometry.dispose(),this.geometry=new o.Geometry;for(var A=this.maxInstancedCount,s=0,l=this.layer.vertexAttributes;s<l.length;s++){(b=l[s]).materialAttribute&&this.geometry.addAttribute(b.name,b.materialAttribute)}this.maxInstancedCount+=e,this.attributes=this.attributes||[];for(var d=0,f=this.attributes;d<f.length;d++){E=(b=f[d]).bufferAttribute,C=b.size||0;if(E.data instanceof Float32Array){(U=new Float32Array(this.maxInstancedCount*C)).set(E.data,0);var p=new o.Attribute(U,C,!0,!0);p.setDynamic(!0),b.bufferAttribute=p,this.geometry.addAttribute(b.name,p);T=t.get(b.name),_=this.allBufferLocations[b.name]||[];this.allBufferLocations[b.name]=_;for(var g=0,B=_.length;g<B;++g)_[g].buffer.value=U;T||(T=[],t.set(b.name,T));for(n=A,x=this.maxInstancedCount;n<x;++n){F={attribute:b,buffer:{value:U},instanceIndex:n,range:[n*C,n*C+C]};T.push(F),_.push(F)}}}this.scene.container&&this.model&&this.scene.container.remove(this.model)}else{this.maxInstancedCount+=e,this.geometry=new o.Geometry;for(var w=0,y=this.layer.vertexAttributes;w<y.length;w++){(b=y[w]).materialAttribute&&this.geometry.addAttribute(b.name,b.materialAttribute)}this.attributes=[];for(var v=0,m=this.layer.instanceAttributes;v<m.length;v++){var b,E,T,C=(b=m[v]).size||0,U=new Float32Array(C*this.maxInstancedCount);(E=new o.Attribute(U,C,!0,!0)).setDynamic(!0),this.geometry.addAttribute(b.name,E),(T=t.get(b.name))||(T=[],t.set(b.name,T));var _=this.allBufferLocations[b.name]||[];this.allBufferLocations[b.name]=_;for(var Q=Object.assign({},b,{uid:c.uid(),bufferAttribute:E}),n=0;n<this.maxInstancedCount;++n){var F={attribute:Q,buffer:{value:U},instanceIndex:n,range:[n*C,n*C+C]};T.push(F),_.push(F)}this.attributes.push(Q)}this.geometry.maxInstancedCount=0,this.material=this.layer.material.clone();n=0;for(var x=this.layer.uniforms.length;n<x;++n){var I=this.layer.uniforms[n];I.materialUniforms.push(this.material.uniforms[I.name])}}return this.scene&&this.model&&this.scene.container&&this.scene.container.remove(this.model),this.material=this.material||this.layer.material.clone(),this.model=u.generateLayerModel(this.geometry,this.material,this.layer.model.drawMode),this.scene&&this.scene.container&&this.model&&this.scene.container.add(this.model),h("COMPLETE: Resizing unpacked attribute buffer"),{growth:e,newLocations:t}},t.prototype.gatherLocationsIntoGroups=function(e,t){if(0!==this.attributeToPropertyIds.size){h("BEGIN: Unpacked attribute manager grouping new buffer locations");var n,r,i,o,A,a,c,u,l=[];this.attributeToPropertyIds.forEach(function(t,n){l.push({attribute:n,bufferLocationsForAttribute:e.get(n.name)||[],childBufferLocations:(n.childAttributes||[]).map(function(t){return e.get(t.name)||[]}),ids:t,bufferIndex:-1})});for(var d=0;d<t;++d){for(var f={instanceIndex:-1,propertyToBufferLocation:{}},p=0,g=l.length;p<g;++p)if(n=l[p],r=n.attribute,i=n.ids,o=n.bufferLocationsForAttribute)if(A=o[++n.bufferIndex]){if(-1===f.instanceIndex)f.instanceIndex=A.instanceIndex;else if(A.instanceIndex!==f.instanceIndex){s.emitOnce("Instance Attribute Parallelism Error",function(e,t){console.warn(t+": A buffer location does not have a matching instance index which means the buffer locations are not in parallel with each other somehow. Error count: "+e),console.warn(r.name,A)});continue}if(r.childAttributes){A.childLocations=[];for(var B=0,w=r.childAttributes.length;B<w;++B)(c=n.childBufferLocations[B])&&((u=c.shift())?A.childLocations.push(u):(a=r.childAttributes[B],s.emitOnce("Instance Attribute Child Attribute Error",function(e,t){console.warn(t+": A child attribute does not have a buffer location available. Error count: "+e),console.warn("Parent Attribute: "+r.name+" Child Attribute: "+a.name)})))}for(B=0,w=i.length;B<w;++B)f.propertyToBufferLocation[i[B]]=A}else s.emitOnce("Instance Attribute Buffer Error",function(e,t){console.warn(t+": There is an error in forming buffer location groups in InstanceAttributeBufferManager. Error count: "+e)});else s.emitOnce("Instance Attribute Buffer Error",function(e,t){console.warn(t+": There is an error in forming buffer location groups in InstanceAttributeBufferManager. Error count: "+e)});this.availableLocations.push(f)}h("COMPLETE: Unpacked attribute buffer manager buffer location grouping"),s.flushEmitOnce()}},t.prototype.getInstanceCount=function(){return this.maxInstancedCount},t}(l.BufferManagerBase);t.InstanceAttributeBufferManager=f},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.resourceTrigger=function(){},t}(n(8).Instance);t.BasicInstance=o},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o=n(6),A=n(3),a=n(0),s=n(1),c=n(102),u=n(28),l=n(29),h=Math.max,d=n(2)("performance"),f=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.allBufferLocations={},r.availableLocations=[],r.currentInstancedCount=0,r.instanceToBufferLocation={},r.maxInstancedCount=1e3,r.blockSubAttributesLookup=new Map,r.attributeToPropertyIds=new Map,r.updateAllPropertyIdList=[],r.activePropertyId=-1,r.remove=function(e){var t=r.instanceToBufferLocation[e.uid];return t&&(delete r.instanceToBufferLocation[e.uid],r.availableLocations.push(t)),e},r.add=r.doAddWithRegistration,r}return i(t,e),t.prototype.doAddWithRegistration=function(e){var t=this;this.layer.instanceAttributes.forEach(function(n){if(!n.parentAttribute){A.ObservableMonitoring.setObservableMonitor(!0),n.update(e);var r=A.ObservableMonitoring.getObservableMonitorIds(!0);t.attributeToPropertyIds.set(n,r),n===t.layer.activeAttribute&&(t.activePropertyId=r[0])}}),A.ObservableMonitoring.setObservableMonitor(!1),this.makeUpdateAllPropertyIdList();var n=this.resizeBuffer();return this.gatherLocationsIntoGroups(n.newLocations,n.growth),this.add=this.doAdd,this.doAdd(e)},t.prototype.doAdd=function(e){if(this.availableLocations.length<=0){var t=this.resizeBuffer();this.gatherLocationsIntoGroups(t.newLocations,t.growth)}var n=this.availableLocations.shift();return n&&this.geometry?(this.instanceToBufferLocation[e.uid]=n,this.currentInstancedCount=this.geometry.maxInstancedCount=h(this.currentInstancedCount,n.instanceIndex+1),this.model&&(this.model.vertexDrawRange=[0,this.layer.instanceVertexCount],this.model.drawInstances=this.currentInstancedCount,0===this.layer.instanceVertexCount&&(this.model.vertexDrawRange[1]=this.model.drawInstances))):console.error("Add Error: Instance Attribute Buffer Manager failed to pair an instance with a buffer location"),n},t.prototype.destroy=function(){this.geometry&&this.geometry.dispose(),this.material&&this.material.dispose(),this.scene&&this.scene.container&&this.model&&this.scene.container.remove(this.model)},t.prototype.getBufferLocations=function(e){return this.instanceToBufferLocation[e.uid]},t.prototype.getActiveAttributePropertyId=function(){return this.activePropertyId},t.prototype.getUpdateAllPropertyIdList=function(){return this.updateAllPropertyIdList},t.prototype.managesInstance=function(e){return void 0!==this.instanceToBufferLocation[e.uid]},t.prototype.makeUpdateAllPropertyIdList=function(){var e={};this.attributeToPropertyIds.forEach(function(t){e[t[0]]=t[0]}),this.updateAllPropertyIdList=Object.values(e).filter(Boolean)},t.prototype.removeFromScene=function(){this.scene&&this.scene.container&&this.model&&this.scene.container.remove(this.model),delete this.scene},t.prototype.resizeBuffer=function(){var e=0,t=new Map;if(this.changeListContext){e=1e3;for(var n=0,r=this.changeListContext.length;n<r;++n){var i=this.changeListContext[n];switch(i[1]){case a.InstanceDiffType.CHANGE:case a.InstanceDiffType.INSERT:this.instanceToBufferLocation[i[0].uid]||e++}}}if(this.geometry){d("Info: Vertex packing buffer is being resized for layer "+this.layer.id),this.geometry.dispose(),this.geometry=new o.Geometry;for(var A=this.maxInstancedCount,c=0,l=this.layer.vertexAttributes;c<l.length;c++){(O=l[c]).materialAttribute&&this.geometry.addAttribute(O.name,O.materialAttribute)}this.maxInstancedCount+=e,this.attributes=this.attributes||[],this.blockAttributes=this.blockAttributes||[];for(E=0,r=this.blockAttributes.length;E<r;++E){F=(O=this.blockAttributes[E]).bufferAttribute;var h=O.size||0;if(F.data instanceof Float32Array){(Q=new Float32Array(this.maxInstancedCount*h)).set(F.data,0);var f=new o.Attribute(Q,h,!0,!0);O.bufferAttribute=F=f,this.geometry.addAttribute(O.name,f);_=this.blockSubAttributesLookup.get(E),T=O.size||0;if(_)for(x=0,I=_.length;x<I;++x){var p=_[x];(S=t.get(p.name))||(S=[],t.set(p.name,S));M=this.allBufferLocations[p.name]||[];this.allBufferLocations[p.name]=M;R=Object.assign({},p,{uid:s.uid(),packUID:O.packUID,bufferAttribute:F}),N=p.blockIndex||0,P=p.size||1;for(var g=0,B=M.length;g<B;++g){var w=M[g];w.attribute=R,w.buffer={value:Q}}for(n=A;n<this.maxInstancedCount;++n){L={attribute:R,block:E,buffer:{value:Q},instanceIndex:n,range:[n*T+N,n*T+N+P]};S.push(L),M.push(L)}}}}}else{this.maxInstancedCount+=e,this.geometry=new o.Geometry;for(var y=0,v=this.layer.vertexAttributes;y<v.length;y++){(O=v[y]).materialAttribute&&this.geometry.addAttribute(O.name,O.materialAttribute)}this.attributes=[],this.blockAttributes=[];var m=new Map,b=new Map;this.blockSubAttributesLookup=b;for(var n=0,r=this.layer.instanceAttributes.length;n<r;++n){var E=(O=this.layer.instanceAttributes[n]).block||0,T=m.get(E)||0;T=Math.max(T,(O.blockIndex||0)+(O.size||0)),m.set(E,T);var C=b.get(E);C||(C=[],b.set(E,C)),C.push(O)}b.forEach(function(e){return e.sort(function(e,t){return(e.blockIndex||0)-(t.blockIndex||0)})});var E=0;for(r=m.size;E<r;++E){var T=m.get(E)||0,U=s.uid();T||console.warn("Instance Attribute Packing Error: The system tried to build an attribute with a size of zero.","These are the attributes used:",this.layer.instanceAttributes,"These are the block sizes calculated",m,"This is the block to attribute lookup generated",b);var _,Q=new Float32Array(T*this.maxInstancedCount),F=new o.Attribute(Q,T,!0,!0);if(this.geometry.addAttribute("block"+E,F),_=b.get(E)){for(var x=0,I=_.length;x<I;++x){var S,O=_[x];(S=t.get(O.name))||(S=[],t.set(O.name,S));var M=this.allBufferLocations[O.name]||[];this.allBufferLocations[O.name]=M;var R=Object.assign({},O,{uid:E,packUID:U,bufferAttribute:F,size:T}),N=O.blockIndex||0,P=O.size||1;for(n=0;n<this.maxInstancedCount;++n){var L={attribute:R,block:E,buffer:{value:Q},instanceIndex:n,range:[n*T+N,n*T+N+P]};S.push(L),M.push(L)}this.attributes.push(R)}this.blockAttributes.push({uid:s.uid(),packUID:U,bufferAttribute:F,name:"block"+E,size:a.InstanceAttributeSize.FOUR,update:function(){return[0]}})}else console.warn("Instance Attribute Packing Buffer Error: Somehow there are no attributes associated with a block.","These are the attributes used:",this.layer.instanceAttributes,"These are the block sizes calculated",m,"This is the block to attribute lookup generated",b)}this.geometry.maxInstancedCount=0,this.material=this.layer.material.clone();n=0;for(var H=this.layer.uniforms.length;n<H;++n){var D=this.layer.uniforms[n];D.materialUniforms.push(this.material.uniforms[D.name])}}return this.scene&&this.model&&this.scene.container&&this.scene.container.remove(this.model),this.material=this.material||this.layer.material.clone(),this.model=u.generateLayerModel(this.geometry,this.material,this.layer.model.drawMode),this.scene&&this.scene.container&&this.model&&this.scene.container.add(this.model),{growth:e,newLocations:t}},t.prototype.gatherLocationsIntoGroups=function(e,t){if(0!==this.attributeToPropertyIds.size){var n=[];this.attributeToPropertyIds.forEach(function(t,r){n.push({attribute:r,bufferLocationsForAttribute:e.get(r.name)||[],childBufferLocations:(r.childAttributes||[]).map(function(t){return e.get(t.name)||[]}),ids:t,bufferIndex:-1})});for(var r=0;r<t;++r){for(var i={instanceIndex:-1,propertyToBufferLocation:{}},o=function(e,t){var r=n[e],o=r.attribute,A=r.ids,a=r.bufferLocationsForAttribute;if(!a)return c.emitOnce("Instance Attribute Buffer Error",function(e,t){console.warn(t+": There is an error in forming buffer location groups in InstanceAttributePackingBufferManager. Error count: "+e)}),"continue";var s=a[++r.bufferIndex];if(!s)return c.emitOnce("Instance Attribute Buffer Error",function(e,t){console.warn(t+": There is an error in forming buffer location groups in InstanceAttributePackingBufferManager. Error count: "+e)}),"continue";if(-1===i.instanceIndex)i.instanceIndex=s.instanceIndex;else if(s.instanceIndex!==i.instanceIndex)return c.emitOnce("Instance Attribute Parallelism Error",function(e,t){console.warn(t+": A buffer location does not have a matching instance index which means the buffer locations are not in parallel with each other somehow. Error count: "+e),console.warn(o.name,s)}),"continue";if(o.childAttributes){for(var u=[],l=function(e,t){var n=o.childAttributes[e],i=r.childBufferLocations[e];if(i){var A=i.shift();A?u.push(A):c.emitOnce("Instance Attribute Child Attribute Error",function(e,t){console.warn(t+": A child attribute does not have a buffer location available. Error count: "+e),console.warn("Parent Attribute: "+o.name+" Child Attribute: "+n.name)})}},h=0,d=o.childAttributes.length;h<d;++h)l(h);s.childLocations=u}for(h=0,d=A.length;h<d;++h){var f=A[h];i.propertyToBufferLocation[f]=s}},A=0,a=n.length;A<a;++A)o(A);this.availableLocations.push(i)}c.flushEmitOnce()}},t.prototype.getInstanceCount=function(){return this.maxInstancedCount},t}(l.BufferManagerBase);t.InstanceAttributePackingBufferManager=f},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),A=n(48),a=n(101),s=n(31),c=n(4),u=n(40),l="EasingIOExpansion",h=Math.abs,d=Math.max,f={duration:0,start:[0],end:[0],startTime:0},p={1:"float",2:"vec2",3:"vec3",4:"vec4",9:"mat3",16:"mat4",99:"vec4"},g="easingMethod",B="T";var w=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.baseAttributeName=new Map,t}return i(t,e),t.prototype.expand=function(e,t,n,r){for(var i,s=new Set,u=[],l=[],p=0,g=t;p<g.length;p++){var B=g[p];i=B,Boolean(i)&&i.easing&&void 0!==i.size&&u.push(B)}var w={};e.easingId=w;for(var y=function(t,n){var r=u[t],i=r.easing,p=i.cpu,g=i.loop,B=i.uid,y=r.name,m=r.size,b=r.update,E=B;v.baseAttributeName.set(r,r.name),r.name="_"+r.name+"_end",w[r.name]=E,s.has(E)&&console.error("Undefined behavior occurs if you reuse an IAutoEasingMethod. Please ensure you are using uid() from the util to give the IAutoEasingMethod its uid, or just use the default provided methods"),s.add(E);var T,C,U,_,Q,F,x,I,S,O,M,R={values:f};r.update=function(t){if(S=e.surface.frameMetrics,C=r.easing.delay,U=r.easing.duration,x=b(t),I=S.currentTime,O=t.easing.get(E),M&&O?t.reactivate&&(O.end=M.copy(x),O.start=M.copy(x),O.startTime=I):(M=c.VecMath(x),O=new a.EasingProps({duration:U,end:M.copy(x),start:M.copy(x),startTime:I}),t.easing.set(E,O)),_=U,T=C,(Q=O).isTimeSet&&(_=Q.duration||U,T=Q.delay||0),!Q.isManualStart){switch(F=1,g){case A.AutoEasingLoopStyle.CONTINUOUS:F=(I-Q.startTime)/_;break;case A.AutoEasingLoopStyle.REPEAT:F=(I-Q.startTime)/_%1;break;case A.AutoEasingLoopStyle.REFLECT:var n=(I-Q.startTime)/_;F=2*h(n/2%1-.5);break;case A.AutoEasingLoopStyle.NONE:default:F=(I-Q.startTime)/_}Q.start=p(Q.start,Q.end,F)}return Q.startTime=I+T,Q.end=M.copy(x),R.values=Q,e.animationEndTime=d(e.animationEndTime,Q.startTime+_+S.frameDuration),x},r.childAttributes=r.childAttributes||[];var N={name:"_"+y+"_start",parentAttribute:r,size:m,update:function(e){return R.values.start}};r.childAttributes.push(N),l.push(N);var P={name:"_"+y+"_start_time",parentAttribute:r,size:o.InstanceAttributeSize.ONE,update:function(e){return[R.values.startTime]}};r.childAttributes.push(P),l.push(P);var L={name:"_"+y+"_duration",parentAttribute:r,size:o.InstanceAttributeSize.ONE,update:function(e){return[R.values.duration]}};r.childAttributes.push(L),l.push(L)},v=this,m=0,b=u.length;m<b;++m)y(m);return{instanceAttributes:l,vertexAttributes:[],uniforms:[]}},t.prototype.validate=function(e,t,n,r){var i=!1;return t.forEach(function(e){e.easing&&e.resource&&(console.warn("An instance attribute can not have both easing and resource properties. Undefined behavior will occur."),console.warn(e),i=!0),e.easing&&void 0===e.size&&console.warn("An Instance Attribute with easing MUST have a size declared")}),!i},t.prototype.processAttributeDestructuring=function(e,t,n,r,i,o){for(var a=0,s=i.length;a<s;++a){var c=i[a];if(c.easing&&c.size){var u=this.baseAttributeName.get(c);if(u){this.baseAttributeName.delete(c);var h="_"+u+"_time",d="_"+u+"_duration",f="_"+u+"_start_time";switch(c.easing.loop){case A.AutoEasingLoopStyle.CONTINUOUS:this.setDeclaration(t,h,"  float "+h+" = (currentTime - "+f+") / "+d+";\n",l);break;case A.AutoEasingLoopStyle.REPEAT:this.setDeclaration(t,h,"  float "+h+" = clamp(fract((currentTime - "+f+") / "+d+"), 0.0, 1.0);\n",l);break;case A.AutoEasingLoopStyle.REFLECT:var g="_"+u+"_timePassed",B="_"+u+"_pingPong";this.setDeclaration(t,g,"  float "+g+" = (currentTime - "+f+") / "+d+";\n",l),this.setDeclaration(t,B,"  float "+B+" = abs((fract("+g+" / 2.0)) - 0.5) * 2.0;\n",l),this.setDeclaration(t,h,"  float "+h+" = clamp("+B+", 0.0, 1.0);\n",l);break;case A.AutoEasingLoopStyle.NONE:default:this.setDeclaration(t,h,"  float "+h+" = clamp((currentTime - "+f+") / "+d+", 0.0, 1.0);\n",l)}this.setDeclaration(t,u,"  "+p[c.size]+" "+u+" = "+c.easing.methodName+"(_"+u+"_start, _"+u+"_end, _"+u+"_time);\n",l)}else console.warn("Could not determine a base name for an easing attribute.")}}return""},t.prototype.processHeaderInjection=function(e,t,n,r,i,A,a){var c=this,u={injection:""};if(e!==o.ShaderInjectionTarget.VERTEX)return u;var h=new Map;if(u.injection="// Auto Easing Methods specified by the layer\n",A.forEach(function(e){if(e.easing&&e.size){var t=h.get(e.easing.methodName);t||(t=new Map,h.set(e.easing.methodName,t)),t.set(e.size,e.easing.gpu)}}),0===h.size)return u.injection="",u;var d={name:"Easing Method Generation",values:[g]};return h.forEach(function(e,n){e.forEach(function(e,r){var i,o=p[r],A=((i={})[g]=o+" "+n+"("+o+" start, "+o+" end, float t)",i[B]=""+o,i),a=s.shaderTemplate({options:A,required:d,shader:e});c.setDeclaration(t,o+" "+n,a.shader+"\n",l)})}),u},t}(u.BaseIOExpansion);t.EasingIOExpansion=w},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(8),i=n(0),o=function(){function e(e){this.index=0,this.available=4,this.index=e}return e.prototype.setAttribute=function(e){return(e.size||0)<=this.available&&(e.block=this.index,e.blockIndex=4-this.available,this.available-=e.size||0,!0)},e}();t.packAttributes=function(e){!function(e){e.forEach(function(e){if(e.resource&&void 0===e.size&&(e.size=i.InstanceAttributeSize.FOUR),!e.size)try{var t=e.update(new r.Instance({}));t.length>0&&t.length<=i.InstanceAttributeSize.FOUR&&(e.size=t.length)}catch(t){console.warn("The system could not determine the size of the provided attribute. Please provide the size of the attribute:",e)}})}(e);var t=[new o(0)];e.forEach(function(e){if(!t.find(function(t){return!!t.setAttribute(e)&&Boolean(t)})){var n=new o(t.length);t.push(n),n.setAttribute(e)||console.warn("There was a problem packing an attribute into a block. No block would accommodate it:",e)}})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(105),i=n(15),o=n(0),A=n(31),a=n(75),s=n(190),c=n(70),u=function(){function e(){this.metricsProcessing=new s.MetricsProcessing}return e.prototype.process=function(e,t,n,s){var c;try{var u=this.processImports(e,t);if(!u)return null;var l=r.injectShaderIO(e.surface.gl,e,t,n,s,u),h=l.vertexAttributes,d=l.instanceAttributes,f=l.uniforms;i.getLayerBufferType(e.surface.gl,e,h,d),this.metricsProcessing.process(d,f);for(var p="",g="",B="",w={uniforms:[]},y=new Map,v=new Map,m=new Map,b=0,E=n.length;b<E;++b){var T=n[b],C=T.processHeaderInjection(o.ShaderInjectionTarget.VERTEX,y,e,this.metricsProcessing,h,d,f);p+=C.injection,C.material&&(w.uniforms=w.uniforms.concat(C.material.uniforms||[]));var U=T.processHeaderInjection(o.ShaderInjectionTarget.FRAGMENT,v,e,this.metricsProcessing,h,d,f);g+=U.injection,U.material&&(w.uniforms=w.uniforms.concat(U.material.uniforms||[])),B+=T.processAttributeDestructuring(e,m,this.metricsProcessing,h,d,f)}var _="";y.forEach(function(e){_+=e}),p=_+p,_="",v.forEach(function(e){_+=e}),g=_+g,_="",m.forEach(function(e){_+=e}),B=_+B;var Q="precision highp float;\n\n"+p+u.vs,F="precision highp float;\n\n"+g+u.fs,x=((c={})[a.templateVars.attributes]=B,c),I=A.shaderTemplate({options:x,required:void 0,shader:Q});return x={},{fs:A.shaderTemplate({options:x,required:void 0,shader:F}).shader.trim(),materialUniforms:w.uniforms,maxInstancesPerBuffer:this.metricsProcessing.maxInstancesPerUniformBuffer,modules:Array.from(u.shaderModuleUnits),vs:I.shader.trim(),vertexAttributes:h,instanceAttributes:d,uniforms:f}}catch(t){return console.warn("An unknown error occurred while processing the shaders for layer:",e.id),console.warn("Error:"),console.warn(t&&(t.stack||t.message)),null}},e.prototype.processImports=function(e,t){var n=new Set,r=e.baseShaderModules(t),i=c.ShaderModule.process(e.id,t.vs,o.ShaderInjectionTarget.VERTEX,r.vs);if(i.errors.length>0)return console.warn.apply(console,["Error processing imports for the vertex shader of layer:",e.id,"Errors"].concat(i.errors.reverse())),null;var A=c.ShaderModule.process(e.id,t.fs,o.ShaderInjectionTarget.FRAGMENT,r.fs);return A.errors.length>0?(console.warn.apply(console,["Error processing imports for the fragment shader of layer:",e.id,"Errors"].concat(A.errors.reverse())),null):(i.shaderModuleUnits.forEach(function(e){return n.add(e)}),A.shaderModuleUnits.forEach(function(e){return n.add(e)}),{fs:A.shader||"",vs:i.shader||"",shaderModuleUnits:n})},e}();t.ShaderProcessor=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(23),i=function(){function e(){}return e.calculateUniformBlockUseage=function(e){for(var t=0,n=0,r=e.length;n<r;++n)t+=Math.ceil(e[n].size/4);return t},e.prototype.process=function(t,n){var i=this;this.instanceMaxBlock=0,t.forEach(function(e){i.instanceMaxBlock=Math.max(i.instanceMaxBlock,e.block||0)}),this.blocksPerInstance=this.instanceMaxBlock+1,this.maxUniforms=r.WebGLStat.MAX_VERTEX_UNIFORMS,this.maxUniformsForInstancing=this.maxUniforms-e.calculateUniformBlockUseage(n),this.maxInstancesPerUniformBuffer=Math.floor(this.maxUniformsForInstancing/this.blocksPerInstance),this.totalInstanceUniformBlocks=this.maxInstancesPerUniformBuffer*this.blocksPerInstance},e}();t.MetricsProcessing=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=n(15),o=n(192),A=n(106),a=n(193),s=n(108),c=function(){function e(e,t){this.layer=e,this.bufferManager=t}return e.prototype.makeProcessor=function(){return this.processing?this.processing:(this.layer.bufferType===i.LayerBufferType.INSTANCE_ATTRIBUTE||this.layer.bufferType===i.LayerBufferType.INSTANCE_ATTRIBUTE_PACKING?(this.layer.picking&&this.layer.picking.type===r.PickType.SINGLE&&(this.processor=new o.InstanceAttributeColorDiffProcessor(this.layer,this.bufferManager)),this.processor||(this.processor=new A.InstanceAttributeDiffProcessor(this.layer,this.bufferManager))):(this.layer.picking&&this.layer.picking.type===r.PickType.SINGLE&&(this.processor=new a.UniformColorDiffProcessor(this.layer,this.bufferManager)),this.processor||(this.processor=new s.UniformDiffProcessor(this.layer,this.bufferManager))),this.processing=[this.processor.changeInstance,this.processor.addInstance,this.processor.removeInstance],this.processing)},e}();t.InstanceDiffManager=c},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),A=n(29),a=n(106),s=[],c=function(e){function t(t,n){var r=e.call(this,t,n)||this;return t.picking.type===o.PickType.SINGLE?(r.colorPicking=t.picking,r.colorPicking.uidToInstance=new Map):console.warn("Diff Processing Error: A layer has a diff processor requesting Color Processing but the picking type is not valid."),r}return i(t,e),t.prototype.addInstance=function(e,t,n,r){if(r)e.changeInstance(e,t,s,r);else{var i=e.layer.bufferManager.add(t);A.isBufferLocationGroup(i)?(t.active=!0,t.easingId=e.layer.easingId,e.updateInstance(e.layer,t,s,i),e.colorPicking.uidToInstance.set(t.uid,t)):console.warn("A data cluster was not provided by the manager to associate an instance with.")}},t.prototype.changeInstance=function(e,t,n,r){r?e.updateInstance(e.layer,t,n,r):e.addInstance(e,t,s,r)},t.prototype.removeInstance=function(e,t,n,r){r&&(t.active=!1,t.clearEasing(),e.updateInstance(e.layer,t,s,r),e.layer.bufferManager.remove(t),e.colorPicking.uidToInstance.delete(t.uid))},t}(a.InstanceAttributeDiffProcessor);t.InstanceAttributeColorDiffProcessor=c},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),A=n(59),a=n(108),s=[],c=function(e){function t(t,n){var r=e.call(this,t,n)||this;return t.picking.type===o.PickType.SINGLE?(r.colorPicking=t.picking,r.colorPicking.uidToInstance=new Map):console.warn("Diff Processing Error: A layer has a diff processor requesting Color Processing but the picking type is not valid."),r}return i(t,e),t.prototype.addInstance=function(e,t,n,r){if(r)e.changeInstance(e,t,s,r);else{var i=e.layer.bufferManager.add(t);A.isUniformBufferLocation(i)?(t.active=!0,t.easingId=e.layer.easingId,e.updateInstance(e.layer,t,i),e.colorPicking.uidToInstance.set(t.uid,t)):console.warn("A data cluster was not provided by the manager to associate an instance with.")}},t.prototype.changeInstance=function(e,t,n,r){r?e.updateInstance(e.layer,t,r):e.addInstance(e,t,s,r)},t.prototype.removeInstance=function(e,t,n,r){r&&(t.active=!1,t.clearEasing(),e.updateInstance(e.layer,t,r),e.layer.bufferManager.remove(t),e.colorPicking.uidToInstance.delete(t.uid))},t}(a.UniformDiffProcessor);t.UniformColorDiffProcessor=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(71),i=n(0);var o=function(){function e(e){this.isMouseOver=new Set,this.isMouseDown=new Set,this.isTouchOver=new Map,this.isTouchDown=new Map,this.layer=e}return e.prototype.getColorPickInstance=function(){return this.colorPicking&&this.layer.diffManager&&((e=this.layer.diffManager.processor)&&e.colorPicking)?this.layer.diffManager.processor.colorPicking.uidToInstance.get(16777215-this.colorPicking.nearestColor):null;var e},e.prototype.handleMouseOver=function(e,t){},e.prototype.handleTouchOver=function(e,t,n){},e.prototype.handleMouseDown=function(e,t){var n=this;if(this.layer.picking&&this.layer.picking.type!==i.PickType.NONE){var r=this.layer.props.onMouseDown;if(r){var o=e.screenToWorld(t.screen.position),A=[];if(this.layer.picking.type===i.PickType.SINGLE){var a=this.getColorPickInstance();a&&A.push(a)}r({interaction:t,instances:A,layer:this.layer.id,projection:e,screen:t.screen.position,world:o}),this.isMouseDown.clear(),A.forEach(function(e){return n.isMouseDown.add(e)})}}},e.prototype.handleTouchDown=function(e,t,n){var o=this.layer.props,A=o.onTouchDown,a=o.onTouchOver;if(this.layer.picking&&this.layer.picking.type!==i.PickType.NONE&&(A||a)){var s=e.screenToWorld(n.screen.position),c=[];if(this.layer.picking.type===i.PickType.SINGLE){var u=this.getColorPickInstance();u&&c.push(u)}var l={interaction:t,touch:n,instances:c,layer:this.layer.id,projection:e,screen:n.screen.position,world:s},h=r.mapInjectDefault(this.isTouchDown,n.touch.touch.identifier,function(){return new Set}),d=r.mapInjectDefault(this.isTouchOver,n.touch.touch.identifier,function(){return new Set});c.forEach(function(e){h.add(e),d.add(e)}),a&&a(l),A&&A(l)}},e.prototype.handleMouseOut=function(e,t){if(this.layer.picking&&this.layer.picking.type!==i.PickType.NONE){var n=this.layer.props.onMouseOut;if(n){var r=e.screenToWorld(t.screen.position);n({interaction:t,instances:Array.from(this.isMouseOver.keys()),layer:this.layer.id,projection:e,screen:t.screen.position,world:r})}}this.isMouseOver.clear()},e.prototype.handleTouchOut=function(e,t,n){var r=this.layer.props.onTouchOut;if(this.layer.picking&&this.layer.picking.type!==i.PickType.NONE&&r){var o=e.screenToWorld(n.screen.position);r({interaction:t,touch:n,instances:Array.from(this.isMouseOver.keys()),layer:this.layer.id,projection:e,screen:n.screen.position,world:o}),this.isTouchOver.delete(n.touch.touch.identifier)}},e.prototype.handleMouseUp=function(e,t){var n=this,r=this.layer.props,o=r.onMouseUp,A=r.onMouseUpOutside;if(this.layer.picking&&this.layer.picking.type!==i.PickType.NONE&&o){var a=e.screenToWorld(t.screen.position),s=[];if(this.layer.picking.type===i.PickType.SINGLE){var c=this.getColorPickInstance();c&&s.push(c)}var u={interaction:t,instances:s,layer:this.layer.id,projection:e,screen:t.screen.position,world:a};o(u),s.forEach(function(e){return n.isMouseDown.delete(e)}),this.isMouseDown.size<=0||!A||A(u={interaction:t,instances:Array.from(this.isMouseDown.values()),layer:this.layer.id,projection:e,screen:t.screen.position,world:a})}},e.prototype.handleTouchUp=function(e,t,n){var o=this.layer.props,A=o.onTouchUp,a=o.onTouchUpOutside,s=o.onTouchOut,c=o.onTouchAllEnd;if(this.layer.picking&&this.layer.picking.type!==i.PickType.NONE&&(A||a||s||c)){var u=e.screenToWorld(n.screen.position),l=[];if(this.layer.picking.type===i.PickType.SINGLE){var h=this.getColorPickInstance();h&&l.push(h)}var d={interaction:t,touch:n,instances:l,layer:this.layer.id,projection:e,screen:n.screen.position,world:u};s&&s(d),A&&A(d);var f=r.mapGetWithDefault(this.isTouchDown,n.touch.touch.identifier,new Set);l.forEach(function(e){return f.delete(e)}),f.size>0&&a&&a(d={interaction:t,touch:n,instances:Array.from(f.values()),layer:this.layer.id,projection:e,screen:n.screen.position,world:u}),this.isTouchDown.delete(n.touch.touch.identifier),this.isTouchDown.size<=0&&c&&c(d={interaction:t,touch:n,instances:[],layer:this.layer.id,projection:e,screen:n.screen.position,world:u})}},e.prototype.handleMouseMove=function(e,t){var n=this,r=this.layer.props,o=r.onMouseOver,A=r.onMouseMove,a=r.onMouseOut;if(this.layer.picking&&this.layer.picking.type!==i.PickType.NONE&&(o||A||a)){var s=void 0,c=e.screenToWorld(t.screen.position),u=[];if(this.layer.picking.type===i.PickType.SINGLE){var l=this.getColorPickInstance();l&&u.push(l)}var h=new Set;if(u.forEach(function(e){return h.add(e)}),a){var d=[];this.isMouseOver.forEach(function(e){h.has(e)||d.push(e)}),s={interaction:t,instances:d,layer:this.layer.id,projection:e,screen:t.screen.position,world:c},d.length>0&&a(s)}if(o){var f=u.filter(function(e){return!n.isMouseOver.has(e)});s={interaction:t,instances:f,layer:this.layer.id,projection:e,screen:t.screen.position,world:c},f.length>0&&o(s)}A&&A(s={interaction:t,instances:u,layer:this.layer.id,projection:e,screen:t.screen.position,world:c}),this.isMouseOver=h}},e.prototype.handleTouchMove=function(e,t,n){var o=this.layer.props,A=o.onTouchOver,a=o.onTouchMove,s=o.onTouchOut;if(this.layer.picking&&this.layer.picking.type!==i.PickType.NONE&&(A||a||s)){var c=void 0,u=e.screenToWorld(n.screen.position),l=[];if(this.layer.picking.type===i.PickType.SINGLE){var h=this.getColorPickInstance();h&&l.push(h)}var d=r.mapGetWithDefault(this.isTouchOver,n.touch.touch.identifier,new Set),f=new Set;if(l.forEach(function(e){return f.add(e)}),s){var p=[];d.forEach(function(e){f.has(e)||p.push(e)}),c={interaction:t,touch:n,instances:p,layer:this.layer.id,projection:e,screen:n.screen.position,world:u},p.length>0&&s(c)}if(A){var g=l.filter(function(e){return!d.has(e)});c={interaction:t,touch:n,instances:g,layer:this.layer.id,projection:e,screen:n.screen.position,world:u},g.length>0&&A(c)}a&&a(c={interaction:t,touch:n,instances:l,layer:this.layer.id,projection:e,screen:n.screen.position,world:u}),this.isMouseOver=f}},e.prototype.handleMouseClick=function(e,t){if(this.layer.picking&&this.layer.picking.type!==i.PickType.NONE){var n=this.layer.props.onMouseClick;if(n){var r=e.screenToWorld(t.screen.position),o=[];if(this.layer.picking.type===i.PickType.SINGLE){var A=this.getColorPickInstance();A&&o.push(A)}n({interaction:t,instances:o,layer:this.layer.id,projection:e,screen:t.screen.position,world:r})}}},e.prototype.handleTap=function(e,t,n){if(this.layer.picking&&this.layer.picking.type!==i.PickType.NONE){var r=this.layer.props.onTap;if(r){var o=e.screenToWorld(n.screen.position),A=[];if(this.layer.picking.type===i.PickType.SINGLE){var a=this.getColorPickInstance();a&&A.push(a)}r({interaction:t,touch:n,instances:A,layer:this.layer.id,projection:e,screen:n.screen.position,world:o})}}},e.prototype.handleMouseDrag=function(e,t){},e}();t.LayerInteractionHandler=o},function(e,t){e.exports="// These are projection methods utilizing the simpler camera 2d approach.\n// This assumes we have a 3D camera projection which should be preferably orthographic layered with simpler 2D camera\n// controls for manipulating the 2D world.\nvec3 cameraSpace(vec3 world) {\n  return (world + cameraOffset) * cameraScale2D;\n}\n\nvec3 cameraSpaceSize(vec3 worldSize) {\n  return worldSize * cameraScale2D;\n}\n\nvec4 clipSpace(vec3 world) {\n  return vec4(((projection * modelView) * vec4(cameraSpace(world), 1.0)).xyz, 1.0);\n}\n\nvec4 clipSpaceSize(vec3 worldSize) {\n  return vec4(((projection * modelView) * vec4(cameraSpaceSize(worldSize), 0.0)).xyz, 1.0);\n}\n"},function(e,t,n){"use strict";function r(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),r(n(197)),r(n(32)),r(n(50)),r(n(7)),r(n(198)),r(n(199))},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o,A=n(42),a=n(5),s=n(1);!function(e){e[e.TOP_LEFT=0]="TOP_LEFT",e[e.TOP_MIDDLE=1]="TOP_MIDDLE",e[e.TOP_RIGHT=2]="TOP_RIGHT",e[e.MIDDLE_LEFT=3]="MIDDLE_LEFT",e[e.MIDDLE=4]="MIDDLE",e[e.MIDDLE_RIGHT=5]="MIDDLE_RIGHT",e[e.BOTTOM_LEFT=6]="BOTTOM_LEFT",e[e.BOTTOM_MIDDLE=7]="BOTTOM_MIDDLE",e[e.BOTTOM_RIGHT=8]="BOTTOM_RIGHT"}(o=t.CameraBoundsAnchor||(t.CameraBoundsAnchor={}));var c=function(e){function t(t){var n=e.call(this,{})||this;return n._uid=s.uid(),n.isPanning=!1,n.isScaling=!1,n.panFilter=function(e,t,n){return e},n.scaleFilter=function(e,t,n){return e},n.startViews=[],n.optimizedViews=new Set,n.cameraImmediateAnimation=s.AutoEasingMethod.immediate(0),n.targetTouches=new Set,n.onRangeChanged=function(e,t){},n.startViewDidStart=!1,n.applyBounds=function(){if(n.bounds&&n.camera){var e=n.getView(n.bounds.view);n.applyScaleBounds(),e&&(n.camera.control2D.getOffset()[0]=n.boundsHorizontalOffset(e,n.bounds),n.camera.control2D.getOffset()[1]=n.boundsVerticalOffset(e,n.bounds))}},n.applyScaleBounds=function(){n.camera&&n.bounds&&(n.bounds.scaleMin&&n.camera.control2D.setScale(s.max3(n.camera.control2D.getScale(),n.bounds.scaleMin)),n.bounds.scaleMax&&n.camera.control2D.setScale(s.min3(n.camera.control2D.getScale(),n.bounds.scaleMax)))},n.handleCameraViewChange=function(e,t){if(t===n.startViews[0]){var r=e.surface.getProjections(t);r&&n.onRangeChanged(e,r)}},t.bounds&&n.setBounds(t.bounds),n._camera=t.camera,n.scaleFactor=t.scaleFactor||1e3,n.ignoreCoverViews=t.ignoreCoverViews||!1,n.twoFingerPan=t.twoFingerPan||!1,t.startView&&(Array.isArray(t.startView)?(n.startViews=t.startView,n._camera.control2D.setViewChangeHandler(n.handleCameraViewChange)):(n.startViews=[t.startView],n._camera.control2D.setViewChangeHandler(n.handleCameraViewChange))),n.panFilter=t.panFilter||n.panFilter,n.scaleFilter=t.scaleFilter||n.scaleFilter,n.onRangeChanged=t.onRangeChanged||n.onRangeChanged,t.wheelShouldScroll&&(n.wheelShouldScroll=t.wheelShouldScroll),n}return i(t,e),Object.defineProperty(t.prototype,"uid",{get:function(){return this._uid},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"camera",{get:function(){return this._camera},enumerable:!0,configurable:!0}),t.prototype.anchoredByBoundsHorizontal=function(e,t){switch(t.anchor){case o.TOP_LEFT:case o.MIDDLE_LEFT:case o.BOTTOM_LEFT:return-(t.worldBounds.left-t.screenPadding.left/this.camera.control2D.getScale()[0]);case o.TOP_MIDDLE:case o.MIDDLE:case o.BOTTOM_MIDDLE:return-(t.worldBounds.right-t.worldBounds.width/2-(e.screenBounds.width+t.screenPadding.right)/this.camera.control2D.getScale()[0]*.5);case o.TOP_RIGHT:case o.MIDDLE_RIGHT:case o.BOTTOM_RIGHT:return-(t.worldBounds.right-(e.screenBounds.width-t.screenPadding.right)/this.camera.control2D.getScale()[0])}},t.prototype.anchoredByBoundsVertical=function(e,t){switch(t.anchor){case o.TOP_LEFT:case o.TOP_MIDDLE:case o.TOP_RIGHT:return-(t.worldBounds.top-t.screenPadding.top/this.camera.control2D.getScale()[1]);case o.MIDDLE_LEFT:case o.MIDDLE:case o.MIDDLE_RIGHT:return-(t.worldBounds.bottom-t.worldBounds.height/2-(e.screenBounds.height+t.screenPadding.bottom)/this.camera.control2D.getScale()[1]*.5);case o.BOTTOM_LEFT:case o.BOTTOM_MIDDLE:case o.BOTTOM_RIGHT:return-(t.worldBounds.bottom-(e.screenBounds.height-t.screenPadding.bottom)/this.camera.control2D.getScale()[1])}},t.prototype.boundsHorizontalOffset=function(e,t){var n=e.worldToScreen([t.worldBounds.left,t.worldBounds.top]),r=e.worldToScreen([t.worldBounds.right,t.worldBounds.bottom]);return r[0]-n[0]+t.screenPadding.left+t.screenPadding.right-e.screenBounds.width<0?this.anchoredByBoundsHorizontal(e,t):r[0]<e.screenBounds.right-t.screenPadding.right?-t.worldBounds.right+(e.screenBounds.width-t.screenPadding.right)/this.camera.control2D.getScale()[0]:n[0]>e.screenBounds.left+t.screenPadding.left?-t.worldBounds.left+t.screenPadding.left/this.camera.control2D.getScale()[0]:this.camera.control2D.getOffset()[0]},t.prototype.boundsVerticalOffset=function(e,t){var n=e.worldToScreen([t.worldBounds.left,t.worldBounds.top]),r=e.worldToScreen([t.worldBounds.right,t.worldBounds.bottom]);return r[1]-n[1]+t.screenPadding.top+t.screenPadding.bottom-e.screenBounds.height<0?this.anchoredByBoundsVertical(e,t):r[1]<e.screenBounds.bottom-t.screenPadding.bottom?-t.worldBounds.bottom+(e.screenBounds.height-t.screenPadding.bottom)/this.camera.control2D.getScale()[1]:n[1]>e.screenBounds.top+t.screenPadding.top?-t.worldBounds.top+t.screenPadding.top/this.camera.control2D.getScale()[0]:this.camera.control2D.getOffset()[1]},t.prototype.canStart=function(e){return 0===this.startViews.length||this.startViews&&this.startViews.indexOf(e)>-1||this.startViewDidStart&&this.ignoreCoverViews},t.prototype.centerOn=function(e,t){if(this.camera.control2D.surface){var n=this.camera.control2D.surface.getViewSize(e);if(n){var r=[n.width/2,n.height/2,0],i=s.subtract3(t,s.divide3(r,this.camera.control2D.getScale())),o=s.scale3(i,-1);this.setOffset(e,o)}}},t.prototype.doPan=function(e,t,n){var r=s.vec3(s.divide2(n,this.camera.control2D.getScale()),0);this.panFilter&&(r=this.panFilter(r,t,e)),this.camera.control2D.getOffset()[0]+=r[0],this.camera.control2D.getOffset()[1]+=r[1],this.applyBounds(),this.onRangeChanged(this.camera,t),this.applyBounds(),this.camera.control2D.update()},t.prototype.doScale=function(e,t,n,r){var i=t.screenToWorld(e),o=this.camera.control2D.getScale()[0]||1,A=this.camera.control2D.getScale()[1]||1;this.scaleFilter&&(r=this.scaleFilter(r,t,n)),this.camera.control2D.getScale()[0]=o+r[0],this.camera.control2D.getScale()[1]=A+r[1],this.applyScaleBounds();var a=t.screenToWorld(e),c=s.subtract2(i,a);this.camera.control2D.getOffset()[0]-=c[0],this.camera.control2D.getOffset()[1]-=c[1],this.applyBounds(),this.onRangeChanged(this.camera,t),this.applyBounds(),this.camera.control2D.update(),this.camera.control2D.animation=this.cameraImmediateAnimation},t.prototype.filterTouchesByValidStart=function(e){return this.ignoreCoverViews?e.filter(s.touchesContainsStartView(this.startViews)):e.filter(s.touchesHasStartView(this.startViews))},t.prototype.findCoveredStartView=function(e){var t=this,n=e.target.views.find(function(e){return t.startViews.indexOf(e.view.id)>-1});this.startViewDidStart=Boolean(n),n&&(this.coveredStartView=n.view)},t.prototype.getRange=function(e){var t=this.getProjection(e),n=this.getViewScreenBounds(e);if(t&&n){var r=t.screenToWorld([n.x,n.y]),i=t.screenToWorld([n.right,n.bottom]);return new a.Bounds({height:i[1]-r[1],width:i[0]-r[0],x:r[0],y:r[1]})}return new a.Bounds({x:0,y:0,width:1,height:1})},t.prototype.getTargetView=function(e){return this.startViews&&!this.ignoreCoverViews?e.target.view:this.coveredStartView},t.prototype.handleMouseDown=function(e){this.startViews&&(this.findCoveredStartView(e),e.start&&(this.isPanning=this.canStart(e.start.view.id)||this.isPanning))},t.prototype.handleTouchDown=function(e){if(this.startViews){var t=this.filterTouchesByValidStart(e.allTouches);this.twoFingerPan?t.length>1&&(this.isPanning=!0):t.length>0&&(this.isPanning=!0),t.length>1&&(this.isScaling=!0);for(var n=0,r=t.length;n<r;++n){var i=t[n];this.targetTouches.add(i.touch.touch.identifier)}}},t.prototype.handleMouseUp=function(e){this.startViewDidStart=!1,this.isPanning=!1,this.optimizedViews.forEach(function(e){return e.optimizeRendering=!1}),this.optimizedViews.clear()},t.prototype.handleTouchUp=function(e){var t=this;e.touches.forEach(function(e){t.targetTouches.delete(e.touch.touch.identifier),t.targetTouches.size<=0&&(t.startViewDidStart=!1,t.isPanning=!1,t.optimizedViews.forEach(function(e){return e.optimizeRendering=!1}),t.optimizedViews.clear())}),this.isPanning=!1,this.isScaling=!1,this.targetTouches.size>0&&(this.isPanning=!0),this.targetTouches.size>1&&(this.isScaling=!0)},t.prototype.handleTouchCancelled=function(e){var t=this;e.touches.forEach(function(e){t.targetTouches.delete(e.touch.touch.identifier),t.targetTouches.size<=0&&(t.startViewDidStart=!1,t.isPanning=!1,t.optimizedViews.forEach(function(e){return e.optimizeRendering=!1}),t.optimizedViews.clear())}),this.isPanning=!1,this.isScaling=!1,this.targetTouches.size>0&&(this.isPanning=!0),this.targetTouches.size>1&&(this.isScaling=!0)},t.prototype.handleDrag=function(e){var t=this;e.start&&this.canStart(e.start.view.id)&&(e.target.views.forEach(function(e){e.view.optimizeRendering=!0,t.optimizedViews.add(e.view)}),this.doPan(e.target.views.map(function(e){return e.view}),e.start.view,e.mouse.deltaPosition),this.camera.control2D.animation=this.cameraImmediateAnimation)},t.prototype.handleTouchDrag=function(e){var t=this,n=this.filterTouchesByValidStart(e.allTouches);if(n.length>0&&this.isPanning){for(var r=0,i=n.length;r<i;++r){n[r].target.views.forEach(function(e){e.view.optimizeRendering=!0,t.optimizedViews.add(e.view)})}var o=new Set,A=n.reduce(function(e,t){for(var n=0,r=t.target.views.length;n<r;++n){var i=t.target.views[n];o.add(i.view)}return t.touch.startTime<e.touch.startTime?t:e},n[0]).start.view;if(this.isPanning&&(this.doPan(Array.from(o.values()),A,e.multitouch.centerDelta(n)),this.camera.control2D.animation=this.cameraImmediateAnimation),this.isScaling){var a=e.multitouch.center(n),c=s.subtract2(n[0].touch.currentPosition,a),u=s.subtract2(a,e.multitouch.centerDelta(n)),l=s.subtract2(n[0].touch.previousPosition,u),h=s.length2(c)/s.length2(l),d=[h*this.camera.scale2D[0]-this.camera.scale2D[0],h*this.camera.scale2D[1]-this.camera.scale2D[1],0];1!==h&&this.doScale(a,A,Array.from(o.values()),d)}}},t.prototype.handleWheel=function(e){if(this.findCoveredStartView(e),this.canStart(e.target.view.id))if(this.wheelShouldScroll){var t=[-e.mouse.wheel.delta[0],e.mouse.wheel.delta[1]];e.start&&this.doPan(e.target.views.map(function(e){return e.view}),e.start.view,t)}else{var n=this.camera.control2D.getScale()[0]||1,r=this.camera.control2D.getScale()[1]||1,i=this.getTargetView(e),o=[e.mouse.wheel.delta[1]/this.scaleFactor*n,e.mouse.wheel.delta[1]/this.scaleFactor*r,1];this.doScale(e.screen.position,i,e.target.views.map(function(e){return e.view}),o)}},Object.defineProperty(t.prototype,"pan",{get:function(){return this.camera.control2D.offset},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"scale",{get:function(){return this.camera.control2D.getScale()},enumerable:!0,configurable:!0}),t.prototype.setBounds=function(e){this.bounds=e,this.applyBounds()},t.prototype.setOffset=function(e,t){var n=s.copy3(this.camera.control2D.offset);if(this.camera.control2D.getOffset()[0]=t[0],this.camera.control2D.getOffset()[1]=t[1],this.camera.control2D.getOffset()[2]=t[2],this.applyBounds(),this.camera.control2D.surface){var r=this.camera.control2D.surface.getProjections(e);r&&this.onRangeChanged(this.camera,r)}this.applyBounds();var i=s.copy3(this.camera.control2D.getOffset()),o=this.camera.control2D.animation;this.camera.control2D.setOffset(n),this.camera.control2D.animation=this.cameraImmediateAnimation,this.camera.control2D.setOffset(i),this.camera.control2D.animation=o},t.prototype.setRange=function(e,t){var n=this.getProjection(t),r=this.getViewScreenBounds(t),i=this.getView(t);if(n&&r&&i){var o=s.subtract3([r.width/e.width,r.height/e.height,1],this.camera.control2D.getScale());this.camera.control2D.setScale(s.add3(this.camera.control2D.getScale(),this.scaleFilter(o,i,[i])));var A=s.subtract3([-e.x,-e.y,0],this.camera.control2D.offset);this.camera.control2D.setOffset(s.add3(this.camera.control2D.offset,this.scaleFilter(A,i,[i]))),this.applyBounds(),this.onRangeChanged(this.camera,i),this.applyBounds()}},t.prototype.setRangeChangeHandler=function(e){this.onRangeChanged=e},t}(A.SimpleEventHandler);t.BasicCamera2DController=c},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o=n(32),A=function(e){function t(t,n){var r=e.call(this,t)||this;return r.offsetFilter=function(e){return e},r.scaleFilter=function(e){return e},r.base=n.base,r.offsetFilter=n.offsetFilter||r.offsetFilter,r.scaleFilter=n.scaleFilter||r.scaleFilter,r}return i(t,e),Object.defineProperty(t.prototype,"offset",{get:function(){return this.offsetFilter(this.base.offset)},set:function(e){},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"scale",{get:function(){return this.scaleFilter(this.base.scale)},set:function(e){},enumerable:!0,configurable:!0}),t}(n(50).Control2D),a=function(e){function t(t){var n=e.call(this)||this;return n.base=t.base,n._control2D=new A(n.base,{base:n.base.control2D,offsetFilter:t.offsetFilter,scaleFilter:t.scaleFilter}),n}return i(t,e),Object.defineProperty(t.prototype,"control2D",{get:function(){return this._control2D},set:function(e){},enumerable:!0,configurable:!0}),t}(o.Camera2D);t.ReferenceCamera2D=a},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o=n(5),A=n(21),a=n(30),s=n(32);function c(e){return e.projectionType===a.CameraProjectionType.ORTHOGRAPHIC}var u=function(e){function t(t,n){return e.call(this,t,n)||this}return i(t,e),t.prototype.screenToWorld=function(e,t){var n=this.screenToView(e),r=t||[0,0];return r[0]=(n[0]-this.props.camera.control2D.offset[0]*this.props.camera.scale2D[0])/this.props.camera.scale2D[0],r[1]=(n[1]-this.props.camera.control2D.offset[1]*this.props.camera.scale2D[1])/this.props.camera.scale2D[1],r},t.prototype.worldToScreen=function(e,t){var n=[0,0];return n[0]=(e[0]*this.props.camera.scale2D[0]+this.props.camera.control2D.offset[0]*this.props.camera.scale2D[0])*this.pixelRatio,n[1]=(e[1]*this.props.camera.scale2D[1]+this.props.camera.control2D.offset[1]*this.props.camera.scale2D[1])*this.pixelRatio,this.viewToScreen(n,t)},t.prototype.viewToWorld=function(e,t){var n=t||[0,0],r=e;return n[0]=(r[0]-this.props.camera.control2D.offset[0]*this.props.camera.scale2D[0])/this.props.camera.scale2D[0],n[1]=(r[1]-this.props.camera.control2D.offset[1]*this.props.camera.scale2D[1])/this.props.camera.scale2D[1],n},t.prototype.worldToView=function(e,t){var n=t||[0,0];return n[0]=e[0]*this.props.camera.scale2D[0]+this.props.camera.control2D.offset[0]*this.props.camera.scale2D[0],n[1]=e[1]*this.props.camera.scale2D[1]+this.props.camera.control2D.offset[1]*this.props.camera.scale2D[1],n},t.prototype.fitViewtoViewport=function(e,t){if(c(this.props.camera)){var n=t.width,r=t.height,i={bottom:-r/2,far:1e7,left:-n/2,near:-100,right:n/2,top:r/2},A=this.pixelRatio,a=this.pixelRatio,s=this.props.camera;s.projectionOptions=Object.assign(s.projectionOptions,i),s.position=[-t.width/2,t.height/2,s.position[2]],s.scale=[A,-a,1],s.update(),this.viewBounds=t,this.viewBounds.d=this,this.screenBounds=new o.Bounds({height:this.viewBounds.height/this.pixelRatio,width:this.viewBounds.width/this.pixelRatio,x:this.viewBounds.x/this.pixelRatio,y:this.viewBounds.y/this.pixelRatio}),this.screenBounds.d=this}else c(this.props.camera)||console.warn("View2D does not support non-orthographic cameras yet.")},t.defaultProps={key:"",camera:new s.Camera2D,viewport:{left:0,right:0,bottom:0,top:0}},t}(A.View);t.View2D=u},function(e,t,n){"use strict";function r(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),r(n(201)),r(n(207)),r(n(214)),r(n(223)),r(n(230)),r(n(243)),r(n(248))},function(e,t,n){"use strict";function r(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),r(n(202)),r(n(206))},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o,A=n(6),a=n(3),s=n(0),c=n(1),u=n(7);!function(e){e[e.NONE=0]="NONE",e[e.SCREEN_CURVE=1]="SCREEN_CURVE"}(o=t.ArcScaleType||(t.ArcScaleType={}));var l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.initShader=function(){for(var e,r,i=this.props.scaleType,A=this.props.animate||{},a=A.angle,c=A.angleOffset,u=A.center,l=A.radius,h=A.thickness,d=A.colorStart,f=A.colorEnd,p=((e={0:1})[302]=-1,e),g=((r={0:0})[302]=1,r),B=1,w=0;w<300;++w)p[w+1]=B,g[w+1]=Math.floor(w/2)/149,B*=-1;var y=i===o.NONE?n(203):n(204);return{fs:n(205),instanceAttributes:[{easing:u,name:t.attributeNames.center,size:s.InstanceAttributeSize.TWO,update:function(e){return e.center}},{easing:l,name:t.attributeNames.radius,size:s.InstanceAttributeSize.ONE,update:function(e){return[e.radius]}},{name:t.attributeNames.depth,size:s.InstanceAttributeSize.ONE,update:function(e){return[e.depth]}},{easing:h,name:t.attributeNames.thickness,size:s.InstanceAttributeSize.TWO,update:function(e){return e.thickness}},{easing:a,name:t.attributeNames.angle,size:s.InstanceAttributeSize.TWO,update:function(e){return e.angle}},{easing:c,name:t.attributeNames.angleOffset,size:s.InstanceAttributeSize.ONE,update:function(e){return[e.angleOffset]}},{easing:d,name:t.attributeNames.colorStart,size:s.InstanceAttributeSize.FOUR,update:function(e){return e.colorStart}},{easing:f,name:t.attributeNames.colorEnd,size:s.InstanceAttributeSize.FOUR,update:function(e){return e.colorEnd}}],uniforms:[{name:"scaleFactor",size:s.UniformSize.ONE,update:function(e){return[1]}}],vertexAttributes:[{name:"vertex",size:s.VertexAttributeSize.THREE,update:function(e){return[p[e],g[e],300]}}],vertexCount:302,vs:y}},t.prototype.getMaterialOptions=function(){return Object.assign({},c.CommonMaterialOptions.transparentShapeBlending,{culling:A.GLSettings.Material.CullSide.NONE})},t.defaultProps={data:new a.InstanceProvider,key:"",scaleType:o.NONE},t.attributeNames={angle:"angle",angleOffset:"angleOffset",center:"center",colorEnd:"colorEnd",colorStart:"colorStart",depth:"depth",radius:"radius",thickness:"thickness"},t}(u.Layer2D);t.ArcLayer=l},function(e,t){e.exports="${import: arc}\nprecision highp float;\n\n/**\n  This vertex shader calculates edges whose curve and width is in screen space where the curve is\n  bezier curves with 0, 1, and 2 control points.\n**/\nvarying vec4 vertexColor;\n\n${extendHeader}\n\nvoid main() {\n  ${attributes}\n\n  // Destructure some of the vec injections\n  float startAngle = angle.x + angleOffset;\n  float endAngle = angle.y + angleOffset;\n  float widthStart = thickness.x;\n  float widthEnd = thickness.y;\n  // Destructure threejs's bug with the position requirement\n  float normal = vertex.x;\n  float interpolationTime = vertex.y;\n  float interpolationIncrement = 1.0 / vertex.z;\n  // Get the position of the current vertex\n  vec2 currentPosition = arc(interpolationTime, center, radius, startAngle, endAngle);\n  // Get normal with currentPosition and center\n  vec2 currentNormal = normalize(currentPosition - center);\n  // Get the thickness based on the side we're on\n  float lineThickness = mix(widthStart, widthEnd, interpolationTime) / 2.0;\n  // Start on the calculated line and push out by the normal's value\n  vec2 vertex = currentPosition + currentNormal * (normal * lineThickness);\n  // Get the color based on where we are on the line\n  vertexColor = mix(colorStart, colorEnd, interpolationTime);\n\n  gl_Position = clipSpace(vec3(vertex, depth));\n\n  ${extend}\n}\n"},function(e,t){e.exports="precision highp float;\n\n/**\n  This vertex shader calculates edges whose curve and width is in screen space where the curve is\n  bezier curves with 0, 1, and 2 control points.\n**/\nvarying vec4 vertexColor;\n\nvec2 interpolation(float t, vec2 center, float radius, float start, float end) {\n  float angle = (end - start) * t + start;\n  return center + vec2(cos(angle) * radius, sin(angle) * radius);\n}\n\n${extendHeader}\n\nvoid main() {\n  ${attributes}\n\n  // Destructure some of the vec injections\n  float startAngle = angle.x;\n  float endAngle = angle.y;\n  float widthStart = thickness.x;\n  float widthEnd = thickness.y;\n\n  // Convert world points to screen space\n  vec4 centerClip = clipSpace(vec3(center, depth));\n  vec2 centerScreen = (centerClip.xy + vec2(1.0, 1.0)) * vec2(0.5, 0.5) * viewSize;\n  // Destructure threejs's bug with the position requirement\n  float normal = position.x;\n  float interpolationTime = position.y;\n  float interpolationIncrement = 1.0 / position.z;\n  // Get the position of the current vertex\n  vec2 currentPosition = interpolation(interpolationTime, centerScreen, radius, startAngle, endAngle);\n  // Get normal with currentPosition and center\n  vec2 currentNormal = normalize(currentPosition - centerScreen);\n  // Get the thickness based on the side we're on\n  float lineThickness = mix(widthStart, widthEnd, interpolationTime) / 2.0;\n  // Start on the calculated line and push out by the normal's value\n  vec2 vertex = currentPosition + currentNormal * (normal * lineThickness);\n  // Get the color based on where we are on the line\n  vertexColor = mix(colorStart, colorEnd, interpolationTime);\n  vertexColor *= vertexColor.a;\n\n  gl_Position = vec4((vertex / viewSize) * vec2(2.0, 2.0) - vec2(1.0, 1.0), centerClip.zw);\n  gl_PointSize = 5.0;\n\n  ${extend}\n}\n"},function(e,t){e.exports="precision highp float;\n\nvarying vec4 vertexColor;\n${extendHeader}\n\nvoid main() {\n  setColor(vertexColor);\n  ${extend}\n}\n"},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,A=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)A=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(A=(o<3?i(A):o>3?i(t,n,A):i(t,n))||A);return o>3&&A&&Object.defineProperty(t,n,A),A};Object.defineProperty(t,"__esModule",{value:!0});var A=n(3),a=function(e){function t(t){var n=e.call(this,t)||this;return n.angle=[0,Math.PI],n.colorEnd=[1,1,1,1],n.colorStart=[1,1,1,1],n.center=[0,0],n.depth=0,n.angleOffset=0,n.radius=1,n.thickness=[5,5],n.angle=t.angle||n.angle,n.colorEnd=t.colorEnd||n.colorEnd,n.colorStart=t.colorStart||n.colorStart,n.center=t.center||n.center,n.depth=t.depth||n.depth,n.radius=t.radius||n.radius,n.thickness=t.thickness||n.thickness,n}return i(t,e),o([A.observable],t.prototype,"angle",void 0),o([A.observable],t.prototype,"colorEnd",void 0),o([A.observable],t.prototype,"colorStart",void 0),o([A.observable],t.prototype,"center",void 0),o([A.observable],t.prototype,"depth",void 0),o([A.observable],t.prototype,"angleOffset",void 0),o([A.observable],t.prototype,"radius",void 0),o([A.observable],t.prototype,"thickness",void 0),t}(n(8).Instance);t.ArcInstance=a},function(e,t,n){"use strict";function r(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),r(n(208)),r(n(213))},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o=n(6),A=n(3),a=n(0),s=n(1),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.initShader=function(){var e=this.props,r=e.animate,i=void 0===r?{}:r,A=e.scaleFactor,s=void 0===A?function(){return 1}:A,c=e.usePoints,u=void 0!==c&&c,l=e.opacity,h=void 0===l?function(){return 1}:l,d=i.center,f=i.radius,p=i.color,g={0:1,1:1,2:-1,3:1,4:-1,5:-1},B={0:-1,1:-1,2:-1,3:1,4:1,5:1},w=[{name:"normals",size:a.VertexAttributeSize.TWO,update:function(e){return[g[e],B[e]]}}];return{drawMode:u?o.GLSettings.Model.DrawMode.POINTS:o.GLSettings.Model.DrawMode.TRIANGLE_STRIP,fs:n(u?209:210),instanceAttributes:[{easing:d,name:t.attributeNames.center,size:a.InstanceAttributeSize.TWO,update:function(e){return e.center}},{easing:f,name:t.attributeNames.radius,size:a.InstanceAttributeSize.ONE,update:function(e){return[e.radius]}},{name:t.attributeNames.depth,size:a.InstanceAttributeSize.ONE,update:function(e){return[e.depth]}},{easing:p,name:t.attributeNames.color,size:a.InstanceAttributeSize.FOUR,update:function(e){return e.color}}],uniforms:[{name:"scaleFactor",size:a.UniformSize.ONE,update:function(e){return[s()]}},{name:"layerOpacity",size:a.UniformSize.ONE,update:function(e){return[h()]}}],vertexAttributes:u?void 0:w,vertexCount:u?0:6,vs:n(u?211:212)}},t.prototype.getMaterialOptions=function(){return s.CommonMaterialOptions.transparentShapeBlending},t.defaultProps={data:new A.InstanceProvider,key:"",scaleFactor:function(){return 1}},t.attributeNames={center:"center",color:"color",depth:"depth",radius:"radius"},t}(n(7).Layer2D);t.CircleLayer=c},function(e,t){e.exports="precision highp float;\n\nvarying vec4 vertexColor;\nvarying float edgeSharpness;\nvarying float edgeSharpnessBase;\n\nfloat circle(vec2 coord, float radius){\n  vec2 dist = coord - vec2(0.5);\n\n  return 1.0 - smoothstep(\n    radius - (radius * edgeSharpness),\n    radius + (radius * edgeSharpnessBase),\n    dot(dist, dist) * 4.0\n  );\n}\n\n${extendHeader}\n\nvoid main() {\n  float step_factor = circle(gl_PointCoord, 1.0);\n\n  setColor(mix(\n    vec4(0.0, 0.0, 0.0, 0.0),\n    vertexColor,\n    step_factor\n  ));\n\n  if (gl_FragColor.a <= 0.0) discard;\n\n  ${extend}\n}\n"},function(e,t){e.exports="precision highp float;\n\nvarying vec4 vertexColor;\nvarying float edgeSharpness;\nvarying float edgeSharpnessBase;\nvarying vec2 pointCoord;\n\nfloat circle(vec2 coord, float radius){\n  vec2 dist = coord - vec2(0.5);\n\n  return 1.0 - smoothstep(\n    radius - (radius * edgeSharpness),\n    radius + (radius * edgeSharpnessBase),\n    dot(dist, dist) * 4.0\n  );\n}\n\n${extendHeader}\n\nvoid main() {\n  float step_factor = circle(pointCoord, 1.0);\n\n  setColor(mix(\n    vec4(0.0, 0.0, 0.0, 0.0),\n    vertexColor,\n    step_factor\n  ));\n\n  if (gl_FragColor.a <= 0.0) discard;\n\n  ${extend}\n}\n"},function(e,t){e.exports="// This shader renders our circles with POINTS mode. This can perform better for more intensive scenarios but comes at\n// the cost of hardware limitations such as max POINT size and potential involuntary hardware culling decisions for the\n// viewport.\nprecision highp float;\n\n\n\nvarying vec4 vertexColor;\nvarying float edgeSharpness;\nvarying float edgeSharpnessBase;\n\n${extendHeader}\n\nvoid main() {\n  ${attributes}\n\n  vertexColor = color;\n  vertexColor.a *= layerOpacity;\n  float size = radius * scaleFactor;\n  edgeSharpness = mix(0.8, 0.0, min((size * 6.0 * pixelRatio) / (45.0 * pixelRatio), 1.0));\n  edgeSharpnessBase = mix(0.1, 0.0, min((size * 6.0 * pixelRatio) / (45.0 * pixelRatio), 1.0));\n\n  // NOTE: for now we keep depth * vertex where vertex is always one since our gl layer does not\n  // support drawing non-instanced data yet.\n  gl_Position = clipSpace(vec3(center, depth));\n  gl_PointSize = size * 2.0 * pixelRatio;\n\n  ${extend}\n}"},function(e,t){e.exports="// Shader for rendering simple circles on a quad, using the fragment shader to create the 'roundness' of the shape.\nprecision highp float;\n\n\n\nvarying vec4 vertexColor;\nvarying float edgeSharpness;\nvarying float edgeSharpnessBase;\nvarying vec2 pointCoord;\n\n${extendHeader}\n\nvoid main() {\n  ${attributes}\n\n  vertexColor = color;\n  vertexColor.a *= layerOpacity;\n  float size = radius * scaleFactor * pixelRatio;\n  edgeSharpness = mix(0.8, 0.0, min((size * 6.0 * pixelRatio) / (45.0 * pixelRatio), 1.0));\n  edgeSharpnessBase = mix(0.1, 0.0, min((size * 6.0 * pixelRatio) / (45.0 * pixelRatio), 1.0));\n  pointCoord = (normals.xy + vec2(1.0, 1.0)) / 2.0;\n\n  // Center within clip space\n  vec4 clipCenter = clipSpace(vec3(center, depth));\n  // Center in screen space\n  vec2 screenCenter = (clipCenter.xy + vec2(1.0, 1.0)) * vec2(0.5, 0.5) * viewSize;\n  // Position in screen space\n  vec2 vertex = (normals.xy * size) + screenCenter;\n  // Position back to clip space\n  gl_Position = vec4((vertex / viewSize) * vec2(2.0, 2.0) - vec2(1.0, 1.0), clipCenter.zw);\n\n  ${extend}\n}\n"},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,A=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)A=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(A=(o<3?i(A):o>3?i(t,n,A):i(t,n))||A);return o>3&&A&&Object.defineProperty(t,n,A),A};Object.defineProperty(t,"__esModule",{value:!0});var A=n(3),a=function(e){function t(t){var n=e.call(this,t)||this;return n.color=[1,1,1,1],n.depth=0,n.radius=0,n.center=[0,0],n.color=t.color||n.color,n.radius=t.radius||n.radius,n.center=t.center||n.center,n.depth=t.depth||n.depth,n}return i(t,e),Object.defineProperty(t.prototype,"width",{get:function(){return 2*this.radius},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return 2*this.radius},enumerable:!0,configurable:!0}),o([A.observable],t.prototype,"color",void 0),o([A.observable],t.prototype,"depth",void 0),o([A.observable],t.prototype,"radius",void 0),o([A.observable],t.prototype,"center",void 0),t}(n(8).Instance);t.CircleInstance=a},function(e,t,n){"use strict";function r(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),r(n(215)),r(n(222)),r(n(109))},function(e,t,n){"use strict";var r,i,o=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var A=n(3),a=n(0),s=n(1),c=n(7),u=n(109);var l=((i={})[u.EdgeType.LINE]=n(216),i[u.EdgeType.BEZIER]=n(217),i[u.EdgeType.BEZIER2]=n(218),i),h=n(219),d=n(220),f=n(221),p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.initShader=function(){for(var e,n,r=this,i=this.props,o=i.animate,A=void 0===o?{}:o,c=i.scaleFactor,p=void 0===c?function(){return 1}:c,g=i.type,B=i.scaleType,w=void 0===B?u.EdgeScaleType.NONE:B,y=A.end,v=A.start,m=A.startColor,b=A.endColor,E=A.control,T=A.thickness,C=g===u.EdgeType.LINE?2:50,U=((e={0:1})[2*C+2]=-1,e),_=((n={0:0})[2*C+2]=1,n),Q=1,F=0;F<2*C;++F)U[F+1]=Q,_[F+1]=Math.floor(F/2)/(C-1),Q*=-1;var x={interpolation:l[g]},I=s.shaderTemplate({options:x,required:{name:"Edge Layer",values:["interpolation"]},shader:w===u.EdgeScaleType.NONE?h:d,onToken:function(e,t){return e in x?t:"${"+e+"}"}});return{fs:f,instanceAttributes:[{easing:m,name:t.attributeNames.startColor,size:a.InstanceAttributeSize.FOUR,update:function(e){return e.startColor}},{easing:b,name:t.attributeNames.endColor,size:a.InstanceAttributeSize.FOUR,update:function(e){return e.endColor}},{easing:v,name:t.attributeNames.start,size:a.InstanceAttributeSize.TWO,update:function(e){return e.start}},{easing:y,name:t.attributeNames.end,size:a.InstanceAttributeSize.TWO,update:function(e){return e.end}},{easing:T,name:t.attributeNames.thickness,size:a.InstanceAttributeSize.TWO,update:function(e){return e.thickness}},{name:t.attributeNames.depth,size:a.InstanceAttributeSize.ONE,update:function(e){return[e.depth]}},g===u.EdgeType.LINE?{easing:E,name:t.attributeNames.control,size:a.InstanceAttributeSize.FOUR,update:function(e){return[0,0,0,0]}}:null,g===u.EdgeType.BEZIER?{easing:E,name:t.attributeNames.control,size:a.InstanceAttributeSize.FOUR,update:function(e){return[e.control[0][0],e.control[0][1],0,0]}}:null,g===u.EdgeType.BEZIER2?{easing:E,name:t.attributeNames.control,size:a.InstanceAttributeSize.FOUR,update:function(e){return[(t=e.control)[0][0],t[0][1],t[1][0],t[1][1]];var t}}:null],uniforms:[{name:"scaleFactor",size:a.UniformSize.ONE,update:function(e){return[p()]}},{name:"layerOpacity",size:a.UniformSize.ONE,update:function(e){return[void 0===r.props.opacity?1:r.props.opacity]}}],vertexAttributes:[{name:"vertex",size:a.VertexAttributeSize.THREE,update:function(e){return[U[e],_[e],2*C]}}],vertexCount:2*C+2,vs:I.shader}},t.prototype.getMaterialOptions=function(){return s.CommonMaterialOptions.transparentShapeBlending},t.defaultProps={broadphase:u.EdgeBroadphase.ALL,data:new A.InstanceProvider,key:"none",scaleType:u.EdgeScaleType.NONE,type:u.EdgeType.LINE},t.attributeNames={control:"control",depth:"depth",end:"end",endColor:"endColor",start:"start",startColor:"startColor",thickness:"thickness"},t}(c.Layer2D);t.EdgeLayer=p},function(e,t){e.exports="/**\n * Makes a linear interpolation between two points\n *\n * @param {vec2} s The start point\n * @param {vec2} e The end point\n * @param {vec2} c The bezier control point\n * @param {float} t The interpolation value [0, 1]\n *\n * @returns {vec2} A point interpolated between the two provided points\n */\nvec2 interpolation(float t, vec2 p1, vec2 p2, vec2 c1, vec2 c2) {\n  return p1 + (p2 - p1) * t;\n}\n"},function(e,t){e.exports="/**\n * Makes a linear interpolation between two points\n *\n * @param {vec2} s The start point\n * @param {vec2} e The end point\n * @param {vec2} c The bezier control point\n * @param {float} t The interpolation value [0, 1]\n *\n * @returns {vec2} A point interpolated between the two provided points\n */\nvec2 interpolation(float t, vec2 p1, vec2 p2, vec2 c1, vec2 c2) {\n  return (1.0 - t) * (1.0 - t) * p1 + 2.0 * t * (1.0 - t) * c1 + t * t * p2;\n}\n"},function(e,t){e.exports="/**\n * Makes a linear interpolation between two points\n *\n * @param {vec2} s The start point\n * @param {vec2} e The end point\n * @param {vec2} c The bezier control point\n * @param {float} t The interpolation value [0, 1]\n *\n * @returns {vec2} A point interpolated between the two provided points\n */\nvec2 interpolation(float t, vec2 p1, vec2 p2, vec2 c1, vec2 c2) {\n  float t1 = 1.0 - t;\n  return pow(t1, 3.0) * p1 + 3.0 * t * pow(t1, 2.0) * c1 + 3.0 * pow(t, 2.0) * t1 * c2 + pow(t, 3.0) * p2;\n}\n"},function(e,t){e.exports="\n\nprecision highp float;\n\n/**\n  This vertex shader calculates edges whose curve and width is in screen space where the curve is\n  bezier curves with 0, 1, and 2 control points.\n**/\nvarying vec4 vertexColor;\n\n// Interpolation type injection\n${interpolation}\n\n${extendHeader}\n\nvoid main() {\n  ${attributes}\n\n  // Destructure threejs's bug with the position requirement\n  float normal = vertex.x;\n  float interpolationTime = vertex.y;\n  float interpolationIncrement = 1.0 / vertex.z;\n  // Get the position of the current vertex\n  vec2 currentPosition = interpolation(interpolationTime, start, end, control.xy, control.zw);\n  // Calculate the next and previous segment's location on the line\n  vec2 prePosition = interpolation(interpolationTime - interpolationIncrement, start, end, control.xy, control.zw);\n  vec2 nextPosition = interpolation(interpolationTime + interpolationIncrement, start, end, control.xy, control.zw);\n\n  vec2 preLine = prePosition - currentPosition;\n  vec2 nextLine = nextPosition - currentPosition;\n\n  // Get a spliced nromal at the joining of two segments to make a crisper curve\n  vec2 currentNormal = mix(\n    // Pick this value if we're at the beginning of the line\n    normalize(vec2(preLine.y, -preLine.x)),\n    mix(\n      // Pick this value when we're between the ends\n      normalize(vec2(preLine.y, -preLine.x) + vec2(-nextLine.y, nextLine.x)),\n      // Pick this value if we're at the end of the line\n      normalize(vec2(-nextLine.y, nextLine.x)),\n      float(vertex.x >= 1.0)\n    ),\n    float(vertex.x > 0.0)\n  );\n\n  // Get the thickness based on the side we're on\n  float lineThickness = mix(thickness.x, thickness.y, interpolationTime) / 2.0;\n  // Start on the calculated line and push out by the normal's value\n  vec2 vertexPos = currentPosition + currentNormal * (normal * lineThickness);\n  // Get the color based on where we are on the line\n  vertexColor = mix(startColor, endColor, interpolationTime);\n\n  gl_Position = clipSpace(vec3(vertexPos, depth));\n  gl_PointSize = 5.0;\n\n  ${extend}\n}\n"},function(e,t){e.exports="/**\n  This vertex shader calculates edges based in world space to make an edge based on\n  bezier curves with 0, 1, and 2 control points.\n**/\nprecision highp float;\n\n\n\nvarying vec4 vertexColor;\n\n// Interpolation type injection\n${interpolation}\n\n${extendHeader}\n\nvoid main() {\n  ${attributes}\n\n  // Destructure threejs's bug with the position requirement\n  float normal = vertex.x;\n  float interpolationTime = vertex.y;\n  float interpolationIncrement = 1.0 / vertex.z;\n\n  // Convert our world points to screen space\n  vec4 startClip = clipSpace(vec3(start, depth));\n  vec4 endClip = clipSpace(vec3(end, depth));\n  vec2 startScreen = (startClip.xy + vec2(1.0, 1.0)) * vec2(0.5, 0.5) * viewSize;\n  vec2 endScreen = (endClip.xy + vec2(1.0, 1.0)) * vec2(0.5, 0.5) * viewSize;\n  // Controls for this mode are screen space deltas from the end points\n  vec2 control1 = startScreen + vec2(control.x, -control.y) * scaleFactor;\n  vec2 control2 = endScreen + vec2(control.z, -control.w) * scaleFactor;\n\n  // Get the position of the current vertex\n  vec2 currentPosition = interpolation(interpolationTime, startScreen, endScreen, control1, control2);\n  // Calculate the next and previous segment's location on the line\n  vec2 prePosition = interpolation(interpolationTime - interpolationIncrement, startScreen, endScreen, control1, control2);\n  vec2 nextPosition = interpolation(interpolationTime + interpolationIncrement, startScreen, endScreen, control1, control2);\n\n  vec2 preLine = prePosition - currentPosition;\n  vec2 nextLine = nextPosition - currentPosition;\n\n  // Get a spliced nromal at the joining of two segments to make a crisper curve\n  vec2 currentNormal = mix(\n    // Pick this value if we're at the beginning of the line\n    normalize(vec2(preLine.y, -preLine.x)),\n    mix(\n      // Pick this value when we're between the ends\n      normalize(vec2(preLine.y, -preLine.x) + vec2(-nextLine.y, nextLine.x)),\n      // Pick this value if we're at the end of the line\n      normalize(vec2(-nextLine.y, nextLine.x)),\n      float(vertex.x >= 1.0)\n    ),\n    float(vertex.x > 0.0)\n  );\n\n  // Get the thickness based on the side we're on\n  float lineThickness = mix(thickness.x, thickness.y, interpolationTime) / 2.0;\n  // Start on the calculated line and push out by the normal's value\n  vec2 vertexPos = currentPosition + currentNormal * (-normal * lineThickness * scaleFactor);\n  // Get the color based on where we are on the line\n  vertexColor = mix(startColor, endColor, interpolationTime);\n\n  gl_Position = vec4((vertexPos / viewSize) * vec2(2.0, 2.0) - vec2(1.0, 1.0), startClip.zw);\n  gl_PointSize = 5.0;\n\n  ${extend}\n}\n"},function(e,t){e.exports="precision highp float;\n\nvarying vec4 vertexColor;\n${extendHeader}\n\nvoid main() {\n  setColor(vertexColor);\n  ${extend}\n}\n"},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,A=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)A=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(A=(o<3?i(A):o>3?i(t,n,A):i(t,n))||A);return o>3&&A&&Object.defineProperty(t,n,A),A};Object.defineProperty(t,"__esModule",{value:!0});var A=n(8),a=n(27),s=n(1),c=function(e){function t(t){var n=e.call(this,t)||this;return n.control=[[0,0],[0,0]],n.depth=0,n.end=[0,0],n.endColor=[1,1,1,1],n.start=[0,0],n.startColor=[1,1,1,1],n.thickness=[1,1],n.startColor=t.startColor||n.startColor,n.endColor=t.endColor||n.endColor,n.control=t.control||n.control,n.depth=t.depth||n.depth,n.end=t.end||n.end,n.thickness=t.thickness||n.thickness,n.start=t.start||n.start,n}return i(t,e),Object.defineProperty(t.prototype,"length",{get:function(){var e=[this.end[0]-this.start[0],this.end[1]-this.start[1]];return Math.sqrt(e[0]*e[0]+e[1]*e[1])},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"midpoint",{get:function(){return 0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"perpendicular",{get:function(){var e=this.length;return[(this.end[1]-this.start[1])/e,-(this.end[0]-this.start[0])/e]},enumerable:!0,configurable:!0}),t.prototype.setEdgeThickness=function(e){this.thickness=[e,e]},t.prototype.setColor=function(e){this.startColor=s.copy4(e),this.endColor=s.copy4(e)},o([a.observable],t.prototype,"control",void 0),o([a.observable],t.prototype,"depth",void 0),o([a.observable],t.prototype,"end",void 0),o([a.observable],t.prototype,"endColor",void 0),o([a.observable],t.prototype,"start",void 0),o([a.observable],t.prototype,"startColor",void 0),o([a.observable],t.prototype,"thickness",void 0),t}(A.Instance);t.EdgeInstance=c},function(e,t,n){"use strict";function r(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),r(n(224)),r(n(229))},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var A=n(3),a=n(24),s=n(60),c=n(0),u=n(1),l=n(49),h=n(7),d=n(225),f=n(226);function p(e){return e&&e.videoSrc}t.isVideoResource=p;var g=new Image;g.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII=";var B=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.childProvider=new A.InstanceProvider,t.imageToResource=new Map,t.sourceToRequest=new Map,t.sourceToVideo=new Map,t.usingVideo=new Map,t.waitingForVideo=new Map,t.waitForVideoSource=new Map,t.originalOnReadyCallbacks=new Map,t}return i(t,e),t.prototype.childLayers=function(){return[s.createLayer(f.ImageRenderLayer,o({},this.props,{key:this.props.key+".image-render-layer"}))]},t.prototype.destroy=function(){var t=this;e.prototype.destroy.call(this),this.sourceToVideo.forEach(function(e){e.pause(),t.sourceToVideo.clear(),t.waitingForVideo.clear(),t.waitForVideoSource.clear()})},t.prototype.draw=function(){var e=this.resolveChanges(!0);if(!(e.length<=0)){this.propertyIds||(this.propertyIds=this.getInstanceObservableIds(e[0][0],["source"]));for(var t=this.propertyIds.source,n=0,r=e.length;n<r;++n){var i=e[n],o=i[0],A=i[1],s=i[2];switch(A){case c.InstanceDiffType.CHANGE:if(void 0!==s[t]){var l=this.imageToResource.get(o),h=this.getAtlasSource(o);if(h===l)break;if(l instanceof HTMLVideoElement){if(B=this.waitForVideoSource.get(o))this.waitForVideoSource.delete(o),(w=this.waitingForVideo.get(B))&&w.delete(o);(y=this.usingVideo.get(l.getAttribute("data-source")||""))||(y=new Set),y.delete(o),y.size<=0&&this.sourceToVideo.delete(l.getAttribute("data-source")||""),o.onReady=this.originalOnReadyCallbacks.get(o)}if(p(o.source))this.prepareVideo(o,o.source),h=this.getAtlasSource(o),u.mapInjectDefault(this.usingVideo,o.source.videoSrc,new Set).add(o);if(this.imageToResource.set(o,h),this.resource.request(this,o,a.atlasRequest({key:this.props.atlas||"",disposeResource:!0,source:l})),h)(!(d=this.sourceToRequest.get(h))||d.texture&&!d.texture.isValid)&&(d=a.atlasRequest({key:this.props.atlas||"",source:h,rasterizationScale:this.props.rasterizationScale}),this.sourceToRequest.set(h,d)),o.request=d,this.resource.request(this,o,d)}break;case c.InstanceDiffType.INSERT:if(o.source){var d,f=this.getAtlasSource(o);if(p(o.source))this.prepareVideo(o,o.source),f=this.getAtlasSource(o),u.mapInjectDefault(this.usingVideo,o.source.videoSrc,new Set).add(o);(!(d=this.sourceToRequest.get(f))||d.texture&&!d.texture.isValid)&&(d=a.atlasRequest({key:this.props.atlas||"",source:f,rasterizationScale:this.props.rasterizationScale}),this.sourceToRequest.set(f,d)),o.request=d}break;case c.InstanceDiffType.REMOVE:var g=this.getAtlasSource(o);if(this.imageToResource.delete(o),p(o.source)){var B,w,y;if(B=this.waitForVideoSource.get(o))this.waitForVideoSource.delete(o),(w=this.waitingForVideo.get(B))&&w.delete(o);(y=this.usingVideo.get(o.source.videoSrc))||(y=new Set),y.delete(o),y.size<=0&&this.sourceToVideo.delete(o.source.videoSrc),this.originalOnReadyCallbacks.delete(o)}this.resource.request(this,o,a.atlasRequest({key:this.props.atlas||"",disposeResource:!0,source:g}))}}var v=[];this.usingVideo.forEach(function(e,t){e.size<=0&&v.push(t)});for(n=0,r=v.length;n<r;++n){var m=v[n];this.usingVideo.delete(m),this.sourceToVideo.delete(m)}}},t.prototype.getAtlasSource=function(e){return p(e.source)?this.sourceToVideo.get(e.source.videoSrc)||g:e.source},t.prototype.prepareVideo=function(e,t){var n=this,r=this.sourceToVideo.get(t.videoSrc);if(this.originalOnReadyCallbacks.get(e)||this.originalOnReadyCallbacks.set(e,e.onReady),r){var i=this.waitingForVideo.get(t.videoSrc);if(i)i.add(e),this.waitForVideoSource.set(e,t.videoSrc),e.onReady=void 0,e.source=g,e.videoLoad=function(){r.load(),t.autoPlay&&r.play()};else{var o=this.originalOnReadyCallbacks.get(e)||e.onReady;if(!o)return;e.onReady=function(e){o(e,r)}}}else{var A=document.createElement("video");this.sourceToVideo.set(t.videoSrc,A),A.setAttribute("data-source",t.videoSrc),d.debugVideoEvents(A);var a=new l.PromiseResolver,s=new l.PromiseResolver,c=function(){A.removeEventListener("loadedmetadata",f),A.removeEventListener("loadeddata",h),A.removeEventListener("error",p),n.waitingForVideo.delete(t.videoSrc),n.waitForVideoSource.delete(e)},h=function(){s.resolve()},f=function(){a.resolve()},p=function(e){var t;e.path&&e.path[0]&&(t=e.path[0].error),e.originalTarget&&(t=e.originalTarget.error),console.warn("There was an error loading the video resource to the atlas texture context"),console.warn(t),a.reject({}),s.reject({})};A.addEventListener("loadedmetadata",f),A.addEventListener("loadeddata",h),A.addEventListener("error",p),e.onReady=void 0,u.mapInjectDefault(this.waitingForVideo,t.videoSrc,new Set).add(e),this.waitForVideoSource.set(e,t.videoSrc),e.source=g,e.videoLoad=function(){A.load(),t.autoPlay&&A.play()},A.muted=!0,A.src=t.videoSrc,Promise.all([a.promise,s.promise]).then(function(){A.currentTime=0,t.autoPlay&&A.play();var e=n.waitingForVideo.get(t.videoSrc);e&&e.forEach(function(e){e.source=t,e.onReady=n.originalOnReadyCallbacks.get(e)}),c()}).catch(function(){c()})}},t.prototype.initShader=function(){return null},t.defaultProps={atlas:"default",key:"",data:new A.InstanceProvider},t}(h.Layer2D);t.ImageLayer=B},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(2)("video");t.debugVideoEvents=function(e){r.enabled&&(e.addEventListener("abort",function(){return r("abort")}),e.addEventListener("canplay",function(){return r("canplay")}),e.addEventListener("canplaythrough",function(){return r("canplaythrough")}),e.addEventListener("durationchange",function(){return r("durationchange")}),e.addEventListener("emptied",function(){return r("emptied")}),e.addEventListener("ended",function(){return r("ended")}),e.addEventListener("error",function(){return r("error")}),e.addEventListener("loadeddata",function(){return r("loadeddata")}),e.addEventListener("loadedmetadata",function(){return r("loadedmetadata")}),e.addEventListener("loadstart",function(){return r("loadstart")}),e.addEventListener("pause",function(){return r("pause")}),e.addEventListener("play",function(){return r("play")}),e.addEventListener("playing",function(){return r("playing")}),e.addEventListener("progress",function(){return r("progress")}),e.addEventListener("ratechange",function(){return r("ratechange")}),e.addEventListener("seeked",function(){return r("seeked")}),e.addEventListener("seeking",function(){return r("seeking")}),e.addEventListener("stalled",function(){return r("stalled")}),e.addEventListener("suspend",function(){return r("suspend")}),e.addEventListener("timeupdate",function(){return r("timeupdate")}),e.addEventListener("volumechange",function(){return r("volumechange")}),e.addEventListener("waiting",function(){return r("waiting")}))}},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o=n(3),A=n(0),a=n(72),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.initShader=function(){var e=this,r=this.props.animate||{},i=r.tint,o=r.location,a=r.size,s={0:1,1:1,2:-1,3:1,4:-1,5:-1},c={0:0,1:0,2:0,3:1,4:1,5:1};return{fs:n(227),instanceAttributes:[{easing:o,name:t.attributeNames.location,size:A.InstanceAttributeSize.TWO,update:function(e){return e.origin}},{name:t.attributeNames.anchor,size:A.InstanceAttributeSize.TWO,update:function(e){return[e.anchor.x||0,e.anchor.y||0]}},{easing:a,name:t.attributeNames.size,size:A.InstanceAttributeSize.TWO,update:function(e){return[e.width,e.height]}},{name:t.attributeNames.depth,size:A.InstanceAttributeSize.ONE,update:function(e){return[e.depth]}},{name:t.attributeNames.scaling,size:A.InstanceAttributeSize.ONE,update:function(e){return[e.scaling]}},{name:t.attributeNames.texture,resource:{key:function(){return e.props.atlas||""},name:"imageAtlas"},update:function(t){return t.source,t.request?e.resource.request(e,t,t.request):(console.warn("An image utilizing the image-render-layer does not have its request specified yet.","The image-render-layer does NOT manage requests and should be handled before this layer deals with the instance"),[0,0,0,0])}},{easing:i,name:t.attributeNames.tint,size:A.InstanceAttributeSize.FOUR,update:function(e){return e.tint}}],uniforms:[{name:"scaleFactor",size:A.UniformSize.ONE,update:function(e){return[1]}}],vertexAttributes:[{name:"normals",size:A.VertexAttributeSize.TWO,update:function(e){return[s[e],c[e]]}}],vertexCount:6,vs:n(228)}},t.prototype.getMaterialOptions=function(){return a.CommonMaterialOptions.transparentImageBlending},t.defaultProps={key:"",data:new o.InstanceProvider},t.attributeNames={location:"location",anchor:"anchor",size:"size",depth:"depth",scaling:"scaling",texture:"texture",tint:"tint"},t}(n(7).Layer2D);t.ImageRenderLayer=s},function(e,t){e.exports="precision highp float;\n\nvarying vec4 vertexColor;\nvarying vec2 texCoord;\n${extendHeader}\n\nvoid main() {\n  gl_FragColor = texture2D(imageAtlas, texCoord) * vertexColor;\n  setColor(gl_FragColor * gl_FragColor.a);\n\n  ${extend}\n}\n"},function(e,t){e.exports="precision highp float;\n\n\n\nvarying vec4 vertexColor;\nvarying vec2 texCoord;\n\n${extendHeader}\n\nvoid main() {\n  ${attributes}\n\n  // Figure out the size of the image as it'd show on the screen\n  vec3 screenSize = cameraSpaceSize(vec3(size, 1.0));\n  // Do the test for when the image is larger on the screen than the font size\n  bool largerOnScreen = screenSize.y > size.y;\n\n  // Determines if a scale mode should be used or not for the vertex\n  float useScaleMode = float(\n    (\n      scaling == 3.0 ||                  // NEVER mode - keep the image the same size always\n      (largerOnScreen && scaling == 2.0) // BOUND_MAX mode - only if we're larger than the font size do we scale down\n    ) &&\n    scaling != 1.0                       // ALWAYS mode - the image stays completely in world space allowing it to scale freely\n  );\n  // If zooms are unequal, assume one is filtered to be 1.0\n  float unequalZooms = float(cameraScale2D.x != cameraScale2D.y);\n\n  // Destructure the normal information\n  float normal = normals.x;\n  float side = normals.y;\n\n  // Get the location of the anchor in world space\n  vec2 worldAnchor = location + anchor;\n\n  // Get the tex coord from our inject texture info\n  texCoord = texture.xy + ((texture.zw - texture.xy) * vec2(side, float(normal == -1.0)));\n  // Apply the image's tint as a tint to the image\n  vertexColor = tint;\n\n  // Correct aspect ratio.\n  vec2 adjustedSize = mix(\n    size,\n    (size * cameraScale2D.yx),\n    unequalZooms\n  );\n\n  vec2 adjustedAnchor = mix(\n    anchor,\n    (anchor * cameraScale2D.yx),\n    unequalZooms\n  );\n\n  vec2 vertex = vec2(side, float(normal == 1.0)) * adjustedSize + location - adjustedAnchor;\n\n  // See how scaled the size on screen will be from the actual height of the image\n  float imageScreenScale = mix(\n    screenSize.y / adjustedSize.y,\n    screenSize.x / adjustedSize.x,\n    float((cameraScale2D.x < 1.0) || (cameraScale2D.x > 1.0))\n  );\n\n  // If our screen rendering is larger than the size the image is supposed to be, then we automagically\n  // scale down our image to stay the correct size, centered on the anchor point\n  vec2 anchorToVertex = vertex - location;\n\n  // We now choose between keeping the same image size or keeping it in world space\n  vertex = mix(\n    // This option keeps the image size in world space\n    vertex,\n    // This option counters the scaling of the image on the screen keeping it a static size\n    (anchorToVertex / imageScreenScale) + location,\n    // This is the flag determining if a scale mode should be applied to the vertex\n    useScaleMode\n  );\n\n  gl_Position = clipSpace(vec3(vertex, depth));\n\n  ${extend}\n}\n"},function(e,t,n){"use strict";var r,i,o=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),A=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,A=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)A=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(A=(o<3?i(A):o>3?i(t,n,A):i(t,n))||A);return o>3&&A&&Object.defineProperty(t,n,A),A};Object.defineProperty(t,"__esModule",{value:!0});var a=n(3),s=n(8),c=n(0),u=n(19),l=Math.max,h=((i={})[u.AnchorType.TopLeft]=function(e,t){e.x=-e.padding,e.y=-e.padding},i[u.AnchorType.TopMiddle]=function(e,t){e.x=t.width/2,e.y=-e.padding},i[u.AnchorType.TopRight]=function(e,t){e.x=t.width+e.padding,e.y=-e.padding},i[u.AnchorType.MiddleLeft]=function(e,t){e.x=-e.padding,e.y=t.height/2},i[u.AnchorType.Middle]=function(e,t){e.x=t.width/2,e.y=t.height/2},i[u.AnchorType.MiddleRight]=function(e,t){e.x=t.width+e.padding,e.y=t.height/2},i[u.AnchorType.BottomLeft]=function(e,t){e.x=-e.padding,e.y=t.height+e.padding},i[u.AnchorType.BottomMiddle]=function(e,t){e.x=t.width/2,e.y=t.height+e.padding},i[u.AnchorType.BottomRight]=function(e,t){e.x=t.width+e.padding,e.y=t.height+e.padding},i[u.AnchorType.Custom]=function(e,t){e.x=e.x||0,e.y=e.y||0},i),d=function(e){function t(t){var n=e.call(this,t)||this;return n.tint=[0,0,0,1],n.depth=0,n.height=1,n.origin=[0,0],n.scaling=u.ScaleMode.BOUND_MAX,n.width=1,n.sourceWidth=0,n.sourceHeight=0,n._anchor={padding:0,type:u.AnchorType.TopLeft,x:0,y:0},n.videoLoad=c.NOOP,n.depth=t.depth||n.depth,n.tint=t.tint||n.tint,n.scaling=t.scaling||n.scaling,n.origin=t.origin||n.origin,n.width=t.width||1,n.height=t.height||1,n.source=t.source,n.onReady=t.onReady,t.anchor&&n.setAnchor(t.anchor),n}return o(t,e),Object.defineProperty(t.prototype,"maxSize",{get:function(){return l(this.width,this.height)},set:function(e){var t=this.width/this.height;this.width=e*t,this.height=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"anchor",{get:function(){return this._anchor},enumerable:!0,configurable:!0}),t.prototype.resourceTrigger=function(){this.source=this.source,this.request&&this.request.texture&&(this.sourceWidth=this.request.texture.pixelWidth,this.sourceHeight=this.request.texture.pixelHeight),this.onReady&&this.onReady(this)},t.prototype.setAnchor=function(e){var t={padding:e.padding||0,type:e.type,x:e.x||0,y:e.y||0};h[t.type](t,this),this._anchor=t},A([a.observable],t.prototype,"tint",void 0),A([a.observable],t.prototype,"depth",void 0),A([a.observable],t.prototype,"height",void 0),A([a.observable],t.prototype,"origin",void 0),A([a.observable],t.prototype,"scaling",void 0),A([a.observable],t.prototype,"source",void 0),A([a.observable],t.prototype,"width",void 0),A([a.observable],t.prototype,"_anchor",void 0),t}(s.Instance);t.ImageInstance=d},function(e,t,n){"use strict";function r(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),r(n(231)),r(n(242)),r(n(110)),r(n(111))},function(e,t,n){"use strict";var r,i,o,A=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var a=n(100),s=n(24),c=n(60),u=n(0),l=n(4),h=n(19),d=n(7),f=n(110),p=n(111),g=((i={})[h.AnchorType.TopLeft]=function(e,t){e.x=0,e.y=0},i[h.AnchorType.TopMiddle]=function(e,t){e.x=t.size[0]/2,e.y=0},i[h.AnchorType.TopRight]=function(e,t){e.x=t.size[0],e.y=0},i[h.AnchorType.MiddleLeft]=function(e,t){e.x=0,e.y=t.size[1]/2},i[h.AnchorType.Middle]=function(e,t){e.x=t.size[0]/2,e.y=t.size[1]/2},i[h.AnchorType.MiddleRight]=function(e,t){e.x=t.size[0],e.y=t.size[1]/2},i[h.AnchorType.BottomLeft]=function(e,t){e.x=0,e.y=t.size[1]},i[h.AnchorType.BottomMiddle]=function(e,t){e.x=t.size[0]/2,e.y=t.size[1]},i[h.AnchorType.BottomRight]=function(e,t){e.x=t.size[0],e.y=t.size[1]},i[h.AnchorType.Custom]=function(e,t){e.x=e.x||0,e.y=e.y||0},i),B=[[-1,-1],[0,-1],[1,-1],[-1,0],[0,0],[1,0],[-1,1],[0,1],[1,1]].map(function(e){var t=Math.sqrt(l.dot2(e,e));return l.scale2(e,1/-t)}),w=((o={})[h.AnchorType.TopLeft]=function(e){e.paddingDirection=l.scale2(B[0],e.padding)},o[h.AnchorType.TopMiddle]=function(e){e.paddingDirection=l.scale2(B[1],e.padding)},o[h.AnchorType.TopRight]=function(e){e.paddingDirection=l.scale2(B[2],e.padding)},o[h.AnchorType.MiddleLeft]=function(e){e.paddingDirection=l.scale2(B[3],e.padding)},o[h.AnchorType.Middle]=function(e){e.paddingDirection=[0,0]},o[h.AnchorType.MiddleRight]=function(e){e.paddingDirection=l.scale2(B[5],e.padding)},o[h.AnchorType.BottomLeft]=function(e){e.paddingDirection=l.scale2(B[6],e.padding)},o[h.AnchorType.BottomMiddle]=function(e){e.paddingDirection=l.scale2(B[7],e.padding)},o[h.AnchorType.BottomRight]=function(e){e.paddingDirection=l.scale2(B[8],e.padding)},o[h.AnchorType.Custom]=function(e){e.paddingDirection=e.paddingDirection},o),y=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.fullUpdate=!1,t.glyphProvider=new a.InstanceProvider,t.labelToGlyphs=new Map,t.labelToKerningRequest=new Map,t.labelWaitingOnGlyph=new Map,t.truncationWidth=-1,t.handleGlyphReady=function(e){if(e.parentLabel){var n=e.parentLabel,r=t.labelWaitingOnGlyph.get(e.parentLabel);if(r&&r.has(e)&&(r.delete(e),r.size<=0)){var i=n.onReady;i&&i(n)}}else delete e.onReady},t}return A(t,e),t.prototype.childLayers=function(){return[c.createLayer(this.props.customGlyphLayer||p.GlyphLayer,{animate:this.props.animate,data:this.glyphProvider,key:this.id+".glyphs",resourceKey:this.props.resourceKey,scaleMode:this.props.scaleMode||h.ScaleMode.BOUND_MAX,inTextArea:this.props.inTextArea})]},t.prototype.draw=function(){var e=this.resolveChanges();if(!(e.length<=0)){if(!this.propertyIds){var t=e[0][0];this.propertyIds=this.getInstanceObservableIds(t,["text","active","anchor","color","origin","fontSize","maxWidth","maxScale","letterSpacing"])}for(var n=this.propertyIds,r=n.text,i=n.active,o=n.anchor,A=n.color,a=n.origin,s=n.fontSize,c=n.maxWidth,l=n.maxScale,h=n.letterSpacing,d=0,f=e.length;d<f;++d){var p=e[d],g=(t=p[0],p[1]),B=p[2];switch(g){case u.InstanceDiffType.CHANGE:if(!this.labelToGlyphs.get(t)){this.insert(t);continue}void 0!==B[r]?(this.invalidateRequest(t),this.layoutGlyphs(t)):void 0!==B[i]&&(t.active?(this.layoutGlyphs(t),this.showGlyphs(t)):this.hideGlyphs(t)),B[o]&&this.updateAnchor(t),void 0!==B[A]&&this.updateGlyphColors(t),void 0!==B[a]&&this.updateGlyphOrigins(t),void 0!==B[l]&&this.updateGlyphMaxScales(t),void 0!==B[s]&&(this.invalidateRequest(t),this.layoutGlyphs(t)),void 0!==B[c]&&(this.invalidateRequest(t),this.layoutGlyphs(t)),void 0!==B[h]&&(this.invalidateRequest(t),this.layoutGlyphs(t));break;case u.InstanceDiffType.INSERT:this.insert(t);break;case u.InstanceDiffType.REMOVE:var w=this.labelToGlyphs.get(t);if(w){for(var y=0,v=w.length;y<v;++y)this.glyphProvider.remove(w[y]);this.labelToGlyphs.delete(t),this.labelToKerningRequest.delete(t),this.labelWaitingOnGlyph.delete(t)}}}}},t.prototype.insert=function(e){e.preload?this.props.data.remove(e):this.labelToGlyphs.get(e)||this.labelToGlyphs.set(e,[]);this.layoutGlyphs(e)},t.prototype.hideGlyphs=function(e){var t=this.labelToGlyphs.get(e);if(t)for(var n=0,r=t.length;n<r;++n)this.glyphProvider.remove(t[n])},t.prototype.initShader=function(){return null},t.prototype.invalidateRequest=function(e){this.labelToKerningRequest.delete(e)},t.prototype.layoutGlyphs=function(e){if(this.updateKerning(e)&&e.active){var t=this.labelToKerningRequest.get(e);if(t&&t.fontMap){var n=t.metrics;if(n&&n.layout){var r=n.layout;this.updateGlyphs(e,r);var i=e.glyphs;e.size=r.size,g[e.anchor.type](e.anchor,e),w[e.anchor.type](e.anchor);for(var o=e.anchor,A=e.anchor.paddingDirection,a=0,s=Math.min(r.positions.length,i.length);a<s;++a){var c=r.positions[a],u=i[a];u.offset=c,u.fontScale=r.fontScale,u.anchor=[o.x||0,o.y||0],u.origin=l.copy2(e.origin),u.padding=A||[0,0],u.maxScale=e.maxScale}}}}},t.prototype.managesInstance=function(e){return Boolean(this.labelToGlyphs.get(e))},t.prototype.showGlyphs=function(e){var t=this.labelToGlyphs.get(e);if(t)for(var n=0,r=t.length;n<r;++n)this.glyphProvider.add(t[n])},t.prototype.updateAnchor=function(e){var t=e.glyphs;if(t){g[e.anchor.type](e.anchor,e),w[e.anchor.type](e.anchor);for(var n=e.anchor,r=e.anchor.paddingDirection,i=0,o=t.length;i<o;++i)t[i].anchor=[n.x||0,n.y||0],t[i].padding=r||[0,0]}},t.prototype.updateGlyphs=function(e,t){var n=this.labelToGlyphs.get(e);n||(n=[],this.labelToGlyphs.set(e,n));var r=this.labelWaitingOnGlyph.get(e);r||(r=new Set,this.labelWaitingOnGlyph.set(e,r));for(var i=0,o=Math.min(n.length,t.glyphs.length);i<o;++i){(s=n[i]).character!==t.glyphs[i]&&(s.character=t.glyphs[i],s.request&&s.request.fontMap&&s.request.fontMap.glyphMap[s.character]||r.add(s))}if(n.length<t.glyphs.length){var A=0;for(i=n.length,o=t.glyphs.length;i<o;++i,++A){var a=t.glyphs[i];(s=new f.GlyphInstance({character:a,color:e.color,origin:e.origin,maxScale:e.maxScale,onReady:this.handleGlyphReady})).parentLabel=e,n.push(s),e.active&&this.glyphProvider.add(s),r.add(s)}}else if(n.length>t.glyphs.length){for(i=t.glyphs.length,o=n.length;i<o;++i){var s=n[i];this.glyphProvider.remove(s)}for(;n.length>t.glyphs.length;)n.pop()}e.glyphs=n},t.prototype.updateGlyphColors=function(e){var t=e.glyphs;if(t)for(var n=0,r=t.length;n<r;++n)t[n].color=l.copy4(e.color)},t.prototype.updateGlyphOrigins=function(e){var t=e.glyphs;if(t)for(var n=e.origin,r=0,i=t.length;r<i;++r)t[r].origin=[n[0],n[1]]},t.prototype.updateGlyphMaxScales=function(e){var t=e.glyphs;if(t)for(var n=e.maxScale,r=0,i=t.length;r<i;++r)t[r].maxScale=n},t.prototype.updateKerning=function(e){var t=this.labelToKerningRequest.get(e),n=e.text;if(t){if(t.kerningPairs&&t.kerningPairs.indexOf(n)>-1)return Boolean(t.fontMap);if(!t.fontMap||t.fontMap.supportsKerning(n.replace(/\s/g,"")))return!0;this.labelToKerningRequest.delete(e),t=void 0}if(!t){var r={fontSize:e.fontSize,text:e.text,letterSpacing:e.letterSpacing};return e.maxWidth>0&&(r.maxWidth=e.maxWidth,r.truncation=this.props.truncation||"..."),t=s.fontRequest({key:this.props.resourceKey||"",character:"",kerningPairs:[n],metrics:r}),e.preload?(e.resourceTrigger=function(){e.onReady&&e.onReady(e)},this.resource.request(this,e,t)):(this.resource.request(this,e,t,{resource:{type:u.ResourceType.FONT,key:this.props.resourceKey||""}}),this.labelToKerningRequest.set(e,t)),!1}return!0},t.prototype.willUpdateProps=function(e){e.data!==this.props.data&&delete this.propertyIds,e.scaleMode!==this.props.scaleMode&&this.rebuildLayer(),e.resourceKey!==this.props.resourceKey&&(this.fullUpdate=!0)},t.defaultProps={key:"",data:new a.InstanceProvider},t}(d.Layer2D);t.LabelLayer=y},function(e,t){e.exports="varying vec4 vertexColor;\nvarying vec2 texCoord;\n\nvoid main() {\n  vec4 texColor = texture2D(fontMap, texCoord);\n  if (texColor.r <= 0.0) discard;\n  texColor.a = texColor.r;\n  gl_FragColor = texColor * vertexColor;\n}\n"},function(e,t){e.exports="varying vec4 vertexColor;\nvarying vec2 texCoord;\n\nvoid main() {\n  vec4 texColor = texture2D(fontMap, texCoord);\n  if (texColor.r <= 0.0) discard;\n  texColor.a = texColor.r;\n  gl_FragColor = texColor * vertexColor;\n}\n"},function(e,t){e.exports="varying vec4 vertexColor;\nvarying vec2 texCoord;\n\nvoid main() {\n  ${attributes}\n\n  vec2 scale = fontScale * cameraScale2D.xy;\n  float scaleBy = max(scale.x, scale.y) / maxScale;\n  vec2 pushOut = normals * glyphSize * fontScale;\n\n  float vx = mix(\n    (origin.x + padding.x + offset.x + pushOut.x),\n    origin.x + anchor.x + (padding.x - anchor.x + offset.x + pushOut.x) / scaleBy,\n    float(scale.x >= maxScale)\n  );\n\n  float vy = mix(\n    (origin.y + padding.y + offset.y + pushOut.y),\n    origin.y + anchor.y + (padding.y - anchor.y + offset.y + pushOut.y) / scaleBy,\n    float(scale.y >= maxScale)\n  );\n\n  // Calculate in the anchor, the origin, glyph offset, and the quad pushout to make our quad geometry\n  vec3 position = vec3(vec2(vx, vy), depth);\n  gl_Position = clipSpace(position);\n\n  // Get the atlas position of the texture information\n  texCoord = texture.xy + (texture.zw - texture.xy) * normals;\n  // Apply the color of the glyph\n  vertexColor = color * color.a;\n}\n"},function(e,t){e.exports="varying vec4 vertexColor;\nvarying vec2 texCoord;\n\nvoid main() {\n  ${attributes}\n\n  vec2 scale = fontScale * cameraScale2D.xy;\n  float scaleBy = max(scale.x, scale.y) / maxScale;\n  vec2 pushOut = normals * glyphSize * fontScale;\n\n  float vx = mix(\n    (-anchor.x + offset.x + pushOut.x),\n    (-anchor.x + offset.x + pushOut.x) / scaleBy,\n    float(scale.x >= maxScale)\n  );\n\n  float vy = mix(\n    (-anchor.y + offset.y + pushOut.y),\n    (-anchor.y + offset.y + pushOut.y) / scaleBy,\n    float(scale.y >= maxScale)\n  );\n\n  // Calculate in the anchor, the origin, glyph offset, and the quad pushout to make our quad geometry\n  vec3 position = vec3(origin + padding + vec2(vx, vy), depth);\n  gl_Position = clipSpace(position);\n\n  // Get the atlas position of the texture information\n  texCoord = texture.xy + (texture.zw - texture.xy) * normals;\n  // Apply the color of the glyph\n  vertexColor = color * color.a;\n}\n"},function(e,t){e.exports="varying vec4 vertexColor;\nvarying vec2 texCoord;\n\nvoid main() {\n  vec4 texColor = texture2D(fontMap, texCoord);\n  if (texColor.r <= 0.0) discard;\n  texColor.a = texColor.r;\n  gl_FragColor = texColor * vertexColor;\n}\n"},function(e,t){e.exports="varying vec4 vertexColor;\nvarying vec2 texCoord;\n\nvoid main() {\n  vec4 texColor = texture2D(fontMap, texCoord);\n  if (texColor.r <= 0.0) discard;\n  texColor.a = texColor.r;\n  gl_FragColor = texColor * vertexColor;\n}\n"},function(e,t){e.exports="varying vec4 vertexColor;\nvarying vec2 texCoord;\n\nvoid main() {\n  ${attributes}\n\n  // Calculate in the anchor, the origin, glyph offset, and the quad pushout to make our quad geometry\n  vec2 pushOut = normals * glyphSize * fontScale;\n  vec3 position = vec3(origin + anchor + (padding - anchor + offset + pushOut) / cameraScale2D.xy , depth);\n  gl_Position = clipSpace(position);\n\n  // Get the atlas position of the texture information\n  texCoord = texture.xy + (texture.zw - texture.xy) * normals;\n  // Apply the color of the glyph\n  vertexColor = color * color.a;\n}\n"},function(e,t){e.exports="varying vec4 vertexColor;\nvarying vec2 texCoord;\n\nvoid main() {\n  ${attributes}\n\n  // Calculate in the anchor, the origin, glyph offset, and the quad pushout to make our quad geometry\n  vec2 pushOut = normals * glyphSize * fontScale;\n  vec3 position = vec3(origin + padding + (-anchor + offset + pushOut) / cameraScale2D.xy, depth);\n  gl_Position = clipSpace(position);\n\n  // Get the atlas position of the texture information\n  texCoord = texture.xy + (texture.zw - texture.xy) * normals;\n  // Apply the color of the glyph\n  vertexColor = color * color.a;\n}\n"},function(e,t){e.exports="varying vec4 vertexColor;\nvarying vec2 texCoord;\n\nvoid main() {\n  vec4 texColor = texture2D(fontMap, texCoord);\n  if (texColor.r <= 0.0) discard;\n  texColor.a = texColor.r;\n  gl_FragColor = texColor * vertexColor;\n}\n"},function(e,t){e.exports="varying vec4 vertexColor;\nvarying vec2 texCoord;\n\nvoid main() {\n  ${attributes}\n\n  // Calculate in the anchor, the origin, glyph offset, and the quad pushout to make our quad geometry\n  vec2 pushOut = normals * glyphSize * fontScale;\n  vec3 position = vec3(origin + padding + offset + pushOut, depth);\n  gl_Position = clipSpace(position);\n\n  // Get the atlas position of the texture information\n  texCoord = texture.xy + (texture.zw - texture.xy) * normals;\n  // Apply the color of the glyph\n  vertexColor = color * color.a;\n}\n"},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,A=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)A=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(A=(o<3?i(A):o>3?i(t,n,A):i(t,n))||A);return o>3&&A&&Object.defineProperty(t,n,A),A};Object.defineProperty(t,"__esModule",{value:!0});var A=n(3),a=n(8),s=n(0),c=n(19),u=function(e){function t(t){var n=e.call(this,t)||this;return n.color=[0,0,0,1],n.depth=0,n.fontSize=12,n.maxScale=1,n.maxWidth=0,n.origin=[0,0],n.scale=1,n.text="",n.letterSpacing=0,n.preload=!1,n.glyphs=[],n.size=[0,0],n.truncatedText="",n.anchor={padding:0,paddingDirection:[0,0],type:c.AnchorType.TopLeft,x:0,y:0},n.anchor=t.anchor||n.anchor,n.color=t.color||n.color,n.depth=t.depth||n.depth,n.fontSize=t.fontSize||n.fontSize,n.maxScale=t.maxScale||n.maxScale,n.maxWidth=t.maxWidth||0,n.onReady=t.onReady,n.origin=t.origin,n.preload=t.preload||!1,n.scale=t.scale||n.scale,n.text=t.text||n.text,n.letterSpacing=t.letterSpacing||n.letterSpacing,t.anchor&&n.setAnchor(t.anchor),n}return i(t,e),t.prototype.getWidth=function(){return this.size[0]},t.prototype.setAnchor=function(e){var t={padding:e.padding||0,paddingDirection:e.paddingDirection,type:e.type,x:e.x||0,y:e.y||0};this.anchor=t},t.prototype.subTextGlyphs=function(e){var t=[],n=this.text.indexOf(e);if(n<0)return t;for(var r=0,i=0,o=Math.min(this.text.length,n+e.length);i<o;++i)s.isWhiteSpace(this.text[i])||(r++,i>=n&&t.push(this.glyphs[r]));return t},t.prototype.resourceTrigger=function(){},o([A.observable],t.prototype,"color",void 0),o([A.observable],t.prototype,"depth",void 0),o([A.observable],t.prototype,"fontSize",void 0),o([A.observable],t.prototype,"maxScale",void 0),o([A.observable],t.prototype,"maxWidth",void 0),o([A.observable],t.prototype,"origin",void 0),o([A.observable],t.prototype,"scale",void 0),o([A.observable],t.prototype,"text",void 0),o([A.observable],t.prototype,"letterSpacing",void 0),o([A.observable],t.prototype,"anchor",void 0),t}(a.Instance);t.LabelInstance=u},function(e,t,n){"use strict";function r(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),r(n(244)),r(n(247))},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o=n(3),A=n(0),a=n(1),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.initShader=function(){var e=this.props.animate||{},r={0:1,1:1,2:-1,3:1,4:-1,5:-1},i={0:0,1:0,2:0,3:1,4:1,5:1},o=this.props.scaleFactor,a=void 0===o?function(){return 1}:o;return{fs:n(245),instanceAttributes:[{easing:e.location,name:t.attributeNames.location,size:A.InstanceAttributeSize.TWO,update:function(e){return e.position}},{name:t.attributeNames.anchor,size:A.InstanceAttributeSize.TWO,update:function(e){return[e.anchor.x||0,e.anchor.y||0]}},{name:t.attributeNames.size,size:A.InstanceAttributeSize.TWO,update:function(e){return e.size}},{name:t.attributeNames.depth,size:A.InstanceAttributeSize.ONE,update:function(e){return[e.depth]}},{name:t.attributeNames.scaling,size:A.InstanceAttributeSize.ONE,update:function(e){return[e.scaling]}},{easing:e.color,name:t.attributeNames.color,size:A.InstanceAttributeSize.FOUR,update:function(e){return e.color}},{name:t.attributeNames.scale,size:A.InstanceAttributeSize.ONE,update:function(e){return[e.scale]}},{name:t.attributeNames.maxScale,size:A.InstanceAttributeSize.ONE,update:function(e){return[e.maxScale]}}],uniforms:[{name:"scaleFactor",size:A.UniformSize.ONE,update:function(e){return[a()]}}],vertexAttributes:[{name:"normals",size:A.VertexAttributeSize.TWO,update:function(e){return[r[e],i[e]]}}],vertexCount:6,vs:n(246)}},t.prototype.getMaterialOptions=function(){return a.CommonMaterialOptions.transparentShapeBlending},t.defaultProps={key:"",data:new o.InstanceProvider},t.attributeNames={anchor:"anchor",color:"color",depth:"depth",location:"location",maxScale:"maxScale",scale:"scale",scaling:"scaling",size:"size"},t}(n(7).Layer2D);t.RectangleLayer=s},function(e,t){e.exports="precision highp float;\n\nvarying vec4 vertexColor;\n${extendHeader}\n\nvoid main() {\n  setColor(vertexColor);\n  ${extend}\n}\n"},function(e,t){e.exports="precision highp float;\n\nvarying vec4 vertexColor;\n${extendHeader}\n\nvoid main() {\n  ${attributes}\n\n  // Determine final screen size of label\n  vec3 screenSize = cameraSpaceSize(vec3(size * scale / scaleFactor / maxScale, 1.0));\n\n  // Test whether the label is larger on the screen than the font size\n  bool largerOnScreen = screenSize.y > size.y || screenSize.x > size.x;\n\n  // Determines if a scale mode should be used or not for the vertex\n  float useScaleMode = float(\n    (\n      scaling == 3.0 ||                  // NEVER mode - keep the image the same size always\n      (largerOnScreen && scaling == 2.0) // BOUND_MAX mode - only if we're larger than the font size do we scale down\n    ) &&\n    scaling != 1.0                       // ALWAYS mode - the image stays completely in world space allowing it to scale freely\n  );\n\n  // TODO: Correct aspect ratio. Sufficient fix for most applications.\n  // Will need another solution in the case of:\n  // (cameraScale2D.y != cameraScale2D.x) && (cameraScale2D.x != 1 && cameraScale2D.y != 1)\n\n  // If zooms are unequal, assume one is filtered to be 1.0\n  float unequalZooms = float(cameraScale2D.x != cameraScale2D.y);\n\n  vec2 adjustedSize = mix(\n    size,\n    (size * cameraScale2D.yx),\n    unequalZooms\n  );\n\n  // Destructure threejs's bug with the position requirement\n  float normal = normals.x;\n  float side = normals.y;\n\n  vec2 scaledAnchor = anchor * scale;\n\n  // Get the location of the anchor in world space\n  vec2 worldAnchor = location + scaledAnchor;\n\n  vec2 adjustedAnchor = mix(\n    scaledAnchor,\n    (scaledAnchor * cameraScale2D.yx),\n    unequalZooms\n  );\n\n  // Get the position of the current vertex\n  vec2 vertex = vec2(side, float(normal == 1.0)) * scale * adjustedSize + location - adjustedAnchor;\n\n  // See how scaled the size on screen will be from the actual height of the label\n  float labelScreenScale = mix(\n    screenSize.y / adjustedSize.y,\n    screenSize.x / adjustedSize.x,\n    float((cameraScale2D.x != 1.0))\n  );\n\n  float currentScale = labelScreenScale * scale;\n\n  // If our screen rendering is larger than the size the label is supposed to be, then we automagically\n  // scale down our label to stay the correct size, centered on the anchor point\n  vec2 anchorToVertex = vertex - location;\n\n  // We now choose between keeping the same image size or keeping it in world space\n  vertex = mix(\n    // This option keeps the image size in world space\n    vertex,\n    // This option counters the scaling of the image on the screen keeping it a static size\n    (anchorToVertex / labelScreenScale) + location,\n    // This is the flag determining if a scale mode should be applied to the vertex\n    useScaleMode\n  );\n\n  // --Texture and Color\n  // Apply the label's color as a tint to the label (all labels are rendered white to the base texture)\n  vertexColor = color;\n\n  gl_Position = clipSpace(vec3(vertex, depth));\n  ${extend}\n}\n"},function(e,t,n){"use strict";var r,i,o=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),A=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,A=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)A=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(A=(o<3?i(A):o>3?i(t,n,A):i(t,n))||A);return o>3&&A&&Object.defineProperty(t,n,A),A};Object.defineProperty(t,"__esModule",{value:!0});var a=n(3),s=n(8),c=n(19),u=((i={})[c.AnchorType.TopLeft]=function(e,t){e.x=-e.padding,e.y=-e.padding},i[c.AnchorType.TopMiddle]=function(e,t){e.x=t.size[0]/2,e.y=-e.padding},i[c.AnchorType.TopRight]=function(e,t){e.x=t.size[0]+e.padding,e.y=-e.padding},i[c.AnchorType.MiddleLeft]=function(e,t){e.x=-e.padding,e.y=t.size[1]/2},i[c.AnchorType.Middle]=function(e,t){e.x=t.size[0]/2,e.y=t.size[1]/2},i[c.AnchorType.MiddleRight]=function(e,t){e.x=t.size[0]+e.padding,e.y=t.size[1]/2},i[c.AnchorType.BottomLeft]=function(e,t){e.x=-e.padding,e.y=t.size[1]+e.padding},i[c.AnchorType.BottomMiddle]=function(e,t){e.x=t.size[0]/2,e.y=t.size[1]+e.padding},i[c.AnchorType.BottomRight]=function(e,t){e.x=t.size[0]+e.padding,e.y=t.size[1]+e.padding},i[c.AnchorType.Custom]=function(e,t){e.x=e.x||0,e.y=e.y||0},i),l=function(e){function t(t){var n=e.call(this,t)||this;return n.color=[0,0,0,1],n.depth=0,n.maxScale=1,n.scale=1,n.scaling=c.ScaleMode.BOUND_MAX,n.size=[1,1],n.position=[0,0],n._anchor={padding:0,type:c.AnchorType.TopLeft,x:0,y:0},n.depth=t.depth||n.depth,n.color=t.color||n.color,n.scaling=t.scaling||n.scaling,n.position=t.position||n.position,n.size=t.size||n.size,t.anchor&&n.setAnchor(t.anchor),n}return o(t,e),Object.defineProperty(t.prototype,"anchor",{get:function(){return this._anchor},enumerable:!0,configurable:!0}),t.prototype.setAnchor=function(e){var t={padding:e.padding||0,type:e.type,x:e.x||0,y:e.y||0};u[t.type](t,this),this._anchor=t},A([a.observable],t.prototype,"color",void 0),A([a.observable],t.prototype,"depth",void 0),A([a.observable],t.prototype,"maxScale",void 0),A([a.observable],t.prototype,"scale",void 0),A([a.observable],t.prototype,"scaling",void 0),A([a.observable],t.prototype,"size",void 0),A([a.observable],t.prototype,"position",void 0),A([a.observable],t.prototype,"_anchor",void 0),t}(s.Instance);t.RectangleInstance=l},function(e,t,n){"use strict";function r(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),r(n(249)),r(n(250))},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,A=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)A=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(A=(o<3?i(A):o>3?i(t,n,A):i(t,n))||A);return o>3&&A&&Object.defineProperty(t,n,A),A};Object.defineProperty(t,"__esModule",{value:!0});var A=n(8),a=n(27),s=function(e){function t(t){var n=e.call(this,t)||this;return n.color=[1,1,1,1],n.depth=0,n.radius=0,n.thickness=1,n.center=[0,0],n.color=t.color||n.color,n.depth=t.depth||n.depth,n.radius=t.radius||n.radius,n.thickness=t.thickness||n.thickness,n.center=t.center||n.center,n}return i(t,e),Object.defineProperty(t.prototype,"width",{get:function(){return 2*this.radius},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return 2*this.radius},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"innerRadius",{get:function(){return this.radius-this.thickness},enumerable:!0,configurable:!0}),o([a.observable],t.prototype,"color",void 0),o([a.observable],t.prototype,"depth",void 0),o([a.observable],t.prototype,"radius",void 0),o([a.observable],t.prototype,"thickness",void 0),o([a.observable],t.prototype,"center",void 0),t}(A.Instance);t.RingInstance=s},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o=n(3),A=n(0),a=n(1),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.initShader=function(){var e=this.props.scaleFactor||function(){return 1},r=this.props.animate||{},i=r.color,o=r.center,a=r.radius,s={0:1,1:1,2:-1,3:1,4:-1,5:-1},c={0:-1,1:-1,2:-1,3:1,4:1,5:1};return{fs:n(251),instanceAttributes:[{easing:o,name:t.attributeNames.center,size:A.InstanceAttributeSize.TWO,update:function(e){return e.center}},{easing:a,name:t.attributeNames.radius,size:A.InstanceAttributeSize.ONE,update:function(e){return[e.radius]}},{name:t.attributeNames.depth,size:A.InstanceAttributeSize.ONE,update:function(e){return[e.depth]}},{easing:i,name:t.attributeNames.color,size:A.InstanceAttributeSize.FOUR,update:function(e){return e.color}},{name:t.attributeNames.thickness,size:A.InstanceAttributeSize.ONE,update:function(e){return[e.thickness]}}],uniforms:[{name:"scaleFactor",size:A.UniformSize.ONE,update:function(t){return[e()]}}],vertexAttributes:[{name:"normals",size:A.VertexAttributeSize.TWO,update:function(e){return[s[e],c[e]]}}],vertexCount:6,vs:n(252)}},t.prototype.getMaterialOptions=function(){return a.CommonMaterialOptions.transparentShapeBlending},t.defaultProps={key:"",data:new o.InstanceProvider},t.attributeNames={center:"center",radius:"radius",depth:"depth",color:"color",thickness:"thickness"},t}(n(7).Layer2D);t.RingLayer=s},function(e,t){e.exports="precision highp float;\n\n/** This is the color of the ring */\nvarying vec4 vertexColor;\n/**\n * This is how sharp the ring renders. For tiny rings, it's best to have\n * less sharpness to better convey the shape of a circle. A good starter setting:\n * edgeSharpness = mix(0.8, 0.01, min(gl_PointSize / 45.0, 1.0));\n */\nvarying float edgeSharpness;\n/**\n * This should be a value that sets the thickness of the ring in normal space\n * relative to the PointSize\n */\nvarying float borderSize;\n/**\n * Since this is now a quad instead of a point sprite, this provides what gl_PointCoord\n * used to provide.\n */\nvarying vec2 pointCoord;\n\nvarying float scale;\n\nfloat circle(vec2 coord, float radius){\n  vec2 dist = coord - vec2(0.5);\n\n  return 1.0 - smoothstep(\n    radius - (radius * edgeSharpness),\n    radius,\n    dot(dist, dist) * 4.0\n  );\n\n}\n\n${extendHeader}\n\nvoid main() {\n  float outer_step_factor = circle(pointCoord, 1.0);\n  float inner_step_factor = circle(pointCoord, 1.0 - borderSize * scale);\n\n  setColor(mix(\n    mix(                        // Select the outer color outside of the inner radius\n      vec4(0.0, 0.0, 0.0, 0.0),    // Select invisible outside of inner and outer radius\n      vertexColor,                  // Select outer color outside of inner, but inside outer\n      outer_step_factor\n    ),\n    vec4(0.0, 0.0, 0.0, 0.0),                 // Select inner color inside inner\n    inner_step_factor\n  ));\n\n  ${extend}\n}\n"},function(e,t){e.exports="precision highp float;\n\nvarying vec4 vertexColor;\nvarying float edgeSharpness;\nvarying float borderSize;\nvarying vec2 pointCoord;\n${extendHeader}\n\nvarying float scale;\n\nvoid main() {\n  ${attributes}\n\n  scale = scaleFactor;\n\n  vertexColor = color;\n  float size = radius * scaleFactor * pixelRatio;\n\n  float ringWidth = mix(2.0 , thickness, float(thickness > 2.0));\n\n  borderSize = mix(\n    (ringWidth) / size,\n    ((ringWidth * pixelRatio) / size),\n    float(pixelRatio > 1.0)\n  );\n\n  edgeSharpness = min(0.2 / (ringWidth * scale),  0.1);\n\n  pointCoord = (normals.xy + vec2(1.0, 1.0)) / 2.0;\n\n  // Center within clip space\n  vec4 clipCenter = clipSpace(vec3(center, depth));\n  // Center in screen space\n  vec2 screenCenter = (clipCenter.xy + vec2(1.0, 1.0)) * vec2(0.5, 0.5) * viewSize;\n  // Position in screen space\n  vec2 vertex = (normals.xy * size) + screenCenter;\n  // Position back to clip space\n  gl_Position = vec4((vertex / viewSize) * vec2(2.0, 2.0) - vec2(1.0, 1.0), clipCenter.zw);\n  ${extend}\n}\n"},function(e,t,n){"use strict";function r(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),n(254),r(n(74)),r(n(10))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(255),n(257),n(258),n(259),n(275),n(280)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);n(10).ShaderModule.register([{moduleId:"camera",content:"",compatibility:r.ShaderInjectionTarget.ALL,uniforms:function(e){return[{name:"projection",size:r.UniformSize.MATRIX4,update:function(){return e.view.props.camera.projection}},{name:"modelView",size:r.UniformSize.MATRIX4,update:function(){return e.view.props.camera.view}},{name:"cameraPosition",size:r.UniformSize.THREE,update:function(){return e.view.props.camera.position}},{name:"cameraScale",size:r.UniformSize.THREE,update:function(){return e.view.props.camera.scale}},{name:"cameraRotation",size:r.UniformSize.THREE,update:function(){return e.view.props.camera.scale}},{name:"viewSize",size:r.UniformSize.TWO,update:function(){return[e.view.viewBounds.width,e.view.viewBounds.height]}},{name:"pixelRatio",size:r.UniformSize.ONE,update:function(){return[e.view.pixelRatio]}}]}},{moduleId:"projection",content:n(256),compatibility:r.ShaderInjectionTarget.ALL}])},function(e,t){e.exports="// These are projection methods for basic camera operations\n${import: camera}\n\nvec3 cameraSpace(vec3 world) {\n  return (modelView * vec4(world, 1.0)).xyz;\n}\n\nvec3 cameraSpaceSize(vec3 worldSize) {\n  return (modelView * vec4(worldSize, 0.0)).xyz;\n}\n\nvec4 clipSpace(vec3 world) {\n  return vec4(((projection * modelView) * vec4(world, 1.0)).xyz, 1.0);\n}\n\nvec4 clipSpaceSize(vec3 worldSize) {\n  return vec4(((projection * modelView) * vec4(worldSize, 0.0)).xyz, 1.0);\n}\n"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);n(10).ShaderModule.register({moduleId:"frame",content:"",compatibility:r.ShaderInjectionTarget.ALL,uniforms:function(e){return[{name:"currentTime",size:r.UniformSize.ONE,update:function(){return[e.surface.frameMetrics.currentTime]}}]}})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(15),i=n(0);n(10).ShaderModule.register({moduleId:"instancing",content:"",compatibility:i.ShaderInjectionTarget.ALL,instanceAttributes:function(e){var t={name:"_active",size:i.InstanceAttributeSize.ONE,update:function(e){return[e.active?1:0]}};return e.activeAttribute=t,[t]},vertexAttributes:function(e){return e.bufferType===r.LayerBufferType.UNIFORM?[{name:"instance",size:i.VertexAttributeSize.ONE,update:function(){return[0]}}]:[]}})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=n(10),o=[{moduleId:"PI_INV",content:n(260),compatibility:r.ShaderInjectionTarget.ALL},{moduleId:"PI2_INV",content:n(261),compatibility:r.ShaderInjectionTarget.ALL},{moduleId:"PI_2",content:n(262),compatibility:r.ShaderInjectionTarget.ALL},{moduleId:"PI_4",content:n(263),compatibility:r.ShaderInjectionTarget.ALL},{moduleId:"PI",content:n(264),compatibility:r.ShaderInjectionTarget.ALL},{moduleId:"PI2",content:n(265),compatibility:r.ShaderInjectionTarget.ALL},{moduleId:"toDegrees",content:n(266),compatibility:r.ShaderInjectionTarget.ALL},{moduleId:"toRadians",content:n(267),compatibility:r.ShaderInjectionTarget.ALL}],A={moduleId:"constants",content:"${import: "+o.map(function(e){return e.moduleId}).join(", ")+"}",compatibility:r.ShaderInjectionTarget.ALL},a=[{moduleId:"bezier1",content:n(268),compatibility:r.ShaderInjectionTarget.ALL},{moduleId:"bezier2",content:n(269),compatibility:r.ShaderInjectionTarget.ALL},{moduleId:"arc",content:n(270),compatibility:r.ShaderInjectionTarget.ALL},{moduleId:"fmod",content:n(271),compatibility:r.ShaderInjectionTarget.ALL},{moduleId:"wrap",content:n(272),compatibility:r.ShaderInjectionTarget.ALL},{moduleId:"fcos",content:n(273),compatibility:r.ShaderInjectionTarget.ALL},{moduleId:"fsin",content:n(274),compatibility:r.ShaderInjectionTarget.ALL}];i.ShaderModule.register(a.concat(o,[A]))},function(e,t){e.exports="// This is 1 / pi\nfloat PI_INV = 0.3183098862;\n"},function(e,t){e.exports="// This is 1 / (pi * 2.0)\nfloat PI2_INV = 0.1591549431;\n"},function(e,t){e.exports="float PI_2 = 1.5707963268;\n"},function(e,t){e.exports="float PI_4 = 0.7853981634;\n"},function(e,t){e.exports="float PI = 3.14159265;\n"},function(e,t){e.exports="float PI2 = 6.2831853;\n"},function(e,t){e.exports="float toDegrees = 57.2957795131;\n"},function(e,t){e.exports="float toRadians = 0.01745329252;\n"},function(e,t){e.exports="/**\n * Single control point bezier curve\n */\nvec2 bezier1(float t, vec2 p1, vec2 p2, vec2 c1) {\n  return (1.0 - t) * (1.0 - t) * p1 + 2.0 * t * (1.0 - t) * c1 + t * t * p2;\n}\n"},function(e,t){e.exports="/**\n * Two control point bezier curve\n */\nvec2 bezier2(float t, vec2 p1, vec2 p2, vec2 c1, vec2 c2) {\n  float t1 = 1.0 - t;\n  return pow(t1, 3.0) * p1 + 3.0 * t * pow(t1, 2.0) * c1 + 3.0 * pow(t, 2.0) * t1 * c2 + pow(t, 3.0) * p2;\n}"},function(e,t){e.exports="${import: PI, PI2, fsin, fcos, wrap}\n\n/**\n * A circular arc interpolator\n */\nvec2 arc(float t, vec2 center, float radius, float start, float end) {\n  float angle = wrap((end - start) * t + start, 0.0, PI2);\n  return center + vec2(fcos(angle), fsin(angle)) * radius;\n}\n"},function(e,t){e.exports="float fmod(float x, float m, float m_inv) {\n  return x - m * floor(x * m_inv);\n}\n"},function(e,t){e.exports="float wrap(float value, float start, float end) {\n  float width = end - start;\n  float offsetValue = value - start;\n\n  return (offsetValue - (floor(offsetValue / width) * width)) + start;\n}\n"},function(e,t){e.exports="${import: PI, PI2, PI_2}\n\n/**\n * This is an approximation of cos that allows us to bypass hardware precision\n * limitations for cos.\n *\n * http://lab.polygonal.de/2007/07/18/fast-and-accurate-sinecosine-approximation/\n * This is a GPU adaptation of this method to provide optimal GPU performance for the operation\n */\nfloat fcos(float x) {\n  float sine;\n  // Cos is the same as sine but\n  x += PI_2;\n\n  // Always wrap input angle to -PI..PI\n  x += mix(\n    mix(\n      0.0,\n      -PI2, float(x > PI)\n    ),\n    PI2, float(x < -PI)\n  );\n\n  // Compute sine\n  sine = 1.27323954 * x;\n  sine += mix(-1.0, 1.0, float(x < 0.0)) * 0.405284735 * x * x;\n  sine = 0.225 * (sine * (mix(1.0, -1.0, float(sine < 0.0)) * sine) - sine) + sine;\n\n  return sine;\n}\n"},function(e,t){e.exports="${import: PI, PI2}\n\n/**\n * This is an approximation of sin that allows us to bypass hardware precision\n * limitations for sin.\n *\n * http://lab.polygonal.de/2007/07/18/fast-and-accurate-sinecosine-approximation/\n * This is a GPU adaptation of this method to provide optimal GPU performance for the operation\n */\nfloat fsin(float x) {\n  float sine;\n\n  // Always wrap input angle to -PI..PI\n  x += mix(\n    mix(\n      0.0,\n      -PI2, float(x > PI)\n    ),\n    PI2, float(x < -PI)\n  );\n\n  // Compute sine\n  sine = 1.27323954 * x;\n  sine += mix(-1.0, 1.0, float(x < 0.0)) * 0.405284735 * x * x;\n  sine = 0.225 * (sine * (mix(1.0, -1.0, float(sine < 0.0)) * sine) - sine) + sine;\n\n  return sine;\n}\n"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);n(10).ShaderModule.register([{moduleId:"picking",content:n(276),compatibility:r.ShaderInjectionTarget.VERTEX,instanceAttributes:function(e){return[{name:"_pickingColor",size:r.InstanceAttributeSize.FOUR,update:function(e){var t=16777215-e.uid;return[((16711680&t)>>16)/255,((65280&t)>>8)/255,(255&t)/255,1]}}]},uniforms:function(e){return[{name:"pickingActive",shaderInjection:r.ShaderInjectionTarget.ALL,size:r.UniformSize.ONE,update:function(){return[e.picking.currentPickMode===r.PickType.SINGLE?1:0]}}]}},{moduleId:"picking",content:n(277),compatibility:r.ShaderInjectionTarget.FRAGMENT},{moduleId:"no-picking",content:n(278),compatibility:r.ShaderInjectionTarget.VERTEX},{moduleId:"no-picking",content:n(279),compatibility:r.ShaderInjectionTarget.FRAGMENT}])},function(e,t){e.exports="// This is the varying auto generated for the fragment shader that is needed in the vertex shader to pass the\n// color for the instance through to the fragment shader\nvarying highp vec4 _picking_color_pass_;\n"},function(e,t){e.exports="// This contains the method required to be used on a fragment shader when a layer desires to use\n// PickType.SINGLE (color picking).\nvarying highp vec4 _picking_color_pass_;\n\nhighp vec4 setColor(vec4 color) {\n  gl_FragColor = mix(color, _picking_color_pass_, pickingActive);\n\n  if (color.a == 0.0) {\n    discard;\n  }\n\n  return gl_FragColor;\n}\n"},function(e,t){e.exports="\n"},function(e,t){e.exports="lowp vec4 setColor(vec4 color) {\n  gl_FragColor = color;\n  return gl_FragColor;\n}\n"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);n(10).ShaderModule.register([{moduleId:"no-op",content:n(281),compatibility:r.ShaderInjectionTarget.VERTEX},{moduleId:"no-op",content:n(282),compatibility:r.ShaderInjectionTarget.FRAGMENT}])},function(e,t){e.exports="void main() {\n  gl_Position = vec4(0.0, 0.0, 0.0, 1.0);\n}\n"},function(e,t){e.exports="void main() {\n  gl_FragColor = vec4(0.0, 0.0, 0.0, 0.0);\n}\n"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}(n(284))},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function A(e){try{s(r.next(e))}catch(e){o(e)}}function a(e){try{s(r.throw(e))}catch(e){o(e)}}function s(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(A,a)}s((r=r.apply(e,t||[])).next())})},o=this&&this.__generator||function(e,t){var n,r,i,o,A={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;A;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return A.label++,{value:o[1],done:!1};case 5:A.label++,r=o[1],o=[0];continue;case 7:o=A.ops.pop(),A.trys.pop();continue;default:if(!(i=(i=A.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){A=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){A.label=o[1];break}if(6===o[0]&&A.label<i[1]){A.label=i[1],i=o;break}if(i&&A.label<i[2]){A.label=i[2],A.ops.push(o);break}i[2]&&A.ops.pop(),A.trys.pop();continue}o=t.call(e,A)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};Object.defineProperty(t,"__esModule",{value:!0});var A=n(41),a=n(3),s=n(5),c=n(21),u=n(0),l=n(1);function h(e,t){for(var n=[],r=Object.values(t),i=0;i<r.length;++i){var o=r[i];o instanceof e?n.push(o):r.push.apply(r,Object.values(o))}return n}function d(e,t,n,r){for(var i=new Set,o=[],A=Object.keys(n).map(function(e){return[e,n[e]]}),a=function(n){var a=A[n];if(t(a[1]))o.push(r(a[0],a[1]));else{var s=!1;if(Object.keys(a[1]).forEach(function(t){var n=a[1][t];i.has(n)?(s=!0,console.warn("Invalid lookup for BasicSurface detected:",e)):(A.push([a[0]+"."+t,n]),i.add(n))}),s)return"break"}},s=0;s<A.length;++s){if("break"===a(s))break}return o}var f=function(){function e(e){var t=this;this.currentTime=0,this.drawRequestId=0,this.resizeTimer=0,this.waitForSizeContext=0,this.destroy=function(){t.base&&(t.base.destroy(),delete t.base),t.context&&(t.context.remove(),delete t.context),cancelAnimationFrame(t.drawRequestId),window.removeEventListener("resize",t.handleResize)},this.draw=function(e){return i(t,void 0,void 0,function(){return o(this,function(t){return this.base?(this.currentTime=e,this.base.draw(e),this.drawRequestId=requestAnimationFrame(this.draw),[2]):[2]})})},this.handleResize=function(){clearTimeout(t.resizeTimer),t.base&&(t.resizeTimer=window.setTimeout(function(){t.fitContainer()},100))},this.rebuild(e)}return e.prototype.createContext=function(){this.context||(this.context=document.createElement("canvas"),this.context.title="",this.context.width=(this.options.container.offsetWidth||0)*window.devicePixelRatio,this.context.height=(this.options.container.offsetHeight||0)*window.devicePixelRatio,this.context.style.width=(this.options.container.offsetWidth||0)+"px",this.context.style.height=(this.options.container.offsetHeight||0)+"px",this.options.container.appendChild(this.context))},e.prototype.init=function(){return i(this,void 0,void 0,function(){var e,t,n;return o(this,function(r){switch(r.label){case 0:return this.base?[2]:[4,this.waitForValidDimensions(this.options.container)];case 1:if(!r.sent())return[2];this.createContext(),r.label=2;case 2:return r.trys.push([2,6,,7]),this.providers=this.options.providers,this.cameras=this.options.cameras,this.resources=this.options.resources,this.eventManagers=this.options.eventManagers(this.cameras),e=this,[4,new c.Surface({context:this.context,handlesWheelEvents:void 0===this.options.handlesWheelEvents||this.options.handlesWheelEvents,pixelRatio:window.devicePixelRatio,eventManagers:h(A.EventManager,this.eventManagers),rendererOptions:Object.assign({alpha:!0,antialias:!1},this.options.rendererOptions)}).ready];case 3:return e.base=r.sent(),this.fitContainer(!0),t=this.draw,[4,l.onFrame()];case 4:return t.apply(this,[r.sent()]),[4,this.updatePipeline()];case 5:return r.sent(),window.addEventListener("resize",this.handleResize),[3,7];case 6:return(n=r.sent()).error===u.SurfaceErrorType.NO_WEBGL_CONTEXT?this.options.onNoWebGL&&this.options.onNoWebGL():(console.error("The Basic Surface could not be initialized"),console.error(n.stack||n.message)),[3,7];case 7:return[2]}})})},e.prototype.fitContainer=function(e){this.base&&(this.context.remove(),this.base.resize(this.options.container.offsetWidth||0,this.options.container.offsetHeight||0),this.options.container.appendChild(this.context),e||this.base.draw(this.currentTime))},e.prototype.getViewProjections=function(e){return this.base?this.base.getProjections(e):null},e.prototype.getViewScreenSize=function(e){if(!this.base)return[0,0];var t=this.base.getViewSize(e);return t?[t.width,t.height]:[0,0]},e.prototype.getViewScreenBounds=function(e){if(!this.base)return new s.Bounds({x:0,y:0,width:0,height:0});var t=this.base.getViewWorldBounds(e);return t||new s.Bounds({x:0,y:0,width:0,height:0})},e.prototype.getViewWorldBounds=function(e){if(!this.base)return new s.Bounds({x:0,y:0,width:0,height:0});var t=this.base.getViewWorldBounds(e);return t||new s.Bounds({x:0,y:0,width:0,height:0})},e.prototype.pipeline=function(e){return i(this,void 0,void 0,function(){return o(this,function(t){switch(t.label){case 0:return this.options.pipeline=e,this.base?[4,this.updatePipeline()]:[2];case 1:return t.sent(),[2]}})})},e.prototype.rebuild=function(e){return i(this,void 0,void 0,function(){var t,n,r,i,A;return o(this,function(o){switch(o.label){case 0:if("boolean"==typeof e){if(e&&this.providers)for(n=h(a.InstanceProvider,this.providers),r=0,i=n.length;r<i;++r)n[r].clear()}else t=e;return this.options&&t&&console.warn("Ignoring options provided to rebuild method. The constructor is the only way to apply an options configuration object"),this.base&&this.base.destroy(),this.context&&(this.context.remove(),delete this.context),!this.options&&t&&(this.options=t),A=new l.PromiseResolver,this.ready=A.promise,[4,this.init()];case 1:return o.sent(),A.resolve(this),[2]}})})},e.prototype.setContainer=function(e){this.options.container=e,e.appendChild(this.context),this.fitContainer()},e.prototype.updatePipeline=function(){return i(this,void 0,void 0,function(){var e,t,n,i;return o(this,function(o){switch(o.label){case 0:return this.base?(e=d("resources",function(e){return e&&void 0!==e.type},this.resources||[],function(e,t){var n=r({},t,{key:t.key||e});return t.key=n.key,n}),t=this.options.pipeline(this.resources,this.providers,this.cameras,this.eventManagers),n=d("scenes",function(e){return e&&void 0!==e.views&&void 0!==e.layers},t.scenes,function(e,t){var n=d("views",function(e){return e&&void 0!==e.init&&2===e.init.length},t.views,function(t,n){var i=r({},n,{key:e+"."+(n.key||t)});return i.init[1]=r({},i.init[1],{key:i.key}),i}),i=d("layers",function(e){return e&&void 0!==e.init},t.layers,function(e,t){var n={init:t.init,key:t.key||e};return t.init[1].key=n.key,n}),o={key:e,order:t.order,views:n,layers:i};return void 0===t.order&&delete o.order,o}),i={resources:e,scenes:n},[4,this.base.pipeline(i)]):[2];case 1:return[2,o.sent()]}})})},e.prototype.waitForValidDimensions=function(e){return i(this,void 0,void 0,function(){var t,n,r,i,A,a,s=this;return o(this,function(o){switch(o.label){case 0:return t=++this.waitForSizeContext,n=new l.PromiseResolver,0!==(r=e.getBoundingClientRect()).width&&0!==r.height?[3,2]:(i=!0,A={attributes:!0},(a=new MutationObserver(function(o){if(i)for(var A=0,c=o;A<c.length;A++){"attributes"===c[A].type&&0!==(r=e.getBoundingClientRect()).width&&0!==r.height&&(a.disconnect(),i=!1,n.resolve(t===s.waitForSizeContext))}})).observe(e,A),[4,l.nextFrame()]);case 1:return o.sent(),r=e.getBoundingClientRect(),i&&0!==r.width&&0!==r.height&&(a.disconnect(),i=!1,n.resolve(t===this.waitForSizeContext)),[3,4];case 2:return[4,l.nextFrame()];case 3:o.sent(),n.resolve(t===this.waitForSizeContext),o.label=4;case 4:return[4,n.promise];case 5:return[2,o.sent()]}})})},e}();t.BasicSurface=f},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}(n(286))},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o=n(3),A=n(21),a=function(e){function t(t,n,r){var i=e.call(this,t,n,r)||this;return console.warn("Please ensure all debugLayer calls are removed for production:",r.key),i}return i(t,e),t.prototype.childLayers=function(){return this.props.wrap?(this.props.wrap.init[1].key="debug-wrapper."+this.props.key,[this.props.wrap]):[]},t.prototype.draw=function(){if(this.props.wrap){var e=this.resolveChanges(!0);if(0!==e.length){var t=this.props.messageHeader,n=void 0===t?function(){return""}:t;console.warn(n()+"\n",{totalChanges:e.length,changes:e})}}},t.prototype.initShader=function(){if(!this.props.wrap)return null;for(var e=new this.props.wrap.init[0](this.surface,this.scene,this.props.wrap.init[1]),t=e.childLayers(),n={};t.length>0;){var r=t.pop();if(r){var i=new r.init[0](this.surface,this.scene,r.init[1]);n[i.id]={shaderIO:i.initShader()},i.childLayers().forEach(function(e){return t.push(e)})}}return console.warn("Shader IO: "+this.id+"\n",{shaderIO:e.initShader(),childLayers:n}),null},t.defaultProps={data:new o.InstanceProvider,key:"default",messageHeader:function(){return""},wrap:A.createLayer(A.Layer,{data:new o.InstanceProvider,scene:"default"})},t}(A.Layer);t.debugLayer=function(e,t){var n=A.createLayer(a,{messageHeader:function(){return"CHANGES FOR: "+n.init[1].key},wrap:A.createLayer(e,t),data:t.data});return n}}])});
//# sourceMappingURL=index.js.map