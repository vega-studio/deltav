{"version":3,"sources":["webpack://network-bubble-chart/webpack/universalModuleDefinition","webpack://network-bubble-chart/webpack/bootstrap","webpack://network-bubble-chart/external \"three\"","webpack://network-bubble-chart/./src/voidgl/types.ts","webpack://network-bubble-chart/./src/voidgl/primitives/bounds.ts","webpack://network-bubble-chart/external \"mobx\"","webpack://network-bubble-chart/./src/voidgl/base-layers/types.ts","webpack://network-bubble-chart/./src/voidgl/util/index.ts","webpack://network-bubble-chart/./src/voidgl/surface/layer.ts","webpack://network-bubble-chart/./src/voidgl/util/instance.ts","webpack://network-bubble-chart/./src/voidgl/primitives/index.ts","webpack://network-bubble-chart/./src/voidgl/surface/texture/index.ts","webpack://network-bubble-chart/./src/voidgl/util/identify-by-key.ts","webpack://network-bubble-chart/./src/voidgl/base-layers/edges/types.ts","webpack://network-bubble-chart/./src/voidgl/surface/event-manager.ts","webpack://network-bubble-chart/./src/voidgl/surface/generate-layer-model.ts","webpack://network-bubble-chart/./src/voidgl/surface/view.ts","webpack://network-bubble-chart/./src/voidgl/surface/scene.ts","webpack://network-bubble-chart/./src/voidgl/surface/texture/label-atlas-resource.ts","webpack://network-bubble-chart/./src/voidgl/surface/texture/base-atlas-resource.ts","webpack://network-bubble-chart/./src/voidgl/util/view-camera.ts","webpack://network-bubble-chart/./src/voidgl/util/shader-templating.ts","webpack://network-bubble-chart/./src/voidgl/util/chart-camera.ts","webpack://network-bubble-chart/./src/voidgl/util/vector.ts","webpack://network-bubble-chart/./src/voidgl/util/auto-easing-method.ts","webpack://network-bubble-chart/./src/voidgl/surface/mouse-event-manager.ts","webpack://network-bubble-chart/./src/voidgl/surface/inject-shader-io.ts","webpack://network-bubble-chart/./src/voidgl/surface/generate-layer-material.ts","webpack://network-bubble-chart/./src/voidgl/surface/generate-layer-geometry.ts","webpack://network-bubble-chart/./src/voidgl/util/data-bounds.ts","webpack://network-bubble-chart/./src/voidgl/surface/generate-default-scene.ts","webpack://network-bubble-chart/./src/voidgl/util/make-instance-uniform-name.ts","webpack://network-bubble-chart/./src/voidgl/shaders/fragments/template-vars.ts","webpack://network-bubble-chart/./src/voidgl/base-layers/labels/index.ts","webpack://network-bubble-chart/./src/voidgl/surface/texture/label-rasterizer.ts","webpack://network-bubble-chart/./src/voidgl/surface/texture/image-atlas-resource.ts","webpack://network-bubble-chart/./src/voidgl/surface/texture/color-rasterizer.ts","webpack://network-bubble-chart/./src/voidgl/surface/texture/color-atlas-resource.ts","webpack://network-bubble-chart/./src/voidgl/surface/texture/sub-texture.ts","webpack://network-bubble-chart/./src/voidgl/surface/texture/atlas.ts","webpack://network-bubble-chart/./src/voidgl/util/webgl-stat.ts","webpack://network-bubble-chart/./node_modules/debug/src/browser.js","webpack://network-bubble-chart/./src/voidgl/util/mouse.ts","webpack://network-bubble-chart/./src/voidgl/base-layers/images/index.ts","webpack://network-bubble-chart/./src/voidgl/base-event-managers/basic-camera-controller.ts","webpack://network-bubble-chart/./src/voidgl/base-event-managers/index.ts","webpack://network-bubble-chart/./src/voidgl/base-layers/rings/ring-layer.vs","webpack://network-bubble-chart/./src/voidgl/base-layers/rings/ring-layer.fs","webpack://network-bubble-chart/./src/voidgl/base-layers/rings/ring-layer.ts","webpack://network-bubble-chart/./src/voidgl/base-layers/rings/ring-instance.ts","webpack://network-bubble-chart/./src/voidgl/base-layers/rings/index.ts","webpack://network-bubble-chart/./src/voidgl/base-layers/rectangle/rectangle-instance.ts","webpack://network-bubble-chart/./src/voidgl/base-layers/rectangle/rectangle-layer.vs","webpack://network-bubble-chart/./src/voidgl/base-layers/rectangle/rectangle-layer.fs","webpack://network-bubble-chart/./src/voidgl/base-layers/rectangle/rectangle-layer.ts","webpack://network-bubble-chart/./src/voidgl/base-layers/rectangle/index.ts","webpack://network-bubble-chart/./src/voidgl/base-layers/edges/edge-instance.ts","webpack://network-bubble-chart/./src/voidgl/base-layers/edges/shader/edge-layer.fs","webpack://network-bubble-chart/./src/voidgl/base-layers/edges/shader/edge-layer-screen-curve.vs","webpack://network-bubble-chart/./src/voidgl/base-layers/edges/shader/edge-layer.vs","webpack://network-bubble-chart/./src/voidgl/base-layers/edges/shader/edge-layer-bezier2.vs","webpack://network-bubble-chart/./src/voidgl/base-layers/edges/shader/edge-layer-bezier.vs","webpack://network-bubble-chart/./src/voidgl/base-layers/edges/shader/edge-layer-line.vs","webpack://network-bubble-chart/./src/voidgl/base-layers/edges/edge-picking.ts","webpack://network-bubble-chart/./src/voidgl/base-layers/edges/edge-layer.ts","webpack://network-bubble-chart/./src/voidgl/base-layers/edges/index.ts","webpack://network-bubble-chart/./src/voidgl/base-layers/circles/circle-instance.ts","webpack://network-bubble-chart/./src/voidgl/base-layers/circles/circle-layer.vs","webpack://network-bubble-chart/./src/voidgl/base-layers/circles/circle-layer.fs","webpack://network-bubble-chart/./src/voidgl/base-layers/circles/circle-layer.ts","webpack://network-bubble-chart/./src/voidgl/base-layers/circles/index.ts","webpack://network-bubble-chart/./src/voidgl/base-layers/index.ts","webpack://network-bubble-chart/./src/voidgl/surface/texture/atlas-resource-manager.ts","webpack://network-bubble-chart/./src/voidgl/surface/event-managers/layer-mouse-events.ts","webpack://network-bubble-chart/./src/voidgl/util/instance-uniform-manager.ts","webpack://network-bubble-chart/./src/voidgl/util/quad-tree.ts","webpack://network-bubble-chart/./src/voidgl/primitives/absolute-position.ts","webpack://network-bubble-chart/./src/voidgl/shaders/fragments/projection-methods.vs","webpack://network-bubble-chart/./src/voidgl/shaders/fragments/shader-input.vs","webpack://network-bubble-chart/./src/voidgl/shaders/fragments/instance-destructuring-array.vs","webpack://network-bubble-chart/./src/voidgl/shaders/fragments/fragment-shader-composition.fs","webpack://network-bubble-chart/./src/voidgl/shaders/fragments/vertex-shader-composition.vs","webpack://network-bubble-chart/./src/voidgl/shaders/fragments/instance-retrieval-array.vs","webpack://network-bubble-chart/./src/voidgl/shaders/util/uniform-instance-block-array.ts","webpack://network-bubble-chart/./src/voidgl/shaders/util/attribute-generation.ts","webpack://network-bubble-chart/./src/voidgl/base-layers/labels/label-instance.ts","webpack://network-bubble-chart/./src/voidgl/base-layers/labels/label-layer.vs","webpack://network-bubble-chart/./src/voidgl/base-layers/labels/label-layer.fs","webpack://network-bubble-chart/./src/voidgl/base-layers/labels/label-layer.ts","webpack://network-bubble-chart/./src/voidgl/surface/texture/image-rasterizer.ts","webpack://network-bubble-chart/./src/voidgl/surface/texture/atlas-manager.ts","webpack://network-bubble-chart/./src/voidgl/surface/texture/pack-node.ts","webpack://network-bubble-chart/./src/voidgl/base-layers/images/image-instance.ts","webpack://network-bubble-chart/./src/voidgl/base-layers/images/image-layer.vs","webpack://network-bubble-chart/./src/voidgl/base-layers/images/image-layer.fs","webpack://network-bubble-chart/./src/voidgl/shaders/base/no-op.vs","webpack://network-bubble-chart/./src/voidgl/shaders/base/no-op.fs","webpack://network-bubble-chart/./src/voidgl/surface/layer-interaction-handler.ts","webpack://network-bubble-chart/./src/voidgl/surface/instance-diff-manager.ts","webpack://network-bubble-chart/./src/voidgl/util/uid.ts","webpack://network-bubble-chart/./src/voidgl/util/tracked-quad-tree.ts","webpack://network-bubble-chart/./src/voidgl/util/reference-camera.ts","webpack://network-bubble-chart/./node_modules/ms/index.js","webpack://network-bubble-chart/./node_modules/debug/src/debug.js","webpack://network-bubble-chart/./node_modules/process/browser.js","webpack://network-bubble-chart/external \"bowser\"","webpack://network-bubble-chart/./src/voidgl/util/data-provider.ts","webpack://network-bubble-chart/./src/voidgl/util/animation-helper.ts","webpack://network-bubble-chart/./src/voidgl/primitives/point.ts","webpack://network-bubble-chart/./src/voidgl/base-layers/images/image-layer.ts","webpack://network-bubble-chart/./src/voidgl/surface/layer-surface.ts","webpack://network-bubble-chart/./src/voidgl/surface/index.ts","webpack://network-bubble-chart/./src/voidgl/index.ts","webpack://network-bubble-chart/./src/index.ts"],"names":["root","factory","exports","module","require","define","amd","window","__WEBPACK_EXTERNAL_MODULE__0__","__WEBPACK_EXTERNAL_MODULE__3__","__WEBPACK_EXTERNAL_MODULE__103__","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","r","value","n","__esModule","object","property","prototype","hasOwnProperty","p","s","InstanceBlockIndex","InstanceAttributeSize","UniformSize","VertexAttributeSize","ShaderInjectionTarget","PickType","Bounds","options","this","x","y","width","height","left","top","bottom","right","emptyBounds","containsPoint","point","encapsulate","item","Math","abs","fits","bounds","hitBounds","isInside","toString","AnchorType","ScaleType","__export","__extends","extendStatics","setPrototypeOf","__proto__","Array","b","__","constructor","create","Three","types_1","util_1","identify_by_key_1","instance_diff_manager_1","layer_interaction_handler_1","Layer","_super","props","_this","depth","instanceById","Map","instanceVertexCount","assign","defaultProps","_a","picking","NONE","ALL","pickingMethods","getInstancePickingMethods","hitTest","quadTree","TrackedQuadTree","boundsAccessor","type","diffManager","InstanceDiffManager","diffProcessor","getDiffProcessor","interactions","LayerInteractionHandler","destroy","uniformManager","didUpdateProps","draw","uniform","change","instance","uniforms","changeList","data","end","length","getUniforms","resolve","update","materialUniforms","forEach","materialUniform","Error","getModelType","drawMode","TrianglesDrawMode","modelType","Mesh","getMaterialOptions","initShader","fs","instanceAttributes","vertexAttributes","vertexCount","vs","makeInstanceAttribute","block","blockIndex","size","atlas","makeUniform","shaderInjection","qualifier","willUpdateInstances","_changes","willUpdateProps","_newProps","didUpdate","IdentifyByKey","__decorate","decorators","target","key","desc","arguments","getOwnPropertyDescriptor","Reflect","decorate","mobx_1","Instance","_easing","_id","id","active","observable","EdgeScaleType","EdgeType","EdgeBroadphase","EventManager","getProjection","viewId","mouseManager","getView","getViewScreenBounds","view","screenBounds","setMouseManager","generateLayerModel","layer","geometry","material","modelInfo","model","val","Boolean","isMesh","undefined","TriangleStripDrawMode","absolute_position_1","bounds_1","view_camera_1","isOrthographic","ClearFlags","View","pixelRatio","devicePixelRatio","screenToPixelSpace","out","pixelSpaceToScreen","screenToView","viewBounds","viewToScreen","screenToWorld","world","camera","offset","scale","viewCamera","ViewCameraType","CUSTOM","console","warn","worldToScreen","screen","viewToWorld","worldToView","fitViewtoViewport","surfaceDimensions","CONTROLLED","baseCamera","getAbsolutePositionBounds","viewport","far","near","position","set","z","updateMatrix","updateMatrixWorld","updateProjectionMatrix","DEFAULT_VIEW_ID","sortByDepth","a","Scene","container","layers","sortIsDirty","viewById","frustumCulled","autoUpdate","addLayer","push","addView","removeLayer","index","indexOf","splice","sortLayers","sort","DEFAULT_SCENE_ID","LabelAtlasResource","label","BaseAtlasResource","sampleScale","ViewCamera","shaderTemplate","shader","required","matched","noValueProvided","notFound","shaderOptions","shaderResults","replace","_x","match","keys","option","results","resolvedShaderOptions","shaderProvidedOptions","unresolvedProvidedOptions","unresolvedShaderOptions","values","error","chartCameraUID","applyArray","source","apply","concat","ChartCamera","location","slice","sqrt","add1","scale1","vec","subtract1","multiply1","dot1","linear1","start","t","length1","add2","scale2","subtract2","multiply2","dot2","linear2","length2","add3","scale3","subtract3","multiply3","linear3","length3","dot3","add4","scale4","subtract4","multiply4","dot4","linear4","length4","VecMath","add","dot","linear","multiply","subtract","AutoEasingLoopStyle","vector_1","min","max","pow","round","sin","PI","GPU_PI","clamp","minVal","maxVal","easeOutElasticGPU","easeBackInGPU","AutoEasingMethod","cpu","gpu","duration","method","delay","loop","methodName","immediate","_start","_t","easeInQuad","time","easeOutQuad","easeInOutQuad","easeInCubic","easeOutCubic","easeInOutCubic","easeInQuart","easeOutQuart","easeInOutQuart","easeInQuint","easeOutQuint","easeInOutQuint","easeOutElastic","easeBackIn","easeBackOut","t1","easeBackInOut","a1","t2","mouse_1","quad_tree_1","isDefined","MouseEventManager","canvas","views","controllers","handlesWheelEvents","eventCleanup","_waitingForRender","getViewsUnderMouse","mouse","hitViews","query","resize","context","setViews","setControllers","addContextListeners","QuadTree","addAll","map","v","filter","element","startView","startPosition","wheelHandler","event","eventElementPosition","interaction","makeInteraction","wheel","makeWheel","controller","handleWheel","stopPropagation","preventDefault","onwheel","addEventListener","onmouseleave","waitingForRender","handleMouseOut","onmousemove","handleMouseMove","onmousedown","downViews","canClick","clickStartTime","Date","now","currentPosition","handleMouseDown","button","document","delta","drag","makeDrag","handleDrag","onmouseup","_event","onmouseover","handleMouseOver","handleMouseUp","handleClick","onselectstart","addTouchContextListeners","ontouchstart","ontouchend","ontouchmove","ontouchcancel","_i","previous","current","viewsUnderMouse","normalizeWheel","onmousewheel","removeEventListener","_b","auto_easing_method_1","testStartVector","ONE","TWO","THREE","FOUR","testEndVector","emptyTexture","Texture","isEasingAttribute","attr","easing","isInstanceAttribute","isVertexAttribute","isUniform","toVertexAttributeInternal","attribute","materialAttribute","toUniformInternal","findEmptyBlock","attributes","seekingSize","usedBlocks","maxBlock","instanceAttribute","ind","breadth","sortNeedsUpdateFirstToTop","generateAtlasResourceUniforms","atlasInstanceAttributes","requestedAtlasInjections","isAtlasAttribute","injection","FRAGMENT","injections","VERTEX","ATLAS","resource","getAtlasTexture","compareVec","injectShaderIO","shaderIO","testStart","testEnd","test","validateInstanceAttributes","easingAttributes","instanceAttributes_1","_loop_1","easingValues","name_1","easingUID","uid","currentTime","surface","frameMetrics","startTime","timeValue","REPEAT","REFLECT","timePassed","slot","startAttr","_o","startTimeAttr","durationAttr","easingAttributes_1","generateEasingAttributes","addedUniforms","MATRIX4","projectionMatrix","elements","matrix","generateBaseUniforms","addedInstanceAttributes","fillBlock","generateBaseInstanceAttributes","addedVertexAttributes","activeAttribute","allVertexAttributes","allUniforms","UNIFORM_SIZE_TO_MATERIAL_TYPE","MATRIX3","DEFAULT_UNIFORM_VALUE","toMaterialUniform","generateLayerMaterial","layerUniforms","instancingUniforms","materialParams","vertexShader","fragmentShader","generatedUniform","RawShaderMaterial","isNumberCluster","isArray","generateLayerGeometry","maxInstancesPerBuffer","vertexBuffers","attribute_1","Float32Array","buffer","endk","formatError","k","j","endj","instanceSize","endk_1","copyWithin","instancingBuffer","instanceStartIndex","BufferGeometry","attribute_3","BufferAttribute","addAttribute","DataBounds","chart_camera_1","scene_1","view_1","generateDefaultScene","aspectRatio","viewSize","defaultCamera","OrthographicCamera","defaultChartCamera","defaultViewport","defaultView","defaultScene","scene","INSTANCE_UNIFORM_ATTRIBUTE_PREFIX","makeInstanceUniformNameArray","makeInstanceUniformNameTree","templateVars","attributeFragments","blocksPerInstance","easingMethod","easingMethods","instanceBlockCount","instanceDataBinaryTree","instanceDataRetrieval","instanceDestructuring","instanceFragments","instanceUniformDeclarations","projectionMethods","shaderInput","__awaiter","thisArg","_arguments","P","generator","Promise","reject","fulfilled","step","next","e","rejected","result","done","then","__generator","body","f","g","_","sent","trys","ops","verb","throw","return","Symbol","iterator","op","TypeError","pop","floor","LabelRasterizer","awaitContext","getContext","setTimeout","calculateLabelSize","calculateTexture","calculateTrucatedText","sampleScaling","drawLabel","truncatedText","measureContents","minX","minY","maxX","maxY","rasterization","texture","createCroppedCanvas","maxWidth","text","firstTest","cursor","safety","substr","nextCursor","cropped","createElement","imageSmoothingEnabled","drawImage","fontSize","getLabelRasterizationFontSize","fillStyle","font","makeCSSFont","measureText","fillText","potentialCanvas","fontWeight","fontFamily","imageData","getImageData","Number","MAX_SAFE_INTEGER","MIN_SAFE_INTEGER","render","renderSync","ImageAtlasResource","image","ColorRasterizer","limit","makeCSS","color","opacity","fillRect","ColorAtlasResource","SubTexture","atlasReferenceID","atlasTexture","atlasTL","atlasTR","atlasBL","atlasBR","widthOnAtlas","heightOnAtlas","isValid","pixelWidth","pixelHeight","pack_node_1","sub_texture_1","AtlasSize","Atlas","validResources","textureSettings","packing","PackNode","updateTexture","invalidateResource","zero","setManager","manager","registerResource","removeResource","redoneCanvas","dispose","generateMipmaps","premultiplyAlpha","needsUpdate","_isValid","getProgramInfo","gl","program","attributeCount","uniformCount","activeUniforms","getProgramParameter","ACTIVE_UNIFORMS","activeAttributes","ACTIVE_ATTRIBUTES","enums","35664","35665","35666","35667","35668","35669","35670","35671","35672","35673","35674","35675","35676","35678","35680","5120","5121","5122","5123","5124","5125","5126","blocks","getActiveUniform","typeName","getActiveAttrib","WebGLStat","MAX_VERTEX_UNIFORMS","MAX_FRAGMENT_UNIFORMS","MAX_ATTRIBUTES","WEBGL_SUPPORTED","MAX_TEXTURE_SIZE","WebGLRenderingContext","getAContext","getParameter","MAX_VERTEX_UNIFORM_VECTORS","MAX_FRAGMENT_UNIFORM_VECTORS","MAX_VERTEX_ATTRIBS","initStats","process","load","storage","debug","env","DEBUG","log","Function","formatArgs","args","useColors","namespace","humanize","diff","lastC","save","namespaces","removeItem","navigator","userAgent","toLowerCase","documentElement","style","WebkitAppearance","firebug","exception","table","parseInt","RegExp","$1","chrome","local","localStorage","localstorage","colors","formatters","JSON","stringify","err","message","enable","browser","three_1","IE_ADJUSTMENT","OLD_IE_ADJUSTMENT","MAX_FIREFOX_WHEELDELTA","lowPassY","LOW_PASS_U0","LOW_PASS_U1","LOW_PASS_U2","LOW_PASS_U3","firefox","deltaX","deltaY","sign","unshift","Vector2","msie","version","wheelDeltaX","wheelDeltaY","wheelDelta","detail","msedge","multiplyScalar","relative","mouseX","mouseY","eventX","eventY","nativeEvent","pageX","pageY","clientX","clientY","scrollLeft","scrollTop","offsetParent","offsetLeft","offsetTop","CameraBoundsAnchor","event_manager_1","BasicCameraController","isPanning","panFilter","_view","_allViews","scaleFilter","startViews","onRangeChanged","_camera","_targetView","startViewDidStart","applyBounds","targetView","applyScaleBounds","boundsHorizontalOffset","boundsVerticalOffset","scaleMin","scaleMax","setBounds","scaleFactor","ignoreCoverViews","anchoredByBoundsHorizontal","anchor","TOP_LEFT","MIDDLE_LEFT","BOTTOM_LEFT","worldBounds","screenPadding","TOP_MIDDLE","MIDDLE","BOTTOM_MIDDLE","TOP_RIGHT","MIDDLE_RIGHT","BOTTOM_RIGHT","anchoredByBoundsVertical","worldTLinScreenSpace","worldBRinScreenSpace","canStart","findCoveredStartView","found","find","under","coveredStartView","getTargetView","_button","_e","pan","wheelMetrics","beforeZoom","currentZoomX","currentZoomY","afterZoom","getRange","projection","topLeft","bottomRight","setRange","newWorld","deltaScale","deltaPan","primitives_1","layer_1","RingLayer","ring","radius","vertexToNormal","0","1","2","3","4","5","vertexToSide","thickness","vertex","blending","CustomBlending","blendSrc","OneFactor","premultipliedAlpha","transparent","RingInstance","computed","instance_1","anchorCalculator","TopLeft","_rectangle","padding","TopMiddle","rectangle","TopRight","MiddleLeft","Middle","MiddleRight","BottomLeft","BottomMiddle","BottomRight","Custom","RectangleInstance","scaling","BOUND_MAX","_anchor","setAnchor","newAnchor","types_2","RectangleLayer","anchorEffect","maxScale","minScale","ALWAYS","NEVER","screenPoint","_u","EdgeInstance","colorStart","colorEnd","control","widthStart","widthEnd","setEdgeWidth","setColor","interpolation","LINE","p1","p2","_c1","_c2","BEZIER","c1","BEZIER2","c2","toPointObject","toPointArray","TEST_RESOLUTION","edgePicking","broadphase","minPickDistance","scaleType","interpolate","edge","edgeWidthStart","edgeWidthEnd","PASS_X","PASS_Y","SCREEN_CURVE","closestIndex","closestDistance","MAX_VALUE","secondClosestIndex","secondClosestDistance","control1","control2","startPoint","endPoint","linePoint","distance","lineWidth","startSegment","endSegment","vector","lineDirection","lineNormal","distanceTo","edge_picking_1","pickVS","baseVS","screenVS","edgeFS","EdgeLayer","_c","MAX_SEGMENTS","_d","vertexInterpolation","toInstanceIOValue","_uniform","DataProvider","CircleInstance","CircleLayer","circle","circleScreenCenter","mouseScreen","animations","animate","animateCenter","center","animateRadius","animateColor","fadeOutOversized","label_atlas_resource_1","AtlasResourceManager","targetAtlas","requestQueue","requestLookup","atlasManager","dequeueRequests","didDequeue","this_1","resources","requests","atlasRequests_1","updateAtlas","request","delete","request_1","from","entries","atlasRequests","existingRequests","setTargetAtlas","LayerMouseEvents","sceneViews","isOver","getSceneViewsUnderMouse","sceneViewByViewId","sceneView","viewItem","getMouseByViewId","viewMouseByViewId","handleInteraction","handleMouseClick","_drag","handleMouseDrag","callback","sceneViews_1","handleSceneView","_flag","clear","allSceneViews","currentSceneViews","generate_layer_model_1","make_instance_uniform_name_1","InstanceUniformManager","buffers","availableClusters","instanceToCluster","clusterToBuffer","maxUniformBlock","uniformBlocksPerInstance","makeNewBuffer","cluster","shift","remove","removeFromScene","setScene","newGeometry","drawRange","count","newMaterial","clone","newModel","activeInstances","clusters","firstInstance","lastInstance","uniformIndex","uniformName","instanceData","Vector4","instanceIndex","uniformRange","filterQuery","queryValues","filtered","obj","Quadrants","mid","TL","Node","TR","BL","BR","children","nodes","child","doAdd","cover","childrenProps","allChildren","gatherChildren","split","isNaN","area","list","visit","queryBounds","queryPoint","cb","finished","data_bounds_1","ref","scaleRatio","parse","num","parseFloat","reference","top_1","shader_templating_1","template_vars_1","instanceRetrievalArrayFragment","VECTOR_COMPONENTS","sizeToType","9","16","99","orderByPriority","makeVectorSwizzle","join","makeUniformArrayDeclaration","totalBlocks","fragment","fill","makeInstanceRetrievalArray","templateOptions","makeInstanceDestructuringArray","orderedAttributes","webgl_stat_1","uniform_instance_block_array_1","vertexShaderComposition","fragmentShaderComposition","instanceDestructuringArray","MAX_USE_PER_BLOCK","generateUniforms","injectionType","injectFragments","shaders","shaderInputMetrics","instancingInfo","instanceUniformBlockCount","ceil","calculateUniformBlockUseage","sortedInstanceAttributes","currentBlock","trueBlockIndex","blockUseage","innerBlockUseage","attributeSize","oldUseage","newUseage","innerUseage","_branchesPerLevel","instances","uniformMetrics","blockQualifierDedup","qualifiers","blockQualifiers","qualifierList","allQualifiers","declaration","makeInstanceUniformDeclaration","makeUniformInstanceDataOptions","metrics","generateInstanceDataLookupOptions","additionalOptions","generateVertexAttributes","methods","methodSizes","sizeType","generateEasingMethods","generateShaderInputs","_maxInstancesPerBuffer","makeInstanceDestructuring","makeInstanceAttributeReferences","generateVertexShader","vertexShaderResults","generateFragmentShader","texture_1","rasterizationLookUp","_label","LabelInstance","_cssFont","_fontFamily","_fontSize","_fontStyle","_fontWeight","_maxWidth","_text","_width","_height","_isDestroyed","fontStyle","cssFontLookup","rasterizations","references","_rasterization","LabelLayer","ImageRasterizer","calculateImageSize","_sampleScale","atlas_1","color_atlas_resource_1","color_rasterizer_1","image_atlas_resource_1","label_rasterizer_1","ZERO_IMAGE","AtlasManager","allAtlas","createAtlas","destroyAtlas","atlasName","setDefaultImage","loadedImage","rect","dimensions","insertedNode","ux","uy","uw","uh","onePixelX","atlasDimensions","loadImage","isValidImage","first","second","insert","nodeImage","nodeDimensions","imageSrc","subTexture","image_1","onload","onerror","path","toDataURL","Image","src","resources_1","isLeaf","child0","child1","hasChild","newNode","fitFlag","imgWidth","imgHeight","dWidth","dHeight","removed","_image","ImageInstance","tint","_sourceWidth","_sourceHeight","_element","_path","aspect","isMouseOver","isMouseDown","_mouse","onMouseDown","world_1","hitTest_1","query_1","bind","querySpace","check","onMouseOut","world_2","query_2","hitTest_2","onMouseUp","world_3","hitTest_3","query_3","onMouseOver","onMouseMove","info","world_4","hitTest_4","query_4","notOverInstances","isCurrentlyOver_1","noLongerOver","onMouseClick","world_5","hitTest_5","query_5","VECTOR_ACCESSORS","quadPicking","changeInstanceQuad","addInstanceQuad","removeInstanceQuad","changeInstance","addInstance","removeInstance","uniformCluster","updateInstance","uniformRangeStart","instanceUniform","UID","CUID","colorUID","getBounds","childToNode","childToBounds","nullBounded","fromSplit","doRemove","node","ReferenceCamera","offsetFilter","base","_val","h","plural","ms","str","String","exec","long","fmtLong","fmtShort","createDebug","prevTime","enabled","self","curr","prev","coerce","format","formatter","hash","charCodeAt","selectColor","init","stack","disable","names","skips","len","cachedSetTimeout","cachedClearTimeout","defaultSetTimout","defaultClearTimeout","runTimeout","fun","clearTimeout","currentQueue","queue","draining","queueIndex","cleanUpNextTick","drainQueue","timeout","run","marker","runClearTimeout","Item","array","noop","nextTick","title","argv","versions","on","addListener","once","off","removeListener","removeAllListeners","emit","prependListener","prependOnceListener","listeners","binding","cwd","chdir","dir","umask","DiffType","UPDATE_FLAG","instanceDisposers","instanceChanges","isChanged","_changeList","monitorItem","changes","CHANGE","_instances","observe","isObservableArray","listDisposer","intercept","monitorList","changes_1","changeType","disposer","_list","lookUp","disposers","removedCount","REMOVE","added","INSERT","isNumber","AnimationHelper","groupAnimation","groupCount","baseDelay","delayGap","modifyInstances","startFrameTime","commit","gap","squareDistance","dx","dy","Point","getClosest","testPoint","points","closestPoint","getClosestIndex","amount","normalize","magnitude","getDistance","squared","getMidpoint","direction","make","ImageLayer","images_1","labels_1","attribute_generation_1","generate_default_scene_1","generate_layer_geometry_1","generate_layer_material_1","inject_shader_io_1","mouse_event_manager_1","instance_uniform_manager_1","layer_mouse_events_1","atlas_resource_manager_1","DEFAULT_BACKGROUND_COLOR","Color","isCanvas","createLayer","layerClass","LayerSurface","currentFrame","previousTime","isBufferingAtlas","scenes","willDisposeLayer","initLayer","frameIncrement","onViewReady","resourceManager","renderer","didBuffer","drawSceneView","rendererSize","getSize","getPixelRatio","background","SCISSOR_TEST","scissor","clearColor","clearFlags","COLOR","COLOR_BUFFER_BIT","DEPTH","DEPTH_BUFFER_BIT","STENCIL","STENCIL_BUFFER_BIT","setViewport","getViewSize","getViewWorldBounds","setContext","initGL","initMouseManager","initResources","WebGLRenderer","alpha","antialias","preserveDrawingBuffer","autoClear","setFaceCulling","CullFaceNone","setSize","setPixelRatio","setClearColor","defaultSceneElements","sceneViewDepth","sceneOptions","newScene","viewOptions","newView","addLayerToScene","shaderMetrics","eventManagers","atlasResources","layerInitializers","existingLayer","layerId","_layer","fitContainer","_pixelRatio","parentElement","className","setAttribute","containerBox","getBoundingClientRect","box","isWebGLContext","canvasContext","isString","getElementById"],"mappings":"CAAA,SAAAA,EAAAC,GACA,iBAAAC,SAAA,iBAAAC,OACAA,OAAAD,QAAAD,EAAAG,QAAA,SAAAA,QAAA,QAAAA,QAAA,WACA,mBAAAC,eAAAC,IACAD,QAAA,yBAAAJ,GACA,iBAAAC,QACAA,QAAA,wBAAAD,EAAAG,QAAA,SAAAA,QAAA,QAAAA,QAAA,WAEAJ,EAAA,wBAAAC,EAAAD,EAAA,MAAAA,EAAA,KAAAA,EAAA,QARA,CASCO,OAAA,SAAAC,EAAAC,EAAAC,GACD,mBCTA,IAAAC,KAGA,SAAAC,EAAAC,GAGA,GAAAF,EAAAE,GACA,OAAAF,EAAAE,GAAAX,QAGA,IAAAC,EAAAQ,EAAAE,IACAC,EAAAD,EACAE,GAAA,EACAb,YAUA,OANAc,EAAAH,GAAAI,KAAAd,EAAAD,QAAAC,IAAAD,QAAAU,GAGAT,EAAAY,GAAA,EAGAZ,EAAAD,QA2CA,OAtCAU,EAAAM,EAAAF,EAGAJ,EAAAO,EAAAR,EAGAC,EAAAQ,EAAA,SAAAlB,EAAAmB,EAAAC,GACAV,EAAAW,EAAArB,EAAAmB,IACAG,OAAAC,eAAAvB,EAAAmB,GACAK,cAAA,EACAC,YAAA,EACAC,IAAAN,KAMAV,EAAAiB,EAAA,SAAA3B,GACAsB,OAAAC,eAAAvB,EAAA,cAAiD4B,OAAA,KAIjDlB,EAAAmB,EAAA,SAAA5B,GACA,IAAAmB,EAAAnB,KAAA6B,WACA,WAA2B,OAAA7B,EAAA,SAC3B,WAAiC,OAAAA,GAEjC,OADAS,EAAAQ,EAAAE,EAAA,IAAAA,GACAA,GAIAV,EAAAW,EAAA,SAAAU,EAAAC,GAAsD,OAAAV,OAAAW,UAAAC,eAAAnB,KAAAgB,EAAAC,IAGtDtB,EAAAyB,EAAA,IAIAzB,IAAA0B,EAAA,qBCnEAnC,EAAAD,QAAAM,gCCCAgB,OAAOC,eAAevB,EAAS,cAAgB4B,OAAO,IAEtD,SAAWS,GACPA,EAAmBA,EAAA,IAA4B,GAAK,MACpDA,EAAmBA,EAAA,IAA4B,GAAK,MACpDA,EAAmBA,EAAA,MAA8B,GAAK,QACtDA,EAAmBA,EAAA,KAA6B,GAAK,OAJzD,CAKwBrC,EAAQqC,qBAAuBrC,EAAQqC,wBAE/D,SAAWC,GACPA,EAAsBA,EAAA,IAA+B,GAAK,MAC1DA,EAAsBA,EAAA,IAA+B,GAAK,MAC1DA,EAAsBA,EAAA,MAAiC,GAAK,QAC5DA,EAAsBA,EAAA,KAAgC,GAAK,OAC3DA,EAAsBA,EAAA,MAAiC,IAAM,QALjE,CAM2BtC,EAAQsC,wBAA0BtC,EAAQsC,2BAErE,SAAWC,GACPA,EAAYA,EAAA,IAAqB,GAAK,MACtCA,EAAYA,EAAA,IAAqB,GAAK,MACtCA,EAAYA,EAAA,MAAuB,GAAK,QACxCA,EAAYA,EAAA,KAAsB,GAAK,OACvCA,EAAYA,EAAA,QAAyB,GAAK,UAC1CA,EAAYA,EAAA,QAAyB,IAAM,UAC3CA,EAAYA,EAAA,MAAuB,IAAM,QAP7C,CAQiBvC,EAAQuC,cAAgBvC,EAAQuC,iBAEjD,SAAWC,GACPA,EAAoBA,EAAA,IAA6B,GAAK,MACtDA,EAAoBA,EAAA,IAA6B,GAAK,MACtDA,EAAoBA,EAAA,MAA+B,GAAK,QACxDA,EAAoBA,EAAA,KAA8B,GAAK,OAJ3D,CAKyBxC,EAAQwC,sBAAwBxC,EAAQwC,yBAEjE,SAAWC,GACPA,EAAsBA,EAAA,OAAkC,GAAK,SAC7DA,EAAsBA,EAAA,SAAoC,GAAK,WAC/DA,EAAsBA,EAAA,IAA+B,GAAK,MAH9D,CAI2BzC,EAAQyC,wBAA0BzC,EAAQyC,2BAErE,SAAWC,GACPA,EAASA,EAAA,KAAmB,GAAK,OACjCA,EAASA,EAAA,IAAkB,GAAK,MAChCA,EAASA,EAAA,OAAqB,GAAK,SAHvC,CAIc1C,EAAQ0C,WAAa1C,EAAQ0C,4CC5C3CpB,OAAOC,eAAevB,EAAS,cAAgB4B,OAAO,IACtD,IAAIe,EAAU,WACV,SAASA,EAAOC,GACZC,KAAKC,EAAI,EACTD,KAAKE,EAAI,EACTF,KAAKG,MAAQ,EACbH,KAAKI,OAAS,EACdJ,KAAKC,EAAIF,EAAQE,GAAKF,EAAQM,MAAQ,EACtCL,KAAKE,EAAIH,EAAQG,GAAKH,EAAQO,KAAO,EACrCN,KAAKI,OAASL,EAAQK,SAAWL,EAAQQ,QAAU,GAAKP,KAAKE,GAAK,EAClEF,KAAKG,MAAQJ,EAAQI,QAAUJ,EAAQS,OAAS,GAAKR,KAAKC,GAAK,EAyHnE,OAvHAxB,OAAOC,eAAeoB,EAAOV,UAAW,QACpCP,IAAK,WACD,OAAOmB,KAAKG,MAAQH,KAAKI,QAE7BxB,YAAY,EACZD,cAAc,IAElBF,OAAOC,eAAeoB,EAAOV,UAAW,UACpCP,IAAK,WACD,OAAOmB,KAAKE,EAAIF,KAAKI,QAEzBxB,YAAY,EACZD,cAAc,IAElBF,OAAOC,eAAeoB,EAAOV,UAAW,QACpCP,IAAK,WACD,OAAOmB,KAAKC,GAEhBrB,YAAY,EACZD,cAAc,IAElBF,OAAOC,eAAeoB,EAAOV,UAAW,OACpCP,IAAK,WACD,OACIoB,EAAGD,KAAKC,EAAID,KAAKG,MAAQ,EACzBD,EAAGF,KAAKE,EAAIF,KAAKI,OAAS,IAGlCxB,YAAY,EACZD,cAAc,IAElBF,OAAOC,eAAeoB,EAAOV,UAAW,SACpCP,IAAK,WACD,OAAOmB,KAAKC,EAAID,KAAKG,OAEzBvB,YAAY,EACZD,cAAc,IAElBF,OAAOC,eAAeoB,EAAOV,UAAW,OACpCP,IAAK,WACD,OAAOmB,KAAKE,GAEhBtB,YAAY,EACZD,cAAc,IAElBmB,EAAOW,YAAc,WACjB,OAAO,IAAIX,GACPM,OAAQ,EACRD,MAAO,EACPF,EAAG,EACHC,EAAG,KAGXJ,EAAOV,UAAUsB,cAAgB,SAAUC,GACvC,QAASA,EAAMV,EAAID,KAAKC,GACpBU,EAAMT,EAAIF,KAAKE,GACfS,EAAMV,EAAID,KAAKQ,OACfG,EAAMT,EAAIF,KAAKO,SAEvBT,EAAOV,UAAUwB,YAAc,SAAUC,GACrC,OAAIA,aAAgBf,GACZe,EAAKZ,EAAID,KAAKC,IACdD,KAAKG,OAASW,KAAKC,IAAIF,EAAKZ,EAAID,KAAKC,GACrCD,KAAKC,EAAIY,EAAKZ,GAEdY,EAAKX,EAAIF,KAAKE,IACdF,KAAKI,QAAUU,KAAKC,IAAIF,EAAKX,EAAIF,KAAKE,GACtCF,KAAKE,EAAIW,EAAKX,GAEdF,KAAKQ,MAAQK,EAAKL,QAClBR,KAAKG,OAASU,EAAKL,MAAQR,KAAKQ,OAEhCR,KAAKO,OAASM,EAAKN,SACnBP,KAAKI,QAAUS,EAAKN,OAASP,KAAKO,SAE/B,IAGHM,EAAKZ,EAAID,KAAKC,IACdD,KAAKG,OAASH,KAAKC,EAAIY,EAAKZ,EAC5BD,KAAKC,EAAIY,EAAKZ,GAEdY,EAAKZ,EAAID,KAAKQ,QACdR,KAAKG,OAASU,EAAKZ,EAAID,KAAKC,GAE5BY,EAAKX,EAAIF,KAAKE,IACdF,KAAKI,QAAUJ,KAAKE,EAAIW,EAAKX,EAC7BF,KAAKE,EAAIW,EAAKX,GAEdW,EAAKX,EAAIF,KAAKO,SACdP,KAAKI,QAAUS,EAAKX,EAAIF,KAAKE,IAE1B,IAGfJ,EAAOV,UAAU4B,KAAO,SAAUC,GAC9B,OAAIjB,KAAKG,QAAUc,EAAOd,OAASH,KAAKI,SAAWa,EAAOb,OAC/C,EAEPJ,KAAKG,OAASc,EAAOd,OAASH,KAAKI,QAAUa,EAAOb,OAC7C,EAEJ,GAEXN,EAAOV,UAAU8B,UAAY,SAAUD,GACnC,QAASjB,KAAKQ,MAAQS,EAAOhB,GACzBD,KAAKC,EAAIgB,EAAOT,OAChBR,KAAKO,OAASU,EAAOf,GACrBF,KAAKE,EAAIe,EAAOb,SAExBN,EAAOV,UAAU+B,SAAW,SAAUF,GAClC,OAAQjB,KAAKC,GAAKgB,EAAOhB,GACrBD,KAAKQ,OAASS,EAAOT,OACrBR,KAAKE,GAAKe,EAAOf,GACjBF,KAAKO,QAAUU,EAAOV,QAE9BT,EAAOV,UAAUgC,SAAW,WACxB,MAAO,OAASpB,KAAKC,EAAI,MAAQD,KAAKE,EAAI,MAAQF,KAAKG,MAAQ,MAAQH,KAAKI,OAAS,KAElFN,EAlIG,GAoId3C,EAAQ2C,OAASA,iBCtIjB1C,EAAAD,QAAAO,gCCCAe,OAAOC,eAAevB,EAAS,cAAgB4B,OAAO,IAEtD,SAAWsC,GACPA,EAAWA,EAAA,WAA2B,GAAK,aAC3CA,EAAWA,EAAA,aAA6B,GAAK,eAC7CA,EAAWA,EAAA,YAA4B,GAAK,cAC5CA,EAAWA,EAAA,OAAuB,GAAK,SACvCA,EAAWA,EAAA,OAAuB,GAAK,SACvCA,EAAWA,EAAA,WAA2B,GAAK,aAC3CA,EAAWA,EAAA,YAA4B,GAAK,cAC5CA,EAAWA,EAAA,QAAwB,GAAK,UACxCA,EAAWA,EAAA,UAA0B,GAAK,YAC1CA,EAAWA,EAAA,SAAyB,GAAK,WAV7C,CAWgBlE,EAAQkE,aAAelE,EAAQkE,gBAE/C,SAAWC,GACPA,EAAUA,EAAA,OAAsB,GAAK,SACrCA,EAAUA,EAAA,UAAyB,GAAK,YACxCA,EAAUA,EAAA,MAAqB,GAAK,QAHxC,CAIenE,EAAQmE,YAAcnE,EAAQmE,6CCnB7C,SAASC,EAASpD,GACd,IAAK,IAAImB,KAAKnB,EAAQhB,EAAQkC,eAAeC,KAAInC,EAAQmC,GAAKnB,EAAEmB,IAEpEb,OAAOC,eAAevB,EAAS,cAAgB4B,OAAO,IACtDwC,EAAS1D,EAAQ,MACjB0D,EAAS1D,EAAQ,KACjB0D,EAAS1D,EAAQ,KACjB0D,EAAS1D,EAAQ,MACjB0D,EAAS1D,EAAQ,IACjB0D,EAAS1D,EAAQ,KACjB0D,EAAS1D,EAAQ,KACjB0D,EAAS1D,EAAQ,KACjB0D,EAAS1D,EAAQ,KACjB0D,EAAS1D,EAAQ,KACjB0D,EAAS1D,EAAQ,KACjB0D,EAAS1D,EAAQ,KACjB0D,EAAS1D,EAAQ,mCChBjB,IAAI2D,EAAaxB,MAAQA,KAAKwB,WAAe,WACzC,IAAIC,EAAgBhD,OAAOiD,iBACpBC,wBAA2BC,OAAS,SAAUvD,EAAGwD,GAAKxD,EAAEsD,UAAYE,IACvE,SAAUxD,EAAGwD,GAAK,IAAK,IAAIvC,KAAKuC,EAAOA,EAAExC,eAAeC,KAAIjB,EAAEiB,GAAKuC,EAAEvC,KACzE,OAAO,SAAUjB,EAAGwD,GAEhB,SAASC,IAAO9B,KAAK+B,YAAc1D,EADnCoD,EAAcpD,EAAGwD,GAEjBxD,EAAEe,UAAkB,OAANyC,EAAapD,OAAOuD,OAAOH,IAAMC,EAAG1C,UAAYyC,EAAEzC,UAAW,IAAI0C,IAP1C,GAU7CrD,OAAOC,eAAevB,EAAS,cAAgB4B,OAAO,IACtD,IAAIkD,EAAQpE,EAAQ,GAChBqE,EAAUrE,EAAQ,GAClBsE,EAAStE,EAAQ,GACjBuE,EAAoBvE,EAAQ,IAC5BwE,EAA0BxE,EAAQ,IAClCyE,EAA8BzE,EAAQ,IACtC0E,EAAS,SAAUC,GAEnB,SAASD,EAAME,GACX,IAAIC,EAAQF,EAAOtE,KAAK8B,KAAMyC,IAAUzC,KACxC0C,EAAMC,MAAQ,EACdD,EAAME,aAAe,IAAIC,IACzBH,EAAMI,oBAAsB,EAC5BJ,EAAMD,MAAQhE,OAAOsE,UAAWR,EAAMS,iBAAoBP,GAC1D,IAAIQ,EAAKP,EAAMD,MAAMS,QACrB,SAD+C,IAAPD,EAAgBf,EAAQrC,SAASsD,KAAOF,KAChEf,EAAQrC,SAASuD,IAAK,CAClC,IAAIC,EAAiBX,EAAMY,4BAC3BZ,EAAMQ,SACFK,QAASF,EAAeE,QACxBC,SAAU,IAAIrB,EAAOsB,gBAAgB,EAAG,EAAG,EAAG,EAAGJ,EAAeK,gBAChEC,KAAMzB,EAAQrC,SAASuD,KAM/B,OAHAV,EAAMkB,YAAc,IAAIvB,EAAwBwB,oBAAoBnB,GACpEA,EAAMoB,cAAgBpB,EAAMkB,YAAYG,mBACxCrB,EAAMsB,aAAe,IAAI1B,EAA4B2B,wBAAwBvB,GACtEA,EA4EX,OA/FAlB,EAAUe,EAAOC,GAqBjBD,EAAMnD,UAAU8E,QAAU,WACtBlE,KAAKmE,eAAeD,WAExB3B,EAAMnD,UAAUgF,eAAiB,aAEjC7B,EAAMnD,UAAUiF,KAAO,WAOnB,IANA,IAAIC,EACAvF,EAEAwF,EAAQC,EAAUC,EADlBC,EAAa1E,KAAKyC,MAAMkC,KAAKD,WAE7BZ,EAAgB9D,KAAK8D,cACrBF,EAAc5D,KAAK4D,YACd7F,EAAI,EAAG6G,EAAMF,EAAWG,OAAQ9G,EAAI6G,IAAO7G,EAEhDyG,GADAD,EAASG,EAAW3G,IACF,GAClB0G,EAAWzE,KAAKmE,eAAeW,YAAYN,GAC3CV,EAAcS,EAAO,IAAIX,EAAaY,EAAUC,GAEpDzE,KAAKyC,MAAMkC,KAAKI,UAChB,IAAShH,EAAI,EAAG6G,EAAM5E,KAAKyE,SAASI,OAAQ9G,EAAI6G,IAAO7G,EACnDuG,EAAUtE,KAAKyE,SAAS1G,GACxBgB,EAAQuF,EAAQU,OAAOV,GACvBA,EAAQW,iBAAiBC,QAAQ,SAAUC,GAAmB,OAAQA,EAAgBpG,MAAQA,KAGtGwD,EAAMnD,UAAUkE,0BAA4B,WACxC,MAAM,IAAI8B,MAAM,mJAEpB7C,EAAMnD,UAAUiG,aAAe,WAC3B,OACIC,SAAUrD,EAAMsD,kBAChBC,UAAWvD,EAAMwD,OAGzBlD,EAAMnD,UAAUsG,mBAAqB,WACjC,UAEJnD,EAAMnD,UAAUuG,WAAa,WACzB,OACIC,GAAI/H,EAAQ,IACZgI,sBACApB,YACAqB,oBACAC,YAAa,EACbC,GAAInI,EAAQ,MAGpB0E,EAAMnD,UAAU6G,sBAAwB,SAAUC,EAAOC,EAAY7H,EAAM8H,EAAMpB,EAAQqB,GACrF,OACIA,MAAOA,EACPH,MAAOA,EACPC,WAAYA,EACZ7H,KAAMA,EACN8H,KAAMA,EACNpB,OAAQA,IAGhBzC,EAAMnD,UAAUkH,YAAc,SAAUhI,EAAM8H,EAAMpB,EAAQuB,EAAiBC,GACzE,OACIlI,KAAMA,EACNkI,UAAWA,EACXD,gBAAiBA,EACjBH,KAAMA,EACNpB,OAAQA,IAGhBzC,EAAMnD,UAAUqH,oBAAsB,SAAUC,KAEhDnE,EAAMnD,UAAUuH,gBAAkB,SAAUC,KAE5CrE,EAAMnD,UAAUyH,UAAY,WACxB7G,KAAKyC,MAAMkC,KAAKI,WAEpBxC,EAAMS,gBACCT,EAhGE,CAiGXH,EAAkB0E,eACpB3J,EAAQoF,MAAQA,gCCnHhB,IAAIwE,EAAc/G,MAAQA,KAAK+G,YAAe,SAAUC,EAAYC,EAAQC,EAAKC,GAC7E,IAA2H9I,EAAvHD,EAAIgJ,UAAUvC,OAAQ/F,EAAIV,EAAI,EAAI6I,EAAkB,OAATE,EAAgBA,EAAO1I,OAAO4I,yBAAyBJ,EAAQC,GAAOC,EACrH,GAAuB,iBAAZG,SAAoD,mBAArBA,QAAQC,SAAyBzI,EAAIwI,QAAQC,SAASP,EAAYC,EAAQC,EAAKC,QACpH,IAAK,IAAIpJ,EAAIiJ,EAAWnC,OAAS,EAAG9G,GAAK,EAAGA,KAASM,EAAI2I,EAAWjJ,MAAIe,GAAKV,EAAI,EAAIC,EAAES,GAAKV,EAAI,EAAIC,EAAE4I,EAAQC,EAAKpI,GAAKT,EAAE4I,EAAQC,KAASpI,GAChJ,OAAOV,EAAI,GAAKU,GAAKL,OAAOC,eAAeuI,EAAQC,EAAKpI,GAAIA,GAEhEL,OAAOC,eAAevB,EAAS,cAAgB4B,OAAO,IACtD,IAAIyI,EAAS3J,EAAQ,GACjB4J,EAAY,WACZ,SAASA,EAAS1H,GACdC,KAAK0H,QAAU,IAAI7E,IACnB7C,KAAK2H,IAAM5H,EAAQ6H,GACnB5H,KAAK6H,OAAS9H,EAAQ8H,QAAU7H,KAAK6H,OAqBzC,OAnBAJ,EAASrI,UAAU8E,QAAU,aAE7BzF,OAAOC,eAAe+I,EAASrI,UAAW,UACtCP,IAAK,WACD,OAAOmB,KAAK0H,SAEhB9I,YAAY,EACZD,cAAc,IAElBF,OAAOC,eAAe+I,EAASrI,UAAW,MACtCP,IAAK,WACD,OAAOmB,KAAK2H,KAEhB/I,YAAY,EACZD,cAAc,IAElBoI,GACIS,EAAOM,YACRL,EAASrI,UAAW,cAAU,GAC1BqI,EAzBK,GA2BhBtK,EAAQsK,SAAWA,gCCnCnB,SAASlG,EAASpD,GACd,IAAK,IAAImB,KAAKnB,EAAQhB,EAAQkC,eAAeC,KAAInC,EAAQmC,GAAKnB,EAAEmB,IAEpEb,OAAOC,eAAevB,EAAS,cAAgB4B,OAAO,IACtDwC,EAAS1D,EAAQ,IACjB0D,EAAS1D,EAAQ,oCCLjB,SAAS0D,EAASpD,GACd,IAAK,IAAImB,KAAKnB,EAAQhB,EAAQkC,eAAeC,KAAInC,EAAQmC,GAAKnB,EAAEmB,IAEpEb,OAAOC,eAAevB,EAAS,cAAgB4B,OAAO,IACtDwC,EAAS1D,EAAQ,KACjB0D,EAAS1D,EAAQ,KACjB0D,EAAS1D,EAAQ,KACjB0D,EAAS1D,EAAQ,KACjB0D,EAAS1D,EAAQ,KACjB0D,EAAS1D,EAAQ,KACjB0D,EAAS1D,EAAQ,KACjB0D,EAAS1D,EAAQ,mCCXjBY,OAAOC,eAAevB,EAAS,cAAgB4B,OAAO,IACtD,IAAI+H,EAAiB,WACjB,SAASA,EAAc/G,GACnBC,KAAKkH,IAAMnH,EAAQmH,IASvB,OAPAzI,OAAOC,eAAeoI,EAAc1H,UAAW,MAC3CP,IAAK,WACD,OAAOmB,KAAKkH,KAEhBtI,YAAY,EACZD,cAAc,IAEXmI,EAXU,GAarB3J,EAAQ2J,cAAgBA,gCCdxBrI,OAAOC,eAAevB,EAAS,cAAgB4B,OAAO,IAEtD,SAAWgJ,GACPA,EAAcA,EAAA,KAAwB,GAAK,OAC3CA,EAAcA,EAAA,aAAgC,GAAK,eAFvD,CAGmB5K,EAAQ4K,gBAAkB5K,EAAQ4K,mBAErD,SAAWC,GACPA,EAASA,EAAA,KAAmB,GAAK,OACjCA,EAASA,EAAA,OAAqB,GAAK,SACnCA,EAASA,EAAA,QAAsB,GAAK,UAHxC,CAIc7K,EAAQ6K,WAAa7K,EAAQ6K,cAE3C,SAAWC,GACPA,EAAeA,EAAA,IAAwB,GAAK,MAC5CA,EAAeA,EAAA,OAA2B,GAAK,SAC/CA,EAAeA,EAAA,OAA2B,GAAK,SAHnD,CAIoB9K,EAAQ8K,iBAAmB9K,EAAQ8K,kDCjBvDxJ,OAAOC,eAAevB,EAAS,cAAgB4B,OAAO,IACtD,IAAImJ,EAAgB,WAChB,SAASA,KAkBT,OAhBAA,EAAa9I,UAAU+I,cAAgB,SAAUC,GAC7C,OAAOpI,KAAKqI,aAAaC,QAAQF,IAErCF,EAAa9I,UAAUkJ,QAAU,SAAUF,GACvC,OAAQpI,KAAKqI,cAAgBrI,KAAKqI,aAAaC,QAAQF,IAAY,MAEvEF,EAAa9I,UAAUmJ,oBAAsB,SAAUH,GACnD,IAAII,EAAOxI,KAAKqI,aAAaC,QAAQF,GACrC,OAAII,EACOA,EAAKC,aAET,MAEXP,EAAa9I,UAAUsJ,gBAAkB,SAAUL,GAC/CrI,KAAKqI,aAAeA,GAEjBH,EAnBS,GAqBpB/K,EAAQ+K,aAAeA,gCCtBvBzJ,OAAOC,eAAevB,EAAS,cAAgB4B,OAAO,IACtD,IAAIkD,EAAQpE,EAAQ,GAepBV,EAAQwL,mBAXR,SAA4BC,EAAOC,EAAUC,GACzC,IAAIC,EAAYH,EAAMvD,eAClB2D,EAAQ,IAAID,EAAUvD,UAAUqD,EAAUC,GAO9C,OAZJ,SAAgBG,GACZ,OAAOC,QAAQD,EAAIE,QAKfA,CAAOH,KACPA,EAAM1D,cACqB8D,IAAvBL,EAAUzD,SACJrD,EAAMoH,sBACNN,EAAUzD,UAEjB0D,iCCdX,IAAIxH,EAAaxB,MAAQA,KAAKwB,WAAe,WACzC,IAAIC,EAAgBhD,OAAOiD,iBACpBC,wBAA2BC,OAAS,SAAUvD,EAAGwD,GAAKxD,EAAEsD,UAAYE,IACvE,SAAUxD,EAAGwD,GAAK,IAAK,IAAIvC,KAAKuC,EAAOA,EAAExC,eAAeC,KAAIjB,EAAEiB,GAAKuC,EAAEvC,KACzE,OAAO,SAAUjB,EAAGwD,GAEhB,SAASC,IAAO9B,KAAK+B,YAAc1D,EADnCoD,EAAcpD,EAAGwD,GAEjBxD,EAAEe,UAAkB,OAANyC,EAAapD,OAAOuD,OAAOH,IAAMC,EAAG1C,UAAYyC,EAAEzC,UAAW,IAAI0C,IAP1C,GAU7CrD,OAAOC,eAAevB,EAAS,cAAgB4B,OAAO,IACtD,IAAIuK,EAAsBzL,EAAQ,IAC9B0L,EAAW1L,EAAQ,GACnBuE,EAAoBvE,EAAQ,IAC5B2L,EAAgB3L,EAAQ,IAO5B,SAAS4L,EAAeR,GACpB,MAAO,SAAUA,GANrB,SAAWS,GACPA,EAAWA,EAAA,MAAsB,GAAK,QACtCA,EAAWA,EAAA,MAAsB,GAAK,QACtCA,EAAWA,EAAA,QAAwB,GAAK,UAH5C,CAIgBvM,EAAQuM,aAAevM,EAAQuM,gBAI/C,IAAIC,EAAQ,SAAUnH,GAElB,SAASmH,EAAK5J,GACV,IAAI2C,EAAQF,EAAOtE,KAAK8B,KAAMD,IAAYC,KAI1C,OAHA0C,EAAMC,MAAQ,EACdD,EAAMkH,WAAapM,OAAOqM,iBAC1BpL,OAAOsE,OAAOL,EAAO3C,GACd2C,EAuHX,OA7HAlB,EAAUmI,EAAMnH,GAQhBmH,EAAKvK,UAAU0K,mBAAqB,SAAUnJ,EAAOoJ,GACjD,IAAIzK,EAAIyK,IAAS9J,EAAG,EAAGC,EAAG,GAG1B,OAFAZ,EAAEW,EAAIU,EAAMV,EAAID,KAAK4J,WACrBtK,EAAEY,EAAIS,EAAMT,EAAIF,KAAK4J,WACdtK,GAEXqK,EAAKvK,UAAU4K,mBAAqB,SAAUrJ,EAAOoJ,GACjD,IAAIzK,EAAIyK,IAAS9J,EAAG,EAAGC,EAAG,GAG1B,OAFAZ,EAAEW,EAAIU,EAAMV,EAAID,KAAK4J,WACrBtK,EAAEY,EAAIS,EAAMT,EAAIF,KAAK4J,WACdtK,GAEXqK,EAAKvK,UAAU6K,aAAe,SAAUtJ,EAAOoJ,GAC3C,IAAIzK,EAAIU,KAAK8J,mBAAmBnJ,EAAOoJ,GAGvC,OAFAzK,EAAEW,EAAIX,EAAEW,EAAID,KAAKkK,WAAWjK,EAC5BX,EAAEY,EAAIZ,EAAEY,EAAIF,KAAKkK,WAAWhK,EACrBZ,GAEXqK,EAAKvK,UAAU+K,aAAe,SAAUxJ,EAAOoJ,GAC3C,IAAIzK,GAAMW,EAAG,EAAGC,EAAG,GAGnB,OAFAZ,EAAEW,EAAIU,EAAMV,EAAID,KAAKkK,WAAWjK,EAChCX,EAAEY,EAAIS,EAAMT,EAAIF,KAAKkK,WAAWhK,EACzBF,KAAKgK,mBAAmB1K,EAAGyK,IAEtCJ,EAAKvK,UAAUgL,cAAgB,SAAUzJ,EAAOoJ,GAC5C,IAAIvB,EAAOxI,KAAKgK,mBAAmBhK,KAAKiK,aAAatJ,IACjD0J,EAAQN,IAAS9J,EAAG,EAAGC,EAAG,GAU9B,OATAmK,EAAMpK,GACDuI,EAAKvI,EAAID,KAAKsK,OAAOC,OAAO,GAAKvK,KAAKsK,OAAOE,MAAM,IAChDxK,KAAKsK,OAAOE,MAAM,GAC1BH,EAAMnK,GACDsI,EAAKtI,EAAIF,KAAKsK,OAAOC,OAAO,GAAKvK,KAAKsK,OAAOE,MAAM,IAChDxK,KAAKsK,OAAOE,MAAM,GACtBxK,KAAKyK,WAAW9G,OAAS6F,EAAckB,eAAeC,QACtDC,QAAQC,KAAK,oDAEVR,GAEXV,EAAKvK,UAAU0L,cAAgB,SAAUnK,EAAOoJ,GAC5C,IAAIgB,GAAW9K,EAAG,EAAGC,EAAG,GAYxB,OAXA6K,EAAO9K,GACFU,EAAMV,EAAID,KAAKsK,OAAOE,MAAM,GACzBxK,KAAKsK,OAAOC,OAAO,GAAKvK,KAAKsK,OAAOE,MAAM,IAC1CxK,KAAK4J,WACbmB,EAAO7K,GACFS,EAAMT,EAAIF,KAAKsK,OAAOE,MAAM,GACzBxK,KAAKsK,OAAOC,OAAO,GAAKvK,KAAKsK,OAAOE,MAAM,IAC1CxK,KAAK4J,WACT5J,KAAKyK,WAAW9G,OAAS6F,EAAckB,eAAeC,QACtDC,QAAQC,KAAK,oDAEV7K,KAAKmK,aAAaY,EAAQhB,IAErCJ,EAAKvK,UAAU4L,YAAc,SAAUrK,EAAOoJ,GAC1C,IAAIM,EAAQN,IAAS9J,EAAG,EAAGC,EAAG,GAC1B6K,EAAS/K,KAAKgK,mBAAmBrJ,GAUrC,OATA0J,EAAMpK,GACD8K,EAAO9K,EAAID,KAAKsK,OAAOC,OAAO,GAAKvK,KAAKsK,OAAOE,MAAM,IAClDxK,KAAKsK,OAAOE,MAAM,GAC1BH,EAAMnK,GACD6K,EAAO7K,EAAIF,KAAKsK,OAAOC,OAAO,GAAKvK,KAAKsK,OAAOE,MAAM,IAClDxK,KAAKsK,OAAOE,MAAM,GACtBxK,KAAKyK,WAAW9G,OAAS6F,EAAckB,eAAeC,QACtDC,QAAQC,KAAK,oDAEVR,GAEXV,EAAKvK,UAAU6L,YAAc,SAAUtK,EAAOoJ,GAC1C,IAAIgB,EAAShB,IAAS9J,EAAG,EAAGC,EAAG,GAU/B,OATA6K,EAAO9K,EACHU,EAAMV,EAAID,KAAKsK,OAAOE,MAAM,GACxBxK,KAAKsK,OAAOC,OAAO,GAAKvK,KAAKsK,OAAOE,MAAM,GAClDO,EAAO7K,EACHS,EAAMT,EAAIF,KAAKsK,OAAOE,MAAM,GACxBxK,KAAKsK,OAAOC,OAAO,GAAKvK,KAAKsK,OAAOE,MAAM,GAC9CxK,KAAKyK,WAAW9G,OAAS6F,EAAckB,eAAeC,QACtDC,QAAQC,KAAK,oDAEVE,GAEXpB,EAAKvK,UAAU8L,kBAAoB,SAAUC,GACzC,GAAInL,KAAKyK,WAAW9G,OAAS6F,EAAckB,eAAeU,YACtD3B,EAAezJ,KAAKyK,WAAWY,YAAa,CAC5C,IAAInB,EAAaZ,EAAoBgC,0BAA0BtL,KAAKuL,SAAUJ,EAAmBnL,KAAK4J,YAClGzJ,EAAQ+J,EAAW/J,MACnBC,EAAS8J,EAAW9J,OACpBmL,GACAhL,QAASH,EAAS,EAClBoL,IAAK,IACLnL,MAAOF,EAAQ,EACfsL,MAAO,IACPjL,MAAOL,EAAQ,EACfG,IAAKF,EAAS,GAIdkK,EAAStK,KAAKyK,WAAWY,WAC7B5M,OAAOsE,OAAOuH,EAAQiB,GACtBjB,EAAOoB,SAASC,KAAKzB,EAAW/J,MAAQ,EAJ3B,EAIyC+J,EAAW9J,OAAS,EAH7D,EAG2EkK,EAAOoB,SAASE,GACxGtB,EAAOE,MAAMmB,IALA,GACA,EAIqB,GAClCrB,EAAOuB,eACPvB,EAAOwB,mBAAkB,GACzBxB,EAAOyB,yBACP/L,KAAKkK,WAAaA,EAClBlK,KAAKkK,WAAWvF,KAAO3E,KACvBA,KAAKyI,aAAe,IAAIc,EAASzJ,QAC7BM,OAAQJ,KAAKkK,WAAW9J,OAASJ,KAAK4J,WACtCzJ,MAAOH,KAAKkK,WAAW/J,MAAQH,KAAK4J,WACpC3J,EAAGD,KAAKkK,WAAWjK,EAAID,KAAK4J,WAC5B1J,EAAGF,KAAKkK,WAAWhK,EAAIF,KAAK4J,kBAG1BH,EAAezJ,KAAKyK,WAAWY,aACrCT,QAAQC,KAAK,qFAGrBlB,EAAKqC,gBAAkB,cAChBrC,EA9HC,CA+HVvH,EAAkB0E,eACpB3J,EAAQwM,KAAOA,gCCxJf,IAAInI,EAAaxB,MAAQA,KAAKwB,WAAe,WACzC,IAAIC,EAAgBhD,OAAOiD,iBACpBC,wBAA2BC,OAAS,SAAUvD,EAAGwD,GAAKxD,EAAEsD,UAAYE,IACvE,SAAUxD,EAAGwD,GAAK,IAAK,IAAIvC,KAAKuC,EAAOA,EAAExC,eAAeC,KAAIjB,EAAEiB,GAAKuC,EAAEvC,KACzE,OAAO,SAAUjB,EAAGwD,GAEhB,SAASC,IAAO9B,KAAK+B,YAAc1D,EADnCoD,EAAcpD,EAAGwD,GAEjBxD,EAAEe,UAAkB,OAANyC,EAAapD,OAAOuD,OAAOH,IAAMC,EAAG1C,UAAYyC,EAAEzC,UAAW,IAAI0C,IAP1C,GAU7CrD,OAAOC,eAAevB,EAAS,cAAgB4B,OAAO,IACtD,IAAIkD,EAAQpE,EAAQ,GAEpB,SAASoO,EAAYC,EAAGrK,GACpB,OAAOqK,EAAEvJ,MAAQd,EAAEc,MAEvB,IAAIwJ,EAAS,SAAU3J,GAEnB,SAAS2J,EAAMpM,GACX,IAAI2C,EAAQF,EAAOtE,KAAK8B,KAAMD,IAAYC,KAO1C,OANA0C,EAAM0J,UAAY,IAAInK,EAAMkK,MAC5BzJ,EAAM2J,UACN3J,EAAM4J,aAAc,EACpB5J,EAAM6J,SAAW,IAAI1J,IACrBH,EAAM0J,UAAUI,eAAgB,EAChC9J,EAAM0J,UAAUK,YAAa,EACtB/J,EA4BX,OArCAlB,EAAU2K,EAAO3J,GAWjB2J,EAAM/M,UAAUsN,SAAW,SAAU9D,GACjC5I,KAAKqM,OAAOM,KAAK/D,GACjB5I,KAAKsM,aAAc,GAEvBH,EAAM/M,UAAUwN,QAAU,SAAUpE,GAChCxI,KAAKuM,SAASZ,IAAInD,EAAKZ,GAAIY,IAE/B2D,EAAM/M,UAAU8E,QAAU,kBACflE,KAAKoM,WAEhBD,EAAM/M,UAAUyN,YAAc,SAAUjE,GACpC,GAAI5I,KAAKqM,OAAQ,CACb,IAAIS,EAAQ9M,KAAKqM,OAAOU,QAAQnE,GAChC,GAAIkE,GAAS,EAET,YADA9M,KAAKqM,OAAOW,OAAOF,EAAO,GAIlClC,QAAQC,KAAK,oGAAqG7K,KAAK4H,GAAI,SAAUgB,EAAMhB,KAE/IuE,EAAM/M,UAAU6N,WAAa,WACrBjN,KAAKsM,aACLtM,KAAKqM,OAAOa,KAAKjB,IAGzBE,EAAMgB,iBAAmB,cAClBhB,EAtCE,CAJWtO,EAAQ,IA2CZiJ,eACpB3J,EAAQgP,MAAQA,gCCxDhB,IAAI3K,EAAaxB,MAAQA,KAAKwB,WAAe,WACzC,IAAIC,EAAgBhD,OAAOiD,iBACpBC,wBAA2BC,OAAS,SAAUvD,EAAGwD,GAAKxD,EAAEsD,UAAYE,IACvE,SAAUxD,EAAGwD,GAAK,IAAK,IAAIvC,KAAKuC,EAAOA,EAAExC,eAAeC,KAAIjB,EAAEiB,GAAKuC,EAAEvC,KACzE,OAAO,SAAUjB,EAAGwD,GAEhB,SAASC,IAAO9B,KAAK+B,YAAc1D,EADnCoD,EAAcpD,EAAGwD,GAEjBxD,EAAEe,UAAkB,OAANyC,EAAapD,OAAOuD,OAAOH,IAAMC,EAAG1C,UAAYyC,EAAEzC,UAAW,IAAI0C,IAP1C,GAU7CrD,OAAOC,eAAevB,EAAS,cAAgB4B,OAAO,IACtD,IACIqO,EAAsB,SAAU5K,GAEhC,SAAS4K,EAAmBC,GACxB,IAAI3K,EAAQF,EAAOtE,KAAK8B,OAASA,KAEjC,OADA0C,EAAM2K,MAAQA,EACP3K,EAEX,OANAlB,EAAU4L,EAAoB5K,GAMvB4K,EAPe,CADEvP,EAAQ,IASZyP,mBACxBnQ,EAAQiQ,mBAAqBA,gCCrB7B3O,OAAOC,eAAevB,EAAS,cAAgB4B,OAAO,IACtD,IAAIuO,EAAqB,WAIrB,OAHA,WACItN,KAAKuN,YAAc,GAFF,GAMzBpQ,EAAQmQ,kBAAoBA,gCCN5B,IAAI5C,EADJjM,OAAOC,eAAevB,EAAS,cAAgB4B,OAAO,IAEtD,SAAW2L,GACPA,EAAeA,EAAA,WAA+B,GAAK,aACnDA,EAAeA,EAAA,OAA2B,GAAK,SAFnD,CAGGA,EAAiBvN,EAAQuN,iBAAmBvN,EAAQuN,oBACvD,IAAI8C,EAAc,WAId,OAHA,WACIxN,KAAK2D,KAAO+G,EAAeU,YAFjB,GAMlBjO,EAAQqQ,WAAaA,gCCZrB/O,OAAOC,eAAevB,EAAS,cAAgB4B,OAAO,IA0CtD5B,EAAQsQ,eAzCR,SAAwBC,EAAQ3N,EAAS4N,GACrC,IAAIC,EAAU,IAAI/K,IACdgL,EAAkB,IAAIhL,IACtBiL,EAAW,IAAIjL,IACfkL,EAAgB,IAAIlL,IACpBmL,EAAgBN,EAAOO,QAAQ,eAAgB,SAAUC,EAAIC,GAE7D,OADAJ,EAAcpC,IAAIwC,GAAQJ,EAAclP,IAAIsP,IAAU,GAAK,GACvDA,KAASpO,GACT6N,EAAQjC,IAAIwC,GAAQP,EAAQ/O,IAAIsP,IAAU,GAAK,GACxCpO,EAAQoO,KAEnBN,EAAgBlC,IAAIwC,GAAQN,EAAgBhP,IAAIsP,IAAU,GAAK,GACxD,MAEX1P,OAAO2P,KAAKrO,GAASmF,QAAQ,SAAUmJ,GAC9BT,EAAQ/O,IAAIwP,IACbP,EAASnC,IAAI0C,GAASP,EAASjP,IAAIwP,IAAW,GAAK,KAG3D,IAAIC,GACAC,sBAAuBX,EACvBF,OAAQM,EACRQ,sBAAuBT,EACvBU,0BAA2BX,EAC3BY,wBAAyBb,GAe7B,OAbIF,GACAA,EAASgB,OAAOzJ,QAAQ,SAAU7H,GAC1BiR,EAAQG,0BAA0B5P,IAAIxB,GACtCuN,QAAQgE,MAAMjB,EAASrP,KAAO,sDAAuDjB,GAEhFiR,EAAQI,wBAAwB7P,IAAIxB,GACzCuN,QAAQgE,MAAMjB,EAASrP,KAAO,yEAA0EjB,GAElGiR,EAAQC,sBAAsB1P,IAAIxB,IACxCuN,QAAQgE,MAAMjB,EAASrP,KAAO,yEAA0EjB,KAI7GiR,iCCxCX7P,OAAOC,eAAevB,EAAS,cAAgB4B,OAAO,IACtD,IAAI8P,EAAiB,EACrB,SAASC,EAAW7H,EAAQ8H,GACxB9H,GAAU8H,GAAU9H,EAAO+F,OAAOgC,MAAM/H,GAAS,EAAG8H,EAAOlK,QAAQoK,OAAOF,IAE9E,IAAIG,EAAe,WACf,SAASA,EAAYnP,GACjBC,KAAK2H,IAAMkH,IACX7O,KAAKuK,QAAU,EAAG,EAAG,GACrBvK,KAAKwK,OAAS,EAAG,EAAG,GAChBzK,IACA+O,EAAW9O,KAAKuK,OAAQxK,EAAQwK,QAChCuE,EAAW9O,KAAKwK,MAAOzK,EAAQyK,QAavC,OAVA/L,OAAOC,eAAewQ,EAAY9P,UAAW,MACzCP,IAAK,WACD,OAAOmB,KAAK2H,KAEhB/I,YAAY,EACZD,cAAc,IAElBuQ,EAAY9P,UAAUsM,SAAW,SAAUyD,GACvCnP,KAAKuK,OAAS4E,EAASC,MAAM,IAE1BF,EApBQ,GAsBnB/R,EAAQ+R,YAAcA,gCC3BtBzQ,OAAOC,eAAevB,EAAS,cAAgB4B,OAAO,IACtD,IAAIsQ,EAAOvO,KAAKuO,KAChB,SAASC,EAAKjP,EAAMG,GAChB,OAAQH,EAAK,GAAKG,EAAM,IAG5B,SAAS+O,EAAOC,EAAKhF,GACjB,OAAQgF,EAAI,GAAKhF,GAGrB,SAASiF,EAAUpP,EAAMG,GACrB,OAAQH,EAAK,GAAKG,EAAM,IAG5B,SAASkP,EAAUrP,EAAMG,GACrB,OAAQH,EAAK,GAAKG,EAAM,IAG5B,SAASmP,EAAKtP,EAAMG,GAChB,OAAOH,EAAK,GAAKG,EAAM,GAG3B,SAASoP,EAAQC,EAAOjL,EAAKkL,GACzB,OAAOP,EAAOD,EAAKG,EAAU7K,EAAKiL,GAAQA,GAAQC,GAGtD,SAASC,EAAQF,GACb,OAAOR,EAAKM,EAAKE,EAAOA,IAG5B,SAASG,EAAK3P,EAAMG,GAChB,OAAQH,EAAK,GAAKG,EAAM,GAAIH,EAAK,GAAKG,EAAM,IAGhD,SAASyP,EAAO5P,EAAMmK,GAClB,OAAQnK,EAAK,GAAKmK,EAAOnK,EAAK,GAAKmK,GAGvC,SAAS0F,EAAU7P,EAAMG,GACrB,OAAQH,EAAK,GAAKG,EAAM,GAAIH,EAAK,GAAKG,EAAM,IAGhD,SAAS2P,EAAU9P,EAAMG,GACrB,OAAQH,EAAK,GAAKG,EAAM,GAAIH,EAAK,GAAKG,EAAM,IAGhD,SAAS4P,EAAK/P,EAAMG,GAChB,OAAOH,EAAK,GAAKG,EAAM,GAAKH,EAAK,GAAKG,EAAM,GAGhD,SAAS6P,EAAQR,EAAOjL,EAAKkL,GACzB,OAAOG,EAAOD,EAAKE,EAAUtL,EAAKiL,GAAQA,GAAQC,GAGtD,SAASQ,EAAQT,GACb,OAAOR,EAAKe,EAAKP,EAAOA,IAG5B,SAASU,EAAKlQ,EAAMG,GAChB,OAAQH,EAAK,GAAKG,EAAM,GAAIH,EAAK,GAAKG,EAAM,GAAIH,EAAK,GAAKG,EAAM,IAGpE,SAASgQ,EAAOnQ,EAAMmK,GAClB,OAAQnK,EAAK,GAAKmK,EAAOnK,EAAK,GAAKmK,EAAOnK,EAAK,GAAKmK,GAGxD,SAASiG,EAAUpQ,EAAMG,GACrB,OAAQH,EAAK,GAAKG,EAAM,GAAIH,EAAK,GAAKG,EAAM,GAAIH,EAAK,GAAKG,EAAM,IAGpE,SAASkQ,EAAUrQ,EAAMG,GACrB,OAAQH,EAAK,GAAKG,EAAM,GAAIH,EAAK,GAAKG,EAAM,GAAIH,EAAK,GAAKG,EAAM,IAGpE,SAASmQ,EAAQd,EAAOjL,EAAKkL,GACzB,OAAOU,EAAOD,EAAKE,EAAU7L,EAAKiL,GAAQA,GAAQC,GAGtD,SAASc,EAAQf,GACb,OAAOR,EAAKwB,EAAKhB,EAAOA,IAG5B,SAASgB,EAAKxQ,EAAMG,GAChB,OAAOH,EAAK,GAAKG,EAAM,GAAKH,EAAK,GAAKG,EAAM,GAAKH,EAAK,GAAKG,EAAM,GAGrE,SAASsQ,EAAKzQ,EAAMG,GAChB,OACIH,EAAK,GAAKG,EAAM,GAChBH,EAAK,GAAKG,EAAM,GAChBH,EAAK,GAAKG,EAAM,GAChBH,EAAK,GAAKG,EAAM,IAIxB,SAASuQ,EAAO1Q,EAAMmK,GAClB,OAAQnK,EAAK,GAAKmK,EAAOnK,EAAK,GAAKmK,EAAOnK,EAAK,GAAKmK,EAAOnK,EAAK,GAAKmK,GAGzE,SAASwG,EAAU3Q,EAAMG,GACrB,OACIH,EAAK,GAAKG,EAAM,GAChBH,EAAK,GAAKG,EAAM,GAChBH,EAAK,GAAKG,EAAM,GAChBH,EAAK,GAAKG,EAAM,IAIxB,SAASyQ,EAAU5Q,EAAMG,GACrB,OACIH,EAAK,GAAKG,EAAM,GAChBH,EAAK,GAAKG,EAAM,GAChBH,EAAK,GAAKG,EAAM,GAChBH,EAAK,GAAKG,EAAM,IAIxB,SAAS0Q,EAAK7Q,EAAMG,GAChB,OAAQH,EAAK,GAAKG,EAAM,GACpBH,EAAK,GAAKG,EAAM,GAChBH,EAAK,GAAKG,EAAM,GAChBH,EAAK,GAAKG,EAAM,GAGxB,SAAS2Q,EAAQtB,EAAOjL,EAAKkL,GACzB,OAAOiB,EAAOD,EAAKE,EAAUpM,EAAKiL,GAAQA,GAAQC,GAGtD,SAASsB,EAAQvB,GACb,OAAOR,EAAK6B,EAAKrB,EAAOA,IA5H5B1S,EAAQmS,KAAOA,EAIfnS,EAAQoS,OAASA,EAIjBpS,EAAQsS,UAAYA,EAIpBtS,EAAQuS,UAAYA,EAIpBvS,EAAQwS,KAAOA,EAIfxS,EAAQyS,QAAUA,EAIlBzS,EAAQ4S,QAAUA,EAIlB5S,EAAQ6S,KAAOA,EAIf7S,EAAQ8S,OAASA,EAIjB9S,EAAQ+S,UAAYA,EAIpB/S,EAAQgT,UAAYA,EAIpBhT,EAAQiT,KAAOA,EAIfjT,EAAQkT,QAAUA,EAIlBlT,EAAQmT,QAAUA,EAIlBnT,EAAQoT,KAAOA,EAIfpT,EAAQqT,OAASA,EAIjBrT,EAAQsT,UAAYA,EAIpBtT,EAAQuT,UAAYA,EAIpBvT,EAAQwT,QAAUA,EAIlBxT,EAAQyT,QAAUA,EAIlBzT,EAAQ0T,KAAOA,EASf1T,EAAQ2T,KAAOA,EAIf3T,EAAQ4T,OAASA,EASjB5T,EAAQ6T,UAAYA,EASpB7T,EAAQ8T,UAAYA,EAOpB9T,EAAQ+T,KAAOA,EAIf/T,EAAQgU,QAAUA,EAIlBhU,EAAQiU,QAAUA,EAkDlBjU,EAAQkU,QAjDR,SAAiB7B,GAEb,OAAmB,IAAfA,EAAI3K,QAEAyM,IAAKhC,EACLiC,IAAK5B,EACL9K,OAAQkL,EACRyB,OAAQ5B,EACR6B,SAAU/B,EACVlF,MAAO+E,EACPmC,SAAUjC,GAIM,IAAfD,EAAI3K,QAELyM,IAAKtB,EACLuB,IAAKnB,EACLvL,OAAQyL,EACRkB,OAAQnB,EACRoB,SAAUtB,EACV3F,MAAOyF,EACPyB,SAAUxB,GAIM,IAAfV,EAAI3K,QAELyM,IAAKf,EACLgB,IAAKV,EACLhM,OAAQ+L,EACRY,OAAQb,EACRc,SAAUf,EACVlG,MAAOgG,EACPkB,SAAUjB,IAKda,IAAKR,EACLS,IAAKL,EACLrM,OAAQuM,EACRI,OAAQL,EACRM,SAAUR,EACVzG,MAAOuG,EACPW,SAAUV,kCCjLlBvS,OAAOC,eAAevB,EAAS,cAAgB4B,OAAO,IACtD,IAMI4S,EANAC,EAAW/T,EAAQ,IACnBgU,EAAM/Q,KAAK+Q,IAAKC,EAAMhR,KAAKgR,IAAKC,EAAMjR,KAAKiR,IAAKC,EAAQlR,KAAKkR,MAAOC,EAAMnR,KAAKmR,IAAKC,EAAKpR,KAAKoR,GAC9FC,EAASH,EAAW,IAALE,GAAa,IAChC,SAASE,EAAMnS,EAAGoS,EAAQC,GACtB,OAAOT,EAAIC,EAAI7R,EAAGoS,GAASC,IAG/B,SAAWX,GACPA,EAAoBA,EAAA,KAA8B,GAAK,OACvDA,EAAoBA,EAAA,OAAgC,GAAK,SACzDA,EAAoBA,EAAA,QAAiC,GAAK,UAH9D,CAIGA,EAAsBxU,EAAQwU,sBAAwBxU,EAAQwU,yBACjE,IAcIY,EAAoB,0GAA4GJ,EAAS,6DACzIK,EAAgB,sEAAwEL,EAAS,kDAGjGM,EAAoB,WACpB,SAASA,EAAiBC,EAAKC,EAAKC,EAAUC,GAC1C7S,KAAK8S,MAAQ,EACb9S,KAAK4S,SAAW,IAChB5S,KAAK+S,KAAOpB,EAAoBxO,KAChCnD,KAAK0S,IAAMA,EACX1S,KAAK2S,IAAMA,EACX3S,KAAK4S,SAAWA,GAAY,IAC5B5S,KAAKgT,WAAaH,GAAU,eAwThC,OAtTAJ,EAAiBQ,UAAY,SAAUL,EAAUE,EAAOC,GAGpD,YAFc,IAAVD,IAAoBA,EAAQ,QACnB,IAATC,IAAmBA,EAAOpB,EAAoBxO,OAE9CuP,IAAK,SAAUQ,EAAQtO,EAAKuO,GAAM,OAAOvO,GACzCkO,MAAOA,EACPF,SAAUA,EACVD,IAnCO,0CAoCPI,KAAMA,EACNC,WAAY,cAGpBP,EAAiBjB,OAAS,SAAUoB,EAAUE,EAAOC,GAGjD,YAFc,IAAVD,IAAoBA,EAAQ,QACnB,IAATC,IAAmBA,EAAOpB,EAAoBxO,OAE9CuP,IAAK,SAAU7C,EAAOjL,EAAKkL,GACvB,IAAI7M,EAAK2O,EAASP,QAAQxB,GAAQyB,EAAMrO,EAAGqO,IAAK9G,EAAQvH,EAAGuH,MAAOkH,EAAWzO,EAAGyO,SAEhF,OADA5B,EAAIsC,EAAMtC,EAAG,EAAG,GACTwB,EAAI9G,EAAMkH,EAAS9M,EAAKiL,GAAQC,GAAID,IAE/CiD,MAAOA,EACPF,SAAUA,EACVD,IAlDI,gEAmDJI,KAAMA,EACNC,WAAY,WAGpBP,EAAiBW,WAAa,SAAUR,EAAUE,EAAOC,GAGrD,YAFc,IAAVD,IAAoBA,EAAQ,QACnB,IAATC,IAAmBA,EAAOpB,EAAoBxO,OAE9CuP,IAAK,SAAU7C,EAAOjL,EAAKkL,GAEvB,IAAIuD,GADJvD,EAAIsC,EAAMtC,EAAG,EAAG,IACDA,EACX7M,EAAK2O,EAASP,QAAQxB,GAC1B,OAAOyB,EADiCrO,EAAGqO,MAChC9G,EAD6CvH,EAAGuH,QAC1CkH,EAD4DzO,EAAGyO,UACtD9M,EAAKiL,GAAQwD,GAAOxD,IAElDiD,MAAOA,EACPF,SAAUA,EACVD,IAlEQ,0FAmERI,KAAMA,EACNC,WAAY,eAGpBP,EAAiBa,YAAc,SAAUV,EAAUE,EAAOC,GAGtD,YAFc,IAAVD,IAAoBA,EAAQ,QACnB,IAATC,IAAmBA,EAAOpB,EAAoBxO,OAE9CuP,IAAK,SAAU7C,EAAOjL,EAAKkL,GAEvB,IAAIuD,GADJvD,EAAIsC,EAAMtC,EAAG,EAAG,KACA,EAAIA,GAChB7M,EAAK2O,EAASP,QAAQxB,GAC1B,OAAOyB,EADiCrO,EAAGqO,MAChC9G,EAD6CvH,EAAGuH,QAC1CkH,EAD4DzO,EAAGyO,UACtD9M,EAAKiL,GAAQwD,GAAOxD,IAElDiD,MAAOA,EACPF,SAAUA,EACVD,IAlFS,kGAmFTI,KAAMA,EACNC,WAAY,gBAGpBP,EAAiBc,cAAgB,SAAUX,EAAUE,EAAOC,GAGxD,YAFc,IAAVD,IAAoBA,EAAQ,QACnB,IAATC,IAAmBA,EAAOpB,EAAoBxO,OAE9CuP,IAAK,SAAU7C,EAAOjL,EAAKkL,GAEvB,IAAIuD,GADJvD,EAAIsC,EAAMtC,EAAG,EAAG,IACD,GAAM,EAAIA,EAAIA,GAAU,EAAI,EAAIA,GAAKA,EAAlB,EAC9B7M,EAAK2O,EAASP,QAAQxB,GAC1B,OAAOyB,EADiCrO,EAAGqO,MAChC9G,EAD6CvH,EAAGuH,QAC1CkH,EAD4DzO,EAAGyO,UACtD9M,EAAKiL,GAAQwD,GAAOxD,IAElDiD,MAAOA,EACPF,SAAUA,EACVD,IAlGW,uIAmGXI,KAAMA,EACNC,WAAY,kBAGpBP,EAAiBe,YAAc,SAAUZ,EAAUE,EAAOC,GAGtD,YAFc,IAAVD,IAAoBA,EAAQ,QACnB,IAATC,IAAmBA,EAAOpB,EAAoBxO,OAE9CuP,IAAK,SAAU7C,EAAOjL,EAAKkL,GAEvB,IAAIuD,GADJvD,EAAIsC,EAAMtC,EAAG,EAAG,IACDA,EAAIA,EACf7M,EAAK2O,EAASP,QAAQxB,GAC1B,OAAOyB,EADiCrO,EAAGqO,MAChC9G,EAD6CvH,EAAGuH,QAC1CkH,EAD4DzO,EAAGyO,UACtD9M,EAAKiL,GAAQwD,GAAOxD,IAElDiD,MAAOA,EACPF,SAAUA,EACVD,IAlHS,8FAmHTI,KAAMA,EACNC,WAAY,gBAGpBP,EAAiBgB,aAAe,SAAUb,EAAUE,EAAOC,GAGvD,YAFc,IAAVD,IAAoBA,EAAQ,QACnB,IAATC,IAAmBA,EAAOpB,EAAoBxO,OAE9CuP,IAAK,SAAU7C,EAAOjL,EAAKkL,GACvBA,EAAIsC,EAAMtC,EAAG,EAAG,GAChB,IAAIuD,IAASvD,EAAIA,EAAIA,EAAI,EACrB7M,EAAK2O,EAASP,QAAQxB,GAC1B,OAAOyB,EADiCrO,EAAGqO,MAChC9G,EAD6CvH,EAAGuH,QAC1CkH,EAD4DzO,EAAGyO,UACtD9M,EAAKiL,GAAQwD,GAAOxD,IAElDiD,MAAOA,EACPF,SAAUA,EACVD,IAlIU,8HAmIVI,KAAMA,EACNC,WAAY,iBAGpBP,EAAiBiB,eAAiB,SAAUd,EAAUE,EAAOC,GAGzD,YAFc,IAAVD,IAAoBA,EAAQ,QACnB,IAATC,IAAmBA,EAAOpB,EAAoBxO,OAE9CuP,IAAK,SAAU7C,EAAOjL,EAAKkL,GAEvB,IAAIuD,GADJvD,EAAIsC,EAAMtC,EAAG,EAAG,IACD,GAAM,EAAIA,EAAIA,EAAIA,GAAKA,EAAI,IAAM,EAAIA,EAAI,IAAM,EAAIA,EAAI,GAAK,EACvE7M,EAAK2O,EAASP,QAAQxB,GAC1B,OAAOyB,EADiCrO,EAAGqO,MAChC9G,EAD6CvH,EAAGuH,QAC1CkH,EAD4DzO,EAAGyO,UACtD9M,EAAKiL,GAAQwD,GAAOxD,IAElDiD,MAAOA,EACPF,SAAUA,EACVD,IAlJY,oKAmJZI,KAAMA,EACNC,WAAY,mBAGpBP,EAAiBkB,YAAc,SAAUf,EAAUE,EAAOC,GAGtD,YAFc,IAAVD,IAAoBA,EAAQ,QACnB,IAATC,IAAmBA,EAAOpB,EAAoBxO,OAE9CuP,IAAK,SAAU7C,EAAOjL,EAAKkL,GAEvB,IAAIuD,GADJvD,EAAIsC,EAAMtC,EAAG,EAAG,IACDA,EAAIA,EAAIA,EACnB7M,EAAK2O,EAASP,QAAQxB,GAC1B,OAAOyB,EADiCrO,EAAGqO,MAChC9G,EAD6CvH,EAAGuH,QAC1CkH,EAD4DzO,EAAGyO,UACtD9M,EAAKiL,GAAQwD,GAAOxD,IAElDiD,MAAOA,EACPF,SAAUA,EACVD,IAlKS,kGAmKTI,KAAMA,EACNC,WAAY,gBAGpBP,EAAiBmB,aAAe,SAAUhB,EAAUE,EAAOC,GAGvD,YAFc,IAAVD,IAAoBA,EAAQ,QACnB,IAATC,IAAmBA,EAAOpB,EAAoBxO,OAE9CuP,IAAK,SAAU7C,EAAOjL,EAAKkL,GACvBA,EAAIsC,EAAMtC,EAAG,EAAG,GAChB,IAAIuD,EAAO,KAAMvD,EAAIA,EAAIA,EAAIA,EACzB7M,EAAK2O,EAASP,QAAQxB,GAC1B,OAAOyB,EADiCrO,EAAGqO,MAChC9G,EAD6CvH,EAAGuH,QAC1CkH,EAD4DzO,EAAGyO,UACtD9M,EAAKiL,GAAQwD,GAAOxD,IAElDiD,MAAOA,EACPF,SAAUA,EACVD,IAlLU,mIAmLVI,KAAMA,EACNC,WAAY,iBAGpBP,EAAiBoB,eAAiB,SAAUjB,EAAUE,EAAOC,GAGzD,YAFc,IAAVD,IAAoBA,EAAQ,QACnB,IAATC,IAAmBA,EAAOpB,EAAoBxO,OAE9CuP,IAAK,SAAU7C,EAAOjL,EAAKkL,GAEvB,IAAIuD,GADJvD,EAAIsC,EAAMtC,EAAG,EAAG,IACD,GAAM,EAAIA,EAAIA,EAAIA,EAAIA,EAAI,EAAI,IAAMA,EAAIA,EAAIA,EAAIA,EAC3D7M,EAAK2O,EAASP,QAAQxB,GAC1B,OAAOyB,EADiCrO,EAAGqO,MAChC9G,EAD6CvH,EAAGuH,QAC1CkH,EAD4DzO,EAAGyO,UACtD9M,EAAKiL,GAAQwD,GAAOxD,IAElDiD,MAAOA,EACPF,SAAUA,EACVD,IAlMY,yKAmMZI,KAAMA,EACNC,WAAY,mBAGpBP,EAAiBqB,YAAc,SAAUlB,EAAUE,EAAOC,GAGtD,YAFc,IAAVD,IAAoBA,EAAQ,QACnB,IAATC,IAAmBA,EAAOpB,EAAoBxO,OAE9CuP,IAAK,SAAU7C,EAAOjL,EAAKkL,GAEvB,IAAIuD,GADJvD,EAAIsC,EAAMtC,EAAG,EAAG,IACDA,EAAIA,EAAIA,EAAIA,EACvB7M,EAAK2O,EAASP,QAAQxB,GAC1B,OAAOyB,EADiCrO,EAAGqO,MAChC9G,EAD6CvH,EAAGuH,QAC1CkH,EAD4DzO,EAAGyO,UACtD9M,EAAKiL,GAAQwD,GAAOxD,IAElDiD,MAAOA,EACPF,SAAUA,EACVD,IAlNS,sGAmNTI,KAAMA,EACNC,WAAY,gBAGpBP,EAAiBsB,aAAe,SAAUnB,EAAUE,EAAOC,GAGvD,YAFc,IAAVD,IAAoBA,EAAQ,QACnB,IAATC,IAAmBA,EAAOpB,EAAoBxO,OAE9CuP,IAAK,SAAU7C,EAAOjL,EAAKkL,GACvBA,EAAIsC,EAAMtC,EAAG,EAAG,GAChB,IAAIuD,EAAO,IAAMvD,EAAIA,EAAIA,EAAIA,EAAIA,EAC7B7M,EAAK2O,EAASP,QAAQxB,GAC1B,OAAOyB,EADiCrO,EAAGqO,MAChC9G,EAD6CvH,EAAGuH,QAC1CkH,EAD4DzO,EAAGyO,UACtD9M,EAAKiL,GAAQwD,GAAOxD,IAElDiD,MAAOA,EACPF,SAAUA,EACVD,IAlOU,wIAmOVI,KAAMA,EACNC,WAAY,iBAGpBP,EAAiBuB,eAAiB,SAAUpB,EAAUE,EAAOC,GAGzD,YAFc,IAAVD,IAAoBA,EAAQ,QACnB,IAATC,IAAmBA,EAAOpB,EAAoBxO,OAE9CuP,IAAK,SAAU7C,EAAOjL,EAAKkL,GAEvB,IAAIuD,GADJvD,EAAIsC,EAAMtC,EAAG,EAAG,IACD,GAAM,GAAKA,EAAIA,EAAIA,EAAIA,EAAIA,EAAI,EAAI,KAAOA,EAAIA,EAAIA,EAAIA,EAAIA,EACrE7M,EAAK2O,EAASP,QAAQxB,GAC1B,OAAOyB,EADiCrO,EAAGqO,MAChC9G,EAD6CvH,EAAGuH,QAC1CkH,EAD4DzO,EAAGyO,UACtD9M,EAAKiL,GAAQwD,GAAOxD,IAElDiD,MAAOA,EACPF,SAAUA,EACVD,IAlPY,oLAmPZI,KAAMA,EACNC,WAAY,mBAGpBP,EAAiBwB,eAAiB,SAAUrB,EAAUE,EAAOC,GAGzD,YAFc,IAAVD,IAAoBA,EAAQ,QACnB,IAATC,IAAmBA,EAAOpB,EAAoBxO,OAE9CuP,IAAK,SAAU7C,EAAOjL,EAAKkL,GACvBA,EAAIsC,EAAMtC,EAAG,EAAG,GAChB,IACIuD,EAAOtB,EAAI,GAAI,GAAKjC,GAAKmC,EAAmB,EAAIC,GAAlBpC,EAAIxQ,MAD9B,IACuD,EAC3D2D,EAAK2O,EAASP,QAAQxB,GAC1B,OAAOyB,EADiCrO,EAAGqO,MAChC9G,EAD6CvH,EAAGuH,QAC1CkH,EAD4DzO,EAAGyO,UACtD9M,EAAKiL,GAAQwD,GAAOxD,IAElDiD,MAAOA,EACPF,SAAUA,EACVD,IAAKJ,EACLQ,KAAMA,EACNC,WAAY,mBAGpBP,EAAiByB,WAAa,SAAUtB,EAAUE,EAAOC,GAGrD,YAFc,IAAVD,IAAoBA,EAAQ,QACnB,IAATC,IAAmBA,EAAOpB,EAAoBxO,OAE9CuP,IAAK,SAAU7C,EAAOjL,EAAKkL,GAEvB,IACIuD,GAFJvD,EAAIsC,EAAMtC,EAAG,EAAG,IAEDA,EAAIA,EADX,KACeA,EAAQmC,EAAInC,EAAIoC,GACnCjP,EAAK2O,EAASP,QAAQxB,GAC1B,OAAOyB,EADiCrO,EAAGqO,MAChC9G,EAD6CvH,EAAGuH,QAC1CkH,EAD4DzO,EAAGyO,UACtD9M,EAAKiL,GAAQwD,GAAOxD,IAElDiD,MAAOA,EACPF,SAAUA,EACVD,IAAKH,EACLO,KAAMA,EACNC,WAAY,eAGpBP,EAAiB0B,YAAc,SAAUvB,EAAUE,EAAOC,GAGtD,YAFc,IAAVD,IAAoBA,EAAQ,QACnB,IAATC,IAAmBA,EAAOpB,EAAoBxO,OAE9CuP,IAAK,SAAU7C,EAAOjL,EAAKkL,GAEvB,IACIsE,GAFJtE,EAAIsC,EAAMtC,EAAG,EAAG,IAEH,EACTuD,EAAOe,EAAKA,GAAM,IAAUA,EAFxB,KAEkC,EACtCnR,EAAK2O,EAASP,QAAQxB,GAC1B,OAAOyB,EADiCrO,EAAGqO,MAChC9G,EAD6CvH,EAAGuH,QAC1CkH,EAD4DzO,EAAGyO,UACtD9M,EAAKiL,GAAQwD,GAAOxD,IAElDiD,MAAOA,EACPF,SAAUA,EACVD,IAtSS,oKAuSTI,KAAMA,EACNC,WAAY,gBAGpBP,EAAiB4B,cAAgB,SAAUzB,EAAUE,EAAOC,GAGxD,YAFc,IAAVD,IAAoBA,EAAQ,QACnB,IAATC,IAAmBA,EAAOpB,EAAoBxO,OAE9CuP,IAAK,SAAU7C,EAAOjL,EAAKkL,GAEvB,IACIwE,EAAKpI,OACLkI,GAHJtE,EAAIsC,EAAMtC,EAAG,EAAG,IAGH,GACTyE,EAAKH,EAAK,EACVf,EAAOe,EAAK,EACV,IAAOA,EAAKA,GAAME,EAAK,GAAKF,EAAKE,GACjC,IAAOC,EAAKA,IAAOD,EAAK,GAAKC,EAAKD,GAAM,GAC1CrR,EAAK2O,EAASP,QAAQxB,GAC1B,OAAOyB,EADiCrO,EAAGqO,MAChC9G,EAD6CvH,EAAGuH,QAC1CkH,EAD4DzO,EAAGyO,UACtD9M,EAAKiL,GAAQwD,GAAOxD,IAElDiD,MAAOA,EACPF,SAAUA,EACVD,IA5TW,mSA6TXI,KAAMA,EACNC,WAAY,kBAGbP,EAhUa,GAkUxBtV,EAAQsV,iBAAmBA,gCCjW3BhU,OAAOC,eAAevB,EAAS,cAAgB4B,OAAO,IACtD,IAAIyV,EAAU3W,EAAQ,IAClB4W,EAAc5W,EAAQ,IAE1B,SAASoO,EAAYC,EAAGrK,GACpB,OAAOA,EAAE8C,KAAKhC,MAAQuJ,EAAEvH,KAAKhC,MAEjC,SAAS+R,EAAUzL,GACf,OAAOC,QAAQD,GAEnB,IAAI0L,EAAqB,WACrB,SAASA,EAAkBC,EAAQC,EAAOC,EAAaC,GACnD,IAAIrS,EAAQ1C,KACZA,KAAKgV,gBACLhV,KAAKiV,mBAAoB,EACzBjV,KAAKkV,mBAAqB,SAAUC,GAChC,IAAIC,EAAW1S,EAAMc,SAAS6R,MAAMF,GAEpC,OADAC,EAASlI,KAAKjB,GACPmJ,GAEXpV,KAAKsV,OAAS,WACV5S,EAAMuS,mBAAoB,GAE9BjV,KAAKuV,QAAUX,EACf5U,KAAKwV,SAASX,GACd7U,KAAKyV,eAAeX,GACpB9U,KAAK0V,oBAAoBX,GAoN7B,OAlNAtW,OAAOC,eAAeiW,EAAkBvV,UAAW,oBAC/CP,IAAK,WACD,OAAOmB,KAAKiV,mBAEhBtJ,IAAK,SAAU1C,GACXjJ,KAAKiV,kBAAoBhM,EACpBA,IACDjJ,KAAKwD,SAAW,IAAIiR,EAAYkB,SAAS,EAAG,EAAG,EAAG,GAClD3V,KAAKwD,SAASoS,OAAO5V,KAAK6U,MAAMgB,IAAI,SAAUC,GAAK,OAAOA,EAAE7U,SAAW8U,OAAOrB,MAGtF9V,YAAY,EACZD,cAAc,IAElBgW,EAAkBvV,UAAUsW,oBAAsB,SAAUX,GACxD,IAAIrS,EAAQ1C,KACRgW,EAAUhW,KAAKuV,QACfU,EAAY,KACZC,GAAkBjW,EAAG,EAAGC,EAAG,GAC/B,GAAI6U,EAAoB,CACpB,IAAIoB,EAAe,SAAUC,GACzB,GAAKH,EAAL,CAEA,IAAId,EAAQX,EAAQ6B,qBAAqBD,EAAOJ,GAC5CM,EAAc5T,EAAM6T,gBAAgBpB,EAAOe,EAAeD,GAC1DO,EAAQ9T,EAAM+T,UAAUL,GAC5B1T,EAAMoS,YAAY5P,QAAQ,SAAUwR,GAChCA,EAAWC,YAAYL,EAAaE,KAExCJ,EAAMQ,kBACNR,EAAMS,mBAEN,YAAab,IACbA,EAAQc,QAAUX,GAElB,qBAAsBH,IACtBA,EAAQe,iBAAiB,iBAAkBZ,GAC3CnW,KAAKgV,aAAarI,MAAM,iBAAkBwJ,KAGlDH,EAAQgB,aAAe,SAAUZ,GAC7B,IAAI1T,EAAMuU,kBAELhB,EAAL,CAEA,IAAId,EAAQX,EAAQ6B,qBAAqBD,EAAOJ,GAC5CM,EAAc5T,EAAM6T,gBAAgBpB,EAAOe,EAAeD,GAC9DvT,EAAMoS,YAAY5P,QAAQ,SAAUwR,GAChCA,EAAWQ,eAAeZ,OAGlCN,EAAQmB,YAAc,SAAUf,GAC5B,IAAI1T,EAAMuU,kBAELhB,EAAL,CAEA,IAAId,EAAQX,EAAQ6B,qBAAqBD,EAAOJ,GAC5CM,EAAc5T,EAAM6T,gBAAgBpB,EAAOe,EAAeD,GAC9DvT,EAAMoS,YAAY5P,QAAQ,SAAUwR,GAChCA,EAAWU,gBAAgBd,OAGnCN,EAAQqB,YAAc,SAAUjB,GAC5B,IAAI1T,EAAMuU,iBAAV,CAEAf,EAAgB1B,EAAQ6B,qBAAqBD,EAAOJ,GACpD,IAAIsB,EAAY5U,EAAMwS,mBAAmBgB,GACrCqB,GAAW,EACXC,EAAiBC,KAAKC,MAC1B,KAAIJ,EAAUzS,QAAU,KAGxBoR,EAAYqB,EAAU,GAAG3S,MACzB,CAEA,IAAI2R,EAAc5T,EAAM6T,gBAAgBL,EAAeA,EAAeD,GAClE0B,EAAkBzB,EACtBxT,EAAMoS,YAAY5P,QAAQ,SAAUwR,GAChCA,EAAWkB,gBAAgBtB,EAAaF,EAAMyB,UAElDzB,EAAMQ,kBACNkB,SAASX,YAAc,SAAUf,GAC7B,GAAKH,EAAL,CAEA,IAAId,EAAQX,EAAQ6B,qBAAqBD,EAAOJ,GAC5CM,EAAc5T,EAAM6T,gBAAgBpB,EAAOe,EAAeD,GAC1D8B,GACA9X,EAAGkV,EAAMlV,EAAI0X,EAAgB1X,EAC7BC,EAAGiV,EAAMjV,EAAIyX,EAAgBzX,GAE7B8X,EAAOtV,EAAMuV,SAAS9C,EAAOe,EAAeyB,EAAiBI,GACjEJ,EAAkBxC,EAClBzS,EAAMoS,YAAY5P,QAAQ,SAAUwR,GAChCA,EAAWwB,WAAW5B,EAAa0B,KAEvCT,GAAW,IAEfO,SAASK,UAAY,SAAUC,GAC3BN,SAASX,YAAc,KACvBW,SAASK,UAAY,KACrBL,SAASO,YAAc,MAE3BP,SAASO,YAAc,SAAUjC,GAC7B,GAAKH,EAAL,CAEA,IAAId,EAAQX,EAAQ6B,qBAAqBD,EAAOJ,GAC5CM,EAAc5T,EAAM6T,gBAAgBpB,EAAOe,EAAeD,GAC9DvT,EAAMoS,YAAY5P,QAAQ,SAAUwR,GAChCA,EAAW4B,gBAAgBhC,KAE/BF,EAAMQ,oBAEVZ,EAAQmC,UAAY,SAAU/B,GAC1B,GAAKH,EAAL,CAEA,IAAId,EAAQX,EAAQ6B,qBAAqBD,EAAOJ,GAC5CM,EAAc5T,EAAM6T,gBAAgBpB,EAAOe,EAAeD,GAC9DvT,EAAMoS,YAAY5P,QAAQ,SAAUwR,GAChCA,EAAW6B,cAAcjC,EAAaF,EAAMyB,UAE5CN,GAAYE,KAAKC,MAAQF,EAjJrB,KAkJJ9U,EAAMoS,YAAY5P,QAAQ,SAAUwR,GAChCA,EAAW8B,YAAYlC,EAAaF,EAAMyB,YAItD7B,EAAQyC,cAAgB,WACpB,OAAO,MAGfzY,KAAK0Y,4BAET/D,EAAkBvV,UAAUsZ,yBAA2B,WACnD,IAAI1C,EAAUhW,KAAKuV,QACnBS,EAAQ2C,aAAe,SAAUP,KAEjCpC,EAAQ4C,WAAa,SAAUR,KAE/BpC,EAAQ6C,YAAc,SAAUT,KAEhCpC,EAAQ8C,cAAgB,SAAUV,MAGtCzD,EAAkBvV,UAAUkJ,QAAU,SAAUF,GAC5C,IAAK,IAAI2Q,EAAK,EAAG9V,EAAKjD,KAAK6U,MAAOkE,EAAK9V,EAAG4B,OAAQkU,IAAM,CACpD,IAAIvQ,EAAOvF,EAAG8V,GACd,GAAIvQ,EAAKA,KAAKZ,KAAOQ,EACjB,OAAOI,EAAKA,KAGpB,OAAO,MAEXmM,EAAkBvV,UAAU6Y,SAAW,SAAU9C,EAAOtF,EAAOmJ,EAAUjB,GACrE,OACIhN,QACIkO,QAAS9D,EACT4C,MAAOA,EACPiB,SAAUA,EACVnJ,MAAOA,KAInB8E,EAAkBvV,UAAUmX,gBAAkB,SAAUpB,EAAOtF,EAAOoG,GAClE,IAAIb,EAAWpV,KAAKkV,mBAAmBC,GACvC,OACIpK,QACIoK,MAAOA,GAEXtF,MAAOA,GACHoG,IACAd,MAAOc,EAAUzN,KAAKyB,aAAakL,GACnC3M,KAAMyN,EAAUzN,MAEpBvB,QACIkO,MAAOC,EAAS,IAAMA,EAAS,GAAGzQ,KAAK6D,KAAKyB,aAAakL,GACzD3M,KAAM4M,EAAS,IAAMA,EAAS,GAAGzQ,KAAK6D,MAE1C0Q,gBAAiB9D,EAASS,IAAI,SAAUC,GAAK,OACzCX,MAAOW,EAAEnR,KAAK6D,KAAKyB,aAAakL,GAChC3M,KAAMsN,EAAEnR,KAAK6D,UAIzBmM,EAAkBvV,UAAUqX,UAAY,SAAUL,GAC9C,IAAII,EAAQhC,EAAQ2E,eAAe/C,GACnC,OACII,OAAQA,EAAMvW,EAAGuW,EAAMtW,KAG/ByU,EAAkBvV,UAAUqW,eAAiB,SAAUX,GACnD9U,KAAK8U,YAAcA,EACnB,IAAK,IAAIiE,EAAK,EAAG9V,EAAKjD,KAAK8U,YAAaiE,EAAK9V,EAAG4B,OAAQkU,IAAM,CACzC9V,EAAG8V,GACTrQ,gBAAgB1I,QAGnC2U,EAAkBvV,UAAUoW,SAAW,SAAUX,GAC7C7U,KAAK6U,MAAQA,GAEjBF,EAAkBvV,UAAU8E,QAAU,WAClC,IAAIxB,EAAQ1C,YACLA,KAAKwD,SACZxD,KAAKuV,QAAQ8B,YAAc,KAC3BrX,KAAKuV,QAAQ4B,YAAc,KAC3BnX,KAAKuV,QAAQyB,aAAe,KAC5BhX,KAAKuV,QAAQ6D,aAAe,KAC5BpZ,KAAKgV,aAAa9P,QAAQ,SAAUkR,GAChC1T,EAAM6S,QAAQ8D,oBAAoBjD,EAAM,GAAIA,EAAM,OAGnDzB,EApOc,GAsOzBxX,EAAQwX,kBAAoBA,gCChP5BlW,OAAOC,eAAevB,EAAS,cAAgB4B,OAAO,IACtD,IAmWIkE,EAAIqW,EAnWJrX,EAAQpE,EAAQ,GAChBqE,EAAUrE,EAAQ,GAClBsE,EAAStE,EAAQ,GACjB0b,EAAuB1b,EAAQ,IAC/BkD,EAAMD,KAAKC,IACXyY,IAAmBvW,MAChBf,EAAQzC,sBAAsBga,MAAQ,GACzCxW,EAAGf,EAAQzC,sBAAsBia,MAAQ,EAAG,GAC5CzW,EAAGf,EAAQzC,sBAAsBka,QAAU,EAAG,EAAG,GACjD1W,EAAGf,EAAQzC,sBAAsBma,OAAS,EAAG,EAAG,EAAG,GACnD3W,GACA4W,IAAiBP,MACdpX,EAAQzC,sBAAsBga,MAAQ,GACzCH,EAAGpX,EAAQzC,sBAAsBia,MAAQ,EAAG,GAC5CJ,EAAGpX,EAAQzC,sBAAsBka,QAAU,EAAG,EAAG,GACjDL,EAAGpX,EAAQzC,sBAAsBma,OAAS,EAAG,EAAG,EAAG,GACnDN,GACAQ,EAAe,IAAI7X,EAAM8X,QAI7B,SAASC,EAAkBC,GACvB,OAAO/Q,QAAQ+Q,IAASA,EAAKC,aAAwB9Q,IAAd6Q,EAAK7T,KAEhD,SAAS+T,EAAoBF,GACzB,OAAO/Q,QAAQ+Q,GAEnB,SAASG,EAAkBH,GACvB,OAAO/Q,QAAQ+Q,GAEnB,SAASI,EAAUJ,GACf,OAAO/Q,QAAQ+Q,GAEnB,SAASK,EAA0BC,GAC/B,OAAO9b,OAAOsE,UAAWwX,GAAaC,kBAAmB,OAE7D,SAASC,EAAkBnW,GACvB,OAAO7F,OAAOsE,UAAWuB,GAAWW,sBAExC,SAASyV,EAAeC,EAAYC,GAChC,IAAIC,KACAC,EAAW,OACK1R,IAAhBwR,IACAA,EAAc,GAElBD,EAAWzV,QAAQ,SAAU6V,GACzB,IAAI7U,EAAQ6U,EAAkB7U,MAC1B4G,OAAyC1D,IAAjC2R,EAAkB5U,WACxB,EACA4U,EAAkB5U,WACpBC,OAAkCgD,IAA3B2R,EAAkB3U,KAAqB,EAAI2U,EAAkB3U,KAExE,IADA0U,EAAWha,KAAKgR,IAAI5L,EAAO4U,GACpBD,EAAWhW,OAAS,EAAIqB,GAC3B2U,EAAWlO,OAAM,GAAO,GAAO,GAAO,IAE1C,IAAK,IAAI5O,EAAI+O,EAAQ,EAAGlI,EAAMkI,EAAQ,EAAI1G,EAAMrI,EAAI6G,IAAO7G,EACvD8c,EAAW3U,GAAOnI,IAAK,IAG/B,IAAK,IAAIkC,EAAI,EAAGA,EAAI4a,EAAWhW,OAAQ5E,IACnC,IAAK,IAAI+a,EAAM,EAAGA,EAAM,EAAGA,IACvB,IAAIH,EAAW5a,GAAG+a,GAId,IAAK,IAAIC,EAAUD,EAAKC,EAAU,EAAGA,IACjC,IAAKJ,EAAW5a,GAAGgb,IACXA,EAAUD,EAAM,IAAMJ,EACtB,OAAQ3a,EAAG+a,EAAM,GAOzC,OAAQF,EAAW,EAAG5Y,EAAQ1C,mBAAmBia,KAErD,SAASyB,EAA0BhP,EAAGrK,GAClC,OAAIqK,EAAE7F,QAAUxE,EAAEwE,OACN,EACR6F,EAAEgO,SAAWrY,EAAEqY,QACP,EACL,EAEX,SAASiB,EAA8BvS,EAAO/C,GAC1C,IAAIuV,KACAC,EAA2B,IAAIxY,IA4BnC,OA3BAgD,EAAmBX,QAAQ,SAAUqV,GACjC,GAtER,SAA0BN,GACtB,OAAO/Q,QAAQ+Q,IAASA,EAAK5T,MAqErBiV,CAAiBf,GAAY,CAC7BA,EAAUnU,KAAOlE,EAAQzC,sBAAsBma,KAC/CW,EAAUpU,WAAajE,EAAQ1C,mBAAmBia,IAClD,IAAI8B,EAAYhB,EAAUlU,MAAME,iBAAmBrE,EAAQtC,sBAAsB4b,SAC7EC,EAAaJ,EAAyBxc,IAAI0b,EAAUlU,MAAM/H,MAC1Dmd,EACAJ,EAAyB1P,IAAI4O,EAAUlU,MAAM/H,MACzCmd,EAAW,IACPF,IAAcrZ,EAAQtC,sBAAsB8b,QAC5CH,IAAcrZ,EAAQtC,sBAAsBwD,IAChDqY,EAAW,IACPF,IAAcrZ,EAAQtC,sBAAsB4b,UAC5CD,IAAcrZ,EAAQtC,sBAAsBwD,OAIpDgY,EAAwBzO,KAAK4N,GAC7Bc,EAAyB1P,IAAI4O,EAAUlU,MAAM/H,MACzCid,IAAcrZ,EAAQtC,sBAAsB8b,QACxCH,IAAcrZ,EAAQtC,sBAAsBwD,IAChDmY,IAAcrZ,EAAQtC,sBAAsB4b,UACxCD,IAAcrZ,EAAQtC,sBAAsBwD,UAKzDgY,EAAwBvF,IAAI,SAAUkF,GACzC,IAAIQ,EAAYrZ,EAAQtC,sBAAsB4b,SAC9C,GAAIT,EAAkB1U,MAAO,CACzB,IAAIoV,EAAaJ,EAAyBxc,IAAIkc,EAAkB1U,MAAM/H,MAClEmd,IACAF,EACKE,EAAW,IAAMA,EAAW,IAAMvZ,EAAQtC,sBAAsBwD,KAC5DqY,EAAW,KAAOA,EAAW,IAAMvZ,EAAQtC,sBAAsB8b,SAChED,EAAW,IAAMA,EAAW,IAAMvZ,EAAQtC,sBAAsB4b,UAClED,GAGhB,OACIjd,KAAMyc,EAAkB1U,MAAM/H,KAC9BiI,gBAAiBgV,EACjBnV,KAAMlE,EAAQxC,YAAYic,MAC1B3W,OAAQ,WACJ,OAAO4D,EAAMgT,SAASC,gBAAgBd,EAAkB1U,MAAMa,MAC1D4S,MA6IpB,SAASgC,EAAW5P,EAAGrK,GACnB,GAAIqK,EAAErH,SAAWhD,EAAEgD,OACf,OAAO,EACX,IAAK,IAAI9G,EAAI,EAAG6G,EAAMsH,EAAErH,OAAQ9G,EAAI6G,IAAO7G,EACvC,GAAI+C,KAAKkR,MAAa,IAAP9F,EAAEnO,IAAY,KAAQ+C,KAAKkR,MAAa,IAAPnQ,EAAE9D,IAAY,IAC1D,OAAO,EAGf,OAAO,EAyEXZ,EAAQ4e,eAxBR,SAAwBnT,EAAOoT,GAC3B,IAAInW,GAAsBmW,EAASnW,wBAA0BkQ,OAAOoE,GAChErU,GAAoBkW,EAASlW,sBAAwBiQ,OAAOqE,GAC5D3V,GAAYuX,EAASvX,cAAgBsR,OAAOsE,IAlDpD,SAAoCxU,GAChCA,EAAmBX,QAAQ,SAAUqV,GAWjC,GAVIA,EAAUL,QAAUK,EAAUlU,QAC9BuE,QAAQC,KAAK,uGACbD,QAAQC,KAAK0P,IAEZA,EAAUlU,YACY+C,IAAnBmR,EAAUnU,OACVwE,QAAQC,KAAK,0DACbD,QAAQC,KAAK0P,IAGjBA,EAAUL,OACV,QAAuB9Q,IAAnBmR,EAAUnU,KAAoB,CAC9B,IAAI6V,EAAYzC,EAAgBe,EAAUnU,MACtC8V,EAAUrC,EAAcU,EAAUnU,MAClC+V,EAAO5B,EAAUL,OAAOxH,IAAIuJ,EAAWC,EAAS,GAC/CJ,EAAWK,EAAMF,KAClBrR,QAAQC,KAAK,qFACbD,QAAQC,KAAK,SAAUoR,EAAW,OAAQC,EAAS,UAAWC,GAC9DvR,QAAQC,KAAK0P,IAGZuB,EADLK,EAAO5B,EAAUL,OAAOxH,IAAIuJ,EAAWC,EAAS,GAC1BA,KAClBtR,QAAQC,KAAK,mFACbD,QAAQC,KAAK,SAAUoR,EAAW,OAAQC,EAAS,UAAWC,GAC9DvR,QAAQC,KAAK0P,IAGZuB,EADLK,EAAO5B,EAAUL,OAAOxH,IAAIuJ,EAAWC,GAAU,GAC3BD,KAClBrR,QAAQC,KAAK,sFACbD,QAAQC,KAAK,SAAUoR,EAAW,OAAQC,EAAS,UAAWC,GAC9DvR,QAAQC,KAAK0P,IAGZuB,EADLK,EAAO5B,EAAUL,OAAOxH,IAAIuJ,EAAWC,EAAS,GAC1BA,KAClBtR,QAAQC,KAAK,mFACbD,QAAQC,KAAK,SAAUoR,EAAW,OAAQC,EAAS,UAAWC,GAC9DvR,QAAQC,KAAK0P,SAIjB3P,QAAQC,KAAK,iEASzBuR,CAA2BvW,GArM/B,SAAkC+C,EAAO/C,GAErC,IADA,IAAIwW,KACKtD,EAAK,EAAGuD,EAAuBzW,EAAoBkT,EAAKuD,EAAqBzX,OAAQkU,IAEtFiB,EADAO,EAAY+B,EAAqBvD,KAEjCsD,EAAiB1P,KAAK4N,GAkE9B,IA/DA,IAAIgC,EAAU,SAAUhC,GACpB,IAGIiC,EAHAvZ,EAAKsX,EAAUL,OAAQA,EAASjX,EAAGyP,IAAKK,EAAO9P,EAAG8P,KAClD0J,EAASlC,EAAUjc,KAAM8H,EAAOmU,EAAUnU,KAAMpB,EAASuV,EAAUvV,OACnE0X,EAAYva,EAAOwa,MAEvBpC,EAAUvV,OAAS,SAAUxG,GACzB,IAAIyE,EAAKsX,EAAUL,OAAQpH,EAAQ7P,EAAG6P,MAAOF,EAAW3P,EAAG2P,SACvDhO,EAAMI,EAAOxG,GACboe,EAAchU,EAAMiU,QAAQC,aAAaF,YAC7CJ,EAAehe,EAAE0b,OAAOrb,IAAI6d,KACxB9J,SAAUA,EACVhO,IAAKA,EACLiL,MAAOjL,EACPmY,UAAWH,GAEf,IAAII,EAAY,EAChB,OAAQjK,GACJ,KAAKwG,EAAqB5H,oBAAoBsL,OAC1CD,GAAcJ,EAAcJ,EAAaO,WAAanK,EAAY,EAClE,MACJ,KAAK2G,EAAqB5H,oBAAoBuL,QAC1C,IAAIC,GAAcP,EAAcJ,EAAaO,WAAanK,EAC1DoK,EAAgD,EAApCjc,EAAKoc,EAAa,EAAO,EAAI,IACzC,MACJ,KAAK5D,EAAqB5H,oBAAoBxO,KAC9C,QACI6Z,GAAaJ,EAAcJ,EAAaO,WAAanK,EAO7D,OAJA4J,EAAa3M,MAAQqK,EAAOsC,EAAa3M,MAAO2M,EAAa5X,IAAKoY,GAClER,EAAaO,UAAYH,EAAc9J,EACvC0J,EAAa5X,IAAMA,EACnBpG,EAAE0b,OAAOvO,IAAI+Q,EAAWF,GACjB5X,GAEX,IAAIwY,EAAO1C,EAAe7U,EAAoBO,GAC1CiX,GACAnX,MAAOkX,EAAK,GACZjX,WAAYiX,EAAK,GACjB9e,KAAM,IAAMme,EAAS,SACrBrW,KAAMA,EACNpB,OAAQ,SAAUsY,GAAM,OAAOd,EAAa3M,QAEhDhK,EAAmB8G,KAAK0Q,GAExB,IAAIE,GACArX,OAFJkX,EAAO1C,EAAe7U,EAAoB3D,EAAQzC,sBAAsBga,MAExD,GACZtT,WAAYiX,EAAK,GACjB9e,KAAM,IAAMme,EAAS,cACrBrW,KAAMlE,EAAQzC,sBAAsBga,IACpCzU,OAAQ,SAAUsY,GAAM,OAAQd,EAAaO,aAEjDlX,EAAmB8G,KAAK4Q,GAExB,IAAIC,GACAtX,OAFJkX,EAAO1C,EAAe7U,EAAoB3D,EAAQzC,sBAAsBga,MAExD,GACZtT,WAAYiX,EAAK,GACjB9e,KAAM,IAAMme,EAAS,YACrBrW,KAAMlE,EAAQzC,sBAAsBga,IACpCzU,OAAQ,SAAUsY,GAAM,OAAQd,EAAa5J,YAEjD/M,EAAmB8G,KAAK6Q,IAEnBva,EAAK,EAAGwa,EAAqBpB,EAAkBpZ,EAAKwa,EAAmB5Y,OAAQ5B,IAAM,CAC1F,IAAIsX,EACJgC,EADIhC,EAAYkD,EAAmBxa,KA8HvCya,CAAyB9U,EAAO/C,GAChC,IACI8X,EADgBxC,EAA8BvS,EAAO/C,GACvBoJ,OA5HtC,SAA8BrG,GAC1B,QAEQtK,KAAM,aACN8H,KAAMlE,EAAQxC,YAAYke,QAC1B5Y,OAAQ,WAAc,OAAO4D,EAAMJ,KAAKiC,WAAWY,WAAWwS,iBAAiBC,YAG/Exf,KAAM,YACN8H,KAAMlE,EAAQxC,YAAYke,QAC1B5Y,OAAQ,WAAc,OAAO4D,EAAMJ,KAAKiC,WAAWY,WAAW0S,OAAOD,YAGrExf,KAAM,eACN8H,KAAMlE,EAAQxC,YAAYia,MAC1B3U,OAAQ,WAAc,OAAO4D,EAAMJ,KAAK8B,OAAOC,UAG/CjM,KAAM,cACN8H,KAAMlE,EAAQxC,YAAYia,MAC1B3U,OAAQ,WAAc,OAAO4D,EAAMJ,KAAK8B,OAAOE,SAG/ClM,KAAM,WACN8H,KAAMlE,EAAQxC,YAAYga,IAC1B1U,OAAQ,WAAc,OAAQ4D,EAAMJ,KAAK0B,WAAW/J,MAAOyI,EAAMJ,KAAK0B,WAAW9J,WAGjF9B,KAAM,aACN8H,KAAMlE,EAAQxC,YAAY+Z,IAC1BzU,OAAQ,WAAc,OAAQ4D,EAAMJ,KAAKoB,eAGzCtL,KAAM,cACN8H,KAAMlE,EAAQxC,YAAY+Z,IAC1BzU,OAAQ,WAAc,OAAQ4D,EAAMiU,QAAQC,aAAaF,gBAyFxBoB,CAAqBpV,IAC1DqV,EAtFR,SAAwCpY,GACpC,IAAIqY,EAAYxD,EAAe7U,EAAoB3D,EAAQzC,sBAAsBga,KACjF,QAEQvT,MAAOgY,EAAU,GACjB/X,WAAY+X,EAAU,GACtB5f,KAAM,UACN8H,KAAMlE,EAAQzC,sBAAsBga,IACpCzU,OAAQ,SAAUxG,GAAK,OAAQA,EAAEqJ,OAAS,EAAI,MA8ExBsW,CAA+BtY,GACzDuY,IAxEI9f,KAAM,WACN8H,KAAMlE,EAAQvC,oBAAoB8Z,IAClCzU,OAAQ,WAAc,OAAQ,MAuEtC4D,EAAMyV,gBAAkBJ,EAAwB,GAChD,IAAIK,EAAsBF,EACrBnP,OAAOnJ,OACP+P,IAAIyE,GACLiE,EAAcZ,EAAc1O,OAAOxK,GAAUoR,IAAI4E,GAIrD,OACI5U,mBAJwBoY,EACvBhP,OAAOpJ,GACPqH,KAAKgO,GAGNzW,SAAU8Z,EACVzY,iBAAkBwY,kCChW1B7f,OAAOC,eAAevB,EAAS,cAAgB4B,OAAO,IACtD,IA4CIkE,EAAIqW,EA5CJrX,EAAQpE,EAAQ,GAChBqE,EAAUrE,EAAQ,GAClB2gB,IAAiCvb,MAC9Bf,EAAQxC,YAAY+Z,KAAO,IAC9BxW,EAAGf,EAAQxC,YAAYga,KAAO,KAC9BzW,EAAGf,EAAQxC,YAAYia,OAAS,KAChC1W,EAAGf,EAAQxC,YAAYka,MAAQ,KAC/B3W,EAAGf,EAAQxC,YAAY+e,SAAW,YAClCxb,EAAGf,EAAQxC,YAAYke,SAAW,YAClC3a,GACAyb,IAAyBpF,MACtBpX,EAAQxC,YAAY+Z,MAAQ,GAC/BH,EAAGpX,EAAQxC,YAAYga,MAAQ,EAAG,GAClCJ,EAAGpX,EAAQxC,YAAYia,QAAU,EAAG,EAAG,GACvCL,EAAGpX,EAAQxC,YAAYka,OAAS,EAAG,EAAG,EAAG,GACzCN,EAAGpX,EAAQxC,YAAY+e,UAAY,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAC3DnF,EAAGpX,EAAQxC,YAAYke,UAAY,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAChFtE,GACJ,SAASqF,EAAkBra,GACvB,OACIX,KAAM6a,EAA8Bla,EAAQ8B,MAC5CrH,MAAO2f,EAAsBpa,EAAQ8B,OAsB7CjJ,EAAQyhB,sBAnBR,SAA+BhW,EAAO5C,EAAIJ,EAAIiZ,EAAeC,GACzD,IAAIC,EAAiBnW,EAAMlD,qBAC3BqZ,EAAeC,aAAehZ,EAC9B+Y,EAAeE,eAAiBrZ,EAChCmZ,EAAeta,YACf,IAAK,IAAI1G,EAAI,EAAG6G,EAAMia,EAAcha,OAAQ9G,EAAI6G,IAAO7G,EAAG,CACtD,IAAIuG,EAAUua,EAAc9gB,GACxBoH,EAAkBwZ,EAAkBra,GACxCya,EAAeta,SAASH,EAAQhG,MAAQ6G,EAE5C,IAASpH,EAAI,EAAG6G,EAAMka,EAAmBja,OAAQ9G,EAAI6G,IAAO7G,EAAG,CAC3D,IAAImhB,EAAmBJ,EAAmB/gB,GAC1CghB,EAAeta,SAASya,EAAiB5gB,OACrCqF,KAAMub,EAAiBvb,KACvB5E,MAAOmgB,EAAiBngB,OAGhC,OAAO,IAAIkD,EAAMkd,kBAAkBJ,kCC1CvCtgB,OAAOC,eAAevB,EAAS,cAAgB4B,OAAO,IACtD,IAAIkD,EAAQpE,EAAQ,GACpB,SAASuhB,EAAgBnW,GACrB,OAAQrH,MAAMyd,QAAQpW,EAAI,IAsD9B9L,EAAQmiB,sBApDR,SAA+BC,EAAuBzZ,EAAkBC,GAEpE,IADA,IAAIyZ,KACKzhB,EAAI,EAAG6G,EAAMkB,EAAiBjB,OAAQ9G,EAAI6G,IAAO7G,EAAG,CACzD,IAAI0hB,EAAc3Z,EAAiB/H,GACnCyhB,EAAc7S,KAAK,IAAI+S,aAAaD,EAAYrZ,KAAOL,EAAcwZ,IAEzE,IACII,EACApF,EACAxb,EAHA6gB,EAAO9Z,EAAiBjB,OAIxBgb,GAAc,EAClB,IAAS9hB,EAAI,EAAG6G,EAAMmB,EAAahI,EAAI6G,IAAO7G,EAC1C,IAAK,IAAI+hB,EAAI,EAAGA,EAAIF,IAAQE,EAIxB,GAHAvF,EAAYzU,EAAiBga,GAC7BH,EAASH,EAAcM,GAEnBV,EADJrgB,EAAQwb,EAAUvV,OAAOjH,IAErB,IAAK,IAAIgiB,EAAIhiB,EAAIwc,EAAUnU,KAAM4Z,EAAOD,EAAIxF,EAAUnU,KAAM0G,EAAQ,EAAGiT,EAAIC,IAAQD,IAAKjT,EACpF6S,EAAOI,GAAKhhB,EAAM+N,QAItB+S,GAAc,EAO1B,IAHIA,GACAjV,QAAQC,KAAK,+EAER9M,EAAI,EAAG6G,EAAMkB,EAAiBjB,OAAQ9G,EAAI6G,IAAO7G,EAGtD,IAFA,IACIkiB,EADcna,EAAiB/H,GACJqI,KAAOL,EACtBma,GAAPJ,EAAI,EAAYP,GAAuBO,EAAII,IAAUJ,EAC1DN,EAAczhB,GAAGoiB,WAAWF,EAAeH,EAAG,EAAGG,GAGzD,IAAIG,EAAmBZ,EAAc,GACrC,IAASzhB,EAAI,EAAG6G,EAAM2a,EAAuBxhB,EAAI6G,IAAO7G,EACpD,KAAIsiB,EAAqBtiB,EAAIgI,EAC7B,IAAS+Z,EAAI,EAAGA,EAAI/Z,IAAe+Z,EAC/BM,EAAiBN,EAAIO,GAAsBtiB,EAGnD,IAAI8K,EAAW,IAAI5G,EAAMqe,eACzB,IAASviB,EAAI,EAAG6G,EAAMkB,EAAiBjB,OAAQ9G,EAAI6G,IAAO7G,EAAG,CACzD,IAAIwiB,EAAcza,EAAiB/H,GAC/Byc,EAAoB,IAAIvY,EAAMue,gBAAgBhB,EAAczhB,GAAIwiB,EAAYna,MAChFma,EAAY/F,kBAAoBA,EAChC3R,EAAS4X,aAAaF,EAAYjiB,KAAMkc,GAE5C,OAAO3R,iCCvDX,IAAIrH,EAAaxB,MAAQA,KAAKwB,WAAe,WACzC,IAAIC,EAAgBhD,OAAOiD,iBACpBC,wBAA2BC,OAAS,SAAUvD,EAAGwD,GAAKxD,EAAEsD,UAAYE,IACvE,SAAUxD,EAAGwD,GAAK,IAAK,IAAIvC,KAAKuC,EAAOA,EAAExC,eAAeC,KAAIjB,EAAEiB,GAAKuC,EAAEvC,KACzE,OAAO,SAAUjB,EAAGwD,GAEhB,SAASC,IAAO9B,KAAK+B,YAAc1D,EADnCoD,EAAcpD,EAAGwD,GAEjBxD,EAAEe,UAAkB,OAANyC,EAAapD,OAAOuD,OAAOH,IAAMC,EAAG1C,UAAYyC,EAAEzC,UAAW,IAAI0C,IAP1C,GAU7CrD,OAAOC,eAAevB,EAAS,cAAgB4B,OAAO,IACtD,IACI2hB,EAAc,SAAUle,GAExB,SAASke,IACL,OAAkB,OAAXle,GAAmBA,EAAOwM,MAAMhP,KAAMoH,YAAcpH,KAU/D,OAZAwB,EAAUkf,EAAYle,GAItBke,EAAWjgB,YAAc,WACrB,OAAO,IAAIigB,GACPtgB,OAAQ,EACRD,MAAO,EACPF,EAAG,EACHC,EAAG,KAGJwgB,EAbO,CADH7iB,EAAQ,GAeZiC,QACX3C,EAAQujB,WAAaA,gCC3BrBjiB,OAAOC,eAAevB,EAAS,cAAgB4B,OAAO,IACtD,IAAIkD,EAAQpE,EAAQ,GAChB8iB,EAAiB9iB,EAAQ,IACzB2L,EAAgB3L,EAAQ,IACxB+iB,EAAU/iB,EAAQ,IAClBgjB,EAAShjB,EAAQ,IAkDrBV,EAAQ2jB,qBAjDR,SAA8BvL,GAC1B,IAAInV,EAASmV,EAAQX,OAAOxU,OACxBD,EAAQoV,EAAQX,OAAOzU,MAEvBoL,GACAwV,YAFc5gB,EAAQC,EAGtBG,QAASH,EAAS,EAClBoL,IAAK,IACLnL,MAAOF,EAAQ,EACfsL,MAAO,IACPjL,MAAOL,EAAQ,EACfG,IAAKF,EAAS,EACd4gB,SAAU5gB,GAEV6gB,EAAgB,IAAIzX,EAAcgE,WACtCyT,EAAc5V,WAAa,IAAIpJ,EAAMif,mBAAmB3V,EAASlL,KAAMkL,EAAS/K,MAAO+K,EAASjL,IAAKiL,EAAShL,OAAQgL,EAASE,KAAMF,EAASC,KAC9IyV,EAAc5V,WAAWb,MAAMmB,IAAI,GAAM,EAAK,GAC9CsV,EAAc5V,WAAWK,SAASC,IAAI,EAAK,GAAM,KACjDsV,EAAc5V,WAAWS,mBAAkB,GAC3CmV,EAAc5V,WAAWQ,eACrBoV,EAAc5V,sBAAsBpJ,EAAMif,oBAC1CD,EAAc5V,WAAWU,yBAE7B,IAAIoV,EAAqB,IAAIR,EAAezR,YACxCkS,GACA7gB,OAAQ,EACRF,KAAM,EACNG,MAAO,EACPF,IAAK,GAEL+gB,EAAc,IAAIR,EAAOlX,MACzBW,OAAQ6W,EACRja,IAAK2Z,EAAOlX,KAAKqC,gBACjBvB,WAAYwW,EACZ1V,SAAU6V,IAEVE,EAAe,IAAIV,EAAQzU,OAC3BjF,IAAK0Z,EAAQzU,MAAMgB,iBACnB0H,WAGJ,OADAyM,EAAa1U,QAAQyU,IAEjB/W,OAAQ6W,EACRI,MAAOD,EACP9Y,KAAM6Y,EACN5W,WAAYwW,EACZ1V,SAAU6V,kCCpDlB3iB,OAAOC,eAAevB,EAAS,cAAgB4B,OAAO,IACtD,IAAIyiB,EAAoC,IAIxCrkB,EAAQskB,6BAHR,WACI,MAAO,gBAMXtkB,EAAQukB,4BAHR,SAAqC5U,GACjC,MAAO,GAAK0U,EAAoC1U,EAAM1L,SAAS,mCCPnE3C,OAAOC,eAAevB,EAAS,cAAgB4B,OAAO,IACtD5B,EAAQwkB,cACJC,mBAAoB,qBACpBjH,WAAY,aACZkH,kBAAmB,oBACnBC,aAAc,eACdC,cAAe,gBACfC,mBAAoB,qBACpBC,uBAAwB,yBACxBC,sBAAuB,wBACvBC,sBAAuB,wBACvBC,kBAAmB,oBACnBC,4BAA6B,8BAC7BxD,cAAe,gBACfyD,kBAAmB,oBACnB5U,OAAQ,SACR6U,YAAa,cACbzc,iBAAkB,kDCjBtB,SAASvE,EAASpD,GACd,IAAK,IAAImB,KAAKnB,EAAQhB,EAAQkC,eAAeC,KAAInC,EAAQmC,GAAKnB,EAAEmB,IAEpEb,OAAOC,eAAevB,EAAS,cAAgB4B,OAAO,IACtDwC,EAAS1D,EAAQ,KACjB0D,EAAS1D,EAAQ,mCCLjB,IAoCI+W,EApCA4N,EAAaxiB,MAAQA,KAAKwiB,WAAc,SAAUC,EAASC,EAAYC,EAAGC,GAC1E,OAAO,IAAKD,IAAMA,EAAIE,UAAU,SAAU9d,EAAS+d,GAC/C,SAASC,EAAUhkB,GAAS,IAAMikB,EAAKJ,EAAUK,KAAKlkB,IAAW,MAAOmkB,GAAKJ,EAAOI,IACpF,SAASC,EAASpkB,GAAS,IAAMikB,EAAKJ,EAAA,MAAmB7jB,IAAW,MAAOmkB,GAAKJ,EAAOI,IACvF,SAASF,EAAKI,GAAUA,EAAOC,KAAOte,EAAQqe,EAAOrkB,OAAS,IAAI4jB,EAAE,SAAU5d,GAAWA,EAAQqe,EAAOrkB,SAAWukB,KAAKP,EAAWI,GACnIH,GAAMJ,EAAYA,EAAU5T,MAAMyT,EAASC,QAAmBO,WAGlEM,EAAevjB,MAAQA,KAAKujB,aAAgB,SAAUd,EAASe,GAC/D,IAAsGC,EAAGvjB,EAAG4P,EAAG4T,EAA3GC,GAAMtW,MAAO,EAAGuW,KAAM,WAAa,GAAW,EAAP9T,EAAE,GAAQ,MAAMA,EAAE,GAAI,OAAOA,EAAE,IAAO+T,QAAUC,QAC3F,OAAOJ,GAAMT,KAAMc,EAAK,GAAIC,MAASD,EAAK,GAAIE,OAAUF,EAAK,IAAwB,mBAAXG,SAA0BR,EAAEQ,OAAOC,UAAY,WAAa,OAAOnkB,OAAU0jB,EACvJ,SAASK,EAAK/kB,GAAK,OAAO,SAAU8W,GAAK,OACzC,SAAcsO,GACV,GAAIX,EAAG,MAAM,IAAIY,UAAU,mCAC3B,KAAOV,GAAG,IACN,GAAIF,EAAI,EAAGvjB,IAAM4P,EAAI5P,EAAU,EAARkkB,EAAG,GAAS,SAAWA,EAAG,GAAK,QAAU,YAActU,EAAIA,EAAE5R,KAAKgC,EAAGkkB,EAAG,KAAKf,KAAM,OAAOvT,EAEjH,OADI5P,EAAI,EAAG4P,IAAGsU,GAAM,EAAGtU,EAAE/Q,QACjBqlB,EAAG,IACP,KAAK,EAAG,KAAK,EAAGtU,EAAIsU,EAAI,MACxB,KAAK,EAAc,OAAXT,EAAEtW,SAAkBtO,MAAOqlB,EAAG,GAAIf,MAAM,GAChD,KAAK,EAAGM,EAAEtW,QAASnN,EAAIkkB,EAAG,GAAIA,GAAM,GAAI,SACxC,KAAK,EAAGA,EAAKT,EAAEG,IAAIQ,MAAOX,EAAEE,KAAKS,MAAO,SACxC,QACI,KAAkBxU,GAAZA,EAAI6T,EAAEE,MAAYhf,OAAS,GAAKiL,EAAEA,EAAEjL,OAAS,MAAkB,IAAVuf,EAAG,IAAsB,IAAVA,EAAG,IAAW,CAAET,EAAI,EAAG,SACjG,GAAc,IAAVS,EAAG,MAActU,GAAMsU,EAAG,GAAKtU,EAAE,IAAMsU,EAAG,GAAKtU,EAAE,IAAM,CAAE6T,EAAEtW,MAAQ+W,EAAG,GAAI,MAC9E,GAAc,IAAVA,EAAG,IAAYT,EAAEtW,MAAQyC,EAAE,GAAI,CAAE6T,EAAEtW,MAAQyC,EAAE,GAAIA,EAAIsU,EAAI,MAC7D,GAAItU,GAAK6T,EAAEtW,MAAQyC,EAAE,GAAI,CAAE6T,EAAEtW,MAAQyC,EAAE,GAAI6T,EAAEG,IAAInX,KAAKyX,GAAK,MACvDtU,EAAE,IAAI6T,EAAEG,IAAIQ,MAChBX,EAAEE,KAAKS,MAAO,SAEtBF,EAAKZ,EAAKtlB,KAAKukB,EAASkB,GAC1B,MAAOT,GAAKkB,GAAM,EAAGlB,GAAIhjB,EAAI,EAjBrB,QAiBoCujB,EAAI3T,EAAI,EACtD,GAAY,EAARsU,EAAG,GAAQ,MAAMA,EAAG,GAAI,OAASrlB,MAAOqlB,EAAG,GAAKA,EAAG,QAAK,EAAQf,MAAM,GArB9BL,EAAMhkB,EAAG8W,OAwB7DrX,OAAOC,eAAevB,EAAS,cAAgB4B,OAAO,IAEtD,IACIwlB,EAAQzjB,KAAKyjB,MAAOzS,EAAMhR,KAAKgR,IAAKD,EAAM/Q,KAAK+Q,IAC/C2S,EAAmB,WACnB,SAASA,KAyLT,OAvLAA,EAAgBC,aAAe,WAC3B,OAAOjC,EAAUxiB,UAAM,OAAQ,EAAQ,WACnC,OAAOujB,EAAYvjB,KAAM,SAAUiD,GAC/B,OAAQA,EAAGoK,OACP,KAAK,EACD,OAAMuH,GAAgB,EAAG,IACzB5U,KAAK0kB,cACG,EAAG,IAAI7B,QAAQ,SAAU9d,GAAW,OAAO4f,WAAW5f,EAAS,QAC3E,KAAK,EAED,OADA9B,EAAG2gB,QACK,EAAG,GACf,KAAK,EAAG,OAAQ,SAKhCY,EAAgBI,mBAAqB,SAAUhJ,EAAUrO,EAAasX,GAC9DA,GACA7kB,KAAK8kB,sBAAsBlJ,GAE/B,IAAIvO,EAAQuO,EAASvO,MACjB0X,EAAgBxX,GAAeqO,EAASrO,aAAe,EAC3DvN,KAAKglB,UAAU3X,EAAOuO,EAASqJ,cAAerQ,EAAQmQ,GACtD,IAAI9hB,EAAKjD,KAAKklB,gBAAgBtQ,GAASuQ,EAAOliB,EAAGkiB,KAAMC,EAAOniB,EAAGmiB,KAAMC,EAAOpiB,EAAGoiB,KAAMC,EAAOriB,EAAGqiB,KACjG1J,EAAS2J,cAAgB3J,EAAS2J,gBAC9BC,SAAWplB,OAAQ,EAAGD,MAAO,GAC7BkK,OAASjK,OAAQ,EAAGD,MAAO,IAE1B0kB,GAODjJ,EAAS2J,cAAcC,SACnBplB,OAAQklB,EAAOF,EACfjlB,MAAOklB,EAAOF,GAElBvJ,EAAS2J,cAAc3Q,OAAS5U,KAAKylB,oBAAoB7J,EAAUwJ,EAAMD,GACzEnlB,KAAK4kB,mBAAmBhJ,EAAU,GAAK,IAXvCA,EAAS2J,cAAclb,OACnBjK,OAAQklB,EAAOF,EACfjlB,MAAOklB,EAAOF,IAY1BX,EAAgBM,sBAAwB,SAAUlJ,GAC9C,IAAIvO,EAAQuO,EAASvO,MACjBqY,EAAWrY,EAAMqY,SACrB,GAAKA,EAAL,CAIA1lB,KAAKglB,UAAU3X,EAAOA,EAAMsY,KAAM/Q,EAAQ,GAC1C,IAAIgR,EAAY5lB,KAAKklB,gBAAgBtQ,GACrC,GAAIgR,EAAUP,KAAOO,EAAUT,MAAQO,EACnC9J,EAASqJ,cAAgB5X,EAAMsY,SADnC,CAUA,IANA,IAAIA,EAAOtY,EAAMsY,KACbtlB,EAAO,EACPG,EAAQmlB,EAAK9gB,OACbghB,EAAStB,GAAO/jB,EAAQH,GAAQ,GAChCylB,EAAS,EAENtlB,EAAQH,GAAmB,IAAXwlB,GAAgBC,IADvB,IAC6C,CACzD9lB,KAAKglB,UAAU3X,EAAOsY,EAAKI,OAAO,EAAGF,GAAU,MAAOjR,EAAQ,GAC9D,IAAI3R,EAAKjD,KAAKklB,gBAAgBtQ,GAASuQ,EAAOliB,EAAGkiB,KAAaliB,EAAGoiB,KACtDF,GAAQO,EACfrlB,EAAOwlB,EAGPrlB,EAAQqlB,EAEZ,IAAIG,EAAazB,GAAO/jB,EAAQH,GAAQ,GAAOA,EAC/C,GAAI2lB,IAAeH,EACf,MAEJA,EAASG,EAGTpK,EAASqJ,cADE,IAAXY,EACyB,MAGAF,EAAKI,OAAO,EAAGF,GAAU,YAlClDjK,EAASqJ,cAAgB5X,EAAMsY,MAqCvCnB,EAAgBiB,oBAAsB,SAAU7J,EAAUtb,EAAKD,GAC3D,IAAI4lB,EAAUnO,SAASoO,cAAc,UACjC3Q,EAAU0Q,EAAQvB,WAAW,MACjC,GAAInP,EAAS,CACT,IAAIiQ,EAAU5J,EAAS2J,cAAcC,QACrCS,EAAQ9lB,MAAQqlB,EAAQrlB,MACxB8lB,EAAQ7lB,OAASolB,EAAQplB,OACzBmV,EAAQ4Q,uBAAwB,EAChC5Q,EAAQ6Q,UAAUxR,EAAOA,OAAQvU,EAAMC,EAAKklB,EAAQrlB,MAAOqlB,EAAQplB,OAAQ,EAAG,EAAGolB,EAAQrlB,MAAOqlB,EAAQplB,aAGxGwK,QAAQC,KAAK,6EAEjB,OAAOob,GAEXzB,EAAgBQ,UAAY,SAAU3X,EAAOsY,EAAM/Q,EAAQmQ,GACvD,IAAIsB,EAAWrmB,KAAKsmB,8BAA8BjZ,EAAO0X,GACzDnQ,EAAO2R,UAAY,QACnB3R,EAAO4R,KAAOxmB,KAAKymB,YAAYpZ,EAAO0X,GACtCnQ,EAAOA,OAAOzU,MAAQyU,EAAO8R,YAAYrZ,EAAMsY,MAAMxlB,MAAQkmB,EAC7DzR,EAAOA,OAAOxU,OAAoB,EAAXimB,EACvBzR,EAAO2R,UAAY,QACnB3R,EAAO4R,KAAOxmB,KAAKymB,YAAYpZ,EAAO0X,GACtCnQ,EAAO+R,SAAShB,EAAMU,EAAW,EAAKA,EAAW,EAAMA,IAE3D7B,EAAgBE,WAAa,WACzB,IAAK9P,EAAQ,CACT,IAAIgS,EAAkB9O,SAASoO,cAAc,UAAUxB,WAAW,MAIlE,OAHIkC,IACAhS,EAASgS,GAENA,EAEX,OAAOhS,GAEX4P,EAAgB8B,8BAAgC,SAAUjZ,EAAOE,GAC7D,OAAOF,EAAMgZ,SAAW9Y,GAE5BiX,EAAgBiC,YAAc,SAAUpZ,EAAOE,GAC3C,OAAOF,EAAMwZ,WAAa,IAAM7mB,KAAKsmB,8BAA8BjZ,EAAOE,GAAe,MAAQF,EAAMyZ,YAE3GtC,EAAgBU,gBAAkB,SAAUtQ,GAQxC,IAPA,IAAI3R,EAAK2R,EAAOA,OAAQzU,EAAQ8C,EAAG9C,MAAOC,EAAS6C,EAAG7C,OAClD2mB,EAAYnS,EAAOoS,aAAa,EAAG,EAAG7mB,EAAOC,GAAQuE,KAErDygB,EAAO6B,OAAOC,iBACd/B,EAAO8B,OAAOC,iBACd7B,EAAO4B,OAAOE,iBACd7B,EAAO2B,OAAOE,iBACTppB,EAAI,EAAGA,EAAIoC,IAASpC,EACzB,IAAK,IAAI+hB,EAAI,EAAGA,EAAI1f,IAAU0f,EAAG,CAEzBiH,EADWjH,GAAa,EAAR3f,GAAiB,EAAJpC,GAEzB,IACJqnB,EAAOvT,EAAIuT,EAAMtF,GACjBqF,EAAOtT,EAAIsT,EAAMpnB,GACjBsnB,EAAOvT,EAAIuT,EAAMtnB,GACjBunB,EAAOxT,EAAIwT,EAAMxF,IAU7B,OALAwF,GAAQ,EACRD,GAAQ,EACRF,GAAQ,EACRC,EAAOtT,EAJPsT,GAAQ,EAIS,IAERD,KADTA,EAAOrT,EAAIqT,EAAM,GACIC,KAAMA,EAAMC,KAAMA,EAAMC,KAAMA,IAEvDd,EAAgB4C,OAAS,SAAUxL,GAC/B,OAAO4G,EAAUxiB,UAAM,OAAQ,EAAQ,WACnC,OAAOujB,EAAYvjB,KAAM,SAAUiD,GAC/B,OAAQA,EAAGoK,OACP,KAAK,EAAG,OAAQ,EAAGrN,KAAKykB,gBACxB,KAAK,EAED,OADAxhB,EAAG2gB,OACChI,EAASvO,MAAMgZ,SArKvB,IAsKQzb,QAAQC,KAAK,4CACL,EAAG+Q,KAEf5b,KAAK4kB,mBAAmBhJ,EAAUA,EAASrO,aAAa,IAChD,EAAGqO,UAK/B4I,EAAgB6C,WAAa,SAAUzL,GAEnC,OADA5b,KAAK0kB,aACA9P,EAIDgH,EAASvO,MAAMgZ,SArLP,IAsLRzb,QAAQC,KAAK,2CACN+Q,IAEX5b,KAAK4kB,mBAAmBhJ,EAAUA,EAASrO,aAAa,GACjDqO,IARHhR,QAAQC,KAAK,gFACN+Q,IASR4I,EA1LY,GA4LvBrnB,EAAQqnB,gBAAkBA,gCCnO1B,IAAIhjB,EAAaxB,MAAQA,KAAKwB,WAAe,WACzC,IAAIC,EAAgBhD,OAAOiD,iBACpBC,wBAA2BC,OAAS,SAAUvD,EAAGwD,GAAKxD,EAAEsD,UAAYE,IACvE,SAAUxD,EAAGwD,GAAK,IAAK,IAAIvC,KAAKuC,EAAOA,EAAExC,eAAeC,KAAIjB,EAAEiB,GAAKuC,EAAEvC,KACzE,OAAO,SAAUjB,EAAGwD,GAEhB,SAASC,IAAO9B,KAAK+B,YAAc1D,EADnCoD,EAAcpD,EAAGwD,GAEjBxD,EAAEe,UAAkB,OAANyC,EAAapD,OAAOuD,OAAOH,IAAMC,EAAG1C,UAAYyC,EAAEzC,UAAW,IAAI0C,IAP1C,GAU7CrD,OAAOC,eAAevB,EAAS,cAAgB4B,OAAO,IACtD,IACIuoB,EAAsB,SAAU9kB,GAEhC,SAAS8kB,EAAmBC,GACxB,IAAI7kB,EAAQF,EAAOtE,KAAK8B,OAASA,KAEjC,OADA0C,EAAM6kB,MAAQA,EACP7kB,EAEX,OANAlB,EAAU8lB,EAAoB9kB,GAMvB8kB,EAPe,CADEzpB,EAAQ,IASZyP,mBACxBnQ,EAAQmqB,mBAAqBA,gCCrB7B,IAAI9E,EAAaxiB,MAAQA,KAAKwiB,WAAc,SAAUC,EAASC,EAAYC,EAAGC,GAC1E,OAAO,IAAKD,IAAMA,EAAIE,UAAU,SAAU9d,EAAS+d,GAC/C,SAASC,EAAUhkB,GAAS,IAAMikB,EAAKJ,EAAUK,KAAKlkB,IAAW,MAAOmkB,GAAKJ,EAAOI,IACpF,SAASC,EAASpkB,GAAS,IAAMikB,EAAKJ,EAAA,MAAmB7jB,IAAW,MAAOmkB,GAAKJ,EAAOI,IACvF,SAASF,EAAKI,GAAUA,EAAOC,KAAOte,EAAQqe,EAAOrkB,OAAS,IAAI4jB,EAAE,SAAU5d,GAAWA,EAAQqe,EAAOrkB,SAAWukB,KAAKP,EAAWI,GACnIH,GAAMJ,EAAYA,EAAU5T,MAAMyT,EAASC,QAAmBO,WAGlEM,EAAevjB,MAAQA,KAAKujB,aAAgB,SAAUd,EAASe,GAC/D,IAAsGC,EAAGvjB,EAAG4P,EAAG4T,EAA3GC,GAAMtW,MAAO,EAAGuW,KAAM,WAAa,GAAW,EAAP9T,EAAE,GAAQ,MAAMA,EAAE,GAAI,OAAOA,EAAE,IAAO+T,QAAUC,QAC3F,OAAOJ,GAAMT,KAAMc,EAAK,GAAIC,MAASD,EAAK,GAAIE,OAAUF,EAAK,IAAwB,mBAAXG,SAA0BR,EAAEQ,OAAOC,UAAY,WAAa,OAAOnkB,OAAU0jB,EACvJ,SAASK,EAAK/kB,GAAK,OAAO,SAAU8W,GAAK,OACzC,SAAcsO,GACV,GAAIX,EAAG,MAAM,IAAIY,UAAU,mCAC3B,KAAOV,GAAG,IACN,GAAIF,EAAI,EAAGvjB,IAAM4P,EAAI5P,EAAU,EAARkkB,EAAG,GAAS,SAAWA,EAAG,GAAK,QAAU,YAActU,EAAIA,EAAE5R,KAAKgC,EAAGkkB,EAAG,KAAKf,KAAM,OAAOvT,EAEjH,OADI5P,EAAI,EAAG4P,IAAGsU,GAAM,EAAGtU,EAAE/Q,QACjBqlB,EAAG,IACP,KAAK,EAAG,KAAK,EAAGtU,EAAIsU,EAAI,MACxB,KAAK,EAAc,OAAXT,EAAEtW,SAAkBtO,MAAOqlB,EAAG,GAAIf,MAAM,GAChD,KAAK,EAAGM,EAAEtW,QAASnN,EAAIkkB,EAAG,GAAIA,GAAM,GAAI,SACxC,KAAK,EAAGA,EAAKT,EAAEG,IAAIQ,MAAOX,EAAEE,KAAKS,MAAO,SACxC,QACI,KAAkBxU,GAAZA,EAAI6T,EAAEE,MAAYhf,OAAS,GAAKiL,EAAEA,EAAEjL,OAAS,MAAkB,IAAVuf,EAAG,IAAsB,IAAVA,EAAG,IAAW,CAAET,EAAI,EAAG,SACjG,GAAc,IAAVS,EAAG,MAActU,GAAMsU,EAAG,GAAKtU,EAAE,IAAMsU,EAAG,GAAKtU,EAAE,IAAM,CAAE6T,EAAEtW,MAAQ+W,EAAG,GAAI,MAC9E,GAAc,IAAVA,EAAG,IAAYT,EAAEtW,MAAQyC,EAAE,GAAI,CAAE6T,EAAEtW,MAAQyC,EAAE,GAAIA,EAAIsU,EAAI,MAC7D,GAAItU,GAAK6T,EAAEtW,MAAQyC,EAAE,GAAI,CAAE6T,EAAEtW,MAAQyC,EAAE,GAAI6T,EAAEG,IAAInX,KAAKyX,GAAK,MACvDtU,EAAE,IAAI6T,EAAEG,IAAIQ,MAChBX,EAAEE,KAAKS,MAAO,SAEtBF,EAAKZ,EAAKtlB,KAAKukB,EAASkB,GAC1B,MAAOT,GAAKkB,GAAM,EAAGlB,GAAIhjB,EAAI,EAjBrB,QAiBoCujB,EAAI3T,EAAI,EACtD,GAAY,EAARsU,EAAG,GAAQ,MAAMA,EAAG,GAAI,OAASrlB,MAAOqlB,EAAG,GAAKA,EAAG,QAAK,EAAQf,MAAM,GArB9BL,EAAMhkB,EAAG8W,OAwB7DrX,OAAOC,eAAevB,EAAS,cAAgB4B,OAAO,IACtD,IACIyoB,EAAmB,WACnB,SAASA,KAsDT,OApDAA,EAAgB/C,aAAe,SAAU7P,GACrC,OAAO4N,EAAUxiB,UAAM,OAAQ,EAAQ,WACnC,IAAI5B,EAAGqpB,EACP,OAAOlE,EAAYvjB,KAAM,SAAUiD,GAC/B,OAAQA,EAAGoK,OACP,KAAK,EACDjP,EAAIwW,EAAO8P,WAAW,MAAO+C,EAAQ,EACrCxkB,EAAGoK,MAAQ,EACf,KAAK,EACD,OAAOnE,QAAQ9K,IAAMqpB,EAAQ,KACrB,EAAG,IAAI5E,QAAQ,SAAU9d,GAAW,OAAO4f,WAAW5f,EAAS,QAD5B,EAAG,GAElD,KAAK,EACD9B,EAAG2gB,OACH3gB,EAAGoK,MAAQ,EACf,KAAK,EAED,OADAjP,EAAIwW,EAAO8P,WAAW,QAAS+C,GACvB,EAAG,GACf,KAAK,EAAG,OAAQ,SAKhCD,EAAgBE,QAAU,SAAUC,GAChC,MAAO,QAAU7mB,KAAKyjB,MAAgB,IAAVoD,EAAM7oB,GAAW,KAAOgC,KAAKyjB,MAAgB,IAAVoD,EAAMjE,GAAW,KAAO5iB,KAAKyjB,MAAgB,IAAVoD,EAAM9lB,GAAW,KAAO8lB,EAAMC,QAAU,KAE9IJ,EAAgBJ,OAAS,SAAUxL,GAC/B,OAAO4G,EAAUxiB,UAAM,OAAQ,EAAQ,WACnC,IAAI4U,EAAQW,EACZ,OAAOgO,EAAYvjB,KAAM,SAAUiD,GAC/B,OAAQA,EAAGoK,OACP,KAAK,EAGD,OAFAuH,EAASkD,SAASoO,cAAc,UAChC3Q,EAAUX,EAAO8P,WAAW,OACpB,EAAG1kB,KAAKykB,aAAa7P,IACjC,KAAK,EAaD,OAZA3R,EAAG2gB,OACCrO,GACAX,EAAOzU,MAzCJ,EA0CHyU,EAAOxU,OA1CJ,EA2CHmV,EAAQ4Q,uBAAwB,EAChC5Q,EAAQgR,UAAYvmB,KAAK0nB,QAAQ9L,EAAS+L,OAC1CpS,EAAQsS,SAAS,EAAG,EA7CjB,KA8CHjM,EAAS2J,cAAc3Q,OAASA,GAGhChK,QAAQC,KAAK,gFAET,EAAG+Q,SAKxB4L,EAvDY,GAyDvBrqB,EAAQqqB,gBAAkBA,gCC9F1B,IAAIhmB,EAAaxB,MAAQA,KAAKwB,WAAe,WACzC,IAAIC,EAAgBhD,OAAOiD,iBACpBC,wBAA2BC,OAAS,SAAUvD,EAAGwD,GAAKxD,EAAEsD,UAAYE,IACvE,SAAUxD,EAAGwD,GAAK,IAAK,IAAIvC,KAAKuC,EAAOA,EAAExC,eAAeC,KAAIjB,EAAEiB,GAAKuC,EAAEvC,KACzE,OAAO,SAAUjB,EAAGwD,GAEhB,SAASC,IAAO9B,KAAK+B,YAAc1D,EADnCoD,EAAcpD,EAAGwD,GAEjBxD,EAAEe,UAAkB,OAANyC,EAAapD,OAAOuD,OAAOH,IAAMC,EAAG1C,UAAYyC,EAAEzC,UAAW,IAAI0C,IAP1C,GAU7CrD,OAAOC,eAAevB,EAAS,cAAgB4B,OAAO,IACtD,IACI+oB,EAAsB,SAAUtlB,GAEhC,SAASslB,EAAmBH,GACxB,IAAIjlB,EAAQF,EAAOtE,KAAK8B,OAASA,KAEjC,OADA0C,EAAMilB,MAAQA,EACPjlB,EAEX,OANAlB,EAAUsmB,EAAoBtlB,GAMvBslB,EAPe,CADEjqB,EAAQ,IASZyP,mBACxBnQ,EAAQ2qB,mBAAqBA,gCCrB7BrpB,OAAOC,eAAevB,EAAS,cAAgB4B,OAAO,IACtD,IAAIgpB,EAAc,WAed,OAdA,WACI/nB,KAAK+gB,YAAc,EACnB/gB,KAAKgoB,iBAAmB,GACxBhoB,KAAKioB,aAAe,KACpBjoB,KAAKkoB,SAAYjoB,EAAG,EAAGC,EAAG,GAC1BF,KAAKmoB,SAAYloB,EAAG,EAAGC,EAAG,GAC1BF,KAAKooB,SAAYnoB,EAAG,EAAGC,EAAG,GAC1BF,KAAKqoB,SAAYpoB,EAAG,EAAGC,EAAG,GAC1BF,KAAKsoB,aAAe,EACpBtoB,KAAKuoB,cAAgB,EACrBvoB,KAAKwoB,SAAU,EACfxoB,KAAKyoB,WAAa,EAClBzoB,KAAK0oB,YAAc,GAbT,GAiBlBvrB,EAAQ4qB,WAAaA,gCClBrB,IAAIvmB,EAAaxB,MAAQA,KAAKwB,WAAe,WACzC,IAAIC,EAAgBhD,OAAOiD,iBACpBC,wBAA2BC,OAAS,SAAUvD,EAAGwD,GAAKxD,EAAEsD,UAAYE,IACvE,SAAUxD,EAAGwD,GAAK,IAAK,IAAIvC,KAAKuC,EAAOA,EAAExC,eAAeC,KAAIjB,EAAEiB,GAAKuC,EAAEvC,KACzE,OAAO,SAAUjB,EAAGwD,GAEhB,SAASC,IAAO9B,KAAK+B,YAAc1D,EADnCoD,EAAcpD,EAAGwD,GAEjBxD,EAAEe,UAAkB,OAANyC,EAAapD,OAAOuD,OAAOH,IAAMC,EAAG1C,UAAYyC,EAAEzC,UAAW,IAAI0C,IAP1C,GAU7CrD,OAAOC,eAAevB,EAAS,cAAgB4B,OAAO,IACtD,IAAIkD,EAAQpE,EAAQ,GAChBuE,EAAoBvE,EAAQ,IAC5B8qB,EAAc9qB,EAAQ,IACtB+qB,EAAgB/qB,EAAQ,KAE5B,SAAWgrB,GACPA,EAAUA,EAAA,GAAkB,GAAK,KACjCA,EAAUA,EAAA,GAAkB,GAAK,KACjCA,EAAUA,EAAA,GAAkB,GAAK,KACjCA,EAAUA,EAAA,IAAmB,IAAM,MACnCA,EAAUA,EAAA,IAAmB,IAAM,MACnCA,EAAUA,EAAA,IAAmB,IAAM,MACnCA,EAAUA,EAAA,KAAoB,KAAO,OACrCA,EAAUA,EAAA,KAAoB,KAAO,OACrCA,EAAUA,EAAA,KAAoB,KAAO,OACrCA,EAAUA,EAAA,MAAqB,MAAQ,QACvCA,EAAUA,EAAA,MAAqB,MAAQ,QACvCA,EAAUA,EAAA,MAAqB,MAAQ,QAZ3C,CAae1rB,EAAQ0rB,YAAc1rB,EAAQ0rB,eAC7C,IAAIC,EAAS,SAAUtmB,GAEnB,SAASsmB,EAAM/oB,GACX,IAAI2C,EAAQF,EAAOtE,KAAK8B,KAAMD,IAAYC,KAC1C0C,EAAMqmB,eAAiB,IAAIlmB,IAC3B,IAAI+R,EAASkD,SAASoO,cAAc,UAMpC,OALAxjB,EAAMvC,MAAQyU,EAAOzU,MAAQJ,EAAQI,MACrCuC,EAAMtC,OAASwU,EAAOxU,OAASL,EAAQK,OACvCsC,EAAMsmB,gBAAkBjpB,EAAQipB,gBAChCtmB,EAAMumB,QAAU,IAAIN,EAAYO,SAAS,EAAG,EAAGnpB,EAAQI,MAAOJ,EAAQK,QACtEsC,EAAMymB,cAAcvU,GACblS,EAkEX,OA5EAlB,EAAUsnB,EAAOtmB,GAYjBsmB,EAAM1pB,UAAUgqB,mBAAqB,SAAUxN,GAC3C,IAAIyN,GAASppB,EAAG,EAAGC,EAAG,GACtB0b,EAAS4J,QAAQzE,YAAc,EAC/BnF,EAAS4J,QAAQ4C,QAAUiB,EAC3BzN,EAAS4J,QAAQ6C,QAAUgB,EAC3BzN,EAAS4J,QAAQ0C,QAAUmB,EAC3BzN,EAAS4J,QAAQ2C,QAAUkB,EAC3BzN,EAAS4J,QAAQwC,iBAAmB,GACpCpM,EAAS4J,QAAQiD,WAAa,EAC9B7M,EAAS4J,QAAQkD,YAAc,EAC/B9M,EAAS4J,QAAQgD,SAAU,GAE/BM,EAAM1pB,UAAUkqB,WAAa,SAAUC,GACnCvpB,KAAKupB,QAAUA,GAEnBT,EAAM1pB,UAAUoqB,iBAAmB,SAAU5N,GACzC,QAA0CxS,IAAtCpJ,KAAK+oB,eAAelqB,IAAI+c,GAAyB,CACjD,IAAKA,EAAS4J,UAAY5J,EAAS4J,QAAQgD,QAMvC,OALK5M,EAAS4J,UACV5J,EAAS4J,QAAU,IAAIoD,EAAcb,YAEzCnM,EAAS4J,QAAQgD,SAAU,EAC3BxoB,KAAK+oB,eAAepd,IAAIiQ,GAAU,IAC3B,EAGPhR,QAAQC,KAAK,eAAgB7K,KAAK4H,GAAI,6FAA8F,4EAA6E,YAAagU,QAIlOhR,QAAQC,KAAK,eAAgB7K,KAAK4H,GAAI,qFAAsF,iFAAkF,YAAagU,GAE/N,OAAO,GAEXkN,EAAM1pB,UAAUqqB,eAAiB,SAAU7N,GACnC5b,KAAK+oB,eAAelqB,IAAI+c,IACxB5b,KAAK+oB,eAAepd,IAAIiQ,GAAU,GAClC5b,KAAKopB,mBAAmBxN,IAGxBhR,QAAQC,KAAK,eAAgB7K,KAAK4H,GAAI,oEAAqE,oEAAqE,YAAagU,IAGrMkN,EAAM1pB,UAAU+pB,cAAgB,SAAUvU,GACtC,GAAI5U,KAAKwlB,QAAS,CACd,IAAIkE,EAAe1pB,KAAKwlB,QAAQ+B,MAChCvnB,KAAKwlB,QAAQmE,UACb3pB,KAAKwlB,QAAU,IAAIvjB,EAAM8X,QAAQ2P,QAGjC1pB,KAAKwlB,QAAU,IAAIvjB,EAAM8X,QAAQnF,GAErC5U,KAAKwlB,QAAQoE,iBAAkB,EAC/B5pB,KAAKwlB,QAAQqE,kBAAmB,EAChC7pB,KAAKgpB,iBAAmBvqB,OAAOsE,OAAO/C,KAAKwlB,QAASxlB,KAAKgpB,iBACzDhpB,KAAKwlB,QAAQsE,aAAc,GAE/BhB,EAAM1pB,UAAU8E,QAAU,WACtB,IAAIxB,EAAQ1C,KACZA,KAAKwlB,QAAQmE,UACb3pB,KAAK+oB,eAAe7jB,QAAQ,SAAU6kB,EAAUnO,GAC5ClZ,EAAM0mB,mBAAmBxN,MAG1BkN,EA7EE,CA8EX1mB,EAAkB0E,eACpB3J,EAAQ2rB,MAAQA,gCC7GhBrqB,OAAOC,eAAevB,EAAS,cAAgB4B,OAAO,IAuEtD5B,EAAQ6sB,eAtER,SAAwBC,EAAIC,GAuDxB,IAtDA,IAAI9G,GACA+G,eAAgB,EAChBxP,WAAY,IAAI/Y,MAChBwoB,aAAc,EACd3lB,SAAU,IAAI7C,OACfyoB,EAAiBJ,EAAGK,oBAAoBJ,EAASD,EAAGM,iBAAkBC,EAAmBP,EAAGK,oBAAoBJ,EAASD,EAAGQ,mBAC3HC,GACAC,MAAQ,aACRC,MAAQ,aACRC,MAAQ,aACRC,MAAQ,WACRC,MAAQ,WACRC,MAAQ,WACRC,MAAQ,OACRC,MAAQ,YACRC,MAAQ,YACRC,MAAQ,YACRC,MAAQ,aACRC,MAAQ,aACRC,MAAQ,aACRC,MAAQ,aACRC,MAAQ,eACRC,KAAQ,OACRC,KAAQ,gBACRC,KAAQ,QACRC,KAAQ,iBACRC,KAAQ,MACRC,KAAQ,eACRC,KAAQ,SAERC,GACAtB,MAAQ,EACRC,MAAQ,EACRC,MAAQ,EACRC,MAAQ,EACRC,MAAQ,EACRC,MAAQ,EACRC,MAAQ,EACRC,MAAQ,EACRC,MAAQ,EACRC,MAAQ,EACRC,MAAQ,EACRC,MAAQ,EACRC,MAAQ,EACRC,MAAQ,EACRC,MAAQ,EACRC,KAAQ,EACRC,KAAQ,EACRC,KAAQ,EACRC,KAAQ,EACRC,KAAQ,EACRC,KAAQ,EACRC,KAAQ,GAEHjuB,EAAI,EAAGA,EAAIssB,IAAkBtsB,EAAG,CACrC,IAAIuG,EAAU2lB,EAAGiC,iBAAiBhC,EAASnsB,GAC3CuG,EAAQ6nB,SAAWzB,EAAMpmB,EAAQX,MACjCyf,EAAO3e,SAASkI,KAAKrI,GACrB8e,EAAOgH,cAAgB9lB,EAAQ8B,KAC/B9B,EAAQ8B,KAAO9B,EAAQ8B,KAAO6lB,EAAO3nB,EAAQX,MAEjD,IAAS5F,EAAI,EAAGA,EAAIysB,EAAkBzsB,IAAK,CACvC,IAAIwc,EAAY0P,EAAGmC,gBAAgBlC,EAASnsB,GAC5Cwc,EAAU4R,SAAWzB,EAAMnQ,EAAU5W,MACrCyf,EAAOzI,WAAWhO,KAAK4N,GACvB6I,EAAO+G,gBAAkB5P,EAAUnU,KAEvC,OAAOgd,GAGX,IAAIiJ,EAAa,WACb,SAASA,KAOT,OALAA,EAAUC,oBAAsB,EAChCD,EAAUE,sBAAwB,EAClCF,EAAUG,eAAiB,EAC3BH,EAAUI,iBAAkB,EAC5BJ,EAAUK,iBAAmB,EACtBL,EARM,GAUjBlvB,EAAQkvB,UAAYA,EACpB,WAWI,IAAIpC,EAVJ,WACI,IACI,IAAIrV,EAASkD,SAASoO,cAAc,UACpC,OAAQ1oB,OAAOmvB,wBACV/X,EAAO8P,WAAW,UAAY9P,EAAO8P,WAAW,uBAEzD,MAAOxB,GACH,OAAO,GAGN0J,GACL3C,IACAoC,EAAUI,iBAAkB,EAC5BJ,EAAUC,oBAAsBrC,EAAG4C,aAAa5C,EAAG6C,4BACnDT,EAAUE,sBAAwBtC,EAAG4C,aAAa5C,EAAG8C,8BACrDV,EAAUG,eAAiBvC,EAAG4C,aAAa5C,EAAG+C,oBAC9CX,EAAUK,iBAAmBzC,EAAG4C,aAAa5C,EAAGyC,mBAGxDO,qBCxGA,SAAAC,GA+JA,SAAAC,IACA,IAAAruB,EACA,IACAA,EAAA3B,EAAAiwB,QAAAC,MACG,MAAAnK,IAOH,OAJApkB,QAAA,IAAAouB,GAAA,QAAAA,IACApuB,EAAAouB,EAAAI,IAAAC,OAGAzuB,GApKA3B,EAAAC,EAAAD,QAAAU,EAAA,MACA2vB,IAwHA,WAGA,uBAAA5iB,SACAA,QAAA4iB,KACAC,SAAAruB,UAAA4P,MAAA9Q,KAAA0M,QAAA4iB,IAAA5iB,QAAAxD,YA5HAjK,EAAAuwB,WA+EA,SAAAC,GACA,IAAAC,EAAA5tB,KAAA4tB,UASA,GAPAD,EAAA,IAAAC,EAAA,SACA5tB,KAAA6tB,WACAD,EAAA,WACAD,EAAA,IACAC,EAAA,WACA,IAAAzwB,EAAA2wB,SAAA9tB,KAAA+tB,OAEAH,EAAA,OAEA,IAAAxvB,EAAA,UAAA4B,KAAA2nB,MACAgG,EAAA3gB,OAAA,IAAA5O,EAAA,kBAKA,IAAA0O,EAAA,EACAkhB,EAAA,EACAL,EAAA,GAAA1f,QAAA,uBAAAE,GACA,OAAAA,GAEA,OAAAA,IAGA6f,IAJAlhB,KAQA6gB,EAAA3gB,OAAAghB,EAAA,EAAA5vB,IA5GAjB,EAAA8wB,KAqIA,SAAAC,GACA,IACA,MAAAA,EACA/wB,EAAAiwB,QAAAe,WAAA,SAEAhxB,EAAAiwB,QAAAC,MAAAa,EAEG,MAAAhL,MA3IH/lB,EAAAgwB,OACAhwB,EAAAywB,UAgCA,WAIA,uBAAApwB,eAAA0vB,SAAA,aAAA1vB,OAAA0vB,QAAAvpB,KACA,SAIA,uBAAAyqB,qBAAAC,WAAAD,UAAAC,UAAAC,cAAAngB,MAAA,yBACA,SAKA,0BAAA2J,mBAAAyW,iBAAAzW,SAAAyW,gBAAAC,OAAA1W,SAAAyW,gBAAAC,MAAAC,kBAEA,oBAAAjxB,eAAAoN,UAAApN,OAAAoN,QAAA8jB,SAAAlxB,OAAAoN,QAAA+jB,WAAAnxB,OAAAoN,QAAAgkB,QAGA,oBAAAR,qBAAAC,WAAAD,UAAAC,UAAAC,cAAAngB,MAAA,mBAAA0gB,SAAAC,OAAAC,GAAA,SAEA,oBAAAX,qBAAAC,WAAAD,UAAAC,UAAAC,cAAAngB,MAAA,uBArDAhR,EAAAiwB,QAAA,oBAAA4B,aACA,IAAAA,OAAA5B,QACA4B,OAAA5B,QAAA6B,MAgLA,WACA,IACA,OAAAzxB,OAAA0xB,aACG,MAAAhM,KAlLHiM,GAMAhyB,EAAAiyB,QACA,sEACA,sEACA,sEACA,sEACA,sEACA,sEACA,sEACA,sEACA,sEACA,sEACA,6DAwCAjyB,EAAAkyB,WAAAtP,EAAA,SAAAjK,GACA,IACA,OAAAwZ,KAAAC,UAAAzZ,GACG,MAAA0Z,GACH,qCAAAA,EAAAC,UAqGAtyB,EAAAuyB,OAAAvC,uDChLA1uB,OAAOC,eAAevB,EAAS,cAAgB4B,OAAO,IACtD,IAqEIoa,EArEAwW,EAAU9xB,EAAQ,KAClB+xB,EAAU/xB,EAAQ,GAClBwvB,EAAQxvB,EAAQ,GAARA,CAAiB,4BACzBgyB,EAAgB,EAAI,GACpBC,GAAqB,IACrBC,EAAyB,IACzBC,GAAY,EAAG,EAAG,EAAG,GACrBC,EAAc,IACdC,EAAc,GACdC,EAAc,IACdC,EAAc,GA4DlBjzB,EAAQgc,eAAiBA,EACrBwW,EAAQU,SACRhD,EAAM,iCACNlwB,EAAQgc,eAAiBA,EA9D7B,SAA+B+J,GAC3B,IACIoN,EADA9Z,EAAQ0M,EAERqN,EAAS,EAYb,OAXIzvB,KAAK0vB,KAAKR,EAAS,MAAQlvB,KAAK0vB,KAAKD,IACrCP,EAAShjB,OAAO,EAAGgjB,EAASnrB,OAAQ,EAAG,EAAG,EAAG,GAEjDyrB,EAAS9Z,EAAM8Z,OAASP,EACxBQ,EACI/Z,EAAM+Z,OAASR,EAAyBE,EACpCD,EAAS,GAAKE,EACdF,EAAS,GAAKG,EACdH,EAAS,GAAKI,EACtBJ,EAASS,QAAQF,GACjBP,EAAS1L,MACF,IAAIsL,EAAQc,SAASJ,GAASC,KAiDhCZ,EAAQgB,OAAShB,EAAQiB,SAAW,IACzCvD,EAAM,+BACNlwB,EAAQgc,eAAiBA,EA7C7B,SAA4B+J,GACxB,IAAI1M,EAAQ0M,EACRoN,EAAS9Z,EAAM8Z,YACJlnB,IAAXknB,IACAA,OAC0BlnB,IAAtBoN,EAAMqa,YAA4Bra,EAAMqa,YAAchB,EAAgB,GAE9E,IAAIU,EAAS/Z,EAAM+Z,OASnB,YARennB,IAAXmnB,IAEIA,OADsBnnB,IAAtBoN,EAAMsa,YACGta,EAAMsa,YAAcjB,GAGnBrZ,EAAMua,aAAeva,EAAMwa,QAAUlB,GAGhD,IAAIF,EAAQc,SAASJ,GAASC,KA+BhCZ,EAAQsB,QACb5D,EAAM,iCACNlwB,EAAQgc,eAAiBA,EA/B7B,SAA4B+J,GACxB,IAAI1M,EAAQ0M,EACRoN,EAAS9Z,EAAM8Z,OAAQC,EAAS/Z,EAAM+Z,YAC3BnnB,IAAXknB,IACAA,OAC0BlnB,IAAtBoN,EAAMqa,YAA4Bra,EAAMqa,YAAchB,EAAgB,QAE/DzmB,IAAXmnB,IAEIA,OADsBnnB,IAAtBoN,EAAMsa,YACGta,EAAMsa,YAAcjB,EAGpBrZ,EAAMua,aAAeva,EAAMwa,QAG5C,IAAIlb,EAAI,IAAI8Z,EAAQc,QAAQJ,GAASC,GAErC,OADAza,EAAEob,eAAe,KACVpb,KAiBPuX,EAAM,gCACNlwB,EAAQgc,eAAiBA,EAzD7B,SAA8B+J,GAC1B,IAAI1M,EAAQ0M,EACZ,OAAO,IAAI0M,EAAQc,QAAQla,EAAM8Z,QAAS9Z,EAAM+Z,UAmFpDpzB,EAAQkZ,qBA1BR,SAA8B6M,EAAGiO,GAC7B,IAAIC,EAAS,EAAGC,EAAS,EAAGC,EAAS,EAAGC,EAAS,EAAGryB,EAASiyB,GAAajO,EAAEsO,aAAetO,EAAEsO,YAAYvqB,QAAWic,EAAEjc,OAgBtH,GAfKic,IACDA,EAAI1lB,OAAO4Y,OAEX8M,EAAEuO,OAASvO,EAAEwO,OACbN,EAASlO,EAAEuO,MACXJ,EAASnO,EAAEwO,QAENxO,EAAEyO,SAAWzO,EAAE0O,WACpBR,EACIlO,EAAEyO,QACE7Z,SAAS0L,KAAKqO,WACd/Z,SAASyW,gBAAgBsD,WACjCR,EACInO,EAAE0O,QAAU9Z,SAAS0L,KAAKsO,UAAYha,SAASyW,gBAAgBuD,WAEnE5yB,EAAO6yB,aACP,GACIT,GAAUpyB,EAAO8yB,WACjBT,GAAUryB,EAAO+yB,UACjB/yB,EAASA,EAAO6yB,mBACX7yB,GAEb,OAASe,EAAGmxB,EAASE,EAAQpxB,EAAGmxB,EAASE,kCChH7C,SAAShwB,EAASpD,GACd,IAAK,IAAImB,KAAKnB,EAAQhB,EAAQkC,eAAeC,KAAInC,EAAQmC,GAAKnB,EAAEmB,IAEpEb,OAAOC,eAAevB,EAAS,cAAgB4B,OAAO,IACtDwC,EAAS1D,EAAQ,MACjB0D,EAAS1D,EAAQ,mCCLjB,IAAI2D,EAAaxB,MAAQA,KAAKwB,WAAe,WACzC,IAAIC,EAAgBhD,OAAOiD,iBACpBC,wBAA2BC,OAAS,SAAUvD,EAAGwD,GAAKxD,EAAEsD,UAAYE,IACvE,SAAUxD,EAAGwD,GAAK,IAAK,IAAIvC,KAAKuC,EAAOA,EAAExC,eAAeC,KAAIjB,EAAEiB,GAAKuC,EAAEvC,KACzE,OAAO,SAAUjB,EAAGwD,GAEhB,SAASC,IAAO9B,KAAK+B,YAAc1D,EADnCoD,EAAcpD,EAAGwD,GAEjBxD,EAAEe,UAAkB,OAANyC,EAAapD,OAAOuD,OAAOH,IAAMC,EAAG1C,UAAYyC,EAAEzC,UAAW,IAAI0C,IAP1C,GAU7CrD,OAAOC,eAAevB,EAAS,cAAgB4B,OAAO,IACtD,IAGImzB,EAHA3oB,EAAW1L,EAAQ,GACnBs0B,EAAkBt0B,EAAQ,IAC1BsE,EAAStE,EAAQ,IAErB,SAAWq0B,GACPA,EAAmBA,EAAA,SAAiC,GAAK,WACzDA,EAAmBA,EAAA,WAAmC,GAAK,aAC3DA,EAAmBA,EAAA,UAAkC,GAAK,YAC1DA,EAAmBA,EAAA,YAAoC,GAAK,cAC5DA,EAAmBA,EAAA,OAA+B,GAAK,SACvDA,EAAmBA,EAAA,aAAqC,GAAK,eAC7DA,EAAmBA,EAAA,YAAoC,GAAK,cAC5DA,EAAmBA,EAAA,cAAsC,GAAK,gBAC9DA,EAAmBA,EAAA,aAAqC,GAAK,eATjE,CAUGA,EAAqB/0B,EAAQ+0B,qBAAuB/0B,EAAQ+0B,wBAC/D,IAAIpgB,EAAMhR,KAAKgR,IAAKD,EAAM/Q,KAAK+Q,IAC3BugB,EAAyB,SAAU5vB,GAEnC,SAAS4vB,EAAsBryB,GAC3B,IAAI2C,EAAQF,EAAOtE,KAAK8B,OAASA,KAkDjC,OAjDA0C,EAAM2vB,WAAY,EAClB3vB,EAAM4vB,UAAY,SAAU/nB,EAAQgoB,EAAOC,GAAa,OAAOjoB,GAC/D7H,EAAM+vB,YAAc,SAAUjoB,EAAO+nB,EAAOC,GAAa,OAAOhoB,GAChE9H,EAAMgwB,cACNhwB,EAAMiwB,eAAiB,SAAUC,EAASC,KAE1CnwB,EAAMowB,mBAAoB,EAC1BpwB,EAAMqwB,YAAc,WAChB,GAAIrwB,EAAMzB,QAAUyB,EAAM4H,OAAQ,CAC9B,IAAI0oB,EAAatwB,EAAM4F,QAAQ5F,EAAMzB,OAAOuH,MAC5C9F,EAAMuwB,mBACFD,IACAtwB,EAAM4H,OAAOC,OAAO,GAAK7H,EAAMwwB,uBAAuBF,EAAYtwB,EAAMzB,QACxEyB,EAAM4H,OAAOC,OAAO,GAAK7H,EAAMywB,qBAAqBH,EAAYtwB,EAAMzB,WAIlFyB,EAAMuwB,iBAAmB,WACjBvwB,EAAM4H,QAAU5H,EAAMzB,SAClByB,EAAMzB,OAAOmyB,WACb1wB,EAAM4H,OAAOE,OACTsH,EAAIpP,EAAM4H,OAAOE,MAAM,GAAI9H,EAAMzB,OAAOmyB,SAAS,IACjDthB,EAAIpP,EAAM4H,OAAOE,MAAM,GAAI9H,EAAMzB,OAAOmyB,SAAS,IACjDthB,EAAIpP,EAAM4H,OAAOE,MAAM,GAAI9H,EAAMzB,OAAOmyB,SAAS,MAGrD1wB,EAAMzB,OAAOoyB,WACb3wB,EAAM4H,OAAOE,OACTqH,EAAInP,EAAM4H,OAAOE,MAAM,GAAI9H,EAAMzB,OAAOoyB,SAAS,IACjDxhB,EAAInP,EAAM4H,OAAOE,MAAM,GAAI9H,EAAMzB,OAAOoyB,SAAS,IACjDxhB,EAAInP,EAAM4H,OAAOE,MAAM,GAAI9H,EAAMzB,OAAOoyB,SAAS,QAK7DtzB,EAAQkB,QACRyB,EAAM4wB,UAAUvzB,EAAQkB,QAE5ByB,EAAM4H,OAASvK,EAAQuK,OACvB5H,EAAM6wB,YAAcxzB,EAAQwzB,aAAe,IAC3C7wB,EAAM8wB,iBAAmBzzB,EAAQyzB,mBAAoB,EACjDzzB,EAAQkW,YACRvT,EAAMgwB,WAAa9wB,MAAMyd,QAAQtf,EAAQkW,WACnClW,EAAQkW,WACPlW,EAAQkW,YAEnBvT,EAAM4vB,UAAYvyB,EAAQuyB,WAAa5vB,EAAM4vB,UAC7C5vB,EAAM+vB,YAAc1yB,EAAQ0yB,aAAe/vB,EAAM+vB,YACjD/vB,EAAMiwB,eAAiB5yB,EAAQ4yB,gBAAkBjwB,EAAMiwB,eAChDjwB,EAsPX,OA1SAlB,EAAU4wB,EAAuB5vB,GAsDjC4vB,EAAsBhzB,UAAUq0B,2BAA6B,SAAUT,EAAY/xB,GAC/E,OAAQA,EAAOyyB,QACX,KAAKxB,EAAmByB,SACxB,KAAKzB,EAAmB0B,YACxB,KAAK1B,EAAmB2B,YACpB,QAAS5yB,EAAO6yB,YAAYzzB,KACxBY,EAAO8yB,cAAc1zB,KAAOL,KAAKsK,OAAOE,MAAM,IACtD,KAAK0nB,EAAmB8B,WACxB,KAAK9B,EAAmB+B,OACxB,KAAK/B,EAAmBgC,cACpB,QAASjzB,EAAO6yB,YAAYtzB,MACxBS,EAAO6yB,YAAY3zB,MAAQ,GAErB6yB,EAAWvqB,aAAatI,MAAQc,EAAO8yB,cAAcvzB,OACnDR,KAAKsK,OAAOE,MAAM,GAF1B,IAGR,KAAK0nB,EAAmBiC,UACxB,KAAKjC,EAAmBkC,aACxB,KAAKlC,EAAmBmC,aACpB,QAASpzB,EAAO6yB,YAAYtzB,OACvBwyB,EAAWvqB,aAAatI,MAAQc,EAAO8yB,cAAcvzB,OAClDR,KAAKsK,OAAOE,MAAM,MAGtC4nB,EAAsBhzB,UAAUk1B,yBAA2B,SAAUtB,EAAY/xB,GAC7E,OAAQA,EAAOyyB,QACX,KAAKxB,EAAmByB,SACxB,KAAKzB,EAAmB8B,WACxB,KAAK9B,EAAmBiC,UACpB,OAASlzB,EAAO6yB,YAAYxzB,MAAOW,EAAO8yB,cAAczzB,IAAMN,KAAKwK,MAAM,GAC7E,KAAK0nB,EAAmB0B,YACxB,KAAK1B,EAAmB+B,OACxB,KAAK/B,EAAmBkC,aACpB,QAAUnzB,EAAO6yB,YAAYvzB,OAASU,EAAO6yB,YAAY1zB,OAAS,GAC9D,IACK4yB,EAAWvqB,aAAarI,OAASa,EAAO8yB,cAAcxzB,QACvDP,KAAKwK,MAAM,GACvB,KAAK0nB,EAAmB2B,YACxB,KAAK3B,EAAmBgC,cACxB,KAAKhC,EAAmBmC,aACpB,QAASpzB,EAAO6yB,YAAYvzB,QACvByyB,EAAWvqB,aAAarI,OAASa,EAAO8yB,cAAcxzB,QACnDP,KAAKwK,MAAM,MAG/B4nB,EAAsBhzB,UAAU8zB,uBAAyB,SAAUF,EAAY/xB,GAC3E,IAAIszB,EAAuBvB,EAAWloB,eAClC7K,EAAGgB,EAAO6yB,YAAYzzB,KACtBH,EAAGe,EAAO6yB,YAAYxzB,MAEtBk0B,EAAuBxB,EAAWloB,eAClC7K,EAAGgB,EAAO6yB,YAAYtzB,MACtBN,EAAGe,EAAO6yB,YAAYvzB,SAO1B,OALsBi0B,EAAqBv0B,EACvCs0B,EAAqBt0B,EACrBgB,EAAO8yB,cAAc1zB,KACrBY,EAAO8yB,cAAcvzB,MACrBwyB,EAAWvqB,aAAatI,MACN,EACXH,KAAKyzB,2BAA2BT,EAAY/xB,GAEnDuzB,EAAqBv0B,EACrB+yB,EAAWvqB,aAAajI,MAAQS,EAAO8yB,cAAcvzB,OAC5CS,EAAO6yB,YAAYtzB,OACvBwyB,EAAWvqB,aAAatI,MAAQc,EAAO8yB,cAAcvzB,OAClDR,KAAKsK,OAAOE,MAAM,GAE1B+pB,EAAqBt0B,EACrB+yB,EAAWvqB,aAAapI,KAAOY,EAAO8yB,cAAc1zB,MAC3CY,EAAO6yB,YAAYzzB,KACxBY,EAAO8yB,cAAc1zB,KAAOL,KAAKsK,OAAOE,MAAM,GAE/CxK,KAAKsK,OAAOC,OAAO,IAE9B6nB,EAAsBhzB,UAAU+zB,qBAAuB,SAAUH,EAAY/xB,GACzE,IAAIszB,EAAuBvB,EAAWloB,eAClC7K,EAAGgB,EAAO6yB,YAAYzzB,KACtBH,EAAGe,EAAO6yB,YAAYxzB,MAEtBk0B,EAAuBxB,EAAWloB,eAClC7K,EAAGgB,EAAO6yB,YAAYtzB,MACtBN,EAAGe,EAAO6yB,YAAYvzB,SAO1B,OALuBi0B,EAAqBt0B,EACxCq0B,EAAqBr0B,EACrBe,EAAO8yB,cAAczzB,IACrBW,EAAO8yB,cAAcxzB,OACrByyB,EAAWvqB,aAAarI,OACL,EACZJ,KAAKs0B,yBAAyBtB,EAAY/xB,GAEjDszB,EAAqBr0B,EACrB8yB,EAAWvqB,aAAanI,IAAMW,EAAO8yB,cAAczzB,MAC1CW,EAAO6yB,YAAYxzB,IACxBW,EAAO8yB,cAAczzB,IAAMN,KAAKsK,OAAOE,MAAM,IAEjDgqB,EAAqBt0B,EACrB8yB,EAAWvqB,aAAalI,OAASU,EAAO8yB,cAAcxzB,SAC7CU,EAAO6yB,YAAYvzB,SACtByyB,EAAWvqB,aAAarI,OAASa,EAAO8yB,cAAcxzB,QACpDP,KAAKsK,OAAOE,MAAM,IAEvBxK,KAAKsK,OAAOC,OAAO,IAE9B6nB,EAAsBhzB,UAAUq1B,SAAW,SAAUrsB,GACjD,OAAmC,IAA3BpI,KAAK0yB,WAAW7tB,QACnB7E,KAAK0yB,YAAc1yB,KAAK0yB,WAAW3lB,QAAQ3E,IAAW,GACtDpI,KAAK8yB,mBAAqB9yB,KAAKwzB,kBAExCpB,EAAsBhzB,UAAUs1B,qBAAuB,SAAUxR,GAC7D,IAAIxgB,EAAQ1C,KACR20B,EAAQzR,EAAEhK,gBAAgB0b,KAAK,SAAUC,GAAS,OAAOnyB,EAAMgwB,WAAW3lB,QAAQ8nB,EAAMrsB,KAAKZ,KAAO,IACxG5H,KAAK8yB,kBAAoB5pB,QAAQyrB,GAC7BA,IACA30B,KAAK80B,iBAAmBH,EAAMnsB,OAGtC4pB,EAAsBhzB,UAAU21B,cAAgB,SAAU7R,GACtD,OAAIljB,KAAK0yB,aAAe1yB,KAAKwzB,iBAClBtQ,EAAEjc,OAAOuB,KAGTxI,KAAK80B,kBAGpB1C,EAAsBhzB,UAAUwY,gBAAkB,SAAUsL,EAAG8R,GACvDh1B,KAAK0yB,aACL1yB,KAAK00B,qBAAqBxR,GACtBA,EAAErT,QACF7P,KAAKqyB,UAAYryB,KAAKy0B,SAASvR,EAAErT,MAAMrH,KAAKZ,KAAO5H,KAAKqyB,aAIpED,EAAsBhzB,UAAUmZ,cAAgB,SAAU0c,GACtDj1B,KAAK8yB,mBAAoB,EACzB9yB,KAAKqyB,WAAY,GAErBD,EAAsBhzB,UAAU8Y,WAAa,SAAUgL,EAAGlL,GACtD,GAAIkL,EAAErT,OACE7P,KAAKy0B,SAASvR,EAAErT,MAAMrH,KAAKZ,IAAK,CAChC,IAAIstB,GACAld,EAAKjN,OAAOgN,MAAM9X,EAAID,KAAKsK,OAAOE,MAAM,GACxCwN,EAAKjN,OAAOgN,MAAM7X,EAAIF,KAAKsK,OAAOE,MAAM,GACxC,GAEAxK,KAAKsyB,YACL4C,EAAMl1B,KAAKsyB,UAAU4C,EAAKhS,EAAErT,MAAMrH,KAAM0a,EAAEhK,gBAAgBrD,IAAI,SAAUC,GAAK,OAAOA,EAAEtN,SAE1FxI,KAAKsK,OAAOC,OAAO,IAAM2qB,EAAI,GAC7Bl1B,KAAKsK,OAAOC,OAAO,IAAM2qB,EAAI,GAC7Bl1B,KAAK+yB,cACL/yB,KAAK2yB,eAAe3yB,KAAKsK,OAAQ4Y,EAAErT,MAAMrH,MACzCxI,KAAK+yB,gBAIjBX,EAAsBhzB,UAAUuX,YAAc,SAAUuM,EAAGiS,GAEvD,GADAn1B,KAAK00B,qBAAqBxR,GACtBljB,KAAKy0B,SAASvR,EAAEjc,OAAOuB,KAAKZ,IAAK,CACjC,IAAIorB,EAAahzB,KAAK+0B,cAAc7R,GAChCkS,EAAapC,EAAW5oB,cAAc8Y,EAAEnY,OAAOoK,OAC/CkgB,EAAer1B,KAAKsK,OAAOE,MAAM,IAAM,EACvC8qB,EAAet1B,KAAKsK,OAAOE,MAAM,IAAM,EACvCA,GACA2qB,EAAa3e,MAAM,GAAKxW,KAAKuzB,YAAc8B,EAC3CF,EAAa3e,MAAM,GAAKxW,KAAKuzB,YAAc+B,EAC3C,GAEAt1B,KAAKyyB,cACLjoB,EAAQxK,KAAKyyB,YAAYjoB,EAAOwoB,EAAY9P,EAAEhK,gBAAgBrD,IAAI,SAAUC,GAAK,OAAOA,EAAEtN,SAE9FxI,KAAKsK,OAAOE,MAAM,GAAK6qB,EAAe7qB,EAAM,GAC5CxK,KAAKsK,OAAOE,MAAM,GAAK8qB,EAAe9qB,EAAM,GAC5CxK,KAAKizB,mBACL,IAAIsC,EAAYvC,EAAW5oB,cAAc8Y,EAAEnY,OAAOoK,OAClDnV,KAAKsK,OAAOC,OAAO,IAAM6qB,EAAWn1B,EAAIs1B,EAAUt1B,EAClDD,KAAKsK,OAAOC,OAAO,IAAM6qB,EAAWl1B,EAAIq1B,EAAUr1B,EAClDF,KAAK+yB,cACL/yB,KAAK2yB,eAAe3yB,KAAKsK,OAAQ0oB,GACjChzB,KAAK+yB,gBAGbX,EAAsBhzB,UAAU8X,eAAiB,SAAU+d,KAE3D7C,EAAsBhzB,UAAUoZ,YAAc,SAAUyc,KAExD7C,EAAsBhzB,UAAUgY,gBAAkB,SAAU6d,KAE5D7C,EAAsBhzB,UAAUkZ,gBAAkB,SAAU2c,KAE5D7C,EAAsBhzB,UAAUo2B,SAAW,SAAUptB,GACjD,IAAIqtB,EAAaz1B,KAAKmI,cAAcC,GAChCK,EAAezI,KAAKuI,oBAAoBH,GAC5C,GAAIqtB,GAAchtB,EAAc,CAC5B,IAAIitB,EAAUD,EAAWrrB,cAAc3B,GACnCktB,EAAcF,EAAWrrB,eACzBnK,EAAGwI,EAAajI,MAChBN,EAAGuI,EAAalI,SAEpB,OAAO,IAAIgJ,EAASzJ,QAChBM,OAAQu1B,EAAYz1B,EAAIw1B,EAAQx1B,EAChCC,MAAOw1B,EAAY11B,EAAIy1B,EAAQz1B,EAC/BA,EAAGy1B,EAAQz1B,EACXC,EAAGw1B,EAAQx1B,IAGnB,OAAO,IAAIqJ,EAASzJ,QAASG,EAAG,EAAGC,EAAG,EAAGC,MAAO,EAAGC,OAAQ,KAE/D3B,OAAOC,eAAe0zB,EAAsBhzB,UAAW,OACnDP,IAAK,WACD,OAAOmB,KAAKsK,OAAOC,QAEvB3L,YAAY,EACZD,cAAc,IAElByzB,EAAsBhzB,UAAUk0B,UAAY,SAAUryB,GAClDjB,KAAKiB,OAASA,EACdjB,KAAK+yB,eAETt0B,OAAOC,eAAe0zB,EAAsBhzB,UAAW,SACnDP,IAAK,WACD,OAAOmB,KAAKsK,OAAOE,OAEvB5L,YAAY,EACZD,cAAc,IAElByzB,EAAsBhzB,UAAUw2B,SAAW,SAAUC,EAAUztB,GAC3D,IAAIqtB,EAAaz1B,KAAKmI,cAAcC,GAChCK,EAAezI,KAAKuI,oBAAoBH,GACxCI,EAAOxI,KAAKsI,QAAQF,GACxB,GAAIqtB,GAAchtB,GAAgBD,EAAM,CACpC,IAAIstB,EAAa3zB,EAAOsO,WACpBhI,EAAatI,MAAQ01B,EAAS11B,MAC9BsI,EAAarI,OAASy1B,EAASz1B,OAC/B,GACDJ,KAAKsK,OAAOE,OACfxK,KAAKsK,OAAOE,MAAQrI,EAAOoO,KAAKvQ,KAAKsK,OAAOE,MAAOxK,KAAKyyB,YAAYqD,EAAYttB,GAAOA,KACvF,IAAIutB,EAAW5zB,EAAOsO,YAAYolB,EAAS51B,GAAI41B,EAAS31B,EAAG,GAAIF,KAAKsK,OAAOC,QAC3EvK,KAAKsK,OAAOC,OAASpI,EAAOoO,KAAKvQ,KAAKsK,OAAOC,OAAQvK,KAAKyyB,YAAYsD,EAAUvtB,GAAOA,KACvFxI,KAAK+yB,cACL/yB,KAAK2yB,eAAe3yB,KAAKsK,OAAQ9B,GACjCxI,KAAK+yB,gBAGNX,EA3SkB,CA4S3BD,EAAgBjqB,cAClB/K,EAAQi1B,sBAAwBA,gCCrUhC3zB,OAAOC,eAAevB,EAAS,cAAgB4B,OAAO,IAHtD,SAAkBZ,GACd,IAAK,IAAImB,KAAKnB,EAAQhB,EAAQkC,eAAeC,KAAInC,EAAQmC,GAAKnB,EAAEmB,IAGpEiC,CAAS1D,EAAQ,oBCLjBT,EAAAD,QAAA,sgCCAAC,EAAAD,QAAA,m9CCCA,IAAIqE,EAAaxB,MAAQA,KAAKwB,WAAe,WACzC,IAAIC,EAAgBhD,OAAOiD,iBACpBC,wBAA2BC,OAAS,SAAUvD,EAAGwD,GAAKxD,EAAEsD,UAAYE,IACvE,SAAUxD,EAAGwD,GAAK,IAAK,IAAIvC,KAAKuC,EAAOA,EAAExC,eAAeC,KAAIjB,EAAEiB,GAAKuC,EAAEvC,KACzE,OAAO,SAAUjB,EAAGwD,GAEhB,SAASC,IAAO9B,KAAK+B,YAAc1D,EADnCoD,EAAcpD,EAAGwD,GAEjBxD,EAAEe,UAAkB,OAANyC,EAAapD,OAAOuD,OAAOH,IAAMC,EAAG1C,UAAYyC,EAAEzC,UAAW,IAAI0C,IAP1C,GAU7CrD,OAAOC,eAAevB,EAAS,cAAgB4B,OAAO,IACtD,IAAIkD,EAAQpE,EAAQ,GAChBm4B,EAAen4B,EAAQ,GACvBo4B,EAAUp4B,EAAQ,GAClBqE,EAAUrE,EAAQ,GAClBiU,EAAMhR,KAAKgR,IACXokB,EAAa,SAAU1zB,GAEvB,SAAS0zB,IACL,OAAkB,OAAX1zB,GAAmBA,EAAOwM,MAAMhP,KAAMoH,YAAcpH,KAgH/D,OAlHAwB,EAAU00B,EAAW1zB,GAIrB0zB,EAAU92B,UAAUkE,0BAA4B,WAC5C,OACII,eAAgB,SAAUyyB,GACtB,OAAO,IAAIH,EAAal2B,QACpBM,OAAsB,EAAd+1B,EAAKC,OACbj2B,MAAqB,EAAdg2B,EAAKC,OACZn2B,EAAGk2B,EAAKl2B,EAAIk2B,EAAKC,OACjBl2B,EAAGi2B,EAAKj2B,EAAIi2B,EAAKC,UAGzB7yB,QAAS,SAAU4yB,EAAMx1B,EAAO6H,GAC5B,IAAI1J,EAAIq3B,EAAKC,OAAStkB,EAAI9C,WAAM,EAAQxG,EAAK8B,OAAOE,OAChDuN,GAASpX,EAAMV,EAAIk2B,EAAKl2B,EAAGU,EAAMT,EAAIi2B,EAAKj2B,GAC9C,OAAO6X,EAAM,GAAKA,EAAM,GAAKA,EAAM,GAAKA,EAAM,GAAKjZ,EAAIA,KAInEo3B,EAAU92B,UAAUuG,WAAa,WAC7B,IAAI4tB,EAAcvzB,KAAKyC,MAAM8wB,aAAgB,WAAc,OAAO,GAC9D8C,GACAC,EAAG,EACHC,EAAG,EACHC,GAAI,EACJC,EAAG,EACHC,GAAI,EACJC,GAAI,GAEJC,GACAN,GAAI,EACJC,GAAI,EACJC,GAAI,EACJC,EAAG,EACHC,EAAG,EACHC,EAAG,GAEP,OACI/wB,GAAI/H,EAAQ,IACZgI,qBAEQK,MAAO,EACPC,WAAYjE,EAAQ1C,mBAAmBia,IACvCnb,KAAM,SACN8H,KAAMlE,EAAQzC,sBAAsBia,IACpC1U,OAAQ,SAAUxG,GAAK,OAAQA,EAAEyB,EAAGzB,EAAE0B,MAGtCgG,MAAO,EACPC,WAAYjE,EAAQ1C,mBAAmBma,MACvCrb,KAAM,SACN8H,KAAMlE,EAAQzC,sBAAsBga,IACpCzU,OAAQ,SAAUxG,GAAK,OAAQA,EAAE43B,WAGjClwB,MAAO,EACPC,WAAYjE,EAAQ1C,mBAAmBoa,KACvCtb,KAAM,QACN8H,KAAMlE,EAAQzC,sBAAsBga,IACpCzU,OAAQ,SAAUxG,GAAK,OAAQA,EAAEmE,UAGjCuD,MAAO,EACPC,WAAYjE,EAAQ1C,mBAAmBia,IACvCnb,KAAM,QACN8H,KAAMlE,EAAQzC,sBAAsBma,KACpC5U,OAAQ,SAAUxG,GAAK,OAAOA,EAAEmpB,SAGhCzhB,MAAO,EACPC,WAAYjE,EAAQ1C,mBAAmBia,IACvCnb,KAAM,YACN8H,KAAMlE,EAAQzC,sBAAsBga,IACpCzU,OAAQ,SAAUxG,GAAK,OAAQA,EAAEq4B,cAGzCpyB,WAEQnG,KAAM,cACN8H,KAAMlE,EAAQxC,YAAY+Z,IAC1BzU,OAAQ,SAAU2e,GAAK,OAAQ4P,QAGvCztB,mBAEQxH,KAAM,WACN8H,KAAMlE,EAAQvC,oBAAoBga,MAClC3U,OAAQ,SAAU8xB,GAAU,OACxBT,EAAeS,GACfF,EAAaE,GACb,MAIZ/wB,YAAa,EACbC,GAAInI,EAAQ,MAGpBq4B,EAAU92B,UAAUiG,aAAe,WAC/B,OACIC,SAAUrD,EAAMoH,sBAChB7D,UAAWvD,EAAMwD,OAGzBywB,EAAU92B,UAAUsG,mBAAqB,WACrC,OACIqxB,SAAU90B,EAAM+0B,eAChBC,SAAUh1B,EAAMi1B,UAChBC,oBAAoB,EACpBC,aAAa,IAGdlB,EAnHM,CAoHfD,EAAQ1zB,OACVpF,EAAQ+4B,UAAYA,gCCrIpB,IAAI10B,EAAaxB,MAAQA,KAAKwB,WAAe,WACzC,IAAIC,EAAgBhD,OAAOiD,iBACpBC,wBAA2BC,OAAS,SAAUvD,EAAGwD,GAAKxD,EAAEsD,UAAYE,IACvE,SAAUxD,EAAGwD,GAAK,IAAK,IAAIvC,KAAKuC,EAAOA,EAAExC,eAAeC,KAAIjB,EAAEiB,GAAKuC,EAAEvC,KACzE,OAAO,SAAUjB,EAAGwD,GAEhB,SAASC,IAAO9B,KAAK+B,YAAc1D,EADnCoD,EAAcpD,EAAGwD,GAEjBxD,EAAEe,UAAkB,OAANyC,EAAapD,OAAOuD,OAAOH,IAAMC,EAAG1C,UAAYyC,EAAEzC,UAAW,IAAI0C,IAP1C,GAUzCiF,EAAc/G,MAAQA,KAAK+G,YAAe,SAAUC,EAAYC,EAAQC,EAAKC,GAC7E,IAA2H9I,EAAvHD,EAAIgJ,UAAUvC,OAAQ/F,EAAIV,EAAI,EAAI6I,EAAkB,OAATE,EAAgBA,EAAO1I,OAAO4I,yBAAyBJ,EAAQC,GAAOC,EACrH,GAAuB,iBAAZG,SAAoD,mBAArBA,QAAQC,SAAyBzI,EAAIwI,QAAQC,SAASP,EAAYC,EAAQC,EAAKC,QACpH,IAAK,IAAIpJ,EAAIiJ,EAAWnC,OAAS,EAAG9G,GAAK,EAAGA,KAASM,EAAI2I,EAAWjJ,MAAIe,GAAKV,EAAI,EAAIC,EAAES,GAAKV,EAAI,EAAIC,EAAE4I,EAAQC,EAAKpI,GAAKT,EAAE4I,EAAQC,KAASpI,GAChJ,OAAOV,EAAI,GAAKU,GAAKL,OAAOC,eAAeuI,EAAQC,EAAKpI,GAAIA,GAEhEL,OAAOC,eAAevB,EAAS,cAAgB4B,OAAO,IACtD,IAAIyI,EAAS3J,EAAQ,GAEjBw5B,EAAgB,SAAU70B,GAE1B,SAAS60B,EAAat3B,GAClB,IAAI2C,EAAQF,EAAOtE,KAAK8B,KAAMD,IAAYC,KAa1C,OAZA0C,EAAMilB,OAAS,EAAK,EAAK,EAAK,GAC9BjlB,EAAMC,MAAQ,EACdD,EAAM0zB,OAAS,EACf1zB,EAAMm0B,UAAY,EAClBn0B,EAAMzC,EAAI,EACVyC,EAAMxC,EAAI,EACVwC,EAAMilB,MAAQ5nB,EAAQ4nB,QAAU,EAAG,EAAG,EAAG,GACzCjlB,EAAMC,MAAQ5C,EAAQ4C,OAAS,EAC/BD,EAAM0zB,OAASr2B,EAAQq2B,OACvB1zB,EAAMm0B,UAAY92B,EAAQ82B,WAAan0B,EAAMm0B,UAC7Cn0B,EAAMzC,EAAIF,EAAQE,EAClByC,EAAMxC,EAAIH,EAAQG,EACXwC,EAkDX,OAjEAlB,EAAU61B,EAAc70B,GAiBxB/D,OAAOC,eAAe24B,EAAaj4B,UAAW,SAC1CP,IAAK,WACD,OAAqB,EAAdmB,KAAKo2B,QAEhBx3B,YAAY,EACZD,cAAc,IAElBF,OAAOC,eAAe24B,EAAaj4B,UAAW,UAC1CP,IAAK,WACD,OAAqB,EAAdmB,KAAKo2B,QAEhBx3B,YAAY,EACZD,cAAc,IAElBF,OAAOC,eAAe24B,EAAaj4B,UAAW,eAC1CP,IAAK,WACD,OAAOmB,KAAKo2B,OAASp2B,KAAK62B,WAE9Bj4B,YAAY,EACZD,cAAc,IAElBoI,GACIS,EAAOM,YACRuvB,EAAaj4B,UAAW,aAAS,GACpC2H,GACIS,EAAOM,YACRuvB,EAAaj4B,UAAW,aAAS,GACpC2H,GACIS,EAAOM,YACRuvB,EAAaj4B,UAAW,cAAU,GACrC2H,GACIS,EAAOM,YACRuvB,EAAaj4B,UAAW,iBAAa,GACxC2H,GACIS,EAAOM,YACRuvB,EAAaj4B,UAAW,SAAK,GAChC2H,GACIS,EAAOM,YACRuvB,EAAaj4B,UAAW,SAAK,GAChC2H,GACIS,EAAO8vB,UACRD,EAAaj4B,UAAW,QAAS,MACpC2H,GACIS,EAAO8vB,UACRD,EAAaj4B,UAAW,SAAU,MACrC2H,GACIS,EAAO8vB,UACRD,EAAaj4B,UAAW,cAAe,MACnCi4B,EAlES,CADPx5B,EAAQ,GAoEZ4J,UACTtK,EAAQk6B,aAAeA,gCCvFvB,SAAS91B,EAASpD,GACd,IAAK,IAAImB,KAAKnB,EAAQhB,EAAQkC,eAAeC,KAAInC,EAAQmC,GAAKnB,EAAEmB,IAEpEb,OAAOC,eAAevB,EAAS,cAAgB4B,OAAO,IACtDwC,EAAS1D,EAAQ,KACjB0D,EAAS1D,EAAQ,mCCLjB,IAAI2D,EAAaxB,MAAQA,KAAKwB,WAAe,WACzC,IAAIC,EAAgBhD,OAAOiD,iBACpBC,wBAA2BC,OAAS,SAAUvD,EAAGwD,GAAKxD,EAAEsD,UAAYE,IACvE,SAAUxD,EAAGwD,GAAK,IAAK,IAAIvC,KAAKuC,EAAOA,EAAExC,eAAeC,KAAIjB,EAAEiB,GAAKuC,EAAEvC,KACzE,OAAO,SAAUjB,EAAGwD,GAEhB,SAASC,IAAO9B,KAAK+B,YAAc1D,EADnCoD,EAAcpD,EAAGwD,GAEjBxD,EAAEe,UAAkB,OAANyC,EAAapD,OAAOuD,OAAOH,IAAMC,EAAG1C,UAAYyC,EAAEzC,UAAW,IAAI0C,IAP1C,GAUzCiF,EAAc/G,MAAQA,KAAK+G,YAAe,SAAUC,EAAYC,EAAQC,EAAKC,GAC7E,IAA2H9I,EAAvHD,EAAIgJ,UAAUvC,OAAQ/F,EAAIV,EAAI,EAAI6I,EAAkB,OAATE,EAAgBA,EAAO1I,OAAO4I,yBAAyBJ,EAAQC,GAAOC,EACrH,GAAuB,iBAAZG,SAAoD,mBAArBA,QAAQC,SAAyBzI,EAAIwI,QAAQC,SAASP,EAAYC,EAAQC,EAAKC,QACpH,IAAK,IAAIpJ,EAAIiJ,EAAWnC,OAAS,EAAG9G,GAAK,EAAGA,KAASM,EAAI2I,EAAWjJ,MAAIe,GAAKV,EAAI,EAAIC,EAAES,GAAKV,EAAI,EAAIC,EAAE4I,EAAQC,EAAKpI,GAAKT,EAAE4I,EAAQC,KAASpI,GAChJ,OAAOV,EAAI,GAAKU,GAAKL,OAAOC,eAAeuI,EAAQC,EAAKpI,GAAIA,GAEhEL,OAAOC,eAAevB,EAAS,cAAgB4B,OAAO,IACtD,IAuHIkE,EAvHAuE,EAAS3J,EAAQ,GACjB05B,EAAa15B,EAAQ,GACrBqE,EAAUrE,EAAQ,GAClB25B,IAAoBv0B,MACjBf,EAAQb,WAAWo2B,SAAW,SAAU/D,EAAQgE,GAC/ChE,EAAOzzB,GAAKyzB,EAAOiE,QACnBjE,EAAOxzB,GAAKwzB,EAAOiE,SAEvB10B,EAAGf,EAAQb,WAAWu2B,WAAa,SAAUlE,EAAQmE,GACjDnE,EAAOzzB,EAAI43B,EAAU13B,MAAQ,EAC7BuzB,EAAOxzB,GAAKwzB,EAAOiE,SAEvB10B,EAAGf,EAAQb,WAAWy2B,UAAY,SAAUpE,EAAQmE,GAChDnE,EAAOzzB,EAAI43B,EAAU13B,MAAQuzB,EAAOiE,QACpCjE,EAAOxzB,GAAKwzB,EAAOiE,SAEvB10B,EAAGf,EAAQb,WAAW02B,YAAc,SAAUrE,EAAQmE,GAClDnE,EAAOzzB,GAAKyzB,EAAOiE,QACnBjE,EAAOxzB,EAAI23B,EAAUz3B,OAAS,GAElC6C,EAAGf,EAAQb,WAAW22B,QAAU,SAAUtE,EAAQmE,GAC9CnE,EAAOzzB,EAAI43B,EAAU13B,MAAQ,EAC7BuzB,EAAOxzB,EAAI23B,EAAUz3B,OAAS,GAElC6C,EAAGf,EAAQb,WAAW42B,aAAe,SAAUvE,EAAQmE,GACnDnE,EAAOzzB,EAAI43B,EAAU13B,MAAQuzB,EAAOiE,QACpCjE,EAAOxzB,EAAI23B,EAAUz3B,OAAS,GAElC6C,EAAGf,EAAQb,WAAW62B,YAAc,SAAUxE,EAAQmE,GAClDnE,EAAOzzB,GAAKyzB,EAAOiE,QACnBjE,EAAOxzB,EAAI23B,EAAUz3B,OAASszB,EAAOiE,SAEzC10B,EAAGf,EAAQb,WAAW82B,cAAgB,SAAUzE,EAAQmE,GACpDnE,EAAOzzB,EAAI43B,EAAU13B,MAAQ,EAC7BuzB,EAAOxzB,EAAI23B,EAAUz3B,OAASszB,EAAOiE,SAEzC10B,EAAGf,EAAQb,WAAW+2B,aAAe,SAAU1E,EAAQmE,GACnDnE,EAAOzzB,EAAI43B,EAAU13B,MAAQuzB,EAAOiE,QACpCjE,EAAOxzB,EAAI23B,EAAUz3B,OAASszB,EAAOiE,SAEzC10B,EAAGf,EAAQb,WAAWg3B,QAAU,SAAU3E,EAAQgE,GAC9ChE,EAAOzzB,EAAIyzB,EAAOzzB,GAAK,EACvByzB,EAAOxzB,EAAIwzB,EAAOxzB,GAAK,GAE3B+C,GACAq1B,EAAqB,SAAU91B,GAE/B,SAAS81B,EAAkBv4B,GACvB,IAAI2C,EAAQF,EAAOtE,KAAK8B,KAAMD,IAAYC,KAsB1C,OArBA0C,EAAMilB,OAAS,EAAG,EAAG,EAAG,GACxBjlB,EAAMC,MAAQ,EACdD,EAAMtC,OAAS,EACfsC,EAAM61B,QAAUr2B,EAAQZ,UAAUk3B,UAClC91B,EAAMvC,MAAQ,EACduC,EAAMzC,EAAI,EACVyC,EAAMxC,EAAI,EACVwC,EAAM+1B,SACFd,QAAS,EACTh0B,KAAMzB,EAAQb,WAAWo2B,QACzBx3B,EAAG,EACHC,EAAG,GAEPwC,EAAMC,MAAQ5C,EAAQ4C,OAASD,EAAMC,MACrCD,EAAMilB,MAAQ5nB,EAAQ4nB,OAASjlB,EAAMilB,MACrCjlB,EAAM61B,QAAUx4B,EAAQw4B,SAAW71B,EAAM61B,QACzC71B,EAAMzC,EAAIF,EAAQE,GAAKyC,EAAMzC,EAC7ByC,EAAMxC,EAAIH,EAAQG,GAAKwC,EAAMxC,EAC7BwC,EAAMvC,MAAQJ,EAAQI,OAAS,EAC/BuC,EAAMtC,OAASL,EAAQK,QAAU,EACjCL,EAAQ2zB,QAAUhxB,EAAMg2B,UAAU34B,EAAQ2zB,QACnChxB,EA8CX,OAtEAlB,EAAU82B,EAAmB91B,GA0B7B/D,OAAOC,eAAe45B,EAAkBl5B,UAAW,UAC/CP,IAAK,WACD,OAAOmB,KAAKy4B,SAEhB75B,YAAY,EACZD,cAAc,IAElB25B,EAAkBl5B,UAAUs5B,UAAY,SAAUhF,GAC9C,IAAIiF,GACAhB,QAASjE,EAAOiE,SAAW,EAC3Bh0B,KAAM+vB,EAAO/vB,KACb1D,EAAGyzB,EAAOzzB,GAAK,EACfC,EAAGwzB,EAAOxzB,GAAK,GAEnBs3B,EAAiBmB,EAAUh1B,MAAMg1B,EAAW34B,MAC5CA,KAAKy4B,QAAUE,GAEnB5xB,GACIS,EAAOM,YACRwwB,EAAkBl5B,UAAW,aAAS,GACzC2H,GACIS,EAAOM,YACRwwB,EAAkBl5B,UAAW,aAAS,GACzC2H,GACIS,EAAOM,YACRwwB,EAAkBl5B,UAAW,cAAU,GAC1C2H,GACIS,EAAOM,YACRwwB,EAAkBl5B,UAAW,eAAW,GAC3C2H,GACIS,EAAOM,YACRwwB,EAAkBl5B,UAAW,aAAS,GACzC2H,GACIS,EAAOM,YACRwwB,EAAkBl5B,UAAW,SAAK,GACrC2H,GACIS,EAAOM,YACRwwB,EAAkBl5B,UAAW,SAAK,GACrC2H,GACIS,EAAOM,YACRwwB,EAAkBl5B,UAAW,eAAW,GAC3C2H,GACIS,EAAO8vB,UACRgB,EAAkBl5B,UAAW,SAAU,MACnCk5B,EAvEc,CAwEvBf,EAAW9vB,UACbtK,EAAQm7B,kBAAoBA,iBCxI5Bl7B,EAAAD,QAAA,4/ECAAC,EAAAD,QAAA,yICCA,IAAIqE,EAAaxB,MAAQA,KAAKwB,WAAe,WACzC,IAAIC,EAAgBhD,OAAOiD,iBACpBC,wBAA2BC,OAAS,SAAUvD,EAAGwD,GAAKxD,EAAEsD,UAAYE,IACvE,SAAUxD,EAAGwD,GAAK,IAAK,IAAIvC,KAAKuC,EAAOA,EAAExC,eAAeC,KAAIjB,EAAEiB,GAAKuC,EAAEvC,KACzE,OAAO,SAAUjB,EAAGwD,GAEhB,SAASC,IAAO9B,KAAK+B,YAAc1D,EADnCoD,EAAcpD,EAAGwD,GAEjBxD,EAAEe,UAAkB,OAANyC,EAAapD,OAAOuD,OAAOH,IAAMC,EAAG1C,UAAYyC,EAAEzC,UAAW,IAAI0C,IAP1C,GAU7CrD,OAAOC,eAAevB,EAAS,cAAgB4B,OAAO,IACtD,IAAIkD,EAAQpE,EAAQ,GAChBm4B,EAAen4B,EAAQ,GACvBo4B,EAAUp4B,EAAQ,GAClBqE,EAAUrE,EAAQ,GAClB+6B,EAAU/6B,EAAQ,GAClBgU,EAAM/Q,KAAK+Q,IAAKC,EAAMhR,KAAKgR,IAC3B+mB,EAAkB,SAAUr2B,GAE5B,SAASq2B,IACL,OAAkB,OAAXr2B,GAAmBA,EAAOwM,MAAMhP,KAAMoH,YAAcpH,KA0K/D,OA5KAwB,EAAUq3B,EAAgBr2B,GAI1Bq2B,EAAez5B,UAAUkE,0BAA4B,WACjD,OACII,eAAgB,SAAUm0B,GACtB,IAAIiB,GAAgB,EAAG,GACnBjB,EAAUnE,SACVoF,EAAa,GAAKjB,EAAUnE,OAAOzzB,GAAK,EACxC64B,EAAa,GAAKjB,EAAUnE,OAAOxzB,GAAK,GAE5C,IAAIw1B,GACAmC,EAAU53B,EAAI64B,EAAa,GAC3BjB,EAAU33B,EAAI44B,EAAa,IAE/B,OAAO,IAAI9C,EAAal2B,QACpBM,OAAQy3B,EAAUz3B,OAClBD,MAAO03B,EAAU13B,MACjBF,EAAGy1B,EAAQ,GACXx1B,EAAGw1B,EAAQ,MAGnBnyB,QAAS,SAAUs0B,EAAWl3B,EAAO80B,GACjC,IAAIsD,EAAWjnB,EAAI9C,WAAM,EAAQymB,EAAWnrB,OAAOE,OAC/CwuB,EAAWnnB,EAAI7C,WAAM,EAAQymB,EAAWnrB,OAAOE,OACnD,GAAIqtB,EAAUU,UAAYK,EAAQt3B,UAAU23B,OACxC,OAAO,EAEN,GAAIpB,EAAUU,UAAYK,EAAQt3B,UAAUk3B,UAAW,CACxD,GAAIQ,GAAY,GAAKD,GAAY,EAC7B,OAAO,EAGP,IAAID,GAAgB,EAAG,GACnBjB,EAAUnE,SACVoF,EAAa,GAAKjB,EAAUnE,OAAOzzB,GAAK,EACxC64B,EAAa,GAAKjB,EAAUnE,OAAOxzB,GAAK,GAE5C,IAAIw1B,GACAmC,EAAU53B,EAAI64B,EAAa,GAAKC,EAChClB,EAAU33B,EAAI44B,EAAa,GAAKC,GAEpC,OAAO,IAAI/C,EAAal2B,QACpBM,OAAQy3B,EAAUz3B,OAAS24B,EAC3B54B,MAAO03B,EAAU13B,MAAQ44B,EACzB94B,EAAGy1B,EAAQ,GACXx1B,EAAGw1B,EAAQ,KACZh1B,cAAcC,GAGpB,GAAIk3B,EAAUU,UAAYK,EAAQt3B,UAAU43B,MAAO,CAChDJ,GAAgB,EAAG,GACnBjB,EAAUnE,SACVoF,EAAa,GAAKjB,EAAUnE,OAAOzzB,GAAK,EACxC64B,EAAa,GAAKjB,EAAUnE,OAAOxzB,GAAK,GAExCw1B,EAAUD,EAAW3qB,eACrB7K,EAAG43B,EAAU53B,EAAI64B,EAAa,GAAKrD,EAAWnrB,OAAOE,MAAM,GAC3DtK,EAAG23B,EAAU33B,EAAI44B,EAAa,GAAKrD,EAAWnrB,OAAOE,MAAM,KAF/D,IAII2uB,EAAc1D,EAAW3qB,cAAcnK,GAC3C,OAAO,IAAIq1B,EAAal2B,QACpBM,OAAQy3B,EAAUz3B,OAClBD,MAAO03B,EAAU13B,MACjBF,EAAGy1B,EAAQz1B,EACXC,EAAGw1B,EAAQx1B,IACZQ,cAAcy4B,GAErB,OAAO,KAInBN,EAAez5B,UAAUuG,WAAa,WAClC,IAAI0wB,GACAC,EAAG,EACHC,EAAG,EACHC,GAAI,EACJC,EAAG,EACHC,GAAI,EACJC,GAAI,GAEJC,GACAN,EAAG,EACHC,EAAG,EACHC,EAAG,EACHC,EAAG,EACHC,EAAG,EACHC,EAAG,GAEP,OACI/wB,GAAI/H,EAAQ,IACZgI,qBAEQK,MAAO,EACPC,WAAYjE,EAAQ1C,mBAAmBia,IACvCnb,KAAM,WACN8H,KAAMlE,EAAQzC,sBAAsBia,IACpC1U,OAAQ,SAAUxG,GAAK,OAAQA,EAAEyB,EAAGzB,EAAE0B,MAGtCgG,MAAO,EACPC,WAAYjE,EAAQ1C,mBAAmBma,MACvCrb,KAAM,SACN8H,KAAMlE,EAAQzC,sBAAsBia,IACpC1U,OAAQ,SAAUxG,GAAK,OAAQA,EAAEk1B,OAAOzzB,GAAK,EAAGzB,EAAEk1B,OAAOxzB,GAAK,MAG9DgG,MAAO,EACPC,WAAYjE,EAAQ1C,mBAAmBia,IACvCnb,KAAM,OACN8H,KAAMlE,EAAQzC,sBAAsBia,IACpC1U,OAAQ,SAAUxG,GAAK,OAAQA,EAAE2B,MAAO3B,EAAE4B,WAG1C8F,MAAO,EACPC,WAAYjE,EAAQ1C,mBAAmBma,MACvCrb,KAAM,QACN8H,KAAMlE,EAAQzC,sBAAsBga,IACpCzU,OAAQ,SAAUxG,GAAK,OAAQA,EAAEmE,UAGjCuD,MAAO,EACPC,WAAYjE,EAAQ1C,mBAAmBoa,KACvCtb,KAAM,UACN8H,KAAMlE,EAAQzC,sBAAsBga,IACpCzU,OAAQ,SAAUxG,GAAK,OAAQA,EAAE+5B,YAGjCryB,MAAO,EACPC,WAAYjE,EAAQ1C,mBAAmBia,IACvCnb,KAAM,QACN8H,KAAMlE,EAAQzC,sBAAsBma,KACpC5U,OAAQ,SAAUxG,GAAK,OAAOA,EAAEmpB,SAGxCljB,WAEQnG,KAAM,cACN8H,KAAMlE,EAAQxC,YAAY+Z,IAC1BzU,OAAQ,SAAUo0B,GAAM,OAAQ,MAGxCtzB,mBAEQxH,KAAM,WACN8H,KAAMlE,EAAQvC,oBAAoBga,MAClC3U,OAAQ,SAAU8xB,GAAU,OACxBT,EAAeS,GACfF,EAAaE,GACb,MAIZ/wB,YAAa,EACbC,GAAInI,EAAQ,MAGpBg7B,EAAez5B,UAAUiG,aAAe,WACpC,OACIC,SAAUrD,EAAMoH,sBAChB7D,UAAWvD,EAAMwD,OAGzBozB,EAAez5B,UAAUsG,mBAAqB,WAC1C,OACIqxB,SAAU90B,EAAM+0B,eAChBC,SAAUh1B,EAAMi1B,UAChBC,oBAAoB,EACpBC,aAAa,IAGdyB,EA7KW,CA8KpB5C,EAAQ1zB,OACVpF,EAAQ07B,eAAiBA,gCChMzB,SAASt3B,EAASpD,GACd,IAAK,IAAImB,KAAKnB,EAAQhB,EAAQkC,eAAeC,KAAInC,EAAQmC,GAAKnB,EAAEmB,IAEpEb,OAAOC,eAAevB,EAAS,cAAgB4B,OAAO,IACtDwC,EAAS1D,EAAQ,KACjB0D,EAAS1D,EAAQ,mCCLjB,IAAI2D,EAAaxB,MAAQA,KAAKwB,WAAe,WACzC,IAAIC,EAAgBhD,OAAOiD,iBACpBC,wBAA2BC,OAAS,SAAUvD,EAAGwD,GAAKxD,EAAEsD,UAAYE,IACvE,SAAUxD,EAAGwD,GAAK,IAAK,IAAIvC,KAAKuC,EAAOA,EAAExC,eAAeC,KAAIjB,EAAEiB,GAAKuC,EAAEvC,KACzE,OAAO,SAAUjB,EAAGwD,GAEhB,SAASC,IAAO9B,KAAK+B,YAAc1D,EADnCoD,EAAcpD,EAAGwD,GAEjBxD,EAAEe,UAAkB,OAANyC,EAAapD,OAAOuD,OAAOH,IAAMC,EAAG1C,UAAYyC,EAAEzC,UAAW,IAAI0C,IAP1C,GAUzCiF,EAAc/G,MAAQA,KAAK+G,YAAe,SAAUC,EAAYC,EAAQC,EAAKC,GAC7E,IAA2H9I,EAAvHD,EAAIgJ,UAAUvC,OAAQ/F,EAAIV,EAAI,EAAI6I,EAAkB,OAATE,EAAgBA,EAAO1I,OAAO4I,yBAAyBJ,EAAQC,GAAOC,EACrH,GAAuB,iBAAZG,SAAoD,mBAArBA,QAAQC,SAAyBzI,EAAIwI,QAAQC,SAASP,EAAYC,EAAQC,EAAKC,QACpH,IAAK,IAAIpJ,EAAIiJ,EAAWnC,OAAS,EAAG9G,GAAK,EAAGA,KAASM,EAAI2I,EAAWjJ,MAAIe,GAAKV,EAAI,EAAIC,EAAES,GAAKV,EAAI,EAAIC,EAAE4I,EAAQC,EAAKpI,GAAKT,EAAE4I,EAAQC,KAASpI,GAChJ,OAAOV,EAAI,GAAKU,GAAKL,OAAOC,eAAeuI,EAAQC,EAAKpI,GAAIA,GAEhEL,OAAOC,eAAevB,EAAS,cAAgB4B,OAAO,IACtD,IAAIyI,EAAS3J,EAAQ,GAEjBw7B,EAAgB,SAAU72B,GAE1B,SAAS62B,EAAat5B,GAClB,IAAI2C,EAAQF,EAAOtE,KAAK8B,KAAMD,IAAYC,KAiB1C,OAhBA0C,EAAM42B,YAAc,EAAK,EAAK,EAAK,GACnC52B,EAAM62B,UAAY,EAAK,EAAK,EAAK,GACjC72B,EAAM82B,UAAY,EAAG,IAAK,EAAG,IAC7B92B,EAAMC,MAAQ,EACdD,EAAMkC,KAAO,EAAG,GAChBlC,EAAMmN,OAAS,EAAG,GAClBnN,EAAM+2B,WAAa,EACnB/2B,EAAMg3B,SAAW,EACjBh3B,EAAM42B,WAAav5B,EAAQu5B,YAAc52B,EAAM42B,WAC/C52B,EAAM62B,SAAWx5B,EAAQw5B,UAAY72B,EAAM62B,SAC3C72B,EAAM82B,QAAUz5B,EAAQy5B,SAAW92B,EAAM82B,QACzC92B,EAAMC,MAAQ5C,EAAQ4C,OAASD,EAAMC,MACrCD,EAAMkC,IAAM7E,EAAQ6E,KAAOlC,EAAMkC,IACjClC,EAAM+2B,WAAa15B,EAAQ05B,YAAc/2B,EAAM+2B,WAC/C/2B,EAAMg3B,SAAW35B,EAAQ25B,UAAYh3B,EAAMg3B,SAC3Ch3B,EAAMmN,MAAQ9P,EAAQ8P,OAASnN,EAAMmN,MAC9BnN,EAuEX,OA1FAlB,EAAU63B,EAAc72B,GAqBxB/D,OAAOC,eAAe26B,EAAaj6B,UAAW,UAC1CP,IAAK,WACD,IAAIkZ,GAAS/X,KAAK4E,IAAI,GAAK5E,KAAK6P,MAAM,GAAI7P,KAAK4E,IAAI,GAAK5E,KAAK6P,MAAM,IACnE,OAAO/O,KAAKuO,KAAK0I,EAAM,GAAKA,EAAM,GAAKA,EAAM,GAAKA,EAAM,KAE5DnZ,YAAY,EACZD,cAAc,IAElBF,OAAOC,eAAe26B,EAAaj6B,UAAW,YAC1CP,IAAK,WACD,OAAO,GAEXD,YAAY,EACZD,cAAc,IAElBF,OAAOC,eAAe26B,EAAaj6B,UAAW,iBAC1CP,IAAK,WACD,IAAIgG,EAAS7E,KAAK6E,OAClB,QACK7E,KAAK4E,IAAI,GAAK5E,KAAK6P,MAAM,IAAMhL,IAC9B7E,KAAK4E,IAAI,GAAK5E,KAAK6P,MAAM,IAAMhL,IAGzCjG,YAAY,EACZD,cAAc,IAElB06B,EAAaj6B,UAAUu6B,aAAe,SAAUx5B,GACxCA,IACAH,KAAK05B,SAAWv5B,EAChBH,KAAKy5B,WAAat5B,IAG1Bk5B,EAAaj6B,UAAUw6B,SAAW,SAAUjS,GACxC3nB,KAAKs5B,WAAa3R,EAClB3nB,KAAKu5B,SAAW5R,GAEpB5gB,GACIS,EAAOM,YACRuxB,EAAaj6B,UAAW,kBAAc,GACzC2H,GACIS,EAAOM,YACRuxB,EAAaj6B,UAAW,gBAAY,GACvC2H,GACIS,EAAOM,YACRuxB,EAAaj6B,UAAW,eAAW,GACtC2H,GACIS,EAAOM,YACRuxB,EAAaj6B,UAAW,aAAS,GACpC2H,GACIS,EAAOM,YACRuxB,EAAaj6B,UAAW,WAAO,GAClC2H,GACIS,EAAOM,YACRuxB,EAAaj6B,UAAW,aAAS,GACpC2H,GACIS,EAAOM,YACRuxB,EAAaj6B,UAAW,kBAAc,GACzC2H,GACIS,EAAOM,YACRuxB,EAAaj6B,UAAW,gBAAY,GACvC2H,GACIS,EAAO8vB,UACR+B,EAAaj6B,UAAW,SAAU,MACrC2H,GACIS,EAAO8vB,UACR+B,EAAaj6B,UAAW,WAAY,MACvC2H,GACIS,EAAO8vB,UACR+B,EAAaj6B,UAAW,gBAAiB,MACrCi6B,EA3FS,CADHx7B,EAAQ,GA6FZ4J,UACbtK,EAAQk8B,aAAeA,iBCjHvBj8B,EAAAD,QAAA,0HCAAC,EAAAD,QAAA,8oFCAAC,EAAAD,QAAA,ojECAAC,EAAAD,QAAA,ihBCAAC,EAAAD,QAAA,4dCAAC,EAAAD,QAAA,2bCCAsB,OAAOC,eAAevB,EAAS,cAAgB4B,OAAO,IACtD,IAAIwK,EAAW1L,EAAQ,GACnB+T,EAAW/T,EAAQ,IACnBqE,EAAUrE,EAAQ,IAClBkU,EAAMjR,KAAKiR,IAuBf,IAAI8nB,IAAiB52B,MACdf,EAAQ8F,SAAS8xB,MAvBxB,SAAgBhqB,EAAGiqB,EAAIC,EAAIC,EAAKC,GAC5B,OAAOtoB,EAAS5B,KAAK4B,EAAS3B,OAAO2B,EAAS1B,UAAU8pB,EAAID,GAAKjqB,GAAIiqB,IAuBrE92B,EAAGf,EAAQ8F,SAASmyB,QArBxB,SAAgBrqB,EAAGiqB,EAAIC,EAAII,EAAIF,GAC3B,QACK,EAAMpqB,IAAM,EAAMA,GAAKiqB,EAAG,GAAK,EAAMjqB,GAAK,EAAMA,GAAKsqB,EAAG,GAAKtqB,EAAIA,EAAIkqB,EAAG,IACxE,EAAMlqB,IAAM,EAAMA,GAAKiqB,EAAG,GAAK,EAAMjqB,GAAK,EAAMA,GAAKsqB,EAAG,GAAKtqB,EAAIA,EAAIkqB,EAAG,KAmB7E/2B,EAAGf,EAAQ8F,SAASqyB,SAhBxB,SAAiBvqB,EAAGiqB,EAAIC,EAAII,EAAIE,GAC5B,IAAIlmB,EAAK,EAAMtE,EACf,OACIiC,EAAIqC,EAAI,GAAO2lB,EAAG,GACd,EAAMjqB,EAAIiC,EAAIqC,EAAI,GAAOgmB,EAAG,GAC5B,EAAMroB,EAAIjC,EAAG,GAAOsE,EAAKkmB,EAAG,GAC5BvoB,EAAIjC,EAAG,GAAOkqB,EAAG,GACrBjoB,EAAIqC,EAAI,GAAO2lB,EAAG,GACd,EAAMjqB,EAAIiC,EAAIqC,EAAI,GAAOgmB,EAAG,GAC5B,EAAMroB,EAAIjC,EAAG,GAAOsE,EAAKkmB,EAAG,GAC5BvoB,EAAIjC,EAAG,GAAOkqB,EAAG,KAOzB/2B,GACJ,SAASs3B,EAAc55B,GACnB,OACIV,EAAGU,EAAM,GACTT,EAAGS,EAAM,IAGjB,SAAS65B,EAAa75B,GAClB,OAAQA,EAAMV,EAAGU,EAAMT,GAS3B,IAwHI+C,EAxHAw3B,EAAkB,GAuHtBt9B,EAAQu9B,YAtHR,SAAqBj4B,GACjB,IAAIk4B,EAAal4B,EAAMk4B,WAAY13B,EAAKR,EAAMm4B,gBAAiBA,OAAyB,IAAP33B,EAAgB,EAAIA,EAAI43B,EAAYp4B,EAAMo4B,UAAWl3B,EAAOlB,EAAMkB,KAC/Im3B,EAAcjB,EAAcp3B,EAAMkB,MAClCD,EAAiB,SAAUq3B,GAC3B,IAAIC,EAAiBD,EAAKtB,WAAa,EAAImB,EACvCK,EAAeF,EAAKrB,SAAW,EAAIkB,EACnC35B,EAAS,IAAIsI,EAASzJ,QACtBM,OAAQ26B,EAAKtB,WACbt5B,MAAO46B,EAAKtB,WACZx5B,EAAG86B,EAAKlrB,MAAM,GAAKmrB,EACnB96B,EAAG66B,EAAKlrB,MAAM,GAAKmrB,IAgCvB,OA9BA/5B,EAAOL,YAAY,IAAI2I,EAASzJ,QAC5BM,OAAQ26B,EAAKrB,SACbv5B,MAAO46B,EAAKrB,SACZz5B,EAAG86B,EAAKn2B,IAAI,GAAKq2B,EACjB/6B,EAAG66B,EAAKn2B,IAAI,GAAKq2B,KAEjBx4B,EAAMkB,OAASzB,EAAQ8F,SAASmyB,OAChCl5B,EAAOL,aACHX,EAAG86B,EAAKvB,QAAQ,GAAG,GACnBt5B,EAAG66B,EAAKvB,QAAQ,GAAG,KAGlB/2B,EAAMkB,OAASzB,EAAQ8F,SAASqyB,UACrCp5B,EAAOL,aACHX,EAAG86B,EAAKvB,QAAQ,GAAG,GACnBt5B,EAAG66B,EAAKvB,QAAQ,GAAG,KAEvBv4B,EAAOL,aACHX,EAAG86B,EAAKvB,QAAQ,GAAG,GACnBt5B,EAAG66B,EAAKvB,QAAQ,GAAG,MAGvBmB,IAAez4B,EAAQ+F,eAAeizB,SACtCj6B,EAAOhB,EAAIgnB,OAAOE,iBAAmB,EACrClmB,EAAOd,MAAQ8mB,OAAOC,kBAEtByT,IAAez4B,EAAQ+F,eAAekzB,SACtCl6B,EAAOf,EAAI+mB,OAAOE,iBAAmB,EACrClmB,EAAOb,OAAS6mB,OAAOC,kBAEpBjmB,GAEX,OAAI45B,IAAc34B,EAAQ6F,cAAcqzB,cAEhC13B,eAAgBA,EAChBH,QAAS,SAAUw3B,EAAMp6B,EAAO6H,GAE5B,IAAI2M,IADJxU,EAAQ6H,EAAKsC,cAAcnK,IACRV,EAAGU,EAAMT,GACxBm7B,EAAe,EACfC,EAAkBrU,OAAOsU,UACzBC,EAAqB,EACrBC,EAAwBxU,OAAOsU,UAC/B1rB,EAAQrH,EAAKsC,cAAcyvB,EAAcQ,EAAKlrB,QAC9CjL,EAAM4D,EAAKsC,cAAcyvB,EAAcQ,EAAKn2B,MAC5C82B,GAAY,EAAG,GACfC,GAAY,EAAG,GACfh4B,IAASzB,EAAQ8F,SAASmyB,OAC1BuB,EAAW9pB,EAAS5B,KAAKwqB,EAAa3qB,GAAQkrB,EAAKvB,QAAQ,IAEtD71B,IAASzB,EAAQ8F,SAASqyB,UAC/BqB,EAAW9pB,EAAS5B,KAAKwqB,EAAa3qB,GAAQkrB,EAAKvB,QAAQ,IAC3DmC,EAAW/pB,EAAS5B,KAAKwqB,EAAa51B,GAAMm2B,EAAKvB,QAAQ,KAE7D,IAAIoC,EAAapB,EAAa3qB,GAC1BgsB,EAAWrB,EAAa51B,GAC5B82B,EAAWX,EAAKvB,QAAQ30B,OAAS,EAAI62B,GAAY,EAAG,GACpDC,EAAWZ,EAAKvB,QAAQ30B,OAAS,EAAI82B,GAAY,EAAG,GACpD,IAAK,IAAI59B,EAAI,EAAGA,EAAI08B,IAAmB18B,EAAG,CACtC,IAAI+9B,EAAYhB,EAAY/8B,EAAI08B,EAAiBmB,EAAYC,EAAUH,EAAUC,GAC7EI,EAAWnqB,EAAStB,QAAQsB,EAAS1B,UAAUiF,EAAO2mB,IACtDC,EAAWT,GACXE,EAAqBH,EACrBI,EAAwBH,EACxBD,EAAet9B,EACfu9B,EAAkBS,GAEbA,EAAWN,IAChBD,EAAqBz9B,EACrBu9B,EAAkBS,GAG1B,IAAIjsB,EAAIurB,EAAeZ,EACnBuB,GAAajB,EAAKrB,SAAWqB,EAAKtB,YAAc3pB,EAAIirB,EAAKtB,WAC7D,GAAI4B,IAAiBG,EACjB,OAAO,EAEX,IAAIS,EAAenB,EAAYO,EAAeZ,EAAiBmB,EAAYC,EAAUH,EAAUC,GAC3FO,EAAapB,EAAYU,EAAqBf,EAAiBmB,EAAYC,EAAUH,EAAUC,GAEnG,OADAL,EAlGhB,SAAoBzrB,EAAOjL,EAAKtF,GAC5B,IAAI68B,EAASvqB,EAAS1B,UAAUL,EAAOvQ,GACnC88B,EAAgBxqB,EAAS1B,UAAUtL,EAAKiL,GACxCwsB,GAAcD,EAAc,IAAKA,EAAc,IAEnD,OADet7B,KAAKC,IAAI6Q,EAASxB,KAAK+rB,EAAQE,IAAezqB,EAAStB,QAAQ8rB,GA8FhDE,CAAWL,EAAcC,EAAY/mB,KACnDvD,EAASxB,KAAKwB,EAAS1B,UAAUgsB,EAAYD,GAAerqB,EAAS1B,UAAUiF,EAAO8mB,IAAiB,IAGpGX,EAAkBU,EAAY,EAAMpB,KAKnDl3B,eAAgBA,EAChBH,QAAS,SAAUw3B,EAAMp6B,EAAO4xB,GAI5B,IAHA,IAAIpd,GAASxU,EAAMV,EAAGU,EAAMT,GACxBm7B,EAAe,EACfC,EAAkBrU,OAAOsU,UACpBx9B,EAAI,EAAGA,EAAI08B,IAAmB18B,EAAG,CACtC,IAAI+9B,EAAYhB,EAAY/8B,EAAI08B,EAAiBM,EAAKlrB,MAAOkrB,EAAKn2B,IAAKm2B,EAAKvB,QAAQ30B,OAAS,EAAIk2B,EAAKvB,QAAQ,IAAM,EAAG,GAAIuB,EAAKvB,QAAQ30B,OAAS,EAAIk2B,EAAKvB,QAAQ,IAAM,EAAG,IACvKuC,EAAWnqB,EAAStB,QAAQsB,EAAS1B,UAAUiF,EAAO2mB,IACtDC,EAAWT,IACXD,EAAet9B,EACfu9B,EAAkBS,GAG1B,IAAIjsB,EAAIurB,EAAeZ,EAEvB,OAAOa,IADUP,EAAKrB,SAAWqB,EAAKtB,YAAc3pB,EAAIirB,EAAKtB,YACxB,mCCnKjD,IAAIj4B,EAAaxB,MAAQA,KAAKwB,WAAe,WACzC,IAAIC,EAAgBhD,OAAOiD,iBACpBC,wBAA2BC,OAAS,SAAUvD,EAAGwD,GAAKxD,EAAEsD,UAAYE,IACvE,SAAUxD,EAAGwD,GAAK,IAAK,IAAIvC,KAAKuC,EAAOA,EAAExC,eAAeC,KAAIjB,EAAEiB,GAAKuC,EAAEvC,KACzE,OAAO,SAAUjB,EAAGwD,GAEhB,SAASC,IAAO9B,KAAK+B,YAAc1D,EADnCoD,EAAcpD,EAAGwD,GAEjBxD,EAAEe,UAAkB,OAANyC,EAAapD,OAAOuD,OAAOH,IAAMC,EAAG1C,UAAYyC,EAAEzC,UAAW,IAAI0C,IAP1C,GAU7CrD,OAAOC,eAAevB,EAAS,cAAgB4B,OAAO,IACtD,IAAIkD,EAAQpE,EAAQ,GAChBo4B,EAAUp4B,EAAQ,GAClBqE,EAAUrE,EAAQ,GAClBsE,EAAStE,EAAQ,GACjB0+B,EAAiB1+B,EAAQ,IACzB+6B,EAAU/6B,EAAQ,IAItB,IAuKIoF,EAvKAu5B,IAAUv5B,MACP21B,EAAQ5wB,SAAS8xB,MAAQj8B,EAAQ,IACpCoF,EAAG21B,EAAQ5wB,SAASmyB,QAAUt8B,EAAQ,IACtCoF,EAAG21B,EAAQ5wB,SAASqyB,SAAWx8B,EAAQ,IACvCoF,GACAw5B,EAAS5+B,EAAQ,IACjB6+B,EAAW7+B,EAAQ,IACnB8+B,EAAS9+B,EAAQ,IACjB++B,EAAa,SAAUp6B,GAEvB,SAASo6B,IACL,OAAkB,OAAXp6B,GAAmBA,EAAOwM,MAAMhP,KAAMoH,YAAcpH,KAyJ/D,OA3JAwB,EAAUo7B,EAAWp6B,GAIrBo6B,EAAUx9B,UAAUkE,0BAA4B,WAC5C,OAAOi5B,EAAe7B,YAAY16B,KAAKyC,QAE3Cm6B,EAAUx9B,UAAUuG,WAAa,WAc7B,IAbA,IAAI1C,EAAKjD,KAAKyC,MAAO6W,EAAKrW,EAAGswB,YAAaA,OAAqB,IAAPja,EAAgB,WAAc,OAAO,GAAOA,EAAI3V,EAAOV,EAAGU,KAAMk5B,EAAK55B,EAAG43B,UAAWA,OAAmB,IAAPgC,EAAgBjE,EAAQ7wB,cAAc5E,KAAO05B,EAChMC,EAAen5B,IAASi1B,EAAQ5wB,SAAS8xB,KAAO,EAAI,GACpDzD,IAAkB0G,GACdzG,EAAG,IAEW,EAAfwG,EAAmB,IAAM,EAC5BC,GACAC,IAAuB/H,GACnBqB,EAAG,IAEW,EAAfwG,EAAmB,GAAK,EAC3B7H,GACAzE,EAAO,EACFzyB,EAAI,EAAGA,EAAmB,EAAf++B,IAAoB/+B,EACpCs4B,EAAet4B,EAAI,GAAKyyB,EACxBwM,EAAoBj/B,EAAI,GAAK+C,KAAKyjB,MAAMxmB,EAAI,IAAM++B,EAAe,GACjEtM,IAAS,EAEb,IA4GIuM,EAAI9H,EA5GJjvB,EAAK7D,EAAOsL,eAAeotB,IAAcjC,EAAQ7wB,cAAc5E,KAAOs5B,EAASC,GAC/E/hB,WAAY,gBACZkf,cAAe2C,EAAO74B,KAEtBrF,KAAM,aACNqQ,QAAS,mBAEb,OACI/I,GAAI+2B,EACJ92B,qBAEQK,MAAO,EACPC,WAAYjE,EAAQ1C,mBAAmBia,IACvCnb,KAAM,QACN8H,KAAMlE,EAAQzC,sBAAsBia,IACpC1U,OAAQ,SAAUxG,GAAK,OAAOA,EAAEqR,SAGhC3J,MAAO,EACPC,WAAYjE,EAAQ1C,mBAAmBma,MACvCrb,KAAM,MACN8H,KAAMlE,EAAQzC,sBAAsBia,IACpC1U,OAAQ,SAAUxG,GAAK,OAAOA,EAAEoG,OAGhCsB,MAAO,EACPC,WAAYjE,EAAQ1C,mBAAmBia,IACvCnb,KAAM,aACN8H,KAAMlE,EAAQzC,sBAAsBga,IACpCzU,OAAQ,SAAUxG,GAAK,OAAQA,EAAEi7B,eAGjCvzB,MAAO,EACPC,WAAYjE,EAAQ1C,mBAAmBka,IACvCpb,KAAM,WACN8H,KAAMlE,EAAQzC,sBAAsBga,IACpCzU,OAAQ,SAAUxG,GAAK,OAAQA,EAAEk7B,aAGjCxzB,MAAO,EACPC,WAAYjE,EAAQ1C,mBAAmBma,MACvCrb,KAAM,QACN8H,KAAMlE,EAAQzC,sBAAsBga,IACpCzU,OAAQ,SAAUxG,GAAK,OAAQA,EAAEmE,UAGjCuD,MAAO,EACPC,WAAYjE,EAAQ1C,mBAAmBia,IACvCnb,KAAM,aACN8H,KAAMlE,EAAQzC,sBAAsBma,KACpC5U,OAAQ,SAAUxG,GAAK,OAAOA,EAAE86B,cAGhCpzB,MAAO,EACPC,WAAYjE,EAAQ1C,mBAAmBia,IACvCnb,KAAM,WACN8H,KAAMlE,EAAQzC,sBAAsBma,KACpC5U,OAAQ,SAAUxG,GAAK,OAAOA,EAAE+6B,WAEpC51B,IAASi1B,EAAQ5wB,SAAS8xB,MAElB5zB,MAAO,EACPC,WAAYjE,EAAQ1C,mBAAmBia,IACvCnb,KAAM,UACN8H,KAAMlE,EAAQzC,sBAAsBma,KACpC5U,OAAQ,SAAUsY,GAAM,OAAQ,EAAG,EAAG,EAAG,KAE3C,KACN3Z,IAASi1B,EAAQ5wB,SAASmyB,QAElBj0B,MAAO,EACPC,WAAYjE,EAAQ1C,mBAAmBia,IACvCnb,KAAM,UACN8H,KAAMlE,EAAQzC,sBAAsBma,KACpC5U,OAAQ,SAAUxG,GAAK,OAAQA,EAAEg7B,QAAQ,GAAG,GAAIh7B,EAAEg7B,QAAQ,GAAG,GAAI,EAAG,KAEtE,KACN71B,IAASi1B,EAAQ5wB,SAASqyB,SAElBn0B,MAAO,EACPC,WAAYjE,EAAQ1C,mBAAmBia,IACvCnb,KAAM,UACN8H,KAAMlE,EAAQzC,sBAAsBma,KACpC5U,OAAQ,SAAUxG,GAAK,OAzH/C,SAA2BO,GACvB,OAAQA,EAAM,GAAG,GAAIA,EAAM,GAAG,GAAIA,EAAM,GAAG,GAAIA,EAAM,GAAG,IAwHNk+B,CAAkBz+B,EAAEg7B,WAEpD,MAEV/0B,WAEQnG,KAAM,cACN8H,KAAMlE,EAAQxC,YAAY+Z,IAC1BzU,OAAQ,SAAUk4B,GAAY,OAAQ3J,QAG9CztB,mBAEQxH,KAAM,WACN8H,KAAMlE,EAAQvC,oBAAoBga,MAClC3U,OAAQ,SAAU8xB,GAAU,OACxBT,EAAeS,GACfkG,EAAoBlG,GACL,EAAfgG,MAIZ/2B,YAA4B,EAAf+2B,EAAmB,EAChC92B,GAAIA,EAAG0H,SAIfkvB,EAAUx9B,UAAUiG,aAAe,WAC/B,OACIC,SAAUrD,EAAMoH,sBAChB7D,UAAWvD,EAAMwD,OAGzBm3B,EAAUx9B,UAAUsG,mBAAqB,WACrC,OACIyxB,oBAAoB,EACpBC,aAAa,IAGrBwF,EAAU55B,cACN23B,WAAY/B,EAAQ3wB,eAAe7E,IACnCuB,KAAM,IAAIxC,EAAOg7B,iBACjBj2B,IAAK,OACL2zB,UAAWjC,EAAQ7wB,cAAc5E,KACjCQ,KAAMi1B,EAAQ5wB,SAAS8xB,MAEpB8C,EA5JM,CA6Jf3G,EAAQ1zB,OACVpF,EAAQy/B,UAAYA,gCC1LpB,SAASr7B,EAASpD,GACd,IAAK,IAAImB,KAAKnB,EAAQhB,EAAQkC,eAAeC,KAAInC,EAAQmC,GAAKnB,EAAEmB,IAEpEb,OAAOC,eAAevB,EAAS,cAAgB4B,OAAO,IACtDwC,EAAS1D,EAAQ,KACjB0D,EAAS1D,EAAQ,KACjB0D,EAAS1D,EAAQ,mCCNjB,IAAI2D,EAAaxB,MAAQA,KAAKwB,WAAe,WACzC,IAAIC,EAAgBhD,OAAOiD,iBACpBC,wBAA2BC,OAAS,SAAUvD,EAAGwD,GAAKxD,EAAEsD,UAAYE,IACvE,SAAUxD,EAAGwD,GAAK,IAAK,IAAIvC,KAAKuC,EAAOA,EAAExC,eAAeC,KAAIjB,EAAEiB,GAAKuC,EAAEvC,KACzE,OAAO,SAAUjB,EAAGwD,GAEhB,SAASC,IAAO9B,KAAK+B,YAAc1D,EADnCoD,EAAcpD,EAAGwD,GAEjBxD,EAAEe,UAAkB,OAANyC,EAAapD,OAAOuD,OAAOH,IAAMC,EAAG1C,UAAYyC,EAAEzC,UAAW,IAAI0C,IAP1C,GAUzCiF,EAAc/G,MAAQA,KAAK+G,YAAe,SAAUC,EAAYC,EAAQC,EAAKC,GAC7E,IAA2H9I,EAAvHD,EAAIgJ,UAAUvC,OAAQ/F,EAAIV,EAAI,EAAI6I,EAAkB,OAATE,EAAgBA,EAAO1I,OAAO4I,yBAAyBJ,EAAQC,GAAOC,EACrH,GAAuB,iBAAZG,SAAoD,mBAArBA,QAAQC,SAAyBzI,EAAIwI,QAAQC,SAASP,EAAYC,EAAQC,EAAKC,QACpH,IAAK,IAAIpJ,EAAIiJ,EAAWnC,OAAS,EAAG9G,GAAK,EAAGA,KAASM,EAAI2I,EAAWjJ,MAAIe,GAAKV,EAAI,EAAIC,EAAES,GAAKV,EAAI,EAAIC,EAAE4I,EAAQC,EAAKpI,GAAKT,EAAE4I,EAAQC,KAASpI,GAChJ,OAAOV,EAAI,GAAKU,GAAKL,OAAOC,eAAeuI,EAAQC,EAAKpI,GAAIA,GAEhEL,OAAOC,eAAevB,EAAS,cAAgB4B,OAAO,IACtD,IAAIyI,EAAS3J,EAAQ,GAEjBu/B,EAAkB,SAAU56B,GAE5B,SAAS46B,EAAer9B,GACpB,IAAI2C,EAAQF,EAAOtE,KAAK8B,KAAMD,IAAYC,KAW1C,OAVA0C,EAAMilB,OAAS,EAAK,EAAK,EAAK,GAC9BjlB,EAAM0zB,OAAS,EACf1zB,EAAMzC,EAAI,EACVyC,EAAMxC,EAAI,EACVwC,EAAMC,MAAQ,EACdD,EAAMilB,MAAQ5nB,EAAQ4nB,OAASjlB,EAAMilB,MACrCjlB,EAAM0zB,OAASr2B,EAAQq2B,QAAU1zB,EAAM0zB,OACvC1zB,EAAMzC,EAAIF,EAAQE,GAAKyC,EAAMzC,EAC7ByC,EAAMxC,EAAIH,EAAQG,GAAKwC,EAAMxC,EAC7BwC,EAAMC,MAAQ5C,EAAQ4C,OAASD,EAAMC,MAC9BD,EAqCX,OAlDAlB,EAAU47B,EAAgB56B,GAe1B/D,OAAOC,eAAe0+B,EAAeh+B,UAAW,SAC5CP,IAAK,WACD,OAAqB,EAAdmB,KAAKo2B,QAEhBx3B,YAAY,EACZD,cAAc,IAElBF,OAAOC,eAAe0+B,EAAeh+B,UAAW,UAC5CP,IAAK,WACD,OAAqB,EAAdmB,KAAKo2B,QAEhBx3B,YAAY,EACZD,cAAc,IAElBoI,GACIS,EAAOM,YACRs1B,EAAeh+B,UAAW,aAAS,GACtC2H,GACIS,EAAOM,YACRs1B,EAAeh+B,UAAW,cAAU,GACvC2H,GACIS,EAAOM,YACRs1B,EAAeh+B,UAAW,SAAK,GAClC2H,GACIS,EAAOM,YACRs1B,EAAeh+B,UAAW,SAAK,GAClC2H,GACIS,EAAOM,YACRs1B,EAAeh+B,UAAW,aAAS,GACtC2H,GACIS,EAAO8vB,UACR8F,EAAeh+B,UAAW,QAAS,MACtC2H,GACIS,EAAO8vB,UACR8F,EAAeh+B,UAAW,SAAU,MAChCg+B,EAnDW,CADLv/B,EAAQ,GAqDZ4J,UACbtK,EAAQigC,eAAiBA,iBCzEzBhgC,EAAAD,QAAA,g6BCAAC,EAAAD,QAAA,sjBCCA,IAAIqE,EAAaxB,MAAQA,KAAKwB,WAAe,WACzC,IAAIC,EAAgBhD,OAAOiD,iBACpBC,wBAA2BC,OAAS,SAAUvD,EAAGwD,GAAKxD,EAAEsD,UAAYE,IACvE,SAAUxD,EAAGwD,GAAK,IAAK,IAAIvC,KAAKuC,EAAOA,EAAExC,eAAeC,KAAIjB,EAAEiB,GAAKuC,EAAEvC,KACzE,OAAO,SAAUjB,EAAGwD,GAEhB,SAASC,IAAO9B,KAAK+B,YAAc1D,EADnCoD,EAAcpD,EAAGwD,GAEjBxD,EAAEe,UAAkB,OAANyC,EAAapD,OAAOuD,OAAOH,IAAMC,EAAG1C,UAAYyC,EAAEzC,UAAW,IAAI0C,IAP1C,GAU7CrD,OAAOC,eAAevB,EAAS,cAAgB4B,OAAO,IACtD,IAAIkD,EAAQpE,EAAQ,GAChBm4B,EAAen4B,EAAQ,GACvBo4B,EAAUp4B,EAAQ,GAClBqE,EAAUrE,EAAQ,GAClBsE,EAAStE,EAAQ,GACjBw/B,EAAe,SAAU76B,GAEzB,SAAS66B,IACL,OAAkB,OAAX76B,GAAmBA,EAAOwM,MAAMhP,KAAMoH,YAAcpH,KAyH/D,OA3HAwB,EAAU67B,EAAa76B,GAIvB66B,EAAYj+B,UAAUkE,0BAA4B,WAC9C,IAAIZ,EAAQ1C,KAEZ,OACI0D,eAAgB,SAAU45B,GACtB,OAAO,IAAItH,EAAal2B,QACpBM,OAAwB,EAAhBk9B,EAAOlH,OACfj2B,MAAuB,EAAhBm9B,EAAOlH,OACdn2B,EAAGq9B,EAAOr9B,EAAIq9B,EAAOlH,OACrBl2B,EAAGo9B,EAAOp9B,EAAIo9B,EAAOlH,UAG7B7yB,QAAS,SAAU+5B,EAAQ38B,EAAO6H,GAC9B,IAAI+0B,EAAqB/0B,EAAKsC,cAAcwyB,GACxCE,EAAch1B,EAAKsC,cAAcnK,GACjC7B,EAAIw+B,EAAOlH,QAAU1zB,EAAMD,MAAM8wB,aAbzB,WAAc,OAAO,MAc7Bxb,GACAylB,EAAYv9B,EAAIs9B,EAAmBt9B,EACnCu9B,EAAYt9B,EAAIq9B,EAAmBr9B,GAEvC,OAAO6X,EAAM,GAAKA,EAAM,GAAKA,EAAM,GAAKA,EAAM,GAAKjZ,EAAIA,KAInEu+B,EAAYj+B,UAAUuG,WAAa,WAC/B,IAAI4tB,EAAcvzB,KAAKyC,MAAM8wB,aAAgB,WAAc,OAAO,GAC9DkK,EAAaz9B,KAAKyC,MAAMi7B,YACxBC,EAAgBF,EAAWG,OAAQC,EAAgBJ,EAAWrH,OAAQ0H,EAAeL,EAAW9V,MAChG0O,GACAC,EAAG,EACHC,EAAG,EACHC,GAAI,EACJC,EAAG,EACHC,GAAI,EACJC,GAAI,GAEJC,GACAN,GAAI,EACJC,GAAI,EACJC,GAAI,EACJC,EAAG,EACHC,EAAG,EACHC,EAAG,GAEP,OACI/wB,GAAI/H,EAAQ,IACZgI,qBAEQK,MAAO,EACPC,WAAYjE,EAAQ1C,mBAAmBia,IACvCS,OAAQyjB,EACRr/B,KAAM,SACN8H,KAAMlE,EAAQzC,sBAAsBia,IACpC1U,OAAQ,SAAUs4B,GAAU,OAAQA,EAAOr9B,EAAGq9B,EAAOp9B,MAGrDgG,MAAO,EACPC,WAAYjE,EAAQ1C,mBAAmBma,MACvCO,OAAQ2jB,EACRv/B,KAAM,SACN8H,KAAMlE,EAAQzC,sBAAsBga,IACpCzU,OAAQ,SAAUs4B,GAAU,OAAQA,EAAOlH,WAG3ClwB,MAAO,EACPC,WAAYjE,EAAQ1C,mBAAmBoa,KACvCtb,KAAM,QACN8H,KAAMlE,EAAQzC,sBAAsBga,IACpCzU,OAAQ,SAAUs4B,GAAU,OAAQA,EAAO36B,UAG3CuD,MAAO,EACPC,WAAYjE,EAAQ1C,mBAAmBia,IACvCS,OAAQ4jB,EACRx/B,KAAM,QACN8H,KAAMlE,EAAQzC,sBAAsBma,KACpC5U,OAAQ,SAAUs4B,GAAU,OAAOA,EAAO3V,SAGlDljB,WAEQnG,KAAM,cACN8H,KAAMlE,EAAQxC,YAAY+Z,IAC1BzU,OAAQ,SAAUk4B,GAAY,OAAQ3J,QAG9CztB,mBAEQxH,KAAM,WACN8H,KAAMlE,EAAQvC,oBAAoBga,MAClC3U,OAAQ,SAAU8xB,GAAU,OACxBT,EAAeS,GACfF,EAAaE,GACb,MAIZ/wB,YAAa,EACbC,GAAInI,EAAQ,MAGpBw/B,EAAYj+B,UAAUiG,aAAe,WACjC,OACIC,SAAUrD,EAAMoH,sBAChB7D,UAAWvD,EAAMwD,OAGzB43B,EAAYj+B,UAAUsG,mBAAqB,WACvC,OACIyxB,oBAAoB,EACpBC,aAAa,IAGrBiG,EAAYr6B,cACR2B,KAAM,IAAIxC,EAAOg7B,iBACjBY,kBAAmB,EACnB72B,IAAK,GACLqsB,YAAa,WAAc,OAAO,IAE/B8J,EA5HQ,CA6HjBpH,EAAQ1zB,OACVpF,EAAQkgC,YAAcA,gCC9ItB,SAAS97B,EAASpD,GACd,IAAK,IAAImB,KAAKnB,EAAQhB,EAAQkC,eAAeC,KAAInC,EAAQmC,GAAKnB,EAAEmB,IAEpEb,OAAOC,eAAevB,EAAS,cAAgB4B,OAAO,IACtDwC,EAAS1D,EAAQ,KACjB0D,EAAS1D,EAAQ,mCCLjB,SAAS0D,EAASpD,GACd,IAAK,IAAImB,KAAKnB,EAAQhB,EAAQkC,eAAeC,KAAInC,EAAQmC,GAAKnB,EAAEmB,IAEpEb,OAAOC,eAAevB,EAAS,cAAgB4B,OAAO,IACtDwC,EAAS1D,EAAQ,KACjB0D,EAAS1D,EAAQ,KACjB0D,EAAS1D,EAAQ,KACjB0D,EAAS1D,EAAQ,KACjB0D,EAAS1D,EAAQ,KACjB0D,EAAS1D,EAAQ,KACjB0D,EAAS1D,EAAQ,kCCVjB,IAAI2kB,EAAaxiB,MAAQA,KAAKwiB,WAAc,SAAUC,EAASC,EAAYC,EAAGC,GAC1E,OAAO,IAAKD,IAAMA,EAAIE,UAAU,SAAU9d,EAAS+d,GAC/C,SAASC,EAAUhkB,GAAS,IAAMikB,EAAKJ,EAAUK,KAAKlkB,IAAW,MAAOmkB,GAAKJ,EAAOI,IACpF,SAASC,EAASpkB,GAAS,IAAMikB,EAAKJ,EAAA,MAAmB7jB,IAAW,MAAOmkB,GAAKJ,EAAOI,IACvF,SAASF,EAAKI,GAAUA,EAAOC,KAAOte,EAAQqe,EAAOrkB,OAAS,IAAI4jB,EAAE,SAAU5d,GAAWA,EAAQqe,EAAOrkB,SAAWukB,KAAKP,EAAWI,GACnIH,GAAMJ,EAAYA,EAAU5T,MAAMyT,EAASC,QAAmBO,WAGlEM,EAAevjB,MAAQA,KAAKujB,aAAgB,SAAUd,EAASe,GAC/D,IAAsGC,EAAGvjB,EAAG4P,EAAG4T,EAA3GC,GAAMtW,MAAO,EAAGuW,KAAM,WAAa,GAAW,EAAP9T,EAAE,GAAQ,MAAMA,EAAE,GAAI,OAAOA,EAAE,IAAO+T,QAAUC,QAC3F,OAAOJ,GAAMT,KAAMc,EAAK,GAAIC,MAASD,EAAK,GAAIE,OAAUF,EAAK,IAAwB,mBAAXG,SAA0BR,EAAEQ,OAAOC,UAAY,WAAa,OAAOnkB,OAAU0jB,EACvJ,SAASK,EAAK/kB,GAAK,OAAO,SAAU8W,GAAK,OACzC,SAAcsO,GACV,GAAIX,EAAG,MAAM,IAAIY,UAAU,mCAC3B,KAAOV,GAAG,IACN,GAAIF,EAAI,EAAGvjB,IAAM4P,EAAI5P,EAAU,EAARkkB,EAAG,GAAS,SAAWA,EAAG,GAAK,QAAU,YAActU,EAAIA,EAAE5R,KAAKgC,EAAGkkB,EAAG,KAAKf,KAAM,OAAOvT,EAEjH,OADI5P,EAAI,EAAG4P,IAAGsU,GAAM,EAAGtU,EAAE/Q,QACjBqlB,EAAG,IACP,KAAK,EAAG,KAAK,EAAGtU,EAAIsU,EAAI,MACxB,KAAK,EAAc,OAAXT,EAAEtW,SAAkBtO,MAAOqlB,EAAG,GAAIf,MAAM,GAChD,KAAK,EAAGM,EAAEtW,QAASnN,EAAIkkB,EAAG,GAAIA,GAAM,GAAI,SACxC,KAAK,EAAGA,EAAKT,EAAEG,IAAIQ,MAAOX,EAAEE,KAAKS,MAAO,SACxC,QACI,KAAkBxU,GAAZA,EAAI6T,EAAEE,MAAYhf,OAAS,GAAKiL,EAAEA,EAAEjL,OAAS,MAAkB,IAAVuf,EAAG,IAAsB,IAAVA,EAAG,IAAW,CAAET,EAAI,EAAG,SACjG,GAAc,IAAVS,EAAG,MAActU,GAAMsU,EAAG,GAAKtU,EAAE,IAAMsU,EAAG,GAAKtU,EAAE,IAAM,CAAE6T,EAAEtW,MAAQ+W,EAAG,GAAI,MAC9E,GAAc,IAAVA,EAAG,IAAYT,EAAEtW,MAAQyC,EAAE,GAAI,CAAE6T,EAAEtW,MAAQyC,EAAE,GAAIA,EAAIsU,EAAI,MAC7D,GAAItU,GAAK6T,EAAEtW,MAAQyC,EAAE,GAAI,CAAE6T,EAAEtW,MAAQyC,EAAE,GAAI6T,EAAEG,IAAInX,KAAKyX,GAAK,MACvDtU,EAAE,IAAI6T,EAAEG,IAAIQ,MAChBX,EAAEE,KAAKS,MAAO,SAEtBF,EAAKZ,EAAKtlB,KAAKukB,EAASkB,GAC1B,MAAOT,GAAKkB,GAAM,EAAGlB,GAAIhjB,EAAI,EAjBrB,QAiBoCujB,EAAI3T,EAAI,EACtD,GAAY,EAARsU,EAAG,GAAQ,MAAMA,EAAG,GAAI,OAASrlB,MAAOqlB,EAAG,GAAKA,EAAG,QAAK,EAAQf,MAAM,GArB9BL,EAAMhkB,EAAG8W,OAwB7DrX,OAAOC,eAAevB,EAAS,cAAgB4B,OAAO,IACtD,IAAIi/B,EAAyBngC,EAAQ,IACrC,SAASo/B,EAAkBzX,GACvB,OAAKA,GAIDA,EAAQ0C,QAAQjoB,EAChBulB,EAAQ0C,QAAQhoB,EAChBslB,EAAQ6C,QAAQpoB,EAChBulB,EAAQ6C,QAAQnoB,IANR,EAAG,EAAG,EAAG,GASzB,IAAI+9B,EAAwB,WACxB,SAASA,EAAqBl+B,GAC1BC,KAAKk+B,YAAc,GACnBl+B,KAAKm+B,aAAe,IAAIt7B,IACxB7C,KAAKo+B,cAAgB,IAAIv7B,IACzB7C,KAAKq+B,aAAet+B,EAAQs+B,aAyGhC,OAvGAJ,EAAqB7+B,UAAUk/B,gBAAkB,WAC7C,OAAO9b,EAAUxiB,UAAM,OAAQ,EAAQ,WACnC,IAAIu+B,EAAYhiB,EAASiiB,EAAQzlB,EAAI9V,EAAIqW,EAAI4kB,EAAaO,EAC1D,OAAOlb,EAAYvjB,KAAM,SAAU68B,GAC/B,OAAQA,EAAGxvB,OACP,KAAK,EACDkxB,GAAa,EACbhiB,EAAU,SAAU2hB,EAAaO,GAC7B,IAAIC,EAAUC,EACd,OAAOpb,EAAYvjB,KAAM,SAAUiD,GAC/B,OAAQA,EAAGoK,OACP,KAAK,EACD,OAAMoxB,EAAU55B,OAAS,GACzB05B,GAAa,EACbG,EAAWD,EAAUrvB,MAAM,GAC3BqvB,EAAU55B,OAAS,GACX,EAAG25B,EAAOH,aAAaO,YAAYV,EAAaQ,MAJnB,EAAG,GAK5C,KAAK,EACDz7B,EAAG2gB,QACH+a,EAAkBH,EAAOJ,cAAcv/B,IAAIq/B,KAEvCQ,EAASx5B,QAAQ,SAAU0W,GACvB,IAAIijB,EAAUF,EAAgB9/B,IAAI+c,GAElC,GADA+iB,EAAgBG,OAAOljB,GACnBijB,EACA,IAAK,IAAI9lB,EAAK,EAAGgmB,EAAYF,EAAS9lB,EAAKgmB,EAAUl6B,OAAQkU,IAAM,CAC/D,IAAI9V,EAAK87B,EAAUhmB,GAAKnQ,EAAQ3F,EAAG,GAAIuB,EAAWvB,EAAG,GACjD2F,EAAMzE,eAAeW,YAAYN,KACjCA,EAASqD,QAAS,MAMtC5E,EAAGoK,MAAQ,EACf,KAAK,EAAG,OAAQ,OAI5BmxB,EAASx+B,KACT+Y,EAAK,EAAG9V,EAAKrB,MAAMo9B,KAAKh/B,KAAKm+B,aAAac,WAC1CpC,EAAGxvB,MAAQ,EACf,KAAK,EACD,OAAM0L,EAAK9V,EAAG4B,QACdyU,EAAKrW,EAAG8V,GAAKmlB,EAAc5kB,EAAG,GAAImlB,EAAYnlB,EAAG,IACzC,EAAGiD,EAAQ2hB,EAAaO,MAFD,EAAG,GAGtC,KAAK,EACD5B,EAAGjZ,OACHiZ,EAAGxvB,MAAQ,EACf,KAAK,EAED,OADA0L,KACQ,EAAG,GACf,KAAK,EAAG,OAAQ,EAAGwlB,SAKnCN,EAAqB7+B,UAAU8E,QAAU,WACrClE,KAAKq+B,aAAan6B,WAEtB+5B,EAAqB7+B,UAAUyc,gBAAkB,SAAU3U,GACvD,IAAIb,EAAQrG,KAAKq+B,aAAaxiB,gBAAgB3U,GAC9C,OAAIb,EACOA,EAAMmf,QAEV,MAEXyY,EAAqB7+B,UAAUy/B,QAAU,SAAUj2B,EAAOpE,EAAUoX,GAChE,IAAI4J,EAAU5J,EAAS4J,QACvB,GAAIA,EACA,OAAOyX,EAAkBzX,GAE7B,GAAI5J,aAAoBoiB,EAAuB5wB,qBACtCwO,EAASvO,MAAMsY,KAChB,OAAOsX,EAAkBzX,GAGjC,IAAI0Z,EAAgBl/B,KAAKo+B,cAAcv/B,IAAImB,KAAKk+B,aAChD,GAAIgB,EAAe,CACf,IAAIC,EAAmBD,EAAcrgC,IAAI+c,GACzC,GAAIujB,EAGA,OAFAA,EAAiBxyB,MAAM/D,EAAOpE,IAC9BA,EAASqD,QAAS,EACXo1B,EAAkBzX,QAI7B0Z,EAAgB,IAAIr8B,IACpB7C,KAAKo+B,cAAczyB,IAAI3L,KAAKk+B,YAAagB,GAE7C16B,EAASqD,QAAS,EAClB,IAAI62B,EAAW1+B,KAAKm+B,aAAat/B,IAAImB,KAAKk+B,aAO1C,OANKQ,IACDA,KACA1+B,KAAKm+B,aAAaxyB,IAAI3L,KAAKk+B,YAAaQ,IAE5CA,EAAS/xB,KAAKiP,GACdsjB,EAAcvzB,IAAIiQ,IAAYhT,EAAOpE,KAC9By4B,EAAkBzX,IAE7ByY,EAAqB7+B,UAAUggC,eAAiB,SAAUn4B,GACtDjH,KAAKk+B,YAAcj3B,GAEhBg3B,EA9GiB,GAgH5B9gC,EAAQ8gC,qBAAuBA,gCChK/B,IAAIz8B,EAAaxB,MAAQA,KAAKwB,WAAe,WACzC,IAAIC,EAAgBhD,OAAOiD,iBACpBC,wBAA2BC,OAAS,SAAUvD,EAAGwD,GAAKxD,EAAEsD,UAAYE,IACvE,SAAUxD,EAAGwD,GAAK,IAAK,IAAIvC,KAAKuC,EAAOA,EAAExC,eAAeC,KAAIjB,EAAEiB,GAAKuC,EAAEvC,KACzE,OAAO,SAAUjB,EAAGwD,GAEhB,SAASC,IAAO9B,KAAK+B,YAAc1D,EADnCoD,EAAcpD,EAAGwD,GAEjBxD,EAAEe,UAAkB,OAANyC,EAAapD,OAAOuD,OAAOH,IAAMC,EAAG1C,UAAYyC,EAAEzC,UAAW,IAAI0C,IAP1C,GAU7CrD,OAAOC,eAAevB,EAAS,cAAgB4B,OAAO,IACtD,IAAImD,EAAUrE,EAAQ,GAEtB,SAAS6W,EAAUzL,GACf,OAAOC,QAAQD,GAEnB,IAAIo2B,EAAoB,SAAU78B,GAE9B,SAAS68B,EAAiBC,GACtB,IAAI58B,EAAQF,EAAOtE,KAAK8B,OAASA,KAGjC,OAFA0C,EAAM68B,OAAS,IAAI18B,IACnBH,EAAM48B,WAAaA,EACZ58B,EAqGX,OA1GAlB,EAAU69B,EAAkB78B,GAO5B68B,EAAiBjgC,UAAUogC,wBAA0B,SAAUtc,GAE3D,IADA,IAAIuc,EAAoB,IAAI58B,IACnBkW,EAAK,EAAG9V,EAAKjD,KAAKs/B,WAAYvmB,EAAK9V,EAAG4B,OAAQkU,IAAM,CACzD,IAAI2mB,EAAYz8B,EAAG8V,GACnB0mB,EAAkB9zB,IAAI+zB,EAAUl3B,KAAKZ,GAAI83B,GAE7C,OAAOxc,EAAEhK,gBACJrD,IAAI,SAAU8pB,GAAY,OAAOF,EAAkB5gC,IAAI8gC,EAASn3B,KAAKZ,MACrEmO,OAAOrB,IAEhB2qB,EAAiBjgC,UAAUwgC,iBAAmB,SAAU1c,GAEpD,IADA,IAAI2c,EAAoB,IAAIh9B,IACnBkW,EAAK,EAAG9V,EAAKigB,EAAEhK,gBAAiBH,EAAK9V,EAAG4B,OAAQkU,IAAM,CAC3D,IAAI4mB,EAAW18B,EAAG8V,GAClB8mB,EAAkBl0B,IAAIg0B,EAASn3B,KAAKZ,GAAI+3B,EAASxqB,OAErD,OAAO0qB,GAEXR,EAAiBjgC,UAAUoZ,YAAc,SAAU0K,EAAGrL,GAClD7X,KAAK8/B,kBAAkB5c,EAAG,SAAUta,EAAOJ,EAAM2M,GAC7C,OAAOvM,EAAM5E,aAAa+7B,iBAAiBv3B,EAAM2M,EAAO0C,MAGhEwnB,EAAiBjgC,UAAU8Y,WAAa,SAAUgL,EAAG8c,GACjDhgC,KAAK8/B,kBAAkB5c,EAAG,SAAUta,EAAOJ,EAAM2M,GAC7C,OAAOvM,EAAM5E,aAAai8B,gBAAgBz3B,EAAM2M,MAGxDkqB,EAAiBjgC,UAAU0gC,kBAAoB,SAAU5c,EAAGgd,GAGxD,IAFA,IAAIZ,EAAat/B,KAAKw/B,wBAAwBtc,GAC1C2c,EAAoB7/B,KAAK4/B,iBAAiB1c,GACrCnK,EAAK,EAAGonB,EAAeb,EAAYvmB,EAAKonB,EAAat7B,OAAQkU,IAAM,CACxE,IAAI2mB,EAAYS,EAAapnB,GAC7B/Y,KAAKogC,gBAAgBV,EAAWG,EAAmBK,GAEvD,OAAOZ,GAEXD,EAAiBjgC,UAAUwY,gBAAkB,SAAUsL,EAAGrL,GACtD7X,KAAK8/B,kBAAkB5c,EAAG,SAAUta,EAAOJ,EAAM2M,GAC7C,OAAOvM,EAAM5E,aAAa4T,gBAAgBpP,EAAM2M,EAAO0C,MAG/DwnB,EAAiBjgC,UAAUmZ,cAAgB,SAAU2K,EAAGrL,GACpD7X,KAAK8/B,kBAAkB5c,EAAG,SAAUta,EAAOJ,EAAM2M,GAC7C,OAAOvM,EAAM5E,aAAauU,cAAc/P,EAAM2M,EAAO0C,MAG7DwnB,EAAiBjgC,UAAUkZ,gBAAkB,SAAU2c,KAEvDoK,EAAiBjgC,UAAU8X,eAAiB,SAAUgM,GAClD,IAAIxgB,EAAQ1C,KACR6/B,EAAoB7/B,KAAK4/B,iBAAiB1c,GAC1CnY,EAASmY,EAAEnY,OAAOoK,MACtBnV,KAAKu/B,OAAOr6B,QAAQ,SAAUm7B,EAAOX,GACjCG,EAAkBl0B,IAAI+zB,EAAUl3B,KAAKZ,GAAI83B,EAAUl3B,KAAKyB,aAAac,IACrErI,EAAM09B,gBAAgBV,EAAWG,EAAmB,SAAUj3B,EAAOJ,EAAM2M,GACvE,OAAOvM,EAAM5E,aAAakT,eAAe1O,EAAM2M,OAGvDnV,KAAKu/B,OAAOe,SAEhBjB,EAAiBjgC,UAAUgY,gBAAkB,SAAU8L,GACnD,IAAIxgB,EAAQ1C,KACRugC,EAAgBvgC,KAAK8/B,kBAAkB5c,EAAG,SAAUta,EAAOJ,EAAM2M,GACjE,OAAOvM,EAAM5E,aAAaoT,gBAAgB5O,EAAM2M,KAEhD0qB,EAAoB7/B,KAAK4/B,iBAAiB1c,GAC1CnY,EAASmY,EAAEnY,OAAOoK,MAClBqrB,EAAoB,IAAI39B,IAC5B09B,EAAcr7B,QAAQ,SAAU4Q,GAAK,OAAO0qB,EAAkB70B,IAAImK,GAAG,KACrE0qB,EAAkBt7B,QAAQ,SAAUm7B,EAAOX,GAClCh9B,EAAM68B,OAAO1gC,IAAI6gC,IAClBh9B,EAAM09B,gBAAgBV,EAAWG,EAAmB,SAAUj3B,EAAOJ,EAAM2M,GACvE,OAAOvM,EAAM5E,aAAasU,gBAAgB9P,EAAM2M,OAI5DnV,KAAKu/B,OAAOr6B,QAAQ,SAAUm7B,EAAOX,GAC5Bc,EAAkB3hC,IAAI6gC,KACvBG,EAAkBl0B,IAAI+zB,EAAUl3B,KAAKZ,GAAI83B,EAAUl3B,KAAKyB,aAAac,IACrErI,EAAM09B,gBAAgBV,EAAWG,EAAmB,SAAUj3B,EAAOJ,EAAM2M,GAAS,OAAOvM,EAAM5E,aAAakT,eAAe1O,EAAM2M,QAG3InV,KAAKu/B,OAASiB,GAElBnB,EAAiBjgC,UAAUghC,gBAAkB,SAAUV,EAAWG,EAAmBK,GACjF,IAAI13B,EAAOk3B,EAAUl3B,KACjB2M,EAAQ0qB,EAAkBhhC,IAAI2J,EAAKZ,IACvC,GAAIuN,EACA,IAAK,IAAI4D,EAAK,EAAG9V,EAAKy8B,EAAUne,MAAMlV,OAAQ0M,EAAK9V,EAAG4B,OAAQkU,IAAM,CAChE,IAAInQ,EAAQ3F,EAAG8V,GACXnQ,EAAM1F,SAAW0F,EAAM1F,QAAQS,OAASzB,EAAQrC,SAASuD,KACzD88B,EAASt3B,EAAOJ,EAAM2M,KAKtCkqB,EAAiBjgC,UAAUuX,YAAc,SAAUse,KAE5CoK,EA3Ga,CAJFxhC,EAAQ,IAgHZqK,cAClB/K,EAAQkiC,iBAAmBA,gCC7H3B5gC,OAAOC,eAAevB,EAAS,cAAgB4B,OAAO,IACtD,IAAIkD,EAAQpE,EAAQ,GAChB4iC,EAAyB5iC,EAAQ,IACjC6iC,EAA+B7iC,EAAQ,IACvC8iC,EAA0B,WAC1B,SAASA,EAAuB/3B,EAAO2Y,GACnCvhB,KAAK4gC,WACL5gC,KAAK6gC,qBACL7gC,KAAK8gC,kBAAoB,IAAIj+B,IAC7B7C,KAAK+gC,gBAAkB,IAAIl+B,IAC3B7C,KAAK4I,MAAQA,EACb,IAAIo4B,EAAkB,EACtBp4B,EAAM/C,mBAAmBX,QAAQ,SAAUyV,GACvCqmB,EAAkBlgC,KAAKgR,IAAI6I,EAAWzU,MAAO86B,KAEjDhhC,KAAKihC,yBAA2BD,EAAkB,EAClDhhC,KAAKuhB,MAAQA,EA6FjB,OA3FAof,EAAuBvhC,UAAUkS,IAAM,SAAU9M,GACzCxE,KAAK6gC,kBAAkBh8B,QAAU,GACjC7E,KAAKkhC,gBAET,IAAIC,EAAUnhC,KAAK6gC,kBAAkBO,QAOrC,OANID,EACAnhC,KAAK8gC,kBAAkBn1B,IAAInH,EAAU28B,GAGrCv2B,QAAQC,KAAK,qEAEVs2B,GAEXR,EAAuBvhC,UAAU8E,QAAU,WACvClE,KAAK4gC,QAAQ17B,QAAQ,SAAUya,GAC3BA,EAAO9W,SAAS8gB,UAChBhK,EAAO7W,SAAS6gB,aAGxBgX,EAAuBvhC,UAAU0F,YAAc,SAAUN,GACrD,OAAOxE,KAAK8gC,kBAAkBjiC,IAAI2F,IAEtCm8B,EAAuBvhC,UAAUiiC,OAAS,SAAU78B,GAChD,IAAI28B,EAAUnhC,KAAK8gC,kBAAkBjiC,IAAI2F,GAKzC,OAJI28B,IACAnhC,KAAK8gC,kBAAkBhC,OAAOt6B,GAC9BxE,KAAK6gC,kBAAkBpQ,QAAQ0Q,IAE5BA,GAEXR,EAAuBvhC,UAAUkiC,gBAAkB,WAC/C,IAAI5+B,EAAQ1C,KACZA,KAAK4gC,QAAQ17B,QAAQ,SAAUya,GAC3Bjd,EAAM6e,MAAMnV,UAAUi1B,OAAO1hB,EAAO3W,gBAEjChJ,KAAKuhB,OAEhBof,EAAuBvhC,UAAUmiC,SAAW,SAAUhgB,GAClD,IAAI7e,EAAQ1C,KACZA,KAAK4gC,QAAQ17B,QAAQ,SAAUya,GAC3Bjd,EAAM6e,MAAMnV,UAAUkF,IAAIqO,EAAO3W,SAErChJ,KAAKuhB,MAAQA,GAEjBof,EAAuBvhC,UAAU8hC,cAAgB,WAC7C,IAAIM,EAAc,IAAIv/B,EAAMqe,eAC5BtgB,KAAK4I,MAAM9C,iBAAiBZ,QAAQ,SAAUqV,GACtCA,EAAUC,mBACVgnB,EAAY/gB,aAAalG,EAAUjc,KAAMic,EAAUC,qBAG3DgnB,EAAYC,UAAU5xB,MAAQ,EAC9B2xB,EAAYC,UAAUC,MAClB1hC,KAAK4I,MAAM2W,sBAAwBvf,KAAK4I,MAAM9F,oBAClD,IAAI6+B,EAAc3hC,KAAK4I,MAAME,SAAS84B,QAClCC,EAAWpB,EAAuB93B,mBAAmB3I,KAAK4I,MAAO44B,EAAaG,GAClFE,EAASr1B,eAAgB,EACzB,IAAImT,GACAmiB,mBACAC,YACAC,cAAe,EACfn5B,SAAU24B,EACVS,aAAc,EACdn5B,SAAU64B,EACV34B,MAAO64B,GAEX7hC,KAAK4gC,QAAQj0B,KAAKgT,GAClB,IAAIuiB,EAAe,EACfC,EAAczB,EAA6Bjf,+BAC3C2gB,EAAeT,EAAYl9B,SAAS09B,GACxCC,EAAarjC,MAAQqjC,EAAarjC,MAAM8W,IAAI,WAAc,OAAO,IAAI5T,EAAMogC,QAAQ,EAAK,EAAK,EAAK,KAClG,IAAK,IAAItkC,EAAI,EAAG6G,EAAM5E,KAAK4I,MAAM2W,sBAAuBxhB,EAAI6G,IAAO7G,EAAG,CAClE,IAAIojC,GACAmB,cAAevkC,EACfuG,QAAS89B,EACTG,cAAeL,EAAc,IAEjCA,GAAgBliC,KAAKihC,yBACrBE,EAAQoB,aAAa,GAAKL,EAC1BviB,EAAOoiB,SAASp1B,KAAKw0B,GACrBnhC,KAAK6gC,kBAAkBl0B,KAAKw0B,GAC5BnhC,KAAK+gC,gBAAgBp1B,IAAIw1B,EAASxhB,GAEtC,IAAS5hB,EAAI,EAAG6G,EAAM5E,KAAK4I,MAAMnE,SAASI,OAAQ9G,EAAI6G,IAAO7G,EAAG,CAC5D,IAAIuG,EAAUtE,KAAK4I,MAAMnE,SAAS1G,GAClCuG,EAAQW,iBAAiB0H,KAAKg1B,EAAYl9B,SAASH,EAAQhG,OAE3D0B,KAAKuhB,OACLvhB,KAAKuhB,MAAMnV,UAAUkF,IAAIqO,EAAO3W,QAGjC23B,EAzGmB,GA2G9BxjC,EAAQwjC,uBAAyBA,gCC/GjC,IAAIn/B,EAAaxB,MAAQA,KAAKwB,WAAe,WACzC,IAAIC,EAAgBhD,OAAOiD,iBACpBC,wBAA2BC,OAAS,SAAUvD,EAAGwD,GAAKxD,EAAEsD,UAAYE,IACvE,SAAUxD,EAAGwD,GAAK,IAAK,IAAIvC,KAAKuC,EAAOA,EAAExC,eAAeC,KAAIjB,EAAEiB,GAAKuC,EAAEvC,KACzE,OAAO,SAAUjB,EAAGwD,GAEhB,SAASC,IAAO9B,KAAK+B,YAAc1D,EADnCoD,EAAcpD,EAAGwD,GAEjBxD,EAAEe,UAAkB,OAANyC,EAAapD,OAAOuD,OAAOH,IAAMC,EAAG1C,UAAYyC,EAAEzC,UAAW,IAAI0C,IAP1C,GAU7CrD,OAAOC,eAAevB,EAAS,cAAgB4B,OAAO,IACtD,IAAIwK,EAAW1L,EAAQ,GAYvBV,EAAQqlC,YATR,SAAqB7+B,EAAM8+B,GACvB,IAAIC,KAMJ,OALAD,EAAYv9B,QAAQ,SAAUy9B,GACtBh/B,EAAKixB,KAAK,SAAU9kB,GAAK,OAAO6yB,aAAe7yB,KAC/C4yB,EAAS/1B,KAAKg2B,KAGfD,GAGX,IAAIE,EAAa,WACb,SAASA,EAAU3hC,EAAQ0B,GACvB,IAAIkgC,EAAM5hC,EAAO4hC,IACjB7iC,KAAK8iC,GAAK,IAAIC,EAAK9hC,EAAOhB,EAAG4iC,EAAI5iC,EAAGgB,EAAOf,EAAG2iC,EAAI3iC,EAAGyC,GACrD3C,KAAKgjC,GAAK,IAAID,EAAKF,EAAI5iC,EAAGgB,EAAOT,MAAOS,EAAOf,EAAG2iC,EAAI3iC,EAAGyC,GACzD3C,KAAKijC,GAAK,IAAIF,EAAK9hC,EAAOhB,EAAG4iC,EAAI5iC,EAAG4iC,EAAI3iC,EAAGe,EAAOV,OAAQoC,GAC1D3C,KAAKkjC,GAAK,IAAIH,EAAKF,EAAI5iC,EAAGgB,EAAOT,MAAOqiC,EAAI3iC,EAAGe,EAAOV,OAAQoC,GAYlE,OAVAigC,EAAUxjC,UAAU8E,QAAU,WAC1BlE,KAAK8iC,GAAG5+B,UACRlE,KAAKgjC,GAAG9+B,UACRlE,KAAKijC,GAAG/+B,UACRlE,KAAKkjC,GAAGh/B,iBACDlE,KAAK8iC,UACL9iC,KAAKgjC,UACLhjC,KAAKijC,UACLjjC,KAAKkjC,IAETN,EAlBM,GAoBjBzlC,EAAQylC,UAAYA,EACpB,IAAIG,EAAQ,WACR,SAASA,EAAK1iC,EAAMG,EAAOF,EAAKC,EAAQoC,GACpC3C,KAAKmjC,YACLnjC,KAAK2C,MAAQ,EACTyE,UAAUvC,QAAU,EACpB7E,KAAKiB,OAAS,IAAIsI,EAASzJ,QACvBM,OAAQE,EAAMC,EACdJ,MAAOK,EAAQH,EACfJ,EAAGI,EACHH,EAAGI,IAIPN,KAAKiB,OAAS,IAAIsI,EAASzJ,QACvBM,OAAQ,EACRD,MAAO,EACPF,EAAG,EACHC,EAAG,IAGXF,KAAK2C,MAAQA,GAAS,EA4L1B,OA1LAogC,EAAK3jC,UAAU8E,QAAU,kBACdlE,KAAKmjC,gBACLnjC,KAAKiB,OACRjB,KAAKojC,QACLpjC,KAAKojC,MAAMl/B,iBACJlE,KAAKojC,QAGpBL,EAAK3jC,UAAUkS,IAAM,SAAU+xB,EAAO5gC,GAClC,OAAI4gC,EAAMliC,SAASnB,KAAKiB,QACbjB,KAAKsjC,MAAMD,IAGlBrjC,KAAKujC,MAAMF,GACJrjC,KAAKsR,IAAI+xB,EAAO5gC,KAG/BsgC,EAAK3jC,UAAUwW,OAAS,SAAUutB,EAAUK,GACxC,IAAI9gC,EAAQ1C,KACZwjC,EAAgBA,MAChB,IAAIre,EAAO8B,OAAOsU,UACdnW,EAAO6B,OAAOsU,UACdlW,GAAQ4B,OAAOsU,UACfjW,GAAQ2B,OAAOsU,UACnB4H,EAASj+B,QAAQ,SAAUm+B,GACnBA,EAAMpjC,EAAIklB,IACVA,EAAOke,EAAMpjC,GAEbojC,EAAM7iC,MAAQ6kB,IACdA,EAAOge,EAAM7iC,OAEb6iC,EAAM9iC,OAAS+kB,IACfA,EAAO+d,EAAM9iC,QAEb8iC,EAAMnjC,EAAIklB,IACVA,EAAOie,EAAMnjC,KAGrBF,KAAKujC,MAAM,IAAIh6B,EAASzJ,QACpBM,OAAQklB,EAAOF,EACfjlB,MAAOklB,EAAOF,EACdllB,EAAGklB,EACHjlB,EAAGklB,KAEP+d,EAASj+B,QAAQ,SAAUm+B,GAAS,OAAO3gC,EAAM4gC,MAAMD,MAE3DN,EAAK3jC,UAAUmkC,MAAQ,SAAUtiC,GAC7B,IAAIyB,EAAQ1C,KACZ,IAAIiB,EAAOE,SAASnB,KAAKiB,QAAzB,CAGAjB,KAAKiB,OAAOL,YAAYK,GACxBjB,KAAKiB,OAAOhB,GAAK,EACjBD,KAAKiB,OAAOf,GAAK,EACjBF,KAAKiB,OAAOd,OAAS,EACrBH,KAAKiB,OAAOb,QAAU,EACtB,IAAIqjC,EAAczjC,KAAK0jC,mBACnB1jC,KAAKojC,QACLpjC,KAAKojC,MAAMl/B,iBACJlE,KAAKojC,OAEhBK,EAAYv+B,QAAQ,SAAUm+B,GAAS,OAAO3gC,EAAM4gC,MAAMD,OAE9DN,EAAK3jC,UAAUkkC,MAAQ,SAAUD,GAC7B,OAAIrjC,KAAKojC,MACDC,EAAMliC,SAASnB,KAAKojC,MAAMN,GAAG7hC,QACtBjB,KAAKojC,MAAMN,GAAGQ,MAAMD,GAE3BA,EAAMliC,SAASnB,KAAKojC,MAAMJ,GAAG/hC,QACtBjB,KAAKojC,MAAMJ,GAAGM,MAAMD,GAE3BA,EAAMliC,SAASnB,KAAKojC,MAAMH,GAAGhiC,QACtBjB,KAAKojC,MAAMH,GAAGK,MAAMD,GAE3BA,EAAMliC,SAASnB,KAAKojC,MAAMF,GAAGjiC,QACtBjB,KAAKojC,MAAMF,GAAGI,MAAMD,IAE/BrjC,KAAKmjC,SAASx2B,KAAK02B,IACZ,GAEFA,EAAMliC,SAASnB,KAAKiB,SACzBjB,KAAKmjC,SAASx2B,KAAK02B,GACfrjC,KAAKmjC,SAASt+B,OAzIV,GAyIoC7E,KAAK2C,MAxI9C,IAyIC3C,KAAK2jC,SAEF,IAEPC,MAAMP,EAAMljC,MAAQkjC,EAAMjjC,OAASijC,EAAMpjC,EAAIojC,EAAMnjC,GACnD0K,QAAQgE,MAAM,2DAA4Dy0B,GAEtD,IAAfA,EAAMQ,MACXj5B,QAAQgE,MAAM,yDAA0Dy0B,IAErE,IAEXN,EAAK3jC,UAAUskC,eAAiB,SAAUI,GAQtC,OAPAA,EAAOA,EAAK70B,OAAOjP,KAAKmjC,UACpBnjC,KAAKojC,QACLpjC,KAAKojC,MAAMN,GAAGY,eAAeI,GAC7B9jC,KAAKojC,MAAMJ,GAAGU,eAAeI,GAC7B9jC,KAAKojC,MAAMH,GAAGS,eAAeI,GAC7B9jC,KAAKojC,MAAMF,GAAGQ,eAAeI,IAE1BA,GAEXf,EAAK3jC,UAAUiW,MAAQ,SAAUpU,EAAQ8iC,GACrC,OAAI9iC,aAAkBsI,EAASzJ,OACvBmB,EAAOC,UAAUlB,KAAKiB,QACfjB,KAAKgkC,YAAY/iC,KAAY8iC,MAIxC/jC,KAAKiB,OAAOP,cAAcO,GACnBjB,KAAKikC,WAAWhjC,KAAY8iC,OAI3ChB,EAAK3jC,UAAU4kC,YAAc,SAAUniC,EAAGiiC,EAAMC,GAuB5C,OAtBA/jC,KAAKmjC,SAASj+B,QAAQ,SAAU9G,GACxBA,EAAE8C,UAAUW,IACZiiC,EAAKn3B,KAAKvO,KAGd2lC,GACAA,EAAM/jC,MAENA,KAAKojC,QACDvhC,EAAEX,UAAUlB,KAAKojC,MAAMN,GAAG7hC,SAC1BjB,KAAKojC,MAAMN,GAAGkB,YAAYniC,EAAGiiC,EAAMC,GAEnCliC,EAAEX,UAAUlB,KAAKojC,MAAMJ,GAAG/hC,SAC1BjB,KAAKojC,MAAMJ,GAAGgB,YAAYniC,EAAGiiC,EAAMC,GAEnCliC,EAAEX,UAAUlB,KAAKojC,MAAMH,GAAGhiC,SAC1BjB,KAAKojC,MAAMH,GAAGe,YAAYniC,EAAGiiC,EAAMC,GAEnCliC,EAAEX,UAAUlB,KAAKojC,MAAMF,GAAGjiC,SAC1BjB,KAAKojC,MAAMF,GAAGc,YAAYniC,EAAGiiC,EAAMC,IAGpCD,GAEXf,EAAK3jC,UAAU6kC,WAAa,SAAU3kC,EAAGwkC,EAAMC,GAuB3C,OAtBA/jC,KAAKmjC,SAASj+B,QAAQ,SAAU9G,GACxBA,EAAEsC,cAAcpB,IAChBwkC,EAAKn3B,KAAKvO,KAGd2lC,GACAA,EAAM/jC,MAENA,KAAKojC,QACDpjC,KAAKojC,MAAMN,GAAG7hC,OAAOP,cAAcpB,IACnCU,KAAKojC,MAAMN,GAAGmB,WAAW3kC,EAAGwkC,EAAMC,GAElC/jC,KAAKojC,MAAMJ,GAAG/hC,OAAOP,cAAcpB,IACnCU,KAAKojC,MAAMJ,GAAGiB,WAAW3kC,EAAGwkC,EAAMC,GAElC/jC,KAAKojC,MAAMH,GAAGhiC,OAAOP,cAAcpB,IACnCU,KAAKojC,MAAMH,GAAGgB,WAAW3kC,EAAGwkC,EAAMC,GAElC/jC,KAAKojC,MAAMF,GAAGjiC,OAAOP,cAAcpB,IACnCU,KAAKojC,MAAMF,GAAGe,WAAW3kC,EAAGwkC,EAAMC,IAGnCD,GAEXf,EAAK3jC,UAAUukC,MAAQ,WACnB,IAAIF,EAAczjC,KAAK0jC,mBAGvB,IAFA1jC,KAAKojC,MAAQ,IAAIR,EAAU5iC,KAAKiB,OAAQjB,KAAK2C,MAAQ,GACrD3C,KAAKmjC,YACEM,EAAY5+B,OAAS,GAAG,CAC3B,IAAIw+B,EAAQI,EAAYnf,MACpB+e,GACArjC,KAAKsjC,MAAMD,KAGvBN,EAAK3jC,UAAU2kC,MAAQ,SAAUG,GAC7B,IAAIC,EAAWj7B,QAAQg7B,EAAGlkC,OACtBA,KAAKojC,QAAUe,IACfnkC,KAAKojC,MAAMN,GAAGiB,MAAMG,GACpBlkC,KAAKojC,MAAMJ,GAAGe,MAAMG,GACpBlkC,KAAKojC,MAAMH,GAAGc,MAAMG,GACpBlkC,KAAKojC,MAAMF,GAAGa,MAAMG,KAGrBnB,EAhNC,GAkNZ5lC,EAAQ4lC,KAAOA,EACf,IAAIptB,EAAY,SAAUnT,GAEtB,SAASmT,IACL,OAAkB,OAAXnT,GAAmBA,EAAOwM,MAAMhP,KAAMoH,YAAcpH,KAE/D,OAJAwB,EAAUmU,EAAUnT,GAIbmT,EALK,CAMdotB,GACF5lC,EAAQwY,SAAWA,gCCvQnBlX,OAAOC,eAAevB,EAAS,cAAgB4B,OAAO,IACtD,IAAIqlC,EAAgBvmC,EAAQ,IAC5B,SAASkB,EAAMkK,EAAKo7B,EAAKC,GACrB,IAAIC,EAAQ,GAAKt7B,EACbu7B,EAAMC,WAAWF,GACrB,OAAIX,MAAMY,GACC,EAEPD,EAAMx3B,QAAQ,MAAQ,EACfy3B,EAAM,IAAQH,EAElBG,EAAMF,EA+DjBnnC,EAAQmO,0BA7DR,SAAmCzK,EAAM6jC,EAAWJ,GACxB,IAApBI,EAAUvkC,OAAoC,IAArBukC,EAAUtkC,QACnCwK,QAAQC,KAAK,uDAAwD,gFAAiF,iEAAkE,QAAShK,EAAM,aAAc6jC,EAAUtjC,YAEnQ,IACIjB,EACAC,EAFAa,EAASmjC,EAAc1jB,WAAWjgB,cAGtC,GAAII,EAAKV,MACLc,EAAOd,MAAQpB,EAAM8B,EAAKV,MAAOukC,EAAUvkC,MAAOmkC,QAChCl7B,IAAdvI,EAAKR,KACLY,EAAOhB,EAAIlB,EAAM8B,EAAKR,KAAMqkC,EAAUvkC,MAAOmkC,QAEzBl7B,IAAfvI,EAAKL,QACVS,EAAOhB,EACHykC,EAAUvkC,MACNpB,EAAM8B,EAAKL,MAAOkkC,EAAUvkC,MAAOmkC,GACnCrjC,EAAOd,WAGlB,CACD,IAAIE,EAAOtB,EAAM8B,EAAKR,MAAQ,EAAGqkC,EAAUvkC,MAAOmkC,IAElDnkC,EADYukC,EAAUvkC,MAAQpB,EAAM8B,EAAKL,OAAS,EAAGkkC,EAAUvkC,MAAOmkC,GACtDjkC,GACJ,GACRuK,QAAQC,KAAK,uDAAwD,gFAAiF,0EAA2E,QAAShK,EAAM,aAAc6jC,EAAUtjC,YAE5QH,EAAOhB,EAAII,EACXY,EAAOd,MAAQA,EAEnB,GAAIU,EAAKT,OACLa,EAAOb,OAASrB,EAAM8B,EAAKT,OAAQskC,EAAUtkC,OAAQkkC,QACpCl7B,IAAbvI,EAAKP,IACLW,EAAOf,EAAInB,EAAM8B,EAAKP,IAAKokC,EAAUtkC,OAAQkkC,QAExBl7B,IAAhBvI,EAAKN,SACVU,EAAOf,EACHwkC,EAAUtkC,OACNrB,EAAM8B,EAAKN,OAAQmkC,EAAUtkC,OAAQkkC,GACrCrjC,EAAOb,YAGlB,CACD,IAAIukC,EAAQ5lC,EAAM8B,EAAKP,KAAO,EAAGokC,EAAUtkC,OAAQkkC,SAGpCl7B,KADfhJ,EADaskC,EAAUtkC,OAASrB,EAAM8B,EAAKN,QAAU,EAAGmkC,EAAUtkC,OAAQkkC,GACxDK,IACUvkC,EAAS,IACjCwK,QAAQC,KAAK,uDAAwD,gFAAiF,0EAA2E,QAAShK,EAAM,aAAc6jC,EAAUtjC,YAE5QH,EAAOf,EAAIykC,EACX1jC,EAAOb,OAASA,EAUpB,OARqB,IAAjBa,EAAOd,OACW,IAAlBc,EAAOb,QACPwjC,MAAM3iC,EAAOhB,EAAIgB,EAAOf,EAAIe,EAAOd,MAAQc,EAAOb,WAClDa,EAAOhB,EAAI,EACXgB,EAAOf,EAAI,EACXe,EAAOd,MAAQukC,EAAUvkC,MACzBc,EAAOb,OAASskC,EAAUtkC,QAEvBa,kBCzEX7D,EAAAD,QAAA,wgBCAAC,EAAAD,QAAA,gnBCAAC,EAAAD,QAAA,6hBCAAC,EAAAD,QAAA,0LCAAC,EAAAD,QAAA,mMCAAC,EAAAD,QAAA,gMCCAsB,OAAOC,eAAevB,EAAS,cAAgB4B,OAAO,IACtD,IAAIkD,EAAQpE,EAAQ,GAChBqE,EAAUrE,EAAQ,GAClB0b,EAAuB1b,EAAQ,IAC/B6iC,EAA+B7iC,EAAQ,IACvC+mC,EAAsB/mC,EAAQ,IAC9BgnC,EAAkBhnC,EAAQ,IAC1BinC,EAAiCjnC,EAAQ,IACzCknC,GAAqB,IAAK,IAAK,IAAK,KACpCC,GACAzO,EAAG,QACHC,EAAG,OACHC,EAAG,OACHC,EAAG,OACHuO,EAAG,OACHC,GAAI,OACJC,GAAI,QAER,SAASC,EAAgBl5B,EAAGrK,GACxB,OAAIqK,EAAEgO,SAAWrY,EAAEqY,OACR,GACH,EAwEZ,SAASmrB,EAAkBx1B,EAAOzJ,GAC9B,OAAO2+B,EAAkB31B,MAAMS,EAAOA,EAAQzJ,GAAMk/B,KAAK,IAzD7DnoC,EAAQooC,4BAdR,SAAqCC,GACjC,OACIC,SAAU,gBAAkB/E,EAA6Bjf,+BAAiC,IAAM+jB,EAAc,KAC9GvgC,mBAEQ3G,KAAMoiC,EAA6Bjf,+BACnC9d,KAAM,MACN5E,MAAO,IAAI6C,MAAM4jC,GACZE,KAAK,GACL7vB,IAAI,WAAc,OAAO,IAAI5T,EAAMogC,QAAQ,EAAG,EAAG,EAAG,SAgBzEllC,EAAQwoC,2BAVR,SAAoC9jB,GAChC,IAAI+jB,KACJA,EAAgBf,EAAgBljB,aAAaK,oBAAsB,GAAKH,EACxE,IAAIlU,GACArP,KAAM,6BACNqQ,QAASk2B,EAAgBljB,aAAaK,qBAG1C,OADc4iB,EAAoBn3B,eAAeq3B,EAAgCc,EAAiBj4B,GACnFD,QA8CnBvQ,EAAQ0oC,+BA3CR,SAAwChgC,EAAoBgc,GAGxD,IAFA,IAAI9X,EAAM,GACN+7B,EAAoBjgC,EAAmBuJ,MAAM,GAAGlC,KAAKk4B,GAChDrnC,EAAI,EAAGA,EAAI8jB,IAAqB9jB,EACrCgM,GAAO,eAAiBhM,EAAI,eAAiBA,EAAI,sBAqCrD,OAnCA+nC,EAAkB5gC,QAAQ,SAAUqV,GAChC,IAAIrU,EAAQqU,EAAUrU,MACtB,GAAIqU,EAAUL,QAAUK,EAAUnU,KAAM,CAOpC,OANImU,EAAUnU,OAASlE,EAAQzC,sBAAsBma,KACjD7P,GAAO,KAAOi7B,EAAWzqB,EAAUnU,MAAQ,KAAOmU,EAAUjc,KAAO,eAAiB4H,EAAQ,MAG5F6D,GAAO,KAAOi7B,EAAWzqB,EAAUnU,MAAQ,GAAK,KAAOmU,EAAUjc,KAAO,eAAiB4H,EAAQ,IAAMm/B,EAAkB9qB,EAAUpU,YAAc,EAAGoU,EAAUnU,MAAQ,GAAK,MAEvKmU,EAAUL,OAAOnH,MACrB,KAAKwG,EAAqB5H,oBAAoBsL,OAC1ClT,GAAO,YAAcwQ,EAAUjc,KAAO,uCAAyCic,EAAUjc,KAAO,mBAAqBic,EAAUjc,KAAO,2BACtI,MACJ,KAAKib,EAAqB5H,oBAAoBuL,QAC1CnT,GAAO,YAAcwQ,EAAUjc,KAAO,iCAAmCic,EAAUjc,KAAO,mBAAqBic,EAAUjc,KAAO,eAChIyL,GAAO,YAAcwQ,EAAUjc,KAAO,2BAA6Bic,EAAUjc,KAAO,sCACpFyL,GAAO,YAAcwQ,EAAUjc,KAAO,kBAAoBic,EAAUjc,KAAO,0BAC3E,MACJ,KAAKib,EAAqB5H,oBAAoBxO,KAC9C,QACI4G,GAAO,YAAcwQ,EAAUjc,KAAO,iCAAmCic,EAAUjc,KAAO,mBAAqBic,EAAUjc,KAAO,0BAGxIyL,GAAO,KAAOi7B,EAAWzqB,EAAUnU,MAAQ,IAAMmU,EAAUjc,KAAO,MAAQic,EAAUL,OAAOlH,WAAa,KAAOuH,EAAUjc,KAAO,YAAcic,EAAUjc,KAAO,UAAYic,EAAUjc,KAAO,iBAEvLic,EAAUnU,OAASlE,EAAQzC,sBAAsBma,KACtD7P,GAAO,KAAOi7B,EAAWzqB,EAAUnU,MAAQ,IAAMmU,EAAUjc,KAAO,WAAa4H,EAAQ,MAElFqU,EAAUlU,MACf0D,GAAO,KAAOi7B,EAAW9iC,EAAQzC,sBAAsBkc,OAAS,IAAMpB,EAAUjc,KAAO,WAAa4H,EAAQ,MAG5G6D,GAAO,KAAOi7B,EAAWzqB,EAAUnU,MAAQ,GAAK,IAAMmU,EAAUjc,KAAO,WAAa4H,EAAQ,IAAMm/B,EAAkB9qB,EAAUpU,YAAc,EAAGoU,EAAUnU,MAAQ,GAAK,QAGvK2D,iCC1FXtL,OAAOC,eAAevB,EAAS,cAAgB4B,OAAO,IACtD,IAAImD,EAAUrE,EAAQ,GAClB+mC,EAAsB/mC,EAAQ,IAC9BkoC,EAAeloC,EAAQ,IACvBgnC,EAAkBhnC,EAAQ,IAC1BmoC,EAAiCnoC,EAAQ,IACzCooC,EAA0BpoC,EAAQ,IAClCqoC,EAA4BroC,EAAQ,IACpCsoC,EAA6BtoC,EAAQ,IACrC0kB,EAAc1kB,EAAQ,IACtBykB,EAAoBzkB,EAAQ,IAC5BuoC,EAAoB,EACpBpB,GACAzO,EAAG,QACHC,EAAG,OACHC,EAAG,OACHC,EAAG,OACHuO,EAAG,OACHC,GAAI,OACJC,GAAI,aA6GR,SAASkB,EAAiB5hC,EAAU6hC,GAChC,IAAIv8B,EAAM,GACNwR,EAAY+qB,GAAiBpkC,EAAQtC,sBAAsB8b,OAS/D,OARAjX,EAASS,QAAQ,SAAUZ,GACvBA,EAAQiC,gBACJjC,EAAQiC,iBAAmBrE,EAAQtC,sBAAsB8b,OACzDpX,EAAQiC,kBAAoBgV,GAC5BjX,EAAQiC,kBAAoBrE,EAAQtC,sBAAsBwD,MAC1D2G,GAAO,YAAczF,EAAQkC,WAAa,KAAOlC,EAAQkC,UAAY,IAAM,IAAMw+B,EAAW1gC,EAAQ8B,MAAQ,IAAM9B,EAAQhG,KAAO,SAGlIyL,EA9EX5M,EAAQopC,gBAjCR,SAAyBC,EAAS1gC,EAAkBD,EAAoBpB,GACpE,IA8BIxB,EAAIqW,EA9BJmtB,EA0CR,SAA8B3gC,EAAkBD,EAAoBpB,GAChE,IAAImhC,KACAc,EA+GR,SAA2Cd,EAAiB//B,EAAoBpB,GAC5E,IACIkiC,EADcZ,EAAa1Z,UAAUC,oBApK7C,SAAqC7nB,GAEjC,IADA,IAAIi9B,EAAQ,EACH3jC,EAAI,EAAG6G,EAAMH,EAASI,OAAQ9G,EAAI6G,IAAO7G,EAC9C2jC,GAAS5gC,KAAK8lC,KAAKniC,EAAS1G,GAAGqI,KAAO,GAE1C,OAAOs7B,EAgKuCmF,CAA4BpiC,GACtEqiC,EAA2BjhC,EAC1BuJ,MAAM,GACNlC,KAAK,SAAUhB,EAAGrK,GAAK,OAAOqK,EAAEhG,MAAQrE,EAAEqE,QAC3C6gC,EAAeD,EAAyB,GAAG5gC,MAC3C8gC,EAAiB,EACjBC,EAAc,IAAIpkC,IAClBqkC,EAAmB,IAAIrkC,IAC3BikC,EAAyB5hC,QAAQ,SAAUqV,GACnCA,EAAUrU,QAAU6gC,IACpBA,EAAexsB,EAAUrU,MACzB8gC,KAEJ,IAAIG,EAAgB5sB,EAAUnU,MAAQ,EAClCghC,EAAYH,EAAYpoC,IAAImoC,IAAmB,EAC/CK,EAAYD,EAAYD,EAC5B,GAAIE,EAAYjB,EACZx7B,QAAQgE,MAAM,8FAA+F,2BAA6Bw3B,EAAmB,gBAAkB7rB,EAAUjc,KAAO,qBAAuBic,EAAUrU,MAAO,4CAA8CmhC,OAD1R,CAIAJ,EAAYt7B,IAAIq7B,EAAgBK,GAChC9sB,EAAUpU,WAAaihC,EACvB,IAAIE,EAAcJ,EAAiBroC,IAAImoC,IAAmB,IAAInkC,IAC9D,GAAI0X,EAAUpU,WAAaghC,EAAgBf,EACvCx7B,QAAQgE,MAAM,6FAA8F,yBAA2Bw3B,EAAmB,gBAAkB7rB,EAAUjc,KAAO,iBAAmBic,EAAUpU,WAAa,UAAYoU,EAAUnU,KAAO,yBAA2BmU,EAAUpU,YACpSoU,EAAUnU,MAAQ,SAF3B,CAKA,IAAK,IAAIrI,EAAIwc,EAAUpU,WAAYpI,EAAIwc,EAAUpU,WAAaghC,IAAiBppC,EAC3E,GAAIupC,EAAYzoC,IAAId,GAGhB,YAFA6M,QAAQgE,MAAM,0FAA2F,yBAA2Bw3B,EAAmB,gBAAkB7rB,EAAUjc,KAAO,iBAAmBic,EAAUpU,WAAa,UAAYoU,EAAUnU,KAAO,yBAA2BmU,EAAUpU,YACjSoU,EAAUnU,MAAQ,KAI/BmU,EAAUrU,MAAQ8gC,MAEtB,IACInlB,EAAoBmlB,EAAiB,EACrCznB,EAAwBze,KAAKyjB,MAAMoiB,EAA4B9kB,GAEnE,OACI5c,iBAOR,SAAwC2gC,EAAiBrmB,EAAuBgoB,EAAmB1lB,EAAmBhc,GAElH,IADA,IAAI2hC,KACKzpC,EAAI,EAAGA,EAAIwhB,IAAyBxhB,EACzCypC,EAAU76B,KAAK5O,GAEnB,IAAI0pC,EASR,SAAwCd,EAA2BhsB,GAC/D,IAAI5Q,EAAM,GACN29B,EAAsB,IAAI7kC,IAC1BiY,EAAW,EACfH,EAAWzV,QAAQ,SAAUqV,GACzB,IAAIotB,EAAaD,EAAoB7oC,IAAI0b,EAAUrU,QAAU,IAAIrD,IAC7D0X,EAAU/T,WACVmhC,EAAWh8B,IAAI4O,EAAU/T,WAAW,GAExCsU,EAAWha,KAAKgR,IAAIgJ,EAAUP,EAAUrU,SAE5C,IAAI0hC,EAAkB,IAAI/kC,IAC1B6kC,EAAoBxiC,QAAQ,SAAU2iC,EAAe3hC,GACjD,IAAI4hC,EAAgBlmC,MAAMo9B,KAAK6I,EAAcz5B,QAC7Cw5B,EAAgBj8B,IAAIzF,EAAO4hC,EAAcxC,KAAK,KAAO,OAEzD,IAAIyC,EAAc/B,EAA+BT,4BAA4BoB,GAG7E,OAFA58B,GAAOg+B,EAAYtC,UAGfA,SAFJ17B,GAAO,KAGH9E,iBAAkB8iC,EAAY9iC,kBA9Bb+iC,CAA+BzoB,EAAwBsC,EAAmBhc,GAK/F,OAJA+/B,EAAgBf,EAAgBljB,aAAaU,6BACzColB,EAAehC,SACnBG,EAAgBf,EAAgBljB,aAAaK,oBAAsB,GAAKH,EACxE+jB,EAAgBf,EAAgBljB,aAAaO,uBAAyB8jB,EAA+BL,2BAA2B9jB,IAE5H5c,iBAAkBwiC,EAAexiC,kBApBbgjC,CAA+BrC,EAAiBrmB,EAHjD,EAG0FsC,EAAmBilB,GAE5F7hC,iBACpCijC,SACIrmB,kBAAmBA,EACnBtC,sBAAuBA,IA9JV4oB,CAAkCvC,EAAiB//B,EAAoBpB,GACxF2jC,IAAqBnlC,MAClB4hC,EAAgBljB,aAAa9C,eAAiBwnB,EAAiB5hC,EAAUvC,EAAQtC,sBAAsB8b,QAC1GzY,EAAG4hC,EAAgBljB,aAAa7b,kBAoGxC,SAAkCA,GAC9B,IAAIiE,EAAM,GAKV,OAJAjE,EAAiBZ,QAAQ,SAAUqV,GAC/BxQ,GAAO,aAAei7B,EAAWzqB,EAAUnU,MAAQ,KAAOmU,EAAU/T,WAChE,KAAQ+T,EAAU/T,UAAa,IAAQ,IAAM+T,EAAUjc,KAAO,QAE/DyL,EA1GiDs+B,CAAyBviC,GAC7E7C,EAAG4hC,EAAgBljB,aAAaI,eAqBxC,SAA+Blc,GAC3B,IAAIyiC,EAAU,IAAIzlC,IACdkH,EAAM,GACVlE,EAAmBX,QAAQ,SAAUqV,GACjC,GAAIA,EAAUL,QAAUK,EAAUnU,KAAM,CACpC,IAAImiC,EAAcD,EAAQzpC,IAAI0b,EAAUL,OAAOlH,YAC1Cu1B,IACDA,EAAc,IAAI1lC,IAClBylC,EAAQ38B,IAAI4O,EAAUL,OAAOlH,WAAYu1B,IAE7CA,EAAY58B,IAAI4O,EAAUnU,KAAMmU,EAAUL,OAAOvH,QAGzD,IAAIhF,GACArP,KAAM,2BACNqQ,QAASk2B,EAAgBljB,aAAaG,eAa1C,OAXAwmB,EAAQpjC,QAAQ,SAAUqjC,EAAav1B,GACnCu1B,EAAYrjC,QAAQ,SAAU2N,EAAQzM,GAClC,IAMInD,EANAulC,EAAWxD,EAAW5+B,GACtBw/B,IAAmB3iC,MAChB4hC,EAAgBljB,aAAaG,cAAgB0mB,EAAW,IAAMx1B,EAAa,IAAMw1B,EAAW,WAAaA,EAAW,iBACvHvlC,GACAqL,EAAUs2B,EAAoBn3B,eAAeoF,EAAQ+yB,EAAiBj4B,GAC1E5D,GAAOuE,EAAQZ,OAAS,SAIzB3D,EAjD8C0+B,CAAsB5iC,GACvE5C,GACJxE,OAAOsE,OAAO6iC,EAAiBwC,GAC/B,IAgBInlC,EAhBA0K,GACArP,KAAM,eACNqQ,QACIk2B,EAAgBljB,aAAaO,sBAC7B2iB,EAAgBljB,aAAaU,4BAC7BwiB,EAAgBljB,aAAa9C,cAC7BgmB,EAAgBljB,aAAa7b,iBAC7B++B,EAAgBljB,aAAaI,gBAIrC,OACI0jB,SAFUb,EAAoBn3B,eAAe8U,EAAaqjB,EAAiBj4B,GAEzDD,OAClBzI,iBAAkByhC,EAAezhC,iBACjCijC,QAASxB,EAAewB,SAjEHQ,CAAqB5iC,EAAkBD,EAAoBpB,GAChFmhC,IAAmB3iC,MAChB4hC,EAAgBljB,aAAaW,mBAqCtBsiB,EAAoBn3B,eAAe6U,MAH7ChkB,KAAM,qBACNqQ,YAGWjB,OArCXzK,EAAG4hC,EAAgBljB,aAAaY,aAAekkB,EAAmBhB,SAClExiC,EAAG4hC,EAAgBljB,aAAajU,QA4GxC,SAA8B84B,EAAS3gC,EAAoB8iC,EAAwB9mB,GAC/E,IASI5e,EATA2iC,IAAmB3iC,MAChB4hC,EAAgBljB,aAAahH,YAmBxC,SAAyC9U,EAAoBgc,GACzD,IAAI+jB,KACJA,EAAgBf,EAAgBljB,aAAaE,mBAAqB,GAAKA,EACvE+jB,EAAgBf,EAAgBljB,aAAaQ,uBAQjD,SAAmCtc,EAAoBgc,GACnD,OAAOmkB,EAA+BH,+BAA+BhgC,EAAoBgc,GATnB+mB,CAA0B/iC,EAAoBgc,GACpH,IAAIlU,GACArP,KAAM,+BACNqQ,QAASk2B,EAAgBljB,aAAaQ,wBAG1C,OADcyiB,EAAoBn3B,eAAe04B,EAA4BP,EAAiBj4B,GAC/ED,OA5BmCm7B,CAAgChjC,EAAoBgc,GAClG5e,GACA0K,GACArP,KAAM,sBACNqQ,QAASk2B,EAAgBljB,aAAahH,aAG1C,OADciqB,EAAoBn3B,eAAe+4B,EAAQxgC,GAAI4/B,EAAiBj4B,GAC/DD,OArH+Bo7B,CAAqBtC,EAAS3gC,EAAoB4gC,EAAmByB,QAAQ3oB,sBAAuBknB,EAAmByB,QAAQrmB,mBACzK5e,GACA0K,GACArP,KAAM,4BACNqQ,QACIk2B,EAAgBljB,aAAaW,kBAC7BuiB,EAAgBljB,aAAaY,YAC7BsiB,EAAgBljB,aAAajU,SAGjCq7B,EAAsBnE,EAAoBn3B,eAAew4B,EAAyBL,EAAiBj4B,GAUvG,OATmB2L,MACZurB,EAAgBljB,aAAa9C,eAAiBwnB,EAAiB5hC,EAAUvC,EAAQtC,sBAAsB4b,UAC1GlC,EAAGurB,EAAgBljB,aAAajU,QA2GxC,SAAgC84B,GAO5B,OADc5B,EAAoBn3B,eAAe+4B,EAAQ5gC,OAHrDtH,KAAM,wBACNqQ,YAGWjB,OAlH+Bs7B,CAAuBxC,GAFrEZ,EAGItsB,EACJ3L,GACIrP,KAAM,8BACNqQ,QAASk2B,EAAgBljB,aAAa9C,cAAegmB,EAAgBljB,aAAajU,UAIlF9H,GAFwBg/B,EAAoBn3B,eAAey4B,EAA2BN,EAAiBj4B,GAE7ED,OAC1BzI,iBAAkBwhC,EAAmBxhC,iBACrCsa,sBAAuBknB,EAAmByB,QAAQ3oB,sBAClDvZ,GAAI+iC,EAAoBr7B,uCCzDhC,IAAIlM,EAAaxB,MAAQA,KAAKwB,WAAe,WACzC,IAAIC,EAAgBhD,OAAOiD,iBACpBC,wBAA2BC,OAAS,SAAUvD,EAAGwD,GAAKxD,EAAEsD,UAAYE,IACvE,SAAUxD,EAAGwD,GAAK,IAAK,IAAIvC,KAAKuC,EAAOA,EAAExC,eAAeC,KAAIjB,EAAEiB,GAAKuC,EAAEvC,KACzE,OAAO,SAAUjB,EAAGwD,GAEhB,SAASC,IAAO9B,KAAK+B,YAAc1D,EADnCoD,EAAcpD,EAAGwD,GAEjBxD,EAAEe,UAAkB,OAANyC,EAAapD,OAAOuD,OAAOH,IAAMC,EAAG1C,UAAYyC,EAAEzC,UAAW,IAAI0C,IAP1C,GAUzCiF,EAAc/G,MAAQA,KAAK+G,YAAe,SAAUC,EAAYC,EAAQC,EAAKC,GAC7E,IAA2H9I,EAAvHD,EAAIgJ,UAAUvC,OAAQ/F,EAAIV,EAAI,EAAI6I,EAAkB,OAATE,EAAgBA,EAAO1I,OAAO4I,yBAAyBJ,EAAQC,GAAOC,EACrH,GAAuB,iBAAZG,SAAoD,mBAArBA,QAAQC,SAAyBzI,EAAIwI,QAAQC,SAASP,EAAYC,EAAQC,EAAKC,QACpH,IAAK,IAAIpJ,EAAIiJ,EAAWnC,OAAS,EAAG9G,GAAK,EAAGA,KAASM,EAAI2I,EAAWjJ,MAAIe,GAAKV,EAAI,EAAIC,EAAES,GAAKV,EAAI,EAAIC,EAAE4I,EAAQC,EAAKpI,GAAKT,EAAE4I,EAAQC,KAASpI,GAChJ,OAAOV,EAAI,GAAKU,GAAKL,OAAOC,eAAeuI,EAAQC,EAAKpI,GAAIA,GAEhEL,OAAOC,eAAevB,EAAS,cAAgB4B,OAAO,IACtD,IAuQIkE,EAvQAuE,EAAS3J,EAAQ,GACjBorC,EAAYprC,EAAQ,GACpB05B,EAAa15B,EAAQ,GACrBqE,EAAUrE,EAAQ,GAClBqrC,EAAsB,IAAIrmC,IAC1B20B,IAAoBv0B,MACjBf,EAAQb,WAAWo2B,SAAW,SAAU/D,EAAQyV,GAC/CzV,EAAOzzB,GAAKyzB,EAAOiE,QACnBjE,EAAOxzB,GAAKwzB,EAAOiE,SAEvB10B,EAAGf,EAAQb,WAAWu2B,WAAa,SAAUlE,EAAQrmB,GACjDqmB,EAAOzzB,EAAIoN,EAAMlN,MAAQ,EACzBuzB,EAAOxzB,GAAKwzB,EAAOiE,SAEvB10B,EAAGf,EAAQb,WAAWy2B,UAAY,SAAUpE,EAAQrmB,GAChDqmB,EAAOzzB,EAAIoN,EAAMlN,MAAQuzB,EAAOiE,QAChCjE,EAAOxzB,GAAKwzB,EAAOiE,SAEvB10B,EAAGf,EAAQb,WAAW02B,YAAc,SAAUrE,EAAQrmB,GAClDqmB,EAAOzzB,GAAKyzB,EAAOiE,QACnBjE,EAAOxzB,EAAImN,EAAMjN,OAAS,GAE9B6C,EAAGf,EAAQb,WAAW22B,QAAU,SAAUtE,EAAQrmB,GAC9CqmB,EAAOzzB,EAAIoN,EAAMlN,MAAQ,EACzBuzB,EAAOxzB,EAAImN,EAAMjN,OAAS,GAE9B6C,EAAGf,EAAQb,WAAW42B,aAAe,SAAUvE,EAAQrmB,GACnDqmB,EAAOzzB,EAAIoN,EAAMlN,MAAQuzB,EAAOiE,QAChCjE,EAAOxzB,EAAImN,EAAMjN,OAAS,GAE9B6C,EAAGf,EAAQb,WAAW62B,YAAc,SAAUxE,EAAQrmB,GAClDqmB,EAAOzzB,GAAKyzB,EAAOiE,QACnBjE,EAAOxzB,EAAImN,EAAMjN,OAASszB,EAAOiE,SAErC10B,EAAGf,EAAQb,WAAW82B,cAAgB,SAAUzE,EAAQrmB,GACpDqmB,EAAOzzB,EAAIoN,EAAMlN,MAAQ,EACzBuzB,EAAOxzB,EAAImN,EAAMjN,OAASszB,EAAOiE,SAErC10B,EAAGf,EAAQb,WAAW+2B,aAAe,SAAU1E,EAAQrmB,GACnDqmB,EAAOzzB,EAAIoN,EAAMlN,MAAQuzB,EAAOiE,QAChCjE,EAAOxzB,EAAImN,EAAMjN,OAASszB,EAAOiE,SAErC10B,EAAGf,EAAQb,WAAWg3B,QAAU,SAAU3E,EAAQyV,GAC9CzV,EAAOzzB,EAAIyzB,EAAOzzB,GAAK,EACvByzB,EAAOxzB,EAAIwzB,EAAOxzB,GAAK,GAE3B+C,GACAmmC,EAAiB,SAAU5mC,GAE3B,SAAS4mC,EAAcrpC,GACnB,IAAI2C,EAAQF,EAAOtE,KAAK8B,KAAMD,IAAYC,KAC1C0C,EAAMilB,OAAS,EAAG,EAAG,EAAG,GACxBjlB,EAAMC,MAAQ,EACdD,EAAMq2B,SAAW,EACjBr2B,EAAM61B,QAAUr2B,EAAQZ,UAAUk3B,UAClC91B,EAAM8H,MAAQ,EACd9H,EAAMzC,EAAI,EACVyC,EAAMxC,EAAI,EACVwC,EAAM2mC,SAAW,GACjB3mC,EAAM4mC,YAAc,QACpB5mC,EAAM6mC,UAAY,GAClB7mC,EAAM8mC,WAAa,SACnB9mC,EAAM+mC,YAAc,IACpB/mC,EAAMgnC,UAAY,EAClBhnC,EAAMinC,MAAQ,GACdjnC,EAAMknC,OAAS,EACflnC,EAAMmnC,QAAU,EAChBnnC,EAAMonC,cAAe,EACrBpnC,EAAM+1B,SACFd,QAAS,EACTh0B,KAAMzB,EAAQb,WAAWo2B,QACzBx3B,EAAG,EACHC,EAAG,GAEPwC,EAAMC,MAAQ5C,EAAQ4C,OAASD,EAAMC,MACrCD,EAAMilB,MAAQ5nB,EAAQ4nB,OAASjlB,EAAMilB,MACrCjlB,EAAMq2B,SAAWh5B,EAAQg5B,UAAYr2B,EAAMq2B,SAC3Cr2B,EAAM61B,QAAUx4B,EAAQw4B,SAAW71B,EAAM61B,QACzC71B,EAAM8H,MAAQzK,EAAQyK,OAAS9H,EAAM8H,MACrC9H,EAAMzC,EAAIF,EAAQE,GAAKyC,EAAMzC,EAC7ByC,EAAMxC,EAAIH,EAAQG,GAAKwC,EAAMxC,EAC7BwC,EAAM4mC,YAAcvpC,EAAQ+mB,YAAcpkB,EAAM4mC,YAChD5mC,EAAM6mC,UAAYxpC,EAAQsmB,UAAY3jB,EAAM6mC,UAC5C7mC,EAAM8mC,WAAazpC,EAAQgqC,WAAarnC,EAAM8mC,WAC9C9mC,EAAM+mC,YAAc1pC,EAAQ8mB,YAAcnkB,EAAM+mC,YAChD/mC,EAAMgnC,UAAY3pC,EAAQ2lB,UAAY,EACtChjB,EAAMinC,MAAQ5pC,EAAQ4lB,MAAQjjB,EAAMinC,MACpCjnC,EAAM2mC,SAAWJ,EAAUzkB,gBAAgBiC,YAAY/jB,EAAO,GAC9D,IAEI6iB,EAFAykB,EAAgBtnC,EAAM2mC,SAAW,IAAM3mC,EAAMgnC,UAC7CO,EAAiBf,EAAoBrqC,IAAI6D,EAAMinC,OA6BnD,OA3BIM,GACA1kB,EAAgB0kB,EAAeprC,IAAImrC,KAE/BzkB,EAAc2kB,aAIlBD,EAAiB,IAAIpnC,IAEpB0iB,IACDA,GACI2kB,WAAY,EACZtuB,SAAU,IAAIqtB,EAAU77B,mBAAmB1K,IAE3C3C,EAAQwlB,gBACRA,EAAc3J,SAASrO,YAAcxN,EAAQwlB,cAAc/a,OAAS,GAExE+a,EAAc3J,SAASrO,YACnBgY,EAAc3J,SAASrO,aAAe,EAC1C07B,EAAUzkB,gBAAgB6C,WAAW9B,EAAc3J,UACnDstB,EAAoBv9B,IAAIjJ,EAAMinC,MAAOM,GACrCA,EAAet+B,IAAIq+B,EAAezkB,IAEtC7iB,EAAMynC,eAAiB5kB,EACvB7iB,EAAMknC,OAASrkB,EAAc3J,SAAS2J,cAAclb,MAAMlK,MAC1DuC,EAAMmnC,QAAUtkB,EAAc3J,SAAS2J,cAAclb,MAAMjK,OAC3DL,EAAQ2zB,QAAUhxB,EAAMg2B,UAAU34B,EAAQ2zB,QACnChxB,EA8IX,OApNAlB,EAAU4nC,EAAe5mC,GAwEzB4mC,EAAcllC,QAAU,WACpBglC,EAAoB5I,SAExB7hC,OAAOC,eAAe0qC,EAAchqC,UAAW,WAC3CP,IAAK,WACD,OAAOmB,KAAKqpC,UAEhBzqC,YAAY,EACZD,cAAc,IAElBF,OAAOC,eAAe0qC,EAAchqC,UAAW,eAC3CP,IAAK,WACD,OAAOmB,KAAK8pC,cAEhBlrC,YAAY,EACZD,cAAc,IAElBF,OAAOC,eAAe0qC,EAAchqC,UAAW,cAC3CP,IAAK,WACD,OAAOmB,KAAKspC,aAEhB1qC,YAAY,EACZD,cAAc,IAElBF,OAAOC,eAAe0qC,EAAchqC,UAAW,YAC3CP,IAAK,WACD,OAAOmB,KAAKupC,WAEhB3qC,YAAY,EACZD,cAAc,IAElBF,OAAOC,eAAe0qC,EAAchqC,UAAW,aAC3CP,IAAK,WACD,OAAOmB,KAAKwpC,YAEhB5qC,YAAY,EACZD,cAAc,IAElBF,OAAOC,eAAe0qC,EAAchqC,UAAW,cAC3CP,IAAK,WACD,OAAOmB,KAAKypC,aAEhB7qC,YAAY,EACZD,cAAc,IAElBF,OAAOC,eAAe0qC,EAAchqC,UAAW,YAC3CP,IAAK,WACD,OAAOmB,KAAK0pC,WAEhB9qC,YAAY,EACZD,cAAc,IAElBF,OAAOC,eAAe0qC,EAAchqC,UAAW,YAC3CP,IAAK,WACD,OAAOmB,KAAKmqC,eAAevuB,UAE/Bhd,YAAY,EACZD,cAAc,IAElBF,OAAOC,eAAe0qC,EAAchqC,UAAW,QAC3CP,IAAK,WACD,OAAOmB,KAAK2pC,OAEhB/qC,YAAY,EACZD,cAAc,IAElBF,OAAOC,eAAe0qC,EAAchqC,UAAW,iBAC3CP,IAAK,WACD,OAAOmB,KAAKmqC,eAAevuB,SAASqJ,eAAiBjlB,KAAK2lB,MAE9D/mB,YAAY,EACZD,cAAc,IAElBF,OAAOC,eAAe0qC,EAAchqC,UAAW,SAC3CP,IAAK,WACD,OAAOmB,KAAK4pC,QAEhBhrC,YAAY,EACZD,cAAc,IAElBF,OAAOC,eAAe0qC,EAAchqC,UAAW,UAC3CP,IAAK,WACD,OAAOmB,KAAK6pC,SAEhBjrC,YAAY,EACZD,cAAc,IAElByqC,EAAchqC,UAAU8E,QAAU,WACzBlE,KAAK8pC,eACN9pC,KAAK8pC,cAAe,EACpB9pC,KAAKmqC,eAAeD,aACmB,IAAnClqC,KAAKmqC,eAAeD,YACpBlqC,KAAKmqC,eAAevuB,WAIhCnd,OAAOC,eAAe0qC,EAAchqC,UAAW,UAC3CP,IAAK,WACD,OAAOmB,KAAKy4B,SAEhB75B,YAAY,EACZD,cAAc,IAElByqC,EAAchqC,UAAUs5B,UAAY,SAAUhF,GAC1C,IAAIiF,GACAhB,QAASjE,EAAOiE,SAAW,EAC3Bh0B,KAAM+vB,EAAO/vB,KACb1D,EAAGyzB,EAAOzzB,GAAK,EACfC,EAAGwzB,EAAOxzB,GAAK,GAEnBs3B,EAAiBmB,EAAUh1B,MAAMg1B,EAAW34B,MAC5CA,KAAKy4B,QAAUE,GAEnB5xB,GACIS,EAAOM,YACRshC,EAAchqC,UAAW,aAAS,GACrC2H,GACIS,EAAOM,YACRshC,EAAchqC,UAAW,aAAS,GACrC2H,GACIS,EAAOM,YACRshC,EAAchqC,UAAW,gBAAY,GACxC2H,GACIS,EAAOM,YACRshC,EAAchqC,UAAW,eAAW,GACvC2H,GACIS,EAAOM,YACRshC,EAAchqC,UAAW,aAAS,GACrC2H,GACIS,EAAOM,YACRshC,EAAchqC,UAAW,SAAK,GACjC2H,GACIS,EAAOM,YACRshC,EAAchqC,UAAW,SAAK,GACjC2H,GACIS,EAAOM,YACRshC,EAAchqC,UAAW,eAAW,GACvC2H,GACIS,EAAO8vB,UACR8R,EAAchqC,UAAW,SAAU,MAC/BgqC,EArNU,CAsNnB7R,EAAW9vB,UACbtK,EAAQisC,cAAgBA,iBCxRxBhsC,EAAAD,QAAA,sgGCAAC,EAAAD,QAAA,sOCCA,IAAIqE,EAAaxB,MAAQA,KAAKwB,WAAe,WACzC,IAAIC,EAAgBhD,OAAOiD,iBACpBC,wBAA2BC,OAAS,SAAUvD,EAAGwD,GAAKxD,EAAEsD,UAAYE,IACvE,SAAUxD,EAAGwD,GAAK,IAAK,IAAIvC,KAAKuC,EAAOA,EAAExC,eAAeC,KAAIjB,EAAEiB,GAAKuC,EAAEvC,KACzE,OAAO,SAAUjB,EAAGwD,GAEhB,SAASC,IAAO9B,KAAK+B,YAAc1D,EADnCoD,EAAcpD,EAAGwD,GAEjBxD,EAAEe,UAAkB,OAANyC,EAAapD,OAAOuD,OAAOH,IAAMC,EAAG1C,UAAYyC,EAAEzC,UAAW,IAAI0C,IAP1C,GAU7CrD,OAAOC,eAAevB,EAAS,cAAgB4B,OAAO,IACtD,IAAIkD,EAAQpE,EAAQ,GAChBm4B,EAAen4B,EAAQ,GACvBo4B,EAAUp4B,EAAQ,GAClBqE,EAAUrE,EAAQ,GAClB+6B,EAAU/6B,EAAQ,GAClBiU,EAAMhR,KAAKgR,IAAKD,EAAM/Q,KAAK+Q,IAC3Bu4B,EAAc,SAAU5nC,GAExB,SAAS4nC,IACL,OAAkB,OAAX5nC,GAAmBA,EAAOwM,MAAMhP,KAAMoH,YAAcpH,KAoL/D,OAtLAwB,EAAU4oC,EAAY5nC,GAItB4nC,EAAWhrC,UAAUkE,0BAA4B,WAC7C,OACII,eAAgB,SAAU2J,GACtB,IAAIqmB,GAAUrmB,EAAMqmB,OAAOzzB,GAAK,EAAGoN,EAAMqmB,OAAOxzB,GAAK,GACjDw1B,GAAWroB,EAAMpN,EAAIyzB,EAAO,GAAIrmB,EAAMnN,EAAIwzB,EAAO,IACrD,OAAO,IAAIsC,EAAal2B,QACpBM,OAAQiN,EAAMjN,OACdD,MAAOkN,EAAMlN,MACbF,EAAGy1B,EAAQ,GACXx1B,EAAGw1B,EAAQ,MAGnBnyB,QAAS,SAAU8J,EAAO1M,EAAO6H,GAC7B,IAAIuwB,EAAWjnB,EAAI9C,WAAM,EAAQxG,EAAK8B,OAAOE,OACzCwuB,EAAWnnB,EAAI7C,WAAM,EAAQxG,EAAK8B,OAAOE,OAC7C,GAAI6C,EAAMkrB,UAAYK,EAAQt3B,UAAU23B,OACpC,OAAO,EAEN,GAAI5rB,EAAMkrB,UAAYK,EAAQt3B,UAAUk3B,UAAW,CACpD,GAAIQ,GAAY,GAAKD,GAAY,EAC7B,OAAO,EAGP,IAAIrF,GAAUrmB,EAAMqmB,OAAOzzB,GAAK,EAAGoN,EAAMqmB,OAAOxzB,GAAK,GACjDw1B,EAAUltB,EAAKsC,eACf7K,EAAGoN,EAAMpN,EAAIyzB,EAAO,GAAKlrB,EAAK8B,OAAOE,MAAM,GAC3CtK,EAAGmN,EAAMnN,EAAIwzB,EAAO,GAAKlrB,EAAK8B,OAAOE,MAAM,KAE3C2uB,EAAc3wB,EAAKsC,cAAcnK,GACrC,OAAO,IAAIq1B,EAAal2B,QACpBM,OAAQiN,EAAMjN,OACdD,MAAOkN,EAAMlN,MACbF,EAAGy1B,EAAQz1B,EACXC,EAAGw1B,EAAQx1B,IACZQ,cAAcy4B,GAGpB,GAAI9rB,EAAMkrB,UAAYK,EAAQt3B,UAAU43B,MAAO,CAC5CxF,GAAUrmB,EAAMqmB,OAAOzzB,GAAK,EAAGoN,EAAMqmB,OAAOxzB,GAAK,GACjDw1B,EAAUltB,EAAKsC,eACf7K,EAAGoN,EAAMpN,EAAIyzB,EAAO,GAAKlrB,EAAK8B,OAAOE,MAAM,GAC3CtK,EAAGmN,EAAMnN,EAAIwzB,EAAO,GAAKlrB,EAAK8B,OAAOE,MAAM,KAE3C2uB,EAAc3wB,EAAKsC,cAAcnK,GACrC,OAAO,IAAIq1B,EAAal2B,QACpBM,OAAQiN,EAAMjN,OACdD,MAAOkN,EAAMlN,MACbF,EAAGy1B,EAAQz1B,EACXC,EAAGw1B,EAAQx1B,IACZQ,cAAcy4B,GAErB,OAAO,KAInBiR,EAAWhrC,UAAUuG,WAAa,WAC9B,IAAIjD,EAAQ1C,KACRq2B,GACAC,EAAG,EACHC,EAAG,EACHC,GAAI,EACJC,EAAG,EACHC,GAAI,EACJC,GAAI,GAEJC,GACAN,EAAG,EACHC,EAAG,EACHC,EAAG,EACHC,EAAG,EACHC,EAAG,EACHC,EAAG,GAEP,OACI/wB,GAAI/H,EAAQ,IACZgI,qBAEQK,MAAO,EACPC,WAAYjE,EAAQ1C,mBAAmBia,IACvCnb,KAAM,WACN8H,KAAMlE,EAAQzC,sBAAsBia,IACpC1U,OAAQ,SAAUxG,GAAK,OAAQA,EAAEyB,EAAGzB,EAAE0B,MAGtCgG,MAAO,EACPC,WAAYjE,EAAQ1C,mBAAmBma,MACvCrb,KAAM,SACN8H,KAAMlE,EAAQzC,sBAAsBia,IACpC1U,OAAQ,SAAUxG,GAAK,OAAQA,EAAEk1B,OAAOzzB,GAAK,EAAGzB,EAAEk1B,OAAOxzB,GAAK,MAG9DgG,MAAO,EACPC,WAAYjE,EAAQ1C,mBAAmBia,IACvCnb,KAAM,OACN8H,KAAMlE,EAAQzC,sBAAsBia,IACpC1U,OAAQ,SAAUxG,GAAK,OAAQA,EAAE2B,MAAO3B,EAAE4B,WAG1C8F,MAAO,EACPC,WAAYjE,EAAQ1C,mBAAmBma,MACvCrb,KAAM,QACN8H,KAAMlE,EAAQzC,sBAAsBga,IACpCzU,OAAQ,SAAUxG,GAAK,OAAQA,EAAEmE,UAGjCuD,MAAO,EACPC,WAAYjE,EAAQ1C,mBAAmBoa,KACvCtb,KAAM,UACN8H,KAAMlE,EAAQzC,sBAAsBga,IACpCzU,OAAQ,SAAUxG,GAAK,OAAQA,EAAE+5B,YAGjClyB,OACIa,IAAKlH,KAAKyC,MAAM4D,OAAS,GACzB/H,KAAM,cAEV4H,MAAO,EACP5H,KAAM,UACN0G,OAAQ,SAAUxG,GAAK,OAAOkE,EAAMkZ,SAASijB,QAAQn8B,EAAOlE,EAAGA,EAAEod,aAGjE1V,MAAO,EACPC,WAAYjE,EAAQ1C,mBAAmBia,IACvCnb,KAAM,QACN8H,KAAMlE,EAAQzC,sBAAsBma,KACpC5U,OAAQ,SAAUxG,GAAK,OAAOA,EAAEmpB,SAGhCzhB,MAAO,EACPC,WAAYjE,EAAQ1C,mBAAmBia,IACvCnb,KAAM,QACN8H,KAAMlE,EAAQzC,sBAAsBga,IACpCzU,OAAQ,SAAUxG,GAAK,OAAQA,EAAEgM,UAGjCtE,MAAO,EACPC,WAAYjE,EAAQ1C,mBAAmBka,IACvCpb,KAAM,WACN8H,KAAMlE,EAAQzC,sBAAsBga,IACpCzU,OAAQ,SAAUxG,GAAK,OAAQA,EAAEu6B,aAGzCt0B,WAEQnG,KAAM,cACN8H,KAAMlE,EAAQxC,YAAY+Z,IAC1BzU,OAAQ,SAAUo0B,GAAM,OAAQ,MAGxCtzB,mBAEQxH,KAAM,WACN8H,KAAMlE,EAAQvC,oBAAoBga,MAClC3U,OAAQ,SAAU8xB,GAAU,OACxBT,EAAeS,GACfF,EAAaE,GACb,MAIZ/wB,YAAa,EACbC,GAAInI,EAAQ,MAGpBusC,EAAWhrC,UAAUiG,aAAe,WAChC,OACIC,SAAUrD,EAAMoH,sBAChB7D,UAAWvD,EAAMwD,OAGzB2kC,EAAWhrC,UAAUsG,mBAAqB,WACtC,OACIqxB,SAAU90B,EAAM+0B,eAChBC,SAAUh1B,EAAMi1B,UAChBC,oBAAoB,EACpBC,aAAa,IAGdgT,EAvLO,CAwLhBnU,EAAQ1zB,OACVpF,EAAQitC,WAAaA,gCC1MrB,IAoCIx1B,EApCA4N,EAAaxiB,MAAQA,KAAKwiB,WAAc,SAAUC,EAASC,EAAYC,EAAGC,GAC1E,OAAO,IAAKD,IAAMA,EAAIE,UAAU,SAAU9d,EAAS+d,GAC/C,SAASC,EAAUhkB,GAAS,IAAMikB,EAAKJ,EAAUK,KAAKlkB,IAAW,MAAOmkB,GAAKJ,EAAOI,IACpF,SAASC,EAASpkB,GAAS,IAAMikB,EAAKJ,EAAA,MAAmB7jB,IAAW,MAAOmkB,GAAKJ,EAAOI,IACvF,SAASF,EAAKI,GAAUA,EAAOC,KAAOte,EAAQqe,EAAOrkB,OAAS,IAAI4jB,EAAE,SAAU5d,GAAWA,EAAQqe,EAAOrkB,SAAWukB,KAAKP,EAAWI,GACnIH,GAAMJ,EAAYA,EAAU5T,MAAMyT,EAASC,QAAmBO,WAGlEM,EAAevjB,MAAQA,KAAKujB,aAAgB,SAAUd,EAASe,GAC/D,IAAsGC,EAAGvjB,EAAG4P,EAAG4T,EAA3GC,GAAMtW,MAAO,EAAGuW,KAAM,WAAa,GAAW,EAAP9T,EAAE,GAAQ,MAAMA,EAAE,GAAI,OAAOA,EAAE,IAAO+T,QAAUC,QAC3F,OAAOJ,GAAMT,KAAMc,EAAK,GAAIC,MAASD,EAAK,GAAIE,OAAUF,EAAK,IAAwB,mBAAXG,SAA0BR,EAAEQ,OAAOC,UAAY,WAAa,OAAOnkB,OAAU0jB,EACvJ,SAASK,EAAK/kB,GAAK,OAAO,SAAU8W,GAAK,OACzC,SAAcsO,GACV,GAAIX,EAAG,MAAM,IAAIY,UAAU,mCAC3B,KAAOV,GAAG,IACN,GAAIF,EAAI,EAAGvjB,IAAM4P,EAAI5P,EAAU,EAARkkB,EAAG,GAAS,SAAWA,EAAG,GAAK,QAAU,YAActU,EAAIA,EAAE5R,KAAKgC,EAAGkkB,EAAG,KAAKf,KAAM,OAAOvT,EAEjH,OADI5P,EAAI,EAAG4P,IAAGsU,GAAM,EAAGtU,EAAE/Q,QACjBqlB,EAAG,IACP,KAAK,EAAG,KAAK,EAAGtU,EAAIsU,EAAI,MACxB,KAAK,EAAc,OAAXT,EAAEtW,SAAkBtO,MAAOqlB,EAAG,GAAIf,MAAM,GAChD,KAAK,EAAGM,EAAEtW,QAASnN,EAAIkkB,EAAG,GAAIA,GAAM,GAAI,SACxC,KAAK,EAAGA,EAAKT,EAAEG,IAAIQ,MAAOX,EAAEE,KAAKS,MAAO,SACxC,QACI,KAAkBxU,GAAZA,EAAI6T,EAAEE,MAAYhf,OAAS,GAAKiL,EAAEA,EAAEjL,OAAS,MAAkB,IAAVuf,EAAG,IAAsB,IAAVA,EAAG,IAAW,CAAET,EAAI,EAAG,SACjG,GAAc,IAAVS,EAAG,MAActU,GAAMsU,EAAG,GAAKtU,EAAE,IAAMsU,EAAG,GAAKtU,EAAE,IAAM,CAAE6T,EAAEtW,MAAQ+W,EAAG,GAAI,MAC9E,GAAc,IAAVA,EAAG,IAAYT,EAAEtW,MAAQyC,EAAE,GAAI,CAAE6T,EAAEtW,MAAQyC,EAAE,GAAIA,EAAIsU,EAAI,MAC7D,GAAItU,GAAK6T,EAAEtW,MAAQyC,EAAE,GAAI,CAAE6T,EAAEtW,MAAQyC,EAAE,GAAI6T,EAAEG,IAAInX,KAAKyX,GAAK,MACvDtU,EAAE,IAAI6T,EAAEG,IAAIQ,MAChBX,EAAEE,KAAKS,MAAO,SAEtBF,EAAKZ,EAAKtlB,KAAKukB,EAASkB,GAC1B,MAAOT,GAAKkB,GAAM,EAAGlB,GAAIhjB,EAAI,EAjBrB,QAiBoCujB,EAAI3T,EAAI,EACtD,GAAY,EAARsU,EAAG,GAAQ,MAAMA,EAAG,GAAI,OAASrlB,MAAOqlB,EAAG,GAAKA,EAAG,QAAK,EAAQf,MAAM,GArB9BL,EAAMhkB,EAAG8W,OAwB7DrX,OAAOC,eAAevB,EAAS,cAAgB4B,OAAO,IAEtD,IAAIsrC,EAAmB,WACnB,SAASA,KA6ET,OA3EAA,EAAgB5lB,aAAe,WAC3B,OAAOjC,EAAUxiB,UAAM,OAAQ,EAAQ,WACnC,OAAOujB,EAAYvjB,KAAM,SAAUiD,GAC/B,OAAQA,EAAGoK,OACP,KAAK,EACD,OAAMuH,GAAgB,EAAG,IACzB5U,KAAK0kB,cACG,EAAG,IAAI7B,QAAQ,SAAU9d,GAAW,OAAO4f,WAAW5f,EAAS,QAC3E,KAAK,EAED,OADA9B,EAAG2gB,QACK,EAAG,GACf,KAAK,EAAG,OAAQ,SAKhCymB,EAAgB3lB,WAAa,WAIzB,OAHK9P,IACDA,EAASkD,SAASoO,cAAc,UAAUxB,WAAW,OAElD9P,GAEXy1B,EAAgBC,mBAAqB,SAAU1uB,EAAU2uB,GACrD,IAAIhjB,EAAQ3L,EAAS2L,MAAMvR,QACtBuR,EAIA3S,EAIe,IAAhB2S,EAAMpnB,OAAgC,IAAjBonB,EAAMnnB,QAI/BwU,EAAOA,OAAOzU,MAAQ,IACtByU,EAAOA,OAAOxU,OAAS,IACvBwU,EAAOwR,UAAUmB,EAAO,EAAG,GAC3B3L,EAAS2J,cAAgB3J,EAAS2J,gBAC9BC,SAAWplB,OAAQ,EAAGD,MAAO,GAC7BkK,OAASjK,OAAQ,EAAGD,MAAO,IAE/Byb,EAAS2J,cAAcC,SACnBplB,OAAQmnB,EAAMnnB,OAASwb,EAASrO,YAChCpN,MAAOonB,EAAMpnB,MAAQyb,EAASrO,aAElCqO,EAAS2J,cAAclb,OACnBjK,OAAQmnB,EAAMnnB,OACdD,MAAOonB,EAAMpnB,OAEjByb,EAAS2J,cAAcgC,MAAQA,GAlB3B3c,QAAQC,KAAK,yFAJbD,QAAQC,KAAK,2JAJbD,QAAQC,KAAK,6EA4BrBw/B,EAAgBjjB,OAAS,SAAUxL,GAC/B,OAAO4G,EAAUxiB,UAAM,OAAQ,EAAQ,WACnC,OAAOujB,EAAYvjB,KAAM,SAAUiD,GAC/B,OAAQA,EAAGoK,OACP,KAAK,EAAG,OAAQ,EAAGrN,KAAKykB,gBACxB,KAAK,EAGD,OAFAxhB,EAAG2gB,OACH5jB,KAAKsqC,mBAAmB1uB,EAAUA,EAASrO,cACnC,EAAGqO,SAK/ByuB,EAAgBhjB,WAAa,SAAUzL,GAEnC,OADA5b,KAAK0kB,aACA9P,GAIL5U,KAAKsqC,mBAAmB1uB,EAAUA,EAASrO,aACpCqO,IAJHhR,QAAQC,KAAK,gFACN+Q,IAKRyuB,EA9EY,GAgFvBltC,EAAQktC,gBAAkBA,gCCrH1B,IAAI7nB,EAAaxiB,MAAQA,KAAKwiB,WAAc,SAAUC,EAASC,EAAYC,EAAGC,GAC1E,OAAO,IAAKD,IAAMA,EAAIE,UAAU,SAAU9d,EAAS+d,GAC/C,SAASC,EAAUhkB,GAAS,IAAMikB,EAAKJ,EAAUK,KAAKlkB,IAAW,MAAOmkB,GAAKJ,EAAOI,IACpF,SAASC,EAASpkB,GAAS,IAAMikB,EAAKJ,EAAA,MAAmB7jB,IAAW,MAAOmkB,GAAKJ,EAAOI,IACvF,SAASF,EAAKI,GAAUA,EAAOC,KAAOte,EAAQqe,EAAOrkB,OAAS,IAAI4jB,EAAE,SAAU5d,GAAWA,EAAQqe,EAAOrkB,SAAWukB,KAAKP,EAAWI,GACnIH,GAAMJ,EAAYA,EAAU5T,MAAMyT,EAASC,QAAmBO,WAGlEM,EAAevjB,MAAQA,KAAKujB,aAAgB,SAAUd,EAASe,GAC/D,IAAsGC,EAAGvjB,EAAG4P,EAAG4T,EAA3GC,GAAMtW,MAAO,EAAGuW,KAAM,WAAa,GAAW,EAAP9T,EAAE,GAAQ,MAAMA,EAAE,GAAI,OAAOA,EAAE,IAAO+T,QAAUC,QAC3F,OAAOJ,GAAMT,KAAMc,EAAK,GAAIC,MAASD,EAAK,GAAIE,OAAUF,EAAK,IAAwB,mBAAXG,SAA0BR,EAAEQ,OAAOC,UAAY,WAAa,OAAOnkB,OAAU0jB,EACvJ,SAASK,EAAK/kB,GAAK,OAAO,SAAU8W,GAAK,OACzC,SAAcsO,GACV,GAAIX,EAAG,MAAM,IAAIY,UAAU,mCAC3B,KAAOV,GAAG,IACN,GAAIF,EAAI,EAAGvjB,IAAM4P,EAAI5P,EAAU,EAARkkB,EAAG,GAAS,SAAWA,EAAG,GAAK,QAAU,YAActU,EAAIA,EAAE5R,KAAKgC,EAAGkkB,EAAG,KAAKf,KAAM,OAAOvT,EAEjH,OADI5P,EAAI,EAAG4P,IAAGsU,GAAM,EAAGtU,EAAE/Q,QACjBqlB,EAAG,IACP,KAAK,EAAG,KAAK,EAAGtU,EAAIsU,EAAI,MACxB,KAAK,EAAc,OAAXT,EAAEtW,SAAkBtO,MAAOqlB,EAAG,GAAIf,MAAM,GAChD,KAAK,EAAGM,EAAEtW,QAASnN,EAAIkkB,EAAG,GAAIA,GAAM,GAAI,SACxC,KAAK,EAAGA,EAAKT,EAAEG,IAAIQ,MAAOX,EAAEE,KAAKS,MAAO,SACxC,QACI,KAAkBxU,GAAZA,EAAI6T,EAAEE,MAAYhf,OAAS,GAAKiL,EAAEA,EAAEjL,OAAS,MAAkB,IAAVuf,EAAG,IAAsB,IAAVA,EAAG,IAAW,CAAET,EAAI,EAAG,SACjG,GAAc,IAAVS,EAAG,MAActU,GAAMsU,EAAG,GAAKtU,EAAE,IAAMsU,EAAG,GAAKtU,EAAE,IAAM,CAAE6T,EAAEtW,MAAQ+W,EAAG,GAAI,MAC9E,GAAc,IAAVA,EAAG,IAAYT,EAAEtW,MAAQyC,EAAE,GAAI,CAAE6T,EAAEtW,MAAQyC,EAAE,GAAIA,EAAIsU,EAAI,MAC7D,GAAItU,GAAK6T,EAAEtW,MAAQyC,EAAE,GAAI,CAAE6T,EAAEtW,MAAQyC,EAAE,GAAI6T,EAAEG,IAAInX,KAAKyX,GAAK,MACvDtU,EAAE,IAAI6T,EAAEG,IAAIQ,MAChBX,EAAEE,KAAKS,MAAO,SAEtBF,EAAKZ,EAAKtlB,KAAKukB,EAASkB,GAC1B,MAAOT,GAAKkB,GAAM,EAAGlB,GAAIhjB,EAAI,EAjBrB,QAiBoCujB,EAAI3T,EAAI,EACtD,GAAY,EAARsU,EAAG,GAAQ,MAAMA,EAAG,GAAI,OAASrlB,MAAOqlB,EAAG,GAAKA,EAAG,QAAK,EAAQf,MAAM,GArB9BL,EAAMhkB,EAAG8W,OAwB7DrX,OAAOC,eAAevB,EAAS,cAAgB4B,OAAO,IACtD,IAAIwK,EAAW1L,EAAQ,GACnB2sC,EAAU3sC,EAAQ,IAClB4sC,EAAyB5sC,EAAQ,IACjC6sC,EAAqB7sC,EAAQ,IAC7B8sC,EAAyB9sC,EAAQ,IACjCmgC,EAAyBngC,EAAQ,IACjC+sC,EAAqB/sC,EAAQ,IAC7B+qB,EAAgB/qB,EAAQ,IACxBwvB,EAAQxvB,EAAQ,GAARA,CAAiB,uBACzBgtC,GACA9pB,YAAa,EACbqH,SAAWnoB,EAAG,EAAGC,EAAG,GACpBmoB,SAAWpoB,EAAG,EAAGC,EAAG,GACpB8nB,iBAAkB,GAClBC,aAAc,KACdC,SAAWjoB,EAAG,EAAGC,EAAG,GACpBioB,SAAWloB,EAAG,EAAGC,EAAG,GACpBqoB,cAAe,EACfC,SAAS,EACTE,YAAa,EACbD,WAAY,EACZH,aAAc,GAWlB,IAAIwiB,EAAgB,WAChB,SAASA,IACL9qC,KAAK+qC,SAAW,IAAIloC,IAiQxB,OA/PAioC,EAAa1rC,UAAU4rC,YAAc,SAAUjrC,EAAS0+B,GACpD,OAAOjc,EAAUxiB,UAAM,OAAQ,EAAQ,WACnC,IAAIqG,EACJ,OAAOkd,EAAYvjB,KAAM,SAAUiD,GAC/B,OAAQA,EAAGoK,OACP,KAAK,EAID,OAHAhH,EAAQ,IAAImkC,EAAQ1hB,MAAM/oB,IACpBupB,WAAWtpB,MACjBA,KAAK+qC,SAASp/B,IAAItF,EAAMuB,GAAIvB,GACvBo4B,GACG,EAAGz+B,KAAK4+B,YAAYv4B,EAAMuB,GAAI62B,KADd,EAAG,GAE/B,KAAK,EACDx7B,EAAG2gB,OACH3gB,EAAGoK,MAAQ,EACf,KAAK,EAED,OADAggB,EAAM,qBAAsBhnB,IACpB,EAAGA,SAK/BykC,EAAa1rC,UAAU8E,QAAU,WAC7BlE,KAAK+qC,SAAS7lC,QAAQ,SAAUnG,GAAS,OAAOA,EAAMmF,aAE1D4mC,EAAa1rC,UAAU6rC,aAAe,SAAUC,GAC5C,IAAI7kC,EAAQrG,KAAK+qC,SAASlsC,IAAIqsC,GAC1B7kC,GACAA,EAAMnC,WAGd4mC,EAAa1rC,UAAU+rC,gBAAkB,SAAU5jB,EAAO2jB,GAEtD,OADA3jB,EAAQ9oB,OAAOsE,OAAOwkB,EAAOsjB,GAAc7iB,iBAAkBkjB,KAGjEJ,EAAa1rC,UAAUiF,KAAO,SAAUgC,EAAOuV,GAC3C,OAAO4G,EAAUxiB,UAAM,OAAQ,EAAQ,WACnC,IAAI4U,EAAQs2B,EAAWE,EAAa7lB,EAAeC,EAAS6lB,EAAMC,EAAYriB,EAASsiB,EAAcC,EAAIC,EAAIC,EAAIC,EAAIC,EAAWC,EAAiBtrC,EAAQokC,EAAOtkC,EAAMG,EACtK,OAAO+iB,EAAYvjB,KAAM,SAAUiD,GAC/B,OAAQA,EAAGoK,OACP,KAAK,EAGD,OAFAuH,EAASvO,EAAMmf,QAAQ+B,MACvB2jB,EAAY7kC,EAAMuB,GACbvB,EAAMmjB,iBAAiB5N,IAIpB,EAAG5b,KAAK8rC,UAAUlwB,KAHtBhR,QAAQC,KAAK,sGAAuGxE,EAAOuV,IACnH,EAAGiH,QAAQ9d,SAAQ,KAGnC,KAAK,EAED,OADAqmC,EAAcnoC,EAAG2gB,SA7DzC,SAAsB2D,GAClB,IAAIiB,GAAU,EAMd,OALIjB,GAASA,EAAMiB,SACXjB,EAAMkB,YAAclB,EAAMmB,cAC1BF,GAAU,GAGXA,EAuDgCujB,CAAanwB,EAAS4J,UACrCD,EAAgB3J,EAAS2J,cACzBC,EAAU5J,EAAS4J,QACnB6lB,EAAO,IAAI9hC,EAASzJ,QAChBO,KAAM,EACNG,MAAO+kB,EAAcC,QAAQrlB,MAC7BG,IAAK,EACLC,OAAQglB,EAAcC,QAAQplB,UAElCkrC,GACIU,MAAOxmB,EACPymB,OAAQZ,IAEDY,OAAO9rC,OAAS,EAC3BmrC,EAAWW,OAAO7rC,QAAU,EAC5B6oB,EAAU5iB,EAAM4iB,SAChBsiB,EAAetiB,EAAQijB,OAAOZ,KAE1Bje,EAAM,gCAAiCke,GACvCA,EAAaY,UAAY3mB,EACzBgmB,EAAKD,EAAaa,eAAensC,EAAIoG,EAAMlG,MAC3CsrC,EAAKF,EAAaa,eAAelsC,EAAImG,EAAMjG,OAC3CsrC,EAAKH,EAAaa,eAAejsC,MAAQkG,EAAMlG,MAC/CwrC,EAAKJ,EAAaa,eAAehsC,OAASiG,EAAMjG,OAChDwrC,EAAY,EAAIvlC,EAAMlG,MACtB0rC,EAAkB,IAAItiC,EAASzJ,QAC3BS,OAAQ,EAAMkrC,EACdprC,KAAMmrC,EACNhrC,MAAOgrC,EAAKE,EACZprC,IAAK,GAAOmrC,EAAKE,KAErBprC,EAASsrC,EAAgBtrC,OACzBokC,EAAQkH,EAAgB3rC,EACxBG,EAAOwrC,EAAgB5rC,EACvBO,EAAQqrC,EAAgB5rC,EAAI4rC,EAAgB1rC,MAAQyrC,EACpDpmB,EAAQwC,iBAAmBkjB,EAC3B1lB,EAAQ0C,SAAYjoB,EAAGI,EAAMH,EAAGykC,GAChCnf,EAAQ6C,SAAYpoB,EAAGO,EAAON,EAAGK,GACjCilB,EAAQ4C,SAAYnoB,EAAGI,EAAMH,EAAGK,GAChCilB,EAAQ2C,SAAYloB,EAAGO,EAAON,EAAGykC,GACjCnf,EAAQ8C,aAAexnB,KAAKC,IAAIykB,EAAQ2C,QAAQloB,EAAIulB,EAAQ0C,QAAQjoB,GACpEulB,EAAQ+C,cAAgBznB,KAAKC,IAAIykB,EAAQ2C,QAAQjoB,EAAIslB,EAAQ6C,QAAQnoB,GACrEslB,EAAQiD,WAAalD,EAAcC,QAAQrlB,MAC3CqlB,EAAQkD,YAAcnD,EAAcC,QAAQplB,OAC5CwU,EACK8P,WAAW,MACX0B,UAAUglB,EAAaG,EAAaa,eAAensC,EAAGsrC,EAAaa,eAAelsC,IAC/E,GAAG,KAGX0K,QAAQgE,MAAM,oCAAqCgN,GACnDA,EAAS4J,QAAUxlB,KAAKmrC,gBAAgBvvB,EAAS4J,QAAS0lB,IAClD,GAAG,MAIVtvB,EAAS4J,QAAQgD,QAIlB5d,QAAQgE,MAAM,2BAA4BgN,GAH1CyR,EAAM,wCAAyCzR,GAKnDA,EAAS4J,QAAUxlB,KAAKmrC,gBAAgBvvB,EAAS4J,QAAS0lB,IAClD,GAAG,UAOnCJ,EAAa1rC,UAAUyc,gBAAkB,SAAUqvB,GAC/C,OAAOlrC,KAAK+qC,SAASlsC,IAAIqsC,IAE7BJ,EAAa1rC,UAAU0sC,UAAY,SAAUlwB,GACzC,OAAO4G,EAAUxiB,UAAM,OAAQ,EAAQ,WACnC,IAAIqsC,EAAUC,EAAYC,EAC1B,OAAOhpB,EAAYvjB,KAAM,SAAUiD,GAC/B,OAAQA,EAAGoK,OACP,KAAK,EAID,OAHAg/B,EAAW,GACXC,EAAa1wB,EAAS4J,SAAW,IAAIoD,EAAcb,WACnDnM,EAAS4J,QAAU8mB,GACc,IAA7B1wB,EAAS4J,QAAQgD,SACT,EAAG,MACT5M,aAAoB+uB,EAAuBrjB,mBAC5C1L,EAAS2L,MAAMvR,QACiB,IAAjC4F,EAAS2L,MAAMvR,QAAQ7V,OACW,IAAlCyb,EAAS2L,MAAMvR,QAAQ5V,QACvBmsC,EAAU3wB,EAAS2L,MAAMvR,QACzBs2B,EAAW7jB,WAAa8jB,EAAQpsC,MAChCmsC,EAAW5jB,YAAc6jB,EAAQnsC,OACjCksC,EAAWvrB,YAAcwrB,EAAQpsC,MAAQosC,EAAQnsC,QACzC,EAAGmsC,KAEP,EAAG,IAAI1pB,QAAQ,SAAU9d,GACzB,IAAIwiB,EAAQ3L,EAAS2L,MAAMvR,QACvBuR,GACAA,EAAMilB,OAAS,WACXF,EAAW7jB,WAAalB,EAAMpnB,MAC9BmsC,EAAW5jB,YAAcnB,EAAMnnB,OAC/BksC,EAAWvrB,YAAcwG,EAAMpnB,MAAQonB,EAAMnnB,OAC7C2E,EAAQwiB,IAEZA,EAAMklB,QAAU,WACZ1nC,EAAQ,QAIZA,EAAQ,UAvBiB,EAAG,IADsC,EAAG,GA2BrF,KAAK,EAED,OAAQ,EADA9B,EAAG2gB,QAEf,KAAK,EACGhI,EAAS2L,MAAMmlB,OACfL,EAAWzwB,EAAS2L,MAAMmlB,MAE9BzpC,EAAGoK,MAAQ,EACf,KAAK,EAAG,OAAQ,EAAG,IACnB,KAAK,EACD,OAAMuO,aAAoBoiB,EAAuB5wB,mBAC3CwO,EAAS2J,cAAc3Q,QAAgB,EAAG,IACxC,EAAGg2B,EAAmBpmB,gBAAgB4C,OAAOxL,KAFyB,EAAG,GAGrF,KAAK,EACD3Y,EAAG2gB,OACH3gB,EAAGoK,MAAQ,EACf,KAAK,EAQD,OAPIuO,EAAS2J,cAAc3Q,QACvByY,EAAM,sBAAuBzR,EAAS2J,eACtC8mB,EAAWzwB,EAAS2J,cAAc3Q,OAAO+3B,UAAU,cAGnD/hC,QAAQC,KAAK,4CAET,EAAG,IACf,KAAK,EACD,OAAM+Q,aAAoB6uB,EAAuB3iB,mBAC3ClM,EAAS2J,cAAc3Q,QAAgB,EAAG,IACxC,EAAG81B,EAAmBljB,gBAAgBJ,OAAOxL,KAFyB,EAAG,IAGrF,KAAK,EACD3Y,EAAG2gB,OACH3gB,EAAGoK,MAAQ,EACf,KAAK,EACGuO,EAAS2J,cAAc3Q,QACvByY,EAAM,sBAAuBzR,EAAS2J,eACtC8mB,EAAWzwB,EAAS2J,cAAc3Q,OAAO+3B,UAAU,cAGnD/hC,QAAQC,KAAK,2CAEjB5H,EAAGoK,MAAQ,GACf,KAAK,GACD,OAAKg/B,GACG,EAAG,IAAIxpB,QAAQ,SAAU9d,GACzB,IAAIwiB,EAAQ,IAAIqlB,MAChBrlB,EAAMilB,OAAS,WACXF,EAAW7jB,WAAalB,EAAMpnB,MAC9BmsC,EAAW5jB,YAAcnB,EAAMnnB,OAC/BksC,EAAWvrB,YAAcwG,EAAMpnB,MAAQonB,EAAMnnB,OAC7C2E,EAAQwiB,IAEZA,EAAMklB,QAAU,WACZ1nC,EAAQ,OAEZwiB,EAAMslB,IAAMR,MAZG,EAAG,IAc9B,KAAK,GAED,OAAQ,EADAppC,EAAG2gB,QAEf,KAAK,GAAI,OAAQ,EAAG,YAKpCknB,EAAa1rC,UAAUw/B,YAAc,SAAUsM,EAAWzM,GACtD,OAAOjc,EAAUxiB,UAAM,OAAQ,EAAQ,WACnC,IAAIqG,EAAO0S,EAAI+zB,EAAalxB,EAC5B,OAAO2H,EAAYvjB,KAAM,SAAUiD,GAC/B,OAAQA,EAAGoK,OACP,KAAK,EAED,KADAhH,EAAQrG,KAAK+qC,SAASlsC,IAAIqsC,IACd,OAAQ,EAAG,GACvBnyB,EAAK,EAAG+zB,EAAcrO,EACtBx7B,EAAGoK,MAAQ,EACf,KAAK,EACD,OAAM0L,EAAK+zB,EAAYjoC,QACvB+W,EAAWkxB,EAAY/zB,IACf,EAAG/Y,KAAKqE,KAAKgC,EAAOuV,MAFY,EAAG,GAG/C,KAAK,EACD3Y,EAAG2gB,OACH3gB,EAAGoK,MAAQ,EACf,KAAK,EAED,OADA0L,KACQ,EAAG,GACf,KAAK,EAED,OADA1S,EAAM8iB,iBACE,EAAG,GACf,KAAK,EACDve,QAAQC,KAAK,qCAAsCqgC,EAAW,sCAAuCzM,GACrGx7B,EAAGoK,MAAQ,EACf,KAAK,EAAG,OAAQ,SAKzBy9B,EAnQS,GAqQpB3tC,EAAQ2tC,aAAeA,gCCzUvBrsC,OAAOC,eAAevB,EAAS,cAAgB4B,OAAO,IACtD,IAAIwK,EAAW1L,EAAQ,GACnBqrB,EAAY,WACZ,SAASA,EAASjpB,EAAGC,EAAGC,EAAOC,GAC3BJ,KAAKqjC,OAAS,KAAM,MACpBrjC,KAAK+sC,QAAS,EACd/sC,KAAKmsC,UAAY,KACjBnsC,KAAKosC,eAAiB,IAAI7iC,EAASzJ,QAC/BM,OAAQA,EACRD,MAAOA,EACPF,EAAGA,EACHC,EAAGA,IA6FX,OA1FAgpB,EAAS9pB,UAAU8E,QAAU,WACzB,IAAI8oC,EAAShtC,KAAKqjC,MAAM,GACpB4J,EAASjtC,KAAKqjC,MAAM,GACxBrjC,KAAKmsC,UAAY,KACba,GACAA,EAAO9oC,UAEP+oC,GACAA,EAAO/oC,UAEXlE,KAAKqjC,MAAM,GAAK,KAChBrjC,KAAKqjC,MAAM,GAAK,MAEpBna,EAAS9pB,UAAU8tC,SAAW,WAC1B,IAAIF,EAAShtC,KAAKqjC,MAAM,GACpB4J,EAASjtC,KAAKqjC,MAAM,GACxB,OAAI2J,IAAWA,EAAOb,WACVa,EAAOD,UAEfE,GAAWA,EAAOd,aACVc,EAAOF,QAIvB7jB,EAAS9pB,UAAU8sC,OAAS,SAAU3kB,GAClC,IAAIylB,EAAShtC,KAAKqjC,MAAM,GACpB4J,EAASjtC,KAAKqjC,MAAM,GACxB,IAAKrjC,KAAK+sC,QAAUC,GAAUC,EAAQ,CAClC,IAAIE,EAAUH,EAAOd,OAAO3kB,GAC5B,OAAgB,OAAZ4lB,EACOA,EAEJF,EAAOf,OAAO3kB,GAGrB,GAAIvnB,KAAKmsC,UACL,OAAO,KAEX,IAAIiB,EAAUptC,KAAKosC,eAAeprC,KAAKumB,EAAM0kB,QAC7C,GAAgB,IAAZmB,EACA,OAAO,KAEX,GAAgB,IAAZA,EACA,OAAOptC,KAEXA,KAAK+sC,QAAS,EACd,IAAIM,EAAW9lB,EAAM0kB,OAAO9rC,MACxBmtC,EAAY/lB,EAAM0kB,OAAO7rC,OACzBmtC,EAASvtC,KAAKosC,eAAejsC,MAAQktC,EACrCG,EAAUxtC,KAAKosC,eAAehsC,OAASmnB,EAAM0kB,OAAO7rC,OAU5D,OATQmtC,EAASC,GACTR,EAAShtC,KAAKqjC,MAAM,GAAK,IAAIna,EAASlpB,KAAKosC,eAAensC,EAAGD,KAAKosC,eAAelsC,EAAGmtC,EAAUrtC,KAAKosC,eAAehsC,QAClH6sC,EAASjtC,KAAKqjC,MAAM,GAAK,IAAIna,EAASlpB,KAAKosC,eAAensC,EAAIotC,EAAUrtC,KAAKosC,eAAelsC,EAAGqtC,EAAQvtC,KAAKosC,eAAehsC,UAG3H4sC,EAAShtC,KAAKqjC,MAAM,GAAK,IAAIna,EAASlpB,KAAKosC,eAAensC,EAAGD,KAAKosC,eAAelsC,EAAGF,KAAKosC,eAAejsC,MAAOmtC,GAC/GL,EAASjtC,KAAKqjC,MAAM,GAAK,IAAIna,EAASlpB,KAAKosC,eAAensC,EAAGD,KAAKosC,eAAelsC,EAAIotC,EAAWttC,KAAKosC,eAAejsC,MAAOqtC,IAG5HR,EAAOd,OAAO3kB,IAEzB2B,EAAS9pB,UAAUiiC,OAAS,SAAU9Z,GAClC,IAAIylB,EAAShtC,KAAKqjC,MAAM,GACpB4J,EAASjtC,KAAKqjC,MAAM,GACxB,GAAI4J,GAAUD,IAAWhtC,KAAK+sC,OAAQ,CAClC,IAAIU,EAAUT,EAAO3L,OAAO9Z,GAC5B,QAAIkmB,IAGJA,EAAUR,EAAO5L,OAAO9Z,GACnBylB,EAAOE,YACHD,EAAOC,aACRltC,KAAKqjC,MAAM,GAAK,KAChBrjC,KAAKqjC,MAAM,GAAK,MAGjBoK,GAGP,OAAIztC,KAAKmsC,YAAc5kB,IACnBvnB,KAAKmsC,UAAY,YACV5kB,EAAMS,iBACbT,EAAMkB,WAAa,GACZ,IAOZS,EAtGK,GAwGhB/rB,EAAQ+rB,SAAWA,gCC1GnB,IAAI1nB,EAAaxB,MAAQA,KAAKwB,WAAe,WACzC,IAAIC,EAAgBhD,OAAOiD,iBACpBC,wBAA2BC,OAAS,SAAUvD,EAAGwD,GAAKxD,EAAEsD,UAAYE,IACvE,SAAUxD,EAAGwD,GAAK,IAAK,IAAIvC,KAAKuC,EAAOA,EAAExC,eAAeC,KAAIjB,EAAEiB,GAAKuC,EAAEvC,KACzE,OAAO,SAAUjB,EAAGwD,GAEhB,SAASC,IAAO9B,KAAK+B,YAAc1D,EADnCoD,EAAcpD,EAAGwD,GAEjBxD,EAAEe,UAAkB,OAANyC,EAAapD,OAAOuD,OAAOH,IAAMC,EAAG1C,UAAYyC,EAAEzC,UAAW,IAAI0C,IAP1C,GAUzCiF,EAAc/G,MAAQA,KAAK+G,YAAe,SAAUC,EAAYC,EAAQC,EAAKC,GAC7E,IAA2H9I,EAAvHD,EAAIgJ,UAAUvC,OAAQ/F,EAAIV,EAAI,EAAI6I,EAAkB,OAATE,EAAgBA,EAAO1I,OAAO4I,yBAAyBJ,EAAQC,GAAOC,EACrH,GAAuB,iBAAZG,SAAoD,mBAArBA,QAAQC,SAAyBzI,EAAIwI,QAAQC,SAASP,EAAYC,EAAQC,EAAKC,QACpH,IAAK,IAAIpJ,EAAIiJ,EAAWnC,OAAS,EAAG9G,GAAK,EAAGA,KAASM,EAAI2I,EAAWjJ,MAAIe,GAAKV,EAAI,EAAIC,EAAES,GAAKV,EAAI,EAAIC,EAAE4I,EAAQC,EAAKpI,GAAKT,EAAE4I,EAAQC,KAASpI,GAChJ,OAAOV,EAAI,GAAKU,GAAKL,OAAOC,eAAeuI,EAAQC,EAAKpI,GAAIA,GAEhEL,OAAOC,eAAevB,EAAS,cAAgB4B,OAAO,IACtD,IAkNIkE,EAlNAuE,EAAS3J,EAAQ,GACjBorC,EAAYprC,EAAQ,GACpB05B,EAAa15B,EAAQ,GACrBqE,EAAUrE,EAAQ,GAClBiU,EAAMhR,KAAKgR,IACXo3B,EAAsB,IAAIrmC,IAC1B20B,IAAoBv0B,MACjBf,EAAQb,WAAWo2B,SAAW,SAAU/D,EAAQga,GAC/Cha,EAAOzzB,GAAKyzB,EAAOiE,QACnBjE,EAAOxzB,GAAKwzB,EAAOiE,SAEvB10B,EAAGf,EAAQb,WAAWu2B,WAAa,SAAUlE,EAAQnM,GACjDmM,EAAOzzB,EAAIsnB,EAAMpnB,MAAQ,EACzBuzB,EAAOxzB,GAAKwzB,EAAOiE,SAEvB10B,EAAGf,EAAQb,WAAWy2B,UAAY,SAAUpE,EAAQnM,GAChDmM,EAAOzzB,EAAIsnB,EAAMpnB,MAAQuzB,EAAOiE,QAChCjE,EAAOxzB,GAAKwzB,EAAOiE,SAEvB10B,EAAGf,EAAQb,WAAW02B,YAAc,SAAUrE,EAAQnM,GAClDmM,EAAOzzB,GAAKyzB,EAAOiE,QACnBjE,EAAOxzB,EAAIqnB,EAAMnnB,OAAS,GAE9B6C,EAAGf,EAAQb,WAAW22B,QAAU,SAAUtE,EAAQnM,GAC9CmM,EAAOzzB,EAAIsnB,EAAMpnB,MAAQ,EACzBuzB,EAAOxzB,EAAIqnB,EAAMnnB,OAAS,GAE9B6C,EAAGf,EAAQb,WAAW42B,aAAe,SAAUvE,EAAQnM,GACnDmM,EAAOzzB,EAAIsnB,EAAMpnB,MAAQuzB,EAAOiE,QAChCjE,EAAOxzB,EAAIqnB,EAAMnnB,OAAS,GAE9B6C,EAAGf,EAAQb,WAAW62B,YAAc,SAAUxE,EAAQnM,GAClDmM,EAAOzzB,GAAKyzB,EAAOiE,QACnBjE,EAAOxzB,EAAIqnB,EAAMnnB,OAASszB,EAAOiE,SAErC10B,EAAGf,EAAQb,WAAW82B,cAAgB,SAAUzE,EAAQnM,GACpDmM,EAAOzzB,EAAIsnB,EAAMpnB,MAAQ,EACzBuzB,EAAOxzB,EAAIqnB,EAAMnnB,OAASszB,EAAOiE,SAErC10B,EAAGf,EAAQb,WAAW+2B,aAAe,SAAU1E,EAAQnM,GACnDmM,EAAOzzB,EAAIsnB,EAAMpnB,MAAQuzB,EAAOiE,QAChCjE,EAAOxzB,EAAIqnB,EAAMnnB,OAASszB,EAAOiE,SAErC10B,EAAGf,EAAQb,WAAWg3B,QAAU,SAAU3E,EAAQga,GAC9Cha,EAAOzzB,EAAIyzB,EAAOzzB,GAAK,EACvByzB,EAAOxzB,EAAIwzB,EAAOxzB,GAAK,GAE3B+C,GACA0qC,EAAiB,SAAUnrC,GAE3B,SAASmrC,EAAc5tC,GACnB,IAAI2C,EAAQF,EAAOtE,KAAK8B,KAAMD,IAAYC,KAC1C0C,EAAMkrC,MAAQ,EAAG,EAAG,EAAG,GACvBlrC,EAAMC,MAAQ,EACdD,EAAMtC,OAAS,EACfsC,EAAM61B,QAAUr2B,EAAQZ,UAAUk3B,UAClC91B,EAAMvC,MAAQ,EACduC,EAAMzC,EAAI,EACVyC,EAAMxC,EAAI,EACVwC,EAAMmrC,aAAe,EACrBnrC,EAAMorC,cAAgB,EACtBprC,EAAMonC,cAAe,EACrBpnC,EAAM+1B,SACFd,QAAS,EACTh0B,KAAMzB,EAAQb,WAAWo2B,QACzBx3B,EAAG,EACHC,EAAG,GAEPwC,EAAMC,MAAQ5C,EAAQ4C,OAASD,EAAMC,MACrCD,EAAMkrC,KAAO7tC,EAAQ6tC,MAAQlrC,EAAMkrC,KACnClrC,EAAM61B,QAAUx4B,EAAQw4B,SAAW71B,EAAM61B,QACzC71B,EAAMzC,EAAIF,EAAQE,GAAKyC,EAAMzC,EAC7ByC,EAAMxC,EAAIH,EAAQG,GAAKwC,EAAMxC,EAC7BwC,EAAMqrC,SAAWhuC,EAAQiW,QACzB,IAAIuP,EAAgB2jB,EAAoBrqC,IAAI6D,EAAMsrC,OAAStrC,EAAMqrC,UAoBjE,OAnBIxoB,GACAA,EAAc2kB,aAEb3kB,KACDA,GACI2kB,WAAY,EACZtuB,SAAU,IAAIqtB,EAAU3hB,mBAAmB5kB,KAEjCkZ,SAASrO,YACnBgY,EAAc3J,SAASrO,aAAe,EAC1C07B,EAAUoB,gBAAgBhjB,WAAW9B,EAAc3J,UACnDstB,EAAoBv9B,IAAIjJ,EAAMsrC,OAAStrC,EAAMqrC,SAAUxoB,IAE3D7iB,EAAMynC,eAAiB5kB,EACvB7iB,EAAMmrC,aAAetoB,EAAc3J,SAAS2J,cAAclb,MAAMlK,MAChEuC,EAAMorC,cAAgBvoB,EAAc3J,SAAS2J,cAAclb,MAAMjK,OACjEsC,EAAMvC,MAAQJ,EAAQI,OAASuC,EAAMmrC,cAAgB,EACrDnrC,EAAMtC,OAASL,EAAQK,QAAUsC,EAAMorC,eAAiB,EACxD/tC,EAAQ2zB,QAAUhxB,EAAMg2B,UAAU34B,EAAQ2zB,QACnChxB,EAiHX,OA9JAlB,EAAUmsC,EAAenrC,GA+CzBmrC,EAAczpC,QAAU,WACpBglC,EAAoB5I,SAExB7hC,OAAOC,eAAeivC,EAAcvuC,UAAW,QAC3CP,IAAK,WACD,OAAOiT,EAAI9R,KAAKG,MAAOH,KAAKI,SAEhCuL,IAAK,SAAU5M,GACX,IAAIkvC,EAASjuC,KAAKG,MAAQH,KAAKI,OAC/BJ,KAAKG,MAAQpB,EAAQkvC,EACrBjuC,KAAKI,OAASrB,GAElBH,YAAY,EACZD,cAAc,IAElBF,OAAOC,eAAeivC,EAAcvuC,UAAW,WAC3CP,IAAK,WACD,OAAOmB,KAAK+tC,UAEhBnvC,YAAY,EACZD,cAAc,IAElBF,OAAOC,eAAeivC,EAAcvuC,UAAW,eAC3CP,IAAK,WACD,OAAOmB,KAAK8pC,cAEhBlrC,YAAY,EACZD,cAAc,IAElBF,OAAOC,eAAeivC,EAAcvuC,UAAW,QAC3CP,IAAK,WACD,OAAOmB,KAAKguC,OAEhBpvC,YAAY,EACZD,cAAc,IAElBF,OAAOC,eAAeivC,EAAcvuC,UAAW,YAC3CP,IAAK,WACD,OAAOmB,KAAKmqC,eAAevuB,UAE/Bhd,YAAY,EACZD,cAAc,IAElBF,OAAOC,eAAeivC,EAAcvuC,UAAW,eAC3CP,IAAK,WACD,OAAOmB,KAAK6tC,cAEhBjvC,YAAY,EACZD,cAAc,IAElBF,OAAOC,eAAeivC,EAAcvuC,UAAW,gBAC3CP,IAAK,WACD,OAAOmB,KAAK8tC,eAEhBlvC,YAAY,EACZD,cAAc,IAElBgvC,EAAcvuC,UAAU8E,QAAU,WACzBlE,KAAK8pC,eACN9pC,KAAK8pC,cAAe,EACpB9pC,KAAKmqC,eAAeD,aACmB,IAAnClqC,KAAKmqC,eAAeD,aACpBlqC,KAAKmqC,eAAevuB,SACpBhR,QAAQC,KAAK,gDAIzBpM,OAAOC,eAAeivC,EAAcvuC,UAAW,UAC3CP,IAAK,WACD,OAAOmB,KAAKy4B,SAEhB75B,YAAY,EACZD,cAAc,IAElBgvC,EAAcvuC,UAAUs5B,UAAY,SAAUhF,GAC1C,IAAIiF,GACAhB,QAASjE,EAAOiE,SAAW,EAC3Bh0B,KAAM+vB,EAAO/vB,KACb1D,EAAGyzB,EAAOzzB,GAAK,EACfC,EAAGwzB,EAAOxzB,GAAK,GAEnBs3B,EAAiBmB,EAAUh1B,MAAMg1B,EAAW34B,MAC5CA,KAAKy4B,QAAUE,GAEnB5xB,GACIS,EAAOM,YACR6lC,EAAcvuC,UAAW,YAAQ,GACpC2H,GACIS,EAAOM,YACR6lC,EAAcvuC,UAAW,aAAS,GACrC2H,GACIS,EAAOM,YACR6lC,EAAcvuC,UAAW,cAAU,GACtC2H,GACIS,EAAOM,YACR6lC,EAAcvuC,UAAW,eAAW,GACvC2H,GACIS,EAAOM,YACR6lC,EAAcvuC,UAAW,aAAS,GACrC2H,GACIS,EAAOM,YACR6lC,EAAcvuC,UAAW,SAAK,GACjC2H,GACIS,EAAOM,YACR6lC,EAAcvuC,UAAW,SAAK,GACjC2H,GACIS,EAAOM,YACR6lC,EAAcvuC,UAAW,eAAW,GACvC2H,GACIS,EAAO8vB,UACRqW,EAAcvuC,UAAW,SAAU,MAC/BuuC,EA/JU,CAgKnBpW,EAAW9vB,UACbtK,EAAQwwC,cAAgBA,iBCnOxBvwC,EAAAD,QAAA,ymFCAAC,EAAAD,QAAA,uNCAAC,EAAAD,QAAA,6ECAAC,EAAAD,QAAA,iCCCAsB,OAAOC,eAAevB,EAAS,cAAgB4B,OAAO,IACtD,IAAImD,EAAUrE,EAAQ,GAClBoG,EAA2B,WAC3B,SAASA,EAAwB2E,GAC7B5I,KAAKkuC,YAAc,IAAIrrC,IACvB7C,KAAKmuC,YAAc,IAAItrC,IACvB7C,KAAK4I,MAAQA,EAgKjB,OA9JA3E,EAAwB7E,UAAUkZ,gBAAkB,SAAUia,EAAO6b,KAErEnqC,EAAwB7E,UAAUwY,gBAAkB,SAAUpP,EAAM2M,EAAO0C,GACvE,IAAInV,EAAQ1C,KACZ,GAAIA,KAAK4I,MAAM1F,SAAWlD,KAAK4I,MAAM1F,QAAQS,OAASzB,EAAQrC,SAASuD,IAAK,CACxE,IAAIirC,EAAcruC,KAAK4I,MAAMnG,MAAM4rC,YACnC,GAAIA,EAAa,CACb,IAAIC,EAAU9lC,EAAKwC,YAAYmK,GAC3Bo5B,EAAYvuC,KAAK4I,MAAM1F,QAAQK,QAC/BirC,EAAUxuC,KAAK4I,MAAM1F,QAAQM,SAAS6R,MAAMo5B,KAAKzuC,KAAK4I,MAAM1F,QAAQM,UACpEgkC,EAAYgH,EAAQF,GAASv4B,OAAO,SAAUvX,GAAK,OAAO+vC,EAAU/vC,EAAG8vC,EAAS9lC,KAYpF6lC,GAVIx2B,OAAQA,EACR2vB,UAAWA,EACX5+B,MAAO5I,KAAK4I,MAAMhB,GAClB6tB,WAAYjtB,EACZkmC,WAAY,SAAUC,GAClB,OAAOH,EAAQG,GAAO54B,OAAO,SAAUvX,GAAK,OAAO+vC,EAAU/vC,EAAG8vC,EAAS9lC,MAE7EuC,QAASoK,EAAMlV,EAAGkV,EAAMjV,GACxBmK,OAAQikC,EAAQruC,EAAGquC,EAAQpuC,KAG/BF,KAAKmuC,YAAY7N,QACjBkH,EAAUtiC,QAAQ,SAAU1G,GAAK,OAAOkE,EAAMyrC,YAAYxiC,IAAInN,GAAG,QAI7EyF,EAAwB7E,UAAU8X,eAAiB,SAAU1O,EAAM2M,GAC/D,GAAInV,KAAK4I,MAAM1F,SAAWlD,KAAK4I,MAAM1F,QAAQS,OAASzB,EAAQrC,SAASuD,IAAK,CACxE,IAAIwrC,EAAa5uC,KAAK4I,MAAMnG,MAAMmsC,WAClC,GAAIA,EAAY,CACZ,IAAIC,EAAUrmC,EAAKwC,YAAYmK,GAC3B25B,EAAU9uC,KAAK4I,MAAM1F,QAAQM,SAAS6R,MAAMo5B,KAAKzuC,KAAK4I,MAAM1F,QAAQM,UACpEurC,EAAY/uC,KAAK4I,MAAM1F,QAAQK,QAWnCqrC,GATIpH,UAAW5lC,MAAMo9B,KAAKh/B,KAAKkuC,YAAY9/B,QACvCxF,MAAO5I,KAAK4I,MAAMhB,GAClB6tB,WAAYjtB,EACZkmC,WAAY,SAAUC,GAClB,OAAOG,EAAQH,GAAO54B,OAAO,SAAUvX,GAAK,OAAOuwC,EAAUvwC,EAAGqwC,EAASrmC,MAE7EuC,QAASoK,EAAMlV,EAAGkV,EAAMjV,GACxBmK,OAAQwkC,EAAQ5uC,EAAG4uC,EAAQ3uC,MAKvCF,KAAKkuC,YAAY5N,QACjBtgC,KAAKmuC,YAAY7N,SAErBr8B,EAAwB7E,UAAUmZ,cAAgB,SAAU/P,EAAM2M,EAAO0C,GACrE,GAAI7X,KAAK4I,MAAM1F,SAAWlD,KAAK4I,MAAM1F,QAAQS,OAASzB,EAAQrC,SAASuD,IAAK,CACxE,IAAI4rC,EAAYhvC,KAAK4I,MAAMnG,MAAMusC,UACjC,GAAIA,EAAW,CACX,IAAIC,EAAUzmC,EAAKwC,YAAYmK,GAC3B+5B,EAAYlvC,KAAK4I,MAAM1F,QAAQK,QAC/B4rC,EAAUnvC,KAAK4I,MAAM1F,QAAQM,SAAS6R,MAAMo5B,KAAKzuC,KAAK4I,MAAM1F,QAAQM,UAaxEwrC,GAVIn3B,OAAQA,EACR2vB,UAHY2H,EAAQF,GAASl5B,OAAO,SAAUvX,GAAK,OAAO0wC,EAAU1wC,EAAGywC,EAASzmC,KAIhFI,MAAO5I,KAAK4I,MAAMhB,GAClB6tB,WAAYjtB,EACZkmC,WAAY,SAAUC,GAClB,OAAOQ,EAAQR,GAAO54B,OAAO,SAAUvX,GAAK,OAAO0wC,EAAU1wC,EAAGywC,EAASzmC,MAE7EuC,QAASoK,EAAMlV,EAAGkV,EAAMjV,GACxBmK,OAAQ4kC,EAAQhvC,EAAGgvC,EAAQ/uC,QAM3C+D,EAAwB7E,UAAUgY,gBAAkB,SAAU5O,EAAM2M,GAChE,IAAIzS,EAAQ1C,KACZ,GAAIA,KAAK4I,MAAM1F,SAAWlD,KAAK4I,MAAM1F,QAAQS,OAASzB,EAAQrC,SAASuD,IAAK,CACxE,IAAIH,EAAKjD,KAAK4I,MAAMnG,MAAO2sC,EAAcnsC,EAAGmsC,YAAaC,EAAcpsC,EAAGosC,YAAaT,EAAa3rC,EAAG2rC,WACvG,GAAIQ,GAAeC,GAAeT,EAAY,CAC1C,IAAIU,OAAO,EACPC,EAAU/mC,EAAKwC,YAAYmK,GAC3Bq6B,EAAYxvC,KAAK4I,MAAM1F,QAAQK,QAC/BksC,EAAUzvC,KAAK4I,MAAM1F,QAAQM,SAAS6R,MAAMo5B,KAAKzuC,KAAK4I,MAAM1F,QAAQM,UACpEgkC,EAAYiI,EAAQF,GAASx5B,OAAO,SAAUvX,GAAK,OAAOgxC,EAAUhxC,EAAG+wC,EAAS/mC,KACpF,GAAI4mC,EAAa,CACb,IAAIM,EAAmBlI,EAAUzxB,OAAO,SAAUvX,GAAK,OAAQkE,EAAMwrC,YAAYrvC,IAAIL,KACrF8wC,GACI9H,UAAWkI,EACX9mC,MAAO5I,KAAK4I,MAAMhB,GAClB6tB,WAAYjtB,EACZkmC,WAAY,SAAUC,GAClB,OAAOc,EAAQd,GAAO54B,OAAO,SAAUvX,GAAK,OAAOgxC,EAAUhxC,EAAG+wC,EAAS/mC,MAE7EuC,QAASoK,EAAMlV,EAAGkV,EAAMjV,GACxBmK,OAAQklC,EAAQtvC,EAAGsvC,EAAQrvC,IAE3BwvC,EAAiB7qC,OAAS,GAC1BuqC,EAAYE,GAEhBD,GAWAA,EAVAC,GACI9H,UAAWA,EACX5+B,MAAO5I,KAAK4I,MAAMhB,GAClB6tB,WAAYjtB,EACZkmC,WAAY,SAAUC,GAClB,OAAOc,EAAQd,GAAO54B,OAAO,SAAUvX,GAAK,OAAOgxC,EAAUhxC,EAAG+wC,EAAS/mC,MAE7EuC,QAASoK,EAAMlV,EAAGkV,EAAMjV,GACxBmK,OAAQklC,EAAQtvC,EAAGsvC,EAAQrvC,KAInC,IAAIyvC,EAAoB,IAAI9sC,IAE5B,GADA2kC,EAAUtiC,QAAQ,SAAU1G,GAAK,OAAOmxC,EAAkBhkC,IAAInN,GAAG,KAC7DowC,EAAY,CACZ,IAAIgB,EAAehuC,MAAMo9B,KAAKh/B,KAAKkuC,YAAY9/B,QAAQ2H,OAAO,SAAUvX,GAAK,OAAQmxC,EAAkB9wC,IAAIL,KAC3G8wC,GACI9H,UAAWoI,EACXhnC,MAAO5I,KAAK4I,MAAMhB,GAClB6tB,WAAYjtB,EACZkmC,WAAY,SAAUC,GAClB,OAAOc,EAAQd,GAAO54B,OAAO,SAAUvX,GAAK,OAAOgxC,EAAUhxC,EAAG+wC,EAAS/mC,MAE7EuC,QAASoK,EAAMlV,EAAGkV,EAAMjV,GACxBmK,OAAQklC,EAAQtvC,EAAGsvC,EAAQrvC,IAE3B0vC,EAAa/qC,OAAS,GACtB+pC,EAAWU,GAEnBtvC,KAAKkuC,YAAcyB,KAI/B1rC,EAAwB7E,UAAU2gC,iBAAmB,SAAUv3B,EAAM2M,EAAO0C,GACxE,GAAI7X,KAAK4I,MAAM1F,SAAWlD,KAAK4I,MAAM1F,QAAQS,OAASzB,EAAQrC,SAASuD,IAAK,CACxE,IAAIysC,EAAe7vC,KAAK4I,MAAMnG,MAAMotC,aACpC,GAAIA,EAAc,CACd,IAAIC,EAAUtnC,EAAKwC,YAAYmK,GAC3B46B,EAAY/vC,KAAK4I,MAAM1F,QAAQK,QAC/BysC,EAAUhwC,KAAK4I,MAAM1F,QAAQM,SAAS6R,MAAMo5B,KAAKzuC,KAAK4I,MAAM1F,QAAQM,UAaxEqsC,GAVIh4B,OAAQA,EACR2vB,UAHYwI,EAAQF,GAAS/5B,OAAO,SAAUvX,GAAK,OAAOuxC,EAAUvxC,EAAGsxC,EAAStnC,KAIhFI,MAAO5I,KAAK4I,MAAMhB,GAClB6tB,WAAYjtB,EACZkmC,WAAY,SAAUC,GAClB,OAAOqB,EAAQrB,GAAO54B,OAAO,SAAUvX,GAAK,OAAOuxC,EAAUvxC,EAAGsxC,EAAStnC,MAE7EuC,QAASoK,EAAMlV,EAAGkV,EAAMjV,GACxBmK,OAAQylC,EAAQ7vC,EAAG6vC,EAAQ5vC,QAM3C+D,EAAwB7E,UAAU6gC,gBAAkB,SAAU1N,EAAO6b,KAE9DnqC,EApKoB,GAsK/B9G,EAAQ8G,wBAA0BA,gCCxKlCxF,OAAOC,eAAevB,EAAS,cAAgB4B,OAAO,IACtD,IAAImD,EAAUrE,EAAQ,GAClBoyC,GAAoB,IAAK,IAAK,IAAK,KACnCpsC,EAAuB,WACvB,SAASA,EAAoB+E,GACzB5I,KAAK4I,MAAQA,EAoHjB,OAlHA/E,EAAoBzE,UAAU2E,iBAAmB,WAC7C,OAAI/D,KAAK4I,MAAM1F,SACPlD,KAAK4I,MAAM1F,QAAQS,OAASzB,EAAQrC,SAASuD,KAC7CpD,KAAKkwC,YAAclwC,KAAK4I,MAAM1F,SAE1BlD,KAAKmwC,mBACLnwC,KAAKowC,gBACLpwC,KAAKqwC,sBAITrwC,KAAKswC,eAAgBtwC,KAAKuwC,YAAavwC,KAAKwwC,iBAExD3sC,EAAoBzE,UAAUmxC,YAAc,SAAUhnB,EAAS/kB,EAAUisC,GACrE,GAAIA,EACAlnB,EAAQ+mB,eAAe/mB,EAAS/kB,EAAUisC,OAEzC,CACD,IAAIhsC,EAAW8kB,EAAQ3gB,MAAMzE,eAAemN,IAAI9M,GAC5CC,IACAD,EAASqD,QAAS,EAClB0hB,EAAQmnB,eAAelsC,EAAUC,MAI7CZ,EAAoBzE,UAAUgxC,gBAAkB,SAAU7mB,EAAS/kB,EAAUisC,GACzE,GAAIA,EACAlnB,EAAQ4mB,mBAAmB5mB,EAAS/kB,EAAUisC,OAE7C,CACD,IAAIhsC,EAAW8kB,EAAQ3gB,MAAMzE,eAAemN,IAAI9M,GAC5CC,IACAD,EAASqD,QAAS,EAClB0hB,EAAQmnB,eAAelsC,EAAUC,GACjC8kB,EAAQ2mB,YAAY1sC,SAAS69B,OAAO78B,GACpC+kB,EAAQ2mB,YAAY1sC,SAAS8N,IAAI9M,MAI7CX,EAAoBzE,UAAUkxC,eAAiB,SAAU/mB,EAAS/kB,EAAUisC,GACpEA,EACAlnB,EAAQmnB,eAAelsC,EAAUisC,GAGjClnB,EAAQgnB,YAAYhnB,EAAS/kB,EAAUisC,IAG/C5sC,EAAoBzE,UAAU+wC,mBAAqB,SAAU5mB,EAAS/kB,EAAUisC,GACxEA,GACAlnB,EAAQmnB,eAAelsC,EAAUisC,GACjClnB,EAAQ2mB,YAAY1sC,SAAS69B,OAAO78B,GACpC+kB,EAAQ2mB,YAAY1sC,SAAS8N,IAAI9M,IAGjC+kB,EAAQ6mB,gBAAgB7mB,EAAS/kB,EAAUisC,IAGnD5sC,EAAoBzE,UAAUoxC,eAAiB,SAAUjnB,EAAS/kB,EAAUisC,GACpEA,IACAjsC,EAASqD,QAAS,EAClB0hB,EAAQmnB,eAAelsC,EAAUisC,GACjClnB,EAAQ3gB,MAAMzE,eAAek9B,OAAO78B,KAG5CX,EAAoBzE,UAAUixC,mBAAqB,SAAU9mB,EAAS/kB,EAAUisC,GACxEA,IACAjsC,EAASqD,QAAS,EAClB0hB,EAAQmnB,eAAelsC,EAAUisC,GACjClnB,EAAQ3gB,MAAMzE,eAAek9B,OAAO78B,GACpC+kB,EAAQ2mB,YAAY1sC,SAAS69B,OAAO78B,KAG5CX,EAAoBzE,UAAUsxC,eAAiB,SAAUlsC,EAAUisC,GAC/D,GAAIjsC,EAASqD,OAAQ,CAMjB,IALA,IAAIpD,EAAWgsC,EAAensC,QAC1BqsC,EAAoBF,EAAelO,aAAa,GAChDH,EAAe39B,EAAS1F,MACxB6xC,OAAkB,EAAQ7xC,OAAQ,EAAQmH,OAAQ,EAAQ2J,OAAQ,EAClEiQ,OAAI,EAAQF,OAAO,EACd7hB,EAAI,EAAG6G,EAAM5E,KAAK4I,MAAM/C,mBAAmBhB,OAAQ9G,EAAI6G,IAAO7G,EAOnE,GALAgB,GADA6xC,EAAkB5wC,KAAK4I,MAAM/C,mBAAmB9H,IACxBiH,OAAOR,GAC/B0B,EAAQk8B,EAAauO,EAAoBC,EAAgB1qC,OACzD0qC,EAAgBvqC,OACZrG,KAAK4I,MAAMgT,SAASwjB,eAAewR,EAAgBvqC,MAAMa,UAE/CkC,KADdyG,EAAQ+gC,EAAgBzqC,YAIxB,IAAK2Z,EAAIjQ,EAAO+P,EAAO7gB,EAAM8F,OAASgL,EAAOiQ,EAAIF,IAAQE,EACrD5Z,EAAM+pC,EAAiBnwB,IAAM/gB,EAAM+gB,EAAIjQ,GAG/CpL,EAAS1F,MAAQqjC,MAEhB,CACG39B,EAAWgsC,EAAensC,QAC1BqsC,EAAoBF,EAAelO,aAAa,GAChDH,EAAe39B,EAAS1F,MACxB6xC,OAAkB,EAAQ7xC,OAAQ,EAAQmH,OAAQ,EAAQ2J,OAAQ,EAOtE,GALA9Q,GADA6xC,EAAkB5wC,KAAK4I,MAAMyV,iBACLrZ,OAAOR,GAC/B0B,EAAQk8B,EAAauO,EAAoBC,EAAgB1qC,OACzD0qC,EAAgBvqC,OACZrG,KAAK4I,MAAMgT,SAASwjB,eAAewR,EAAgBvqC,MAAMa,UAE/CkC,KADdyG,EAAQ+gC,EAAgBzqC,YAEpB,IAAS2Z,EAAIjQ,EAAO+P,EAAO7gB,EAAM8F,OAASgL,EAAOiQ,EAAIF,IAAQE,EACzD5Z,EAAM+pC,EAAiBnwB,IAAM/gB,EAAM+gB,EAAIjQ,GAG/CpL,EAAS1F,MAAQqjC,IAGlBv+B,EAtHgB,GAwH3B1G,EAAQ0G,oBAAsBA,gCC3H9BpF,OAAOC,eAAevB,EAAS,cAAgB4B,OAAO,IACtD,IAAI8xC,EAAM,EAIV1zC,EAAQwf,IAHR,WACI,QAASk0B,GAGb,IAAIC,EAAO,EAIX3zC,EAAQ4zC,SAHR,WACI,QAASD,EAAO,wCCRpB,IAAItvC,EAAaxB,MAAQA,KAAKwB,WAAe,WACzC,IAAIC,EAAgBhD,OAAOiD,iBACpBC,wBAA2BC,OAAS,SAAUvD,EAAGwD,GAAKxD,EAAEsD,UAAYE,IACvE,SAAUxD,EAAGwD,GAAK,IAAK,IAAIvC,KAAKuC,EAAOA,EAAExC,eAAeC,KAAIjB,EAAEiB,GAAKuC,EAAEvC,KACzE,OAAO,SAAUjB,EAAGwD,GAEhB,SAASC,IAAO9B,KAAK+B,YAAc1D,EADnCoD,EAAcpD,EAAGwD,GAEjBxD,EAAEe,UAAkB,OAANyC,EAAapD,OAAOuD,OAAOH,IAAMC,EAAG1C,UAAYyC,EAAEzC,UAAW,IAAI0C,IAP1C,GAU7CrD,OAAOC,eAAevB,EAAS,cAAgB4B,OAAO,IACtD,IAAIwK,EAAW1L,EAAQ,GAGnB+kC,EAAa,WACb,SAASA,EAAU3hC,EAAQ0B,EAAOquC,EAAWC,EAAaC,GACtD,IAAIrO,EAAM5hC,EAAO4hC,IACjB7iC,KAAK8iC,GAAK,IAAIC,EAAK9hC,EAAOhB,EAAG4iC,EAAI5iC,EAAGgB,EAAOf,EAAG2iC,EAAI3iC,EAAG8wC,EAAWruC,GAChE3C,KAAKgjC,GAAK,IAAID,EAAKF,EAAI5iC,EAAGgB,EAAOT,MAAOS,EAAOf,EAAG2iC,EAAI3iC,EAAG8wC,EAAWruC,GACpE3C,KAAKijC,GAAK,IAAIF,EAAK9hC,EAAOhB,EAAG4iC,EAAI5iC,EAAG4iC,EAAI3iC,EAAGe,EAAOV,OAAQywC,EAAWruC,GACrE3C,KAAKkjC,GAAK,IAAIH,EAAKF,EAAI5iC,EAAGgB,EAAOT,MAAOqiC,EAAI3iC,EAAGe,EAAOV,OAAQywC,EAAWruC,GACzE3C,KAAK8iC,GAAGmO,YAAcA,EACtBjxC,KAAKgjC,GAAGiO,YAAcA,EACtBjxC,KAAKijC,GAAGgO,YAAcA,EACtBjxC,KAAKkjC,GAAG+N,YAAcA,EACtBjxC,KAAK8iC,GAAGoO,cAAgBA,EACxBlxC,KAAKgjC,GAAGkO,cAAgBA,EACxBlxC,KAAKijC,GAAGiO,cAAgBA,EACxBlxC,KAAKkjC,GAAGgO,cAAgBA,EAY5B,OAVAtO,EAAUxjC,UAAU8E,QAAU,WAC1BlE,KAAK8iC,GAAG5+B,UACRlE,KAAKgjC,GAAG9+B,UACRlE,KAAKijC,GAAG/+B,UACRlE,KAAKkjC,GAAGh/B,iBACDlE,KAAK8iC,UACL9iC,KAAKgjC,UACLhjC,KAAKijC,UACLjjC,KAAKkjC,IAETN,EA1BM,GA4BjBzlC,EAAQylC,UAAYA,EACpB,IAAIG,EAAQ,WACR,SAASA,EAAK1iC,EAAMG,EAAOF,EAAKC,EAAQywC,EAAWruC,QACjC,IAAVA,IAAoBA,EAAQ,GAChC3C,KAAKmjC,YACLnjC,KAAK2C,MAAQ,EACb3C,KAAKojC,MAAQ,KACTh8B,UAAUvC,QAAU,EACpB7E,KAAKiB,OAAS,IAAIsI,EAASzJ,QAASO,KAAMA,EAAMG,MAAOA,EAAOF,IAAKA,EAAKC,OAAQA,IAGhFP,KAAKiB,OAAS,IAAIsI,EAASzJ,QAASO,KAAM,EAAGG,MAAO,EAAGF,IAAK,EAAGC,OAAQ,IAE3EP,KAAK2C,MAAQA,EACb3C,KAAKgxC,UAAYA,EACE,IAAfhxC,KAAK2C,QACL3C,KAAKmxC,eACLnxC,KAAKixC,YAAc,IAAIpuC,IACvB7C,KAAKkxC,cAAgB,IAAIruC,KAwPjC,OArPAkgC,EAAK3jC,UAAU8E,QAAU,kBACdlE,KAAKmjC,gBACLnjC,KAAKiB,OACRjB,KAAKojC,QACLpjC,KAAKojC,MAAMl/B,UACXlE,KAAKojC,MAAQ,OAGrBL,EAAK3jC,UAAUkS,IAAM,SAAU+xB,GAC3B,IAAIpiC,EAASjB,KAAKkxC,cAAcryC,IAAIwkC,GAKpC,OAJKpiC,IACDA,EAASjB,KAAKgxC,UAAU3N,GACxBrjC,KAAKkxC,cAAcvlC,IAAI03B,EAAOpiC,KAE7BA,GAAUA,EAAOE,SAASnB,KAAKiB,QACzBjB,KAAKsjC,MAAMD,EAAOpiC,IAGzBjB,KAAKujC,MAAMtiC,GACJjB,KAAKsR,IAAI+xB,KAGxBN,EAAK3jC,UAAUwW,OAAS,SAAUutB,GAC9B,IAAIzgC,EAAQ1C,KACRmlB,EAAO8B,OAAOsU,UACdnW,EAAO6B,OAAOsU,UACdlW,GAAQ4B,OAAOsU,UACfjW,GAAQ2B,OAAOsU,UACnB4H,EAASj+B,QAAQ,SAAUm+B,GACvB,IAAIpiC,EAASyB,EAAMsuC,UAAU3N,GAC7B3gC,EAAMwuC,cAAcvlC,IAAI03B,EAAOpiC,GAC1BA,IAEDA,EAAOhB,EAAIklB,IACXA,EAAOlkB,EAAOhB,GAEdgB,EAAOT,MAAQ6kB,IACfA,EAAOpkB,EAAOT,OAEdS,EAAOV,OAAS+kB,IAChBA,EAAOrkB,EAAOV,QAEdU,EAAOf,EAAIklB,IACXA,EAAOnkB,EAAOf,MAGlBilB,IAAS8B,OAAOsU,WAChBnW,IAAS6B,OAAOsU,WAChBlW,KAAU4B,OAAOsU,WACjBjW,KAAU2B,OAAOsU,WACjBv7B,KAAKujC,MAAM,IAAIh6B,EAASzJ,QAASO,KAAM8kB,EAAM3kB,MAAO6kB,EAAM9kB,OAAQ+kB,EAAMhlB,IAAK8kB,KAEjF+d,EAASj+B,QAAQ,SAAUm+B,GACvB,OAAO3gC,EAAM4gC,MAAMD,EAAO3gC,EAAMwuC,cAAcryC,IAAIwkC,IAAU,MAAM,MAG1EN,EAAK3jC,UAAUmkC,MAAQ,SAAUtiC,GAC7B,IAAIyB,EAAQ1C,KACZ,IAAIiB,EAAOE,SAASnB,KAAKiB,QAAzB,CAGAjB,KAAKiB,OAAOL,YAAYK,GACxBjB,KAAKiB,OAAOhB,GAAK,EACjBD,KAAKiB,OAAOf,GAAK,EACjBF,KAAKiB,OAAOd,OAAS,EACrBH,KAAKiB,OAAOb,QAAU,EACtB,IAAIqjC,EAAczjC,KAAK0jC,mBACvB1jC,KAAKmjC,YACDnjC,KAAKojC,QACLpjC,KAAKojC,MAAMl/B,UACXlE,KAAKojC,MAAQ,MAEjBpjC,KAAKixC,YAAY3Q,QACjBmD,EAAYv+B,QAAQ,SAAUm+B,GAC1B,OAAO3gC,EAAM4gC,MAAMD,EAAO3gC,EAAMwuC,cAAcryC,IAAIwkC,IAAU,UAGpEN,EAAK3jC,UAAUkkC,MAAQ,SAAUD,EAAOpiC,EAAQmwC,GAC5C,OAAKnwC,GAAyB,IAAfjB,KAAK2C,MAKf1B,EAIDjB,KAAKojC,MACDniC,EAAOE,SAASnB,KAAKojC,MAAMN,GAAG7hC,QACvBjB,KAAKojC,MAAMN,GAAGQ,MAAMD,EAAOpiC,EAAQmwC,GAE1CnwC,EAAOE,SAASnB,KAAKojC,MAAMJ,GAAG/hC,QACvBjB,KAAKojC,MAAMJ,GAAGM,MAAMD,EAAOpiC,EAAQmwC,GAE1CnwC,EAAOE,SAASnB,KAAKojC,MAAMH,GAAGhiC,QACvBjB,KAAKojC,MAAMH,GAAGK,MAAMD,EAAOpiC,EAAQmwC,GAE1CnwC,EAAOE,SAASnB,KAAKojC,MAAMF,GAAGjiC,QACvBjB,KAAKojC,MAAMF,GAAGI,MAAMD,EAAOpiC,EAAQmwC,IAE9CpxC,KAAKmjC,SAASx2B,KAAK02B,GACnBrjC,KAAKixC,YAAYtlC,IAAI03B,EAAOrjC,OACrB,GAEFiB,EAAOE,SAASnB,KAAKiB,SAC1BjB,KAAKmjC,SAASx2B,KAAK02B,GACnBrjC,KAAKixC,YAAYtlC,IAAI03B,EAAOrjC,MACxBA,KAAKmjC,SAASt+B,OA9JV,GA8JoC7E,KAAK2C,MA7J9C,IA8JC3C,KAAK2jC,SAEF,IAEPC,MAAM3iC,EAAOd,MAAQc,EAAOb,OAASa,EAAOhB,EAAIgB,EAAOf,GACvD0K,QAAQgE,MAAM,2DAA4Dy0B,EAAOpiC,GAE5D,IAAhBA,EAAO4iC,KACZj5B,QAAQgE,MAAM,yDAA0Dy0B,EAAOpiC,GAG/E2J,QAAQgE,MAAM,+BAAgC,UAAW5O,KAAKiB,OAAOG,WAAY,SAAUH,EAAOG,WAAY,iBAAkBH,EAAOhB,GAAKD,KAAKiB,OAAOhB,EAAGgB,EAAOT,OAASR,KAAKiB,OAAOT,MAAOS,EAAOf,GAAKF,KAAKiB,OAAOf,EAAGe,EAAOV,QAAUP,KAAKiB,OAAOV,SAEnP,IArCHqK,QAAQC,KAAK,sFACN,IANP7K,KAAKmxC,YAAYxkC,KAAK02B,GACtBrjC,KAAKixC,YAAYtlC,IAAI03B,EAAOrjC,OACrB,IA0Cf+iC,EAAK3jC,UAAUiyC,SAAW,SAAUhO,GAChC,IAAIv2B,EAAQ9M,KAAKmjC,SAASp2B,QAAQs2B,GAC9Bv2B,GAAS,IACT9M,KAAKmjC,SAASn2B,OAAOF,EAAO,GAC5B9M,KAAKixC,YAAYnS,OAAOuE,GACxBrjC,KAAKkxC,cAAcpS,OAAOuE,KAGlCN,EAAK3jC,UAAUskC,eAAiB,SAAUI,GAQtC,OAPA9jC,KAAKmjC,SAASj+B,QAAQ,SAAUm+B,GAAS,OAAOS,EAAKn3B,KAAK02B,KACtDrjC,KAAKojC,QACLpjC,KAAKojC,MAAMN,GAAGY,eAAeI,GAC7B9jC,KAAKojC,MAAMJ,GAAGU,eAAeI,GAC7B9jC,KAAKojC,MAAMH,GAAGS,eAAeI,GAC7B9jC,KAAKojC,MAAMF,GAAGQ,eAAeI,IAE1BA,GAEXf,EAAK3jC,UAAUiW,MAAQ,SAAUpU,EAAQ8iC,GACrC,IAAIpP,KAIJ,OAHmB,IAAf30B,KAAK2C,QACLgyB,EAAQ30B,KAAKmxC,YAAY/hC,MAAM,IAE/BnO,aAAkBsI,EAASzJ,QACvBmB,EAAOC,UAAUlB,KAAKiB,QACfjB,KAAKgkC,YAAY/iC,EAAQ0zB,EAAOoP,GAG3C/jC,KAAKiB,OAAOP,cAAcO,GACnBjB,KAAKikC,WAAWhjC,EAAQ0zB,EAAOoP,GAEnCpP,GAEXoO,EAAK3jC,UAAU4kC,YAAc,SAAUniC,EAAGiiC,EAAMC,GAC5C,IAAIrhC,EAAQ1C,KAwBZ,OAvBAA,KAAKmjC,SAASj+B,QAAQ,SAAU9G,GAC5B,IAAI6C,EAASyB,EAAMwuC,cAAcryC,IAAIT,GACjC6C,GAAUA,EAAOC,UAAUW,IAC3BiiC,EAAKn3B,KAAKvO,KAGd2lC,GACAA,EAAM/jC,MAENA,KAAKojC,QACDvhC,EAAEX,UAAUlB,KAAKojC,MAAMN,GAAG7hC,SAC1BjB,KAAKojC,MAAMN,GAAGkB,YAAYniC,EAAGiiC,EAAMC,GAEnCliC,EAAEX,UAAUlB,KAAKojC,MAAMJ,GAAG/hC,SAC1BjB,KAAKojC,MAAMJ,GAAGgB,YAAYniC,EAAGiiC,EAAMC,GAEnCliC,EAAEX,UAAUlB,KAAKojC,MAAMH,GAAGhiC,SAC1BjB,KAAKojC,MAAMH,GAAGe,YAAYniC,EAAGiiC,EAAMC,GAEnCliC,EAAEX,UAAUlB,KAAKojC,MAAMF,GAAGjiC,SAC1BjB,KAAKojC,MAAMF,GAAGc,YAAYniC,EAAGiiC,EAAMC,IAGpCD,GAEXf,EAAK3jC,UAAU6kC,WAAa,SAAU3kC,EAAGwkC,EAAMC,GAC3C,IAAIrhC,EAAQ1C,KAwBZ,OAvBAA,KAAKmjC,SAASj+B,QAAQ,SAAU9G,GAC5B,IAAI6C,EAASyB,EAAMwuC,cAAcryC,IAAIT,GACjC6C,GAAUA,EAAOP,cAAcpB,IAC/BwkC,EAAKn3B,KAAKvO,KAGd2lC,GACAA,EAAM/jC,MAENA,KAAKojC,QACDpjC,KAAKojC,MAAMN,GAAG7hC,OAAOP,cAAcpB,IACnCU,KAAKojC,MAAMN,GAAGmB,WAAW3kC,EAAGwkC,EAAMC,GAElC/jC,KAAKojC,MAAMJ,GAAG/hC,OAAOP,cAAcpB,IACnCU,KAAKojC,MAAMJ,GAAGiB,WAAW3kC,EAAGwkC,EAAMC,GAElC/jC,KAAKojC,MAAMH,GAAGhiC,OAAOP,cAAcpB,IACnCU,KAAKojC,MAAMH,GAAGgB,WAAW3kC,EAAGwkC,EAAMC,GAElC/jC,KAAKojC,MAAMF,GAAGjiC,OAAOP,cAAcpB,IACnCU,KAAKojC,MAAMF,GAAGe,WAAW3kC,EAAGwkC,EAAMC,IAGnCD,GAEXf,EAAK3jC,UAAUiiC,OAAS,SAAUgC,GAC9B,GAAIrjC,KAAKixC,YAAa,CAClB,IAAIK,EAAOtxC,KAAKixC,YAAYpyC,IAAIwkC,GAChC,GAAIiO,GAAuB,IAAfA,EAAK3uC,MAAa,CAC1B,IAAImK,EAAQwkC,EAAKH,YAAYpkC,QAAQs2B,GACrC,GAAIv2B,GAAS,EAIT,OAHAwkC,EAAKH,YAAYnkC,OAAOF,GACxB9M,KAAKixC,YAAYnS,OAAOuE,QACxBrjC,KAAKkxC,cAAcpS,OAAOuE,GAI9BiO,GACAA,EAAKD,SAAShO,KAI1BN,EAAK3jC,UAAUukC,MAAQ,WACnB,IAAIF,EAAczjC,KAAK0jC,mBACvB1jC,KAAKojC,MAAQ,IAAIR,EAAU5iC,KAAKiB,OAAQjB,KAAK2C,MAAQ,EAAG3C,KAAKgxC,UAAWhxC,KAAKixC,YAAajxC,KAAKkxC,eAC/FlxC,KAAKmjC,YACL,IAAK,IAAIplC,EAAI,EAAG6G,EAAM6+B,EAAY5+B,OAAQ9G,EAAI6G,IAAO7G,EAAG,CACpD,IAAIslC,EAAQI,EAAY1lC,GACxBiC,KAAKsjC,MAAMD,EAAOrjC,KAAKkxC,cAAcryC,IAAIwkC,IAAU,MAAM,KAGjEN,EAAK3jC,UAAU2kC,MAAQ,SAAUG,GAC7B,IAAIC,EAAWj7B,QAAQg7B,EAAGlkC,OACtBA,KAAKojC,QAAUe,IACfnkC,KAAKojC,MAAMN,GAAGiB,MAAMG,GACpBlkC,KAAKojC,MAAMJ,GAAGe,MAAMG,GACpBlkC,KAAKojC,MAAMH,GAAGc,MAAMG,GACpBlkC,KAAKojC,MAAMF,GAAGa,MAAMG,KAGrBnB,EAzQC,GA2QZ5lC,EAAQ4lC,KAAOA,EACf,IAAIt/B,EAAmB,SAAUjB,GAE7B,SAASiB,IACL,OAAkB,OAAXjB,GAAmBA,EAAOwM,MAAMhP,KAAMoH,YAAcpH,KAE/D,OAJAwB,EAAUiC,EAAiBjB,GAIpBiB,EALY,CAMrBs/B,GACF5lC,EAAQsG,gBAAkBA,gCC9T1B,IAAIjC,EAAaxB,MAAQA,KAAKwB,WAAe,WACzC,IAAIC,EAAgBhD,OAAOiD,iBACpBC,wBAA2BC,OAAS,SAAUvD,EAAGwD,GAAKxD,EAAEsD,UAAYE,IACvE,SAAUxD,EAAGwD,GAAK,IAAK,IAAIvC,KAAKuC,EAAOA,EAAExC,eAAeC,KAAIjB,EAAEiB,GAAKuC,EAAEvC,KACzE,OAAO,SAAUjB,EAAGwD,GAEhB,SAASC,IAAO9B,KAAK+B,YAAc1D,EADnCoD,EAAcpD,EAAGwD,GAEjBxD,EAAEe,UAAkB,OAANyC,EAAapD,OAAOuD,OAAOH,IAAMC,EAAG1C,UAAYyC,EAAEzC,UAAW,IAAI0C,IAP1C,GAU7CrD,OAAOC,eAAevB,EAAS,cAAgB4B,OAAO,IACtD,IACIwyC,EAAmB,SAAU/uC,GAE7B,SAAS+uC,EAAgBxxC,GACrB,IAAI2C,EAAQF,EAAOtE,KAAK8B,OAASA,KAIjC,OAHA0C,EAAM8uC,aAAe,SAAUjnC,GAAU,OAAOA,GAChD7H,EAAM+vB,YAAc,SAAUjoB,GAAS,OAAOA,GAC9C/L,OAAOsE,OAAOL,EAAO3C,GACd2C,EAoBX,OA1BAlB,EAAU+vC,EAAiB/uC,GAQ3B/D,OAAOC,eAAe6yC,EAAgBnyC,UAAW,UAC7CP,IAAK,WACD,OAAOmB,KAAKwxC,aAAaxxC,KAAKyxC,KAAKlnC,SAEvCoB,IAAK,SAAU+lC,KAEf9yC,YAAY,EACZD,cAAc,IAElBF,OAAOC,eAAe6yC,EAAgBnyC,UAAW,SAC7CP,IAAK,WACD,OAAOmB,KAAKyyB,YAAYzyB,KAAKyxC,KAAKjnC,QAEtCmB,IAAK,SAAU+lC,KAEf9yC,YAAY,EACZD,cAAc,IAEX4yC,EA3BY,CADF1zC,EAAQ,IA6BZqR,aACjB/R,EAAQo0C,gBAAkBA,iBCtC1B,IAAAhyC,EAAA,IACApB,EAAA,GAAAoB,EACAoyC,EAAA,GAAAxzC,EACAE,EAAA,GAAAszC,EACAzxC,EAAA,OAAA7B,EAuIA,SAAAuzC,EAAAC,EAAA7yC,EAAAV,GACA,KAAAuzC,EAAA7yC,GAGA,OAAA6yC,EAAA,IAAA7yC,EACA8B,KAAAyjB,MAAAstB,EAAA7yC,GAAA,IAAAV,EAEAwC,KAAA8lC,KAAAiL,EAAA7yC,GAAA,IAAAV,EAAA,IA9HAlB,EAAAD,QAAA,SAAA8L,EAAAlJ,GACAA,QACA,IAAA4D,SAAAsF,EACA,cAAAtF,GAAAsF,EAAApE,OAAA,EACA,OAkBA,SAAAitC,GAEA,IADAA,EAAAC,OAAAD,IACAjtC,OAAA,IACA,OAEA,IAAAsJ,EAAA,wHAAA6jC,KACAF,GAEA,IAAA3jC,EACA,OAEA,IAAAnP,EAAAylC,WAAAt2B,EAAA,IAEA,QADAA,EAAA,UAAAmgB,eAEA,YACA,WACA,UACA,SACA,QACA,OAAAtvB,EAAAkB,EACA,WACA,UACA,QACA,OAAAlB,EAAAX,EACA,YACA,WACA,UACA,SACA,QACA,OAAAW,EAAA2yC,EACA,cACA,aACA,WACA,UACA,QACA,OAAA3yC,EAAAb,EACA,cACA,aACA,WACA,UACA,QACA,OAAAa,EAAAO,EACA,mBACA,kBACA,YACA,WACA,SACA,OAAAP,EACA,QACA,QAnEAulC,CAAAt7B,GACG,cAAAtF,IAAA,IAAAigC,MAAA36B,GACH,OAAAlJ,EAAAkyC,KAqGA,SAAAJ,GACA,OAAAD,EAAAC,EAAAxzC,EAAA,QACAuzC,EAAAC,EAAAF,EAAA,SACAC,EAAAC,EAAA1zC,EAAA,WACAyzC,EAAAC,EAAAtyC,EAAA,WACAsyC,EAAA,MA1GAK,CAAAjpC,GA6EA,SAAA4oC,GACA,GAAAA,GAAAxzC,EACA,OAAAyC,KAAAkR,MAAA6/B,EAAAxzC,GAAA,IAEA,GAAAwzC,GAAAF,EACA,OAAA7wC,KAAAkR,MAAA6/B,EAAAF,GAAA,IAEA,GAAAE,GAAA1zC,EACA,OAAA2C,KAAAkR,MAAA6/B,EAAA1zC,GAAA,IAEA,GAAA0zC,GAAAtyC,EACA,OAAAuB,KAAAkR,MAAA6/B,EAAAtyC,GAAA,IAEA,OAAAsyC,EAAA,KA1FAM,CAAAlpC,GAEA,UAAA7D,MACA,wDACAkqB,KAAAC,UAAAtmB,sBC2BA,SAAAmpC,EAAAvkB,GAEA,IAAAwkB,EAEA,SAAAhlB,IAEA,GAAAA,EAAAilB,QAAA,CAEA,IAAAC,EAAAllB,EAGAmlB,GAAA,IAAA/6B,KACAo6B,EAAAW,GAAAH,GAAAG,GACAD,EAAAxkB,KAAA8jB,EACAU,EAAAE,KAAAJ,EACAE,EAAAC,OACAH,EAAAG,EAIA,IADA,IAAA7kB,EAAA,IAAA/rB,MAAAwF,UAAAvC,QACA9G,EAAA,EAAmBA,EAAA4vB,EAAA9oB,OAAiB9G,IACpC4vB,EAAA5vB,GAAAqJ,UAAArJ,GAGA4vB,EAAA,GAAAxwB,EAAAu1C,OAAA/kB,EAAA,IAEA,iBAAAA,EAAA,IAEAA,EAAA8C,QAAA,MAIA,IAAA3jB,EAAA,EACA6gB,EAAA,GAAAA,EAAA,GAAA1f,QAAA,yBAAAE,EAAAwkC,GAEA,UAAAxkC,EAAA,OAAAA,EACArB,IACA,IAAA8lC,EAAAz1C,EAAAkyB,WAAAsjB,GACA,sBAAAC,EAAA,CACA,IAAA3pC,EAAA0kB,EAAA7gB,GACAqB,EAAAykC,EAAA10C,KAAAq0C,EAAAtpC,GAGA0kB,EAAA3gB,OAAAF,EAAA,GACAA,IAEA,OAAAqB,IAIAhR,EAAAuwB,WAAAxvB,KAAAq0C,EAAA5kB,IAEAN,EAAAG,KAAArwB,EAAAqwB,KAAA5iB,QAAA4iB,IAAAihB,KAAA7jC,UACAoE,MAAAujC,EAAA5kB,IAgBA,OAbAN,EAAAQ,YACAR,EAAAilB,QAAAn1C,EAAAm1C,QAAAzkB,GACAR,EAAAO,UAAAzwB,EAAAywB,YACAP,EAAA1F,MA9EA,SAAAkG,GACA,IAAA9vB,EAAA80C,EAAA,EAEA,IAAA90C,KAAA8vB,EACAglB,MAAA,GAAAA,EAAAhlB,EAAAilB,WAAA/0C,GACA80C,GAAA,EAGA,OAAA11C,EAAAiyB,OAAAtuB,KAAAC,IAAA8xC,GAAA11C,EAAAiyB,OAAAvqB,QAsEAkuC,CAAAllB,GACAR,EAAAnpB,UAGA,mBAAA/G,EAAA61C,MACA71C,EAAA61C,KAAA3lB,GAGAlwB,EAAAqqC,UAAA76B,KAAA0gB,GAEAA,EAGA,SAAAnpB,IACA,IAAA4I,EAAA3P,EAAAqqC,UAAAz6B,QAAA/M,MACA,WAAA8M,IACA3P,EAAAqqC,UAAAx6B,OAAAF,EAAA,IACA,IAjIA3P,EAAAC,EAAAD,QAAAi1C,EAAA/kB,MAAA+kB,EAAA,QAAAA,GACAM,OAoNA,SAAAzpC,GACA,OAAAA,aAAA7D,MAAA6D,EAAAgqC,OAAAhqC,EAAAwmB,QACAxmB,GArNA9L,EAAA+1C,QA6KA,WACA/1C,EAAAuyB,OAAA,KA7KAvyB,EAAAuyB,OA4IA,SAAAxB,GAMA,IAAAnwB,EALAZ,EAAA8wB,KAAAC,GAEA/wB,EAAAg2C,SACAh2C,EAAAi2C,SAGA,IAAAzP,GAAA,iBAAAzV,IAAA,IAAAyV,MAAA,UACA0P,EAAA1P,EAAA9+B,OAEA,IAAA9G,EAAA,EAAaA,EAAAs1C,EAASt1C,IACtB4lC,EAAA5lC,KAEA,OADAmwB,EAAAyV,EAAA5lC,GAAAkQ,QAAA,cACA,GACA9Q,EAAAi2C,MAAAzmC,KAAA,IAAAmiB,OAAA,IAAAZ,EAAAnI,OAAA,SAEA5oB,EAAAg2C,MAAAxmC,KAAA,IAAAmiB,OAAA,IAAAZ,EAAA,OAIA,IAAAnwB,EAAA,EAAaA,EAAAZ,EAAAqqC,UAAA3iC,OAA8B9G,IAAA,CAC3C,IAAAyG,EAAArH,EAAAqqC,UAAAzpC,GACAyG,EAAA8tC,QAAAn1C,EAAAm1C,QAAA9tC,EAAAqpB,aAjKA1wB,EAAAm1C,QAuLA,SAAAh0C,GACA,SAAAA,IAAAuG,OAAA,GACA,SAEA,IAAA9G,EAAAs1C,EACA,IAAAt1C,EAAA,EAAAs1C,EAAAl2C,EAAAi2C,MAAAvuC,OAAyC9G,EAAAs1C,EAASt1C,IAClD,GAAAZ,EAAAi2C,MAAAr1C,GAAAoe,KAAA7d,GACA,SAGA,IAAAP,EAAA,EAAAs1C,EAAAl2C,EAAAg2C,MAAAtuC,OAAyC9G,EAAAs1C,EAASt1C,IAClD,GAAAZ,EAAAg2C,MAAAp1C,GAAAoe,KAAA7d,GACA,SAGA,UArMAnB,EAAA2wB,SAAAjwB,EAAA,KAKAV,EAAAqqC,aAMArqC,EAAAg2C,SACAh2C,EAAAi2C,SAQAj2C,EAAAkyB,6BChCA,IAOAikB,EACAC,EARArmB,EAAA9vB,EAAAD,WAUA,SAAAq2C,IACA,UAAApuC,MAAA,mCAEA,SAAAquC,IACA,UAAAruC,MAAA,qCAsBA,SAAAsuC,EAAAC,GACA,GAAAL,IAAA3uB,WAEA,OAAAA,WAAAgvB,EAAA,GAGA,IAAAL,IAAAE,IAAAF,IAAA3uB,WAEA,OADA2uB,EAAA3uB,WACAA,WAAAgvB,EAAA,GAEA,IAEA,OAAAL,EAAAK,EAAA,GACK,MAAAzwB,GACL,IAEA,OAAAowB,EAAAp1C,KAAA,KAAAy1C,EAAA,GACS,MAAAzwB,GAET,OAAAowB,EAAAp1C,KAAA8B,KAAA2zC,EAAA,MAvCA,WACA,IAEAL,EADA,mBAAA3uB,WACAA,WAEA6uB,EAEK,MAAAtwB,GACLowB,EAAAE,EAEA,IAEAD,EADA,mBAAAK,aACAA,aAEAH,EAEK,MAAAvwB,GACLqwB,EAAAE,GAjBA,GAwEA,IAEAI,EAFAC,KACAC,GAAA,EAEAC,GAAA,EAEA,SAAAC,IACAF,GAAAF,IAGAE,GAAA,EACAF,EAAAhvC,OACAivC,EAAAD,EAAA5kC,OAAA6kC,GAEAE,GAAA,EAEAF,EAAAjvC,QACAqvC,KAIA,SAAAA,IACA,IAAAH,EAAA,CAGA,IAAAI,EAAAT,EAAAO,GACAF,GAAA,EAGA,IADA,IAAAV,EAAAS,EAAAjvC,OACAwuC,GAAA,CAGA,IAFAQ,EAAAC,EACAA,OACAE,EAAAX,GACAQ,GACAA,EAAAG,GAAAI,MAGAJ,GAAA,EACAX,EAAAS,EAAAjvC,OAEAgvC,EAAA,KACAE,GAAA,EAnEA,SAAAM,GACA,GAAAd,IAAAK,aAEA,OAAAA,aAAAS,GAGA,IAAAd,IAAAE,IAAAF,IAAAK,aAEA,OADAL,EAAAK,aACAA,aAAAS,GAEA,IAEAd,EAAAc,GACK,MAAAnxB,GACL,IAEA,OAAAqwB,EAAAr1C,KAAA,KAAAm2C,GACS,MAAAnxB,GAGT,OAAAqwB,EAAAr1C,KAAA8B,KAAAq0C,KAgDAC,CAAAH,IAiBA,SAAAI,EAAAZ,EAAAa,GACAx0C,KAAA2zC,MACA3zC,KAAAw0C,QAYA,SAAAC,KA5BAvnB,EAAAwnB,SAAA,SAAAf,GACA,IAAAhmB,EAAA,IAAA/rB,MAAAwF,UAAAvC,OAAA,GACA,GAAAuC,UAAAvC,OAAA,EACA,QAAA9G,EAAA,EAAuBA,EAAAqJ,UAAAvC,OAAsB9G,IAC7C4vB,EAAA5vB,EAAA,GAAAqJ,UAAArJ,GAGA+1C,EAAAnnC,KAAA,IAAA4nC,EAAAZ,EAAAhmB,IACA,IAAAmmB,EAAAjvC,QAAAkvC,GACAL,EAAAQ,IASAK,EAAAn1C,UAAAg1C,IAAA,WACAp0C,KAAA2zC,IAAA3kC,MAAA,KAAAhP,KAAAw0C,QAEAtnB,EAAAynB,MAAA,UACAznB,EAAAyC,SAAA,EACAzC,EAAAI,OACAJ,EAAA0nB,QACA1nB,EAAA0D,QAAA,GACA1D,EAAA2nB,YAIA3nB,EAAA4nB,GAAAL,EACAvnB,EAAA6nB,YAAAN,EACAvnB,EAAA8nB,KAAAP,EACAvnB,EAAA+nB,IAAAR,EACAvnB,EAAAgoB,eAAAT,EACAvnB,EAAAioB,mBAAAV,EACAvnB,EAAAkoB,KAAAX,EACAvnB,EAAAmoB,gBAAAZ,EACAvnB,EAAAooB,oBAAAb,EAEAvnB,EAAAqoB,UAAA,SAAAj3C,GAAqC,UAErC4uB,EAAAsoB,QAAA,SAAAl3C,GACA,UAAA8G,MAAA,qCAGA8nB,EAAAuoB,IAAA,WAA2B,WAC3BvoB,EAAAwoB,MAAA,SAAAC,GACA,UAAAvwC,MAAA,mCAEA8nB,EAAA0oB,MAAA,WAA4B,yBCvL5Bx4C,EAAAD,QAAAQ,gCCCAc,OAAOC,eAAevB,EAAS,cAAgB4B,OAAO,IACtD,IACI82C,EADAruC,EAAS3J,EAAQ,IAErB,SAAWg4C,GACPA,EAASA,EAAA,OAAqB,GAAK,SACnCA,EAASA,EAAA,OAAqB,GAAK,SACnCA,EAASA,EAAA,OAAqB,GAAK,SAHvC,CAIGA,EAAW14C,EAAQ04C,WAAa14C,EAAQ04C,cAI3C,IAAIC,EAAc,SAEd3Y,EAAgB,WAChB,SAASA,EAAax4B,GAClB,IAAIjC,EAAQ1C,KACZA,KAAK6H,QAAS,EACd7H,KAAK+1C,kBAAoB,IAAIlzC,IAC7B7C,KAAKg2C,gBAAkB,IAAInzC,IAC3B7C,KAAK4C,aAAe,IAAIC,IACxB7C,KAAKi2C,WAAY,EACjBj2C,KAAKk2C,eACLl2C,KAAKm2C,YAAc,SAAUC,GAAW,OAAO,SAAU7xC,GAUrD,OATI7B,EAAMmF,SACFtD,EAAOZ,OAASmyC,GAChBM,EAAQzqC,IAAIpH,EAAOrF,OAAQ22C,EAASQ,QACpC3zC,EAAMuzC,WAAY,GAGlBrrC,QAAQC,KAAK,wDAAyDtG,EAAOZ,OAG9EY,IAEXvE,KAAKs2C,WAAa9uC,EAAOM,WAAWnD,OA1B5C,SAA2BsE,GACvB,OAAOC,QAAQD,EAAIstC,SA0BXC,CAAkBx2C,KAAKs2C,cACvBt2C,KAAKy2C,aAAejvC,EAAOkvC,UAAU12C,KAAKs2C,WAAYt2C,KAAK22C,YAAY32C,KAAKs2C,WAAYt2C,KAAKg2C,gBAAiBh2C,KAAK4C,aAAc5C,KAAK+1C,qBAmE9I,OAhEAt3C,OAAOC,eAAey+B,EAAa/9B,UAAW,aAC1CP,IAAK,WACD,OAAOmB,KAAKs2C,YAEhB13C,YAAY,EACZD,cAAc,IAElBF,OAAOC,eAAey+B,EAAa/9B,UAAW,cAC1CP,IAAK,WAED,GADAmB,KAAK6H,QAAS,EACV7H,KAAKi2C,UAAW,CAChB,IAAIW,KACJ52C,KAAKg2C,gBAAgB9wC,QAAQ,SAAU2xC,EAAYryC,GAC/CoyC,EAAUjqC,MAAMnI,EAAUqyC,MAE9B72C,KAAKk2C,YAAcU,EAEvB,OAAO52C,KAAKk2C,aAEhBt3C,YAAY,EACZD,cAAc,IAElBw+B,EAAa/9B,UAAU8E,QAAU,WAC7BlE,KAAKy2C,eACLz2C,KAAK+1C,kBAAkB7wC,QAAQ,SAAU4xC,GAAY,OAAOA,aACrD92C,KAAKs2C,WACZt2C,KAAKg2C,gBAAgB1V,eACdtgC,KAAKk2C,aAEhB/Y,EAAa/9B,UAAUu3C,YAAc,SAAUI,EAAOX,EAASY,EAAQC,GACnE,IAAIv0C,EAAQ1C,KACZ,OAAO,SAAUuE,GACb,GAAI7B,EAAMmF,OACN,GA5DE,WA4DEtD,EAAOZ,KAAsB,CAC7B,IAAK,IAAI5F,EAAIwG,EAAOuI,MAAOlI,EAAML,EAAOuI,MAAQvI,EAAO2yC,aAAcn5C,EAAI6G,IAAO7G,EAAG,CAC/E,IAAI8C,EAAO0D,EAAOrF,OAAOnB,GACzBq4C,EAAQzqC,IAAI9K,EAAMg1C,EAASsB,QAC3Bz0C,EAAMuzC,WAAY,EAClB,IAAItsB,EAAUstB,EAAUp4C,IAAIgC,GACxB8oB,GACAA,IAGR,IAAS5rB,EAAI,EAAG6G,EAAML,EAAO6yC,MAAMvyC,OAAQ9G,EAAI6G,IAAO7G,EAAG,CACjD8C,EAAQ0D,EAAO6yC,MAAMr5C,GAAKyJ,EAAOM,WAAWvD,EAAO6yC,MAAMr5C,IAC7Dq4C,EAAQzqC,IAAI9K,EAAMg1C,EAASwB,QAC3B30C,EAAMuzC,WAAY,EAClBe,EAAOrrC,IAAI9K,EAAK+G,GAAI/G,GACpBo2C,EAAUtrC,IAAI9K,EAAM2G,EAAOkvC,UAAU71C,EAAM6B,EAAMyzC,YAAYC,WAIjExrC,QAAQC,KAAK,wDAAyDtG,EAAOZ,MAGrF,OAAOY,IAGf44B,EAAa/9B,UAAU2F,QAAU,WAC7B/E,KAAK4C,aAAa09B,QAClBtgC,KAAKg2C,gBAAgB1V,QACrBtgC,KAAKk2C,eACLl2C,KAAK6H,QAAS,GAEXs1B,EA1FS,GA4FpBhgC,EAAQggC,aAAeA,gCCxGvB,SAASma,EAASruC,GACd,OAAQ26B,MAAM36B,GAFlBxK,OAAOC,eAAevB,EAAS,cAAgB4B,OAAO,IAItD,IAAIw4C,EAAmB,WACnB,SAASA,EAAgB16B,GACrB7c,KAAK6c,QAAUA,EAcnB,OAZA06B,EAAgBn4C,UAAUo4C,eAAiB,SAAU11B,EAAc21B,EAAYC,EAAWC,EAAUC,GAChG,IAAIC,EAAiB73C,KAAK6c,QAAQC,aAAaF,YAC/C5c,KAAK6c,QAAQi7B,OAAOD,GACpB,IAAK,IAAI95C,EAAI,EAAGA,EAAI05C,IAAc15C,EAAG,CACjC,IAAIg6C,EAAMT,EAASK,GACbA,EACAA,EAAS55C,EAAG+jB,EAAahP,OAC/BgP,EAAahP,MAAQ4kC,EAAYK,EAAMh6C,EACvC65C,EAAgB75C,GAChBiC,KAAK6c,QAAQi7B,OAAOD,KAGrBN,EAhBY,GAkBvBp6C,EAAQo6C,gBAAkBA,gCCrB1B,SAASS,EAAeje,EAAIC,GACxB,IAAIie,EAAKle,EAAG95B,EAAI+5B,EAAG/5B,EACfi4C,EAAKne,EAAG75B,EAAI85B,EAAG95B,EACnB,OAAO+3C,EAAKA,EAAKC,EAAKA,EAJ1Bz5C,OAAOC,eAAevB,EAAS,cAAgB4B,OAAO,IAMtD,IAAIo5C,EAAS,WACT,SAASA,KAyFT,OAvFAA,EAAM7mC,IAAM,SAAUyoB,EAAIC,EAAIjwB,GAC1B,OAAIA,GACAA,EAAI9J,EAAI85B,EAAG95B,EAAI+5B,EAAG/5B,EAClB8J,EAAI7J,EAAI65B,EAAG75B,EAAI85B,EAAG95B,EACX6J,IAGP9J,EAAG85B,EAAG95B,EAAI+5B,EAAG/5B,EACbC,EAAG65B,EAAG75B,EAAI85B,EAAG95B,IAGrBi4C,EAAMC,WAAa,SAAUC,EAAWC,GACpC,IAEIvc,EAFAT,EAAkBrU,OAAOsU,UACzBgd,EAAeF,EAUnB,OADAC,EAAOpzC,QAPW,SAAUvE,IACxBo7B,EAAWic,EAAer3C,EAAO03C,IAClB/c,IACXA,EAAkBS,EAClBwc,EAAe53C,KAIhB43C,GAEXJ,EAAMK,gBAAkB,SAAUH,EAAWC,GACzC,IAEIvc,EAFAT,EAAkBrU,OAAOsU,UACzBgd,EAAe,EAUnB,OADAD,EAAOpzC,QAPW,SAAUvE,EAAO5C,IAC/Bg+B,EAAWic,EAAer3C,EAAO03C,IAClB/c,IACXA,EAAkBS,EAClBwc,EAAex6C,KAIhBw6C,GAEXJ,EAAMzmC,SAAW,SAAU+mC,EAAQzZ,EAAM0Z,QACnB,IAAdA,IAAwBA,GAAY,GACxC,IAAIT,EAAKjZ,EAAK/+B,EAAIw4C,EAAOx4C,EACrBi4C,EAAKlZ,EAAK9+B,EAAIu4C,EAAOv4C,EACzB,GAAIw4C,EAAW,CACX,IAAIC,EAAY73C,KAAKuO,KAAK4oC,EAAKA,EAAKC,EAAKA,GACzCD,GAAMU,EACNT,GAAMS,EAEV,OACI14C,EAAGg4C,EACH/3C,EAAGg4C,IAGXC,EAAMS,YAAc,SAAU7e,EAAIC,EAAI6e,GAElC,YADgB,IAAZA,IAAsBA,GAAU,GAChCA,EACOb,EAAeje,EAAIC,GAEvBl5B,KAAKuO,KAAK2oC,EAAeje,EAAIC,KAExCme,EAAMW,YAAc,SAAU/e,EAAIC,GAC9B,IAAI+e,EAAYZ,EAAMzmC,SAASqoB,EAAIC,GACnC,OACI/5B,EAAG84C,EAAU94C,EAAI,EAAI85B,EAAG95B,EACxBC,EAAG64C,EAAU74C,EAAI,EAAI65B,EAAG75B,IAGhCi4C,EAAMa,KAAO,SAAU/4C,EAAGC,GACtB,OAASD,EAAGA,EAAGC,EAAGA,IAEtBi4C,EAAM3tC,MAAQ,SAAUuvB,EAAIx6B,EAAGwK,GAC3B,OAAIA,GACAA,EAAI9J,EAAI85B,EAAG95B,EAAIV,EACfwK,EAAI7J,EAAI65B,EAAG75B,EAAIX,EACRwK,IAGP9J,EAAG85B,EAAG95B,EAAIV,EACVW,EAAG65B,EAAG75B,EAAIX,IAGlB44C,EAAM9uB,KAAO,WACT,OACIppB,EAAG,EACHC,EAAG,IAGJi4C,EA1FE,GA4Fbh7C,EAAQg7C,MAAQA,gCClGhB,IAAI32C,EAAaxB,MAAQA,KAAKwB,WAAe,WACzC,IAAIC,EAAgBhD,OAAOiD,iBACpBC,wBAA2BC,OAAS,SAAUvD,EAAGwD,GAAKxD,EAAEsD,UAAYE,IACvE,SAAUxD,EAAGwD,GAAK,IAAK,IAAIvC,KAAKuC,EAAOA,EAAExC,eAAeC,KAAIjB,EAAEiB,GAAKuC,EAAEvC,KACzE,OAAO,SAAUjB,EAAGwD,GAEhB,SAASC,IAAO9B,KAAK+B,YAAc1D,EADnCoD,EAAcpD,EAAGwD,GAEjBxD,EAAEe,UAAkB,OAANyC,EAAapD,OAAOuD,OAAOH,IAAMC,EAAG1C,UAAYyC,EAAEzC,UAAW,IAAI0C,IAP1C,GAU7CrD,OAAOC,eAAevB,EAAS,cAAgB4B,OAAO,IACtD,IAAIkD,EAAQpE,EAAQ,GAChBm4B,EAAen4B,EAAQ,GACvBo4B,EAAUp4B,EAAQ,GAClBqE,EAAUrE,EAAQ,GAClB+6B,EAAU/6B,EAAQ,GAClBgU,EAAM/Q,KAAK+Q,IAAKC,EAAMhR,KAAKgR,IAC3BmnC,EAAc,SAAUz2C,GAExB,SAASy2C,IACL,OAAkB,OAAXz2C,GAAmBA,EAAOwM,MAAMhP,KAAMoH,YAAcpH,KAkL/D,OApLAwB,EAAUy3C,EAAYz2C,GAItBy2C,EAAW75C,UAAUkE,0BAA4B,WAC7C,OACII,eAAgB,SAAU6jB,GACtB,IAAIuR,GAAgB,EAAG,GACnBvR,EAAMmM,SACNoF,EAAa,GAAKvR,EAAMmM,OAAOzzB,GAAK,EACpC64B,EAAa,GAAKvR,EAAMmM,OAAOxzB,GAAK,GAExC,IAAIw1B,GAAWnO,EAAMtnB,EAAI64B,EAAa,GAAIvR,EAAMrnB,EAAI44B,EAAa,IACjE,OAAO,IAAI9C,EAAal2B,QACpBM,OAAQmnB,EAAMnnB,OACdD,MAAOonB,EAAMpnB,MACbF,EAAGy1B,EAAQ,GACXx1B,EAAGw1B,EAAQ,MAGnBnyB,QAAS,SAAUgkB,EAAO5mB,EAAO6H,GAC7B,IAAIuwB,EAAWjnB,EAAI9C,WAAM,EAAQxG,EAAK8B,OAAOE,OACzCwuB,EAAWnnB,EAAI7C,WAAM,EAAQxG,EAAK8B,OAAOE,OAC7C,GAAI+c,EAAMgR,UAAYK,EAAQt3B,UAAU23B,OACpC,OAAO,EAEN,GAAI1R,EAAMgR,UAAYK,EAAQt3B,UAAUk3B,UAAW,CACpD,GAAIQ,GAAY,GAAKD,GAAY,EAC7B,OAAO,EAGP,IAAID,GAAgB,EAAG,GACnBvR,EAAMmM,SACNoF,EAAa,GAAKvR,EAAMmM,OAAOzzB,GAAK,EACpC64B,EAAa,GAAKvR,EAAMmM,OAAOxzB,GAAK,GAExC,IAAIw1B,EAAUltB,EAAKsC,eACf7K,EAAGsnB,EAAMtnB,EAAI64B,EAAa,GAAKtwB,EAAK8B,OAAOE,MAAM,GACjDtK,EAAGqnB,EAAMrnB,EAAI44B,EAAa,GAAKtwB,EAAK8B,OAAOE,MAAM,KAEjD2uB,EAAc3wB,EAAKsC,cAAcnK,GACrC,OAAO,IAAIq1B,EAAal2B,QACpBM,OAAQmnB,EAAMnnB,OACdD,MAAOonB,EAAMpnB,MACbF,EAAGy1B,EAAQz1B,EACXC,EAAGw1B,EAAQx1B,IACZQ,cAAcy4B,GAGpB,GAAI5R,EAAMgR,UAAYK,EAAQt3B,UAAU43B,MAAO,CAC5CJ,GAAgB,EAAG,GACnBvR,EAAMmM,SACNoF,EAAa,GAAKvR,EAAMmM,OAAOzzB,GAAK,EACpC64B,EAAa,GAAKvR,EAAMmM,OAAOxzB,GAAK,GAEpCw1B,EAAUltB,EAAKsC,eACf7K,EAAGsnB,EAAMtnB,EAAI64B,EAAa,GAAKtwB,EAAK8B,OAAOE,MAAM,GACjDtK,EAAGqnB,EAAMrnB,EAAI44B,EAAa,GAAKtwB,EAAK8B,OAAOE,MAAM,KAEjD2uB,EAAc3wB,EAAKsC,cAAcnK,GACrC,OAAO,IAAIq1B,EAAal2B,QACpBM,OAAQmnB,EAAMnnB,OACdD,MAAOonB,EAAMpnB,MACbF,EAAGy1B,EAAQz1B,EACXC,EAAGw1B,EAAQx1B,IACZQ,cAAcy4B,GAErB,OAAO,KAInB8f,EAAW75C,UAAUuG,WAAa,WAC9B,IAAIjD,EAAQ1C,KACRq2B,GACAC,EAAG,EACHC,EAAG,EACHC,GAAI,EACJC,EAAG,EACHC,GAAI,EACJC,GAAI,GAEJC,GACAN,EAAG,EACHC,EAAG,EACHC,EAAG,EACHC,EAAG,EACHC,EAAG,EACHC,EAAG,GAEP,OACI/wB,GAAI/H,EAAQ,IACZgI,qBAEQK,MAAO,EACPC,WAAYjE,EAAQ1C,mBAAmBia,IACvCnb,KAAM,WACN8H,KAAMlE,EAAQzC,sBAAsBia,IACpC1U,OAAQ,SAAUxG,GAAK,OAAQA,EAAEyB,EAAGzB,EAAE0B,MAGtCgG,MAAO,EACPC,WAAYjE,EAAQ1C,mBAAmBma,MACvCrb,KAAM,SACN8H,KAAMlE,EAAQzC,sBAAsBia,IACpC1U,OAAQ,SAAUxG,GAAK,OAAQA,EAAEk1B,OAAOzzB,GAAK,EAAGzB,EAAEk1B,OAAOxzB,GAAK,MAG9DgG,MAAO,EACPC,WAAYjE,EAAQ1C,mBAAmBia,IACvCnb,KAAM,OACN8H,KAAMlE,EAAQzC,sBAAsBia,IACpC1U,OAAQ,SAAUxG,GAAK,OAAQA,EAAE2B,MAAO3B,EAAE4B,WAG1C8F,MAAO,EACPC,WAAYjE,EAAQ1C,mBAAmBma,MACvCrb,KAAM,QACN8H,KAAMlE,EAAQzC,sBAAsBga,IACpCzU,OAAQ,SAAUxG,GAAK,OAAQA,EAAEmE,UAGjCuD,MAAO,EACPC,WAAYjE,EAAQ1C,mBAAmBoa,KACvCtb,KAAM,UACN8H,KAAMlE,EAAQzC,sBAAsBga,IACpCzU,OAAQ,SAAUxG,GAAK,OAAQA,EAAE+5B,YAGjClyB,OACIa,IAAKlH,KAAKyC,MAAM4D,OAAS,GACzB/H,KAAM,cAEV4H,MAAO,EACP5H,KAAM,UACN0G,OAAQ,SAAUxG,GAAK,OAAOkE,EAAMkZ,SAASijB,QAAQn8B,EAAOlE,EAAGA,EAAEod,aAGjE1V,MAAO,EACPC,WAAYjE,EAAQ1C,mBAAmBia,IACvCnb,KAAM,OACN8H,KAAMlE,EAAQzC,sBAAsBma,KACpC5U,OAAQ,SAAUxG,GAAK,OAAOA,EAAEovC,QAGxCnpC,WAEQnG,KAAM,cACN8H,KAAMlE,EAAQxC,YAAY+Z,IAC1BzU,OAAQ,SAAUo0B,GAAM,OAAQ,MAGxCtzB,mBAEQxH,KAAM,WACN8H,KAAMlE,EAAQvC,oBAAoBga,MAClC3U,OAAQ,SAAU8xB,GAAU,OACxBT,EAAeS,GACfF,EAAaE,GACb,MAIZ/wB,YAAa,EACbC,GAAInI,EAAQ,MAGpBo7C,EAAW75C,UAAUiG,aAAe,WAChC,OACIC,SAAUrD,EAAMoH,sBAChB7D,UAAWvD,EAAMwD,OAGzBwzC,EAAW75C,UAAUsG,mBAAqB,WACtC,OACIqxB,SAAU90B,EAAM+0B,eAChBC,SAAUh1B,EAAMi1B,UAChBC,oBAAoB,EACpBC,aAAa,IAGd6hB,EArLO,CAsLhBhjB,EAAQ1zB,OACVpF,EAAQ87C,WAAaA,gCCxMrB,IAAIz2B,EAAaxiB,MAAQA,KAAKwiB,WAAc,SAAUC,EAASC,EAAYC,EAAGC,GAC1E,OAAO,IAAKD,IAAMA,EAAIE,UAAU,SAAU9d,EAAS+d,GAC/C,SAASC,EAAUhkB,GAAS,IAAMikB,EAAKJ,EAAUK,KAAKlkB,IAAW,MAAOmkB,GAAKJ,EAAOI,IACpF,SAASC,EAASpkB,GAAS,IAAMikB,EAAKJ,EAAA,MAAmB7jB,IAAW,MAAOmkB,GAAKJ,EAAOI,IACvF,SAASF,EAAKI,GAAUA,EAAOC,KAAOte,EAAQqe,EAAOrkB,OAAS,IAAI4jB,EAAE,SAAU5d,GAAWA,EAAQqe,EAAOrkB,SAAWukB,KAAKP,EAAWI,GACnIH,GAAMJ,EAAYA,EAAU5T,MAAMyT,EAASC,QAAmBO,WAGlEM,EAAevjB,MAAQA,KAAKujB,aAAgB,SAAUd,EAASe,GAC/D,IAAsGC,EAAGvjB,EAAG4P,EAAG4T,EAA3GC,GAAMtW,MAAO,EAAGuW,KAAM,WAAa,GAAW,EAAP9T,EAAE,GAAQ,MAAMA,EAAE,GAAI,OAAOA,EAAE,IAAO+T,QAAUC,QAC3F,OAAOJ,GAAMT,KAAMc,EAAK,GAAIC,MAASD,EAAK,GAAIE,OAAUF,EAAK,IAAwB,mBAAXG,SAA0BR,EAAEQ,OAAOC,UAAY,WAAa,OAAOnkB,OAAU0jB,EACvJ,SAASK,EAAK/kB,GAAK,OAAO,SAAU8W,GAAK,OACzC,SAAcsO,GACV,GAAIX,EAAG,MAAM,IAAIY,UAAU,mCAC3B,KAAOV,GAAG,IACN,GAAIF,EAAI,EAAGvjB,IAAM4P,EAAI5P,EAAU,EAARkkB,EAAG,GAAS,SAAWA,EAAG,GAAK,QAAU,YAActU,EAAIA,EAAE5R,KAAKgC,EAAGkkB,EAAG,KAAKf,KAAM,OAAOvT,EAEjH,OADI5P,EAAI,EAAG4P,IAAGsU,GAAM,EAAGtU,EAAE/Q,QACjBqlB,EAAG,IACP,KAAK,EAAG,KAAK,EAAGtU,EAAIsU,EAAI,MACxB,KAAK,EAAc,OAAXT,EAAEtW,SAAkBtO,MAAOqlB,EAAG,GAAIf,MAAM,GAChD,KAAK,EAAGM,EAAEtW,QAASnN,EAAIkkB,EAAG,GAAIA,GAAM,GAAI,SACxC,KAAK,EAAGA,EAAKT,EAAEG,IAAIQ,MAAOX,EAAEE,KAAKS,MAAO,SACxC,QACI,KAAkBxU,GAAZA,EAAI6T,EAAEE,MAAYhf,OAAS,GAAKiL,EAAEA,EAAEjL,OAAS,MAAkB,IAAVuf,EAAG,IAAsB,IAAVA,EAAG,IAAW,CAAET,EAAI,EAAG,SACjG,GAAc,IAAVS,EAAG,MAActU,GAAMsU,EAAG,GAAKtU,EAAE,IAAMsU,EAAG,GAAKtU,EAAE,IAAM,CAAE6T,EAAEtW,MAAQ+W,EAAG,GAAI,MAC9E,GAAc,IAAVA,EAAG,IAAYT,EAAEtW,MAAQyC,EAAE,GAAI,CAAE6T,EAAEtW,MAAQyC,EAAE,GAAIA,EAAIsU,EAAI,MAC7D,GAAItU,GAAK6T,EAAEtW,MAAQyC,EAAE,GAAI,CAAE6T,EAAEtW,MAAQyC,EAAE,GAAI6T,EAAEG,IAAInX,KAAKyX,GAAK,MACvDtU,EAAE,IAAI6T,EAAEG,IAAIQ,MAChBX,EAAEE,KAAKS,MAAO,SAEtBF,EAAKZ,EAAKtlB,KAAKukB,EAASkB,GAC1B,MAAOT,GAAKkB,GAAM,EAAGlB,GAAIhjB,EAAI,EAjBrB,QAiBoCujB,EAAI3T,EAAI,EACtD,GAAY,EAARsU,EAAG,GAAQ,MAAMA,EAAG,GAAI,OAASrlB,MAAOqlB,EAAG,GAAKA,EAAG,QAAK,EAAQf,MAAM,GArB9BL,EAAMhkB,EAAG8W,OAwB7DrX,OAAOC,eAAevB,EAAS,cAAgB4B,OAAO,IACtD,IAAIkD,EAAQpE,EAAQ,GAChBq7C,EAAWr7C,EAAQ,IACnBs7C,EAAWt7C,EAAQ,IACnB0L,EAAW1L,EAAQ,GACnBu7C,EAAyBv7C,EAAQ,IACjCw7C,EAA2Bx7C,EAAQ,IACnCy7C,EAA4Bz7C,EAAQ,IACpC07C,EAA4B17C,EAAQ,IACpC4iC,EAAyB5iC,EAAQ,IACjC27C,EAAqB37C,EAAQ,IAC7B47C,EAAwB57C,EAAQ,IAChC+iB,EAAU/iB,EAAQ,IAClBgjB,EAAShjB,EAAQ,IACjBumC,EAAgBvmC,EAAQ,IACxB67C,EAA6B77C,EAAQ,IACrC87C,EAAuB97C,EAAQ,IAC/BorC,EAAYprC,EAAQ,GACpB+7C,EAA2B/7C,EAAQ,IACnCg8C,EAA2B,IAAI53C,EAAM63C,MAAM,EAAK,EAAK,GACzD,SAASC,EAAS9wC,GACd,OAAOC,QAAQD,EAAIyb,YAWvBvnB,EAAQ68C,YAHR,SAAqBC,EAAYx3C,GAC7B,OAAQw3C,EAAYx3C,IAGxB,IAAIy3C,EAAgB,WAChB,SAASA,IACLl6C,KAAKq+B,aAAe,IAAI4K,EAAU6B,aAClC9qC,KAAK8c,cACDq9B,aAAc,EACdv9B,YAA0B,EAAbnF,KAAKC,MAClB0iC,aAA2B,EAAb3iC,KAAKC,OAEvB1X,KAAKq6C,kBAAmB,EACxBr6C,KAAKqM,OAAS,IAAIxJ,IAClB7C,KAAK4J,WAAapM,OAAOqM,iBACzB7J,KAAKs6C,OAAS,IAAIz3C,IAClB7C,KAAKs/B,cACLt/B,KAAKu6C,iBAAmB,IAAI13C,IAmbhC,OAjbApE,OAAOC,eAAew7C,EAAa96C,UAAW,MAC1CP,IAAK,WACD,OAAOmB,KAAKuV,SAEhB3W,YAAY,EACZD,cAAc,IAElBu7C,EAAa96C,UAAUsN,SAAW,SAAU9D,GACxC,OAAKA,EAAMhB,GAIP5H,KAAKqM,OAAOxN,IAAI+J,EAAMhB,KACtBgD,QAAQC,KAAK,oDACNjC,IAEX5I,KAAKqM,OAAOV,IAAI/C,EAAMhB,GAAIgB,GAC1B5I,KAAKw6C,UAAU5xC,GACRA,IATHgC,QAAQC,KAAK,8BACNjC,IAUfsxC,EAAa96C,UAAU04C,OAAS,SAAUzkC,EAAMonC,EAAgBC,GAC5D,OAAOl4B,EAAUxiB,UAAM,OAAQ,EAAQ,WACnC,IAAIs6C,EAAQv8C,EAAG6G,EAAK2c,EAAO1M,EAAOxI,EAAQyT,EAAGF,EAAMpX,EAAMuX,EAAGC,EAAMpX,EAClE,OAAO2a,EAAYvjB,KAAM,SAAUiD,GAC/B,IAAKjD,KAAKiqB,GACN,OAAQ,GAcZ,IAbIwwB,GACAz6C,KAAK8c,aAAaq9B,eACtBn6C,KAAK8c,aAAas9B,aAAep6C,KAAK8c,aAAaF,iBACtCxT,IAATiK,EACArT,KAAK8c,aAAaF,YAA2B,EAAbnF,KAAKC,OAGjC1X,KAAK8c,aAAas9B,eAAiBp6C,KAAK8c,aAAaF,cACrD5c,KAAK8c,aAAas9B,aAAe/mC,GAErCrT,KAAK8c,aAAaF,YAAcvJ,GAEpCinC,EAAS14C,MAAMo9B,KAAKh/B,KAAKs6C,OAAO3rC,UAC3B5Q,EAAI,EAAG6G,EAAM01C,EAAOz1C,OAAQ9G,EAAI6G,IAAO7G,EAKxC,IAJAwjB,EAAQ+4B,EAAOv8C,GACf8W,EAAQjT,MAAMo9B,KAAKzd,EAAMhV,SAASoC,UAClCtC,EAASkV,EAAMlV,OACfkV,EAAMtU,aACD6S,EAAI,EAAGF,EAAO/K,EAAMhQ,OAAQib,EAAIF,IAAQE,EAAG,CAQ5C,KAPAtX,EAAOqM,EAAMiL,IACR5U,kBAAkB,IAAI3B,EAASzJ,QAChCM,OAAQJ,KAAKuV,QAAQX,OAAOxU,OAC5BD,MAAOH,KAAKuV,QAAQX,OAAOzU,MAC3BF,EAAG,EACHC,EAAG,KAEF6f,EAAI,EAAGC,EAAO3T,EAAOxH,OAAQkb,EAAIC,IAAQD,GAC1CnX,EAAQyD,EAAO0T,IACTvX,KAAOA,EACbI,EAAMvE,OAENq2C,GACAA,EAAYn5B,EAAO/Y,GAI/B,OAAQ,QAIpB0xC,EAAa96C,UAAU8E,QAAU,WAC7BlE,KAAKqM,OAAOnH,QAAQ,SAAU0D,GAAS,OAAOA,EAAM1E,YACpDlE,KAAK26C,gBAAgBz2C,UACrBlE,KAAKqI,aAAanE,UAClBlE,KAAKs/B,WAAWp6B,QAAQ,SAAUw6B,GAAa,OAAOA,EAAUne,MAAMrd,YACtElE,KAAK46C,SAASjxB,UACdwvB,EAAS/P,cAAcllC,UACvBg1C,EAASvL,cAAczpC,WAE3Bg2C,EAAa96C,UAAUiF,KAAO,SAAUgP,GACpC,OAAOmP,EAAUxiB,UAAM,OAAQ,EAAQ,WACnC,IACI66C,EADAn4C,EAAQ1C,KAEZ,OAAOujB,EAAYvjB,KAAM,SAAUiD,GAC/B,OAAQA,EAAGoK,OACP,KAAK,EACD,OAAKrN,KAAKiqB,IAEVjqB,KAAK83C,OAAOzkC,GAAM,EAAM,SAAUkO,EAAO/Y,GACrC,OAAO9F,EAAMo4C,cAAcv5B,EAAMnV,UAAW5D,KAE5CxI,KAAKqI,aAAa4O,mBAClBjX,KAAKs/B,WAAWp6B,QAAQ,SAAUw6B,GAC9BA,EAAUz+B,OAAS,IAAImjC,EAAc1jB,WAAWgf,EAAUl3B,KAAKC,cAC/Di3B,EAAUz+B,OAAO0D,KAAO+6B,IAE5B1/B,KAAKqI,aAAa4O,kBAAmB,GAEnCjX,KAAKq6C,kBAA0B,EAAG,IACxCr6C,KAAKq6C,kBAAmB,GAChB,EAAGr6C,KAAK26C,gBAAgBrc,sBAbpB,GAchB,KAAK,EACDuc,EAAY53C,EAAG2gB,OACf5jB,KAAKq6C,kBAAmB,EACpBQ,GACA76C,KAAKqE,OACTpB,EAAGoK,MAAQ,EACf,KAAK,EAAG,OAAQ,SAKhC6sC,EAAa96C,UAAU07C,cAAgB,SAAUv5B,EAAO/Y,GACpD,IAAI+B,GAAWtK,EAAGuI,EAAK0B,WAAW7J,KAAMH,EAAGsI,EAAK0B,WAAW5J,KACvD8F,EAAOoC,EAAK0B,WACZ6wC,EAAe/6C,KAAK46C,SAASI,UACjCD,EAAa56C,OAASH,KAAK46C,SAASK,gBACpCF,EAAa36C,QAAUJ,KAAK46C,SAASK,gBACrC,IAAIC,EAAa1yC,EAAK0yC,WACtBl7C,KAAKuV,QAAQma,OAAO1vB,KAAKuV,QAAQ4lC,cACjCn7C,KAAKuV,QAAQ6lC,QAAQ7wC,EAAOtK,EAAG86C,EAAa36C,OAASmK,EAAOrK,EAAIkG,EAAKhG,OAAQgG,EAAKjG,MAAOiG,EAAKhG,QAC1FoI,EAAK0yC,YACLl7C,KAAKuV,QAAQ8lC,WAAWH,EAAW,GAAIA,EAAW,GAAIA,EAAW,GAAIA,EAAW,IAEhF1yC,EAAK8yC,WACLt7C,KAAKuV,QAAQ+qB,OAAO93B,EAAK8yC,WAAWvuC,QAAQ8T,EAAOnX,WAAW6xC,QAAU,EAClEv7C,KAAKuV,QAAQimC,iBACb,IACDhzC,EAAK8yC,WAAWvuC,QAAQ8T,EAAOnX,WAAW+xC,QAAU,EAC/Cz7C,KAAKuV,QAAQmmC,iBACb,IACLlzC,EAAK8yC,WAAWvuC,QAAQ8T,EAAOnX,WAAWiyC,UAAY,EACjD37C,KAAKuV,QAAQqmC,mBACb,IAGV57C,KAAKuV,QAAQ+qB,MAAMtgC,KAAKuV,QAAQimC,iBAAmBx7C,KAAKuV,QAAQmmC,kBAEpE17C,KAAK46C,SAASiB,YAAYtxC,EAAOtK,EAAID,KAAK4J,WAAYW,EAAOrK,EAAIF,KAAK4J,WAAYxD,EAAKjG,MAAOiG,EAAKhG,QAC/FmhB,GACAvhB,KAAK46C,SAASxzB,OAAO7F,EAAO/Y,EAAKiC,WAAWY,aAEpD6uC,EAAa96C,UAAU08C,YAAc,SAAU1zC,GAC3C,IAAK,IAAI2Q,EAAK,EAAG9V,EAAKjD,KAAKs/B,WAAYvmB,EAAK9V,EAAG4B,OAAQkU,IAAM,CACzD,IAAI2mB,EAAYz8B,EAAG8V,GACnB,GAAI2mB,EAAUl3B,KAAKZ,KAAOQ,EACtB,OAAOs3B,EAAUl3B,KAAKC,aAG9B,OAAO,MAEXyxC,EAAa96C,UAAU28C,mBAAqB,SAAU3zC,GAClD,IAAK,IAAI2Q,EAAK,EAAG9V,EAAKjD,KAAKs/B,WAAYvmB,EAAK9V,EAAG4B,OAAQkU,IAAM,CACzD,IAAI2mB,EAAYz8B,EAAG8V,GACnB,GAAI2mB,EAAUl3B,KAAKZ,KAAOQ,EAAQ,CAC9B,IAAII,EAAOk3B,EAAUl3B,KACrB,GAAIA,EAAKC,aAAc,CACnB,IAAIitB,EAAUltB,EAAKwC,aAAc/K,EAAG,EAAGC,EAAG,IACtCy1B,EAAcntB,EAAK4B,eACnBnK,EAAGuI,EAAKC,aAAajI,MACrBN,EAAGsI,EAAKC,aAAalI,SAEzB,OAAO,IAAIgJ,EAASzJ,QAChBS,OAAQo1B,EAAYz1B,EACpBG,KAAMq1B,EAAQz1B,EACdO,MAAOm1B,EAAY11B,EACnBK,IAAKo1B,EAAQx1B,IAIjB,OAAO,MAInB,OAAO,MAEXg6C,EAAa96C,UAAU4zC,KAAO,SAAUjzC,GACpC,OAAOyiB,EAAUxiB,UAAM,OAAQ,EAAQ,WACnC,OAAOujB,EAAYvjB,KAAM,SAAUiD,GAC/B,OAAQA,EAAGoK,OACP,KAAK,EAGD,OAFArN,KAAK4J,WAAa7J,EAAQ6J,YAAc5J,KAAK4J,WAC7C5J,KAAKg8C,WAAWj8C,EAAQwV,SACnBvV,KAAKiqB,IACVjqB,KAAKi8C,OAAOl8C,GACZC,KAAKk8C,iBAAiBn8C,IACd,EAAGC,KAAKm8C,cAAcp8C,MAHR,EAAG,GAI7B,KAAK,EAED,OADAkD,EAAG2gB,QACK,EAAG,GACf,KAAK,EACDhZ,QAAQC,KAAK,4EACb5H,EAAGoK,MAAQ,EACf,KAAK,EAAG,OAAQ,EAAGrN,YAKnCk6C,EAAa96C,UAAU68C,OAAS,SAAUl8C,GACtC,IAAI2C,EAAQ1C,KACZ,GAAKA,KAAKuV,QAAV,CAIA,IAAIX,EAAS5U,KAAKuV,QAAQX,OACtBzU,EAAQyU,EAAOzU,MACfC,EAASwU,EAAOxU,OACpBJ,KAAK46C,SAAW,IAAI34C,EAAMm6C,eACtBC,MAAOt8C,EAAQm7C,YAAcn7C,EAAQm7C,WAAW,GAAK,EACrDoB,WAAW,EACX1nC,OAAQA,EACR2nC,uBAAuB,IAE3Bv8C,KAAK46C,SAAS4B,WAAY,EAC1Bx8C,KAAK46C,SAAS6B,eAAex6C,EAAMy6C,cACnC18C,KAAK46C,SAAS+B,QAAQx8C,EAAOC,GAC7BJ,KAAK46C,SAASgC,cAAc58C,KAAK4J,YAC7B7J,EAAQm7C,WACRl7C,KAAK46C,SAASiC,cAAc,IAAI56C,EAAM63C,MAAM/5C,EAAQm7C,WAAW,GAAIn7C,EAAQm7C,WAAW,GAAIn7C,EAAQm7C,WAAW,IAAKn7C,EAAQm7C,WAAW,IAGrIl7C,KAAK46C,SAASiC,cAAchD,GAEhC75C,KAAK88C,qBAAuBzD,EAAyBv4B,qBAAqB9gB,KAAKuV,SAC/EvV,KAAK88C,qBAAqBt0C,KAAK0yC,WAAan7C,EAAQm7C,WACpDl7C,KAAKs6C,OAAO3uC,IAAI3L,KAAK88C,qBAAqBv7B,MAAM3Z,GAAI5H,KAAK88C,qBAAqBv7B,OAC9E,IAAIw7B,EAAiB,EACrB/8C,KAAKs/B,WAAW3yB,MACZhK,QAASo6C,EACTx7B,MAAOvhB,KAAK88C,qBAAqBv7B,MACjC/Y,KAAMxI,KAAK88C,qBAAqBt0C,OAEpCxI,KAAKuV,QAAQma,OAAO1vB,KAAKuV,QAAQ4lC,cAC7Bp7C,EAAQu6C,QACRv6C,EAAQu6C,OAAOp1C,QAAQ,SAAU83C,GAC7B,IAAIC,EAAW,IAAIr8B,EAAQzU,MAAM6wC,GACC,IAA9BA,EAAanoC,MAAMhQ,SACnBo4C,EAASrwC,QAAQlK,EAAMo6C,qBAAqBt0C,MAC5C9F,EAAM48B,WAAW3yB,MACbhK,QAASo6C,EACTx7B,MAAO07B,EACPz0C,KAAM9F,EAAMo6C,qBAAqBt0C,QAGzCw0C,EAAanoC,MAAM3P,QAAQ,SAAUg4C,GACjC,IAAIC,EAAU,IAAIt8B,EAAOlX,KAAKuzC,GAC9BC,EAAQ7yC,OAAS6yC,EAAQ7yC,QAAU5H,EAAMo6C,qBAAqBxyC,OAC9D6yC,EAAQ1yC,WACJ0yC,EAAQ1yC,YAAc/H,EAAMo6C,qBAAqBryC,WACrD0yC,EAAQ5xC,SACJ4xC,EAAQ5xC,UAAY7I,EAAMo6C,qBAAqBvxC,SACnD4xC,EAAQvzC,WAAalH,EAAMkH,WAC3BqzC,EAASrwC,QAAQuwC,GACjB,IAAK,IAAIpkC,EAAK,EAAG9V,EAAKP,EAAM48B,WAAYvmB,EAAK9V,EAAG4B,OAAQkU,IAAM,CAC1C9V,EAAG8V,GACLvQ,KAAKZ,KAAOu1C,EAAQv1C,IAC9BgD,QAAQC,KAAK,wGAGrBnI,EAAM48B,WAAW3yB,MACbhK,QAASo6C,EACTx7B,MAAO07B,EACPz0C,KAAM20C,MAGdz6C,EAAM43C,OAAO3uC,IAAIqxC,EAAa91C,IAAK+1C,UAhEvCryC,QAAQgE,MAAM,gFAoEtBsrC,EAAa96C,UAAUo7C,UAAY,SAAU5xC,GACzCA,EAAMiU,QAAU7c,KAChB4I,EAAMgT,SAAW5b,KAAK26C,gBACtB,IAAIp5B,EAAQvhB,KAAKo9C,gBAAgBx0C,GAC7BoT,EAAWpT,EAAMjD,aACrBqW,EAASnW,oBAAsBmW,EAASnW,wBAA0BkQ,OAAO7M,SACzE8S,EAASlW,kBAAoBkW,EAASlW,sBAAwBiQ,OAAO7M,SACrE8S,EAASvX,UAAYuX,EAASvX,cAAgBsR,OAAO7M,SACrD,IAAIjG,EAAKu2C,EAAmBz9B,eAAenT,EAAOoT,GAAWlW,EAAmB7C,EAAG6C,iBAAkBD,EAAqB5C,EAAG4C,mBAAoBpB,EAAWxB,EAAGwB,SAC3J44C,EAAgBjE,EAAuB7S,gBAAgBvqB,EAAUlW,EAAkBD,EAAoBpB,GACvGoE,EAAWywC,EAA0Bh6B,sBAAsB+9B,EAAc99B,sBAAuBzZ,EAAkBkW,EAASjW,aAC3H+C,EAAWywC,EAA0B36B,sBAAsBhW,EAAOy0C,EAAcr3C,GAAIq3C,EAAcz3C,GAAInB,EAAU44C,EAAcp4C,kBAC9H+D,EAAQy3B,EAAuB93B,mBAAmBC,EAAOC,EAAUC,GAUvE,OATAF,EAAMC,SAAWA,EACjBD,EAAM/C,mBAAqBA,EAC3B+C,EAAM9F,oBAAsBkZ,EAASjW,YACrC6C,EAAME,SAAWA,EACjBF,EAAM2W,sBAAwB89B,EAAc99B,sBAC5C3W,EAAMI,MAAQA,EACdJ,EAAMnE,SAAWA,EACjBmE,EAAM9C,iBAAmBA,EACzB8C,EAAMzE,eAAiB,IAAIu1C,EAA2B/Y,uBAAuB/3B,EAAO2Y,GAC7E3Y,GAEXsxC,EAAa96C,UAAU88C,iBAAmB,SAAUn8C,GAChD,IAAIu9C,GAAiBv9C,EAAQu9C,mBAAqBruC,QAC9C,IAAI0qC,EAAqBta,iBAAiBr/B,KAAKs/B,cAEnDt/B,KAAKqI,aAAe,IAAIoxC,EAAsB9kC,kBAAkB3U,KAAKuV,QAAQX,OAAQ5U,KAAKs/B,WAAYge,EAAev9C,EAAQgV,qBAEjImlC,EAAa96C,UAAU+8C,cAAgB,SAAUp8C,GAC7C,OAAOyiB,EAAUxiB,UAAM,OAAQ,EAAQ,WACnC,IAAI+Y,EAAI9V,EAAI2Y,EACZ,OAAO2H,EAAYvjB,KAAM,SAAUsZ,GAC/B,OAAQA,EAAGjM,OACP,KAAK,EACD,IAAKtN,EAAQw9C,eAAgB,OAAQ,EAAG,GACxCxkC,EAAK,EAAG9V,EAAKlD,EAAQw9C,eACrBjkC,EAAGjM,MAAQ,EACf,KAAK,EACD,OAAM0L,EAAK9V,EAAG4B,QACd+W,EAAW3Y,EAAG8V,IACN,EAAG/Y,KAAKq+B,aAAa2M,YAAYpvB,MAFV,EAAG,GAGtC,KAAK,EACDtC,EAAGsK,OACHtK,EAAGjM,MAAQ,EACf,KAAK,EAED,OADA0L,KACQ,EAAG,GACf,KAAK,EAID,OAHA/Y,KAAK26C,gBAAkB,IAAIf,EAAyB3b,sBAChDI,aAAcr+B,KAAKq+B,gBAEf,SAK5B6b,EAAa96C,UAAUg+C,gBAAkB,SAAUx0C,GAC/C,IAAI2Y,EAAQvhB,KAAKs6C,OAAOz7C,IAAI+J,EAAMnG,MAAM8e,OAAS,IAQjD,OAPKA,IACDA,EAAQvhB,KAAK88C,qBAAqBv7B,MAC9B3Y,EAAMnG,MAAM8e,OACZ3W,QAAQC,KAAK,oHAGrB0W,EAAM7U,SAAS9D,GACR2Y,GAEX24B,EAAa96C,UAAUyN,YAAc,SAAUjE,GAC3C,OAAKA,EAGA5I,KAAKqM,OAAOxN,IAAI+J,GAASA,EAAMhB,KAIpCgB,EAAMzE,eAAem9B,kBACrB14B,EAAM1E,UACNlE,KAAKqM,OAAOyyB,OAAOl2B,EAAMhB,IAClBgB,IANHgC,QAAQC,KAAK,sDAAuDjC,GAC7DA,GAJA,MAWfsxC,EAAa96C,UAAUgoB,OAAS,SAAUo2B,GACtC,IAAI96C,EAAQ1C,KACPA,KAAKiqB,KAENuzB,GAAqBA,EAAkB34C,OAAS,GAChD24C,EAAkBt4C,QAAQ,SAAU8tC,GAChC,IAAIiH,EAAajH,EAAK,GAClBvwC,EAAQuwC,EAAK,GACbyK,EAAgB/6C,EAAM2J,OAAOxN,IAAI4D,EAAMyE,KACvCu2C,GACAA,EAAc92C,gBAAgBlE,GAC9BhE,OAAOsE,OAAO06C,EAAch7C,MAAOA,GACnCg7C,EAAcr5C,kBAGd1B,EAAMgK,SAAS,IAAIutC,EAAWx7C,OAAOsE,UAAWk3C,EAAWj3C,aAAcP,KAE7EC,EAAM63C,iBAAiB5uC,IAAIlJ,EAAMyE,KAAK,KAG9ClH,KAAKu6C,iBAAiBr1C,QAAQ,SAAUykB,EAAS+zB,GAC7C,GAAI/zB,EAAS,CACT,IAAI/gB,EAAQlG,EAAM2J,OAAOxN,IAAI6+C,GACzB90C,EACAlG,EAAMmK,YAAYjE,GAGlBgC,QAAQC,KAAK,0DAIzB7K,KAAKu6C,iBAAiBja,QACtBtgC,KAAKqM,OAAOnH,QAAQ,SAAUy4C,EAAQ/1C,GAClClF,EAAM63C,iBAAiB5uC,IAAI/D,GAAI,OAGvCsyC,EAAa96C,UAAUw+C,aAAe,SAAUC,GAC5C,IAAIzxC,EAAYpM,KAAKuV,QAAQX,OAAOkpC,cACpC,GAAI1xC,EAAW,CACX,IAAIwI,EAAS5U,KAAKuV,QAAQX,OAC1BA,EAAOmpC,UAAY,GACnBnpC,EAAOopC,aAAa,QAAS,IAC7B5xC,EAAUoiB,MAAM9iB,SAAW,WAC3BkJ,EAAO4Z,MAAM9iB,SAAW,WACxBkJ,EAAO4Z,MAAMnuB,KAAO,MACpBuU,EAAO4Z,MAAMluB,IAAM,MACnBsU,EAAO4Z,MAAMruB,MAAQ,OACrByU,EAAO4Z,MAAMpuB,OAAS,OACtBwU,EAAOopC,aAAa,QAAS,IAC7BppC,EAAOopC,aAAa,SAAU,IAC9B,IAAIC,EAAe7xC,EAAU8xC,wBACzBC,EAAMvpC,EAAOspC,wBACjBl+C,KAAKsV,OAAO6oC,EAAIh+C,OAAS,IAAK89C,EAAa79C,QAAU,OAG7D85C,EAAa96C,UAAUkW,OAAS,SAAUnV,EAAOC,EAAQwJ,GACrD,IAAIlH,EAAQ1C,KACZA,KAAK4J,WAAaA,GAAc5J,KAAK4J,WACrC5J,KAAKs/B,WAAWp6B,QAAQ,SAAUw6B,GAAa,OAAQA,EAAUl3B,KAAKoB,WAAalH,EAAMkH,aACzF5J,KAAK46C,SAAS+B,QAAQx8C,GAAS,IAAKC,GAAU,KAC9CJ,KAAK46C,SAASgC,cAAc58C,KAAK4J,YACjC5J,KAAKqI,aAAaiN,UAEtB4kC,EAAa96C,UAAU48C,WAAa,SAAUzmC,GAC1C,GAAKA,EAGL,GApbR,SAAwBtM,GACpB,OAAOC,QAAQD,EAAI2L,QAmbXwpC,CAAe7oC,GACfvV,KAAKuV,QAAUA,OAEd,GAAIwkC,EAASxkC,GAAU,CACxB,IAAI8oC,EAAgB9oC,EAAQmP,WAAW,UAAYnP,EAAQmP,WAAW,sBACjE25B,EAIDr+C,KAAKuV,QAAU8oC,EAHfzzC,QAAQC,KAAK,4HAMhB,GAncb,SAAkB5B,GACd,OAAOC,QAAQD,EAAI8c,QAkcNu4B,CAAS/oC,GAAU,CACxB,IAAIS,EAAU8B,SAASymC,eAAehpC,GAClCwkC,EAAS/jC,IACThW,KAAKg8C,WAAWhmC,KAIrBkkC,EAhcS,GAkcpB/8C,EAAQ+8C,aAAeA,gCCtgBvB,SAAS34C,EAASpD,GACd,IAAK,IAAImB,KAAKnB,EAAQhB,EAAQkC,eAAeC,KAAInC,EAAQmC,GAAKnB,EAAEmB,IAEpEb,OAAOC,eAAevB,EAAS,cAAgB4B,OAAO,IACtDwC,EAAS1D,EAAQ,MACjB0D,EAAS1D,EAAQ,KACjB0D,EAAS1D,EAAQ,KACjB0D,EAAS1D,EAAQ,KACjB0D,EAAS1D,EAAQ,KACjB0D,EAAS1D,EAAQ,KACjB0D,EAAS1D,EAAQ,KACjB0D,EAAS1D,EAAQ,IACjB0D,EAAS1D,EAAQ,KACjB0D,EAAS1D,EAAQ,KACjB0D,EAAS1D,EAAQ,IACjB0D,EAAS1D,EAAQ,mCCfjB,SAAS0D,EAASpD,GACd,IAAK,IAAImB,KAAKnB,EAAQhB,EAAQkC,eAAeC,KAAInC,EAAQmC,GAAKnB,EAAEmB,IAEpEb,OAAOC,eAAevB,EAAS,cAAgB4B,OAAO,IACtDwC,EAAS1D,EAAQ,MACjB0D,EAAS1D,EAAQ,IACjB0D,EAAS1D,EAAQ,KACjB0D,EAAS1D,EAAQ,KACjB0D,EAAS1D,EAAQ,IACjB0D,EAAS1D,EAAQ,kCCNjBY,OAAOC,eAAevB,EAAS,cAAgB4B,OAAO,IAHtD,SAAkBZ,GACd,IAAK,IAAImB,KAAKnB,EAAQhB,EAAQkC,eAAeC,KAAInC,EAAQmC,GAAKnB,EAAEmB,IAGpEiC,CAAS1D,EAAQ","file":"index.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"three\"), require(\"mobx\"), require(\"bowser\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"three\", \"mobx\", \"bowser\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"network-bubble-chart\"] = factory(require(\"three\"), require(\"mobx\"), require(\"bowser\"));\n\telse\n\t\troot[\"network-bubble-chart\"] = factory(root[\"three\"], root[\"mobx\"], root[\"bowser\"]);\n})(window, function(__WEBPACK_EXTERNAL_MODULE__0__, __WEBPACK_EXTERNAL_MODULE__3__, __WEBPACK_EXTERNAL_MODULE__103__) {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 111);\n","module.exports = __WEBPACK_EXTERNAL_MODULE__0__;","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar InstanceBlockIndex;\n(function (InstanceBlockIndex) {\n    InstanceBlockIndex[InstanceBlockIndex[\"ONE\"] = 1] = \"ONE\";\n    InstanceBlockIndex[InstanceBlockIndex[\"TWO\"] = 2] = \"TWO\";\n    InstanceBlockIndex[InstanceBlockIndex[\"THREE\"] = 3] = \"THREE\";\n    InstanceBlockIndex[InstanceBlockIndex[\"FOUR\"] = 4] = \"FOUR\";\n})(InstanceBlockIndex = exports.InstanceBlockIndex || (exports.InstanceBlockIndex = {}));\nvar InstanceAttributeSize;\n(function (InstanceAttributeSize) {\n    InstanceAttributeSize[InstanceAttributeSize[\"ONE\"] = 1] = \"ONE\";\n    InstanceAttributeSize[InstanceAttributeSize[\"TWO\"] = 2] = \"TWO\";\n    InstanceAttributeSize[InstanceAttributeSize[\"THREE\"] = 3] = \"THREE\";\n    InstanceAttributeSize[InstanceAttributeSize[\"FOUR\"] = 4] = \"FOUR\";\n    InstanceAttributeSize[InstanceAttributeSize[\"ATLAS\"] = 99] = \"ATLAS\";\n})(InstanceAttributeSize = exports.InstanceAttributeSize || (exports.InstanceAttributeSize = {}));\nvar UniformSize;\n(function (UniformSize) {\n    UniformSize[UniformSize[\"ONE\"] = 1] = \"ONE\";\n    UniformSize[UniformSize[\"TWO\"] = 2] = \"TWO\";\n    UniformSize[UniformSize[\"THREE\"] = 3] = \"THREE\";\n    UniformSize[UniformSize[\"FOUR\"] = 4] = \"FOUR\";\n    UniformSize[UniformSize[\"MATRIX3\"] = 9] = \"MATRIX3\";\n    UniformSize[UniformSize[\"MATRIX4\"] = 16] = \"MATRIX4\";\n    UniformSize[UniformSize[\"ATLAS\"] = 99] = \"ATLAS\";\n})(UniformSize = exports.UniformSize || (exports.UniformSize = {}));\nvar VertexAttributeSize;\n(function (VertexAttributeSize) {\n    VertexAttributeSize[VertexAttributeSize[\"ONE\"] = 1] = \"ONE\";\n    VertexAttributeSize[VertexAttributeSize[\"TWO\"] = 2] = \"TWO\";\n    VertexAttributeSize[VertexAttributeSize[\"THREE\"] = 3] = \"THREE\";\n    VertexAttributeSize[VertexAttributeSize[\"FOUR\"] = 4] = \"FOUR\";\n})(VertexAttributeSize = exports.VertexAttributeSize || (exports.VertexAttributeSize = {}));\nvar ShaderInjectionTarget;\n(function (ShaderInjectionTarget) {\n    ShaderInjectionTarget[ShaderInjectionTarget[\"VERTEX\"] = 1] = \"VERTEX\";\n    ShaderInjectionTarget[ShaderInjectionTarget[\"FRAGMENT\"] = 2] = \"FRAGMENT\";\n    ShaderInjectionTarget[ShaderInjectionTarget[\"ALL\"] = 3] = \"ALL\";\n})(ShaderInjectionTarget = exports.ShaderInjectionTarget || (exports.ShaderInjectionTarget = {}));\nvar PickType;\n(function (PickType) {\n    PickType[PickType[\"NONE\"] = 0] = \"NONE\";\n    PickType[PickType[\"ALL\"] = 1] = \"ALL\";\n    PickType[PickType[\"SINGLE\"] = 2] = \"SINGLE\";\n})(PickType = exports.PickType || (exports.PickType = {}));\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Bounds = (function () {\n    function Bounds(options) {\n        this.x = 0;\n        this.y = 0;\n        this.width = 0;\n        this.height = 0;\n        this.x = options.x || options.left || 0;\n        this.y = options.y || options.top || 0;\n        this.height = options.height || (options.bottom || 0) - this.y || 0;\n        this.width = options.width || (options.right || 0) - this.x || 0;\n    }\n    Object.defineProperty(Bounds.prototype, \"area\", {\n        get: function () {\n            return this.width * this.height;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Bounds.prototype, \"bottom\", {\n        get: function () {\n            return this.y + this.height;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Bounds.prototype, \"left\", {\n        get: function () {\n            return this.x;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Bounds.prototype, \"mid\", {\n        get: function () {\n            return {\n                x: this.x + this.width / 2.0,\n                y: this.y + this.height / 2.0\n            };\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Bounds.prototype, \"right\", {\n        get: function () {\n            return this.x + this.width;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Bounds.prototype, \"top\", {\n        get: function () {\n            return this.y;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Bounds.emptyBounds = function () {\n        return new Bounds({\n            height: 0,\n            width: 0,\n            x: 0,\n            y: 0\n        });\n    };\n    Bounds.prototype.containsPoint = function (point) {\n        return !(point.x < this.x ||\n            point.y < this.y ||\n            point.x > this.right ||\n            point.y > this.bottom);\n    };\n    Bounds.prototype.encapsulate = function (item) {\n        if (item instanceof Bounds) {\n            if (item.x < this.x) {\n                this.width += Math.abs(item.x - this.x);\n                this.x = item.x;\n            }\n            if (item.y < this.y) {\n                this.height += Math.abs(item.y - this.y);\n                this.y = item.y;\n            }\n            if (this.right < item.right) {\n                this.width += item.right - this.right;\n            }\n            if (this.bottom < item.bottom) {\n                this.height += item.bottom - this.bottom;\n            }\n            return true;\n        }\n        else {\n            if (item.x < this.x) {\n                this.width += this.x - item.x;\n                this.x = item.x;\n            }\n            if (item.x > this.right) {\n                this.width += item.x - this.x;\n            }\n            if (item.y < this.y) {\n                this.height += this.y - item.y;\n                this.y = item.y;\n            }\n            if (item.y > this.bottom) {\n                this.height += item.y - this.y;\n            }\n            return true;\n        }\n    };\n    Bounds.prototype.fits = function (bounds) {\n        if (this.width === bounds.width && this.height === bounds.height) {\n            return 1;\n        }\n        if (this.width >= bounds.width && this.height >= bounds.height) {\n            return 2;\n        }\n        return 0;\n    };\n    Bounds.prototype.hitBounds = function (bounds) {\n        return !(this.right < bounds.x ||\n            this.x > bounds.right ||\n            this.bottom < bounds.y ||\n            this.y > bounds.height);\n    };\n    Bounds.prototype.isInside = function (bounds) {\n        return (this.x >= bounds.x &&\n            this.right <= bounds.right &&\n            this.y >= bounds.y &&\n            this.bottom <= bounds.bottom);\n    };\n    Bounds.prototype.toString = function () {\n        return \"{x: \" + this.x + \" y:\" + this.y + \" w:\" + this.width + \" h:\" + this.height + \"}\";\n    };\n    return Bounds;\n}());\nexports.Bounds = Bounds;\n","module.exports = __WEBPACK_EXTERNAL_MODULE__3__;","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar AnchorType;\n(function (AnchorType) {\n    AnchorType[AnchorType[\"BottomLeft\"] = 0] = \"BottomLeft\";\n    AnchorType[AnchorType[\"BottomMiddle\"] = 1] = \"BottomMiddle\";\n    AnchorType[AnchorType[\"BottomRight\"] = 2] = \"BottomRight\";\n    AnchorType[AnchorType[\"Custom\"] = 3] = \"Custom\";\n    AnchorType[AnchorType[\"Middle\"] = 4] = \"Middle\";\n    AnchorType[AnchorType[\"MiddleLeft\"] = 5] = \"MiddleLeft\";\n    AnchorType[AnchorType[\"MiddleRight\"] = 6] = \"MiddleRight\";\n    AnchorType[AnchorType[\"TopLeft\"] = 7] = \"TopLeft\";\n    AnchorType[AnchorType[\"TopMiddle\"] = 8] = \"TopMiddle\";\n    AnchorType[AnchorType[\"TopRight\"] = 9] = \"TopRight\";\n})(AnchorType = exports.AnchorType || (exports.AnchorType = {}));\nvar ScaleType;\n(function (ScaleType) {\n    ScaleType[ScaleType[\"ALWAYS\"] = 1] = \"ALWAYS\";\n    ScaleType[ScaleType[\"BOUND_MAX\"] = 2] = \"BOUND_MAX\";\n    ScaleType[ScaleType[\"NEVER\"] = 3] = \"NEVER\";\n})(ScaleType = exports.ScaleType || (exports.ScaleType = {}));\n","\"use strict\";\nfunction __export(m) {\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n}\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__export(require(\"./animation-helper\"));\n__export(require(\"./auto-easing-method\"));\n__export(require(\"./chart-camera\"));\n__export(require(\"./data-provider\"));\n__export(require(\"./instance\"));\n__export(require(\"./mouse\"));\n__export(require(\"./reference-camera\"));\n__export(require(\"./shader-templating\"));\n__export(require(\"./tracked-quad-tree\"));\n__export(require(\"./uid\"));\n__export(require(\"./vector\"));\n__export(require(\"./view-camera\"));\n__export(require(\"./webgl-stat\"));\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Three = require(\"three\");\nvar types_1 = require(\"../types\");\nvar util_1 = require(\"../util\");\nvar identify_by_key_1 = require(\"../util/identify-by-key\");\nvar instance_diff_manager_1 = require(\"./instance-diff-manager\");\nvar layer_interaction_handler_1 = require(\"./layer-interaction-handler\");\nvar Layer = (function (_super) {\n    __extends(Layer, _super);\n    function Layer(props) {\n        var _this = _super.call(this, props) || this;\n        _this.depth = 0;\n        _this.instanceById = new Map();\n        _this.instanceVertexCount = 0;\n        _this.props = Object.assign({}, Layer.defaultProps || {}, props);\n        var _a = _this.props.picking, picking = _a === void 0 ? types_1.PickType.NONE : _a;\n        if (picking === types_1.PickType.ALL) {\n            var pickingMethods = _this.getInstancePickingMethods();\n            _this.picking = {\n                hitTest: pickingMethods.hitTest,\n                quadTree: new util_1.TrackedQuadTree(0, 1, 0, 1, pickingMethods.boundsAccessor),\n                type: types_1.PickType.ALL\n            };\n        }\n        _this.diffManager = new instance_diff_manager_1.InstanceDiffManager(_this);\n        _this.diffProcessor = _this.diffManager.getDiffProcessor();\n        _this.interactions = new layer_interaction_handler_1.LayerInteractionHandler(_this);\n        return _this;\n    }\n    Layer.prototype.destroy = function () {\n        this.uniformManager.destroy();\n    };\n    Layer.prototype.didUpdateProps = function () {\n    };\n    Layer.prototype.draw = function () {\n        var uniform;\n        var value;\n        var changeList = this.props.data.changeList;\n        var change, instance, uniforms;\n        var diffProcessor = this.diffProcessor;\n        var diffManager = this.diffManager;\n        for (var i = 0, end = changeList.length; i < end; ++i) {\n            change = changeList[i];\n            instance = change[0];\n            uniforms = this.uniformManager.getUniforms(instance);\n            diffProcessor[change[1]](diffManager, instance, uniforms);\n        }\n        this.props.data.resolve();\n        for (var i = 0, end = this.uniforms.length; i < end; ++i) {\n            uniform = this.uniforms[i];\n            value = uniform.update(uniform);\n            uniform.materialUniforms.forEach(function (materialUniform) { return (materialUniform.value = value); });\n        }\n    };\n    Layer.prototype.getInstancePickingMethods = function () {\n        throw new Error(\"When picking is set to PickType.ALL, the layer MUST have this method implemented; otherwise, the layer is incompatible with this picking mode.\");\n    };\n    Layer.prototype.getModelType = function () {\n        return {\n            drawMode: Three.TrianglesDrawMode,\n            modelType: Three.Mesh\n        };\n    };\n    Layer.prototype.getMaterialOptions = function () {\n        return {};\n    };\n    Layer.prototype.initShader = function () {\n        return {\n            fs: require(\"../shaders/base/no-op.fs\"),\n            instanceAttributes: [],\n            uniforms: [],\n            vertexAttributes: [],\n            vertexCount: 0,\n            vs: require(\"../shaders/base/no-op.vs\")\n        };\n    };\n    Layer.prototype.makeInstanceAttribute = function (block, blockIndex, name, size, update, atlas) {\n        return {\n            atlas: atlas,\n            block: block,\n            blockIndex: blockIndex,\n            name: name,\n            size: size,\n            update: update\n        };\n    };\n    Layer.prototype.makeUniform = function (name, size, update, shaderInjection, qualifier) {\n        return {\n            name: name,\n            qualifier: qualifier,\n            shaderInjection: shaderInjection,\n            size: size,\n            update: update\n        };\n    };\n    Layer.prototype.willUpdateInstances = function (_changes) {\n    };\n    Layer.prototype.willUpdateProps = function (_newProps) {\n    };\n    Layer.prototype.didUpdate = function () {\n        this.props.data.resolve();\n    };\n    Layer.defaultProps = {};\n    return Layer;\n}(identify_by_key_1.IdentifyByKey));\nexports.Layer = Layer;\n","\"use strict\";\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar mobx_1 = require(\"mobx\");\nvar Instance = (function () {\n    function Instance(options) {\n        this._easing = new Map();\n        this._id = options.id;\n        this.active = options.active || this.active;\n    }\n    Instance.prototype.destroy = function () {\n    };\n    Object.defineProperty(Instance.prototype, \"easing\", {\n        get: function () {\n            return this._easing;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Instance.prototype, \"id\", {\n        get: function () {\n            return this._id;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    __decorate([\n        mobx_1.observable\n    ], Instance.prototype, \"active\", void 0);\n    return Instance;\n}());\nexports.Instance = Instance;\n","\"use strict\";\nfunction __export(m) {\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n}\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__export(require(\"./bounds\"));\n__export(require(\"./point\"));\n","\"use strict\";\nfunction __export(m) {\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n}\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__export(require(\"./atlas\"));\n__export(require(\"./atlas-manager\"));\n__export(require(\"./color-atlas-resource\"));\n__export(require(\"./color-rasterizer\"));\n__export(require(\"./image-atlas-resource\"));\n__export(require(\"./image-rasterizer\"));\n__export(require(\"./label-atlas-resource\"));\n__export(require(\"./label-rasterizer\"));\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar IdentifyByKey = (function () {\n    function IdentifyByKey(options) {\n        this.key = options.key;\n    }\n    Object.defineProperty(IdentifyByKey.prototype, \"id\", {\n        get: function () {\n            return this.key;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    return IdentifyByKey;\n}());\nexports.IdentifyByKey = IdentifyByKey;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar EdgeScaleType;\n(function (EdgeScaleType) {\n    EdgeScaleType[EdgeScaleType[\"NONE\"] = 0] = \"NONE\";\n    EdgeScaleType[EdgeScaleType[\"SCREEN_CURVE\"] = 1] = \"SCREEN_CURVE\";\n})(EdgeScaleType = exports.EdgeScaleType || (exports.EdgeScaleType = {}));\nvar EdgeType;\n(function (EdgeType) {\n    EdgeType[EdgeType[\"LINE\"] = 0] = \"LINE\";\n    EdgeType[EdgeType[\"BEZIER\"] = 1] = \"BEZIER\";\n    EdgeType[EdgeType[\"BEZIER2\"] = 2] = \"BEZIER2\";\n})(EdgeType = exports.EdgeType || (exports.EdgeType = {}));\nvar EdgeBroadphase;\n(function (EdgeBroadphase) {\n    EdgeBroadphase[EdgeBroadphase[\"ALL\"] = 0] = \"ALL\";\n    EdgeBroadphase[EdgeBroadphase[\"PASS_Y\"] = 1] = \"PASS_Y\";\n    EdgeBroadphase[EdgeBroadphase[\"PASS_X\"] = 2] = \"PASS_X\";\n})(EdgeBroadphase = exports.EdgeBroadphase || (exports.EdgeBroadphase = {}));\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar EventManager = (function () {\n    function EventManager() {\n    }\n    EventManager.prototype.getProjection = function (viewId) {\n        return this.mouseManager.getView(viewId);\n    };\n    EventManager.prototype.getView = function (viewId) {\n        return (this.mouseManager && this.mouseManager.getView(viewId)) || null;\n    };\n    EventManager.prototype.getViewScreenBounds = function (viewId) {\n        var view = this.mouseManager.getView(viewId);\n        if (view) {\n            return view.screenBounds;\n        }\n        return null;\n    };\n    EventManager.prototype.setMouseManager = function (mouseManager) {\n        this.mouseManager = mouseManager;\n    };\n    return EventManager;\n}());\nexports.EventManager = EventManager;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Three = require(\"three\");\nfunction isMesh(val) {\n    return Boolean(val.isMesh);\n}\nfunction generateLayerModel(layer, geometry, material) {\n    var modelInfo = layer.getModelType();\n    var model = new modelInfo.modelType(geometry, material);\n    if (isMesh(model)) {\n        model.drawMode =\n            modelInfo.drawMode === undefined\n                ? Three.TriangleStripDrawMode\n                : modelInfo.drawMode;\n    }\n    return model;\n}\nexports.generateLayerModel = generateLayerModel;\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar absolute_position_1 = require(\"../primitives/absolute-position\");\nvar bounds_1 = require(\"../primitives/bounds\");\nvar identify_by_key_1 = require(\"../util/identify-by-key\");\nvar view_camera_1 = require(\"../util/view-camera\");\nvar ClearFlags;\n(function (ClearFlags) {\n    ClearFlags[ClearFlags[\"COLOR\"] = 1] = \"COLOR\";\n    ClearFlags[ClearFlags[\"DEPTH\"] = 2] = \"DEPTH\";\n    ClearFlags[ClearFlags[\"STENCIL\"] = 4] = \"STENCIL\";\n})(ClearFlags = exports.ClearFlags || (exports.ClearFlags = {}));\nfunction isOrthographic(val) {\n    return \"left\" in val;\n}\nvar View = (function (_super) {\n    __extends(View, _super);\n    function View(options) {\n        var _this = _super.call(this, options) || this;\n        _this.depth = 0;\n        _this.pixelRatio = window.devicePixelRatio;\n        Object.assign(_this, options);\n        return _this;\n    }\n    View.prototype.screenToPixelSpace = function (point, out) {\n        var p = out || { x: 0, y: 0 };\n        p.x = point.x * this.pixelRatio;\n        p.y = point.y * this.pixelRatio;\n        return p;\n    };\n    View.prototype.pixelSpaceToScreen = function (point, out) {\n        var p = out || { x: 0, y: 0 };\n        p.x = point.x / this.pixelRatio;\n        p.y = point.y / this.pixelRatio;\n        return p;\n    };\n    View.prototype.screenToView = function (point, out) {\n        var p = this.screenToPixelSpace(point, out);\n        p.x = p.x - this.viewBounds.x;\n        p.y = p.y - this.viewBounds.y;\n        return p;\n    };\n    View.prototype.viewToScreen = function (point, out) {\n        var p = { x: 0, y: 0 };\n        p.x = point.x + this.viewBounds.x;\n        p.y = point.y + this.viewBounds.y;\n        return this.pixelSpaceToScreen(p, out);\n    };\n    View.prototype.screenToWorld = function (point, out) {\n        var view = this.pixelSpaceToScreen(this.screenToView(point));\n        var world = out || { x: 0, y: 0 };\n        world.x =\n            (view.x - this.camera.offset[0] * this.camera.scale[0]) /\n                this.camera.scale[0];\n        world.y =\n            (view.y - this.camera.offset[1] * this.camera.scale[1]) /\n                this.camera.scale[1];\n        if (this.viewCamera.type === view_camera_1.ViewCameraType.CUSTOM) {\n            console.warn(\"Custom View Camera projections not supported yet\");\n        }\n        return world;\n    };\n    View.prototype.worldToScreen = function (point, out) {\n        var screen = { x: 0, y: 0 };\n        screen.x =\n            (point.x * this.camera.scale[0] +\n                this.camera.offset[0] * this.camera.scale[0]) *\n                this.pixelRatio;\n        screen.y =\n            (point.y * this.camera.scale[1] +\n                this.camera.offset[1] * this.camera.scale[1]) *\n                this.pixelRatio;\n        if (this.viewCamera.type === view_camera_1.ViewCameraType.CUSTOM) {\n            console.warn(\"Custom View Camera projections not supported yet\");\n        }\n        return this.viewToScreen(screen, out);\n    };\n    View.prototype.viewToWorld = function (point, out) {\n        var world = out || { x: 0, y: 0 };\n        var screen = this.pixelSpaceToScreen(point);\n        world.x =\n            (screen.x - this.camera.offset[0] * this.camera.scale[0]) /\n                this.camera.scale[0];\n        world.y =\n            (screen.y - this.camera.offset[1] * this.camera.scale[1]) /\n                this.camera.scale[1];\n        if (this.viewCamera.type === view_camera_1.ViewCameraType.CUSTOM) {\n            console.warn(\"Custom View Camera projections not supported yet\");\n        }\n        return world;\n    };\n    View.prototype.worldToView = function (point, out) {\n        var screen = out || { x: 0, y: 0 };\n        screen.x =\n            point.x * this.camera.scale[0] +\n                this.camera.offset[0] * this.camera.scale[0];\n        screen.y =\n            point.y * this.camera.scale[1] +\n                this.camera.offset[1] * this.camera.scale[1];\n        if (this.viewCamera.type === view_camera_1.ViewCameraType.CUSTOM) {\n            console.warn(\"Custom View Camera projections not supported yet\");\n        }\n        return screen;\n    };\n    View.prototype.fitViewtoViewport = function (surfaceDimensions) {\n        if (this.viewCamera.type === view_camera_1.ViewCameraType.CONTROLLED &&\n            isOrthographic(this.viewCamera.baseCamera)) {\n            var viewBounds = absolute_position_1.getAbsolutePositionBounds(this.viewport, surfaceDimensions, this.pixelRatio);\n            var width = viewBounds.width;\n            var height = viewBounds.height;\n            var viewport = {\n                bottom: -height / 2,\n                far: 10000000,\n                left: -width / 2,\n                near: -100,\n                right: width / 2,\n                top: height / 2\n            };\n            var scaleX = 1;\n            var scaleY = 1;\n            var camera = this.viewCamera.baseCamera;\n            Object.assign(camera, viewport);\n            camera.position.set(-viewBounds.width / 2.0 * scaleX, viewBounds.height / 2.0 * scaleY, camera.position.z);\n            camera.scale.set(scaleX, -scaleY, 1.0);\n            camera.updateMatrix();\n            camera.updateMatrixWorld(true);\n            camera.updateProjectionMatrix();\n            this.viewBounds = viewBounds;\n            this.viewBounds.data = this;\n            this.screenBounds = new bounds_1.Bounds({\n                height: this.viewBounds.height / this.pixelRatio,\n                width: this.viewBounds.width / this.pixelRatio,\n                x: this.viewBounds.x / this.pixelRatio,\n                y: this.viewBounds.y / this.pixelRatio\n            });\n        }\n        else if (!isOrthographic(this.viewCamera.baseCamera)) {\n            console.warn(\"Fit to viewport does not support non-orthographic cameras as a default behavior.\");\n        }\n    };\n    View.DEFAULT_VIEW_ID = \"__default__\";\n    return View;\n}(identify_by_key_1.IdentifyByKey));\nexports.View = View;\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Three = require(\"three\");\nvar identify_by_key_1 = require(\"../util/identify-by-key\");\nfunction sortByDepth(a, b) {\n    return a.depth - b.depth;\n}\nvar Scene = (function (_super) {\n    __extends(Scene, _super);\n    function Scene(options) {\n        var _this = _super.call(this, options) || this;\n        _this.container = new Three.Scene();\n        _this.layers = [];\n        _this.sortIsDirty = false;\n        _this.viewById = new Map();\n        _this.container.frustumCulled = false;\n        _this.container.autoUpdate = false;\n        return _this;\n    }\n    Scene.prototype.addLayer = function (layer) {\n        this.layers.push(layer);\n        this.sortIsDirty = true;\n    };\n    Scene.prototype.addView = function (view) {\n        this.viewById.set(view.id, view);\n    };\n    Scene.prototype.destroy = function () {\n        delete this.container;\n    };\n    Scene.prototype.removeLayer = function (layer) {\n        if (this.layers) {\n            var index = this.layers.indexOf(layer);\n            if (index >= 0) {\n                this.layers.splice(index, 1);\n                return;\n            }\n        }\n        console.warn(\"Could not remove a layer from the scene as the layer was not a part of the scene to start. Scene:\", this.id, \"Layer:\", layer.id);\n    };\n    Scene.prototype.sortLayers = function () {\n        if (this.sortIsDirty) {\n            this.layers.sort(sortByDepth);\n        }\n    };\n    Scene.DEFAULT_SCENE_ID = \"__default__\";\n    return Scene;\n}(identify_by_key_1.IdentifyByKey));\nexports.Scene = Scene;\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar base_atlas_resource_1 = require(\"./base-atlas-resource\");\nvar LabelAtlasResource = (function (_super) {\n    __extends(LabelAtlasResource, _super);\n    function LabelAtlasResource(label) {\n        var _this = _super.call(this) || this;\n        _this.label = label;\n        return _this;\n    }\n    return LabelAtlasResource;\n}(base_atlas_resource_1.BaseAtlasResource));\nexports.LabelAtlasResource = LabelAtlasResource;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar BaseAtlasResource = (function () {\n    function BaseAtlasResource() {\n        this.sampleScale = 1;\n    }\n    return BaseAtlasResource;\n}());\nexports.BaseAtlasResource = BaseAtlasResource;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar ViewCameraType;\n(function (ViewCameraType) {\n    ViewCameraType[ViewCameraType[\"CONTROLLED\"] = 0] = \"CONTROLLED\";\n    ViewCameraType[ViewCameraType[\"CUSTOM\"] = 1] = \"CUSTOM\";\n})(ViewCameraType = exports.ViewCameraType || (exports.ViewCameraType = {}));\nvar ViewCamera = (function () {\n    function ViewCamera() {\n        this.type = ViewCameraType.CONTROLLED;\n    }\n    return ViewCamera;\n}());\nexports.ViewCamera = ViewCamera;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction shaderTemplate(shader, options, required) {\n    var matched = new Map();\n    var noValueProvided = new Map();\n    var notFound = new Map();\n    var shaderOptions = new Map();\n    var shaderResults = shader.replace(/\\$\\{(\\w+)\\}/g, function (_x, match) {\n        shaderOptions.set(match, (shaderOptions.get(match) || 0) + 1);\n        if (match in options) {\n            matched.set(match, (matched.get(match) || 0) + 1);\n            return options[match];\n        }\n        noValueProvided.set(match, (noValueProvided.get(match) || 0) + 1);\n        return \"\";\n    });\n    Object.keys(options).forEach(function (option) {\n        if (!matched.get(option)) {\n            notFound.set(option, (notFound.get(option) || 0) + 1);\n        }\n    });\n    var results = {\n        resolvedShaderOptions: matched,\n        shader: shaderResults,\n        shaderProvidedOptions: shaderOptions,\n        unresolvedProvidedOptions: notFound,\n        unresolvedShaderOptions: noValueProvided\n    };\n    if (required) {\n        required.values.forEach(function (require) {\n            if (results.unresolvedProvidedOptions.get(require)) {\n                console.error(required.name + \": Could not resolve all the required inputs. Input:\", require);\n            }\n            else if (results.unresolvedShaderOptions.get(require)) {\n                console.error(required.name + \": A required option was not provided in the options parameter. Option:\", require);\n            }\n            else if (!results.resolvedShaderOptions.get(require)) {\n                console.error(required.name + \": A required option was not provided in the options parameter. Option:\", require);\n            }\n        });\n    }\n    return results;\n}\nexports.shaderTemplate = shaderTemplate;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar chartCameraUID = 0;\nfunction applyArray(target, source) {\n    target && source && target.splice.apply(target, [0, source.length].concat(source));\n}\nvar ChartCamera = (function () {\n    function ChartCamera(options) {\n        this._id = chartCameraUID++;\n        this.offset = [0, 0, 0];\n        this.scale = [1, 1, 1];\n        if (options) {\n            applyArray(this.offset, options.offset);\n            applyArray(this.scale, options.scale);\n        }\n    }\n    Object.defineProperty(ChartCamera.prototype, \"id\", {\n        get: function () {\n            return this._id;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    ChartCamera.prototype.position = function (location) {\n        this.offset = location.slice(0);\n    };\n    return ChartCamera;\n}());\nexports.ChartCamera = ChartCamera;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar sqrt = Math.sqrt;\nfunction add1(left, right) {\n    return [left[0] + right[0]];\n}\nexports.add1 = add1;\nfunction scale1(vec, scale) {\n    return [vec[0] * scale];\n}\nexports.scale1 = scale1;\nfunction subtract1(left, right) {\n    return [left[0] - right[0]];\n}\nexports.subtract1 = subtract1;\nfunction multiply1(left, right) {\n    return [left[0] * right[0]];\n}\nexports.multiply1 = multiply1;\nfunction dot1(left, right) {\n    return left[0] * right[0];\n}\nexports.dot1 = dot1;\nfunction linear1(start, end, t) {\n    return scale1(add1(subtract1(end, start), start), t);\n}\nexports.linear1 = linear1;\nfunction length1(start) {\n    return sqrt(dot1(start, start));\n}\nexports.length1 = length1;\nfunction add2(left, right) {\n    return [left[0] + right[0], left[1] + right[1]];\n}\nexports.add2 = add2;\nfunction scale2(left, scale) {\n    return [left[0] * scale, left[1] * scale];\n}\nexports.scale2 = scale2;\nfunction subtract2(left, right) {\n    return [left[0] - right[0], left[1] - right[1]];\n}\nexports.subtract2 = subtract2;\nfunction multiply2(left, right) {\n    return [left[0] * right[0], left[1] * right[1]];\n}\nexports.multiply2 = multiply2;\nfunction dot2(left, right) {\n    return left[0] * right[0] + left[1] * right[1];\n}\nexports.dot2 = dot2;\nfunction linear2(start, end, t) {\n    return scale2(add2(subtract2(end, start), start), t);\n}\nexports.linear2 = linear2;\nfunction length2(start) {\n    return sqrt(dot2(start, start));\n}\nexports.length2 = length2;\nfunction add3(left, right) {\n    return [left[0] + right[0], left[1] + right[1], left[2] + right[2]];\n}\nexports.add3 = add3;\nfunction scale3(left, scale) {\n    return [left[0] * scale, left[1] * scale, left[2] * scale];\n}\nexports.scale3 = scale3;\nfunction subtract3(left, right) {\n    return [left[0] - right[0], left[1] - right[1], left[2] - right[2]];\n}\nexports.subtract3 = subtract3;\nfunction multiply3(left, right) {\n    return [left[0] * right[0], left[1] * right[1], left[2] * right[2]];\n}\nexports.multiply3 = multiply3;\nfunction linear3(start, end, t) {\n    return scale3(add3(subtract3(end, start), start), t);\n}\nexports.linear3 = linear3;\nfunction length3(start) {\n    return sqrt(dot3(start, start));\n}\nexports.length3 = length3;\nfunction dot3(left, right) {\n    return left[0] * right[0] + left[1] * right[1] + left[2] * right[2];\n}\nexports.dot3 = dot3;\nfunction add4(left, right) {\n    return [\n        left[0] + right[0],\n        left[1] + right[1],\n        left[2] + right[2],\n        left[3] + right[3]\n    ];\n}\nexports.add4 = add4;\nfunction scale4(left, scale) {\n    return [left[0] * scale, left[1] * scale, left[2] * scale, left[3] * scale];\n}\nexports.scale4 = scale4;\nfunction subtract4(left, right) {\n    return [\n        left[0] - right[0],\n        left[1] - right[1],\n        left[2] - right[2],\n        left[3] - right[3]\n    ];\n}\nexports.subtract4 = subtract4;\nfunction multiply4(left, right) {\n    return [\n        left[0] * right[0],\n        left[1] * right[1],\n        left[2] * right[2],\n        left[3] * right[3]\n    ];\n}\nexports.multiply4 = multiply4;\nfunction dot4(left, right) {\n    return (left[0] * right[0] +\n        left[1] * right[1] +\n        left[2] * right[2] +\n        left[3] * right[3]);\n}\nexports.dot4 = dot4;\nfunction linear4(start, end, t) {\n    return scale4(add4(subtract4(end, start), start), t);\n}\nexports.linear4 = linear4;\nfunction length4(start) {\n    return sqrt(dot4(start, start));\n}\nexports.length4 = length4;\nfunction VecMath(vec) {\n    var methods;\n    if (vec.length === 1) {\n        methods = {\n            add: add1,\n            dot: dot1,\n            length: length1,\n            linear: linear1,\n            multiply: multiply1,\n            scale: scale1,\n            subtract: subtract1\n        };\n        return methods;\n    }\n    else if (vec.length === 2) {\n        methods = {\n            add: add2,\n            dot: dot2,\n            length: length2,\n            linear: linear2,\n            multiply: multiply2,\n            scale: scale2,\n            subtract: subtract2\n        };\n        return methods;\n    }\n    else if (vec.length === 3) {\n        methods = {\n            add: add3,\n            dot: dot3,\n            length: length3,\n            linear: linear3,\n            multiply: multiply3,\n            scale: scale3,\n            subtract: subtract3\n        };\n        return methods;\n    }\n    methods = {\n        add: add4,\n        dot: dot4,\n        length: length4,\n        linear: linear4,\n        multiply: multiply4,\n        scale: scale4,\n        subtract: subtract4\n    };\n    return methods;\n}\nexports.VecMath = VecMath;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar vector_1 = require(\"./vector\");\nvar min = Math.min, max = Math.max, pow = Math.pow, round = Math.round, sin = Math.sin, PI = Math.PI;\nvar GPU_PI = round(PI * 1000) / 1000;\nfunction clamp(x, minVal, maxVal) {\n    return min(max(x, minVal), maxVal);\n}\nvar AutoEasingLoopStyle;\n(function (AutoEasingLoopStyle) {\n    AutoEasingLoopStyle[AutoEasingLoopStyle[\"NONE\"] = 1] = \"NONE\";\n    AutoEasingLoopStyle[AutoEasingLoopStyle[\"REPEAT\"] = 2] = \"REPEAT\";\n    AutoEasingLoopStyle[AutoEasingLoopStyle[\"REFLECT\"] = 3] = \"REFLECT\";\n})(AutoEasingLoopStyle = exports.AutoEasingLoopStyle || (exports.AutoEasingLoopStyle = {}));\nvar immediateGPU = \"\\n${easingMethod} {\\n  return end;\\n}\\n\";\nvar linearGPU = \"\\n${easingMethod} {\\n  return (end - start) * t + start;\\n}\\n\";\nvar easeInQuadGPU = \"\\n${easingMethod} {\\n  float time = t * t;\\n  return (end - start) * time + start;\\n}\\n\";\nvar easeOutQuadGPU = \"\\n${easingMethod} {\\n  float time = t * (2.0 - t);\\n  return (end - start) * time + start;\\n}\\n\";\nvar easeInOutQuadGPU = \"\\n${easingMethod} {\\n  float time = t < 0.5 ? 2.0 * t * t : -1.0 + (4.0 - 2.0 * t) * t;\\n  return (end - start) * time + start;\\n}\\n\";\nvar easeInCubicGPU = \"\\n${easingMethod} {\\n  float time = t * t * t;\\n  return (end - start) * time + start;\\n}\\n\";\nvar easeOutCubicGPU = \"\\n${easingMethod} {\\n  float t1 = t - 1.0;\\n  float time = t1 * t1 * t1 + 1.0;\\n  return (end - start) * time + start;\\n}\\n\";\nvar easeInOutCubicGPU = \"\\n${easingMethod} {\\n  float time = t < 0.5 ? 4.0 * t * t * t : (t - 1.0) * (2.0 * t - 2.0) * (2.0 * t - 2.0) + 1.0;\\n  return (end - start) * time + start;\\n}\\n\";\nvar easeInQuartGPU = \"\\n${easingMethod} {\\n  float time = t * t * t * t;\\n  return (end - start) * time + start;\\n}\\n\";\nvar easeOutQuartGPU = \"\\n${easingMethod} {\\n  float t1 = t - 1.0;\\n  float time = 1.0 - t1 * t1 * t1 * t1;\\n  return (end - start) * time + start;\\n}\\n\";\nvar easeInOutQuartGPU = \"\\n${easingMethod} {\\n  float t1 = t - 1.0;\\n  float time = t < 0.5 ? 8.0 * t * t * t * t : 1.0 - 8.0 * t1 * t1 * t1 * t1;\\n  return (end - start) * time + start;\\n}\\n\";\nvar easeInQuintGPU = \"\\n${easingMethod} {\\n  float time = t * t * t * t * t;\\n  return (end - start) * time + start;\\n}\\n\";\nvar easeOutQuintGPU = \"\\n${easingMethod} {\\n  float t1 = t - 1.0;\\n  float time = 1.0 + t1 * t1 * t1 * t1 * t1;\\n  return (end - start) * time + start;\\n}\\n\";\nvar easeInOutQuintGPU = \"\\n${easingMethod} {\\n  float t1 = t - 1.0;\\n  float time = t < 0.5 ? 16.0 * t * t * t * t * t : 1.0 + 16.0 * t1 * t1 * t1 * t1 * t1;\\n  return (end - start) * time + start;\\n}\\n\";\nvar easeOutElasticGPU = \"\\n${easingMethod} {\\n  float p = 0.3;\\n  float time = pow(2.0, -10.0 * t) * sin((t - p / 4.0) * (2.0 * \" + GPU_PI + \") / p) + 1.0;\\n  return (end - start) * time + start;\\n}\\n\";\nvar easeBackInGPU = \"\\n${easingMethod} {\\n  float time = t * t * t - t * 1.05 * sin(t * \" + GPU_PI + \");\\n  return (end - start) * time + start;\\n}\\n\";\nvar easeBackOutGPU = \"\\n${easingMethod} {\\n  float t1 = t - 1.0;\\n  float a = 1.7;\\n  float time = (t1 * t1 * ((a + 1.0) * t1 + a) + 1.0);\\n  return (end - start) * time + start;\\n}\\n\";\nvar easeBackInOutGPU = \"\\n${easingMethod} {\\n  float a = 1.4;\\n  float a1 = a * 1.525;\\n  float t1 = t / 0.5;\\n  float t2 = t1 - 2.0;\\n  float time =\\n    (t1 < 1.0) ? 0.5 * (t1 * t1 * (a1 + 1.0) * t1 - a1) :\\n    0.5 * (t2 * t2 * ((a1 + 1.0) * t2 + a1) + 2.0)\\n  ;\\n\\n  return (end - start) * time + start;\\n}\\n\";\nvar AutoEasingMethod = (function () {\n    function AutoEasingMethod(cpu, gpu, duration, method) {\n        this.delay = 0;\n        this.duration = 500;\n        this.loop = AutoEasingLoopStyle.NONE;\n        this.cpu = cpu;\n        this.gpu = gpu;\n        this.duration = duration || 500;\n        this.methodName = method || \"easingMethod\";\n    }\n    AutoEasingMethod.immediate = function (duration, delay, loop) {\n        if (delay === void 0) { delay = 0; }\n        if (loop === void 0) { loop = AutoEasingLoopStyle.NONE; }\n        return {\n            cpu: function (_start, end, _t) { return end; },\n            delay: delay,\n            duration: duration,\n            gpu: immediateGPU,\n            loop: loop,\n            methodName: \"immediate\"\n        };\n    };\n    AutoEasingMethod.linear = function (duration, delay, loop) {\n        if (delay === void 0) { delay = 0; }\n        if (loop === void 0) { loop = AutoEasingLoopStyle.NONE; }\n        return {\n            cpu: function (start, end, t) {\n                var _a = vector_1.VecMath(start), add = _a.add, scale = _a.scale, subtract = _a.subtract;\n                t = clamp(t, 0, 1);\n                return add(scale(subtract(end, start), t), start);\n            },\n            delay: delay,\n            duration: duration,\n            gpu: linearGPU,\n            loop: loop,\n            methodName: \"linear\"\n        };\n    };\n    AutoEasingMethod.easeInQuad = function (duration, delay, loop) {\n        if (delay === void 0) { delay = 0; }\n        if (loop === void 0) { loop = AutoEasingLoopStyle.NONE; }\n        return {\n            cpu: function (start, end, t) {\n                t = clamp(t, 0, 1);\n                var time = t * t;\n                var _a = vector_1.VecMath(start), add = _a.add, scale = _a.scale, subtract = _a.subtract;\n                return add(scale(subtract(end, start), time), start);\n            },\n            delay: delay,\n            duration: duration,\n            gpu: easeInQuadGPU,\n            loop: loop,\n            methodName: \"easeInQuad\"\n        };\n    };\n    AutoEasingMethod.easeOutQuad = function (duration, delay, loop) {\n        if (delay === void 0) { delay = 0; }\n        if (loop === void 0) { loop = AutoEasingLoopStyle.NONE; }\n        return {\n            cpu: function (start, end, t) {\n                t = clamp(t, 0, 1);\n                var time = t * (2 - t);\n                var _a = vector_1.VecMath(start), add = _a.add, scale = _a.scale, subtract = _a.subtract;\n                return add(scale(subtract(end, start), time), start);\n            },\n            delay: delay,\n            duration: duration,\n            gpu: easeOutQuadGPU,\n            loop: loop,\n            methodName: \"easeOutQuad\"\n        };\n    };\n    AutoEasingMethod.easeInOutQuad = function (duration, delay, loop) {\n        if (delay === void 0) { delay = 0; }\n        if (loop === void 0) { loop = AutoEasingLoopStyle.NONE; }\n        return {\n            cpu: function (start, end, t) {\n                t = clamp(t, 0, 1);\n                var time = t < 0.5 ? 2 * t * t : -1 + (4 - 2 * t) * t;\n                var _a = vector_1.VecMath(start), add = _a.add, scale = _a.scale, subtract = _a.subtract;\n                return add(scale(subtract(end, start), time), start);\n            },\n            delay: delay,\n            duration: duration,\n            gpu: easeInOutQuadGPU,\n            loop: loop,\n            methodName: \"easeInOutQuad\"\n        };\n    };\n    AutoEasingMethod.easeInCubic = function (duration, delay, loop) {\n        if (delay === void 0) { delay = 0; }\n        if (loop === void 0) { loop = AutoEasingLoopStyle.NONE; }\n        return {\n            cpu: function (start, end, t) {\n                t = clamp(t, 0, 1);\n                var time = t * t * t;\n                var _a = vector_1.VecMath(start), add = _a.add, scale = _a.scale, subtract = _a.subtract;\n                return add(scale(subtract(end, start), time), start);\n            },\n            delay: delay,\n            duration: duration,\n            gpu: easeInCubicGPU,\n            loop: loop,\n            methodName: \"easeInCubic\"\n        };\n    };\n    AutoEasingMethod.easeOutCubic = function (duration, delay, loop) {\n        if (delay === void 0) { delay = 0; }\n        if (loop === void 0) { loop = AutoEasingLoopStyle.NONE; }\n        return {\n            cpu: function (start, end, t) {\n                t = clamp(t, 0, 1);\n                var time = --t * t * t + 1;\n                var _a = vector_1.VecMath(start), add = _a.add, scale = _a.scale, subtract = _a.subtract;\n                return add(scale(subtract(end, start), time), start);\n            },\n            delay: delay,\n            duration: duration,\n            gpu: easeOutCubicGPU,\n            loop: loop,\n            methodName: \"easeOutCubic\"\n        };\n    };\n    AutoEasingMethod.easeInOutCubic = function (duration, delay, loop) {\n        if (delay === void 0) { delay = 0; }\n        if (loop === void 0) { loop = AutoEasingLoopStyle.NONE; }\n        return {\n            cpu: function (start, end, t) {\n                t = clamp(t, 0, 1);\n                var time = t < 0.5 ? 4 * t * t * t : (t - 1) * (2 * t - 2) * (2 * t - 2) + 1;\n                var _a = vector_1.VecMath(start), add = _a.add, scale = _a.scale, subtract = _a.subtract;\n                return add(scale(subtract(end, start), time), start);\n            },\n            delay: delay,\n            duration: duration,\n            gpu: easeInOutCubicGPU,\n            loop: loop,\n            methodName: \"easeInOutCubic\"\n        };\n    };\n    AutoEasingMethod.easeInQuart = function (duration, delay, loop) {\n        if (delay === void 0) { delay = 0; }\n        if (loop === void 0) { loop = AutoEasingLoopStyle.NONE; }\n        return {\n            cpu: function (start, end, t) {\n                t = clamp(t, 0, 1);\n                var time = t * t * t * t;\n                var _a = vector_1.VecMath(start), add = _a.add, scale = _a.scale, subtract = _a.subtract;\n                return add(scale(subtract(end, start), time), start);\n            },\n            delay: delay,\n            duration: duration,\n            gpu: easeInQuartGPU,\n            loop: loop,\n            methodName: \"easeInQuart\"\n        };\n    };\n    AutoEasingMethod.easeOutQuart = function (duration, delay, loop) {\n        if (delay === void 0) { delay = 0; }\n        if (loop === void 0) { loop = AutoEasingLoopStyle.NONE; }\n        return {\n            cpu: function (start, end, t) {\n                t = clamp(t, 0, 1);\n                var time = 1 - --t * t * t * t;\n                var _a = vector_1.VecMath(start), add = _a.add, scale = _a.scale, subtract = _a.subtract;\n                return add(scale(subtract(end, start), time), start);\n            },\n            delay: delay,\n            duration: duration,\n            gpu: easeOutQuartGPU,\n            loop: loop,\n            methodName: \"easeOutQuart\"\n        };\n    };\n    AutoEasingMethod.easeInOutQuart = function (duration, delay, loop) {\n        if (delay === void 0) { delay = 0; }\n        if (loop === void 0) { loop = AutoEasingLoopStyle.NONE; }\n        return {\n            cpu: function (start, end, t) {\n                t = clamp(t, 0, 1);\n                var time = t < 0.5 ? 8 * t * t * t * t : 1 - 8 * --t * t * t * t;\n                var _a = vector_1.VecMath(start), add = _a.add, scale = _a.scale, subtract = _a.subtract;\n                return add(scale(subtract(end, start), time), start);\n            },\n            delay: delay,\n            duration: duration,\n            gpu: easeInOutQuartGPU,\n            loop: loop,\n            methodName: \"easeInOutQuart\"\n        };\n    };\n    AutoEasingMethod.easeInQuint = function (duration, delay, loop) {\n        if (delay === void 0) { delay = 0; }\n        if (loop === void 0) { loop = AutoEasingLoopStyle.NONE; }\n        return {\n            cpu: function (start, end, t) {\n                t = clamp(t, 0, 1);\n                var time = t * t * t * t * t;\n                var _a = vector_1.VecMath(start), add = _a.add, scale = _a.scale, subtract = _a.subtract;\n                return add(scale(subtract(end, start), time), start);\n            },\n            delay: delay,\n            duration: duration,\n            gpu: easeInQuintGPU,\n            loop: loop,\n            methodName: \"easeInQuint\"\n        };\n    };\n    AutoEasingMethod.easeOutQuint = function (duration, delay, loop) {\n        if (delay === void 0) { delay = 0; }\n        if (loop === void 0) { loop = AutoEasingLoopStyle.NONE; }\n        return {\n            cpu: function (start, end, t) {\n                t = clamp(t, 0, 1);\n                var time = 1 + --t * t * t * t * t;\n                var _a = vector_1.VecMath(start), add = _a.add, scale = _a.scale, subtract = _a.subtract;\n                return add(scale(subtract(end, start), time), start);\n            },\n            delay: delay,\n            duration: duration,\n            gpu: easeOutQuintGPU,\n            loop: loop,\n            methodName: \"easeOutQuint\"\n        };\n    };\n    AutoEasingMethod.easeInOutQuint = function (duration, delay, loop) {\n        if (delay === void 0) { delay = 0; }\n        if (loop === void 0) { loop = AutoEasingLoopStyle.NONE; }\n        return {\n            cpu: function (start, end, t) {\n                t = clamp(t, 0, 1);\n                var time = t < 0.5 ? 16 * t * t * t * t * t : 1 + 16 * --t * t * t * t * t;\n                var _a = vector_1.VecMath(start), add = _a.add, scale = _a.scale, subtract = _a.subtract;\n                return add(scale(subtract(end, start), time), start);\n            },\n            delay: delay,\n            duration: duration,\n            gpu: easeInOutQuintGPU,\n            loop: loop,\n            methodName: \"easeInOutQuint\"\n        };\n    };\n    AutoEasingMethod.easeOutElastic = function (duration, delay, loop) {\n        if (delay === void 0) { delay = 0; }\n        if (loop === void 0) { loop = AutoEasingLoopStyle.NONE; }\n        return {\n            cpu: function (start, end, t) {\n                t = clamp(t, 0, 1);\n                var p = 0.3;\n                var time = pow(2, -10 * t) * sin((t - p / 4) * (2 * PI) / p) + 1;\n                var _a = vector_1.VecMath(start), add = _a.add, scale = _a.scale, subtract = _a.subtract;\n                return add(scale(subtract(end, start), time), start);\n            },\n            delay: delay,\n            duration: duration,\n            gpu: easeOutElasticGPU,\n            loop: loop,\n            methodName: \"easeOutElastic\"\n        };\n    };\n    AutoEasingMethod.easeBackIn = function (duration, delay, loop) {\n        if (delay === void 0) { delay = 0; }\n        if (loop === void 0) { loop = AutoEasingLoopStyle.NONE; }\n        return {\n            cpu: function (start, end, t) {\n                t = clamp(t, 0, 1);\n                var a = 1.05;\n                var time = t * t * t - t * a * sin(t * PI);\n                var _a = vector_1.VecMath(start), add = _a.add, scale = _a.scale, subtract = _a.subtract;\n                return add(scale(subtract(end, start), time), start);\n            },\n            delay: delay,\n            duration: duration,\n            gpu: easeBackInGPU,\n            loop: loop,\n            methodName: \"easeBackIn\"\n        };\n    };\n    AutoEasingMethod.easeBackOut = function (duration, delay, loop) {\n        if (delay === void 0) { delay = 0; }\n        if (loop === void 0) { loop = AutoEasingLoopStyle.NONE; }\n        return {\n            cpu: function (start, end, t) {\n                t = clamp(t, 0, 1);\n                var a = 1.7;\n                var t1 = t - 1;\n                var time = t1 * t1 * ((a + 1) * t1 + a) + 1;\n                var _a = vector_1.VecMath(start), add = _a.add, scale = _a.scale, subtract = _a.subtract;\n                return add(scale(subtract(end, start), time), start);\n            },\n            delay: delay,\n            duration: duration,\n            gpu: easeBackOutGPU,\n            loop: loop,\n            methodName: \"easeBackOut\"\n        };\n    };\n    AutoEasingMethod.easeBackInOut = function (duration, delay, loop) {\n        if (delay === void 0) { delay = 0; }\n        if (loop === void 0) { loop = AutoEasingLoopStyle.NONE; }\n        return {\n            cpu: function (start, end, t) {\n                t = clamp(t, 0, 1);\n                var a = 1.7;\n                var a1 = a * 1.525;\n                var t1 = t / 0.5;\n                var t2 = t1 - 2;\n                var time = t1 < 1\n                    ? 0.5 * (t1 * t1 * (a1 + 1) * t1 - a1)\n                    : 0.5 * (t2 * t2 * ((a1 + 1) * t2 + a1) + 2);\n                var _a = vector_1.VecMath(start), add = _a.add, scale = _a.scale, subtract = _a.subtract;\n                return add(scale(subtract(end, start), time), start);\n            },\n            delay: delay,\n            duration: duration,\n            gpu: easeBackInOutGPU,\n            loop: loop,\n            methodName: \"easeBackInOut\"\n        };\n    };\n    return AutoEasingMethod;\n}());\nexports.AutoEasingMethod = AutoEasingMethod;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar mouse_1 = require(\"../util/mouse\");\nvar quad_tree_1 = require(\"../util/quad-tree\");\nvar VALID_CLICK_DELAY = 1e3;\nfunction sortByDepth(a, b) {\n    return b.data.depth - a.data.depth;\n}\nfunction isDefined(val) {\n    return Boolean(val);\n}\nvar MouseEventManager = (function () {\n    function MouseEventManager(canvas, views, controllers, handlesWheelEvents) {\n        var _this = this;\n        this.eventCleanup = [];\n        this._waitingForRender = true;\n        this.getViewsUnderMouse = function (mouse) {\n            var hitViews = _this.quadTree.query(mouse);\n            hitViews.sort(sortByDepth);\n            return hitViews;\n        };\n        this.resize = function () {\n            _this._waitingForRender = true;\n        };\n        this.context = canvas;\n        this.setViews(views);\n        this.setControllers(controllers);\n        this.addContextListeners(handlesWheelEvents);\n    }\n    Object.defineProperty(MouseEventManager.prototype, \"waitingForRender\", {\n        get: function () {\n            return this._waitingForRender;\n        },\n        set: function (val) {\n            this._waitingForRender = val;\n            if (!val) {\n                this.quadTree = new quad_tree_1.QuadTree(0, 0, 0, 0);\n                this.quadTree.addAll(this.views.map(function (v) { return v.bounds; }).filter(isDefined));\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    MouseEventManager.prototype.addContextListeners = function (handlesWheelEvents) {\n        var _this = this;\n        var element = this.context;\n        var startView = null;\n        var startPosition = { x: 0, y: 0 };\n        if (handlesWheelEvents) {\n            var wheelHandler = function (event) {\n                if (!startView)\n                    return;\n                var mouse = mouse_1.eventElementPosition(event, element);\n                var interaction = _this.makeInteraction(mouse, startPosition, startView);\n                var wheel = _this.makeWheel(event);\n                _this.controllers.forEach(function (controller) {\n                    controller.handleWheel(interaction, wheel);\n                });\n                event.stopPropagation();\n                event.preventDefault();\n            };\n            if (\"onwheel\" in element) {\n                element.onwheel = wheelHandler;\n            }\n            if (\"addEventListener\" in element) {\n                element.addEventListener(\"DOMMouseScroll\", wheelHandler);\n                this.eventCleanup.push([\"DOMMouseScroll\", wheelHandler]);\n            }\n        }\n        element.onmouseleave = function (event) {\n            if (_this.waitingForRender)\n                return;\n            if (!startView)\n                return;\n            var mouse = mouse_1.eventElementPosition(event, element);\n            var interaction = _this.makeInteraction(mouse, startPosition, startView);\n            _this.controllers.forEach(function (controller) {\n                controller.handleMouseOut(interaction);\n            });\n        };\n        element.onmousemove = function (event) {\n            if (_this.waitingForRender)\n                return;\n            if (!startView)\n                return;\n            var mouse = mouse_1.eventElementPosition(event, element);\n            var interaction = _this.makeInteraction(mouse, startPosition, startView);\n            _this.controllers.forEach(function (controller) {\n                controller.handleMouseMove(interaction);\n            });\n        };\n        element.onmousedown = function (event) {\n            if (_this.waitingForRender)\n                return;\n            startPosition = mouse_1.eventElementPosition(event, element);\n            var downViews = _this.getViewsUnderMouse(startPosition);\n            var canClick = true;\n            var clickStartTime = Date.now();\n            if (downViews.length <= 0) {\n                return;\n            }\n            startView = downViews[0].data;\n            if (!startView)\n                return;\n            var interaction = _this.makeInteraction(startPosition, startPosition, startView);\n            var currentPosition = startPosition;\n            _this.controllers.forEach(function (controller) {\n                controller.handleMouseDown(interaction, event.button);\n            });\n            event.stopPropagation();\n            document.onmousemove = function (event) {\n                if (!startView)\n                    return;\n                var mouse = mouse_1.eventElementPosition(event, element);\n                var interaction = _this.makeInteraction(mouse, startPosition, startView);\n                var delta = {\n                    x: mouse.x - currentPosition.x,\n                    y: mouse.y - currentPosition.y\n                };\n                var drag = _this.makeDrag(mouse, startPosition, currentPosition, delta);\n                currentPosition = mouse;\n                _this.controllers.forEach(function (controller) {\n                    controller.handleDrag(interaction, drag);\n                });\n                canClick = false;\n            };\n            document.onmouseup = function (_event) {\n                document.onmousemove = null;\n                document.onmouseup = null;\n                document.onmouseover = null;\n            };\n            document.onmouseover = function (event) {\n                if (!startView)\n                    return;\n                var mouse = mouse_1.eventElementPosition(event, element);\n                var interaction = _this.makeInteraction(mouse, startPosition, startView);\n                _this.controllers.forEach(function (controller) {\n                    controller.handleMouseOver(interaction);\n                });\n                event.stopPropagation();\n            };\n            element.onmouseup = function (event) {\n                if (!startView)\n                    return;\n                var mouse = mouse_1.eventElementPosition(event, element);\n                var interaction = _this.makeInteraction(mouse, startPosition, startView);\n                _this.controllers.forEach(function (controller) {\n                    controller.handleMouseUp(interaction, event.button);\n                });\n                if (canClick && Date.now() - clickStartTime < VALID_CLICK_DELAY) {\n                    _this.controllers.forEach(function (controller) {\n                        controller.handleClick(interaction, event.button);\n                    });\n                }\n            };\n            element.onselectstart = function () {\n                return false;\n            };\n        };\n        this.addTouchContextListeners();\n    };\n    MouseEventManager.prototype.addTouchContextListeners = function () {\n        var element = this.context;\n        element.ontouchstart = function (_event) {\n        };\n        element.ontouchend = function (_event) {\n        };\n        element.ontouchmove = function (_event) {\n        };\n        element.ontouchcancel = function (_event) {\n        };\n    };\n    MouseEventManager.prototype.getView = function (viewId) {\n        for (var _i = 0, _a = this.views; _i < _a.length; _i++) {\n            var view = _a[_i];\n            if (view.view.id === viewId) {\n                return view.view;\n            }\n        }\n        return null;\n    };\n    MouseEventManager.prototype.makeDrag = function (mouse, start, previous, delta) {\n        return {\n            screen: {\n                current: mouse,\n                delta: delta,\n                previous: previous,\n                start: start\n            }\n        };\n    };\n    MouseEventManager.prototype.makeInteraction = function (mouse, start, startView) {\n        var hitViews = this.getViewsUnderMouse(mouse);\n        return {\n            screen: {\n                mouse: mouse\n            },\n            start: start &&\n                startView && {\n                mouse: startView.view.screenToView(mouse),\n                view: startView.view\n            },\n            target: {\n                mouse: hitViews[0] && hitViews[0].data.view.screenToView(mouse),\n                view: hitViews[0] && hitViews[0].data.view\n            },\n            viewsUnderMouse: hitViews.map(function (v) { return ({\n                mouse: v.data.view.screenToView(mouse),\n                view: v.data.view\n            }); })\n        };\n    };\n    MouseEventManager.prototype.makeWheel = function (event) {\n        var wheel = mouse_1.normalizeWheel(event);\n        return {\n            wheel: [wheel.x, wheel.y]\n        };\n    };\n    MouseEventManager.prototype.setControllers = function (controllers) {\n        this.controllers = controllers;\n        for (var _i = 0, _a = this.controllers; _i < _a.length; _i++) {\n            var controller = _a[_i];\n            controller.setMouseManager(this);\n        }\n    };\n    MouseEventManager.prototype.setViews = function (views) {\n        this.views = views;\n    };\n    MouseEventManager.prototype.destroy = function () {\n        var _this = this;\n        delete this.quadTree;\n        this.context.onmousedown = null;\n        this.context.onmousemove = null;\n        this.context.onmouseleave = null;\n        this.context.onmousewheel = null;\n        this.eventCleanup.forEach(function (event) {\n            _this.context.removeEventListener(event[0], event[1]);\n        });\n    };\n    return MouseEventManager;\n}());\nexports.MouseEventManager = MouseEventManager;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Three = require(\"three\");\nvar types_1 = require(\"../types\");\nvar util_1 = require(\"../util\");\nvar auto_easing_method_1 = require(\"../util/auto-easing-method\");\nvar abs = Math.abs;\nvar testStartVector = (_a = {},\n    _a[types_1.InstanceAttributeSize.ONE] = [1],\n    _a[types_1.InstanceAttributeSize.TWO] = [1, 2],\n    _a[types_1.InstanceAttributeSize.THREE] = [1, 2, 3],\n    _a[types_1.InstanceAttributeSize.FOUR] = [1, 2, 3, 4],\n    _a);\nvar testEndVector = (_b = {},\n    _b[types_1.InstanceAttributeSize.ONE] = [4],\n    _b[types_1.InstanceAttributeSize.TWO] = [4, 3],\n    _b[types_1.InstanceAttributeSize.THREE] = [4, 3, 2],\n    _b[types_1.InstanceAttributeSize.FOUR] = [4, 3, 2, 1],\n    _b);\nvar emptyTexture = new Three.Texture();\nfunction isAtlasAttribute(attr) {\n    return Boolean(attr) && attr.atlas;\n}\nfunction isEasingAttribute(attr) {\n    return Boolean(attr) && attr.easing && attr.size !== undefined;\n}\nfunction isInstanceAttribute(attr) {\n    return Boolean(attr);\n}\nfunction isVertexAttribute(attr) {\n    return Boolean(attr);\n}\nfunction isUniform(attr) {\n    return Boolean(attr);\n}\nfunction toVertexAttributeInternal(attribute) {\n    return Object.assign({}, attribute, { materialAttribute: null });\n}\nfunction toUniformInternal(uniform) {\n    return Object.assign({}, uniform, { materialUniforms: [] });\n}\nfunction findEmptyBlock(attributes, seekingSize) {\n    var usedBlocks = [];\n    var maxBlock = 0;\n    if (seekingSize === undefined) {\n        seekingSize = 1;\n    }\n    attributes.forEach(function (instanceAttribute) {\n        var block = instanceAttribute.block;\n        var index = instanceAttribute.blockIndex === undefined\n            ? 0\n            : instanceAttribute.blockIndex;\n        var size = instanceAttribute.size === undefined ? 0 : instanceAttribute.size;\n        maxBlock = Math.max(block, maxBlock);\n        while (usedBlocks.length - 1 < block) {\n            usedBlocks.push([false, false, false, false]);\n        }\n        for (var i = index - 1, end = index - 1 + size; i < end; ++i) {\n            usedBlocks[block][i] = true;\n        }\n    });\n    for (var x = 0; x < usedBlocks.length; x++) {\n        for (var ind = 0; ind < 4; ind++) {\n            if (usedBlocks[x][ind]) {\n                continue;\n            }\n            else {\n                for (var breadth = ind; breadth < 4; breadth++) {\n                    if (!usedBlocks[x][breadth]) {\n                        if (breadth - ind + 1 === seekingSize) {\n                            return [x, ind + 1];\n                        }\n                    }\n                }\n            }\n        }\n    }\n    return [maxBlock + 1, types_1.InstanceBlockIndex.ONE];\n}\nfunction sortNeedsUpdateFirstToTop(a, b) {\n    if (a.atlas && !b.atlas)\n        return -1;\n    if (a.easing && !b.easing)\n        return -1;\n    return 1;\n}\nfunction generateAtlasResourceUniforms(layer, instanceAttributes) {\n    var atlasInstanceAttributes = [];\n    var requestedAtlasInjections = new Map();\n    instanceAttributes.forEach(function (attribute) {\n        if (isAtlasAttribute(attribute)) {\n            attribute.size = types_1.InstanceAttributeSize.FOUR;\n            attribute.blockIndex = types_1.InstanceBlockIndex.ONE;\n            var injection = attribute.atlas.shaderInjection || types_1.ShaderInjectionTarget.FRAGMENT;\n            var injections = requestedAtlasInjections.get(attribute.atlas.name);\n            if (injections) {\n                requestedAtlasInjections.set(attribute.atlas.name, [\n                    injections[0] ||\n                        injection === types_1.ShaderInjectionTarget.VERTEX ||\n                        injection === types_1.ShaderInjectionTarget.ALL,\n                    injections[1] ||\n                        injection === types_1.ShaderInjectionTarget.FRAGMENT ||\n                        injection === types_1.ShaderInjectionTarget.ALL\n                ]);\n            }\n            else {\n                atlasInstanceAttributes.push(attribute);\n                requestedAtlasInjections.set(attribute.atlas.name, [\n                    injection === types_1.ShaderInjectionTarget.VERTEX ||\n                        injection === types_1.ShaderInjectionTarget.ALL,\n                    injection === types_1.ShaderInjectionTarget.FRAGMENT ||\n                        injection === types_1.ShaderInjectionTarget.ALL\n                ]);\n            }\n        }\n    });\n    return atlasInstanceAttributes.map(function (instanceAttribute) {\n        var injection = types_1.ShaderInjectionTarget.FRAGMENT;\n        if (instanceAttribute.atlas) {\n            var injections = requestedAtlasInjections.get(instanceAttribute.atlas.name);\n            if (injections) {\n                injection =\n                    (injections[0] && injections[1] && types_1.ShaderInjectionTarget.ALL) ||\n                        (injections[0] && !injections[1] && types_1.ShaderInjectionTarget.VERTEX) ||\n                        (!injections[0] && injections[1] && types_1.ShaderInjectionTarget.FRAGMENT) ||\n                        injection;\n            }\n        }\n        return {\n            name: instanceAttribute.atlas.name,\n            shaderInjection: injection,\n            size: types_1.UniformSize.ATLAS,\n            update: function () {\n                return layer.resource.getAtlasTexture(instanceAttribute.atlas.key) ||\n                    emptyTexture;\n            }\n        };\n    });\n}\nfunction generateEasingAttributes(layer, instanceAttributes) {\n    var easingAttributes = [];\n    for (var _i = 0, instanceAttributes_1 = instanceAttributes; _i < instanceAttributes_1.length; _i++) {\n        var attribute = instanceAttributes_1[_i];\n        if (isEasingAttribute(attribute)) {\n            easingAttributes.push(attribute);\n        }\n    }\n    var _loop_1 = function (attribute) {\n        var _a = attribute.easing, easing = _a.cpu, loop = _a.loop;\n        var name_1 = attribute.name, size = attribute.size, update = attribute.update;\n        var easingUID = util_1.uid();\n        var easingValues;\n        attribute.update = function (o) {\n            var _a = attribute.easing, delay = _a.delay, duration = _a.duration;\n            var end = update(o);\n            var currentTime = layer.surface.frameMetrics.currentTime;\n            easingValues = o.easing.get(easingUID) || {\n                duration: duration,\n                end: end,\n                start: end,\n                startTime: currentTime\n            };\n            var timeValue = 1;\n            switch (loop) {\n                case auto_easing_method_1.AutoEasingLoopStyle.REPEAT:\n                    timeValue = ((currentTime - easingValues.startTime) / duration) % 1;\n                    break;\n                case auto_easing_method_1.AutoEasingLoopStyle.REFLECT:\n                    var timePassed = (currentTime - easingValues.startTime) / duration;\n                    timeValue = abs((timePassed / 2.0) % 1 - 0.5) * 2.0;\n                    break;\n                case auto_easing_method_1.AutoEasingLoopStyle.NONE:\n                default:\n                    timeValue = (currentTime - easingValues.startTime) / duration;\n                    break;\n            }\n            easingValues.start = easing(easingValues.start, easingValues.end, timeValue);\n            easingValues.startTime = currentTime + delay;\n            easingValues.end = end;\n            o.easing.set(easingUID, easingValues);\n            return end;\n        };\n        var slot = findEmptyBlock(instanceAttributes, size);\n        var startAttr = {\n            block: slot[0],\n            blockIndex: slot[1],\n            name: \"_\" + name_1 + \"_start\",\n            size: size,\n            update: function (_o) { return easingValues.start; }\n        };\n        instanceAttributes.push(startAttr);\n        slot = findEmptyBlock(instanceAttributes, types_1.InstanceAttributeSize.ONE);\n        var startTimeAttr = {\n            block: slot[0],\n            blockIndex: slot[1],\n            name: \"_\" + name_1 + \"_start_time\",\n            size: types_1.InstanceAttributeSize.ONE,\n            update: function (_o) { return [easingValues.startTime]; }\n        };\n        instanceAttributes.push(startTimeAttr);\n        slot = findEmptyBlock(instanceAttributes, types_1.InstanceAttributeSize.ONE);\n        var durationAttr = {\n            block: slot[0],\n            blockIndex: slot[1],\n            name: \"_\" + name_1 + \"_duration\",\n            size: types_1.InstanceAttributeSize.ONE,\n            update: function (_o) { return [easingValues.duration]; }\n        };\n        instanceAttributes.push(durationAttr);\n    };\n    for (var _a = 0, easingAttributes_1 = easingAttributes; _a < easingAttributes_1.length; _a++) {\n        var attribute = easingAttributes_1[_a];\n        _loop_1(attribute);\n    }\n}\nfunction generateBaseUniforms(layer) {\n    return [\n        {\n            name: \"projection\",\n            size: types_1.UniformSize.MATRIX4,\n            update: function () { return layer.view.viewCamera.baseCamera.projectionMatrix.elements; }\n        },\n        {\n            name: \"modelView\",\n            size: types_1.UniformSize.MATRIX4,\n            update: function () { return layer.view.viewCamera.baseCamera.matrix.elements; }\n        },\n        {\n            name: \"cameraOffset\",\n            size: types_1.UniformSize.THREE,\n            update: function () { return layer.view.camera.offset; }\n        },\n        {\n            name: \"cameraScale\",\n            size: types_1.UniformSize.THREE,\n            update: function () { return layer.view.camera.scale; }\n        },\n        {\n            name: \"viewSize\",\n            size: types_1.UniformSize.TWO,\n            update: function () { return [layer.view.viewBounds.width, layer.view.viewBounds.height]; }\n        },\n        {\n            name: \"pixelRatio\",\n            size: types_1.UniformSize.ONE,\n            update: function () { return [layer.view.pixelRatio]; }\n        },\n        {\n            name: \"currentTime\",\n            size: types_1.UniformSize.ONE,\n            update: function () { return [layer.surface.frameMetrics.currentTime]; }\n        }\n    ];\n}\nfunction generateBaseInstanceAttributes(instanceAttributes) {\n    var fillBlock = findEmptyBlock(instanceAttributes, types_1.InstanceAttributeSize.ONE);\n    return [\n        {\n            block: fillBlock[0],\n            blockIndex: fillBlock[1],\n            name: \"_active\",\n            size: types_1.InstanceAttributeSize.ONE,\n            update: function (o) { return [o.active ? 1 : 0]; }\n        }\n    ];\n}\nfunction generateBaseVertexAttributes() {\n    return [\n        {\n            name: \"instance\",\n            size: types_1.VertexAttributeSize.ONE,\n            update: function () { return [0]; }\n        }\n    ];\n}\nfunction compareVec(a, b) {\n    if (a.length !== b.length)\n        return false;\n    for (var i = 0, end = a.length; i < end; ++i) {\n        if (Math.round(a[i] * 100) / 100 !== Math.round(b[i] * 100) / 100) {\n            return false;\n        }\n    }\n    return true;\n}\nfunction validateInstanceAttributes(instanceAttributes) {\n    instanceAttributes.forEach(function (attribute) {\n        if (attribute.easing && attribute.atlas) {\n            console.warn(\"An instance attribute can not have both easing and atlas properties. Undefined behavior will occur.\");\n            console.warn(attribute);\n        }\n        if (!attribute.atlas) {\n            if (attribute.size === undefined) {\n                console.warn(\"An instance attribute requires the size to be defined.\");\n                console.warn(attribute);\n            }\n        }\n        if (attribute.easing) {\n            if (attribute.size !== undefined) {\n                var testStart = testStartVector[attribute.size];\n                var testEnd = testEndVector[attribute.size];\n                var test = attribute.easing.cpu(testStart, testEnd, 0);\n                if (!compareVec(test, testStart)) {\n                    console.warn(\"Auto Easing Validation Failed: using a time of 0 does not produce the start value\");\n                    console.warn(\"Start:\", testStart, \"End:\", testEnd, \"Result:\", test);\n                    console.warn(attribute);\n                }\n                test = attribute.easing.cpu(testStart, testEnd, 1);\n                if (!compareVec(test, testEnd)) {\n                    console.warn(\"Auto Easing Validation Failed: using a time of 1 does not produce the end value\");\n                    console.warn(\"Start:\", testStart, \"End:\", testEnd, \"Result:\", test);\n                    console.warn(attribute);\n                }\n                test = attribute.easing.cpu(testStart, testEnd, -1);\n                if (!compareVec(test, testStart)) {\n                    console.warn(\"Auto Easing Validation Failed: using a time of -1 does not produce the start value\");\n                    console.warn(\"Start:\", testStart, \"End:\", testEnd, \"Result:\", test);\n                    console.warn(attribute);\n                }\n                test = attribute.easing.cpu(testStart, testEnd, 2);\n                if (!compareVec(test, testEnd)) {\n                    console.warn(\"Auto Easing Validation Failed: using a time of 2 does not produce the end value\");\n                    console.warn(\"Start:\", testStart, \"End:\", testEnd, \"Result:\", test);\n                    console.warn(attribute);\n                }\n            }\n            else {\n                console.warn(\"An Instance Attribute with easing MUST have a size declared\");\n            }\n        }\n    });\n}\nfunction injectShaderIO(layer, shaderIO) {\n    var instanceAttributes = (shaderIO.instanceAttributes || []).filter(isInstanceAttribute);\n    var vertexAttributes = (shaderIO.vertexAttributes || []).filter(isVertexAttribute);\n    var uniforms = (shaderIO.uniforms || []).filter(isUniform);\n    validateInstanceAttributes(instanceAttributes);\n    generateEasingAttributes(layer, instanceAttributes);\n    var atlasUniforms = generateAtlasResourceUniforms(layer, instanceAttributes);\n    var addedUniforms = atlasUniforms.concat(generateBaseUniforms(layer));\n    var addedInstanceAttributes = generateBaseInstanceAttributes(instanceAttributes);\n    var addedVertexAttributes = generateBaseVertexAttributes();\n    layer.activeAttribute = addedInstanceAttributes[0];\n    var allVertexAttributes = addedVertexAttributes\n        .concat(vertexAttributes || [])\n        .map(toVertexAttributeInternal);\n    var allUniforms = addedUniforms.concat(uniforms).map(toUniformInternal);\n    var allInstanceAttributes = addedInstanceAttributes\n        .concat(instanceAttributes)\n        .sort(sortNeedsUpdateFirstToTop);\n    return {\n        instanceAttributes: allInstanceAttributes,\n        uniforms: allUniforms,\n        vertexAttributes: allVertexAttributes\n    };\n}\nexports.injectShaderIO = injectShaderIO;\nvar _a, _b;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Three = require(\"three\");\nvar types_1 = require(\"../types\");\nvar UNIFORM_SIZE_TO_MATERIAL_TYPE = (_a = {},\n    _a[types_1.UniformSize.ONE] = \"f\",\n    _a[types_1.UniformSize.TWO] = \"v2\",\n    _a[types_1.UniformSize.THREE] = \"v3\",\n    _a[types_1.UniformSize.FOUR] = \"v4\",\n    _a[types_1.UniformSize.MATRIX3] = \"Matrix3fv\",\n    _a[types_1.UniformSize.MATRIX4] = \"Matrix4fv\",\n    _a);\nvar DEFAULT_UNIFORM_VALUE = (_b = {},\n    _b[types_1.UniformSize.ONE] = [0],\n    _b[types_1.UniformSize.TWO] = [0, 0],\n    _b[types_1.UniformSize.THREE] = [0, 0, 0],\n    _b[types_1.UniformSize.FOUR] = [0, 0, 0, 0],\n    _b[types_1.UniformSize.MATRIX3] = [0, 0, 0, 0, 0, 0, 0, 0, 0],\n    _b[types_1.UniformSize.MATRIX4] = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n    _b);\nfunction toMaterialUniform(uniform) {\n    return {\n        type: UNIFORM_SIZE_TO_MATERIAL_TYPE[uniform.size],\n        value: DEFAULT_UNIFORM_VALUE[uniform.size]\n    };\n}\nfunction generateLayerMaterial(layer, vs, fs, layerUniforms, instancingUniforms) {\n    var materialParams = layer.getMaterialOptions();\n    materialParams.vertexShader = vs;\n    materialParams.fragmentShader = fs;\n    materialParams.uniforms = {};\n    for (var i = 0, end = layerUniforms.length; i < end; ++i) {\n        var uniform = layerUniforms[i];\n        var materialUniform = toMaterialUniform(uniform);\n        materialParams.uniforms[uniform.name] = materialUniform;\n    }\n    for (var i = 0, end = instancingUniforms.length; i < end; ++i) {\n        var generatedUniform = instancingUniforms[i];\n        materialParams.uniforms[generatedUniform.name] = {\n            type: generatedUniform.type,\n            value: generatedUniform.value\n        };\n    }\n    return new Three.RawShaderMaterial(materialParams);\n}\nexports.generateLayerMaterial = generateLayerMaterial;\nvar _a, _b;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Three = require(\"three\");\nfunction isNumberCluster(val) {\n    return !Array.isArray(val[0]);\n}\nfunction generateLayerGeometry(maxInstancesPerBuffer, vertexAttributes, vertexCount) {\n    var vertexBuffers = [];\n    for (var i = 0, end = vertexAttributes.length; i < end; ++i) {\n        var attribute_1 = vertexAttributes[i];\n        vertexBuffers.push(new Float32Array(attribute_1.size * vertexCount * maxInstancesPerBuffer));\n    }\n    var endk = vertexAttributes.length;\n    var buffer;\n    var attribute;\n    var value;\n    var formatError = false;\n    for (var i = 0, end = vertexCount; i < end; ++i) {\n        for (var k = 0; k < endk; ++k) {\n            attribute = vertexAttributes[k];\n            buffer = vertexBuffers[k];\n            value = attribute.update(i);\n            if (isNumberCluster(value)) {\n                for (var j = i * attribute.size, endj = j + attribute.size, index = 0; j < endj; ++j, ++index) {\n                    buffer[j] = value[index];\n                }\n            }\n            else {\n                formatError = true;\n            }\n        }\n    }\n    if (formatError) {\n        console.warn(\"A vertex buffer updating method should not use arrays of arrays of numbers.\");\n    }\n    for (var i = 0, end = vertexAttributes.length; i < end; ++i) {\n        var attribute_2 = vertexAttributes[i];\n        var instanceSize = attribute_2.size * vertexCount;\n        for (var k = 1, endk_1 = maxInstancesPerBuffer; k < endk_1; ++k) {\n            vertexBuffers[i].copyWithin(instanceSize * k, 0, instanceSize);\n        }\n    }\n    var instancingBuffer = vertexBuffers[0];\n    for (var i = 0, end = maxInstancesPerBuffer; i < end; ++i) {\n        var instanceStartIndex = i * vertexCount;\n        for (var k = 0; k < vertexCount; ++k) {\n            instancingBuffer[k + instanceStartIndex] = i;\n        }\n    }\n    var geometry = new Three.BufferGeometry();\n    for (var i = 0, end = vertexAttributes.length; i < end; ++i) {\n        var attribute_3 = vertexAttributes[i];\n        var materialAttribute = new Three.BufferAttribute(vertexBuffers[i], attribute_3.size);\n        attribute_3.materialAttribute = materialAttribute;\n        geometry.addAttribute(attribute_3.name, materialAttribute);\n    }\n    return geometry;\n}\nexports.generateLayerGeometry = generateLayerGeometry;\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar bounds_1 = require(\"../primitives/bounds\");\nvar DataBounds = (function (_super) {\n    __extends(DataBounds, _super);\n    function DataBounds() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    DataBounds.emptyBounds = function () {\n        return new DataBounds({\n            height: 0,\n            width: 0,\n            x: 0,\n            y: 0\n        });\n    };\n    return DataBounds;\n}(bounds_1.Bounds));\nexports.DataBounds = DataBounds;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Three = require(\"three\");\nvar chart_camera_1 = require(\"../util/chart-camera\");\nvar view_camera_1 = require(\"../util/view-camera\");\nvar scene_1 = require(\"./scene\");\nvar view_1 = require(\"./view\");\nfunction generateDefaultScene(context) {\n    var height = context.canvas.height;\n    var width = context.canvas.width;\n    var aspectRatio = width / height;\n    var viewport = {\n        aspectRatio: aspectRatio,\n        bottom: -height / 2,\n        far: 10000000,\n        left: -width / 2,\n        near: -100,\n        right: width / 2,\n        top: height / 2,\n        viewSize: height\n    };\n    var defaultCamera = new view_camera_1.ViewCamera();\n    defaultCamera.baseCamera = new Three.OrthographicCamera(viewport.left, viewport.right, viewport.top, viewport.bottom, viewport.near, viewport.far);\n    defaultCamera.baseCamera.scale.set(1.0, -1.0, 1.0);\n    defaultCamera.baseCamera.position.set(0.0, 0.0, -300.0);\n    defaultCamera.baseCamera.updateMatrixWorld(true);\n    defaultCamera.baseCamera.updateMatrix();\n    if (defaultCamera.baseCamera instanceof Three.OrthographicCamera) {\n        defaultCamera.baseCamera.updateProjectionMatrix();\n    }\n    var defaultChartCamera = new chart_camera_1.ChartCamera();\n    var defaultViewport = {\n        bottom: 0,\n        left: 0,\n        right: 0,\n        top: 0\n    };\n    var defaultView = new view_1.View({\n        camera: defaultChartCamera,\n        key: view_1.View.DEFAULT_VIEW_ID,\n        viewCamera: defaultCamera,\n        viewport: defaultViewport\n    });\n    var defaultScene = new scene_1.Scene({\n        key: scene_1.Scene.DEFAULT_SCENE_ID,\n        views: []\n    });\n    defaultScene.addView(defaultView);\n    return {\n        camera: defaultChartCamera,\n        scene: defaultScene,\n        view: defaultView,\n        viewCamera: defaultCamera,\n        viewport: defaultViewport\n    };\n}\nexports.generateDefaultScene = generateDefaultScene;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar INSTANCE_UNIFORM_ATTRIBUTE_PREFIX = \"u\";\nfunction makeInstanceUniformNameArray() {\n    return \"instanceData\";\n}\nexports.makeInstanceUniformNameArray = makeInstanceUniformNameArray;\nfunction makeInstanceUniformNameTree(index) {\n    return \"\" + INSTANCE_UNIFORM_ATTRIBUTE_PREFIX + index.toString(31);\n}\nexports.makeInstanceUniformNameTree = makeInstanceUniformNameTree;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.templateVars = {\n    attributeFragments: \"attributeFragments\",\n    attributes: \"attributes\",\n    blocksPerInstance: \"blocksPerInstance\",\n    easingMethod: \"easingMethod\",\n    easingMethods: \"easingMethods\",\n    instanceBlockCount: \"instanceBlockCount\",\n    instanceDataBinaryTree: \"instanceDataBinaryTree\",\n    instanceDataRetrieval: \"instanceDataRetrieval\",\n    instanceDestructuring: \"instanceDestructuring\",\n    instanceFragments: \"instanceFragments\",\n    instanceUniformDeclarations: \"instanceUniformDeclarations\",\n    layerUniforms: \"layerUniforms\",\n    projectionMethods: \"projectionMethods\",\n    shader: \"shader\",\n    shaderInput: \"shaderInput\",\n    vertexAttributes: \"vertexAttributes\"\n};\n","\"use strict\";\nfunction __export(m) {\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n}\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__export(require(\"./label-layer\"));\n__export(require(\"./label-instance\"));\n","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = y[op[0] & 2 ? \"return\" : op[0] ? \"throw\" : \"next\"]) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [0, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar canvas;\nvar MAX_FONT_SIZE = 50;\nvar floor = Math.floor, max = Math.max, min = Math.min;\nvar LabelRasterizer = (function () {\n    function LabelRasterizer() {\n    }\n    LabelRasterizer.awaitContext = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        if (!!canvas) return [3, 2];\n                        this.getContext();\n                        return [4, new Promise(function (resolve) { return setTimeout(resolve, 10); })];\n                    case 1:\n                        _a.sent();\n                        return [3, 0];\n                    case 2: return [2];\n                }\n            });\n        });\n    };\n    LabelRasterizer.calculateLabelSize = function (resource, sampleScale, calculateTexture) {\n        if (calculateTexture) {\n            this.calculateTrucatedText(resource);\n        }\n        var label = resource.label;\n        var sampleScaling = sampleScale || resource.sampleScale || 1.0;\n        this.drawLabel(label, resource.truncatedText, canvas, sampleScaling);\n        var _a = this.measureContents(canvas), minX = _a.minX, minY = _a.minY, maxX = _a.maxX, maxY = _a.maxY;\n        resource.rasterization = resource.rasterization || {\n            texture: { height: 0, width: 0 },\n            world: { height: 0, width: 0 }\n        };\n        if (!calculateTexture) {\n            resource.rasterization.world = {\n                height: maxY - minY,\n                width: maxX - minX\n            };\n        }\n        else {\n            resource.rasterization.texture = {\n                height: maxY - minY,\n                width: maxX - minX\n            };\n            resource.rasterization.canvas = this.createCroppedCanvas(resource, minY, minX);\n            this.calculateLabelSize(resource, 1.0, false);\n        }\n    };\n    LabelRasterizer.calculateTrucatedText = function (resource) {\n        var label = resource.label;\n        var maxWidth = label.maxWidth;\n        if (!maxWidth) {\n            resource.truncatedText = label.text;\n            return;\n        }\n        this.drawLabel(label, label.text, canvas, 1);\n        var firstTest = this.measureContents(canvas);\n        if (firstTest.maxX - firstTest.minX <= maxWidth) {\n            resource.truncatedText = label.text;\n            return;\n        }\n        var text = label.text;\n        var left = 0;\n        var right = text.length;\n        var cursor = floor((right - left) / 2.0);\n        var safety = 0;\n        var safetyMax = 50;\n        while (right > left && cursor !== 0 && safety++ < safetyMax) {\n            this.drawLabel(label, text.substr(0, cursor) + \"...\", canvas, 1);\n            var _a = this.measureContents(canvas), minX = _a.minX, maxX = _a.maxX;\n            if (maxX - minX <= maxWidth) {\n                left = cursor;\n            }\n            else {\n                right = cursor;\n            }\n            var nextCursor = floor((right - left) / 2.0) + left;\n            if (nextCursor === cursor) {\n                break;\n            }\n            cursor = nextCursor;\n        }\n        if (cursor === 0) {\n            resource.truncatedText = \"...\";\n        }\n        else {\n            resource.truncatedText = text.substr(0, cursor) + \"...\";\n        }\n    };\n    LabelRasterizer.createCroppedCanvas = function (resource, top, left) {\n        var cropped = document.createElement(\"canvas\");\n        var context = cropped.getContext(\"2d\");\n        if (context) {\n            var texture = resource.rasterization.texture;\n            cropped.width = texture.width;\n            cropped.height = texture.height;\n            context.imageSmoothingEnabled = false;\n            context.drawImage(canvas.canvas, left, top, texture.width, texture.height, 0, 0, texture.width, texture.height);\n        }\n        else {\n            console.warn(\"Could not create a canvas 2d context to generate a label's cropped image.\");\n        }\n        return cropped;\n    };\n    LabelRasterizer.drawLabel = function (label, text, canvas, sampleScaling) {\n        var fontSize = this.getLabelRasterizationFontSize(label, sampleScaling);\n        canvas.fillStyle = \"white\";\n        canvas.font = this.makeCSSFont(label, sampleScaling);\n        canvas.canvas.width = canvas.measureText(label.text).width + fontSize;\n        canvas.canvas.height = fontSize * 2.0;\n        canvas.fillStyle = \"white\";\n        canvas.font = this.makeCSSFont(label, sampleScaling);\n        canvas.fillText(text, fontSize / 2.0, fontSize / 4.0 + fontSize);\n    };\n    LabelRasterizer.getContext = function () {\n        if (!canvas) {\n            var potentialCanvas = document.createElement(\"canvas\").getContext(\"2d\");\n            if (potentialCanvas) {\n                canvas = potentialCanvas;\n            }\n            return potentialCanvas;\n        }\n        return canvas;\n    };\n    LabelRasterizer.getLabelRasterizationFontSize = function (label, sampleScale) {\n        return label.fontSize * sampleScale;\n    };\n    LabelRasterizer.makeCSSFont = function (label, sampleScale) {\n        return label.fontWeight + \" \" + this.getLabelRasterizationFontSize(label, sampleScale) + \"px \" + label.fontFamily;\n    };\n    LabelRasterizer.measureContents = function (canvas) {\n        var _a = canvas.canvas, width = _a.width, height = _a.height;\n        var imageData = canvas.getImageData(0, 0, width, height).data;\n        var r;\n        var minY = Number.MAX_SAFE_INTEGER;\n        var minX = Number.MAX_SAFE_INTEGER;\n        var maxX = Number.MIN_SAFE_INTEGER;\n        var maxY = Number.MIN_SAFE_INTEGER;\n        for (var i = 0; i < width; ++i) {\n            for (var k = 0; k < height; ++k) {\n                var redIndex = k * (width * 4) + i * 4;\n                r = imageData[redIndex];\n                if (r > 0.0) {\n                    minY = min(minY, k);\n                    minX = min(minX, i);\n                    maxX = max(maxX, i);\n                    maxY = max(maxY, k);\n                }\n            }\n        }\n        minY -= 1;\n        maxY += 2;\n        maxX += 2;\n        minX -= 1;\n        minY = max(minY, 0);\n        minX = max(minX, 0);\n        return { minX: minX, minY: minY, maxX: maxX, maxY: maxY };\n    };\n    LabelRasterizer.render = function (resource) {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4, this.awaitContext()];\n                    case 1:\n                        _a.sent();\n                        if (resource.label.fontSize > MAX_FONT_SIZE) {\n                            console.warn(\"Labels only support font sizes up to 50\");\n                            return [2, resource];\n                        }\n                        this.calculateLabelSize(resource, resource.sampleScale, true);\n                        return [2, resource];\n                }\n            });\n        });\n    };\n    LabelRasterizer.renderSync = function (resource) {\n        this.getContext();\n        if (!canvas) {\n            console.warn(\"Can not render a label synchronously without the canvas context being ready.\");\n            return resource;\n        }\n        if (resource.label.fontSize > MAX_FONT_SIZE) {\n            console.warn(\"Labels only support font sizes up to 50\");\n            return resource;\n        }\n        this.calculateLabelSize(resource, resource.sampleScale, true);\n        return resource;\n    };\n    return LabelRasterizer;\n}());\nexports.LabelRasterizer = LabelRasterizer;\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar base_atlas_resource_1 = require(\"./base-atlas-resource\");\nvar ImageAtlasResource = (function (_super) {\n    __extends(ImageAtlasResource, _super);\n    function ImageAtlasResource(image) {\n        var _this = _super.call(this) || this;\n        _this.image = image;\n        return _this;\n    }\n    return ImageAtlasResource;\n}(base_atlas_resource_1.BaseAtlasResource));\nexports.ImageAtlasResource = ImageAtlasResource;\n","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = y[op[0] & 2 ? \"return\" : op[0] ? \"throw\" : \"next\"]) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [0, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar COLOR_RASTERIZATION_SIZE = 2;\nvar ColorRasterizer = (function () {\n    function ColorRasterizer() {\n    }\n    ColorRasterizer.awaitContext = function (canvas) {\n        return __awaiter(this, void 0, void 0, function () {\n            var c, limit;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        c = canvas.getContext(\"2d\"), limit = 0;\n                        _a.label = 1;\n                    case 1:\n                        if (!(!Boolean(c) && limit < 100)) return [3, 4];\n                        return [4, new Promise(function (resolve) { return setTimeout(resolve, 10); })];\n                    case 2:\n                        _a.sent();\n                        _a.label = 3;\n                    case 3:\n                        c = canvas.getContext(\"2d\"), ++limit;\n                        return [3, 1];\n                    case 4: return [2];\n                }\n            });\n        });\n    };\n    ColorRasterizer.makeCSS = function (color) {\n        return \"rgba(\" + Math.floor(color.r * 256) + \", \" + Math.floor(color.g * 256) + \", \" + Math.floor(color.b * 256) + \", \" + color.opacity + \")\";\n    };\n    ColorRasterizer.render = function (resource) {\n        return __awaiter(this, void 0, void 0, function () {\n            var canvas, context;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        canvas = document.createElement(\"canvas\");\n                        context = canvas.getContext(\"2d\");\n                        return [4, this.awaitContext(canvas)];\n                    case 1:\n                        _a.sent();\n                        if (context) {\n                            canvas.width = COLOR_RASTERIZATION_SIZE;\n                            canvas.height = COLOR_RASTERIZATION_SIZE;\n                            context.imageSmoothingEnabled = false;\n                            context.fillStyle = this.makeCSS(resource.color);\n                            context.fillRect(0, 0, COLOR_RASTERIZATION_SIZE, COLOR_RASTERIZATION_SIZE);\n                            resource.rasterization.canvas = canvas;\n                        }\n                        else {\n                            console.warn(\"Could not create a canvas 2d context to generate a color for rasterization.\");\n                        }\n                        return [2, resource];\n                }\n            });\n        });\n    };\n    return ColorRasterizer;\n}());\nexports.ColorRasterizer = ColorRasterizer;\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar base_atlas_resource_1 = require(\"./base-atlas-resource\");\nvar ColorAtlasResource = (function (_super) {\n    __extends(ColorAtlasResource, _super);\n    function ColorAtlasResource(color) {\n        var _this = _super.call(this) || this;\n        _this.color = color;\n        return _this;\n    }\n    return ColorAtlasResource;\n}(base_atlas_resource_1.BaseAtlasResource));\nexports.ColorAtlasResource = ColorAtlasResource;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar SubTexture = (function () {\n    function SubTexture() {\n        this.aspectRatio = 1.0;\n        this.atlasReferenceID = \"\";\n        this.atlasTexture = null;\n        this.atlasTL = { x: 0, y: 0 };\n        this.atlasTR = { x: 0, y: 0 };\n        this.atlasBL = { x: 0, y: 0 };\n        this.atlasBR = { x: 0, y: 0 };\n        this.widthOnAtlas = 0;\n        this.heightOnAtlas = 0;\n        this.isValid = false;\n        this.pixelWidth = 0;\n        this.pixelHeight = 0;\n    }\n    return SubTexture;\n}());\nexports.SubTexture = SubTexture;\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Three = require(\"three\");\nvar identify_by_key_1 = require(\"../../util/identify-by-key\");\nvar pack_node_1 = require(\"./pack-node\");\nvar sub_texture_1 = require(\"./sub-texture\");\nvar AtlasSize;\n(function (AtlasSize) {\n    AtlasSize[AtlasSize[\"_2\"] = 2] = \"_2\";\n    AtlasSize[AtlasSize[\"_4\"] = 4] = \"_4\";\n    AtlasSize[AtlasSize[\"_8\"] = 8] = \"_8\";\n    AtlasSize[AtlasSize[\"_16\"] = 16] = \"_16\";\n    AtlasSize[AtlasSize[\"_32\"] = 32] = \"_32\";\n    AtlasSize[AtlasSize[\"_64\"] = 64] = \"_64\";\n    AtlasSize[AtlasSize[\"_128\"] = 128] = \"_128\";\n    AtlasSize[AtlasSize[\"_256\"] = 256] = \"_256\";\n    AtlasSize[AtlasSize[\"_512\"] = 512] = \"_512\";\n    AtlasSize[AtlasSize[\"_1024\"] = 1024] = \"_1024\";\n    AtlasSize[AtlasSize[\"_2048\"] = 2048] = \"_2048\";\n    AtlasSize[AtlasSize[\"_4096\"] = 4096] = \"_4096\";\n})(AtlasSize = exports.AtlasSize || (exports.AtlasSize = {}));\nvar Atlas = (function (_super) {\n    __extends(Atlas, _super);\n    function Atlas(options) {\n        var _this = _super.call(this, options) || this;\n        _this.validResources = new Map();\n        var canvas = document.createElement(\"canvas\");\n        _this.width = canvas.width = options.width;\n        _this.height = canvas.height = options.height;\n        _this.textureSettings = options.textureSettings;\n        _this.packing = new pack_node_1.PackNode(0, 0, options.width, options.height);\n        _this.updateTexture(canvas);\n        return _this;\n    }\n    Atlas.prototype.invalidateResource = function (resource) {\n        var zero = { x: 0, y: 0 };\n        resource.texture.aspectRatio = 1;\n        resource.texture.atlasBL = zero;\n        resource.texture.atlasBR = zero;\n        resource.texture.atlasTL = zero;\n        resource.texture.atlasTR = zero;\n        resource.texture.atlasReferenceID = \"\";\n        resource.texture.pixelWidth = 0;\n        resource.texture.pixelHeight = 0;\n        resource.texture.isValid = false;\n    };\n    Atlas.prototype.setManager = function (manager) {\n        this.manager = manager;\n    };\n    Atlas.prototype.registerResource = function (resource) {\n        if (this.validResources.get(resource) === undefined) {\n            if (!resource.texture || !resource.texture.isValid) {\n                if (!resource.texture) {\n                    resource.texture = new sub_texture_1.SubTexture();\n                }\n                resource.texture.isValid = true;\n                this.validResources.set(resource, true);\n                return true;\n            }\n            else {\n                console.warn(\"Atlas Error:\", this.id, \"Attempted to add a resource to an Atlas that is already a valid resource on another atlas.\", \"Consider Creating a new resource to be loaded into this particular atlas.\", \"Resource:\", resource);\n            }\n        }\n        else {\n            console.warn(\"Atlas Error:\", this.id, \"A resource was trying to be added to the atlas that has already been added before.\", \"Consider creating a new resource to indicate what you want loaded to the atlas\", \"Resource:\", resource);\n        }\n        return false;\n    };\n    Atlas.prototype.removeResource = function (resource) {\n        if (this.validResources.get(resource)) {\n            this.validResources.set(resource, false);\n            this.invalidateResource(resource);\n        }\n        else {\n            console.warn(\"Atlas Error:\", this.id, \"Attempted to remove a resource that does not exist on this atlas.\", \"or the resource was already considered invalidated on this atlas.\", \"Resource:\", resource);\n        }\n    };\n    Atlas.prototype.updateTexture = function (canvas) {\n        if (this.texture) {\n            var redoneCanvas = this.texture.image;\n            this.texture.dispose();\n            this.texture = new Three.Texture(redoneCanvas);\n        }\n        else {\n            this.texture = new Three.Texture(canvas);\n        }\n        this.texture.generateMipmaps = true;\n        this.texture.premultiplyAlpha = true;\n        this.textureSettings && Object.assign(this.texture, this.textureSettings);\n        this.texture.needsUpdate = true;\n    };\n    Atlas.prototype.destroy = function () {\n        var _this = this;\n        this.texture.dispose();\n        this.validResources.forEach(function (_isValid, resource) {\n            _this.invalidateResource(resource);\n        });\n    };\n    return Atlas;\n}(identify_by_key_1.IdentifyByKey));\nexports.Atlas = Atlas;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction getProgramInfo(gl, program) {\n    var result = {\n        attributeCount: 0,\n        attributes: new Array(),\n        uniformCount: 0,\n        uniforms: new Array()\n    }, activeUniforms = gl.getProgramParameter(program, gl.ACTIVE_UNIFORMS), activeAttributes = gl.getProgramParameter(program, gl.ACTIVE_ATTRIBUTES);\n    var enums = {\n        0x8b50: \"FLOAT_VEC2\",\n        0x8b51: \"FLOAT_VEC3\",\n        0x8b52: \"FLOAT_VEC4\",\n        0x8b53: \"INT_VEC2\",\n        0x8b54: \"INT_VEC3\",\n        0x8b55: \"INT_VEC4\",\n        0x8b56: \"BOOL\",\n        0x8b57: \"BOOL_VEC2\",\n        0x8b58: \"BOOL_VEC3\",\n        0x8b59: \"BOOL_VEC4\",\n        0x8b5a: \"FLOAT_MAT2\",\n        0x8b5b: \"FLOAT_MAT3\",\n        0x8b5c: \"FLOAT_MAT4\",\n        0x8b5e: \"SAMPLER_2D\",\n        0x8b60: \"SAMPLER_CUBE\",\n        0x1400: \"BYTE\",\n        0x1401: \"UNSIGNED_BYTE\",\n        0x1402: \"SHORT\",\n        0x1403: \"UNSIGNED_SHORT\",\n        0x1404: \"INT\",\n        0x1405: \"UNSIGNED_INT\",\n        0x1406: \"FLOAT\"\n    };\n    var blocks = {\n        0x8b50: 1,\n        0x8b51: 1,\n        0x8b52: 1,\n        0x8b53: 1,\n        0x8b54: 1,\n        0x8b55: 1,\n        0x8b56: 1,\n        0x8b57: 1,\n        0x8b58: 1,\n        0x8b59: 1,\n        0x8b5a: 1,\n        0x8b5b: 3,\n        0x8b5c: 4,\n        0x8b5e: 1,\n        0x8b60: 1,\n        0x1400: 1,\n        0x1401: 1,\n        0x1402: 1,\n        0x1403: 1,\n        0x1404: 1,\n        0x1405: 1,\n        0x1406: 1\n    };\n    for (var i = 0; i < activeUniforms; ++i) {\n        var uniform = gl.getActiveUniform(program, i);\n        uniform.typeName = enums[uniform.type];\n        result.uniforms.push(uniform);\n        result.uniformCount += uniform.size;\n        uniform.size = uniform.size * blocks[uniform.type];\n    }\n    for (var i = 0; i < activeAttributes; i++) {\n        var attribute = gl.getActiveAttrib(program, i);\n        attribute.typeName = enums[attribute.type];\n        result.attributes.push(attribute);\n        result.attributeCount += attribute.size;\n    }\n    return result;\n}\nexports.getProgramInfo = getProgramInfo;\nvar WebGLStat = (function () {\n    function WebGLStat() {\n    }\n    WebGLStat.MAX_VERTEX_UNIFORMS = 0;\n    WebGLStat.MAX_FRAGMENT_UNIFORMS = 0;\n    WebGLStat.MAX_ATTRIBUTES = 0;\n    WebGLStat.WEBGL_SUPPORTED = false;\n    WebGLStat.MAX_TEXTURE_SIZE = 0;\n    return WebGLStat;\n}());\nexports.WebGLStat = WebGLStat;\nfunction initStats() {\n    function getAContext() {\n        try {\n            var canvas = document.createElement(\"canvas\");\n            return (window.WebGLRenderingContext &&\n                (canvas.getContext(\"webgl\") || canvas.getContext(\"experimental-webgl\")));\n        }\n        catch (e) {\n            return false;\n        }\n    }\n    var gl = getAContext();\n    if (gl) {\n        WebGLStat.WEBGL_SUPPORTED = true;\n        WebGLStat.MAX_VERTEX_UNIFORMS = gl.getParameter(gl.MAX_VERTEX_UNIFORM_VECTORS);\n        WebGLStat.MAX_FRAGMENT_UNIFORMS = gl.getParameter(gl.MAX_FRAGMENT_UNIFORM_VECTORS);\n        WebGLStat.MAX_ATTRIBUTES = gl.getParameter(gl.MAX_VERTEX_ATTRIBS);\n        WebGLStat.MAX_TEXTURE_SIZE = gl.getParameter(gl.MAX_TEXTURE_SIZE);\n    }\n}\ninitStats();\n","/**\n * This is the web browser implementation of `debug()`.\n *\n * Expose `debug()` as the module.\n */\n\nexports = module.exports = require('./debug');\nexports.log = log;\nexports.formatArgs = formatArgs;\nexports.save = save;\nexports.load = load;\nexports.useColors = useColors;\nexports.storage = 'undefined' != typeof chrome\n               && 'undefined' != typeof chrome.storage\n                  ? chrome.storage.local\n                  : localstorage();\n\n/**\n * Colors.\n */\n\nexports.colors = [\n  '#0000CC', '#0000FF', '#0033CC', '#0033FF', '#0066CC', '#0066FF', '#0099CC',\n  '#0099FF', '#00CC00', '#00CC33', '#00CC66', '#00CC99', '#00CCCC', '#00CCFF',\n  '#3300CC', '#3300FF', '#3333CC', '#3333FF', '#3366CC', '#3366FF', '#3399CC',\n  '#3399FF', '#33CC00', '#33CC33', '#33CC66', '#33CC99', '#33CCCC', '#33CCFF',\n  '#6600CC', '#6600FF', '#6633CC', '#6633FF', '#66CC00', '#66CC33', '#9900CC',\n  '#9900FF', '#9933CC', '#9933FF', '#99CC00', '#99CC33', '#CC0000', '#CC0033',\n  '#CC0066', '#CC0099', '#CC00CC', '#CC00FF', '#CC3300', '#CC3333', '#CC3366',\n  '#CC3399', '#CC33CC', '#CC33FF', '#CC6600', '#CC6633', '#CC9900', '#CC9933',\n  '#CCCC00', '#CCCC33', '#FF0000', '#FF0033', '#FF0066', '#FF0099', '#FF00CC',\n  '#FF00FF', '#FF3300', '#FF3333', '#FF3366', '#FF3399', '#FF33CC', '#FF33FF',\n  '#FF6600', '#FF6633', '#FF9900', '#FF9933', '#FFCC00', '#FFCC33'\n];\n\n/**\n * Currently only WebKit-based Web Inspectors, Firefox >= v31,\n * and the Firebug extension (any Firefox version) are known\n * to support \"%c\" CSS customizations.\n *\n * TODO: add a `localStorage` variable to explicitly enable/disable colors\n */\n\nfunction useColors() {\n  // NB: In an Electron preload script, document will be defined but not fully\n  // initialized. Since we know we're in Chrome, we'll just detect this case\n  // explicitly\n  if (typeof window !== 'undefined' && window.process && window.process.type === 'renderer') {\n    return true;\n  }\n\n  // Internet Explorer and Edge do not support colors.\n  if (typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/(edge|trident)\\/(\\d+)/)) {\n    return false;\n  }\n\n  // is webkit? http://stackoverflow.com/a/16459606/376773\n  // document is undefined in react-native: https://github.com/facebook/react-native/pull/1632\n  return (typeof document !== 'undefined' && document.documentElement && document.documentElement.style && document.documentElement.style.WebkitAppearance) ||\n    // is firebug? http://stackoverflow.com/a/398120/376773\n    (typeof window !== 'undefined' && window.console && (window.console.firebug || (window.console.exception && window.console.table))) ||\n    // is firefox >= v31?\n    // https://developer.mozilla.org/en-US/docs/Tools/Web_Console#Styling_messages\n    (typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/firefox\\/(\\d+)/) && parseInt(RegExp.$1, 10) >= 31) ||\n    // double check webkit in userAgent just in case we are in a worker\n    (typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/applewebkit\\/(\\d+)/));\n}\n\n/**\n * Map %j to `JSON.stringify()`, since no Web Inspectors do that by default.\n */\n\nexports.formatters.j = function(v) {\n  try {\n    return JSON.stringify(v);\n  } catch (err) {\n    return '[UnexpectedJSONParseError]: ' + err.message;\n  }\n};\n\n\n/**\n * Colorize log arguments if enabled.\n *\n * @api public\n */\n\nfunction formatArgs(args) {\n  var useColors = this.useColors;\n\n  args[0] = (useColors ? '%c' : '')\n    + this.namespace\n    + (useColors ? ' %c' : ' ')\n    + args[0]\n    + (useColors ? '%c ' : ' ')\n    + '+' + exports.humanize(this.diff);\n\n  if (!useColors) return;\n\n  var c = 'color: ' + this.color;\n  args.splice(1, 0, c, 'color: inherit')\n\n  // the final \"%c\" is somewhat tricky, because there could be other\n  // arguments passed either before or after the %c, so we need to\n  // figure out the correct index to insert the CSS into\n  var index = 0;\n  var lastC = 0;\n  args[0].replace(/%[a-zA-Z%]/g, function(match) {\n    if ('%%' === match) return;\n    index++;\n    if ('%c' === match) {\n      // we only are interested in the *last* %c\n      // (the user may have provided their own)\n      lastC = index;\n    }\n  });\n\n  args.splice(lastC, 0, c);\n}\n\n/**\n * Invokes `console.log()` when available.\n * No-op when `console.log` is not a \"function\".\n *\n * @api public\n */\n\nfunction log() {\n  // this hackery is required for IE8/9, where\n  // the `console.log` function doesn't have 'apply'\n  return 'object' === typeof console\n    && console.log\n    && Function.prototype.apply.call(console.log, console, arguments);\n}\n\n/**\n * Save `namespaces`.\n *\n * @param {String} namespaces\n * @api private\n */\n\nfunction save(namespaces) {\n  try {\n    if (null == namespaces) {\n      exports.storage.removeItem('debug');\n    } else {\n      exports.storage.debug = namespaces;\n    }\n  } catch(e) {}\n}\n\n/**\n * Load `namespaces`.\n *\n * @return {String} returns the previously persisted debug modes\n * @api private\n */\n\nfunction load() {\n  var r;\n  try {\n    r = exports.storage.debug;\n  } catch(e) {}\n\n  // If debug isn't set in LS, and we're in Electron, try to load $DEBUG\n  if (!r && typeof process !== 'undefined' && 'env' in process) {\n    r = process.env.DEBUG;\n  }\n\n  return r;\n}\n\n/**\n * Enable namespaces listed in `localStorage.debug` initially.\n */\n\nexports.enable(load());\n\n/**\n * Localstorage attempts to return the localstorage.\n *\n * This is necessary because safari throws\n * when a user disables cookies/localstorage\n * and you attempt to access it.\n *\n * @return {LocalStorage}\n * @api private\n */\n\nfunction localstorage() {\n  try {\n    return window.localStorage;\n  } catch (e) {}\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar browser = require(\"bowser\");\nvar three_1 = require(\"three\");\nvar debug = require(\"debug\")(\"CommunicationsView:Mouse\");\nvar IE_ADJUSTMENT = 1 / 30;\nvar OLD_IE_ADJUSTMENT = -0.25;\nvar MAX_FIREFOX_WHEELDELTA = 100;\nvar lowPassY = [0, 0, 0, 0];\nvar LOW_PASS_U0 = 0.02;\nvar LOW_PASS_U1 = 0.1;\nvar LOW_PASS_U2 = 0.18;\nvar LOW_PASS_U3 = 0.7;\nfunction normalizeFirefoxWheel(e) {\n    var wheel = e;\n    var deltaX = 0;\n    var deltaY = 0;\n    if (Math.sign(lowPassY[0]) !== Math.sign(deltaY)) {\n        lowPassY.splice(0, lowPassY.length, 0, 0, 0, 0);\n    }\n    deltaX = wheel.deltaX * MAX_FIREFOX_WHEELDELTA;\n    deltaY =\n        wheel.deltaY * MAX_FIREFOX_WHEELDELTA * LOW_PASS_U0 +\n            lowPassY[0] * LOW_PASS_U1 +\n            lowPassY[1] * LOW_PASS_U2 +\n            lowPassY[2] * LOW_PASS_U3;\n    lowPassY.unshift(deltaY);\n    lowPassY.pop();\n    return new three_1.Vector2(-deltaX, -deltaY);\n}\nfunction normalizeChromeWheel(e) {\n    var wheel = e;\n    return new three_1.Vector2(wheel.deltaX, -wheel.deltaY);\n}\nfunction normalizeIE11Wheel(e) {\n    var wheel = e;\n    var deltaX = wheel.deltaX;\n    if (deltaX === undefined) {\n        deltaX =\n            wheel.wheelDeltaX !== undefined ? wheel.wheelDeltaX * IE_ADJUSTMENT : 0;\n    }\n    var deltaY = wheel.deltaY;\n    if (deltaY === undefined) {\n        if (wheel.wheelDeltaY !== undefined) {\n            deltaY = wheel.wheelDeltaY * IE_ADJUSTMENT;\n        }\n        else {\n            deltaY = (wheel.wheelDelta || -wheel.detail) * OLD_IE_ADJUSTMENT;\n        }\n    }\n    return new three_1.Vector2(-deltaX, -deltaY);\n}\nfunction normalizeIE12Wheel(e) {\n    var wheel = e;\n    var deltaX = wheel.deltaX, deltaY = wheel.deltaY;\n    if (deltaX === undefined) {\n        deltaX =\n            wheel.wheelDeltaX !== undefined ? wheel.wheelDeltaX * IE_ADJUSTMENT : 0;\n    }\n    if (deltaY === undefined) {\n        if (wheel.wheelDeltaY !== undefined) {\n            deltaY = wheel.wheelDeltaY * IE_ADJUSTMENT;\n        }\n        else {\n            deltaY = wheel.wheelDelta || -wheel.detail;\n        }\n    }\n    var v = new three_1.Vector2(deltaX, -deltaY);\n    v.multiplyScalar(0.25);\n    return v;\n}\nvar normalizeWheel;\nexports.normalizeWheel = normalizeWheel;\nif (browser.firefox) {\n    debug(\"Using mouse wheel for firefox\");\n    exports.normalizeWheel = normalizeWheel = normalizeFirefoxWheel;\n}\nelse if (browser.msie && +browser.version >= 11) {\n    debug(\"Using mouse wheel for IE 11\");\n    exports.normalizeWheel = normalizeWheel = normalizeIE11Wheel;\n}\nelse if (browser.msedge) {\n    debug(\"Using mouse wheel for MS EDGE\");\n    exports.normalizeWheel = normalizeWheel = normalizeIE12Wheel;\n}\nelse {\n    debug(\"Using mouse wheel for Chrome\");\n    exports.normalizeWheel = normalizeWheel = normalizeChromeWheel;\n}\nfunction eventElementPosition(e, relative) {\n    var mouseX = 0, mouseY = 0, eventX = 0, eventY = 0, object = relative || (e.nativeEvent && e.nativeEvent.target) || e.target;\n    if (!e) {\n        e = window.event;\n    }\n    if (e.pageX || e.pageY) {\n        mouseX = e.pageX;\n        mouseY = e.pageY;\n    }\n    else if (e.clientX || e.clientY) {\n        mouseX =\n            e.clientX +\n                document.body.scrollLeft +\n                document.documentElement.scrollLeft;\n        mouseY =\n            e.clientY + document.body.scrollTop + document.documentElement.scrollTop;\n    }\n    if (object.offsetParent) {\n        do {\n            eventX += object.offsetLeft;\n            eventY += object.offsetTop;\n            object = object.offsetParent;\n        } while (object);\n    }\n    return { x: mouseX - eventX, y: mouseY - eventY };\n}\nexports.eventElementPosition = eventElementPosition;\n","\"use strict\";\nfunction __export(m) {\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n}\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__export(require(\"./image-layer\"));\n__export(require(\"./image-instance\"));\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar bounds_1 = require(\"../primitives/bounds\");\nvar event_manager_1 = require(\"../surface/event-manager\");\nvar util_1 = require(\"../util\");\nvar CameraBoundsAnchor;\n(function (CameraBoundsAnchor) {\n    CameraBoundsAnchor[CameraBoundsAnchor[\"TOP_LEFT\"] = 0] = \"TOP_LEFT\";\n    CameraBoundsAnchor[CameraBoundsAnchor[\"TOP_MIDDLE\"] = 1] = \"TOP_MIDDLE\";\n    CameraBoundsAnchor[CameraBoundsAnchor[\"TOP_RIGHT\"] = 2] = \"TOP_RIGHT\";\n    CameraBoundsAnchor[CameraBoundsAnchor[\"MIDDLE_LEFT\"] = 3] = \"MIDDLE_LEFT\";\n    CameraBoundsAnchor[CameraBoundsAnchor[\"MIDDLE\"] = 4] = \"MIDDLE\";\n    CameraBoundsAnchor[CameraBoundsAnchor[\"MIDDLE_RIGHT\"] = 5] = \"MIDDLE_RIGHT\";\n    CameraBoundsAnchor[CameraBoundsAnchor[\"BOTTOM_LEFT\"] = 6] = \"BOTTOM_LEFT\";\n    CameraBoundsAnchor[CameraBoundsAnchor[\"BOTTOM_MIDDLE\"] = 7] = \"BOTTOM_MIDDLE\";\n    CameraBoundsAnchor[CameraBoundsAnchor[\"BOTTOM_RIGHT\"] = 8] = \"BOTTOM_RIGHT\";\n})(CameraBoundsAnchor = exports.CameraBoundsAnchor || (exports.CameraBoundsAnchor = {}));\nvar max = Math.max, min = Math.min;\nvar BasicCameraController = (function (_super) {\n    __extends(BasicCameraController, _super);\n    function BasicCameraController(options) {\n        var _this = _super.call(this) || this;\n        _this.isPanning = false;\n        _this.panFilter = function (offset, _view, _allViews) { return offset; };\n        _this.scaleFilter = function (scale, _view, _allViews) { return scale; };\n        _this.startViews = [];\n        _this.onRangeChanged = function (_camera, _targetView) {\n        };\n        _this.startViewDidStart = false;\n        _this.applyBounds = function () {\n            if (_this.bounds && _this.camera) {\n                var targetView = _this.getView(_this.bounds.view);\n                _this.applyScaleBounds();\n                if (targetView) {\n                    _this.camera.offset[0] = _this.boundsHorizontalOffset(targetView, _this.bounds);\n                    _this.camera.offset[1] = _this.boundsVerticalOffset(targetView, _this.bounds);\n                }\n            }\n        };\n        _this.applyScaleBounds = function () {\n            if (_this.camera && _this.bounds) {\n                if (_this.bounds.scaleMin) {\n                    _this.camera.scale = [\n                        max(_this.camera.scale[0], _this.bounds.scaleMin[0]),\n                        max(_this.camera.scale[1], _this.bounds.scaleMin[1]),\n                        max(_this.camera.scale[2], _this.bounds.scaleMin[2])\n                    ];\n                }\n                if (_this.bounds.scaleMax) {\n                    _this.camera.scale = [\n                        min(_this.camera.scale[0], _this.bounds.scaleMax[0]),\n                        min(_this.camera.scale[1], _this.bounds.scaleMax[1]),\n                        min(_this.camera.scale[2], _this.bounds.scaleMax[2])\n                    ];\n                }\n            }\n        };\n        if (options.bounds) {\n            _this.setBounds(options.bounds);\n        }\n        _this.camera = options.camera;\n        _this.scaleFactor = options.scaleFactor || 1000.0;\n        _this.ignoreCoverViews = options.ignoreCoverViews || false;\n        if (options.startView) {\n            _this.startViews = Array.isArray(options.startView)\n                ? options.startView\n                : [options.startView];\n        }\n        _this.panFilter = options.panFilter || _this.panFilter;\n        _this.scaleFilter = options.scaleFilter || _this.scaleFilter;\n        _this.onRangeChanged = options.onRangeChanged || _this.onRangeChanged;\n        return _this;\n    }\n    BasicCameraController.prototype.anchoredByBoundsHorizontal = function (targetView, bounds) {\n        switch (bounds.anchor) {\n            case CameraBoundsAnchor.TOP_LEFT:\n            case CameraBoundsAnchor.MIDDLE_LEFT:\n            case CameraBoundsAnchor.BOTTOM_LEFT:\n                return -(bounds.worldBounds.left -\n                    bounds.screenPadding.left / this.camera.scale[0]);\n            case CameraBoundsAnchor.TOP_MIDDLE:\n            case CameraBoundsAnchor.MIDDLE:\n            case CameraBoundsAnchor.BOTTOM_MIDDLE:\n                return -(bounds.worldBounds.right -\n                    bounds.worldBounds.width / 2 -\n                    0.5 *\n                        ((targetView.screenBounds.width + bounds.screenPadding.right) /\n                            this.camera.scale[0]));\n            case CameraBoundsAnchor.TOP_RIGHT:\n            case CameraBoundsAnchor.MIDDLE_RIGHT:\n            case CameraBoundsAnchor.BOTTOM_RIGHT:\n                return -(bounds.worldBounds.right -\n                    (targetView.screenBounds.width - bounds.screenPadding.right) /\n                        this.camera.scale[0]);\n        }\n    };\n    BasicCameraController.prototype.anchoredByBoundsVertical = function (targetView, bounds) {\n        switch (bounds.anchor) {\n            case CameraBoundsAnchor.TOP_LEFT:\n            case CameraBoundsAnchor.TOP_MIDDLE:\n            case CameraBoundsAnchor.TOP_RIGHT:\n                return (-bounds.worldBounds.top - -bounds.screenPadding.top / this.scale[1]);\n            case CameraBoundsAnchor.MIDDLE_LEFT:\n            case CameraBoundsAnchor.MIDDLE:\n            case CameraBoundsAnchor.MIDDLE_RIGHT:\n                return (-(bounds.worldBounds.bottom - bounds.worldBounds.height / 2) +\n                    0.5 *\n                        (targetView.screenBounds.height - bounds.screenPadding.bottom) /\n                        this.scale[1]);\n            case CameraBoundsAnchor.BOTTOM_LEFT:\n            case CameraBoundsAnchor.BOTTOM_MIDDLE:\n            case CameraBoundsAnchor.BOTTOM_RIGHT:\n                return -(bounds.worldBounds.bottom -\n                    (targetView.screenBounds.height - bounds.screenPadding.bottom) /\n                        this.scale[1]);\n        }\n    };\n    BasicCameraController.prototype.boundsHorizontalOffset = function (targetView, bounds) {\n        var worldTLinScreenSpace = targetView.worldToScreen({\n            x: bounds.worldBounds.left,\n            y: bounds.worldBounds.top\n        });\n        var worldBRinScreenSpace = targetView.worldToScreen({\n            x: bounds.worldBounds.right,\n            y: bounds.worldBounds.bottom\n        });\n        var widthDifference = worldBRinScreenSpace.x -\n            worldTLinScreenSpace.x +\n            bounds.screenPadding.left +\n            bounds.screenPadding.right -\n            targetView.screenBounds.width;\n        if (widthDifference < 0) {\n            return this.anchoredByBoundsHorizontal(targetView, bounds);\n        }\n        if (worldBRinScreenSpace.x <\n            targetView.screenBounds.right - bounds.screenPadding.right) {\n            return (-bounds.worldBounds.right +\n                (targetView.screenBounds.width - bounds.screenPadding.right) /\n                    this.camera.scale[0]);\n        }\n        if (worldTLinScreenSpace.x >\n            targetView.screenBounds.left + bounds.screenPadding.left) {\n            return (-bounds.worldBounds.left +\n                bounds.screenPadding.left / this.camera.scale[0]);\n        }\n        return this.camera.offset[0];\n    };\n    BasicCameraController.prototype.boundsVerticalOffset = function (targetView, bounds) {\n        var worldTLinScreenSpace = targetView.worldToScreen({\n            x: bounds.worldBounds.left,\n            y: bounds.worldBounds.top\n        });\n        var worldBRinScreenSpace = targetView.worldToScreen({\n            x: bounds.worldBounds.right,\n            y: bounds.worldBounds.bottom\n        });\n        var heightDifference = worldBRinScreenSpace.y -\n            worldTLinScreenSpace.y +\n            bounds.screenPadding.top +\n            bounds.screenPadding.bottom -\n            targetView.screenBounds.height;\n        if (heightDifference < 0) {\n            return this.anchoredByBoundsVertical(targetView, bounds);\n        }\n        if (worldTLinScreenSpace.y >\n            targetView.screenBounds.top - bounds.screenPadding.top) {\n            return -(bounds.worldBounds.top -\n                bounds.screenPadding.top / this.camera.scale[1]);\n        }\n        if (worldBRinScreenSpace.y <\n            targetView.screenBounds.bottom + bounds.screenPadding.bottom) {\n            return -(bounds.worldBounds.bottom +\n                (-targetView.screenBounds.height + bounds.screenPadding.bottom) /\n                    this.camera.scale[1]);\n        }\n        return this.camera.offset[1];\n    };\n    BasicCameraController.prototype.canStart = function (viewId) {\n        return (this.startViews.length === 0 ||\n            (this.startViews && this.startViews.indexOf(viewId) > -1) ||\n            (this.startViewDidStart && this.ignoreCoverViews));\n    };\n    BasicCameraController.prototype.findCoveredStartView = function (e) {\n        var _this = this;\n        var found = e.viewsUnderMouse.find(function (under) { return _this.startViews.indexOf(under.view.id) > -1; });\n        this.startViewDidStart = Boolean(found);\n        if (found) {\n            this.coveredStartView = found.view;\n        }\n    };\n    BasicCameraController.prototype.getTargetView = function (e) {\n        if (this.startViews && !this.ignoreCoverViews) {\n            return e.target.view;\n        }\n        else {\n            return this.coveredStartView;\n        }\n    };\n    BasicCameraController.prototype.handleMouseDown = function (e, _button) {\n        if (this.startViews) {\n            this.findCoveredStartView(e);\n            if (e.start) {\n                this.isPanning = this.canStart(e.start.view.id) || this.isPanning;\n            }\n        }\n    };\n    BasicCameraController.prototype.handleMouseUp = function (_e) {\n        this.startViewDidStart = false;\n        this.isPanning = false;\n    };\n    BasicCameraController.prototype.handleDrag = function (e, drag) {\n        if (e.start) {\n            if (this.canStart(e.start.view.id)) {\n                var pan = [\n                    drag.screen.delta.x / this.camera.scale[0],\n                    drag.screen.delta.y / this.camera.scale[1],\n                    0\n                ];\n                if (this.panFilter) {\n                    pan = this.panFilter(pan, e.start.view, e.viewsUnderMouse.map(function (v) { return v.view; }));\n                }\n                this.camera.offset[0] += pan[0];\n                this.camera.offset[1] += pan[1];\n                this.applyBounds();\n                this.onRangeChanged(this.camera, e.start.view);\n                this.applyBounds();\n            }\n        }\n    };\n    BasicCameraController.prototype.handleWheel = function (e, wheelMetrics) {\n        this.findCoveredStartView(e);\n        if (this.canStart(e.target.view.id)) {\n            var targetView = this.getTargetView(e);\n            var beforeZoom = targetView.screenToWorld(e.screen.mouse);\n            var currentZoomX = this.camera.scale[0] || 1.0;\n            var currentZoomY = this.camera.scale[1] || 1.0;\n            var scale = [\n                wheelMetrics.wheel[1] / this.scaleFactor * currentZoomX,\n                wheelMetrics.wheel[1] / this.scaleFactor * currentZoomY,\n                1\n            ];\n            if (this.scaleFilter) {\n                scale = this.scaleFilter(scale, targetView, e.viewsUnderMouse.map(function (v) { return v.view; }));\n            }\n            this.camera.scale[0] = currentZoomX + scale[0];\n            this.camera.scale[1] = currentZoomY + scale[1];\n            this.applyScaleBounds();\n            var afterZoom = targetView.screenToWorld(e.screen.mouse);\n            this.camera.offset[0] -= beforeZoom.x - afterZoom.x;\n            this.camera.offset[1] -= beforeZoom.y - afterZoom.y;\n            this.applyBounds();\n            this.onRangeChanged(this.camera, targetView);\n            this.applyBounds();\n        }\n    };\n    BasicCameraController.prototype.handleMouseOut = function (_e) {\n    };\n    BasicCameraController.prototype.handleClick = function (_e) {\n    };\n    BasicCameraController.prototype.handleMouseMove = function (_e) {\n    };\n    BasicCameraController.prototype.handleMouseOver = function (_e) {\n    };\n    BasicCameraController.prototype.getRange = function (viewId) {\n        var projection = this.getProjection(viewId);\n        var screenBounds = this.getViewScreenBounds(viewId);\n        if (projection && screenBounds) {\n            var topLeft = projection.screenToWorld(screenBounds);\n            var bottomRight = projection.screenToWorld({\n                x: screenBounds.right,\n                y: screenBounds.bottom\n            });\n            return new bounds_1.Bounds({\n                height: bottomRight.y - topLeft.y,\n                width: bottomRight.x - topLeft.x,\n                x: topLeft.x,\n                y: topLeft.y\n            });\n        }\n        return new bounds_1.Bounds({ x: 0, y: 0, width: 1, height: 1 });\n    };\n    Object.defineProperty(BasicCameraController.prototype, \"pan\", {\n        get: function () {\n            return this.camera.offset;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    BasicCameraController.prototype.setBounds = function (bounds) {\n        this.bounds = bounds;\n        this.applyBounds();\n    };\n    Object.defineProperty(BasicCameraController.prototype, \"scale\", {\n        get: function () {\n            return this.camera.scale;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    BasicCameraController.prototype.setRange = function (newWorld, viewId) {\n        var projection = this.getProjection(viewId);\n        var screenBounds = this.getViewScreenBounds(viewId);\n        var view = this.getView(viewId);\n        if (projection && screenBounds && view) {\n            var deltaScale = util_1.subtract3([\n                screenBounds.width / newWorld.width,\n                screenBounds.height / newWorld.height,\n                1\n            ], this.camera.scale);\n            this.camera.scale = util_1.add3(this.camera.scale, this.scaleFilter(deltaScale, view, [view]));\n            var deltaPan = util_1.subtract3([-newWorld.x, -newWorld.y, 0], this.camera.offset);\n            this.camera.offset = util_1.add3(this.camera.offset, this.scaleFilter(deltaPan, view, [view]));\n            this.applyBounds();\n            this.onRangeChanged(this.camera, view);\n            this.applyBounds();\n        }\n    };\n    return BasicCameraController;\n}(event_manager_1.EventManager));\nexports.BasicCameraController = BasicCameraController;\n","\"use strict\";\nfunction __export(m) {\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n}\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__export(require(\"./basic-camera-controller\"));\n","module.exports = \"precision highp float;\\n\\nvarying vec4 vertexColor;\\nvarying float edgeSharpness;\\nvarying float borderSize;\\nvarying vec2 pointCoord;\\n\\nvarying float scale;\\n\\nvoid main() {\\n  ${attributes}\\n\\n  scale = scaleFactor;\\n\\n  vertexColor = color * color.a;\\n  float size = radius * scaleFactor;\\n\\n  thickness = mix(2.0 , thickness, float(thickness > 2.0));\\n\\n  borderSize = mix(\\n    (thickness) / size,\\n    ((thickness * pixelRatio) / size),\\n    float(pixelRatio > 1.0)\\n  );\\n\\n  edgeSharpness = min(0.2 / (thickness * scale),  0.1);\\n\\n  pointCoord = (position.xy + vec2(1.0, 1.0)) / 2.0;  \\n\\n  // Center within clip space\\n  vec4 clipCenter = clipSpace(vec3(center, depth));\\n  // Center in screen space\\n  vec2 screenCenter = (clipCenter.xy + vec2(1.0, 1.0)) * vec2(0.5, 0.5) * viewSize;\\n  // Position in screen space\\n  vec2 vertex = (position.xy * size) + screenCenter;\\n  // Position back to clip space\\n  gl_Position = vec4((vertex / viewSize) * vec2(2.0, 2.0) - vec2(1.0, 1.0), clipCenter.zw);\\n}\\n\"","module.exports = \"precision highp float;\\n\\n/** This is the color of the ring */\\nvarying vec4 vertexColor;\\n/**\\n * This is how sharp the ring renders. For tiny rings, it's best to have\\n * less sharpness to better convey the shape of a circle. A good starter setting:\\n * edgeSharpness = mix(0.8, 0.01, min(gl_PointSize / 45.0, 1.0));\\n */\\nvarying float edgeSharpness;\\n/**\\n * This should be a value that sets the thickness of the ring in normal space\\n * relative to the PointSize\\n */\\nvarying float borderSize;\\n/**\\n * Since this is now a quad instead of a point sprite, this provides what gl_PointCoord\\n * used to provide.\\n */\\nvarying vec2 pointCoord;\\n\\nvarying float scale;\\n\\nfloat circle(vec2 coord, float radius){\\n  vec2 dist = coord - vec2(0.5);\\n\\n  return 1.0 - smoothstep(\\n    radius - (radius * edgeSharpness),\\n    radius,\\n    dot(dist, dist) * 4.0\\n  );\\n\\n}\\n\\nvoid main() {\\n  float outer_step_factor = circle(pointCoord, 1.0);\\n  float inner_step_factor = circle(pointCoord, 1.0 - borderSize * scale);\\n\\n  gl_FragColor = mix(\\n    mix(                        // Select the outer color outside of the inner radius\\n      vec4(0.0, 0.0, 0.0, 0.0),    // Select invisible outside of inner and outer radius\\n      vertexColor,                  // Select outer color outside of inner, but inside outer\\n      outer_step_factor\\n    ),\\n    vec4(0.0, 0.0, 0.0, 0.0),                 // Select inner color inside inner\\n    inner_step_factor\\n  );\\n}\\n\"","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Three = require(\"three\");\nvar primitives_1 = require(\"../../primitives\");\nvar layer_1 = require(\"../../surface/layer\");\nvar types_1 = require(\"../../types\");\nvar max = Math.max;\nvar RingLayer = (function (_super) {\n    __extends(RingLayer, _super);\n    function RingLayer() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    RingLayer.prototype.getInstancePickingMethods = function () {\n        return {\n            boundsAccessor: function (ring) {\n                return new primitives_1.Bounds({\n                    height: ring.radius * 2,\n                    width: ring.radius * 2,\n                    x: ring.x - ring.radius,\n                    y: ring.y - ring.radius\n                });\n            },\n            hitTest: function (ring, point, view) {\n                var r = ring.radius / max.apply(void 0, view.camera.scale);\n                var delta = [point.x - ring.x, point.y - ring.y];\n                return delta[0] * delta[0] + delta[1] * delta[1] < r * r;\n            }\n        };\n    };\n    RingLayer.prototype.initShader = function () {\n        var scaleFactor = this.props.scaleFactor || (function () { return 1; });\n        var vertexToNormal = {\n            0: 1,\n            1: 1,\n            2: -1,\n            3: 1,\n            4: -1,\n            5: -1\n        };\n        var vertexToSide = {\n            0: -1,\n            1: -1,\n            2: -1,\n            3: 1,\n            4: 1,\n            5: 1\n        };\n        return {\n            fs: require(\"./ring-layer.fs\"),\n            instanceAttributes: [\n                {\n                    block: 0,\n                    blockIndex: types_1.InstanceBlockIndex.ONE,\n                    name: \"center\",\n                    size: types_1.InstanceAttributeSize.TWO,\n                    update: function (o) { return [o.x, o.y]; }\n                },\n                {\n                    block: 0,\n                    blockIndex: types_1.InstanceBlockIndex.THREE,\n                    name: \"radius\",\n                    size: types_1.InstanceAttributeSize.ONE,\n                    update: function (o) { return [o.radius]; }\n                },\n                {\n                    block: 0,\n                    blockIndex: types_1.InstanceBlockIndex.FOUR,\n                    name: \"depth\",\n                    size: types_1.InstanceAttributeSize.ONE,\n                    update: function (o) { return [o.depth]; }\n                },\n                {\n                    block: 1,\n                    blockIndex: types_1.InstanceBlockIndex.ONE,\n                    name: \"color\",\n                    size: types_1.InstanceAttributeSize.FOUR,\n                    update: function (o) { return o.color; }\n                },\n                {\n                    block: 2,\n                    blockIndex: types_1.InstanceBlockIndex.ONE,\n                    name: \"thickness\",\n                    size: types_1.InstanceAttributeSize.ONE,\n                    update: function (o) { return [o.thickness]; }\n                }\n            ],\n            uniforms: [\n                {\n                    name: \"scaleFactor\",\n                    size: types_1.UniformSize.ONE,\n                    update: function (_) { return [scaleFactor()]; }\n                }\n            ],\n            vertexAttributes: [\n                {\n                    name: \"position\",\n                    size: types_1.VertexAttributeSize.THREE,\n                    update: function (vertex) { return [\n                        vertexToNormal[vertex],\n                        vertexToSide[vertex],\n                        0\n                    ]; }\n                }\n            ],\n            vertexCount: 6,\n            vs: require(\"./ring-layer.vs\")\n        };\n    };\n    RingLayer.prototype.getModelType = function () {\n        return {\n            drawMode: Three.TriangleStripDrawMode,\n            modelType: Three.Mesh\n        };\n    };\n    RingLayer.prototype.getMaterialOptions = function () {\n        return {\n            blending: Three.CustomBlending,\n            blendSrc: Three.OneFactor,\n            premultipliedAlpha: true,\n            transparent: true\n        };\n    };\n    return RingLayer;\n}(layer_1.Layer));\nexports.RingLayer = RingLayer;\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar mobx_1 = require(\"mobx\");\nvar util_1 = require(\"../../util\");\nvar RingInstance = (function (_super) {\n    __extends(RingInstance, _super);\n    function RingInstance(options) {\n        var _this = _super.call(this, options) || this;\n        _this.color = [1.0, 1.0, 1.0, 1.0];\n        _this.depth = 0;\n        _this.radius = 0;\n        _this.thickness = 1;\n        _this.x = 0;\n        _this.y = 0;\n        _this.color = options.color || [1, 1, 1, 1];\n        _this.depth = options.depth || 0;\n        _this.radius = options.radius;\n        _this.thickness = options.thickness || _this.thickness;\n        _this.x = options.x;\n        _this.y = options.y;\n        return _this;\n    }\n    Object.defineProperty(RingInstance.prototype, \"width\", {\n        get: function () {\n            return this.radius * 2;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(RingInstance.prototype, \"height\", {\n        get: function () {\n            return this.radius * 2;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(RingInstance.prototype, \"innerRadius\", {\n        get: function () {\n            return this.radius - this.thickness;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    __decorate([\n        mobx_1.observable\n    ], RingInstance.prototype, \"color\", void 0);\n    __decorate([\n        mobx_1.observable\n    ], RingInstance.prototype, \"depth\", void 0);\n    __decorate([\n        mobx_1.observable\n    ], RingInstance.prototype, \"radius\", void 0);\n    __decorate([\n        mobx_1.observable\n    ], RingInstance.prototype, \"thickness\", void 0);\n    __decorate([\n        mobx_1.observable\n    ], RingInstance.prototype, \"x\", void 0);\n    __decorate([\n        mobx_1.observable\n    ], RingInstance.prototype, \"y\", void 0);\n    __decorate([\n        mobx_1.computed\n    ], RingInstance.prototype, \"width\", null);\n    __decorate([\n        mobx_1.computed\n    ], RingInstance.prototype, \"height\", null);\n    __decorate([\n        mobx_1.computed\n    ], RingInstance.prototype, \"innerRadius\", null);\n    return RingInstance;\n}(util_1.Instance));\nexports.RingInstance = RingInstance;\n","\"use strict\";\nfunction __export(m) {\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n}\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__export(require(\"./ring-instance\"));\n__export(require(\"./ring-layer\"));\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar mobx_1 = require(\"mobx\");\nvar instance_1 = require(\"../../util/instance\");\nvar types_1 = require(\"../types\");\nvar anchorCalculator = (_a = {},\n    _a[types_1.AnchorType.TopLeft] = function (anchor, _rectangle) {\n        anchor.x = -anchor.padding;\n        anchor.y = -anchor.padding;\n    },\n    _a[types_1.AnchorType.TopMiddle] = function (anchor, rectangle) {\n        anchor.x = rectangle.width / 2.0;\n        anchor.y = -anchor.padding;\n    },\n    _a[types_1.AnchorType.TopRight] = function (anchor, rectangle) {\n        anchor.x = rectangle.width + anchor.padding;\n        anchor.y = -anchor.padding;\n    },\n    _a[types_1.AnchorType.MiddleLeft] = function (anchor, rectangle) {\n        anchor.x = -anchor.padding;\n        anchor.y = rectangle.height / 2;\n    },\n    _a[types_1.AnchorType.Middle] = function (anchor, rectangle) {\n        anchor.x = rectangle.width / 2.0;\n        anchor.y = rectangle.height / 2.0;\n    },\n    _a[types_1.AnchorType.MiddleRight] = function (anchor, rectangle) {\n        anchor.x = rectangle.width + anchor.padding;\n        anchor.y = rectangle.height / 2.0;\n    },\n    _a[types_1.AnchorType.BottomLeft] = function (anchor, rectangle) {\n        anchor.x = -anchor.padding;\n        anchor.y = rectangle.height + anchor.padding;\n    },\n    _a[types_1.AnchorType.BottomMiddle] = function (anchor, rectangle) {\n        anchor.x = rectangle.width / 2.0;\n        anchor.y = rectangle.height + anchor.padding;\n    },\n    _a[types_1.AnchorType.BottomRight] = function (anchor, rectangle) {\n        anchor.x = rectangle.width + anchor.padding;\n        anchor.y = rectangle.height + anchor.padding;\n    },\n    _a[types_1.AnchorType.Custom] = function (anchor, _rectangle) {\n        anchor.x = anchor.x || 0;\n        anchor.y = anchor.y || 0;\n    },\n    _a);\nvar RectangleInstance = (function (_super) {\n    __extends(RectangleInstance, _super);\n    function RectangleInstance(options) {\n        var _this = _super.call(this, options) || this;\n        _this.color = [0, 0, 0, 1];\n        _this.depth = 0;\n        _this.height = 1;\n        _this.scaling = types_1.ScaleType.BOUND_MAX;\n        _this.width = 1;\n        _this.x = 0;\n        _this.y = 0;\n        _this._anchor = {\n            padding: 0,\n            type: types_1.AnchorType.TopLeft,\n            x: 0,\n            y: 0\n        };\n        _this.depth = options.depth || _this.depth;\n        _this.color = options.color || _this.color;\n        _this.scaling = options.scaling || _this.scaling;\n        _this.x = options.x || _this.x;\n        _this.y = options.y || _this.y;\n        _this.width = options.width || 1;\n        _this.height = options.height || 1;\n        options.anchor && _this.setAnchor(options.anchor);\n        return _this;\n    }\n    Object.defineProperty(RectangleInstance.prototype, \"anchor\", {\n        get: function () {\n            return this._anchor;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    RectangleInstance.prototype.setAnchor = function (anchor) {\n        var newAnchor = {\n            padding: anchor.padding || 0,\n            type: anchor.type,\n            x: anchor.x || 0,\n            y: anchor.y || 0\n        };\n        anchorCalculator[newAnchor.type](newAnchor, this);\n        this._anchor = newAnchor;\n    };\n    __decorate([\n        mobx_1.observable\n    ], RectangleInstance.prototype, \"color\", void 0);\n    __decorate([\n        mobx_1.observable\n    ], RectangleInstance.prototype, \"depth\", void 0);\n    __decorate([\n        mobx_1.observable\n    ], RectangleInstance.prototype, \"height\", void 0);\n    __decorate([\n        mobx_1.observable\n    ], RectangleInstance.prototype, \"scaling\", void 0);\n    __decorate([\n        mobx_1.observable\n    ], RectangleInstance.prototype, \"width\", void 0);\n    __decorate([\n        mobx_1.observable\n    ], RectangleInstance.prototype, \"x\", void 0);\n    __decorate([\n        mobx_1.observable\n    ], RectangleInstance.prototype, \"y\", void 0);\n    __decorate([\n        mobx_1.observable\n    ], RectangleInstance.prototype, \"_anchor\", void 0);\n    __decorate([\n        mobx_1.computed\n    ], RectangleInstance.prototype, \"anchor\", null);\n    return RectangleInstance;\n}(instance_1.Instance));\nexports.RectangleInstance = RectangleInstance;\nvar _a;\n","module.exports = \"precision highp float;\\n\\nvarying vec4 vertexColor;\\n\\nvoid main() {\\n  ${attributes}\\n\\n  // Figure out the size of the image as it'd show on the screen\\n  vec3 screenSize = cameraSpaceSize(vec3(size, 1.0));\\n  // Do the test for when the image is larger on the screen than the font size\\n  bool largerOnScreen = screenSize.y > size.y;\\n  // Determines if a scale mode should be used or not for the vertex\\n  float useScaleMode = float(\\n    (\\n      scaling == 3.0 ||                  // NEVER mode - keep the image the same size always\\n      (largerOnScreen && scaling == 2.0) // BOUND_MAX mode - only if we're larger than the font size do we scale down\\n    ) &&\\n    scaling != 1.0                       // ALWAYS mode - the image stays completely in world space allowing it to scale freely\\n  );\\n  // If zooms are unequal, assume one is filtered to be 1.0\\n  float unequalZooms = float((cameraScale.x > cameraScale.y || cameraScale.y > cameraScale.x) && useScaleMode != 0.0);\\n  // Destructure threejs's bug with the position requirement\\n  float normal = position.x;\\n  float side = position.y;\\n  // Get the location of the anchor in world space\\n  vec2 worldAnchor = location + anchor;\\n  // Apply the image's tint as a tint to the image\\n  vertexColor = color * color.a;\\n\\n  // Correct aspect ratio.\\n  size = mix(\\n    size,\\n    (size * cameraScale.yx),\\n    unequalZooms\\n  );\\n\\n  vec2 adjustedAnchor = mix(\\n    anchor,\\n    (anchor * cameraScale.yx),\\n    unequalZooms\\n  );\\n\\n  vec2 vertex = vec2(side, float(normal == 1.0)) * size + location - adjustedAnchor;\\n\\n  // See how scaled the size on screen will be from the actual height of the image\\n  float imageScreenScale = mix(\\n    screenSize.y / size.y,\\n    screenSize.x / size.x,\\n    float((cameraScale.x < 1.0) || (cameraScale.x > 1.0))\\n  );\\n\\n  // If our screen rendering is larger than the size the image is supposed to be, then we automagically\\n  // scale down our image to stay the correct size, centered on the anchor point\\n  vec2 anchorToVertex = vertex - location;\\n\\n  // We now choose between keeping the same image size or keeping it in world space\\n  vertex = mix(\\n    // This option keeps the image size in world space\\n    vertex,\\n    // This option counters the scaling of the image on the screen keeping it a static size\\n    (anchorToVertex / imageScreenScale) + location,\\n    // This is the flag determining if a scale mode should be applied to the vertex\\n    useScaleMode\\n  );\\n\\n  gl_Position = clipSpace(vec3(vertex, depth));\\n}\\n\"","module.exports = \"precision highp float;\\n\\nvarying vec4 vertexColor;\\n\\nvoid main() {\\n  gl_FragColor = vertexColor;\\n}\\n\"","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Three = require(\"three\");\nvar primitives_1 = require(\"../../primitives\");\nvar layer_1 = require(\"../../surface/layer\");\nvar types_1 = require(\"../../types\");\nvar types_2 = require(\"../types\");\nvar min = Math.min, max = Math.max;\nvar RectangleLayer = (function (_super) {\n    __extends(RectangleLayer, _super);\n    function RectangleLayer() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    RectangleLayer.prototype.getInstancePickingMethods = function () {\n        return {\n            boundsAccessor: function (rectangle) {\n                var anchorEffect = [0, 0];\n                if (rectangle.anchor) {\n                    anchorEffect[0] = rectangle.anchor.x || 0;\n                    anchorEffect[1] = rectangle.anchor.y || 0;\n                }\n                var topLeft = [\n                    rectangle.x - anchorEffect[0],\n                    rectangle.y - anchorEffect[1]\n                ];\n                return new primitives_1.Bounds({\n                    height: rectangle.height,\n                    width: rectangle.width,\n                    x: topLeft[0],\n                    y: topLeft[1]\n                });\n            },\n            hitTest: function (rectangle, point, projection) {\n                var maxScale = max.apply(void 0, projection.camera.scale);\n                var minScale = min.apply(void 0, projection.camera.scale);\n                if (rectangle.scaling === types_2.ScaleType.ALWAYS) {\n                    return true;\n                }\n                else if (rectangle.scaling === types_2.ScaleType.BOUND_MAX) {\n                    if (minScale <= 1 && maxScale <= 1) {\n                        return true;\n                    }\n                    else {\n                        var anchorEffect = [0, 0];\n                        if (rectangle.anchor) {\n                            anchorEffect[0] = rectangle.anchor.x || 0;\n                            anchorEffect[1] = rectangle.anchor.y || 0;\n                        }\n                        var topLeft = [\n                            rectangle.x - anchorEffect[0] / maxScale,\n                            rectangle.y - anchorEffect[1] / maxScale\n                        ];\n                        return new primitives_1.Bounds({\n                            height: rectangle.height / maxScale,\n                            width: rectangle.width / maxScale,\n                            x: topLeft[0],\n                            y: topLeft[1]\n                        }).containsPoint(point);\n                    }\n                }\n                else if (rectangle.scaling === types_2.ScaleType.NEVER) {\n                    var anchorEffect = [0, 0];\n                    if (rectangle.anchor) {\n                        anchorEffect[0] = rectangle.anchor.x || 0;\n                        anchorEffect[1] = rectangle.anchor.y || 0;\n                    }\n                    var topLeft = projection.worldToScreen({\n                        x: rectangle.x - anchorEffect[0] / projection.camera.scale[0],\n                        y: rectangle.y - anchorEffect[1] / projection.camera.scale[1]\n                    });\n                    var screenPoint = projection.worldToScreen(point);\n                    return new primitives_1.Bounds({\n                        height: rectangle.height,\n                        width: rectangle.width,\n                        x: topLeft.x,\n                        y: topLeft.y\n                    }).containsPoint(screenPoint);\n                }\n                return true;\n            }\n        };\n    };\n    RectangleLayer.prototype.initShader = function () {\n        var vertexToNormal = {\n            0: 1,\n            1: 1,\n            2: -1,\n            3: 1,\n            4: -1,\n            5: -1\n        };\n        var vertexToSide = {\n            0: 0,\n            1: 0,\n            2: 0,\n            3: 1,\n            4: 1,\n            5: 1\n        };\n        return {\n            fs: require(\"./rectangle-layer.fs\"),\n            instanceAttributes: [\n                {\n                    block: 0,\n                    blockIndex: types_1.InstanceBlockIndex.ONE,\n                    name: \"location\",\n                    size: types_1.InstanceAttributeSize.TWO,\n                    update: function (o) { return [o.x, o.y]; }\n                },\n                {\n                    block: 0,\n                    blockIndex: types_1.InstanceBlockIndex.THREE,\n                    name: \"anchor\",\n                    size: types_1.InstanceAttributeSize.TWO,\n                    update: function (o) { return [o.anchor.x || 0, o.anchor.y || 0]; }\n                },\n                {\n                    block: 1,\n                    blockIndex: types_1.InstanceBlockIndex.ONE,\n                    name: \"size\",\n                    size: types_1.InstanceAttributeSize.TWO,\n                    update: function (o) { return [o.width, o.height]; }\n                },\n                {\n                    block: 1,\n                    blockIndex: types_1.InstanceBlockIndex.THREE,\n                    name: \"depth\",\n                    size: types_1.InstanceAttributeSize.ONE,\n                    update: function (o) { return [o.depth]; }\n                },\n                {\n                    block: 1,\n                    blockIndex: types_1.InstanceBlockIndex.FOUR,\n                    name: \"scaling\",\n                    size: types_1.InstanceAttributeSize.ONE,\n                    update: function (o) { return [o.scaling]; }\n                },\n                {\n                    block: 3,\n                    blockIndex: types_1.InstanceBlockIndex.ONE,\n                    name: \"color\",\n                    size: types_1.InstanceAttributeSize.FOUR,\n                    update: function (o) { return o.color; }\n                }\n            ],\n            uniforms: [\n                {\n                    name: \"scaleFactor\",\n                    size: types_1.UniformSize.ONE,\n                    update: function (_u) { return [1]; }\n                }\n            ],\n            vertexAttributes: [\n                {\n                    name: \"position\",\n                    size: types_1.VertexAttributeSize.THREE,\n                    update: function (vertex) { return [\n                        vertexToNormal[vertex],\n                        vertexToSide[vertex],\n                        0\n                    ]; }\n                }\n            ],\n            vertexCount: 6,\n            vs: require(\"./rectangle-layer.vs\")\n        };\n    };\n    RectangleLayer.prototype.getModelType = function () {\n        return {\n            drawMode: Three.TriangleStripDrawMode,\n            modelType: Three.Mesh\n        };\n    };\n    RectangleLayer.prototype.getMaterialOptions = function () {\n        return {\n            blending: Three.CustomBlending,\n            blendSrc: Three.OneFactor,\n            premultipliedAlpha: true,\n            transparent: true\n        };\n    };\n    return RectangleLayer;\n}(layer_1.Layer));\nexports.RectangleLayer = RectangleLayer;\n","\"use strict\";\nfunction __export(m) {\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n}\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__export(require(\"./rectangle-layer\"));\n__export(require(\"./rectangle-instance\"));\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar mobx_1 = require(\"mobx\");\nvar instance_1 = require(\"../../util/instance\");\nvar EdgeInstance = (function (_super) {\n    __extends(EdgeInstance, _super);\n    function EdgeInstance(options) {\n        var _this = _super.call(this, options) || this;\n        _this.colorStart = [1.0, 1.0, 1.0, 1.0];\n        _this.colorEnd = [1.0, 1.0, 1.0, 1.0];\n        _this.control = [[0, 0], [0, 0]];\n        _this.depth = 0;\n        _this.end = [0, 0];\n        _this.start = [0, 0];\n        _this.widthStart = 1.0;\n        _this.widthEnd = 1.0;\n        _this.colorStart = options.colorStart || _this.colorStart;\n        _this.colorEnd = options.colorEnd || _this.colorEnd;\n        _this.control = options.control || _this.control;\n        _this.depth = options.depth || _this.depth;\n        _this.end = options.end || _this.end;\n        _this.widthStart = options.widthStart || _this.widthStart;\n        _this.widthEnd = options.widthEnd || _this.widthEnd;\n        _this.start = options.start || _this.start;\n        return _this;\n    }\n    Object.defineProperty(EdgeInstance.prototype, \"length\", {\n        get: function () {\n            var delta = [this.end[0] - this.start[0], this.end[1] - this.start[1]];\n            return Math.sqrt(delta[0] * delta[0] + delta[1] * delta[1]);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(EdgeInstance.prototype, \"midpoint\", {\n        get: function () {\n            return 0;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(EdgeInstance.prototype, \"perpendicular\", {\n        get: function () {\n            var length = this.length;\n            return [\n                (this.end[1] - this.start[1]) / length,\n                -(this.end[0] - this.start[0]) / length\n            ];\n        },\n        enumerable: true,\n        configurable: true\n    });\n    EdgeInstance.prototype.setEdgeWidth = function (width) {\n        if (width) {\n            this.widthEnd = width;\n            this.widthStart = width;\n        }\n    };\n    EdgeInstance.prototype.setColor = function (color) {\n        this.colorStart = color;\n        this.colorEnd = color;\n    };\n    __decorate([\n        mobx_1.observable\n    ], EdgeInstance.prototype, \"colorStart\", void 0);\n    __decorate([\n        mobx_1.observable\n    ], EdgeInstance.prototype, \"colorEnd\", void 0);\n    __decorate([\n        mobx_1.observable\n    ], EdgeInstance.prototype, \"control\", void 0);\n    __decorate([\n        mobx_1.observable\n    ], EdgeInstance.prototype, \"depth\", void 0);\n    __decorate([\n        mobx_1.observable\n    ], EdgeInstance.prototype, \"end\", void 0);\n    __decorate([\n        mobx_1.observable\n    ], EdgeInstance.prototype, \"start\", void 0);\n    __decorate([\n        mobx_1.observable\n    ], EdgeInstance.prototype, \"widthStart\", void 0);\n    __decorate([\n        mobx_1.observable\n    ], EdgeInstance.prototype, \"widthEnd\", void 0);\n    __decorate([\n        mobx_1.computed\n    ], EdgeInstance.prototype, \"length\", null);\n    __decorate([\n        mobx_1.computed\n    ], EdgeInstance.prototype, \"midpoint\", null);\n    __decorate([\n        mobx_1.computed\n    ], EdgeInstance.prototype, \"perpendicular\", null);\n    return EdgeInstance;\n}(instance_1.Instance));\nexports.EdgeInstance = EdgeInstance;\n","module.exports = \"precision highp float;\\n\\nvarying vec4 vertexColor;\\n\\nvoid main() {\\n  gl_FragColor = vertexColor;\\n}\\n\"","module.exports = \"/**\\n  This vertex shader calculates edges based in world space to make an edge based on\\n  bezier curves with 0, 1, and 2 control points.\\n**/\\nprecision highp float;\\n\\nvarying vec4 vertexColor;\\n\\n// Interpolation type injection\\n${interpolation}\\n\\nvoid main() {\\n  ${attributes}\\n\\n  // Destructure threejs's bug with the position requirement\\n  float normal = position.x;\\n  float interpolationTime = position.y;\\n  float interpolationIncrement = 1.0 / position.z;\\n\\n  // Convert our world points to screen space\\n  vec4 startClip = clipSpace(vec3(start, depth));\\n  vec4 endClip = clipSpace(vec3(end, depth));\\n  vec2 startScreen = (startClip.xy + vec2(1.0, 1.0)) * vec2(0.5, 0.5) * viewSize;\\n  vec2 endScreen = (endClip.xy + vec2(1.0, 1.0)) * vec2(0.5, 0.5) * viewSize;\\n  // Controls for this mode are screen space deltas from the end points\\n  vec2 control1 = startScreen + vec2(control.x, -control.y) * scaleFactor;\\n  vec2 control2 = endScreen + vec2(control.z, -control.w) * scaleFactor;\\n\\n  // Get the position of the current vertex\\n  vec2 currentPosition = interpolation(interpolationTime, startScreen, endScreen, control1, control2);\\n  // Calculate the next and previous segment's location on the line\\n  vec2 prePosition = interpolation(interpolationTime - interpolationIncrement, startScreen, endScreen, control1, control2);\\n  vec2 nextPosition = interpolation(interpolationTime + interpolationIncrement, startScreen, endScreen, control1, control2);\\n\\n  vec2 preLine = prePosition - currentPosition;\\n  vec2 nextLine = nextPosition - currentPosition;\\n\\n  // Get a spliced nromal at the joining of two segments to make a crisper curve\\n  vec2 currentNormal = mix(\\n    // Pick this value if we're at the beginning of the line\\n    normalize(vec2(preLine.y, -preLine.x)),\\n    mix(\\n      // Pick this value when we're between the ends\\n      normalize(vec2(preLine.y, -preLine.x) + vec2(-nextLine.y, nextLine.x)),\\n      // Pick this value if we're at the end of the line\\n      normalize(vec2(-nextLine.y, nextLine.x)),\\n      float(position.x >= 1.0)\\n    ),\\n    float(position.x > 0.0)\\n  );\\n\\n  // Get the thickness based on the side we're on\\n  float lineThickness = mix(widthStart, widthEnd, interpolationTime) / 2.0;\\n  // Start on the calculated line and push out by the normal's value\\n  vec2 vertex = currentPosition + currentNormal * (-normal * lineThickness * scaleFactor);\\n  // Get the color based on where we are on the line\\n  vertexColor = mix(colorStart, colorEnd, interpolationTime);\\n  vertexColor *= vertexColor.a;\\n\\n  gl_Position = vec4((vertex / viewSize) * vec2(2.0, 2.0) - vec2(1.0, 1.0), startClip.zw);\\n  gl_PointSize = 5.0;\\n}\\n\"","module.exports = \"precision highp float;\\n\\n/**\\n  This vertex shader calculates edges whose curve and width is in screen space where the curve is\\n  bezier curves with 0, 1, and 2 control points.\\n**/\\nvarying vec4 vertexColor;\\n\\n// Interpolation type injection\\n${interpolation}\\n\\nvoid main() {\\n  ${attributes}\\n\\n  // Destructure threejs's bug with the position requirement\\n  float normal = position.x;\\n  float interpolationTime = position.y;\\n  float interpolationIncrement = 1.0 / position.z;\\n  // Get the position of the current vertex\\n  vec2 currentPosition = interpolation(interpolationTime, start, end, control.xy, control.zw);\\n  // Calculate the next and previous segment's location on the line\\n  vec2 prePosition = interpolation(interpolationTime - interpolationIncrement, start, end, control.xy, control.zw);\\n  vec2 nextPosition = interpolation(interpolationTime + interpolationIncrement, start, end, control.xy, control.zw);\\n\\n  vec2 preLine = prePosition - currentPosition;\\n  vec2 nextLine = nextPosition - currentPosition;\\n\\n  // Get a spliced nromal at the joining of two segments to make a crisper curve\\n  vec2 currentNormal = mix(\\n    // Pick this value if we're at the beginning of the line\\n    normalize(vec2(preLine.y, -preLine.x)),\\n    mix(\\n      // Pick this value when we're between the ends\\n      normalize(vec2(preLine.y, -preLine.x) + vec2(-nextLine.y, nextLine.x)),\\n      // Pick this value if we're at the end of the line\\n      normalize(vec2(-nextLine.y, nextLine.x)),\\n      float(position.x >= 1.0)\\n    ),\\n    float(position.x > 0.0)\\n  );\\n\\n  // Get the thickness based on the side we're on\\n  float lineThickness = mix(widthStart, widthEnd, interpolationTime) / 2.0;\\n  // Start on the calculated line and push out by the normal's value\\n  vec2 vertex = currentPosition + currentNormal * (normal * lineThickness);\\n  // Get the color based on where we are on the line\\n  vertexColor = mix(colorStart, colorEnd, interpolationTime);\\n  vertexColor *= vertexColor.a;\\n\\n  gl_Position = clipSpace(vec3(vertex, depth));\\n  gl_PointSize = 5.0;\\n}\\n\"","module.exports = \"/**\\n * Makes a linear interpolation between two points\\n *\\n * @param {vec2} s The start point\\n * @param {vec2} e The end point\\n * @param {vec2} c The bezier control point\\n * @param {float} t The interpolation value [0, 1]\\n *\\n * @returns {vec2} A point interpolated between the two provided points\\n */\\nvec2 interpolation(float t, vec2 p1, vec2 p2, vec2 c1, vec2 c2) {\\n  float t1 = 1.0 - t;\\n  return pow(t1, 3.0) * p1 + 3.0 * t * pow(t1, 2.0) * c1 + 3.0 * pow(t, 2.0) * t1 * c2 + pow(t, 3.0) * p2;\\n}\\n\"","module.exports = \"/**\\n * Makes a linear interpolation between two points\\n *\\n * @param {vec2} s The start point\\n * @param {vec2} e The end point\\n * @param {vec2} c The bezier control point\\n * @param {float} t The interpolation value [0, 1]\\n *\\n * @returns {vec2} A point interpolated between the two provided points\\n */\\nvec2 interpolation(float t, vec2 p1, vec2 p2, vec2 c1, vec2 c2) {\\n  return (1.0 - t) * (1.0 - t) * p1 + 2.0 * t * (1.0 - t) * c1 + t * t * p2;\\n}\\n\"","module.exports = \"/**\\n * Makes a linear interpolation between two points\\n *\\n * @param {vec2} s The start point\\n * @param {vec2} e The end point\\n * @param {vec2} c The bezier control point\\n * @param {float} t The interpolation value [0, 1]\\n *\\n * @returns {vec2} A point interpolated between the two provided points\\n */\\nvec2 interpolation(float t, vec2 p1, vec2 p2, vec2 c1, vec2 c2) {\\n  return p1 + (p2 - p1) * t;\\n}\\n\"","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar bounds_1 = require(\"../../primitives/bounds\");\nvar vector_1 = require(\"../../util/vector\");\nvar types_1 = require(\"./types\");\nvar pow = Math.pow;\nfunction linear(t, p1, p2, _c1, _c2) {\n    return vector_1.add2(vector_1.scale2(vector_1.subtract2(p2, p1), t), p1);\n}\nfunction bezier(t, p1, p2, c1, _c2) {\n    return [\n        (1.0 - t) * (1.0 - t) * p1[0] + 2.0 * t * (1.0 - t) * c1[0] + t * t * p2[0],\n        (1.0 - t) * (1.0 - t) * p1[1] + 2.0 * t * (1.0 - t) * c1[1] + t * t * p2[1]\n    ];\n}\nfunction bezier2(t, p1, p2, c1, c2) {\n    var t1 = 1.0 - t;\n    return [\n        pow(t1, 3.0) * p1[0] +\n            3.0 * t * pow(t1, 2.0) * c1[0] +\n            3.0 * pow(t, 2.0) * t1 * c2[0] +\n            pow(t, 3.0) * p2[0],\n        pow(t1, 3.0) * p1[1] +\n            3.0 * t * pow(t1, 2.0) * c1[1] +\n            3.0 * pow(t, 2.0) * t1 * c2[1] +\n            pow(t, 3.0) * p2[1]\n    ];\n}\nvar interpolation = (_a = {},\n    _a[types_1.EdgeType.LINE] = linear,\n    _a[types_1.EdgeType.BEZIER] = bezier,\n    _a[types_1.EdgeType.BEZIER2] = bezier2,\n    _a);\nfunction toPointObject(point) {\n    return {\n        x: point[0],\n        y: point[1]\n    };\n}\nfunction toPointArray(point) {\n    return [point.x, point.y];\n}\nfunction distanceTo(start, end, p) {\n    var vector = vector_1.subtract2(start, p);\n    var lineDirection = vector_1.subtract2(end, start);\n    var lineNormal = [lineDirection[1], -lineDirection[0]];\n    var distance = Math.abs(vector_1.dot2(vector, lineNormal)) / vector_1.length2(lineDirection);\n    return distance;\n}\nvar TEST_RESOLUTION = 50;\nfunction edgePicking(props) {\n    var broadphase = props.broadphase, _a = props.minPickDistance, minPickDistance = _a === void 0 ? 0 : _a, scaleType = props.scaleType, type = props.type;\n    var interpolate = interpolation[props.type];\n    var boundsAccessor = function (edge) {\n        var edgeWidthStart = edge.widthStart / 2 + minPickDistance;\n        var edgeWidthEnd = edge.widthEnd / 2 + minPickDistance;\n        var bounds = new bounds_1.Bounds({\n            height: edge.widthStart,\n            width: edge.widthStart,\n            x: edge.start[0] - edgeWidthStart,\n            y: edge.start[1] - edgeWidthStart\n        });\n        bounds.encapsulate(new bounds_1.Bounds({\n            height: edge.widthEnd,\n            width: edge.widthEnd,\n            x: edge.end[0] - edgeWidthEnd,\n            y: edge.end[1] - edgeWidthEnd\n        }));\n        if (props.type === types_1.EdgeType.BEZIER) {\n            bounds.encapsulate({\n                x: edge.control[0][0],\n                y: edge.control[0][1]\n            });\n        }\n        else if (props.type === types_1.EdgeType.BEZIER2) {\n            bounds.encapsulate({\n                x: edge.control[0][0],\n                y: edge.control[0][1]\n            });\n            bounds.encapsulate({\n                x: edge.control[1][0],\n                y: edge.control[1][1]\n            });\n        }\n        if (broadphase === types_1.EdgeBroadphase.PASS_X) {\n            bounds.x = Number.MIN_SAFE_INTEGER / 2;\n            bounds.width = Number.MAX_SAFE_INTEGER;\n        }\n        if (broadphase === types_1.EdgeBroadphase.PASS_Y) {\n            bounds.y = Number.MIN_SAFE_INTEGER / 2;\n            bounds.height = Number.MAX_SAFE_INTEGER;\n        }\n        return bounds;\n    };\n    if (scaleType === types_1.EdgeScaleType.SCREEN_CURVE) {\n        return {\n            boundsAccessor: boundsAccessor,\n            hitTest: function (edge, point, view) {\n                point = view.worldToScreen(point);\n                var mouse = [point.x, point.y];\n                var closestIndex = 0;\n                var closestDistance = Number.MAX_VALUE;\n                var secondClosestIndex = 0;\n                var secondClosestDistance = Number.MAX_VALUE;\n                var start = view.worldToScreen(toPointObject(edge.start));\n                var end = view.worldToScreen(toPointObject(edge.end));\n                var control1 = [0, 0];\n                var control2 = [0, 0];\n                if (type === types_1.EdgeType.BEZIER) {\n                    control1 = vector_1.add2(toPointArray(start), edge.control[0]);\n                }\n                else if (type === types_1.EdgeType.BEZIER2) {\n                    control1 = vector_1.add2(toPointArray(start), edge.control[0]);\n                    control2 = vector_1.add2(toPointArray(end), edge.control[1]);\n                }\n                var startPoint = toPointArray(start);\n                var endPoint = toPointArray(end);\n                control1 = edge.control.length > 0 ? control1 : [0, 0];\n                control2 = edge.control.length > 1 ? control2 : [0, 0];\n                for (var i = 0; i < TEST_RESOLUTION; ++i) {\n                    var linePoint = interpolate(i / TEST_RESOLUTION, startPoint, endPoint, control1, control2);\n                    var distance = vector_1.length2(vector_1.subtract2(mouse, linePoint));\n                    if (distance < closestDistance) {\n                        secondClosestIndex = closestIndex;\n                        secondClosestDistance = closestDistance;\n                        closestIndex = i;\n                        closestDistance = distance;\n                    }\n                    else if (distance < secondClosestDistance) {\n                        secondClosestIndex = i;\n                        closestDistance = distance;\n                    }\n                }\n                var t = closestIndex / TEST_RESOLUTION;\n                var lineWidth = (edge.widthEnd - edge.widthStart) * t + edge.widthStart;\n                if (closestIndex === secondClosestIndex) {\n                    return false;\n                }\n                var startSegment = interpolate(closestIndex / TEST_RESOLUTION, startPoint, endPoint, control1, control2);\n                var endSegment = interpolate(secondClosestIndex / TEST_RESOLUTION, startPoint, endPoint, control1, control2);\n                closestDistance = distanceTo(startSegment, endSegment, mouse);\n                if (vector_1.dot2(vector_1.subtract2(endSegment, startSegment), vector_1.subtract2(mouse, startSegment)) < 0) {\n                    return false;\n                }\n                return closestDistance < lineWidth / 2.0 + minPickDistance;\n            }\n        };\n    }\n    return {\n        boundsAccessor: boundsAccessor,\n        hitTest: function (edge, point, _view) {\n            var mouse = [point.x, point.y];\n            var closestIndex = 0;\n            var closestDistance = Number.MAX_VALUE;\n            for (var i = 0; i < TEST_RESOLUTION; ++i) {\n                var linePoint = interpolate(i / TEST_RESOLUTION, edge.start, edge.end, edge.control.length > 0 ? edge.control[0] : [0, 0], edge.control.length > 1 ? edge.control[1] : [0, 0]);\n                var distance = vector_1.length2(vector_1.subtract2(mouse, linePoint));\n                if (distance < closestDistance) {\n                    closestIndex = i;\n                    closestDistance = distance;\n                }\n            }\n            var t = closestIndex / TEST_RESOLUTION;\n            var lineWidth = (edge.widthEnd - edge.widthStart) * t + edge.widthStart;\n            return closestDistance < lineWidth / 2.0;\n        }\n    };\n}\nexports.edgePicking = edgePicking;\nvar _a;\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Three = require(\"three\");\nvar layer_1 = require(\"../../surface/layer\");\nvar types_1 = require(\"../../types\");\nvar util_1 = require(\"../../util\");\nvar edge_picking_1 = require(\"./edge-picking\");\nvar types_2 = require(\"./types\");\nfunction toInstanceIOValue(value) {\n    return [value[0][0], value[0][1], value[1][0], value[1][1]];\n}\nvar pickVS = (_a = {},\n    _a[types_2.EdgeType.LINE] = require(\"./shader/edge-layer-line.vs\"),\n    _a[types_2.EdgeType.BEZIER] = require(\"./shader/edge-layer-bezier.vs\"),\n    _a[types_2.EdgeType.BEZIER2] = require(\"./shader/edge-layer-bezier2.vs\"),\n    _a);\nvar baseVS = require(\"./shader/edge-layer.vs\");\nvar screenVS = require(\"./shader/edge-layer-screen-curve.vs\");\nvar edgeFS = require(\"./shader/edge-layer.fs\");\nvar EdgeLayer = (function (_super) {\n    __extends(EdgeLayer, _super);\n    function EdgeLayer() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    EdgeLayer.prototype.getInstancePickingMethods = function () {\n        return edge_picking_1.edgePicking(this.props);\n    };\n    EdgeLayer.prototype.initShader = function () {\n        var _a = this.props, _b = _a.scaleFactor, scaleFactor = _b === void 0 ? function () { return 1; } : _b, type = _a.type, _c = _a.scaleType, scaleType = _c === void 0 ? types_2.EdgeScaleType.NONE : _c;\n        var MAX_SEGMENTS = type === types_2.EdgeType.LINE ? 2 : 50;\n        var vertexToNormal = (_d = {\n                0: 1\n            },\n            _d[MAX_SEGMENTS * 2 + 2] = -1,\n            _d);\n        var vertexInterpolation = (_e = {\n                0: 0\n            },\n            _e[MAX_SEGMENTS * 2 + 2] = 1,\n            _e);\n        var sign = 1;\n        for (var i = 0; i < MAX_SEGMENTS * 2; ++i) {\n            vertexToNormal[i + 1] = sign;\n            vertexInterpolation[i + 1] = Math.floor(i / 2) / (MAX_SEGMENTS - 1);\n            sign *= -1;\n        }\n        var vs = util_1.shaderTemplate(scaleType === types_2.EdgeScaleType.NONE ? baseVS : screenVS, {\n            attributes: \"${attributes}\",\n            interpolation: pickVS[type]\n        }, {\n            name: \"Edge Layer\",\n            values: [\"interpolation\"]\n        });\n        return {\n            fs: edgeFS,\n            instanceAttributes: [\n                {\n                    block: 0,\n                    blockIndex: types_1.InstanceBlockIndex.ONE,\n                    name: \"start\",\n                    size: types_1.InstanceAttributeSize.TWO,\n                    update: function (o) { return o.start; }\n                },\n                {\n                    block: 0,\n                    blockIndex: types_1.InstanceBlockIndex.THREE,\n                    name: \"end\",\n                    size: types_1.InstanceAttributeSize.TWO,\n                    update: function (o) { return o.end; }\n                },\n                {\n                    block: 1,\n                    blockIndex: types_1.InstanceBlockIndex.ONE,\n                    name: \"widthStart\",\n                    size: types_1.InstanceAttributeSize.ONE,\n                    update: function (o) { return [o.widthStart]; }\n                },\n                {\n                    block: 1,\n                    blockIndex: types_1.InstanceBlockIndex.TWO,\n                    name: \"widthEnd\",\n                    size: types_1.InstanceAttributeSize.ONE,\n                    update: function (o) { return [o.widthEnd]; }\n                },\n                {\n                    block: 1,\n                    blockIndex: types_1.InstanceBlockIndex.THREE,\n                    name: \"depth\",\n                    size: types_1.InstanceAttributeSize.ONE,\n                    update: function (o) { return [o.depth]; }\n                },\n                {\n                    block: 2,\n                    blockIndex: types_1.InstanceBlockIndex.ONE,\n                    name: \"colorStart\",\n                    size: types_1.InstanceAttributeSize.FOUR,\n                    update: function (o) { return o.colorStart; }\n                },\n                {\n                    block: 3,\n                    blockIndex: types_1.InstanceBlockIndex.ONE,\n                    name: \"colorEnd\",\n                    size: types_1.InstanceAttributeSize.FOUR,\n                    update: function (o) { return o.colorEnd; }\n                },\n                type === types_2.EdgeType.LINE\n                    ? {\n                        block: 4,\n                        blockIndex: types_1.InstanceBlockIndex.ONE,\n                        name: \"control\",\n                        size: types_1.InstanceAttributeSize.FOUR,\n                        update: function (_o) { return [0, 0, 0, 0]; }\n                    }\n                    : null,\n                type === types_2.EdgeType.BEZIER\n                    ? {\n                        block: 4,\n                        blockIndex: types_1.InstanceBlockIndex.ONE,\n                        name: \"control\",\n                        size: types_1.InstanceAttributeSize.FOUR,\n                        update: function (o) { return [o.control[0][0], o.control[0][1], 0, 0]; }\n                    }\n                    : null,\n                type === types_2.EdgeType.BEZIER2\n                    ? {\n                        block: 4,\n                        blockIndex: types_1.InstanceBlockIndex.ONE,\n                        name: \"control\",\n                        size: types_1.InstanceAttributeSize.FOUR,\n                        update: function (o) { return toInstanceIOValue(o.control); }\n                    }\n                    : null\n            ],\n            uniforms: [\n                {\n                    name: \"scaleFactor\",\n                    size: types_1.UniformSize.ONE,\n                    update: function (_uniform) { return [scaleFactor()]; }\n                }\n            ],\n            vertexAttributes: [\n                {\n                    name: \"position\",\n                    size: types_1.VertexAttributeSize.THREE,\n                    update: function (vertex) { return [\n                        vertexToNormal[vertex],\n                        vertexInterpolation[vertex],\n                        MAX_SEGMENTS * 2\n                    ]; }\n                }\n            ],\n            vertexCount: MAX_SEGMENTS * 2 + 2,\n            vs: vs.shader\n        };\n        var _d, _e;\n    };\n    EdgeLayer.prototype.getModelType = function () {\n        return {\n            drawMode: Three.TriangleStripDrawMode,\n            modelType: Three.Mesh\n        };\n    };\n    EdgeLayer.prototype.getMaterialOptions = function () {\n        return {\n            premultipliedAlpha: true,\n            transparent: true\n        };\n    };\n    EdgeLayer.defaultProps = {\n        broadphase: types_2.EdgeBroadphase.ALL,\n        data: new util_1.DataProvider([]),\n        key: \"none\",\n        scaleType: types_2.EdgeScaleType.NONE,\n        type: types_2.EdgeType.LINE\n    };\n    return EdgeLayer;\n}(layer_1.Layer));\nexports.EdgeLayer = EdgeLayer;\nvar _a;\n","\"use strict\";\nfunction __export(m) {\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n}\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__export(require(\"./edge-layer\"));\n__export(require(\"./edge-instance\"));\n__export(require(\"./types\"));\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar mobx_1 = require(\"mobx\");\nvar instance_1 = require(\"../../util/instance\");\nvar CircleInstance = (function (_super) {\n    __extends(CircleInstance, _super);\n    function CircleInstance(options) {\n        var _this = _super.call(this, options) || this;\n        _this.color = [1.0, 1.0, 1.0, 1.0];\n        _this.radius = 0;\n        _this.x = 0;\n        _this.y = 0;\n        _this.depth = 0;\n        _this.color = options.color || _this.color;\n        _this.radius = options.radius || _this.radius;\n        _this.x = options.x || _this.x;\n        _this.y = options.y || _this.y;\n        _this.depth = options.depth || _this.depth;\n        return _this;\n    }\n    Object.defineProperty(CircleInstance.prototype, \"width\", {\n        get: function () {\n            return this.radius * 2;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(CircleInstance.prototype, \"height\", {\n        get: function () {\n            return this.radius * 2;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    __decorate([\n        mobx_1.observable\n    ], CircleInstance.prototype, \"color\", void 0);\n    __decorate([\n        mobx_1.observable\n    ], CircleInstance.prototype, \"radius\", void 0);\n    __decorate([\n        mobx_1.observable\n    ], CircleInstance.prototype, \"x\", void 0);\n    __decorate([\n        mobx_1.observable\n    ], CircleInstance.prototype, \"y\", void 0);\n    __decorate([\n        mobx_1.observable\n    ], CircleInstance.prototype, \"depth\", void 0);\n    __decorate([\n        mobx_1.computed\n    ], CircleInstance.prototype, \"width\", null);\n    __decorate([\n        mobx_1.computed\n    ], CircleInstance.prototype, \"height\", null);\n    return CircleInstance;\n}(instance_1.Instance));\nexports.CircleInstance = CircleInstance;\n","module.exports = \"precision highp float;\\n\\nvarying vec4 vertexColor;\\nvarying float edgeSharpness;\\nvarying float edgeSharpnessBase;\\nvarying vec2 pointCoord;\\n\\nvoid main() {\\n  ${attributes}\\n\\n  vertexColor = color * color.a;\\n  float size = radius * scaleFactor;\\n  edgeSharpness = mix(0.8, 0.0, min((size * 6.0 * pixelRatio) / (45.0 * pixelRatio), 1.0));\\n  edgeSharpnessBase = mix(0.1, 0.0, min((size * 6.0 * pixelRatio) / (45.0 * pixelRatio), 1.0));\\n  pointCoord = (position.xy + vec2(1.0, 1.0)) / 2.0;\\n\\n  // Center within clip space\\n  vec4 clipCenter = clipSpace(vec3(center, depth));\\n  // Center in screen space\\n  vec2 screenCenter = (clipCenter.xy + vec2(1.0, 1.0)) * vec2(0.5, 0.5) * viewSize;\\n  // Position in screen space\\n  vec2 vertex = (position.xy * size) + screenCenter;\\n  // Position back to clip space\\n  gl_Position = vec4((vertex / viewSize) * vec2(2.0, 2.0) - vec2(1.0, 1.0), clipCenter.zw);\\n}\\n\"","module.exports = \"precision highp float;\\n\\nvarying vec4 vertexColor;\\nvarying float edgeSharpness;\\nvarying float edgeSharpnessBase;\\nvarying vec2 pointCoord;\\n\\nfloat circle(vec2 coord, float radius){\\n  vec2 dist = coord - vec2(0.5);\\n\\n  return 1.0 - smoothstep(\\n    radius - (radius * edgeSharpness),\\n    radius + (radius * edgeSharpnessBase),\\n    dot(dist, dist) * 4.0\\n  );\\n}\\n\\nvoid main() {\\n  float step_factor = circle(pointCoord, 1.0);\\n  gl_FragColor = mix(\\n    vec4(0.0, 0.0, 0.0, 0.0),\\n    vertexColor,\\n    step_factor\\n  );\\n}\\n\"","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Three = require(\"three\");\nvar primitives_1 = require(\"../../primitives\");\nvar layer_1 = require(\"../../surface/layer\");\nvar types_1 = require(\"../../types\");\nvar util_1 = require(\"../../util\");\nvar CircleLayer = (function (_super) {\n    __extends(CircleLayer, _super);\n    function CircleLayer() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    CircleLayer.prototype.getInstancePickingMethods = function () {\n        var _this = this;\n        var noScaleFactor = function () { return 1; };\n        return {\n            boundsAccessor: function (circle) {\n                return new primitives_1.Bounds({\n                    height: circle.radius * 2,\n                    width: circle.radius * 2,\n                    x: circle.x - circle.radius,\n                    y: circle.y - circle.radius\n                });\n            },\n            hitTest: function (circle, point, view) {\n                var circleScreenCenter = view.worldToScreen(circle);\n                var mouseScreen = view.worldToScreen(point);\n                var r = circle.radius * (_this.props.scaleFactor || noScaleFactor)();\n                var delta = [\n                    mouseScreen.x - circleScreenCenter.x,\n                    mouseScreen.y - circleScreenCenter.y\n                ];\n                return delta[0] * delta[0] + delta[1] * delta[1] < r * r;\n            }\n        };\n    };\n    CircleLayer.prototype.initShader = function () {\n        var scaleFactor = this.props.scaleFactor || (function () { return 1; });\n        var animations = this.props.animate || {};\n        var animateCenter = animations.center, animateRadius = animations.radius, animateColor = animations.color;\n        var vertexToNormal = {\n            0: 1,\n            1: 1,\n            2: -1,\n            3: 1,\n            4: -1,\n            5: -1\n        };\n        var vertexToSide = {\n            0: -1,\n            1: -1,\n            2: -1,\n            3: 1,\n            4: 1,\n            5: 1\n        };\n        return {\n            fs: require(\"./circle-layer.fs\"),\n            instanceAttributes: [\n                {\n                    block: 0,\n                    blockIndex: types_1.InstanceBlockIndex.ONE,\n                    easing: animateCenter,\n                    name: \"center\",\n                    size: types_1.InstanceAttributeSize.TWO,\n                    update: function (circle) { return [circle.x, circle.y]; }\n                },\n                {\n                    block: 0,\n                    blockIndex: types_1.InstanceBlockIndex.THREE,\n                    easing: animateRadius,\n                    name: \"radius\",\n                    size: types_1.InstanceAttributeSize.ONE,\n                    update: function (circle) { return [circle.radius]; }\n                },\n                {\n                    block: 0,\n                    blockIndex: types_1.InstanceBlockIndex.FOUR,\n                    name: \"depth\",\n                    size: types_1.InstanceAttributeSize.ONE,\n                    update: function (circle) { return [circle.depth]; }\n                },\n                {\n                    block: 1,\n                    blockIndex: types_1.InstanceBlockIndex.ONE,\n                    easing: animateColor,\n                    name: \"color\",\n                    size: types_1.InstanceAttributeSize.FOUR,\n                    update: function (circle) { return circle.color; }\n                }\n            ],\n            uniforms: [\n                {\n                    name: \"scaleFactor\",\n                    size: types_1.UniformSize.ONE,\n                    update: function (_uniform) { return [scaleFactor()]; }\n                }\n            ],\n            vertexAttributes: [\n                {\n                    name: \"position\",\n                    size: types_1.VertexAttributeSize.THREE,\n                    update: function (vertex) { return [\n                        vertexToNormal[vertex],\n                        vertexToSide[vertex],\n                        0\n                    ]; }\n                }\n            ],\n            vertexCount: 6,\n            vs: require(\"./circle-layer.vs\")\n        };\n    };\n    CircleLayer.prototype.getModelType = function () {\n        return {\n            drawMode: Three.TriangleStripDrawMode,\n            modelType: Three.Mesh\n        };\n    };\n    CircleLayer.prototype.getMaterialOptions = function () {\n        return {\n            premultipliedAlpha: true,\n            transparent: true\n        };\n    };\n    CircleLayer.defaultProps = {\n        data: new util_1.DataProvider([]),\n        fadeOutOversized: -1,\n        key: \"\",\n        scaleFactor: function () { return 1; }\n    };\n    return CircleLayer;\n}(layer_1.Layer));\nexports.CircleLayer = CircleLayer;\n","\"use strict\";\nfunction __export(m) {\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n}\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__export(require(\"./circle-layer\"));\n__export(require(\"./circle-instance\"));\n","\"use strict\";\nfunction __export(m) {\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n}\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__export(require(\"./circles\"));\n__export(require(\"./edges\"));\n__export(require(\"./images\"));\n__export(require(\"./labels\"));\n__export(require(\"./rectangle\"));\n__export(require(\"./rings\"));\n__export(require(\"./types\"));\n","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = y[op[0] & 2 ? \"return\" : op[0] ? \"throw\" : \"next\"]) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [0, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar label_atlas_resource_1 = require(\"./label-atlas-resource\");\nfunction toInstanceIOValue(texture) {\n    if (!texture) {\n        return [0, 0, 0, 0];\n    }\n    return [\n        texture.atlasTL.x,\n        texture.atlasTL.y,\n        texture.atlasBR.x,\n        texture.atlasBR.y\n    ];\n}\nvar AtlasResourceManager = (function () {\n    function AtlasResourceManager(options) {\n        this.targetAtlas = \"\";\n        this.requestQueue = new Map();\n        this.requestLookup = new Map();\n        this.atlasManager = options.atlasManager;\n    }\n    AtlasResourceManager.prototype.dequeueRequests = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            var didDequeue, _loop_1, this_1, _i, _a, _b, targetAtlas, resources;\n            return __generator(this, function (_c) {\n                switch (_c.label) {\n                    case 0:\n                        didDequeue = false;\n                        _loop_1 = function (targetAtlas, resources) {\n                            var requests, atlasRequests_1;\n                            return __generator(this, function (_a) {\n                                switch (_a.label) {\n                                    case 0:\n                                        if (!(resources.length > 0)) return [3, 2];\n                                        didDequeue = true;\n                                        requests = resources.slice(0);\n                                        resources.length = 0;\n                                        return [4, this_1.atlasManager.updateAtlas(targetAtlas, requests)];\n                                    case 1:\n                                        _a.sent();\n                                        atlasRequests_1 = this_1.requestLookup.get(targetAtlas);\n                                        if (atlasRequests_1) {\n                                            requests.forEach(function (resource) {\n                                                var request = atlasRequests_1.get(resource);\n                                                atlasRequests_1.delete(resource);\n                                                if (request) {\n                                                    for (var _i = 0, request_1 = request; _i < request_1.length; _i++) {\n                                                        var _a = request_1[_i], layer = _a[0], instance = _a[1];\n                                                        if (layer.uniformManager.getUniforms(instance)) {\n                                                            instance.active = true;\n                                                        }\n                                                    }\n                                                }\n                                            });\n                                        }\n                                        _a.label = 2;\n                                    case 2: return [2];\n                                }\n                            });\n                        };\n                        this_1 = this;\n                        _i = 0, _a = Array.from(this.requestQueue.entries());\n                        _c.label = 1;\n                    case 1:\n                        if (!(_i < _a.length)) return [3, 4];\n                        _b = _a[_i], targetAtlas = _b[0], resources = _b[1];\n                        return [5, _loop_1(targetAtlas, resources)];\n                    case 2:\n                        _c.sent();\n                        _c.label = 3;\n                    case 3:\n                        _i++;\n                        return [3, 1];\n                    case 4: return [2, didDequeue];\n                }\n            });\n        });\n    };\n    AtlasResourceManager.prototype.destroy = function () {\n        this.atlasManager.destroy();\n    };\n    AtlasResourceManager.prototype.getAtlasTexture = function (key) {\n        var atlas = this.atlasManager.getAtlasTexture(key);\n        if (atlas) {\n            return atlas.texture;\n        }\n        return null;\n    };\n    AtlasResourceManager.prototype.request = function (layer, instance, resource) {\n        var texture = resource.texture;\n        if (texture) {\n            return toInstanceIOValue(texture);\n        }\n        if (resource instanceof label_atlas_resource_1.LabelAtlasResource) {\n            if (!resource.label.text) {\n                return toInstanceIOValue(texture);\n            }\n        }\n        var atlasRequests = this.requestLookup.get(this.targetAtlas);\n        if (atlasRequests) {\n            var existingRequests = atlasRequests.get(resource);\n            if (existingRequests) {\n                existingRequests.push([layer, instance]);\n                instance.active = false;\n                return toInstanceIOValue(texture);\n            }\n        }\n        else {\n            atlasRequests = new Map();\n            this.requestLookup.set(this.targetAtlas, atlasRequests);\n        }\n        instance.active = false;\n        var requests = this.requestQueue.get(this.targetAtlas);\n        if (!requests) {\n            requests = [];\n            this.requestQueue.set(this.targetAtlas, requests);\n        }\n        requests.push(resource);\n        atlasRequests.set(resource, [[layer, instance]]);\n        return toInstanceIOValue(texture);\n    };\n    AtlasResourceManager.prototype.setTargetAtlas = function (target) {\n        this.targetAtlas = target;\n    };\n    return AtlasResourceManager;\n}());\nexports.AtlasResourceManager = AtlasResourceManager;\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar types_1 = require(\"../../types\");\nvar event_manager_1 = require(\"../event-manager\");\nfunction isDefined(val) {\n    return Boolean(val);\n}\nvar LayerMouseEvents = (function (_super) {\n    __extends(LayerMouseEvents, _super);\n    function LayerMouseEvents(sceneViews) {\n        var _this = _super.call(this) || this;\n        _this.isOver = new Map();\n        _this.sceneViews = sceneViews;\n        return _this;\n    }\n    LayerMouseEvents.prototype.getSceneViewsUnderMouse = function (e) {\n        var sceneViewByViewId = new Map();\n        for (var _i = 0, _a = this.sceneViews; _i < _a.length; _i++) {\n            var sceneView = _a[_i];\n            sceneViewByViewId.set(sceneView.view.id, sceneView);\n        }\n        return e.viewsUnderMouse\n            .map(function (viewItem) { return sceneViewByViewId.get(viewItem.view.id); })\n            .filter(isDefined);\n    };\n    LayerMouseEvents.prototype.getMouseByViewId = function (e) {\n        var viewMouseByViewId = new Map();\n        for (var _i = 0, _a = e.viewsUnderMouse; _i < _a.length; _i++) {\n            var viewItem = _a[_i];\n            viewMouseByViewId.set(viewItem.view.id, viewItem.mouse);\n        }\n        return viewMouseByViewId;\n    };\n    LayerMouseEvents.prototype.handleClick = function (e, button) {\n        this.handleInteraction(e, function (layer, view, mouse) {\n            return layer.interactions.handleMouseClick(view, mouse, button);\n        });\n    };\n    LayerMouseEvents.prototype.handleDrag = function (e, _drag) {\n        this.handleInteraction(e, function (layer, view, mouse) {\n            return layer.interactions.handleMouseDrag(view, mouse);\n        });\n    };\n    LayerMouseEvents.prototype.handleInteraction = function (e, callback) {\n        var sceneViews = this.getSceneViewsUnderMouse(e);\n        var viewMouseByViewId = this.getMouseByViewId(e);\n        for (var _i = 0, sceneViews_1 = sceneViews; _i < sceneViews_1.length; _i++) {\n            var sceneView = sceneViews_1[_i];\n            this.handleSceneView(sceneView, viewMouseByViewId, callback);\n        }\n        return sceneViews;\n    };\n    LayerMouseEvents.prototype.handleMouseDown = function (e, button) {\n        this.handleInteraction(e, function (layer, view, mouse) {\n            return layer.interactions.handleMouseDown(view, mouse, button);\n        });\n    };\n    LayerMouseEvents.prototype.handleMouseUp = function (e, button) {\n        this.handleInteraction(e, function (layer, view, mouse) {\n            return layer.interactions.handleMouseUp(view, mouse, button);\n        });\n    };\n    LayerMouseEvents.prototype.handleMouseOver = function (_e) {\n    };\n    LayerMouseEvents.prototype.handleMouseOut = function (e) {\n        var _this = this;\n        var viewMouseByViewId = this.getMouseByViewId(e);\n        var screen = e.screen.mouse;\n        this.isOver.forEach(function (_flag, sceneView) {\n            viewMouseByViewId.set(sceneView.view.id, sceneView.view.screenToView(screen));\n            _this.handleSceneView(sceneView, viewMouseByViewId, function (layer, view, mouse) {\n                return layer.interactions.handleMouseOut(view, mouse);\n            });\n        });\n        this.isOver.clear();\n    };\n    LayerMouseEvents.prototype.handleMouseMove = function (e) {\n        var _this = this;\n        var allSceneViews = this.handleInteraction(e, function (layer, view, mouse) {\n            return layer.interactions.handleMouseMove(view, mouse);\n        });\n        var viewMouseByViewId = this.getMouseByViewId(e);\n        var screen = e.screen.mouse;\n        var currentSceneViews = new Map();\n        allSceneViews.forEach(function (v) { return currentSceneViews.set(v, true); });\n        currentSceneViews.forEach(function (_flag, sceneView) {\n            if (!_this.isOver.get(sceneView)) {\n                _this.handleSceneView(sceneView, viewMouseByViewId, function (layer, view, mouse) {\n                    return layer.interactions.handleMouseOver(view, mouse);\n                });\n            }\n        });\n        this.isOver.forEach(function (_flag, sceneView) {\n            if (!currentSceneViews.get(sceneView)) {\n                viewMouseByViewId.set(sceneView.view.id, sceneView.view.screenToView(screen));\n                _this.handleSceneView(sceneView, viewMouseByViewId, function (layer, view, mouse) { return layer.interactions.handleMouseOut(view, mouse); });\n            }\n        });\n        this.isOver = currentSceneViews;\n    };\n    LayerMouseEvents.prototype.handleSceneView = function (sceneView, viewMouseByViewId, callback) {\n        var view = sceneView.view;\n        var mouse = viewMouseByViewId.get(view.id);\n        if (mouse) {\n            for (var _i = 0, _a = sceneView.scene.layers; _i < _a.length; _i++) {\n                var layer = _a[_i];\n                if (layer.picking && layer.picking.type === types_1.PickType.ALL) {\n                    callback(layer, view, mouse);\n                }\n            }\n        }\n    };\n    LayerMouseEvents.prototype.handleWheel = function (_e) {\n    };\n    return LayerMouseEvents;\n}(event_manager_1.EventManager));\nexports.LayerMouseEvents = LayerMouseEvents;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Three = require(\"three\");\nvar generate_layer_model_1 = require(\"../surface/generate-layer-model\");\nvar make_instance_uniform_name_1 = require(\"./make-instance-uniform-name\");\nvar InstanceUniformManager = (function () {\n    function InstanceUniformManager(layer, scene) {\n        this.buffers = [];\n        this.availableClusters = [];\n        this.instanceToCluster = new Map();\n        this.clusterToBuffer = new Map();\n        this.layer = layer;\n        var maxUniformBlock = 0;\n        layer.instanceAttributes.forEach(function (attributes) {\n            maxUniformBlock = Math.max(attributes.block, maxUniformBlock);\n        });\n        this.uniformBlocksPerInstance = maxUniformBlock + 1;\n        this.scene = scene;\n    }\n    InstanceUniformManager.prototype.add = function (instance) {\n        if (this.availableClusters.length <= 0) {\n            this.makeNewBuffer();\n        }\n        var cluster = this.availableClusters.shift();\n        if (cluster) {\n            this.instanceToCluster.set(instance, cluster);\n        }\n        else {\n            console.warn(\"No valid cluster available for instance added to uniform manager.\");\n        }\n        return cluster;\n    };\n    InstanceUniformManager.prototype.destroy = function () {\n        this.buffers.forEach(function (buffer) {\n            buffer.geometry.dispose();\n            buffer.material.dispose();\n        });\n    };\n    InstanceUniformManager.prototype.getUniforms = function (instance) {\n        return this.instanceToCluster.get(instance);\n    };\n    InstanceUniformManager.prototype.remove = function (instance) {\n        var cluster = this.instanceToCluster.get(instance);\n        if (cluster) {\n            this.instanceToCluster.delete(instance);\n            this.availableClusters.unshift(cluster);\n        }\n        return cluster;\n    };\n    InstanceUniformManager.prototype.removeFromScene = function () {\n        var _this = this;\n        this.buffers.forEach(function (buffer) {\n            _this.scene.container.remove(buffer.model);\n        });\n        delete this.scene;\n    };\n    InstanceUniformManager.prototype.setScene = function (scene) {\n        var _this = this;\n        this.buffers.forEach(function (buffer) {\n            _this.scene.container.add(buffer.model);\n        });\n        this.scene = scene;\n    };\n    InstanceUniformManager.prototype.makeNewBuffer = function () {\n        var newGeometry = new Three.BufferGeometry();\n        this.layer.vertexAttributes.forEach(function (attribute) {\n            if (attribute.materialAttribute) {\n                newGeometry.addAttribute(attribute.name, attribute.materialAttribute);\n            }\n        });\n        newGeometry.drawRange.start = 0;\n        newGeometry.drawRange.count =\n            this.layer.maxInstancesPerBuffer * this.layer.instanceVertexCount;\n        var newMaterial = this.layer.material.clone();\n        var newModel = generate_layer_model_1.generateLayerModel(this.layer, newGeometry, newMaterial);\n        newModel.frustumCulled = false;\n        var buffer = {\n            activeInstances: [],\n            clusters: [],\n            firstInstance: 0,\n            geometry: newGeometry,\n            lastInstance: 0,\n            material: newMaterial,\n            model: newModel\n        };\n        this.buffers.push(buffer);\n        var uniformIndex = 0;\n        var uniformName = make_instance_uniform_name_1.makeInstanceUniformNameArray();\n        var instanceData = newMaterial.uniforms[uniformName];\n        instanceData.value = instanceData.value.map(function () { return new Three.Vector4(0.0, 0.0, 0.0, 0.0); });\n        for (var i = 0, end = this.layer.maxInstancesPerBuffer; i < end; ++i) {\n            var cluster = {\n                instanceIndex: i,\n                uniform: instanceData,\n                uniformRange: [uniformIndex, 0]\n            };\n            uniformIndex += this.uniformBlocksPerInstance;\n            cluster.uniformRange[1] = uniformIndex;\n            buffer.clusters.push(cluster);\n            this.availableClusters.push(cluster);\n            this.clusterToBuffer.set(cluster, buffer);\n        }\n        for (var i = 0, end = this.layer.uniforms.length; i < end; ++i) {\n            var uniform = this.layer.uniforms[i];\n            uniform.materialUniforms.push(newMaterial.uniforms[uniform.name]);\n        }\n        if (this.scene) {\n            this.scene.container.add(buffer.model);\n        }\n    };\n    return InstanceUniformManager;\n}());\nexports.InstanceUniformManager = InstanceUniformManager;\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar bounds_1 = require(\"../primitives/bounds\");\nvar maxPopulation = 5;\nvar maxDepth = 10;\nfunction filterQuery(type, queryValues) {\n    var filtered = [];\n    queryValues.forEach(function (obj) {\n        if (type.find(function (t) { return obj instanceof t; })) {\n            filtered.push(obj);\n        }\n    });\n    return filtered;\n}\nexports.filterQuery = filterQuery;\nvar Quadrants = (function () {\n    function Quadrants(bounds, depth) {\n        var mid = bounds.mid;\n        this.TL = new Node(bounds.x, mid.x, bounds.y, mid.y, depth);\n        this.TR = new Node(mid.x, bounds.right, bounds.y, mid.y, depth);\n        this.BL = new Node(bounds.x, mid.x, mid.y, bounds.bottom, depth);\n        this.BR = new Node(mid.x, bounds.right, mid.y, bounds.bottom, depth);\n    }\n    Quadrants.prototype.destroy = function () {\n        this.TL.destroy();\n        this.TR.destroy();\n        this.BL.destroy();\n        this.BR.destroy();\n        delete this.TL;\n        delete this.TR;\n        delete this.BL;\n        delete this.BR;\n    };\n    return Quadrants;\n}());\nexports.Quadrants = Quadrants;\nvar Node = (function () {\n    function Node(left, right, top, bottom, depth) {\n        this.children = [];\n        this.depth = 0;\n        if (arguments.length >= 4) {\n            this.bounds = new bounds_1.Bounds({\n                height: top - bottom,\n                width: right - left,\n                x: left,\n                y: top\n            });\n        }\n        else {\n            this.bounds = new bounds_1.Bounds({\n                height: 1,\n                width: 1,\n                x: 0,\n                y: 0\n            });\n        }\n        this.depth = depth || 0;\n    }\n    Node.prototype.destroy = function () {\n        delete this.children;\n        delete this.bounds;\n        if (this.nodes) {\n            this.nodes.destroy();\n            delete this.nodes;\n        }\n    };\n    Node.prototype.add = function (child, props) {\n        if (child.isInside(this.bounds)) {\n            return this.doAdd(child);\n        }\n        else {\n            this.cover(child);\n            return this.add(child, props);\n        }\n    };\n    Node.prototype.addAll = function (children, childrenProps) {\n        var _this = this;\n        childrenProps = childrenProps || [];\n        var minX = Number.MAX_VALUE;\n        var minY = Number.MAX_VALUE;\n        var maxX = -Number.MAX_VALUE;\n        var maxY = -Number.MAX_VALUE;\n        children.forEach(function (child) {\n            if (child.x < minX) {\n                minX = child.x;\n            }\n            if (child.right > maxX) {\n                maxX = child.right;\n            }\n            if (child.bottom > maxY) {\n                maxY = child.bottom;\n            }\n            if (child.y < minY) {\n                minY = child.y;\n            }\n        });\n        this.cover(new bounds_1.Bounds({\n            height: maxY - minY,\n            width: maxX - minX,\n            x: minX,\n            y: minY\n        }));\n        children.forEach(function (child) { return _this.doAdd(child); });\n    };\n    Node.prototype.cover = function (bounds) {\n        var _this = this;\n        if (bounds.isInside(this.bounds)) {\n            return;\n        }\n        this.bounds.encapsulate(bounds);\n        this.bounds.x -= 1;\n        this.bounds.y -= 1;\n        this.bounds.width += 2;\n        this.bounds.height += 4;\n        var allChildren = this.gatherChildren([]);\n        if (this.nodes) {\n            this.nodes.destroy();\n            delete this.nodes;\n        }\n        allChildren.forEach(function (child) { return _this.doAdd(child); });\n    };\n    Node.prototype.doAdd = function (child) {\n        if (this.nodes) {\n            if (child.isInside(this.nodes.TL.bounds)) {\n                return this.nodes.TL.doAdd(child);\n            }\n            if (child.isInside(this.nodes.TR.bounds)) {\n                return this.nodes.TR.doAdd(child);\n            }\n            if (child.isInside(this.nodes.BL.bounds)) {\n                return this.nodes.BL.doAdd(child);\n            }\n            if (child.isInside(this.nodes.BR.bounds)) {\n                return this.nodes.BR.doAdd(child);\n            }\n            this.children.push(child);\n            return true;\n        }\n        else if (child.isInside(this.bounds)) {\n            this.children.push(child);\n            if (this.children.length > maxPopulation && this.depth < maxDepth) {\n                this.split();\n            }\n            return true;\n        }\n        if (isNaN(child.width + child.height + child.x + child.y)) {\n            console.error(\"Child did not fit into bounds because a dimension is NaN\", child);\n        }\n        else if (child.area === 0) {\n            console.error(\"Child did not fit into bounds because the area is zero\", child);\n        }\n        return true;\n    };\n    Node.prototype.gatherChildren = function (list) {\n        list = list.concat(this.children);\n        if (this.nodes) {\n            this.nodes.TL.gatherChildren(list);\n            this.nodes.TR.gatherChildren(list);\n            this.nodes.BL.gatherChildren(list);\n            this.nodes.BR.gatherChildren(list);\n        }\n        return list;\n    };\n    Node.prototype.query = function (bounds, visit) {\n        if (bounds instanceof bounds_1.Bounds) {\n            if (bounds.hitBounds(this.bounds)) {\n                return this.queryBounds(bounds, [], visit);\n            }\n            return [];\n        }\n        if (this.bounds.containsPoint(bounds)) {\n            return this.queryPoint(bounds, [], visit);\n        }\n        return [];\n    };\n    Node.prototype.queryBounds = function (b, list, visit) {\n        this.children.forEach(function (c) {\n            if (c.hitBounds(b)) {\n                list.push(c);\n            }\n        });\n        if (visit) {\n            visit(this);\n        }\n        if (this.nodes) {\n            if (b.hitBounds(this.nodes.TL.bounds)) {\n                this.nodes.TL.queryBounds(b, list, visit);\n            }\n            if (b.hitBounds(this.nodes.TR.bounds)) {\n                this.nodes.TR.queryBounds(b, list, visit);\n            }\n            if (b.hitBounds(this.nodes.BL.bounds)) {\n                this.nodes.BL.queryBounds(b, list, visit);\n            }\n            if (b.hitBounds(this.nodes.BR.bounds)) {\n                this.nodes.BR.queryBounds(b, list, visit);\n            }\n        }\n        return list;\n    };\n    Node.prototype.queryPoint = function (p, list, visit) {\n        this.children.forEach(function (c) {\n            if (c.containsPoint(p)) {\n                list.push(c);\n            }\n        });\n        if (visit) {\n            visit(this);\n        }\n        if (this.nodes) {\n            if (this.nodes.TL.bounds.containsPoint(p)) {\n                this.nodes.TL.queryPoint(p, list, visit);\n            }\n            if (this.nodes.TR.bounds.containsPoint(p)) {\n                this.nodes.TR.queryPoint(p, list, visit);\n            }\n            if (this.nodes.BL.bounds.containsPoint(p)) {\n                this.nodes.BL.queryPoint(p, list, visit);\n            }\n            if (this.nodes.BR.bounds.containsPoint(p)) {\n                this.nodes.BR.queryPoint(p, list, visit);\n            }\n        }\n        return list;\n    };\n    Node.prototype.split = function () {\n        var allChildren = this.gatherChildren([]);\n        this.nodes = new Quadrants(this.bounds, this.depth + 1);\n        this.children = [];\n        while (allChildren.length > 0) {\n            var child = allChildren.pop();\n            if (child)\n                this.doAdd(child);\n        }\n    };\n    Node.prototype.visit = function (cb) {\n        var finished = Boolean(cb(this));\n        if (this.nodes && !finished) {\n            this.nodes.TL.visit(cb);\n            this.nodes.TR.visit(cb);\n            this.nodes.BL.visit(cb);\n            this.nodes.BR.visit(cb);\n        }\n    };\n    return Node;\n}());\nexports.Node = Node;\nvar QuadTree = (function (_super) {\n    __extends(QuadTree, _super);\n    function QuadTree() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    return QuadTree;\n}(Node));\nexports.QuadTree = QuadTree;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar data_bounds_1 = require(\"../util/data-bounds\");\nfunction value(val, ref, scaleRatio) {\n    var parse = \"\" + val;\n    var num = parseFloat(parse);\n    if (isNaN(num)) {\n        return 0;\n    }\n    if (parse.indexOf(\"%\") > -1) {\n        return num / 100.0 * ref;\n    }\n    return num * scaleRatio;\n}\nfunction getAbsolutePositionBounds(item, reference, scaleRatio) {\n    if (reference.width === 0 || reference.height === 0) {\n        console.warn(\"An AbsolutePosition evaluated to invalid dimensions.\", \"Please ensure that the object provided and the reference has valid dimensions\", \"to produce dimensions with width and height that are non-zero.\", \"item:\", item, \"reference:\", reference.toString());\n    }\n    var bounds = data_bounds_1.DataBounds.emptyBounds();\n    var width;\n    var height;\n    if (item.width) {\n        bounds.width = value(item.width, reference.width, scaleRatio);\n        if (item.left !== undefined) {\n            bounds.x = value(item.left, reference.width, scaleRatio);\n        }\n        else if (item.right !== undefined) {\n            bounds.x =\n                reference.width -\n                    value(item.right, reference.width, scaleRatio) -\n                    bounds.width;\n        }\n    }\n    else {\n        var left = value(item.left || 0, reference.width, scaleRatio);\n        var right = reference.width - value(item.right || 0, reference.width, scaleRatio);\n        width = right - left;\n        if (width < 0) {\n            console.warn(\"An AbsolutePosition evaluated to invalid dimensions.\", \"Please ensure that the object provided and the reference has valid dimensions\", \"to produce dimensions with width and height that are greater than zero.\", \"item:\", item, \"reference:\", reference.toString());\n        }\n        bounds.x = left;\n        bounds.width = width;\n    }\n    if (item.height) {\n        bounds.height = value(item.height, reference.height, scaleRatio);\n        if (item.top !== undefined) {\n            bounds.y = value(item.top, reference.height, scaleRatio);\n        }\n        else if (item.bottom !== undefined) {\n            bounds.y =\n                reference.height -\n                    value(item.bottom, reference.height, scaleRatio) -\n                    bounds.height;\n        }\n    }\n    else {\n        var top_1 = value(item.top || 0, reference.height, scaleRatio);\n        var bottom = reference.height - value(item.bottom || 0, reference.height, scaleRatio);\n        height = bottom - top_1;\n        if (height === undefined || height < 0) {\n            console.warn(\"An AbsolutePosition evaluated to invalid dimensions.\", \"Please ensure that the object provided and the reference has valid dimensions\", \"to produce dimensions with width and height that are greater than zero.\", \"item:\", item, \"reference:\", reference.toString());\n        }\n        bounds.y = top_1;\n        bounds.height = height;\n    }\n    if (bounds.width === 0 ||\n        bounds.height === 0 ||\n        isNaN(bounds.x + bounds.y + bounds.width + bounds.height)) {\n        bounds.x = 0;\n        bounds.y = 0;\n        bounds.width = reference.width;\n        bounds.height = reference.height;\n    }\n    return bounds;\n}\nexports.getAbsolutePositionBounds = getAbsolutePositionBounds;\n","module.exports = \"// These are projection methods utilizing the simpler camera breakdown approach\\n\\nvec3 cameraSpace(vec3 world) {\\n  return (world + cameraOffset) * cameraScale;\\n}\\n\\nvec3 cameraSpaceSize(vec3 worldSize) {\\n  return worldSize * cameraScale;\\n}\\n\\nvec4 clipSpace(vec3 world) {\\n  return vec4(((projection * modelView) * vec4(cameraSpace(world), 1.0)).xyz, 1.0);\\n}\\n\\nvec4 clipSpaceSize(vec3 worldSize) {\\n  return vec4(((projection * modelView) * vec4(cameraSpaceSize(worldSize), 0.0)).xyz, 1.0);\\n}\\n\"","module.exports = \"// When instancing is enabled, it causes a major list of uniforms to be generated\\n// it also generates a massive search tree to retrieve the correct unforms in question.\\n${instanceUniformDeclarations}\\n\\n// This is the uniforms provided by the system along with the uniforms created by the layer\\n${layerUniforms}\\n\\n// This is the attributes generated for vertex attributes\\n${vertexAttributes}\\n\\n// This is the methods and set up needed to retrieve a block of data for an instance\\n${instanceDataRetrieval}\\n\\n// This is the methods generated for the automated easing of attributes\\n${easingMethods}\\n\"","module.exports = \"// This is the injected dereferencing of the instance attributes\\n  int instanceIndex = int(instance);\\n  ${instanceDestructuring}\\n\\n  // This is a special injected instance attribute. It lets the system\\n  // control specific instances ability to draw, which allows the backend\\n  // system greater control on how it optimizes draw calls and it's buffers.\\n  if (_active == 0.0) {\\n    gl_Position = vec4(0.0, 0.0, 0.0, 1.0);\\n\\n    // Quick exit to prevent any geometry from arising from the instance\\n    return;\\n  }\\n\"","module.exports = \"// This is the fragment shader generated by the system\\n${layerUniforms}\\n\\n// --------------- The fragment shader provided by the layer ------------------\\n${shader}\\n\"","module.exports = \"// This is the vertex shader generated by the system\\n${shaderInput}\\n${projectionMethods}\\n// --------------- Vertex shader provided by the layer -----------------\\n${shader}\\n\"","module.exports = \"int instanceSize = ${instanceBlockCount};\\n\\nvec4 getBlock(int index, int instanceIndex) {\\n  return instanceData[(instanceSize * instanceIndex) + index];\\n}\\n\"","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Three = require(\"three\");\nvar types_1 = require(\"../../types\");\nvar auto_easing_method_1 = require(\"../../util/auto-easing-method\");\nvar make_instance_uniform_name_1 = require(\"../../util/make-instance-uniform-name\");\nvar shader_templating_1 = require(\"../../util/shader-templating\");\nvar template_vars_1 = require(\"../fragments/template-vars\");\nvar instanceRetrievalArrayFragment = require(\"../fragments/instance-retrieval-array.vs\");\nvar VECTOR_COMPONENTS = [\"x\", \"y\", \"z\", \"w\"];\nvar sizeToType = {\n    1: \"float\",\n    2: \"vec2\",\n    3: \"vec3\",\n    4: \"vec4\",\n    9: \"mat3\",\n    16: \"mat4\",\n    99: \"vec4\"\n};\nfunction orderByPriority(a, b) {\n    if (a.easing && !b.easing)\n        return 1;\n    return -1;\n}\nfunction makeUniformArrayDeclaration(totalBlocks) {\n    return {\n        fragment: \"uniform vec4 \" + make_instance_uniform_name_1.makeInstanceUniformNameArray() + \"[\" + totalBlocks + \"];\",\n        materialUniforms: [\n            {\n                name: make_instance_uniform_name_1.makeInstanceUniformNameArray(),\n                type: \"4fv\",\n                value: new Array(totalBlocks)\n                    .fill(0)\n                    .map(function () { return new Three.Vector4(0, 0, 0, 0); })\n            }\n        ]\n    };\n}\nexports.makeUniformArrayDeclaration = makeUniformArrayDeclaration;\nfunction makeInstanceRetrievalArray(blocksPerInstance) {\n    var templateOptions = {};\n    templateOptions[template_vars_1.templateVars.instanceBlockCount] = \"\" + blocksPerInstance;\n    var required = {\n        name: \"makeInstanceRetrievalArray\",\n        values: [template_vars_1.templateVars.instanceBlockCount]\n    };\n    var results = shader_templating_1.shaderTemplate(instanceRetrievalArrayFragment, templateOptions, required);\n    return results.shader;\n}\nexports.makeInstanceRetrievalArray = makeInstanceRetrievalArray;\nfunction makeInstanceDestructuringArray(instanceAttributes, blocksPerInstance) {\n    var out = \"\";\n    var orderedAttributes = instanceAttributes.slice(0).sort(orderByPriority);\n    for (var i = 0; i < blocksPerInstance; ++i) {\n        out += \"  vec4 block\" + i + \" = getBlock(\" + i + \", instanceIndex);\\n\";\n    }\n    orderedAttributes.forEach(function (attribute) {\n        var block = attribute.block;\n        if (attribute.easing && attribute.size) {\n            if (attribute.size === types_1.InstanceAttributeSize.FOUR) {\n                out += \"  \" + sizeToType[attribute.size] + \" _\" + attribute.name + \"_end = block\" + block + \";\\n\";\n            }\n            else {\n                out += \"  \" + sizeToType[attribute.size || 1] + \" _\" + attribute.name + \"_end = block\" + block + \".\" + makeVectorSwizzle(attribute.blockIndex || 0, attribute.size || 1) + \";\\n\";\n            }\n            switch (attribute.easing.loop) {\n                case auto_easing_method_1.AutoEasingLoopStyle.REPEAT:\n                    out += \"  float _\" + attribute.name + \"_time = clamp(fract((currentTime - _\" + attribute.name + \"_start_time) / _\" + attribute.name + \"_duration), 0.0, 1.0);\\n\";\n                    break;\n                case auto_easing_method_1.AutoEasingLoopStyle.REFLECT:\n                    out += \"  float _\" + attribute.name + \"_timePassed = (currentTime - _\" + attribute.name + \"_start_time) / _\" + attribute.name + \"_duration;\\n\";\n                    out += \"  float _\" + attribute.name + \"_pingPong = abs((fract(_\" + attribute.name + \"_timePassed / 2.0)) - 0.5) * 2.0;\\n\";\n                    out += \"  float _\" + attribute.name + \"_time = clamp(_\" + attribute.name + \"_pingPong, 0.0, 1.0);\\n\";\n                    break;\n                case auto_easing_method_1.AutoEasingLoopStyle.NONE:\n                default:\n                    out += \"  float _\" + attribute.name + \"_time = clamp((currentTime - _\" + attribute.name + \"_start_time) / _\" + attribute.name + \"_duration, 0.0, 1.0);\\n\";\n                    break;\n            }\n            out += \"  \" + sizeToType[attribute.size] + \" \" + attribute.name + \" = \" + attribute.easing.methodName + \"(_\" + attribute.name + \"_start, _\" + attribute.name + \"_end, _\" + attribute.name + \"_time);\\n\";\n        }\n        else if (attribute.size === types_1.InstanceAttributeSize.FOUR) {\n            out += \"  \" + sizeToType[attribute.size] + \" \" + attribute.name + \" = block\" + block + \";\\n\";\n        }\n        else if (attribute.atlas) {\n            out += \"  \" + sizeToType[types_1.InstanceAttributeSize.ATLAS] + \" \" + attribute.name + \" = block\" + block + \";\\n\";\n        }\n        else {\n            out += \"  \" + sizeToType[attribute.size || 1] + \" \" + attribute.name + \" = block\" + block + \".\" + makeVectorSwizzle(attribute.blockIndex || 0, attribute.size || 1) + \";\\n\";\n        }\n    });\n    return out;\n}\nexports.makeInstanceDestructuringArray = makeInstanceDestructuringArray;\nfunction makeVectorSwizzle(start, size) {\n    return VECTOR_COMPONENTS.slice(start, start + size).join(\"\");\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar types_1 = require(\"../../types\");\nvar shader_templating_1 = require(\"../../util/shader-templating\");\nvar webgl_stat_1 = require(\"../../util/webgl-stat\");\nvar template_vars_1 = require(\"../fragments/template-vars\");\nvar uniform_instance_block_array_1 = require(\"./uniform-instance-block-array\");\nvar vertexShaderComposition = require(\"../fragments/vertex-shader-composition.vs\");\nvar fragmentShaderComposition = require(\"../fragments/fragment-shader-composition.fs\");\nvar instanceDestructuringArray = require(\"../fragments/instance-destructuring-array.vs\");\nvar shaderInput = require(\"../fragments/shader-input.vs\");\nvar projectionMethods = require(\"../fragments/projection-methods.vs\");\nvar MAX_USE_PER_BLOCK = 4;\nvar sizeToType = {\n    1: \"float\",\n    2: \"vec2\",\n    3: \"vec3\",\n    4: \"vec4\",\n    9: \"mat3\",\n    16: \"mat4\",\n    99: \"sampler2D\"\n};\nfunction calculateUniformBlockUseage(uniforms) {\n    var count = 0;\n    for (var i = 0, end = uniforms.length; i < end; ++i) {\n        count += Math.ceil(uniforms[i].size / 4);\n    }\n    return count;\n}\nfunction injectFragments(shaders, vertexAttributes, instanceAttributes, uniforms) {\n    var shaderInputMetrics = generateShaderInputs(vertexAttributes, instanceAttributes, uniforms);\n    var templateOptions = (_a = {},\n        _a[template_vars_1.templateVars.projectionMethods] = generateProjectionMethods(),\n        _a[template_vars_1.templateVars.shaderInput] = shaderInputMetrics.fragment,\n        _a[template_vars_1.templateVars.shader] = generateVertexShader(shaders, instanceAttributes, shaderInputMetrics.metrics.maxInstancesPerBuffer, shaderInputMetrics.metrics.blocksPerInstance),\n        _a);\n    var required = {\n        name: \"vertex shader composition\",\n        values: [\n            template_vars_1.templateVars.projectionMethods,\n            template_vars_1.templateVars.shaderInput,\n            template_vars_1.templateVars.shader\n        ]\n    };\n    var vertexShaderResults = shader_templating_1.shaderTemplate(vertexShaderComposition, templateOptions, required);\n    templateOptions = (_b = {},\n        _b[template_vars_1.templateVars.layerUniforms] = generateUniforms(uniforms, types_1.ShaderInjectionTarget.FRAGMENT),\n        _b[template_vars_1.templateVars.shader] = generateFragmentShader(shaders),\n        _b);\n    required = {\n        name: \"fragment shader composition\",\n        values: [template_vars_1.templateVars.layerUniforms, template_vars_1.templateVars.shader]\n    };\n    var fragmentShaderResults = shader_templating_1.shaderTemplate(fragmentShaderComposition, templateOptions, required);\n    return {\n        fs: fragmentShaderResults.shader,\n        materialUniforms: shaderInputMetrics.materialUniforms,\n        maxInstancesPerBuffer: shaderInputMetrics.metrics.maxInstancesPerBuffer,\n        vs: vertexShaderResults.shader\n    };\n    var _a, _b;\n}\nexports.injectFragments = injectFragments;\nfunction generateProjectionMethods() {\n    var templateOptions = {};\n    var required = {\n        name: \"projection methods\",\n        values: []\n    };\n    var results = shader_templating_1.shaderTemplate(projectionMethods, templateOptions, required);\n    return results.shader;\n}\nfunction generateShaderInputs(vertexAttributes, instanceAttributes, uniforms) {\n    var templateOptions = {};\n    var instancingInfo = generateInstanceDataLookupOptions(templateOptions, instanceAttributes, uniforms);\n    var additionalOptions = (_a = {},\n        _a[template_vars_1.templateVars.layerUniforms] = generateUniforms(uniforms, types_1.ShaderInjectionTarget.VERTEX),\n        _a[template_vars_1.templateVars.vertexAttributes] = generateVertexAttributes(vertexAttributes),\n        _a[template_vars_1.templateVars.easingMethods] = generateEasingMethods(instanceAttributes),\n        _a);\n    Object.assign(templateOptions, additionalOptions);\n    var required = {\n        name: \"shader input\",\n        values: [\n            template_vars_1.templateVars.instanceDataRetrieval,\n            template_vars_1.templateVars.instanceUniformDeclarations,\n            template_vars_1.templateVars.layerUniforms,\n            template_vars_1.templateVars.vertexAttributes,\n            template_vars_1.templateVars.easingMethods\n        ]\n    };\n    var results = shader_templating_1.shaderTemplate(shaderInput, templateOptions, required);\n    return {\n        fragment: results.shader,\n        materialUniforms: instancingInfo.materialUniforms,\n        metrics: instancingInfo.metrics\n    };\n    var _a;\n}\nfunction generateEasingMethods(instanceAttributes) {\n    var methods = new Map();\n    var out = \"\";\n    instanceAttributes.forEach(function (attribute) {\n        if (attribute.easing && attribute.size) {\n            var methodSizes = methods.get(attribute.easing.methodName);\n            if (!methodSizes) {\n                methodSizes = new Map();\n                methods.set(attribute.easing.methodName, methodSizes);\n            }\n            methodSizes.set(attribute.size, attribute.easing.gpu);\n        }\n    });\n    var required = {\n        name: \"Easing Method Generation\",\n        values: [template_vars_1.templateVars.easingMethod]\n    };\n    methods.forEach(function (methodSizes, methodName) {\n        methodSizes.forEach(function (method, size) {\n            var sizeType = sizeToType[size];\n            var templateOptions = (_a = {},\n                _a[template_vars_1.templateVars.easingMethod] = sizeType + \" \" + methodName + \"(\" + sizeType + \" start, \" + sizeType + \" end, float t)\",\n                _a);\n            var results = shader_templating_1.shaderTemplate(method, templateOptions, required);\n            out += results.shader + \"\\n\";\n            var _a;\n        });\n    });\n    return out;\n}\nfunction generateUniforms(uniforms, injectionType) {\n    var out = \"\";\n    var injection = injectionType || types_1.ShaderInjectionTarget.VERTEX;\n    uniforms.forEach(function (uniform) {\n        uniform.shaderInjection =\n            uniform.shaderInjection || types_1.ShaderInjectionTarget.VERTEX;\n        if (uniform.shaderInjection === injection ||\n            uniform.shaderInjection === types_1.ShaderInjectionTarget.ALL) {\n            out += \"uniform \" + (uniform.qualifier || \"\") + (uniform.qualifier ? \" \" : \"\") + sizeToType[uniform.size] + \" \" + uniform.name + \";\\n\";\n        }\n    });\n    return out;\n}\nfunction generateVertexShader(shaders, instanceAttributes, _maxInstancesPerBuffer, blocksPerInstance) {\n    var templateOptions = (_a = {},\n        _a[template_vars_1.templateVars.attributes] = makeInstanceAttributeReferences(instanceAttributes, blocksPerInstance),\n        _a);\n    var required = {\n        name: \"layer vertex shader\",\n        values: [template_vars_1.templateVars.attributes]\n    };\n    var results = shader_templating_1.shaderTemplate(shaders.vs, templateOptions, required);\n    return results.shader;\n    var _a;\n}\nfunction generateFragmentShader(shaders) {\n    var templateOptions = {};\n    var required = {\n        name: \"layer fragment shader\",\n        values: []\n    };\n    var results = shader_templating_1.shaderTemplate(shaders.fs, templateOptions, required);\n    return results.shader;\n}\nfunction makeInstanceAttributeReferences(instanceAttributes, blocksPerInstance) {\n    var templateOptions = {};\n    templateOptions[template_vars_1.templateVars.blocksPerInstance] = \"\" + blocksPerInstance;\n    templateOptions[template_vars_1.templateVars.instanceDestructuring] = makeInstanceDestructuring(instanceAttributes, blocksPerInstance);\n    var required = {\n        name: \"instance attributes fragment\",\n        values: [template_vars_1.templateVars.instanceDestructuring]\n    };\n    var results = shader_templating_1.shaderTemplate(instanceDestructuringArray, templateOptions, required);\n    return results.shader;\n}\nfunction makeInstanceDestructuring(instanceAttributes, blocksPerInstance) {\n    return uniform_instance_block_array_1.makeInstanceDestructuringArray(instanceAttributes, blocksPerInstance);\n}\nfunction generateVertexAttributes(vertexAttributes) {\n    var out = \"\";\n    vertexAttributes.forEach(function (attribute) {\n        out += \"attribute \" + sizeToType[attribute.size] + \" \" + (attribute.qualifier ||\n            \"\") + ((attribute.qualifier && \" \") || \"\") + attribute.name + \";\\n\";\n    });\n    return out;\n}\nfunction generateInstanceDataLookupOptions(templateOptions, instanceAttributes, uniforms) {\n    var maxUniforms = webgl_stat_1.WebGLStat.MAX_VERTEX_UNIFORMS;\n    var instanceUniformBlockCount = maxUniforms - calculateUniformBlockUseage(uniforms);\n    var sortedInstanceAttributes = instanceAttributes\n        .slice(0)\n        .sort(function (a, b) { return a.block - b.block; });\n    var currentBlock = sortedInstanceAttributes[0].block;\n    var trueBlockIndex = 0;\n    var blockUseage = new Map();\n    var innerBlockUseage = new Map();\n    sortedInstanceAttributes.forEach(function (attribute) {\n        if (attribute.block !== currentBlock) {\n            currentBlock = attribute.block;\n            trueBlockIndex++;\n        }\n        var attributeSize = attribute.size || 1;\n        var oldUseage = blockUseage.get(trueBlockIndex) || 0;\n        var newUseage = oldUseage + attributeSize;\n        if (newUseage > MAX_USE_PER_BLOCK) {\n            console.error(\"An instance attribute was specified that over fills the maximum allowed useage for a block.\", \"\\nMax Allowed per block \" + MAX_USE_PER_BLOCK, \"\\nAttribute: \" + attribute.name + \" Block Specified: \" + attribute.block, \"\\nTotal blocks used with this attribute: \" + newUseage);\n            return;\n        }\n        blockUseage.set(trueBlockIndex, newUseage);\n        attribute.blockIndex = oldUseage;\n        var innerUseage = innerBlockUseage.get(trueBlockIndex) || new Map();\n        if (attribute.blockIndex + attributeSize > MAX_USE_PER_BLOCK) {\n            console.error(\"An instance attribute was specified that would fill indices greater than the block allows.\", \"\\nMax index per block \" + MAX_USE_PER_BLOCK, \"\\nAttribute: \" + attribute.name + \" Block Index: \" + attribute.blockIndex + \" Size: \" + attribute.size + \" Block Index + Size: \" + (attribute.blockIndex +\n                (attribute.size || 1)));\n            return;\n        }\n        for (var i = attribute.blockIndex; i < attribute.blockIndex + attributeSize; ++i) {\n            if (innerUseage.get(i)) {\n                console.error(\"An instance attribute was specified who's block index overaps another attributes useage\", \"\\nMax index per block \" + MAX_USE_PER_BLOCK, \"\\nAttribute: \" + attribute.name + \" Block Index: \" + attribute.blockIndex + \" Size: \" + attribute.size + \" Block Index + Size: \" + (attribute.blockIndex +\n                    (attribute.size || 1)));\n                return;\n            }\n        }\n        attribute.block = trueBlockIndex;\n    });\n    var branchesPerLevel = 4;\n    var blocksPerInstance = trueBlockIndex + 1;\n    var maxInstancesPerBuffer = Math.floor(instanceUniformBlockCount / blocksPerInstance);\n    var instancingMetrics = makeUniformInstanceDataOptions(templateOptions, maxInstancesPerBuffer, branchesPerLevel, blocksPerInstance, sortedInstanceAttributes);\n    return {\n        materialUniforms: instancingMetrics.materialUniforms,\n        metrics: {\n            blocksPerInstance: blocksPerInstance,\n            maxInstancesPerBuffer: maxInstancesPerBuffer\n        }\n    };\n}\nfunction makeUniformInstanceDataOptions(templateOptions, maxInstancesPerBuffer, _branchesPerLevel, blocksPerInstance, instanceAttributes) {\n    var instances = [];\n    for (var i = 0; i < maxInstancesPerBuffer; ++i) {\n        instances.push(i);\n    }\n    var uniformMetrics = makeInstanceUniformDeclaration(maxInstancesPerBuffer * blocksPerInstance, instanceAttributes);\n    templateOptions[template_vars_1.templateVars.instanceUniformDeclarations] =\n        uniformMetrics.fragment;\n    templateOptions[template_vars_1.templateVars.instanceBlockCount] = \"\" + blocksPerInstance;\n    templateOptions[template_vars_1.templateVars.instanceDataRetrieval] = uniform_instance_block_array_1.makeInstanceRetrievalArray(blocksPerInstance);\n    return {\n        materialUniforms: uniformMetrics.materialUniforms\n    };\n}\nfunction makeInstanceUniformDeclaration(instanceUniformBlockCount, attributes) {\n    var out = \"\";\n    var blockQualifierDedup = new Map();\n    var maxBlock = 0;\n    attributes.forEach(function (attribute) {\n        var qualifiers = blockQualifierDedup.get(attribute.block) || new Map();\n        if (attribute.qualifier) {\n            qualifiers.set(attribute.qualifier, true);\n        }\n        maxBlock = Math.max(maxBlock, attribute.block);\n    });\n    var blockQualifiers = new Map();\n    blockQualifierDedup.forEach(function (qualifierList, block) {\n        var allQualifiers = Array.from(qualifierList.keys());\n        blockQualifiers.set(block, allQualifiers.join(\" \") + \" \");\n    });\n    var declaration = uniform_instance_block_array_1.makeUniformArrayDeclaration(instanceUniformBlockCount);\n    out += declaration.fragment;\n    out += \"\\n\";\n    return {\n        fragment: out,\n        materialUniforms: declaration.materialUniforms\n    };\n}\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar mobx_1 = require(\"mobx\");\nvar texture_1 = require(\"../../surface/texture\");\nvar instance_1 = require(\"../../util/instance\");\nvar types_1 = require(\"../types\");\nvar rasterizationLookUp = new Map();\nvar anchorCalculator = (_a = {},\n    _a[types_1.AnchorType.TopLeft] = function (anchor, _label) {\n        anchor.x = -anchor.padding;\n        anchor.y = -anchor.padding;\n    },\n    _a[types_1.AnchorType.TopMiddle] = function (anchor, label) {\n        anchor.x = label.width / 2.0;\n        anchor.y = -anchor.padding;\n    },\n    _a[types_1.AnchorType.TopRight] = function (anchor, label) {\n        anchor.x = label.width + anchor.padding;\n        anchor.y = -anchor.padding;\n    },\n    _a[types_1.AnchorType.MiddleLeft] = function (anchor, label) {\n        anchor.x = -anchor.padding;\n        anchor.y = label.height / 2;\n    },\n    _a[types_1.AnchorType.Middle] = function (anchor, label) {\n        anchor.x = label.width / 2.0;\n        anchor.y = label.height / 2.0;\n    },\n    _a[types_1.AnchorType.MiddleRight] = function (anchor, label) {\n        anchor.x = label.width + anchor.padding;\n        anchor.y = label.height / 2.0;\n    },\n    _a[types_1.AnchorType.BottomLeft] = function (anchor, label) {\n        anchor.x = -anchor.padding;\n        anchor.y = label.height + anchor.padding;\n    },\n    _a[types_1.AnchorType.BottomMiddle] = function (anchor, label) {\n        anchor.x = label.width / 2.0;\n        anchor.y = label.height + anchor.padding;\n    },\n    _a[types_1.AnchorType.BottomRight] = function (anchor, label) {\n        anchor.x = label.width + anchor.padding;\n        anchor.y = label.height + anchor.padding;\n    },\n    _a[types_1.AnchorType.Custom] = function (anchor, _label) {\n        anchor.x = anchor.x || 0;\n        anchor.y = anchor.y || 0;\n    },\n    _a);\nvar LabelInstance = (function (_super) {\n    __extends(LabelInstance, _super);\n    function LabelInstance(options) {\n        var _this = _super.call(this, options) || this;\n        _this.color = [0, 0, 0, 1];\n        _this.depth = 0;\n        _this.maxScale = 1;\n        _this.scaling = types_1.ScaleType.BOUND_MAX;\n        _this.scale = 1.0;\n        _this.x = 0;\n        _this.y = 0;\n        _this._cssFont = \"\";\n        _this._fontFamily = \"Arial\";\n        _this._fontSize = 12;\n        _this._fontStyle = \"normal\";\n        _this._fontWeight = 400;\n        _this._maxWidth = 0;\n        _this._text = \"\";\n        _this._width = 0;\n        _this._height = 0;\n        _this._isDestroyed = false;\n        _this._anchor = {\n            padding: 0,\n            type: types_1.AnchorType.TopLeft,\n            x: 0,\n            y: 0\n        };\n        _this.depth = options.depth || _this.depth;\n        _this.color = options.color || _this.color;\n        _this.maxScale = options.maxScale || _this.maxScale;\n        _this.scaling = options.scaling || _this.scaling;\n        _this.scale = options.scale || _this.scale;\n        _this.x = options.x || _this.x;\n        _this.y = options.y || _this.y;\n        _this._fontFamily = options.fontFamily || _this._fontFamily;\n        _this._fontSize = options.fontSize || _this._fontSize;\n        _this._fontStyle = options.fontStyle || _this._fontStyle;\n        _this._fontWeight = options.fontWeight || _this._fontWeight;\n        _this._maxWidth = options.maxWidth || 0;\n        _this._text = options.text || _this._text;\n        _this._cssFont = texture_1.LabelRasterizer.makeCSSFont(_this, 1);\n        var cssFontLookup = _this._cssFont + \"_\" + _this._maxWidth;\n        var rasterizations = rasterizationLookUp.get(_this._text);\n        var rasterization;\n        if (rasterizations) {\n            rasterization = rasterizations.get(cssFontLookup);\n            if (rasterization) {\n                rasterization.references++;\n            }\n        }\n        else {\n            rasterizations = new Map();\n        }\n        if (!rasterization) {\n            rasterization = {\n                references: 1,\n                resource: new texture_1.LabelAtlasResource(_this)\n            };\n            if (options.rasterization) {\n                rasterization.resource.sampleScale = options.rasterization.scale || 1.0;\n            }\n            rasterization.resource.sampleScale =\n                rasterization.resource.sampleScale || 1.0;\n            texture_1.LabelRasterizer.renderSync(rasterization.resource);\n            rasterizationLookUp.set(_this._text, rasterizations);\n            rasterizations.set(cssFontLookup, rasterization);\n        }\n        _this._rasterization = rasterization;\n        _this._width = rasterization.resource.rasterization.world.width;\n        _this._height = rasterization.resource.rasterization.world.height;\n        options.anchor && _this.setAnchor(options.anchor);\n        return _this;\n    }\n    LabelInstance.destroy = function () {\n        rasterizationLookUp.clear();\n    };\n    Object.defineProperty(LabelInstance.prototype, \"cssFont\", {\n        get: function () {\n            return this._cssFont;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(LabelInstance.prototype, \"isDestroyed\", {\n        get: function () {\n            return this._isDestroyed;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(LabelInstance.prototype, \"fontFamily\", {\n        get: function () {\n            return this._fontFamily;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(LabelInstance.prototype, \"fontSize\", {\n        get: function () {\n            return this._fontSize;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(LabelInstance.prototype, \"fontStyle\", {\n        get: function () {\n            return this._fontStyle;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(LabelInstance.prototype, \"fontWeight\", {\n        get: function () {\n            return this._fontWeight;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(LabelInstance.prototype, \"maxWidth\", {\n        get: function () {\n            return this._maxWidth;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(LabelInstance.prototype, \"resource\", {\n        get: function () {\n            return this._rasterization.resource;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(LabelInstance.prototype, \"text\", {\n        get: function () {\n            return this._text;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(LabelInstance.prototype, \"truncatedText\", {\n        get: function () {\n            return this._rasterization.resource.truncatedText || this.text;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(LabelInstance.prototype, \"width\", {\n        get: function () {\n            return this._width;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(LabelInstance.prototype, \"height\", {\n        get: function () {\n            return this._height;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    LabelInstance.prototype.destroy = function () {\n        if (!this._isDestroyed) {\n            this._isDestroyed = true;\n            this._rasterization.references--;\n            if (this._rasterization.references === 0) {\n                this._rasterization.resource;\n            }\n        }\n    };\n    Object.defineProperty(LabelInstance.prototype, \"anchor\", {\n        get: function () {\n            return this._anchor;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    LabelInstance.prototype.setAnchor = function (anchor) {\n        var newAnchor = {\n            padding: anchor.padding || 0,\n            type: anchor.type,\n            x: anchor.x || 0,\n            y: anchor.y || 0\n        };\n        anchorCalculator[newAnchor.type](newAnchor, this);\n        this._anchor = newAnchor;\n    };\n    __decorate([\n        mobx_1.observable\n    ], LabelInstance.prototype, \"color\", void 0);\n    __decorate([\n        mobx_1.observable\n    ], LabelInstance.prototype, \"depth\", void 0);\n    __decorate([\n        mobx_1.observable\n    ], LabelInstance.prototype, \"maxScale\", void 0);\n    __decorate([\n        mobx_1.observable\n    ], LabelInstance.prototype, \"scaling\", void 0);\n    __decorate([\n        mobx_1.observable\n    ], LabelInstance.prototype, \"scale\", void 0);\n    __decorate([\n        mobx_1.observable\n    ], LabelInstance.prototype, \"x\", void 0);\n    __decorate([\n        mobx_1.observable\n    ], LabelInstance.prototype, \"y\", void 0);\n    __decorate([\n        mobx_1.observable\n    ], LabelInstance.prototype, \"_anchor\", void 0);\n    __decorate([\n        mobx_1.computed\n    ], LabelInstance.prototype, \"anchor\", null);\n    return LabelInstance;\n}(instance_1.Instance));\nexports.LabelInstance = LabelInstance;\nvar _a;\n","module.exports = \"precision highp float;\\n\\nvarying vec4 vertexColor;\\nvarying vec2 texCoord;\\n\\nvoid main() {\\n  ${attributes}\\n\\n  // Determine final screen size of label\\n  vec3 screenSize = cameraSpaceSize(vec3(size * scale / maxScale, 1.0));\\n\\n  // Test whether the label is larger on the screen than the font size\\n  bool largerOnScreen = screenSize.y > size.y || screenSize.x > size.x;\\n\\n  // Determines if a scale mode should be used or not for the vertex\\n  float useScaleMode = float(\\n    (\\n      scaling == 3.0 ||                  // NEVER mode - keep the image the same size always\\n      (largerOnScreen && scaling == 2.0) // BOUND_MAX mode - only if we're larger than the font size do we scale down\\n    ) &&\\n    scaling != 1.0                       // ALWAYS mode - the image stays completely in world space allowing it to scale freely\\n  );\\n\\n  // Correct aspect ratio.  Sufficient fix for most applications.\\n  // Will need another solution in the case of:\\n  //  (cameraScale y != cameraScale.x) && (cameraScale.x != 1 && cameraScale.y != 1)\\n\\n  // If zooms are unequal, assume one is filtered to be 1.0\\n  float unequalZooms = float(cameraScale.x != cameraScale.y);\\n\\n  size = mix(\\n    size,\\n    (size * cameraScale.yx),\\n    unequalZooms\\n  );\\n\\n  // Destructure threejs's bug with the position requirement\\n  float normal = position.x;\\n  float side = position.y;\\n\\n  vec2 scaledAnchor = anchor * scale;\\n\\n  // Get the location of the anchor in world space\\n  vec2 worldAnchor = location + scaledAnchor;\\n\\n  vec2 adjustedAnchor = mix(\\n    scaledAnchor,\\n    (scaledAnchor * cameraScale.yx),\\n    unequalZooms\\n  );\\n\\n  // Get the position of the current vertex\\n  vec2 vertex = vec2(side, float(normal == 1.0)) * scale * size + location - adjustedAnchor;\\n\\n  // See how scaled the size on screen will be from the actual height of the label\\n  float labelScreenScale = mix(\\n    screenSize.y / size.y,\\n    screenSize.x / size.x,\\n    float((cameraScale.x != 1.0))\\n  );\\n\\n  float currentScale = labelScreenScale * scale;\\n\\n  // If our screen rendering is larger than the size the label is supposed to be, then we automagically\\n  // scale down our label to stay the correct size, centered on the anchor point\\n  vec2 anchorToVertex = vertex - location;\\n\\n  // We now choose between keeping the same image size or keeping it in world space\\n  vertex = mix(\\n    // This option keeps the image size in world space\\n    vertex,\\n    // This option counters the scaling of the image on the screen keeping it a static size\\n    (anchorToVertex / labelScreenScale) + location,\\n    // This is the flag determining if a scale mode should be applied to the vertex\\n    useScaleMode\\n  );\\n\\n  // --Texture and Color\\n  // Get the tex coord from our inject texture info\\n  texCoord = texture.xy + ((texture.zw - texture.xy) * vec2(side, float(normal == -1.0)));\\n  // Apply the label's color as a tint to the label (all labels are rendered white to the base texture)\\n  vertexColor = color;\\n\\n  gl_Position = clipSpace(vec3(vertex, depth));\\n}\\n\"","module.exports = \"precision highp float;\\n\\nvarying vec4 vertexColor;\\nvarying vec2 texCoord;\\n\\nvoid main() {\\n  gl_FragColor = texture2D(labelAtlas, texCoord) * vertexColor;\\n  gl_FragColor *= gl_FragColor.a;\\n}\\n\"","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Three = require(\"three\");\nvar primitives_1 = require(\"../../primitives\");\nvar layer_1 = require(\"../../surface/layer\");\nvar types_1 = require(\"../../types\");\nvar types_2 = require(\"../types\");\nvar max = Math.max, min = Math.min;\nvar LabelLayer = (function (_super) {\n    __extends(LabelLayer, _super);\n    function LabelLayer() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    LabelLayer.prototype.getInstancePickingMethods = function () {\n        return {\n            boundsAccessor: function (label) {\n                var anchor = [label.anchor.x || 0, label.anchor.y || 0];\n                var topLeft = [label.x - anchor[0], label.y - anchor[1]];\n                return new primitives_1.Bounds({\n                    height: label.height,\n                    width: label.width,\n                    x: topLeft[0],\n                    y: topLeft[1]\n                });\n            },\n            hitTest: function (label, point, view) {\n                var maxScale = max.apply(void 0, view.camera.scale);\n                var minScale = min.apply(void 0, view.camera.scale);\n                if (label.scaling === types_2.ScaleType.ALWAYS) {\n                    return true;\n                }\n                else if (label.scaling === types_2.ScaleType.BOUND_MAX) {\n                    if (minScale <= 1 && maxScale <= 1) {\n                        return true;\n                    }\n                    else {\n                        var anchor = [label.anchor.x || 0, label.anchor.y || 0];\n                        var topLeft = view.worldToScreen({\n                            x: label.x - anchor[0] / view.camera.scale[0],\n                            y: label.y - anchor[1] / view.camera.scale[1]\n                        });\n                        var screenPoint = view.worldToScreen(point);\n                        return new primitives_1.Bounds({\n                            height: label.height,\n                            width: label.width,\n                            x: topLeft.x,\n                            y: topLeft.y\n                        }).containsPoint(screenPoint);\n                    }\n                }\n                else if (label.scaling === types_2.ScaleType.NEVER) {\n                    var anchor = [label.anchor.x || 0, label.anchor.y || 0];\n                    var topLeft = view.worldToScreen({\n                        x: label.x - anchor[0] / view.camera.scale[0],\n                        y: label.y - anchor[1] / view.camera.scale[1]\n                    });\n                    var screenPoint = view.worldToScreen(point);\n                    return new primitives_1.Bounds({\n                        height: label.height,\n                        width: label.width,\n                        x: topLeft.x,\n                        y: topLeft.y\n                    }).containsPoint(screenPoint);\n                }\n                return true;\n            }\n        };\n    };\n    LabelLayer.prototype.initShader = function () {\n        var _this = this;\n        var vertexToNormal = {\n            0: 1,\n            1: 1,\n            2: -1,\n            3: 1,\n            4: -1,\n            5: -1\n        };\n        var vertexToSide = {\n            0: 0,\n            1: 0,\n            2: 0,\n            3: 1,\n            4: 1,\n            5: 1\n        };\n        return {\n            fs: require(\"./label-layer.fs\"),\n            instanceAttributes: [\n                {\n                    block: 0,\n                    blockIndex: types_1.InstanceBlockIndex.ONE,\n                    name: \"location\",\n                    size: types_1.InstanceAttributeSize.TWO,\n                    update: function (o) { return [o.x, o.y]; }\n                },\n                {\n                    block: 0,\n                    blockIndex: types_1.InstanceBlockIndex.THREE,\n                    name: \"anchor\",\n                    size: types_1.InstanceAttributeSize.TWO,\n                    update: function (o) { return [o.anchor.x || 0, o.anchor.y || 0]; }\n                },\n                {\n                    block: 1,\n                    blockIndex: types_1.InstanceBlockIndex.ONE,\n                    name: \"size\",\n                    size: types_1.InstanceAttributeSize.TWO,\n                    update: function (o) { return [o.width, o.height]; }\n                },\n                {\n                    block: 1,\n                    blockIndex: types_1.InstanceBlockIndex.THREE,\n                    name: \"depth\",\n                    size: types_1.InstanceAttributeSize.ONE,\n                    update: function (o) { return [o.depth]; }\n                },\n                {\n                    block: 1,\n                    blockIndex: types_1.InstanceBlockIndex.FOUR,\n                    name: \"scaling\",\n                    size: types_1.InstanceAttributeSize.ONE,\n                    update: function (o) { return [o.scaling]; }\n                },\n                {\n                    atlas: {\n                        key: this.props.atlas || \"\",\n                        name: \"labelAtlas\"\n                    },\n                    block: 2,\n                    name: \"texture\",\n                    update: function (o) { return _this.resource.request(_this, o, o.resource); }\n                },\n                {\n                    block: 3,\n                    blockIndex: types_1.InstanceBlockIndex.ONE,\n                    name: \"color\",\n                    size: types_1.InstanceAttributeSize.FOUR,\n                    update: function (o) { return o.color; }\n                },\n                {\n                    block: 4,\n                    blockIndex: types_1.InstanceBlockIndex.ONE,\n                    name: \"scale\",\n                    size: types_1.InstanceAttributeSize.ONE,\n                    update: function (o) { return [o.scale]; }\n                },\n                {\n                    block: 4,\n                    blockIndex: types_1.InstanceBlockIndex.TWO,\n                    name: \"maxScale\",\n                    size: types_1.InstanceAttributeSize.ONE,\n                    update: function (o) { return [o.maxScale]; }\n                }\n            ],\n            uniforms: [\n                {\n                    name: \"scaleFactor\",\n                    size: types_1.UniformSize.ONE,\n                    update: function (_u) { return [1]; }\n                }\n            ],\n            vertexAttributes: [\n                {\n                    name: \"position\",\n                    size: types_1.VertexAttributeSize.THREE,\n                    update: function (vertex) { return [\n                        vertexToNormal[vertex],\n                        vertexToSide[vertex],\n                        0\n                    ]; }\n                }\n            ],\n            vertexCount: 6,\n            vs: require(\"./label-layer.vs\")\n        };\n    };\n    LabelLayer.prototype.getModelType = function () {\n        return {\n            drawMode: Three.TriangleStripDrawMode,\n            modelType: Three.Mesh\n        };\n    };\n    LabelLayer.prototype.getMaterialOptions = function () {\n        return {\n            blending: Three.CustomBlending,\n            blendSrc: Three.OneFactor,\n            premultipliedAlpha: true,\n            transparent: true\n        };\n    };\n    return LabelLayer;\n}(layer_1.Layer));\nexports.LabelLayer = LabelLayer;\n","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = y[op[0] & 2 ? \"return\" : op[0] ? \"throw\" : \"next\"]) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [0, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar canvas;\nvar ImageRasterizer = (function () {\n    function ImageRasterizer() {\n    }\n    ImageRasterizer.awaitContext = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        if (!!canvas) return [3, 2];\n                        this.getContext();\n                        return [4, new Promise(function (resolve) { return setTimeout(resolve, 10); })];\n                    case 1:\n                        _a.sent();\n                        return [3, 0];\n                    case 2: return [2];\n                }\n            });\n        });\n    };\n    ImageRasterizer.getContext = function () {\n        if (!canvas) {\n            canvas = document.createElement(\"canvas\").getContext(\"2d\");\n        }\n        return canvas;\n    };\n    ImageRasterizer.calculateImageSize = function (resource, _sampleScale) {\n        var image = resource.image.element;\n        if (!image) {\n            console.warn(\"Image does not exist! Please ensure the resource contains a valid image.\");\n            return;\n        }\n        if (!canvas) {\n            console.warn(\"The Image rasterizer was unable to establish a valid canvas context. Please ensure the system supports contexts and ensure the document is ready first.\");\n            return;\n        }\n        if (image.width === 0 || image.height === 0) {\n            console.warn(\"Images provided shoud have valid dimensions! Please ensure the image is loaded first.\");\n            return;\n        }\n        canvas.canvas.width = 100;\n        canvas.canvas.height = 100;\n        canvas.drawImage(image, 0, 0);\n        resource.rasterization = resource.rasterization || {\n            texture: { height: 0, width: 0 },\n            world: { height: 0, width: 0 }\n        };\n        resource.rasterization.texture = {\n            height: image.height * resource.sampleScale,\n            width: image.width * resource.sampleScale\n        };\n        resource.rasterization.world = {\n            height: image.height,\n            width: image.width\n        };\n        resource.rasterization.image = image;\n    };\n    ImageRasterizer.render = function (resource) {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4, this.awaitContext()];\n                    case 1:\n                        _a.sent();\n                        this.calculateImageSize(resource, resource.sampleScale);\n                        return [2, resource];\n                }\n            });\n        });\n    };\n    ImageRasterizer.renderSync = function (resource) {\n        this.getContext();\n        if (!canvas) {\n            console.warn(\"Can not render a image synchronously without the canvas context being ready.\");\n            return resource;\n        }\n        this.calculateImageSize(resource, resource.sampleScale);\n        return resource;\n    };\n    return ImageRasterizer;\n}());\nexports.ImageRasterizer = ImageRasterizer;\n","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = y[op[0] & 2 ? \"return\" : op[0] ? \"throw\" : \"next\"]) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [0, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar bounds_1 = require(\"../../primitives/bounds\");\nvar atlas_1 = require(\"./atlas\");\nvar color_atlas_resource_1 = require(\"./color-atlas-resource\");\nvar color_rasterizer_1 = require(\"./color-rasterizer\");\nvar image_atlas_resource_1 = require(\"./image-atlas-resource\");\nvar label_atlas_resource_1 = require(\"./label-atlas-resource\");\nvar label_rasterizer_1 = require(\"./label-rasterizer\");\nvar sub_texture_1 = require(\"./sub-texture\");\nvar debug = require(\"debug\")(\"webgl-surface:Atlas\");\nvar ZERO_IMAGE = {\n    aspectRatio: 0,\n    atlasBL: { x: 0, y: 0 },\n    atlasBR: { x: 0, y: 0 },\n    atlasReferenceID: \"\",\n    atlasTexture: null,\n    atlasTL: { x: 0, y: 0 },\n    atlasTR: { x: 0, y: 0 },\n    heightOnAtlas: 0,\n    isValid: false,\n    pixelHeight: 0,\n    pixelWidth: 0,\n    widthOnAtlas: 0\n};\nfunction isValidImage(image) {\n    var isValid = false;\n    if (image && image.isValid) {\n        if (image.pixelWidth && image.pixelHeight) {\n            isValid = true;\n        }\n    }\n    return isValid;\n}\nvar AtlasManager = (function () {\n    function AtlasManager() {\n        this.allAtlas = new Map();\n    }\n    AtlasManager.prototype.createAtlas = function (options, resources) {\n        return __awaiter(this, void 0, void 0, function () {\n            var atlas;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        atlas = new atlas_1.Atlas(options);\n                        atlas.setManager(this);\n                        this.allAtlas.set(atlas.id, atlas);\n                        if (!resources) return [3, 2];\n                        return [4, this.updateAtlas(atlas.id, resources)];\n                    case 1:\n                        _a.sent();\n                        _a.label = 2;\n                    case 2:\n                        debug(\"Atlas Created-> %o\", atlas);\n                        return [2, atlas];\n                }\n            });\n        });\n    };\n    AtlasManager.prototype.destroy = function () {\n        this.allAtlas.forEach(function (value) { return value.destroy(); });\n    };\n    AtlasManager.prototype.destroyAtlas = function (atlasName) {\n        var atlas = this.allAtlas.get(atlasName);\n        if (atlas) {\n            atlas.destroy();\n        }\n    };\n    AtlasManager.prototype.setDefaultImage = function (image, atlasName) {\n        image = Object.assign(image, ZERO_IMAGE, { atlasReferenceID: atlasName });\n        return image;\n    };\n    AtlasManager.prototype.draw = function (atlas, resource) {\n        return __awaiter(this, void 0, void 0, function () {\n            var canvas, atlasName, loadedImage, rasterization, texture, rect, dimensions, packing, insertedNode, ux, uy, uw, uh, onePixelX, atlasDimensions, bottom, top_1, left, right;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        canvas = atlas.texture.image;\n                        atlasName = atlas.id;\n                        if (!atlas.registerResource(resource)) {\n                            console.warn(\"Could not draw resource to the atlas as the resource was not properly registered to the atlas first\", atlas, resource);\n                            return [2, Promise.resolve(false)];\n                        }\n                        return [4, this.loadImage(resource)];\n                    case 1:\n                        loadedImage = _a.sent();\n                        if (loadedImage && isValidImage(resource.texture)) {\n                            rasterization = resource.rasterization;\n                            texture = resource.texture;\n                            rect = new bounds_1.Bounds({\n                                left: 0,\n                                right: rasterization.texture.width,\n                                top: 0,\n                                bottom: rasterization.texture.height\n                            });\n                            dimensions = {\n                                first: texture,\n                                second: rect\n                            };\n                            dimensions.second.width += 1;\n                            dimensions.second.height += 1;\n                            packing = atlas.packing;\n                            insertedNode = packing.insert(dimensions);\n                            if (insertedNode) {\n                                debug(\"Atlas location determined: %o\", insertedNode);\n                                insertedNode.nodeImage = texture;\n                                ux = insertedNode.nodeDimensions.x / atlas.width;\n                                uy = insertedNode.nodeDimensions.y / atlas.height;\n                                uw = insertedNode.nodeDimensions.width / atlas.width;\n                                uh = insertedNode.nodeDimensions.height / atlas.height;\n                                onePixelX = 1 / atlas.width;\n                                atlasDimensions = new bounds_1.Bounds({\n                                    bottom: 1.0 - uy,\n                                    left: ux,\n                                    right: ux + uw,\n                                    top: 1.0 - (uy + uh)\n                                });\n                                bottom = atlasDimensions.bottom;\n                                top_1 = atlasDimensions.y;\n                                left = atlasDimensions.x;\n                                right = atlasDimensions.x + atlasDimensions.width - onePixelX;\n                                texture.atlasReferenceID = atlasName;\n                                texture.atlasTL = { x: left, y: top_1 };\n                                texture.atlasBR = { x: right, y: bottom };\n                                texture.atlasBL = { x: left, y: bottom };\n                                texture.atlasTR = { x: right, y: top_1 };\n                                texture.widthOnAtlas = Math.abs(texture.atlasTR.x - texture.atlasTL.x);\n                                texture.heightOnAtlas = Math.abs(texture.atlasTR.y - texture.atlasBR.y);\n                                texture.pixelWidth = rasterization.texture.width;\n                                texture.pixelHeight = rasterization.texture.height;\n                                canvas\n                                    .getContext(\"2d\")\n                                    .drawImage(loadedImage, insertedNode.nodeDimensions.x, insertedNode.nodeDimensions.y);\n                                return [2, true];\n                            }\n                            else {\n                                console.error(\"Could not fit resource into atlas\", resource);\n                                resource.texture = this.setDefaultImage(resource.texture, atlasName);\n                                return [2, false];\n                            }\n                        }\n                        else {\n                            if (!resource.texture.isValid) {\n                                debug(\"Resource was invalidated during load:\", resource);\n                            }\n                            else {\n                                console.error(\"Could not load resource:\", resource);\n                            }\n                            resource.texture = this.setDefaultImage(resource.texture, atlasName);\n                            return [2, false];\n                        }\n                        return [2];\n                }\n            });\n        });\n    };\n    AtlasManager.prototype.getAtlasTexture = function (atlasName) {\n        return this.allAtlas.get(atlasName);\n    };\n    AtlasManager.prototype.loadImage = function (resource) {\n        return __awaiter(this, void 0, void 0, function () {\n            var imageSrc, subTexture, image_1, image, image;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        imageSrc = \"\";\n                        subTexture = resource.texture || new sub_texture_1.SubTexture();\n                        resource.texture = subTexture;\n                        if (resource.texture.isValid === false)\n                            return [2, null];\n                        if (!(resource instanceof image_atlas_resource_1.ImageAtlasResource)) return [3, 4];\n                        if (!resource.image.element) return [3, 2];\n                        if (resource.image.element.width !== 0 &&\n                            resource.image.element.height !== 0) {\n                            image_1 = resource.image.element;\n                            subTexture.pixelWidth = image_1.width;\n                            subTexture.pixelHeight = image_1.height;\n                            subTexture.aspectRatio = image_1.width / image_1.height;\n                            return [2, image_1];\n                        }\n                        return [4, new Promise(function (resolve) {\n                                var image = resource.image.element;\n                                if (image) {\n                                    image.onload = function () {\n                                        subTexture.pixelWidth = image.width;\n                                        subTexture.pixelHeight = image.height;\n                                        subTexture.aspectRatio = image.width / image.height;\n                                        resolve(image);\n                                    };\n                                    image.onerror = function () {\n                                        resolve(null);\n                                    };\n                                }\n                                else {\n                                    resolve(null);\n                                }\n                            })];\n                    case 1:\n                        image = _a.sent();\n                        return [2, image];\n                    case 2:\n                        if (resource.image.path) {\n                            imageSrc = resource.image.path;\n                        }\n                        _a.label = 3;\n                    case 3: return [3, 10];\n                    case 4:\n                        if (!(resource instanceof label_atlas_resource_1.LabelAtlasResource)) return [3, 7];\n                        if (!!resource.rasterization.canvas) return [3, 6];\n                        return [4, label_rasterizer_1.LabelRasterizer.render(resource)];\n                    case 5:\n                        _a.sent();\n                        _a.label = 6;\n                    case 6:\n                        if (resource.rasterization.canvas) {\n                            debug(\"Rasterized label %o\", resource.rasterization);\n                            imageSrc = resource.rasterization.canvas.toDataURL(\"image/png\");\n                        }\n                        else {\n                            console.warn(\"The label was not able to be rasterized\");\n                        }\n                        return [3, 10];\n                    case 7:\n                        if (!(resource instanceof color_atlas_resource_1.ColorAtlasResource)) return [3, 10];\n                        if (!!resource.rasterization.canvas) return [3, 9];\n                        return [4, color_rasterizer_1.ColorRasterizer.render(resource)];\n                    case 8:\n                        _a.sent();\n                        _a.label = 9;\n                    case 9:\n                        if (resource.rasterization.canvas) {\n                            debug(\"Rasterized color %o\", resource.rasterization);\n                            imageSrc = resource.rasterization.canvas.toDataURL(\"image/png\");\n                        }\n                        else {\n                            console.warn(\"The color was not able to be rasterized\");\n                        }\n                        _a.label = 10;\n                    case 10:\n                        if (!imageSrc) return [3, 12];\n                        return [4, new Promise(function (resolve) {\n                                var image = new Image();\n                                image.onload = function () {\n                                    subTexture.pixelWidth = image.width;\n                                    subTexture.pixelHeight = image.height;\n                                    subTexture.aspectRatio = image.width / image.height;\n                                    resolve(image);\n                                };\n                                image.onerror = function () {\n                                    resolve(null);\n                                };\n                                image.src = imageSrc;\n                            })];\n                    case 11:\n                        image = _a.sent();\n                        return [2, image];\n                    case 12: return [2, null];\n                }\n            });\n        });\n    };\n    AtlasManager.prototype.updateAtlas = function (atlasName, resources) {\n        return __awaiter(this, void 0, void 0, function () {\n            var atlas, _i, resources_1, resource;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        atlas = this.allAtlas.get(atlasName);\n                        if (!atlas) return [3, 5];\n                        _i = 0, resources_1 = resources;\n                        _a.label = 1;\n                    case 1:\n                        if (!(_i < resources_1.length)) return [3, 4];\n                        resource = resources_1[_i];\n                        return [4, this.draw(atlas, resource)];\n                    case 2:\n                        _a.sent();\n                        _a.label = 3;\n                    case 3:\n                        _i++;\n                        return [3, 1];\n                    case 4:\n                        atlas.updateTexture();\n                        return [3, 6];\n                    case 5:\n                        console.warn(\"Can not update non-existing atlas:\", atlasName, \"These resources will not be loaded:\", resources);\n                        _a.label = 6;\n                    case 6: return [2];\n                }\n            });\n        });\n    };\n    return AtlasManager;\n}());\nexports.AtlasManager = AtlasManager;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar bounds_1 = require(\"../../primitives/bounds\");\nvar PackNode = (function () {\n    function PackNode(x, y, width, height) {\n        this.child = [null, null];\n        this.isLeaf = true;\n        this.nodeImage = null;\n        this.nodeDimensions = new bounds_1.Bounds({\n            height: height,\n            width: width,\n            x: x,\n            y: y\n        });\n    }\n    PackNode.prototype.destroy = function () {\n        var child0 = this.child[0];\n        var child1 = this.child[1];\n        this.nodeImage = null;\n        if (child0) {\n            child0.destroy();\n        }\n        if (child1) {\n            child1.destroy();\n        }\n        this.child[0] = null;\n        this.child[1] = null;\n    };\n    PackNode.prototype.hasChild = function () {\n        var child0 = this.child[0];\n        var child1 = this.child[1];\n        if (child0 && !child0.nodeImage) {\n            return !child0.isLeaf;\n        }\n        if (child1 && !child1.nodeImage) {\n            return !child1.isLeaf;\n        }\n        return false;\n    };\n    PackNode.prototype.insert = function (image) {\n        var child0 = this.child[0];\n        var child1 = this.child[1];\n        if (!this.isLeaf && child0 && child1) {\n            var newNode = child0.insert(image);\n            if (newNode !== null) {\n                return newNode;\n            }\n            return child1.insert(image);\n        }\n        else {\n            if (this.nodeImage) {\n                return null;\n            }\n            var fitFlag = this.nodeDimensions.fits(image.second);\n            if (fitFlag === 0) {\n                return null;\n            }\n            if (fitFlag === 1) {\n                return this;\n            }\n            this.isLeaf = false;\n            var imgWidth = image.second.width;\n            var imgHeight = image.second.height;\n            var dWidth = this.nodeDimensions.width - imgWidth;\n            var dHeight = this.nodeDimensions.height - image.second.height;\n            if (dWidth > dHeight) {\n                child0 = this.child[0] = new PackNode(this.nodeDimensions.x, this.nodeDimensions.y, imgWidth, this.nodeDimensions.height);\n                child1 = this.child[1] = new PackNode(this.nodeDimensions.x + imgWidth, this.nodeDimensions.y, dWidth, this.nodeDimensions.height);\n            }\n            else {\n                child0 = this.child[0] = new PackNode(this.nodeDimensions.x, this.nodeDimensions.y, this.nodeDimensions.width, imgHeight);\n                child1 = this.child[1] = new PackNode(this.nodeDimensions.x, this.nodeDimensions.y + imgHeight, this.nodeDimensions.width, dHeight);\n            }\n        }\n        return child0.insert(image);\n    };\n    PackNode.prototype.remove = function (image) {\n        var child0 = this.child[0];\n        var child1 = this.child[1];\n        if (child1 && child0 && !this.isLeaf) {\n            var removed = child0.remove(image);\n            if (removed) {\n                return true;\n            }\n            removed = child1.remove(image);\n            if (!child0.hasChild()) {\n                if (!child1.hasChild()) {\n                    this.child[0] = null;\n                    this.child[1] = null;\n                }\n            }\n            return removed;\n        }\n        else {\n            if (this.nodeImage === image) {\n                this.nodeImage = null;\n                delete image.atlasReferenceID;\n                image.pixelWidth = 0;\n                return true;\n            }\n            else {\n                return false;\n            }\n        }\n    };\n    return PackNode;\n}());\nexports.PackNode = PackNode;\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar mobx_1 = require(\"mobx\");\nvar texture_1 = require(\"../../surface/texture\");\nvar instance_1 = require(\"../../util/instance\");\nvar types_1 = require(\"../types\");\nvar max = Math.max;\nvar rasterizationLookUp = new Map();\nvar anchorCalculator = (_a = {},\n    _a[types_1.AnchorType.TopLeft] = function (anchor, _image) {\n        anchor.x = -anchor.padding;\n        anchor.y = -anchor.padding;\n    },\n    _a[types_1.AnchorType.TopMiddle] = function (anchor, image) {\n        anchor.x = image.width / 2.0;\n        anchor.y = -anchor.padding;\n    },\n    _a[types_1.AnchorType.TopRight] = function (anchor, image) {\n        anchor.x = image.width + anchor.padding;\n        anchor.y = -anchor.padding;\n    },\n    _a[types_1.AnchorType.MiddleLeft] = function (anchor, image) {\n        anchor.x = -anchor.padding;\n        anchor.y = image.height / 2;\n    },\n    _a[types_1.AnchorType.Middle] = function (anchor, image) {\n        anchor.x = image.width / 2.0;\n        anchor.y = image.height / 2.0;\n    },\n    _a[types_1.AnchorType.MiddleRight] = function (anchor, image) {\n        anchor.x = image.width + anchor.padding;\n        anchor.y = image.height / 2.0;\n    },\n    _a[types_1.AnchorType.BottomLeft] = function (anchor, image) {\n        anchor.x = -anchor.padding;\n        anchor.y = image.height + anchor.padding;\n    },\n    _a[types_1.AnchorType.BottomMiddle] = function (anchor, image) {\n        anchor.x = image.width / 2.0;\n        anchor.y = image.height + anchor.padding;\n    },\n    _a[types_1.AnchorType.BottomRight] = function (anchor, image) {\n        anchor.x = image.width + anchor.padding;\n        anchor.y = image.height + anchor.padding;\n    },\n    _a[types_1.AnchorType.Custom] = function (anchor, _image) {\n        anchor.x = anchor.x || 0;\n        anchor.y = anchor.y || 0;\n    },\n    _a);\nvar ImageInstance = (function (_super) {\n    __extends(ImageInstance, _super);\n    function ImageInstance(options) {\n        var _this = _super.call(this, options) || this;\n        _this.tint = [0, 0, 0, 1];\n        _this.depth = 0;\n        _this.height = 1;\n        _this.scaling = types_1.ScaleType.BOUND_MAX;\n        _this.width = 1;\n        _this.x = 0;\n        _this.y = 0;\n        _this._sourceWidth = 0;\n        _this._sourceHeight = 0;\n        _this._isDestroyed = false;\n        _this._anchor = {\n            padding: 0,\n            type: types_1.AnchorType.TopLeft,\n            x: 0,\n            y: 0\n        };\n        _this.depth = options.depth || _this.depth;\n        _this.tint = options.tint || _this.tint;\n        _this.scaling = options.scaling || _this.scaling;\n        _this.x = options.x || _this.x;\n        _this.y = options.y || _this.y;\n        _this._element = options.element;\n        var rasterization = rasterizationLookUp.get(_this._path || _this._element);\n        if (rasterization) {\n            rasterization.references++;\n        }\n        if (!rasterization) {\n            rasterization = {\n                references: 1,\n                resource: new texture_1.ImageAtlasResource(_this)\n            };\n            rasterization.resource.sampleScale =\n                rasterization.resource.sampleScale || 1.0;\n            texture_1.ImageRasterizer.renderSync(rasterization.resource);\n            rasterizationLookUp.set(_this._path || _this._element, rasterization);\n        }\n        _this._rasterization = rasterization;\n        _this._sourceWidth = rasterization.resource.rasterization.world.width;\n        _this._sourceHeight = rasterization.resource.rasterization.world.height;\n        _this.width = options.width || _this._sourceWidth || 1;\n        _this.height = options.height || _this._sourceHeight || 1;\n        options.anchor && _this.setAnchor(options.anchor);\n        return _this;\n    }\n    ImageInstance.destroy = function () {\n        rasterizationLookUp.clear();\n    };\n    Object.defineProperty(ImageInstance.prototype, \"size\", {\n        get: function () {\n            return max(this.width, this.height);\n        },\n        set: function (value) {\n            var aspect = this.width / this.height;\n            this.width = value * aspect;\n            this.height = value;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(ImageInstance.prototype, \"element\", {\n        get: function () {\n            return this._element;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(ImageInstance.prototype, \"isDestroyed\", {\n        get: function () {\n            return this._isDestroyed;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(ImageInstance.prototype, \"path\", {\n        get: function () {\n            return this._path;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(ImageInstance.prototype, \"resource\", {\n        get: function () {\n            return this._rasterization.resource;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(ImageInstance.prototype, \"sourceWidth\", {\n        get: function () {\n            return this._sourceWidth;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(ImageInstance.prototype, \"sourceHeight\", {\n        get: function () {\n            return this._sourceHeight;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    ImageInstance.prototype.destroy = function () {\n        if (!this._isDestroyed) {\n            this._isDestroyed = true;\n            this._rasterization.references--;\n            if (this._rasterization.references === 0) {\n                this._rasterization.resource;\n                console.warn(\"The destroy method still needs completion\");\n            }\n        }\n    };\n    Object.defineProperty(ImageInstance.prototype, \"anchor\", {\n        get: function () {\n            return this._anchor;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    ImageInstance.prototype.setAnchor = function (anchor) {\n        var newAnchor = {\n            padding: anchor.padding || 0,\n            type: anchor.type,\n            x: anchor.x || 0,\n            y: anchor.y || 0\n        };\n        anchorCalculator[newAnchor.type](newAnchor, this);\n        this._anchor = newAnchor;\n    };\n    __decorate([\n        mobx_1.observable\n    ], ImageInstance.prototype, \"tint\", void 0);\n    __decorate([\n        mobx_1.observable\n    ], ImageInstance.prototype, \"depth\", void 0);\n    __decorate([\n        mobx_1.observable\n    ], ImageInstance.prototype, \"height\", void 0);\n    __decorate([\n        mobx_1.observable\n    ], ImageInstance.prototype, \"scaling\", void 0);\n    __decorate([\n        mobx_1.observable\n    ], ImageInstance.prototype, \"width\", void 0);\n    __decorate([\n        mobx_1.observable\n    ], ImageInstance.prototype, \"x\", void 0);\n    __decorate([\n        mobx_1.observable\n    ], ImageInstance.prototype, \"y\", void 0);\n    __decorate([\n        mobx_1.observable\n    ], ImageInstance.prototype, \"_anchor\", void 0);\n    __decorate([\n        mobx_1.computed\n    ], ImageInstance.prototype, \"anchor\", null);\n    return ImageInstance;\n}(instance_1.Instance));\nexports.ImageInstance = ImageInstance;\nvar _a;\n","module.exports = \"precision highp float;\\n\\nvarying vec4 vertexColor;\\nvarying vec2 texCoord;\\n\\nvoid main() {\\n  ${attributes}\\n\\n  // Figure out the size of the image as it'd show on the screen\\n  vec3 screenSize = cameraSpaceSize(vec3(size, 1.0));\\n  // Do the test for when the image is larger on the screen than the font size\\n  bool largerOnScreen = screenSize.y > size.y;\\n\\n  // Determines if a scale mode should be used or not for the vertex\\n  float useScaleMode = float(\\n    (\\n      scaling == 3.0 ||                  // NEVER mode - keep the image the same size always\\n      (largerOnScreen && scaling == 2.0) // BOUND_MAX mode - only if we're larger than the font size do we scale down\\n    ) &&\\n    scaling != 1.0                       // ALWAYS mode - the image stays completely in world space allowing it to scale freely\\n  );\\n  // If zooms are unequal, assume one is filtered to be 1.0\\n  float unequalZooms = float(cameraScale.x != cameraScale.y);\\n\\n  // Destructure threejs's bug with the position requirement\\n  float normal = position.x;\\n  float side = position.y;\\n\\n  // Get the location of the anchor in world space\\n  vec2 worldAnchor = location + anchor;\\n\\n  // Get the tex coord from our inject texture info\\n  texCoord = texture.xy + ((texture.zw - texture.xy) * vec2(side, float(normal == -1.0)));\\n  // Apply the image's tint as a tint to the image\\n  vertexColor = tint;\\n\\n  // Correct aspect ratio.\\n  size = mix(\\n    size,\\n    (size * cameraScale.yx),\\n    unequalZooms\\n  );\\n\\n  vec2 adjustedAnchor = mix(\\n    anchor,\\n    (anchor * cameraScale.yx),\\n    unequalZooms\\n  );\\n\\n  vec2 vertex = vec2(side, float(normal == 1.0)) * size + location - adjustedAnchor;\\n\\n  // See how scaled the size on screen will be from the actual height of the image\\n  float imageScreenScale = mix(\\n    screenSize.y / size.y,\\n    screenSize.x / size.x,\\n    float((cameraScale.x < 1.0) || (cameraScale.x > 1.0))\\n  );\\n\\n  // If our screen rendering is larger than the size the image is supposed to be, then we automagically\\n  // scale down our image to stay the correct size, centered on the anchor point\\n  vec2 anchorToVertex = vertex - location;\\n\\n  // We now choose between keeping the same image size or keeping it in world space\\n  vertex = mix(\\n    // This option keeps the image size in world space\\n    vertex,\\n    // This option counters the scaling of the image on the screen keeping it a static size\\n    (anchorToVertex / imageScreenScale) + location,\\n    // This is the flag determining if a scale mode should be applied to the vertex\\n    useScaleMode\\n  );\\n\\n  gl_Position = clipSpace(vec3(vertex, depth));\\n}\\n\"","module.exports = \"precision highp float;\\n\\nvarying vec4 vertexColor;\\nvarying vec2 texCoord;\\n\\nvoid main() {\\n  gl_FragColor = texture2D(imageAtlas, texCoord) * vertexColor;\\n  gl_FragColor *= gl_FragColor.a;\\n}\\n\"","module.exports = \"void main() {\\n  gl_Position = vec4(0.0, 0.0, 0.0, 1.0);\\n}\"","module.exports = \"\"","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar types_1 = require(\"../types\");\nvar LayerInteractionHandler = (function () {\n    function LayerInteractionHandler(layer) {\n        this.isMouseOver = new Map();\n        this.isMouseDown = new Map();\n        this.layer = layer;\n    }\n    LayerInteractionHandler.prototype.handleMouseOver = function (_view, _mouse) {\n    };\n    LayerInteractionHandler.prototype.handleMouseDown = function (view, mouse, button) {\n        var _this = this;\n        if (this.layer.picking && this.layer.picking.type === types_1.PickType.ALL) {\n            var onMouseDown = this.layer.props.onMouseDown;\n            if (onMouseDown) {\n                var world_1 = view.viewToWorld(mouse);\n                var hitTest_1 = this.layer.picking.hitTest;\n                var query_1 = this.layer.picking.quadTree.query.bind(this.layer.picking.quadTree);\n                var instances = query_1(world_1).filter(function (o) { return hitTest_1(o, world_1, view); });\n                var info = {\n                    button: button,\n                    instances: instances,\n                    layer: this.layer.id,\n                    projection: view,\n                    querySpace: function (check) {\n                        return query_1(check).filter(function (o) { return hitTest_1(o, world_1, view); });\n                    },\n                    screen: [mouse.x, mouse.y],\n                    world: [world_1.x, world_1.y]\n                };\n                onMouseDown(info);\n                this.isMouseDown.clear();\n                instances.forEach(function (o) { return _this.isMouseDown.set(o, true); });\n            }\n        }\n    };\n    LayerInteractionHandler.prototype.handleMouseOut = function (view, mouse) {\n        if (this.layer.picking && this.layer.picking.type === types_1.PickType.ALL) {\n            var onMouseOut = this.layer.props.onMouseOut;\n            if (onMouseOut) {\n                var world_2 = view.viewToWorld(mouse);\n                var query_2 = this.layer.picking.quadTree.query.bind(this.layer.picking.quadTree);\n                var hitTest_2 = this.layer.picking.hitTest;\n                var info = {\n                    instances: Array.from(this.isMouseOver.keys()),\n                    layer: this.layer.id,\n                    projection: view,\n                    querySpace: function (check) {\n                        return query_2(check).filter(function (o) { return hitTest_2(o, world_2, view); });\n                    },\n                    screen: [mouse.x, mouse.y],\n                    world: [world_2.x, world_2.y]\n                };\n                onMouseOut(info);\n            }\n        }\n        this.isMouseOver.clear();\n        this.isMouseDown.clear();\n    };\n    LayerInteractionHandler.prototype.handleMouseUp = function (view, mouse, button) {\n        if (this.layer.picking && this.layer.picking.type === types_1.PickType.ALL) {\n            var onMouseUp = this.layer.props.onMouseUp;\n            if (onMouseUp) {\n                var world_3 = view.viewToWorld(mouse);\n                var hitTest_3 = this.layer.picking.hitTest;\n                var query_3 = this.layer.picking.quadTree.query.bind(this.layer.picking.quadTree);\n                var instances = query_3(world_3).filter(function (o) { return hitTest_3(o, world_3, view); });\n                var info = {\n                    button: button,\n                    instances: instances,\n                    layer: this.layer.id,\n                    projection: view,\n                    querySpace: function (check) {\n                        return query_3(check).filter(function (o) { return hitTest_3(o, world_3, view); });\n                    },\n                    screen: [mouse.x, mouse.y],\n                    world: [world_3.x, world_3.y]\n                };\n                onMouseUp(info);\n            }\n        }\n    };\n    LayerInteractionHandler.prototype.handleMouseMove = function (view, mouse) {\n        var _this = this;\n        if (this.layer.picking && this.layer.picking.type === types_1.PickType.ALL) {\n            var _a = this.layer.props, onMouseOver = _a.onMouseOver, onMouseMove = _a.onMouseMove, onMouseOut = _a.onMouseOut;\n            if (onMouseOver || onMouseMove || onMouseOut) {\n                var info = void 0;\n                var world_4 = view.viewToWorld(mouse);\n                var hitTest_4 = this.layer.picking.hitTest;\n                var query_4 = this.layer.picking.quadTree.query.bind(this.layer.picking.quadTree);\n                var instances = query_4(world_4).filter(function (o) { return hitTest_4(o, world_4, view); });\n                if (onMouseOver) {\n                    var notOverInstances = instances.filter(function (o) { return !_this.isMouseOver.get(o); });\n                    info = {\n                        instances: notOverInstances,\n                        layer: this.layer.id,\n                        projection: view,\n                        querySpace: function (check) {\n                            return query_4(check).filter(function (o) { return hitTest_4(o, world_4, view); });\n                        },\n                        screen: [mouse.x, mouse.y],\n                        world: [world_4.x, world_4.y]\n                    };\n                    if (notOverInstances.length > 0)\n                        onMouseOver(info);\n                }\n                if (onMouseMove) {\n                    info = {\n                        instances: instances,\n                        layer: this.layer.id,\n                        projection: view,\n                        querySpace: function (check) {\n                            return query_4(check).filter(function (o) { return hitTest_4(o, world_4, view); });\n                        },\n                        screen: [mouse.x, mouse.y],\n                        world: [world_4.x, world_4.y]\n                    };\n                    onMouseMove(info);\n                }\n                var isCurrentlyOver_1 = new Map();\n                instances.forEach(function (o) { return isCurrentlyOver_1.set(o, true); });\n                if (onMouseOut) {\n                    var noLongerOver = Array.from(this.isMouseOver.keys()).filter(function (o) { return !isCurrentlyOver_1.get(o); });\n                    info = {\n                        instances: noLongerOver,\n                        layer: this.layer.id,\n                        projection: view,\n                        querySpace: function (check) {\n                            return query_4(check).filter(function (o) { return hitTest_4(o, world_4, view); });\n                        },\n                        screen: [mouse.x, mouse.y],\n                        world: [world_4.x, world_4.y]\n                    };\n                    if (noLongerOver.length > 0)\n                        onMouseOut(info);\n                }\n                this.isMouseOver = isCurrentlyOver_1;\n            }\n        }\n    };\n    LayerInteractionHandler.prototype.handleMouseClick = function (view, mouse, button) {\n        if (this.layer.picking && this.layer.picking.type === types_1.PickType.ALL) {\n            var onMouseClick = this.layer.props.onMouseClick;\n            if (onMouseClick) {\n                var world_5 = view.viewToWorld(mouse);\n                var hitTest_5 = this.layer.picking.hitTest;\n                var query_5 = this.layer.picking.quadTree.query.bind(this.layer.picking.quadTree);\n                var instances = query_5(world_5).filter(function (o) { return hitTest_5(o, world_5, view); });\n                var info = {\n                    button: button,\n                    instances: instances,\n                    layer: this.layer.id,\n                    projection: view,\n                    querySpace: function (check) {\n                        return query_5(check).filter(function (o) { return hitTest_5(o, world_5, view); });\n                    },\n                    screen: [mouse.x, mouse.y],\n                    world: [world_5.x, world_5.y]\n                };\n                onMouseClick(info);\n            }\n        }\n    };\n    LayerInteractionHandler.prototype.handleMouseDrag = function (_view, _mouse) {\n    };\n    return LayerInteractionHandler;\n}());\nexports.LayerInteractionHandler = LayerInteractionHandler;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar types_1 = require(\"../types\");\nvar VECTOR_ACCESSORS = [\"x\", \"y\", \"z\", \"w\"];\nvar InstanceDiffManager = (function () {\n    function InstanceDiffManager(layer) {\n        this.layer = layer;\n    }\n    InstanceDiffManager.prototype.getDiffProcessor = function () {\n        if (this.layer.picking) {\n            if (this.layer.picking.type === types_1.PickType.ALL) {\n                this.quadPicking = this.layer.picking;\n                return [\n                    this.changeInstanceQuad,\n                    this.addInstanceQuad,\n                    this.removeInstanceQuad\n                ];\n            }\n        }\n        return [this.changeInstance, this.addInstance, this.removeInstance];\n    };\n    InstanceDiffManager.prototype.addInstance = function (manager, instance, uniformCluster) {\n        if (uniformCluster) {\n            manager.changeInstance(manager, instance, uniformCluster);\n        }\n        else {\n            var uniforms = manager.layer.uniformManager.add(instance);\n            if (uniforms) {\n                instance.active = true;\n                manager.updateInstance(instance, uniforms);\n            }\n        }\n    };\n    InstanceDiffManager.prototype.addInstanceQuad = function (manager, instance, uniformCluster) {\n        if (uniformCluster) {\n            manager.changeInstanceQuad(manager, instance, uniformCluster);\n        }\n        else {\n            var uniforms = manager.layer.uniformManager.add(instance);\n            if (uniforms) {\n                instance.active = true;\n                manager.updateInstance(instance, uniforms);\n                manager.quadPicking.quadTree.remove(instance);\n                manager.quadPicking.quadTree.add(instance);\n            }\n        }\n    };\n    InstanceDiffManager.prototype.changeInstance = function (manager, instance, uniformCluster) {\n        if (uniformCluster) {\n            manager.updateInstance(instance, uniformCluster);\n        }\n        else {\n            manager.addInstance(manager, instance, uniformCluster);\n        }\n    };\n    InstanceDiffManager.prototype.changeInstanceQuad = function (manager, instance, uniformCluster) {\n        if (uniformCluster) {\n            manager.updateInstance(instance, uniformCluster);\n            manager.quadPicking.quadTree.remove(instance);\n            manager.quadPicking.quadTree.add(instance);\n        }\n        else {\n            manager.addInstanceQuad(manager, instance, uniformCluster);\n        }\n    };\n    InstanceDiffManager.prototype.removeInstance = function (manager, instance, uniformCluster) {\n        if (uniformCluster) {\n            instance.active = false;\n            manager.updateInstance(instance, uniformCluster);\n            manager.layer.uniformManager.remove(instance);\n        }\n    };\n    InstanceDiffManager.prototype.removeInstanceQuad = function (manager, instance, uniformCluster) {\n        if (uniformCluster) {\n            instance.active = false;\n            manager.updateInstance(instance, uniformCluster);\n            manager.layer.uniformManager.remove(instance);\n            manager.quadPicking.quadTree.remove(instance);\n        }\n    };\n    InstanceDiffManager.prototype.updateInstance = function (instance, uniformCluster) {\n        if (instance.active) {\n            var uniforms = uniformCluster.uniform;\n            var uniformRangeStart = uniformCluster.uniformRange[0];\n            var instanceData = uniforms.value;\n            var instanceUniform = void 0, value = void 0, block = void 0, start = void 0;\n            var k = void 0, endk = void 0;\n            for (var i = 0, end = this.layer.instanceAttributes.length; i < end; ++i) {\n                instanceUniform = this.layer.instanceAttributes[i];\n                value = instanceUniform.update(instance);\n                block = instanceData[uniformRangeStart + instanceUniform.block];\n                instanceUniform.atlas &&\n                    this.layer.resource.setTargetAtlas(instanceUniform.atlas.key);\n                start = instanceUniform.blockIndex;\n                if (start === undefined) {\n                    continue;\n                }\n                for (k = start, endk = value.length + start; k < endk; ++k) {\n                    block[VECTOR_ACCESSORS[k]] = value[k - start];\n                }\n            }\n            uniforms.value = instanceData;\n        }\n        else {\n            var uniforms = uniformCluster.uniform;\n            var uniformRangeStart = uniformCluster.uniformRange[0];\n            var instanceData = uniforms.value;\n            var instanceUniform = void 0, value = void 0, block = void 0, start = void 0;\n            instanceUniform = this.layer.activeAttribute;\n            value = instanceUniform.update(instance);\n            block = instanceData[uniformRangeStart + instanceUniform.block];\n            instanceUniform.atlas &&\n                this.layer.resource.setTargetAtlas(instanceUniform.atlas.key);\n            start = instanceUniform.blockIndex;\n            if (start !== undefined) {\n                for (var k = start, endk = value.length + start; k < endk; ++k) {\n                    block[VECTOR_ACCESSORS[k]] = value[k - start];\n                }\n            }\n            uniforms.value = instanceData;\n        }\n    };\n    return InstanceDiffManager;\n}());\nexports.InstanceDiffManager = InstanceDiffManager;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar UID = 0;\nfunction uid() {\n    return ++UID;\n}\nexports.uid = uid;\nvar CUID = 0;\nfunction colorUID() {\n    return ++CUID % 0xffffff;\n}\nexports.colorUID = colorUID;\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar bounds_1 = require(\"../primitives/bounds\");\nvar maxPopulation = 5;\nvar maxDepth = 10;\nvar Quadrants = (function () {\n    function Quadrants(bounds, depth, getBounds, childToNode, childToBounds) {\n        var mid = bounds.mid;\n        this.TL = new Node(bounds.x, mid.x, bounds.y, mid.y, getBounds, depth);\n        this.TR = new Node(mid.x, bounds.right, bounds.y, mid.y, getBounds, depth);\n        this.BL = new Node(bounds.x, mid.x, mid.y, bounds.bottom, getBounds, depth);\n        this.BR = new Node(mid.x, bounds.right, mid.y, bounds.bottom, getBounds, depth);\n        this.TL.childToNode = childToNode;\n        this.TR.childToNode = childToNode;\n        this.BL.childToNode = childToNode;\n        this.BR.childToNode = childToNode;\n        this.TL.childToBounds = childToBounds;\n        this.TR.childToBounds = childToBounds;\n        this.BL.childToBounds = childToBounds;\n        this.BR.childToBounds = childToBounds;\n    }\n    Quadrants.prototype.destroy = function () {\n        this.TL.destroy();\n        this.TR.destroy();\n        this.BL.destroy();\n        this.BR.destroy();\n        delete this.TL;\n        delete this.TR;\n        delete this.BL;\n        delete this.BR;\n    };\n    return Quadrants;\n}());\nexports.Quadrants = Quadrants;\nvar Node = (function () {\n    function Node(left, right, top, bottom, getBounds, depth) {\n        if (depth === void 0) { depth = 0; }\n        this.children = [];\n        this.depth = 0;\n        this.nodes = null;\n        if (arguments.length >= 4) {\n            this.bounds = new bounds_1.Bounds({ left: left, right: right, top: top, bottom: bottom });\n        }\n        else {\n            this.bounds = new bounds_1.Bounds({ left: 0, right: 1, top: 1, bottom: 0 });\n        }\n        this.depth = depth;\n        this.getBounds = getBounds;\n        if (this.depth === 0) {\n            this.nullBounded = [];\n            this.childToNode = new Map();\n            this.childToBounds = new Map();\n        }\n    }\n    Node.prototype.destroy = function () {\n        delete this.children;\n        delete this.bounds;\n        if (this.nodes) {\n            this.nodes.destroy();\n            this.nodes = null;\n        }\n    };\n    Node.prototype.add = function (child) {\n        var bounds = this.childToBounds.get(child);\n        if (!bounds) {\n            bounds = this.getBounds(child);\n            this.childToBounds.set(child, bounds);\n        }\n        if (!bounds || bounds.isInside(this.bounds)) {\n            return this.doAdd(child, bounds);\n        }\n        else {\n            this.cover(bounds);\n            return this.add(child);\n        }\n    };\n    Node.prototype.addAll = function (children) {\n        var _this = this;\n        var minX = Number.MAX_VALUE;\n        var minY = Number.MAX_VALUE;\n        var maxX = -Number.MAX_VALUE;\n        var maxY = -Number.MAX_VALUE;\n        children.forEach(function (child) {\n            var bounds = _this.getBounds(child);\n            _this.childToBounds.set(child, bounds);\n            if (!bounds)\n                return;\n            if (bounds.x < minX) {\n                minX = bounds.x;\n            }\n            if (bounds.right > maxX) {\n                maxX = bounds.right;\n            }\n            if (bounds.bottom > maxY) {\n                maxY = bounds.bottom;\n            }\n            if (bounds.y < minY) {\n                minY = bounds.y;\n            }\n        });\n        if (minX !== Number.MAX_VALUE &&\n            minY !== Number.MAX_VALUE &&\n            maxX !== -Number.MAX_VALUE &&\n            maxY !== -Number.MAX_VALUE) {\n            this.cover(new bounds_1.Bounds({ left: minX, right: maxX, bottom: maxY, top: minY }));\n        }\n        children.forEach(function (child) {\n            return _this.doAdd(child, _this.childToBounds.get(child) || null, true);\n        });\n    };\n    Node.prototype.cover = function (bounds) {\n        var _this = this;\n        if (bounds.isInside(this.bounds)) {\n            return;\n        }\n        this.bounds.encapsulate(bounds);\n        this.bounds.x -= 1;\n        this.bounds.y -= 1;\n        this.bounds.width += 2;\n        this.bounds.height += 2;\n        var allChildren = this.gatherChildren([]);\n        this.children = [];\n        if (this.nodes) {\n            this.nodes.destroy();\n            this.nodes = null;\n        }\n        this.childToNode.clear();\n        allChildren.forEach(function (child) {\n            return _this.doAdd(child, _this.childToBounds.get(child) || null);\n        });\n    };\n    Node.prototype.doAdd = function (child, bounds, fromSplit) {\n        if (!bounds && this.depth === 0) {\n            this.nullBounded.push(child);\n            this.childToNode.set(child, this);\n            return true;\n        }\n        if (!bounds) {\n            console.warn(\"A null bounds was added to a Quad Tree node below the top node, which is invalid.\");\n            return false;\n        }\n        if (this.nodes) {\n            if (bounds.isInside(this.nodes.TL.bounds)) {\n                return this.nodes.TL.doAdd(child, bounds, fromSplit);\n            }\n            if (bounds.isInside(this.nodes.TR.bounds)) {\n                return this.nodes.TR.doAdd(child, bounds, fromSplit);\n            }\n            if (bounds.isInside(this.nodes.BL.bounds)) {\n                return this.nodes.BL.doAdd(child, bounds, fromSplit);\n            }\n            if (bounds.isInside(this.nodes.BR.bounds)) {\n                return this.nodes.BR.doAdd(child, bounds, fromSplit);\n            }\n            this.children.push(child);\n            this.childToNode.set(child, this);\n            return true;\n        }\n        else if (bounds.isInside(this.bounds)) {\n            this.children.push(child);\n            this.childToNode.set(child, this);\n            if (this.children.length > maxPopulation && this.depth < maxDepth) {\n                this.split();\n            }\n            return true;\n        }\n        if (isNaN(bounds.width + bounds.height + bounds.x + bounds.y)) {\n            console.error(\"Child did not fit into bounds because a dimension is NaN\", child, bounds);\n        }\n        else if (bounds.area === 0) {\n            console.error(\"Child did not fit into bounds because the area is zero\", child, bounds);\n        }\n        else {\n            console.error(\"Child did not get insertted.\", \"Parent:\", this.bounds.toString(), \"Child:\", bounds.toString(), \"Inside Checks:\", bounds.x >= this.bounds.x, bounds.right <= this.bounds.right, bounds.y >= this.bounds.y, bounds.bottom <= this.bounds.bottom);\n        }\n        return true;\n    };\n    Node.prototype.doRemove = function (child) {\n        var index = this.children.indexOf(child);\n        if (index > -1) {\n            this.children.splice(index, 1);\n            this.childToNode.delete(child);\n            this.childToBounds.delete(child);\n        }\n    };\n    Node.prototype.gatherChildren = function (list) {\n        this.children.forEach(function (child) { return list.push(child); });\n        if (this.nodes) {\n            this.nodes.TL.gatherChildren(list);\n            this.nodes.TR.gatherChildren(list);\n            this.nodes.BL.gatherChildren(list);\n            this.nodes.BR.gatherChildren(list);\n        }\n        return list;\n    };\n    Node.prototype.query = function (bounds, visit) {\n        var found = [];\n        if (this.depth === 0) {\n            found = this.nullBounded.slice(0);\n        }\n        if (bounds instanceof bounds_1.Bounds) {\n            if (bounds.hitBounds(this.bounds)) {\n                return this.queryBounds(bounds, found, visit);\n            }\n        }\n        if (this.bounds.containsPoint(bounds)) {\n            return this.queryPoint(bounds, found, visit);\n        }\n        return found;\n    };\n    Node.prototype.queryBounds = function (b, list, visit) {\n        var _this = this;\n        this.children.forEach(function (c) {\n            var bounds = _this.childToBounds.get(c);\n            if (bounds && bounds.hitBounds(b)) {\n                list.push(c);\n            }\n        });\n        if (visit) {\n            visit(this);\n        }\n        if (this.nodes) {\n            if (b.hitBounds(this.nodes.TL.bounds)) {\n                this.nodes.TL.queryBounds(b, list, visit);\n            }\n            if (b.hitBounds(this.nodes.TR.bounds)) {\n                this.nodes.TR.queryBounds(b, list, visit);\n            }\n            if (b.hitBounds(this.nodes.BL.bounds)) {\n                this.nodes.BL.queryBounds(b, list, visit);\n            }\n            if (b.hitBounds(this.nodes.BR.bounds)) {\n                this.nodes.BR.queryBounds(b, list, visit);\n            }\n        }\n        return list;\n    };\n    Node.prototype.queryPoint = function (p, list, visit) {\n        var _this = this;\n        this.children.forEach(function (c) {\n            var bounds = _this.childToBounds.get(c);\n            if (bounds && bounds.containsPoint(p)) {\n                list.push(c);\n            }\n        });\n        if (visit) {\n            visit(this);\n        }\n        if (this.nodes) {\n            if (this.nodes.TL.bounds.containsPoint(p)) {\n                this.nodes.TL.queryPoint(p, list, visit);\n            }\n            if (this.nodes.TR.bounds.containsPoint(p)) {\n                this.nodes.TR.queryPoint(p, list, visit);\n            }\n            if (this.nodes.BL.bounds.containsPoint(p)) {\n                this.nodes.BL.queryPoint(p, list, visit);\n            }\n            if (this.nodes.BR.bounds.containsPoint(p)) {\n                this.nodes.BR.queryPoint(p, list, visit);\n            }\n        }\n        return list;\n    };\n    Node.prototype.remove = function (child) {\n        if (this.childToNode) {\n            var node = this.childToNode.get(child);\n            if (node && node.depth === 0) {\n                var index = node.nullBounded.indexOf(child);\n                if (index > -1) {\n                    node.nullBounded.splice(index);\n                    this.childToNode.delete(child);\n                    this.childToBounds.delete(child);\n                    return;\n                }\n            }\n            if (node) {\n                node.doRemove(child);\n            }\n        }\n    };\n    Node.prototype.split = function () {\n        var allChildren = this.gatherChildren([]);\n        this.nodes = new Quadrants(this.bounds, this.depth + 1, this.getBounds, this.childToNode, this.childToBounds);\n        this.children = [];\n        for (var i = 0, end = allChildren.length; i < end; ++i) {\n            var child = allChildren[i];\n            this.doAdd(child, this.childToBounds.get(child) || null, true);\n        }\n    };\n    Node.prototype.visit = function (cb) {\n        var finished = Boolean(cb(this));\n        if (this.nodes && !finished) {\n            this.nodes.TL.visit(cb);\n            this.nodes.TR.visit(cb);\n            this.nodes.BL.visit(cb);\n            this.nodes.BR.visit(cb);\n        }\n    };\n    return Node;\n}());\nexports.Node = Node;\nvar TrackedQuadTree = (function (_super) {\n    __extends(TrackedQuadTree, _super);\n    function TrackedQuadTree() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    return TrackedQuadTree;\n}(Node));\nexports.TrackedQuadTree = TrackedQuadTree;\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar chart_camera_1 = require(\"./chart-camera\");\nvar ReferenceCamera = (function (_super) {\n    __extends(ReferenceCamera, _super);\n    function ReferenceCamera(options) {\n        var _this = _super.call(this) || this;\n        _this.offsetFilter = function (offset) { return offset; };\n        _this.scaleFilter = function (scale) { return scale; };\n        Object.assign(_this, options);\n        return _this;\n    }\n    Object.defineProperty(ReferenceCamera.prototype, \"offset\", {\n        get: function () {\n            return this.offsetFilter(this.base.offset);\n        },\n        set: function (_val) {\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(ReferenceCamera.prototype, \"scale\", {\n        get: function () {\n            return this.scaleFilter(this.base.scale);\n        },\n        set: function (_val) {\n        },\n        enumerable: true,\n        configurable: true\n    });\n    return ReferenceCamera;\n}(chart_camera_1.ChartCamera));\nexports.ReferenceCamera = ReferenceCamera;\n","/**\n * Helpers.\n */\n\nvar s = 1000;\nvar m = s * 60;\nvar h = m * 60;\nvar d = h * 24;\nvar y = d * 365.25;\n\n/**\n * Parse or format the given `val`.\n *\n * Options:\n *\n *  - `long` verbose formatting [false]\n *\n * @param {String|Number} val\n * @param {Object} [options]\n * @throws {Error} throw an error if val is not a non-empty string or a number\n * @return {String|Number}\n * @api public\n */\n\nmodule.exports = function(val, options) {\n  options = options || {};\n  var type = typeof val;\n  if (type === 'string' && val.length > 0) {\n    return parse(val);\n  } else if (type === 'number' && isNaN(val) === false) {\n    return options.long ? fmtLong(val) : fmtShort(val);\n  }\n  throw new Error(\n    'val is not a non-empty string or a valid number. val=' +\n      JSON.stringify(val)\n  );\n};\n\n/**\n * Parse the given `str` and return milliseconds.\n *\n * @param {String} str\n * @return {Number}\n * @api private\n */\n\nfunction parse(str) {\n  str = String(str);\n  if (str.length > 100) {\n    return;\n  }\n  var match = /^((?:\\d+)?\\.?\\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(\n    str\n  );\n  if (!match) {\n    return;\n  }\n  var n = parseFloat(match[1]);\n  var type = (match[2] || 'ms').toLowerCase();\n  switch (type) {\n    case 'years':\n    case 'year':\n    case 'yrs':\n    case 'yr':\n    case 'y':\n      return n * y;\n    case 'days':\n    case 'day':\n    case 'd':\n      return n * d;\n    case 'hours':\n    case 'hour':\n    case 'hrs':\n    case 'hr':\n    case 'h':\n      return n * h;\n    case 'minutes':\n    case 'minute':\n    case 'mins':\n    case 'min':\n    case 'm':\n      return n * m;\n    case 'seconds':\n    case 'second':\n    case 'secs':\n    case 'sec':\n    case 's':\n      return n * s;\n    case 'milliseconds':\n    case 'millisecond':\n    case 'msecs':\n    case 'msec':\n    case 'ms':\n      return n;\n    default:\n      return undefined;\n  }\n}\n\n/**\n * Short format for `ms`.\n *\n * @param {Number} ms\n * @return {String}\n * @api private\n */\n\nfunction fmtShort(ms) {\n  if (ms >= d) {\n    return Math.round(ms / d) + 'd';\n  }\n  if (ms >= h) {\n    return Math.round(ms / h) + 'h';\n  }\n  if (ms >= m) {\n    return Math.round(ms / m) + 'm';\n  }\n  if (ms >= s) {\n    return Math.round(ms / s) + 's';\n  }\n  return ms + 'ms';\n}\n\n/**\n * Long format for `ms`.\n *\n * @param {Number} ms\n * @return {String}\n * @api private\n */\n\nfunction fmtLong(ms) {\n  return plural(ms, d, 'day') ||\n    plural(ms, h, 'hour') ||\n    plural(ms, m, 'minute') ||\n    plural(ms, s, 'second') ||\n    ms + ' ms';\n}\n\n/**\n * Pluralization helper.\n */\n\nfunction plural(ms, n, name) {\n  if (ms < n) {\n    return;\n  }\n  if (ms < n * 1.5) {\n    return Math.floor(ms / n) + ' ' + name;\n  }\n  return Math.ceil(ms / n) + ' ' + name + 's';\n}\n","\n/**\n * This is the common logic for both the Node.js and web browser\n * implementations of `debug()`.\n *\n * Expose `debug()` as the module.\n */\n\nexports = module.exports = createDebug.debug = createDebug['default'] = createDebug;\nexports.coerce = coerce;\nexports.disable = disable;\nexports.enable = enable;\nexports.enabled = enabled;\nexports.humanize = require('ms');\n\n/**\n * Active `debug` instances.\n */\nexports.instances = [];\n\n/**\n * The currently active debug mode names, and names to skip.\n */\n\nexports.names = [];\nexports.skips = [];\n\n/**\n * Map of special \"%n\" handling functions, for the debug \"format\" argument.\n *\n * Valid key names are a single, lower or upper-case letter, i.e. \"n\" and \"N\".\n */\n\nexports.formatters = {};\n\n/**\n * Select a color.\n * @param {String} namespace\n * @return {Number}\n * @api private\n */\n\nfunction selectColor(namespace) {\n  var hash = 0, i;\n\n  for (i in namespace) {\n    hash  = ((hash << 5) - hash) + namespace.charCodeAt(i);\n    hash |= 0; // Convert to 32bit integer\n  }\n\n  return exports.colors[Math.abs(hash) % exports.colors.length];\n}\n\n/**\n * Create a debugger with the given `namespace`.\n *\n * @param {String} namespace\n * @return {Function}\n * @api public\n */\n\nfunction createDebug(namespace) {\n\n  var prevTime;\n\n  function debug() {\n    // disabled?\n    if (!debug.enabled) return;\n\n    var self = debug;\n\n    // set `diff` timestamp\n    var curr = +new Date();\n    var ms = curr - (prevTime || curr);\n    self.diff = ms;\n    self.prev = prevTime;\n    self.curr = curr;\n    prevTime = curr;\n\n    // turn the `arguments` into a proper Array\n    var args = new Array(arguments.length);\n    for (var i = 0; i < args.length; i++) {\n      args[i] = arguments[i];\n    }\n\n    args[0] = exports.coerce(args[0]);\n\n    if ('string' !== typeof args[0]) {\n      // anything else let's inspect with %O\n      args.unshift('%O');\n    }\n\n    // apply any `formatters` transformations\n    var index = 0;\n    args[0] = args[0].replace(/%([a-zA-Z%])/g, function(match, format) {\n      // if we encounter an escaped % then don't increase the array index\n      if (match === '%%') return match;\n      index++;\n      var formatter = exports.formatters[format];\n      if ('function' === typeof formatter) {\n        var val = args[index];\n        match = formatter.call(self, val);\n\n        // now we need to remove `args[index]` since it's inlined in the `format`\n        args.splice(index, 1);\n        index--;\n      }\n      return match;\n    });\n\n    // apply env-specific formatting (colors, etc.)\n    exports.formatArgs.call(self, args);\n\n    var logFn = debug.log || exports.log || console.log.bind(console);\n    logFn.apply(self, args);\n  }\n\n  debug.namespace = namespace;\n  debug.enabled = exports.enabled(namespace);\n  debug.useColors = exports.useColors();\n  debug.color = selectColor(namespace);\n  debug.destroy = destroy;\n\n  // env-specific initialization logic for debug instances\n  if ('function' === typeof exports.init) {\n    exports.init(debug);\n  }\n\n  exports.instances.push(debug);\n\n  return debug;\n}\n\nfunction destroy () {\n  var index = exports.instances.indexOf(this);\n  if (index !== -1) {\n    exports.instances.splice(index, 1);\n    return true;\n  } else {\n    return false;\n  }\n}\n\n/**\n * Enables a debug mode by namespaces. This can include modes\n * separated by a colon and wildcards.\n *\n * @param {String} namespaces\n * @api public\n */\n\nfunction enable(namespaces) {\n  exports.save(namespaces);\n\n  exports.names = [];\n  exports.skips = [];\n\n  var i;\n  var split = (typeof namespaces === 'string' ? namespaces : '').split(/[\\s,]+/);\n  var len = split.length;\n\n  for (i = 0; i < len; i++) {\n    if (!split[i]) continue; // ignore empty strings\n    namespaces = split[i].replace(/\\*/g, '.*?');\n    if (namespaces[0] === '-') {\n      exports.skips.push(new RegExp('^' + namespaces.substr(1) + '$'));\n    } else {\n      exports.names.push(new RegExp('^' + namespaces + '$'));\n    }\n  }\n\n  for (i = 0; i < exports.instances.length; i++) {\n    var instance = exports.instances[i];\n    instance.enabled = exports.enabled(instance.namespace);\n  }\n}\n\n/**\n * Disable debug output.\n *\n * @api public\n */\n\nfunction disable() {\n  exports.enable('');\n}\n\n/**\n * Returns true if the given mode name is enabled, false otherwise.\n *\n * @param {String} name\n * @return {Boolean}\n * @api public\n */\n\nfunction enabled(name) {\n  if (name[name.length - 1] === '*') {\n    return true;\n  }\n  var i, len;\n  for (i = 0, len = exports.skips.length; i < len; i++) {\n    if (exports.skips[i].test(name)) {\n      return false;\n    }\n  }\n  for (i = 0, len = exports.names.length; i < len; i++) {\n    if (exports.names[i].test(name)) {\n      return true;\n    }\n  }\n  return false;\n}\n\n/**\n * Coerce `val`.\n *\n * @param {Mixed} val\n * @return {Mixed}\n * @api private\n */\n\nfunction coerce(val) {\n  if (val instanceof Error) return val.stack || val.message;\n  return val;\n}\n","// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n","module.exports = __WEBPACK_EXTERNAL_MODULE__103__;","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar mobx_1 = require(\"mobx\");\nvar DiffType;\n(function (DiffType) {\n    DiffType[DiffType[\"CHANGE\"] = 0] = \"CHANGE\";\n    DiffType[DiffType[\"INSERT\"] = 1] = \"INSERT\";\n    DiffType[DiffType[\"REMOVE\"] = 2] = \"REMOVE\";\n})(DiffType = exports.DiffType || (exports.DiffType = {}));\nfunction isObservableArray(val) {\n    return Boolean(val.observe);\n}\nvar UPDATE_FLAG = \"update\";\nvar SPLICE_FLAG = \"splice\";\nvar DataProvider = (function () {\n    function DataProvider(data) {\n        var _this = this;\n        this.active = true;\n        this.instanceDisposers = new Map();\n        this.instanceChanges = new Map();\n        this.instanceById = new Map();\n        this.isChanged = false;\n        this._changeList = [];\n        this.monitorItem = function (changes) { return function (change) {\n            if (_this.active) {\n                if (change.type === UPDATE_FLAG) {\n                    changes.set(change.object, DiffType.CHANGE);\n                    _this.isChanged = true;\n                }\n                else {\n                    console.warn(\"Received an update type not supported by monitorItem:\", change.type);\n                }\n            }\n            return change;\n        }; };\n        this._instances = mobx_1.observable(data || []);\n        if (isObservableArray(this._instances)) {\n            this.listDisposer = mobx_1.intercept(this._instances, this.monitorList(this._instances, this.instanceChanges, this.instanceById, this.instanceDisposers));\n        }\n    }\n    Object.defineProperty(DataProvider.prototype, \"instances\", {\n        get: function () {\n            return this._instances;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(DataProvider.prototype, \"changeList\", {\n        get: function () {\n            this.active = false;\n            if (this.isChanged) {\n                var changes_1 = [];\n                this.instanceChanges.forEach(function (changeType, instance) {\n                    changes_1.push([instance, changeType]);\n                });\n                this._changeList = changes_1;\n            }\n            return this._changeList;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    DataProvider.prototype.destroy = function () {\n        this.listDisposer();\n        this.instanceDisposers.forEach(function (disposer) { return disposer(); });\n        delete this._instances;\n        this.instanceChanges.clear();\n        delete this._changeList;\n    };\n    DataProvider.prototype.monitorList = function (_list, changes, lookUp, disposers) {\n        var _this = this;\n        return function (change) {\n            if (_this.active) {\n                if (change.type === SPLICE_FLAG) {\n                    for (var i = change.index, end = change.index + change.removedCount; i < end; ++i) {\n                        var item = change.object[i];\n                        changes.set(item, DiffType.REMOVE);\n                        _this.isChanged = true;\n                        var dispose = disposers.get(item);\n                        if (dispose) {\n                            dispose();\n                        }\n                    }\n                    for (var i = 0, end = change.added.length; i < end; ++i) {\n                        var item = (change.added[i] = mobx_1.observable(change.added[i]));\n                        changes.set(item, DiffType.INSERT);\n                        _this.isChanged = true;\n                        lookUp.set(item.id, item);\n                        disposers.set(item, mobx_1.intercept(item, _this.monitorItem(changes)));\n                    }\n                }\n                else {\n                    console.warn(\"Received an update type not supported by monitorList:\", change.type);\n                }\n            }\n            return change;\n        };\n    };\n    DataProvider.prototype.resolve = function () {\n        this.instanceById.clear();\n        this.instanceChanges.clear();\n        this._changeList = [];\n        this.active = true;\n    };\n    return DataProvider;\n}());\nexports.DataProvider = DataProvider;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction isNumber(val) {\n    return !isNaN(val);\n}\nvar AnimationHelper = (function () {\n    function AnimationHelper(surface) {\n        this.surface = surface;\n    }\n    AnimationHelper.prototype.groupAnimation = function (easingMethod, groupCount, baseDelay, delayGap, modifyInstances) {\n        var startFrameTime = this.surface.frameMetrics.currentTime;\n        this.surface.commit(startFrameTime);\n        for (var i = 0; i < groupCount; ++i) {\n            var gap = isNumber(delayGap)\n                ? delayGap\n                : delayGap(i, easingMethod.delay);\n            easingMethod.delay = baseDelay + gap * i;\n            modifyInstances(i);\n            this.surface.commit(startFrameTime);\n        }\n    };\n    return AnimationHelper;\n}());\nexports.AnimationHelper = AnimationHelper;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction squareDistance(p1, p2) {\n    var dx = p1.x - p2.x;\n    var dy = p1.y - p2.y;\n    return dx * dx + dy * dy;\n}\nvar Point = (function () {\n    function Point() {\n    }\n    Point.add = function (p1, p2, out) {\n        if (out) {\n            out.x = p1.x + p2.x;\n            out.y = p1.y + p2.y;\n            return out;\n        }\n        return {\n            x: p1.x + p2.x,\n            y: p1.y + p2.y\n        };\n    };\n    Point.getClosest = function (testPoint, points) {\n        var closestDistance = Number.MAX_VALUE;\n        var closestPoint = testPoint;\n        var distance;\n        var findClosest = function (point) {\n            distance = squareDistance(point, testPoint);\n            if (distance < closestDistance) {\n                closestDistance = distance;\n                closestPoint = point;\n            }\n        };\n        points.forEach(findClosest);\n        return closestPoint;\n    };\n    Point.getClosestIndex = function (testPoint, points) {\n        var closestDistance = Number.MAX_VALUE;\n        var closestPoint = 0;\n        var distance;\n        var findClosest = function (point, i) {\n            distance = squareDistance(point, testPoint);\n            if (distance < closestDistance) {\n                closestDistance = distance;\n                closestPoint = i;\n            }\n        };\n        points.forEach(findClosest);\n        return closestPoint;\n    };\n    Point.subtract = function (amount, from, normalize) {\n        if (normalize === void 0) { normalize = false; }\n        var dx = from.x - amount.x;\n        var dy = from.y - amount.y;\n        if (normalize) {\n            var magnitude = Math.sqrt(dx * dx + dy * dy);\n            dx /= magnitude;\n            dy /= magnitude;\n        }\n        return {\n            x: dx,\n            y: dy\n        };\n    };\n    Point.getDistance = function (p1, p2, squared) {\n        if (squared === void 0) { squared = false; }\n        if (squared) {\n            return squareDistance(p1, p2);\n        }\n        return Math.sqrt(squareDistance(p1, p2));\n    };\n    Point.getMidpoint = function (p1, p2) {\n        var direction = Point.subtract(p1, p2);\n        return {\n            x: direction.x / 2 + p1.x,\n            y: direction.y / 2 + p1.y\n        };\n    };\n    Point.make = function (x, y) {\n        return { x: x, y: y };\n    };\n    Point.scale = function (p1, s, out) {\n        if (out) {\n            out.x = p1.x * s;\n            out.y = p1.y * s;\n            return out;\n        }\n        return {\n            x: p1.x * s,\n            y: p1.y * s\n        };\n    };\n    Point.zero = function () {\n        return {\n            x: 0,\n            y: 0\n        };\n    };\n    return Point;\n}());\nexports.Point = Point;\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Three = require(\"three\");\nvar primitives_1 = require(\"../../primitives\");\nvar layer_1 = require(\"../../surface/layer\");\nvar types_1 = require(\"../../types\");\nvar types_2 = require(\"../types\");\nvar min = Math.min, max = Math.max;\nvar ImageLayer = (function (_super) {\n    __extends(ImageLayer, _super);\n    function ImageLayer() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ImageLayer.prototype.getInstancePickingMethods = function () {\n        return {\n            boundsAccessor: function (image) {\n                var anchorEffect = [0, 0];\n                if (image.anchor) {\n                    anchorEffect[0] = image.anchor.x || 0;\n                    anchorEffect[1] = image.anchor.y || 0;\n                }\n                var topLeft = [image.x - anchorEffect[0], image.y - anchorEffect[1]];\n                return new primitives_1.Bounds({\n                    height: image.height,\n                    width: image.width,\n                    x: topLeft[0],\n                    y: topLeft[1]\n                });\n            },\n            hitTest: function (image, point, view) {\n                var maxScale = max.apply(void 0, view.camera.scale);\n                var minScale = min.apply(void 0, view.camera.scale);\n                if (image.scaling === types_2.ScaleType.ALWAYS) {\n                    return true;\n                }\n                else if (image.scaling === types_2.ScaleType.BOUND_MAX) {\n                    if (minScale <= 1 && maxScale <= 1) {\n                        return true;\n                    }\n                    else {\n                        var anchorEffect = [0, 0];\n                        if (image.anchor) {\n                            anchorEffect[0] = image.anchor.x || 0;\n                            anchorEffect[1] = image.anchor.y || 0;\n                        }\n                        var topLeft = view.worldToScreen({\n                            x: image.x - anchorEffect[0] / view.camera.scale[0],\n                            y: image.y - anchorEffect[1] / view.camera.scale[1]\n                        });\n                        var screenPoint = view.worldToScreen(point);\n                        return new primitives_1.Bounds({\n                            height: image.height,\n                            width: image.width,\n                            x: topLeft.x,\n                            y: topLeft.y\n                        }).containsPoint(screenPoint);\n                    }\n                }\n                else if (image.scaling === types_2.ScaleType.NEVER) {\n                    var anchorEffect = [0, 0];\n                    if (image.anchor) {\n                        anchorEffect[0] = image.anchor.x || 0;\n                        anchorEffect[1] = image.anchor.y || 0;\n                    }\n                    var topLeft = view.worldToScreen({\n                        x: image.x - anchorEffect[0] / view.camera.scale[0],\n                        y: image.y - anchorEffect[1] / view.camera.scale[1]\n                    });\n                    var screenPoint = view.worldToScreen(point);\n                    return new primitives_1.Bounds({\n                        height: image.height,\n                        width: image.width,\n                        x: topLeft.x,\n                        y: topLeft.y\n                    }).containsPoint(screenPoint);\n                }\n                return true;\n            }\n        };\n    };\n    ImageLayer.prototype.initShader = function () {\n        var _this = this;\n        var vertexToNormal = {\n            0: 1,\n            1: 1,\n            2: -1,\n            3: 1,\n            4: -1,\n            5: -1\n        };\n        var vertexToSide = {\n            0: 0,\n            1: 0,\n            2: 0,\n            3: 1,\n            4: 1,\n            5: 1\n        };\n        return {\n            fs: require(\"./image-layer.fs\"),\n            instanceAttributes: [\n                {\n                    block: 0,\n                    blockIndex: types_1.InstanceBlockIndex.ONE,\n                    name: \"location\",\n                    size: types_1.InstanceAttributeSize.TWO,\n                    update: function (o) { return [o.x, o.y]; }\n                },\n                {\n                    block: 0,\n                    blockIndex: types_1.InstanceBlockIndex.THREE,\n                    name: \"anchor\",\n                    size: types_1.InstanceAttributeSize.TWO,\n                    update: function (o) { return [o.anchor.x || 0, o.anchor.y || 0]; }\n                },\n                {\n                    block: 1,\n                    blockIndex: types_1.InstanceBlockIndex.ONE,\n                    name: \"size\",\n                    size: types_1.InstanceAttributeSize.TWO,\n                    update: function (o) { return [o.width, o.height]; }\n                },\n                {\n                    block: 1,\n                    blockIndex: types_1.InstanceBlockIndex.THREE,\n                    name: \"depth\",\n                    size: types_1.InstanceAttributeSize.ONE,\n                    update: function (o) { return [o.depth]; }\n                },\n                {\n                    block: 1,\n                    blockIndex: types_1.InstanceBlockIndex.FOUR,\n                    name: \"scaling\",\n                    size: types_1.InstanceAttributeSize.ONE,\n                    update: function (o) { return [o.scaling]; }\n                },\n                {\n                    atlas: {\n                        key: this.props.atlas || \"\",\n                        name: \"imageAtlas\"\n                    },\n                    block: 2,\n                    name: \"texture\",\n                    update: function (o) { return _this.resource.request(_this, o, o.resource); }\n                },\n                {\n                    block: 3,\n                    blockIndex: types_1.InstanceBlockIndex.ONE,\n                    name: \"tint\",\n                    size: types_1.InstanceAttributeSize.FOUR,\n                    update: function (o) { return o.tint; }\n                }\n            ],\n            uniforms: [\n                {\n                    name: \"scaleFactor\",\n                    size: types_1.UniformSize.ONE,\n                    update: function (_u) { return [1]; }\n                }\n            ],\n            vertexAttributes: [\n                {\n                    name: \"position\",\n                    size: types_1.VertexAttributeSize.THREE,\n                    update: function (vertex) { return [\n                        vertexToNormal[vertex],\n                        vertexToSide[vertex],\n                        0\n                    ]; }\n                }\n            ],\n            vertexCount: 6,\n            vs: require(\"./image-layer.vs\")\n        };\n    };\n    ImageLayer.prototype.getModelType = function () {\n        return {\n            drawMode: Three.TriangleStripDrawMode,\n            modelType: Three.Mesh\n        };\n    };\n    ImageLayer.prototype.getMaterialOptions = function () {\n        return {\n            blending: Three.CustomBlending,\n            blendSrc: Three.OneFactor,\n            premultipliedAlpha: true,\n            transparent: true\n        };\n    };\n    return ImageLayer;\n}(layer_1.Layer));\nexports.ImageLayer = ImageLayer;\n","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = y[op[0] & 2 ? \"return\" : op[0] ? \"throw\" : \"next\"]) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [0, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Three = require(\"three\");\nvar images_1 = require(\"../base-layers/images\");\nvar labels_1 = require(\"../base-layers/labels\");\nvar bounds_1 = require(\"../primitives/bounds\");\nvar attribute_generation_1 = require(\"../shaders/util/attribute-generation\");\nvar generate_default_scene_1 = require(\"../surface/generate-default-scene\");\nvar generate_layer_geometry_1 = require(\"../surface/generate-layer-geometry\");\nvar generate_layer_material_1 = require(\"../surface/generate-layer-material\");\nvar generate_layer_model_1 = require(\"../surface/generate-layer-model\");\nvar inject_shader_io_1 = require(\"../surface/inject-shader-io\");\nvar mouse_event_manager_1 = require(\"../surface/mouse-event-manager\");\nvar scene_1 = require(\"../surface/scene\");\nvar view_1 = require(\"../surface/view\");\nvar data_bounds_1 = require(\"../util/data-bounds\");\nvar instance_uniform_manager_1 = require(\"../util/instance-uniform-manager\");\nvar layer_mouse_events_1 = require(\"./event-managers/layer-mouse-events\");\nvar texture_1 = require(\"./texture\");\nvar atlas_resource_manager_1 = require(\"./texture/atlas-resource-manager\");\nvar DEFAULT_BACKGROUND_COLOR = new Three.Color(1.0, 1.0, 1.0);\nfunction isCanvas(val) {\n    return Boolean(val.getContext);\n}\nfunction isString(val) {\n    return Boolean(val.substr);\n}\nfunction isWebGLContext(val) {\n    return Boolean(val.canvas);\n}\nfunction createLayer(layerClass, props) {\n    return [layerClass, props];\n}\nexports.createLayer = createLayer;\nvar LayerSurface = (function () {\n    function LayerSurface() {\n        this.atlasManager = new texture_1.AtlasManager();\n        this.frameMetrics = {\n            currentFrame: 0,\n            currentTime: Date.now() | 0,\n            previousTime: Date.now() | 0\n        };\n        this.isBufferingAtlas = false;\n        this.layers = new Map();\n        this.pixelRatio = window.devicePixelRatio;\n        this.scenes = new Map();\n        this.sceneViews = [];\n        this.willDisposeLayer = new Map();\n    }\n    Object.defineProperty(LayerSurface.prototype, \"gl\", {\n        get: function () {\n            return this.context;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    LayerSurface.prototype.addLayer = function (layer) {\n        if (!layer.id) {\n            console.warn(\"All layers must have an id\");\n            return layer;\n        }\n        if (this.layers.get(layer.id)) {\n            console.warn(\"All layer's ids must be unique per layer manager\");\n            return layer;\n        }\n        this.layers.set(layer.id, layer);\n        this.initLayer(layer);\n        return layer;\n    };\n    LayerSurface.prototype.commit = function (time, frameIncrement, onViewReady) {\n        return __awaiter(this, void 0, void 0, function () {\n            var scenes, i, end, scene, views, layers, k, endk, view, j, endj, layer;\n            return __generator(this, function (_a) {\n                if (!this.gl)\n                    return [2];\n                if (frameIncrement)\n                    this.frameMetrics.currentFrame++;\n                this.frameMetrics.previousTime = this.frameMetrics.currentTime;\n                if (time === undefined) {\n                    this.frameMetrics.currentTime = Date.now() | 0;\n                }\n                else {\n                    if (this.frameMetrics.previousTime === this.frameMetrics.currentTime) {\n                        this.frameMetrics.previousTime = time;\n                    }\n                    this.frameMetrics.currentTime = time;\n                }\n                scenes = Array.from(this.scenes.values());\n                for (i = 0, end = scenes.length; i < end; ++i) {\n                    scene = scenes[i];\n                    views = Array.from(scene.viewById.values());\n                    layers = scene.layers;\n                    scene.sortLayers();\n                    for (k = 0, endk = views.length; k < endk; ++k) {\n                        view = views[k];\n                        view.fitViewtoViewport(new bounds_1.Bounds({\n                            height: this.context.canvas.height,\n                            width: this.context.canvas.width,\n                            x: 0,\n                            y: 0\n                        }));\n                        for (j = 0, endj = layers.length; j < endj; ++j) {\n                            layer = layers[j];\n                            layer.view = view;\n                            layer.draw();\n                        }\n                        if (onViewReady) {\n                            onViewReady(scene, view);\n                        }\n                    }\n                }\n                return [2];\n            });\n        });\n    };\n    LayerSurface.prototype.destroy = function () {\n        this.layers.forEach(function (layer) { return layer.destroy(); });\n        this.resourceManager.destroy();\n        this.mouseManager.destroy();\n        this.sceneViews.forEach(function (sceneView) { return sceneView.scene.destroy(); });\n        this.renderer.dispose();\n        labels_1.LabelInstance.destroy();\n        images_1.ImageInstance.destroy();\n    };\n    LayerSurface.prototype.draw = function (time) {\n        return __awaiter(this, void 0, void 0, function () {\n            var _this = this;\n            var didBuffer;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        if (!this.gl)\n                            return [2];\n                        this.commit(time, true, function (scene, view) {\n                            return _this.drawSceneView(scene.container, view);\n                        });\n                        if (this.mouseManager.waitingForRender) {\n                            this.sceneViews.forEach(function (sceneView) {\n                                sceneView.bounds = new data_bounds_1.DataBounds(sceneView.view.screenBounds);\n                                sceneView.bounds.data = sceneView;\n                            });\n                            this.mouseManager.waitingForRender = false;\n                        }\n                        if (!!this.isBufferingAtlas) return [3, 2];\n                        this.isBufferingAtlas = true;\n                        return [4, this.resourceManager.dequeueRequests()];\n                    case 1:\n                        didBuffer = _a.sent();\n                        this.isBufferingAtlas = false;\n                        if (didBuffer)\n                            this.draw();\n                        _a.label = 2;\n                    case 2: return [2];\n                }\n            });\n        });\n    };\n    LayerSurface.prototype.drawSceneView = function (scene, view) {\n        var offset = { x: view.viewBounds.left, y: view.viewBounds.top };\n        var size = view.viewBounds;\n        var rendererSize = this.renderer.getSize();\n        rendererSize.width *= this.renderer.getPixelRatio();\n        rendererSize.height *= this.renderer.getPixelRatio();\n        var background = view.background;\n        this.context.enable(this.context.SCISSOR_TEST);\n        this.context.scissor(offset.x, rendererSize.height - offset.y - size.height, size.width, size.height);\n        if (view.background) {\n            this.context.clearColor(background[0], background[1], background[2], background[3]);\n        }\n        if (view.clearFlags) {\n            this.context.clear((view.clearFlags.indexOf(view_1.ClearFlags.COLOR) > -1\n                ? this.context.COLOR_BUFFER_BIT\n                : 0x0) |\n                (view.clearFlags.indexOf(view_1.ClearFlags.DEPTH) > -1\n                    ? this.context.DEPTH_BUFFER_BIT\n                    : 0x0) |\n                (view.clearFlags.indexOf(view_1.ClearFlags.STENCIL) > -1\n                    ? this.context.STENCIL_BUFFER_BIT\n                    : 0x0));\n        }\n        else {\n            this.context.clear(this.context.COLOR_BUFFER_BIT | this.context.DEPTH_BUFFER_BIT);\n        }\n        this.renderer.setViewport(offset.x / this.pixelRatio, offset.y / this.pixelRatio, size.width, size.height);\n        if (scene)\n            this.renderer.render(scene, view.viewCamera.baseCamera);\n    };\n    LayerSurface.prototype.getViewSize = function (viewId) {\n        for (var _i = 0, _a = this.sceneViews; _i < _a.length; _i++) {\n            var sceneView = _a[_i];\n            if (sceneView.view.id === viewId) {\n                return sceneView.view.screenBounds;\n            }\n        }\n        return null;\n    };\n    LayerSurface.prototype.getViewWorldBounds = function (viewId) {\n        for (var _i = 0, _a = this.sceneViews; _i < _a.length; _i++) {\n            var sceneView = _a[_i];\n            if (sceneView.view.id === viewId) {\n                var view = sceneView.view;\n                if (view.screenBounds) {\n                    var topLeft = view.viewToWorld({ x: 0, y: 0 });\n                    var bottomRight = view.screenToWorld({\n                        x: view.screenBounds.right,\n                        y: view.screenBounds.bottom\n                    });\n                    return new bounds_1.Bounds({\n                        bottom: bottomRight.y,\n                        left: topLeft.x,\n                        right: bottomRight.x,\n                        top: topLeft.y\n                    });\n                }\n                else {\n                    return null;\n                }\n            }\n        }\n        return null;\n    };\n    LayerSurface.prototype.init = function (options) {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        this.pixelRatio = options.pixelRatio || this.pixelRatio;\n                        this.setContext(options.context);\n                        if (!this.gl) return [3, 2];\n                        this.initGL(options);\n                        this.initMouseManager(options);\n                        return [4, this.initResources(options)];\n                    case 1:\n                        _a.sent();\n                        return [3, 3];\n                    case 2:\n                        console.warn(\"Could not establish a GL context. Layer Surface will be unable to render\");\n                        _a.label = 3;\n                    case 3: return [2, this];\n                }\n            });\n        });\n    };\n    LayerSurface.prototype.initGL = function (options) {\n        var _this = this;\n        if (!this.context) {\n            console.error(\"Can not initialize Layer Surface as a valid GL context was not established.\");\n            return;\n        }\n        var canvas = this.context.canvas;\n        var width = canvas.width;\n        var height = canvas.height;\n        this.renderer = new Three.WebGLRenderer({\n            alpha: options.background && options.background[3] < 1.0,\n            antialias: true,\n            canvas: canvas,\n            preserveDrawingBuffer: true\n        });\n        this.renderer.autoClear = false;\n        this.renderer.setFaceCulling(Three.CullFaceNone);\n        this.renderer.setSize(width, height);\n        this.renderer.setPixelRatio(this.pixelRatio);\n        if (options.background) {\n            this.renderer.setClearColor(new Three.Color(options.background[0], options.background[1], options.background[2]), options.background[3]);\n        }\n        else {\n            this.renderer.setClearColor(DEFAULT_BACKGROUND_COLOR);\n        }\n        this.defaultSceneElements = generate_default_scene_1.generateDefaultScene(this.context);\n        this.defaultSceneElements.view.background = options.background;\n        this.scenes.set(this.defaultSceneElements.scene.id, this.defaultSceneElements.scene);\n        var sceneViewDepth = 0;\n        this.sceneViews.push({\n            depth: ++sceneViewDepth,\n            scene: this.defaultSceneElements.scene,\n            view: this.defaultSceneElements.view\n        });\n        this.context.enable(this.context.SCISSOR_TEST);\n        if (options.scenes) {\n            options.scenes.forEach(function (sceneOptions) {\n                var newScene = new scene_1.Scene(sceneOptions);\n                if (sceneOptions.views.length === 0) {\n                    newScene.addView(_this.defaultSceneElements.view);\n                    _this.sceneViews.push({\n                        depth: ++sceneViewDepth,\n                        scene: newScene,\n                        view: _this.defaultSceneElements.view\n                    });\n                }\n                sceneOptions.views.forEach(function (viewOptions) {\n                    var newView = new view_1.View(viewOptions);\n                    newView.camera = newView.camera || _this.defaultSceneElements.camera;\n                    newView.viewCamera =\n                        newView.viewCamera || _this.defaultSceneElements.viewCamera;\n                    newView.viewport =\n                        newView.viewport || _this.defaultSceneElements.viewport;\n                    newView.pixelRatio = _this.pixelRatio;\n                    newScene.addView(newView);\n                    for (var _i = 0, _a = _this.sceneViews; _i < _a.length; _i++) {\n                        var sceneView = _a[_i];\n                        if (sceneView.view.id === newView.id) {\n                            console.warn(\"You can NOT have two views with the same id. Please use unique identifiers for every view generated.\");\n                        }\n                    }\n                    _this.sceneViews.push({\n                        depth: ++sceneViewDepth,\n                        scene: newScene,\n                        view: newView\n                    });\n                });\n                _this.scenes.set(sceneOptions.key, newScene);\n            });\n        }\n    };\n    LayerSurface.prototype.initLayer = function (layer) {\n        layer.surface = this;\n        layer.resource = this.resourceManager;\n        var scene = this.addLayerToScene(layer);\n        var shaderIO = layer.initShader();\n        shaderIO.instanceAttributes = (shaderIO.instanceAttributes || []).filter(Boolean);\n        shaderIO.vertexAttributes = (shaderIO.vertexAttributes || []).filter(Boolean);\n        shaderIO.uniforms = (shaderIO.uniforms || []).filter(Boolean);\n        var _a = inject_shader_io_1.injectShaderIO(layer, shaderIO), vertexAttributes = _a.vertexAttributes, instanceAttributes = _a.instanceAttributes, uniforms = _a.uniforms;\n        var shaderMetrics = attribute_generation_1.injectFragments(shaderIO, vertexAttributes, instanceAttributes, uniforms);\n        var geometry = generate_layer_geometry_1.generateLayerGeometry(shaderMetrics.maxInstancesPerBuffer, vertexAttributes, shaderIO.vertexCount);\n        var material = generate_layer_material_1.generateLayerMaterial(layer, shaderMetrics.vs, shaderMetrics.fs, uniforms, shaderMetrics.materialUniforms);\n        var model = generate_layer_model_1.generateLayerModel(layer, geometry, material);\n        layer.geometry = geometry;\n        layer.instanceAttributes = instanceAttributes;\n        layer.instanceVertexCount = shaderIO.vertexCount;\n        layer.material = material;\n        layer.maxInstancesPerBuffer = shaderMetrics.maxInstancesPerBuffer;\n        layer.model = model;\n        layer.uniforms = uniforms;\n        layer.vertexAttributes = vertexAttributes;\n        layer.uniformManager = new instance_uniform_manager_1.InstanceUniformManager(layer, scene);\n        return layer;\n    };\n    LayerSurface.prototype.initMouseManager = function (options) {\n        var eventManagers = (options.eventManagers || []).concat([\n            new layer_mouse_events_1.LayerMouseEvents(this.sceneViews)\n        ]);\n        this.mouseManager = new mouse_event_manager_1.MouseEventManager(this.context.canvas, this.sceneViews, eventManagers, options.handlesWheelEvents);\n    };\n    LayerSurface.prototype.initResources = function (options) {\n        return __awaiter(this, void 0, void 0, function () {\n            var _i, _a, resource;\n            return __generator(this, function (_b) {\n                switch (_b.label) {\n                    case 0:\n                        if (!options.atlasResources) return [3, 4];\n                        _i = 0, _a = options.atlasResources;\n                        _b.label = 1;\n                    case 1:\n                        if (!(_i < _a.length)) return [3, 4];\n                        resource = _a[_i];\n                        return [4, this.atlasManager.createAtlas(resource)];\n                    case 2:\n                        _b.sent();\n                        _b.label = 3;\n                    case 3:\n                        _i++;\n                        return [3, 1];\n                    case 4:\n                        this.resourceManager = new atlas_resource_manager_1.AtlasResourceManager({\n                            atlasManager: this.atlasManager\n                        });\n                        return [2];\n                }\n            });\n        });\n    };\n    LayerSurface.prototype.addLayerToScene = function (layer) {\n        var scene = this.scenes.get(layer.props.scene || \"\");\n        if (!scene) {\n            scene = this.defaultSceneElements.scene;\n            if (layer.props.scene) {\n                console.warn(\"Layer specified a scene that is not within the layer surface manager. Layer will be added to the default scene.\");\n            }\n        }\n        scene.addLayer(layer);\n        return scene;\n    };\n    LayerSurface.prototype.removeLayer = function (layer) {\n        if (!layer) {\n            return null;\n        }\n        if (!this.layers.get(layer && layer.id)) {\n            console.warn(\"Tried to remove a layer that is not in the manager.\", layer);\n            return layer;\n        }\n        layer.uniformManager.removeFromScene();\n        layer.destroy();\n        this.layers.delete(layer.id);\n        return layer;\n    };\n    LayerSurface.prototype.render = function (layerInitializers) {\n        var _this = this;\n        if (!this.gl)\n            return;\n        if (layerInitializers && layerInitializers.length > 0) {\n            layerInitializers.forEach(function (init) {\n                var layerClass = init[0];\n                var props = init[1];\n                var existingLayer = _this.layers.get(props.key);\n                if (existingLayer) {\n                    existingLayer.willUpdateProps(props);\n                    Object.assign(existingLayer.props, props);\n                    existingLayer.didUpdateProps();\n                }\n                else {\n                    _this.addLayer(new layerClass(Object.assign({}, layerClass.defaultProps, props)));\n                }\n                _this.willDisposeLayer.set(props.key, false);\n            });\n        }\n        this.willDisposeLayer.forEach(function (dispose, layerId) {\n            if (dispose) {\n                var layer = _this.layers.get(layerId);\n                if (layer) {\n                    _this.removeLayer(layer);\n                }\n                else {\n                    console.warn(\"this.willDisposeLayer called on non-gettable layer.\");\n                }\n            }\n        });\n        this.willDisposeLayer.clear();\n        this.layers.forEach(function (_layer, id) {\n            _this.willDisposeLayer.set(id, true);\n        });\n    };\n    LayerSurface.prototype.fitContainer = function (_pixelRatio) {\n        var container = this.context.canvas.parentElement;\n        if (container) {\n            var canvas = this.context.canvas;\n            canvas.className = \"\";\n            canvas.setAttribute(\"style\", \"\");\n            container.style.position = \"relative\";\n            canvas.style.position = \"absolute\";\n            canvas.style.left = \"0xp\";\n            canvas.style.top = \"0xp\";\n            canvas.style.width = \"100%\";\n            canvas.style.height = \"100%\";\n            canvas.setAttribute(\"width\", \"\");\n            canvas.setAttribute(\"height\", \"\");\n            var containerBox = container.getBoundingClientRect();\n            var box = canvas.getBoundingClientRect();\n            this.resize(box.width || 100, containerBox.height || 100);\n        }\n    };\n    LayerSurface.prototype.resize = function (width, height, pixelRatio) {\n        var _this = this;\n        this.pixelRatio = pixelRatio || this.pixelRatio;\n        this.sceneViews.forEach(function (sceneView) { return (sceneView.view.pixelRatio = _this.pixelRatio); });\n        this.renderer.setSize(width || 100, height || 100);\n        this.renderer.setPixelRatio(this.pixelRatio);\n        this.mouseManager.resize();\n    };\n    LayerSurface.prototype.setContext = function (context) {\n        if (!context) {\n            return;\n        }\n        if (isWebGLContext(context)) {\n            this.context = context;\n        }\n        else if (isCanvas(context)) {\n            var canvasContext = context.getContext(\"webgl\") || context.getContext(\"experimental-webgl\");\n            if (!canvasContext) {\n                console.warn(\"A valid GL context was not found for the context provided to the surface. This surface will not be able to operate.\");\n            }\n            else {\n                this.context = canvasContext;\n            }\n        }\n        else if (isString(context)) {\n            var element = document.getElementById(context);\n            if (isCanvas(element)) {\n                this.setContext(element);\n            }\n        }\n    };\n    return LayerSurface;\n}());\nexports.LayerSurface = LayerSurface;\n","\"use strict\";\nfunction __export(m) {\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n}\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__export(require(\"./layer-surface\"));\n__export(require(\"./event-manager\"));\n__export(require(\"./generate-default-scene\"));\n__export(require(\"./generate-layer-geometry\"));\n__export(require(\"./generate-layer-material\"));\n__export(require(\"./generate-layer-model\"));\n__export(require(\"./inject-shader-io\"));\n__export(require(\"./layer\"));\n__export(require(\"./mouse-event-manager\"));\n__export(require(\"./scene\"));\n__export(require(\"./texture\"));\n__export(require(\"./view\"));\n","\"use strict\";\nfunction __export(m) {\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n}\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__export(require(\"./surface\"));\n__export(require(\"./util\"));\n__export(require(\"./base-layers\"));\n__export(require(\"./base-event-managers\"));\n__export(require(\"./types\"));\n__export(require(\"./primitives\"));\n","\"use strict\";\nfunction __export(m) {\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n}\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__export(require(\"./voidgl\"));\n"],"sourceRoot":""}